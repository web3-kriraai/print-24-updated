function X2(s,r){for(var n=0;n<r.length;n++){const l=r[n];if(typeof l!="string"&&!Array.isArray(l)){for(const d in l)if(d!=="default"&&!(d in s)){const m=Object.getOwnPropertyDescriptor(l,d);m&&Object.defineProperty(s,d,m.get?m:{enumerable:!0,get:()=>l[d]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const u of m.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function n(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(d){if(d.ep)return;d.ep=!0;const m=n(d);fetch(d.href,m)}})();var X9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ew(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Op={exports:{}},bd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b;function tw(){if(_b)return bd;_b=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(l,d,m){var u=null;if(m!==void 0&&(u=""+m),d.key!==void 0&&(u=""+d.key),"key"in d){m={};for(var p in d)p!=="key"&&(m[p]=d[p])}else m=d;return d=m.ref,{$$typeof:s,type:l,key:u,ref:d!==void 0?d:null,props:m}}return bd.Fragment=r,bd.jsx=n,bd.jsxs=n,bd}var Mb;function sw(){return Mb||(Mb=1,Op.exports=tw()),Op.exports}var e=sw(),Rp={exports:{}},yd={},_p={exports:{}},Mp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function aw(){return zb||(zb=1,(function(s){function r(B,ne){var Z=B.length;B.push(ne);e:for(;0<Z;){var ue=Z-1>>>1,ve=B[ue];if(0<d(ve,ne))B[ue]=ne,B[Z]=ve,Z=ue;else break e}}function n(B){return B.length===0?null:B[0]}function l(B){if(B.length===0)return null;var ne=B[0],Z=B.pop();if(Z!==ne){B[0]=Z;e:for(var ue=0,ve=B.length,O=ve>>>1;ue<O;){var J=2*(ue+1)-1,z=B[J],ye=J+1,xe=B[ye];if(0>d(z,Z))ye<ve&&0>d(xe,z)?(B[ue]=xe,B[ye]=Z,ue=ye):(B[ue]=z,B[J]=Z,ue=J);else if(ye<ve&&0>d(xe,Z))B[ue]=xe,B[ye]=Z,ue=ye;else break e}}return ne}function d(B,ne){var Z=B.sortIndex-ne.sortIndex;return Z!==0?Z:B.id-ne.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;s.unstable_now=function(){return m.now()}}else{var u=Date,p=u.now();s.unstable_now=function(){return u.now()-p}}var g=[],h=[],j=1,v=null,w=3,E=!1,A=!1,P=!1,q=!1,V=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function ae(B){for(var ne=n(h);ne!==null;){if(ne.callback===null)l(h);else if(ne.startTime<=B)l(h),ne.sortIndex=ne.expirationTime,r(g,ne);else break;ne=n(h)}}function H(B){if(P=!1,ae(B),!A)if(n(g)!==null)A=!0,D||(D=!0,X());else{var ne=n(h);ne!==null&&re(H,ne.startTime-B)}}var D=!1,k=-1,Q=5,W=-1;function te(){return q?!0:!(s.unstable_now()-W<Q)}function ie(){if(q=!1,D){var B=s.unstable_now();W=B;var ne=!0;try{e:{A=!1,P&&(P=!1,M(k),k=-1),E=!0;var Z=w;try{t:{for(ae(B),v=n(g);v!==null&&!(v.expirationTime>B&&te());){var ue=v.callback;if(typeof ue=="function"){v.callback=null,w=v.priorityLevel;var ve=ue(v.expirationTime<=B);if(B=s.unstable_now(),typeof ve=="function"){v.callback=ve,ae(B),ne=!0;break t}v===n(g)&&l(g),ae(B)}else l(g);v=n(g)}if(v!==null)ne=!0;else{var O=n(h);O!==null&&re(H,O.startTime-B),ne=!1}}break e}finally{v=null,w=Z,E=!1}ne=void 0}}finally{ne?X():D=!1}}}var X;if(typeof R=="function")X=function(){R(ie)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,$=Se.port2;Se.port1.onmessage=ie,X=function(){$.postMessage(null)}}else X=function(){V(ie,0)};function re(B,ne){k=V(function(){B(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(B){B.callback=null},s.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<B?Math.floor(1e3/B):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(B){switch(w){case 1:case 2:case 3:var ne=3;break;default:ne=w}var Z=w;w=ne;try{return B()}finally{w=Z}},s.unstable_requestPaint=function(){q=!0},s.unstable_runWithPriority=function(B,ne){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=w;w=B;try{return ne()}finally{w=Z}},s.unstable_scheduleCallback=function(B,ne,Z){var ue=s.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ue+Z:ue):Z=ue,B){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Z+ve,B={id:j++,callback:ne,priorityLevel:B,startTime:Z,expirationTime:ve,sortIndex:-1},Z>ue?(B.sortIndex=Z,r(h,B),n(g)===null&&B===n(h)&&(P?(M(k),k=-1):P=!0,re(H,Z-ue))):(B.sortIndex=ve,r(g,B),A||E||(A=!0,D||(D=!0,X()))),B},s.unstable_shouldYield=te,s.unstable_wrapCallback=function(B){var ne=w;return function(){var Z=w;w=ne;try{return B.apply(this,arguments)}finally{w=Z}}}})(Mp)),Mp}var Lb;function rw(){return Lb||(Lb=1,_p.exports=aw()),_p.exports}var zp={exports:{}},bs={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b;function nw(){if($b)return bs;$b=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function E(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,q={};function V(O,J,z){this.props=O,this.context=J,this.refs=q,this.updater=z||A}V.prototype.isReactComponent={},V.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},V.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function M(){}M.prototype=V.prototype;function R(O,J,z){this.props=O,this.context=J,this.refs=q,this.updater=z||A}var ae=R.prototype=new M;ae.constructor=R,P(ae,V.prototype),ae.isPureReactComponent=!0;var H=Array.isArray;function D(){}var k={H:null,A:null,T:null,S:null},Q=Object.prototype.hasOwnProperty;function W(O,J,z){var ye=z.ref;return{$$typeof:s,type:O,key:J,ref:ye!==void 0?ye:null,props:z}}function te(O,J){return W(O.type,J,O.props)}function ie(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function X(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(z){return J[z]})}var Se=/\/+/g;function $(O,J){return typeof O=="object"&&O!==null&&O.key!=null?X(""+O.key):J.toString(36)}function re(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(D,D):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function B(O,J,z,ye,xe){var I=typeof O;(I==="undefined"||I==="boolean")&&(O=null);var L=!1;if(O===null)L=!0;else switch(I){case"bigint":case"string":case"number":L=!0;break;case"object":switch(O.$$typeof){case s:case r:L=!0;break;case j:return L=O._init,B(L(O._payload),J,z,ye,xe)}}if(L)return xe=xe(O),L=ye===""?"."+$(O,0):ye,H(xe)?(z="",L!=null&&(z=L.replace(Se,"$&/")+"/"),B(xe,J,z,"",function(fe){return fe})):xe!=null&&(ie(xe)&&(xe=te(xe,z+(xe.key==null||O&&O.key===xe.key?"":(""+xe.key).replace(Se,"$&/")+"/")+L)),J.push(xe)),1;L=0;var _=ye===""?".":ye+":";if(H(O))for(var me=0;me<O.length;me++)ye=O[me],I=_+$(ye,me),L+=B(ye,J,z,I,xe);else if(me=E(O),typeof me=="function")for(O=me.call(O),me=0;!(ye=O.next()).done;)ye=ye.value,I=_+$(ye,me++),L+=B(ye,J,z,I,xe);else if(I==="object"){if(typeof O.then=="function")return B(re(O),J,z,ye,xe);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return L}function ne(O,J,z){if(O==null)return O;var ye=[],xe=0;return B(O,ye,"","",function(I){return J.call(z,I,xe++)}),ye}function Z(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(z){(O._status===0||O._status===-1)&&(O._status=1,O._result=z)},function(z){(O._status===0||O._status===-1)&&(O._status=2,O._result=z)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var ue=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ve={map:ne,forEach:function(O,J,z){ne(O,function(){J.apply(this,arguments)},z)},count:function(O){var J=0;return ne(O,function(){J++}),J},toArray:function(O){return ne(O,function(J){return J})||[]},only:function(O){if(!ie(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return bs.Activity=v,bs.Children=ve,bs.Component=V,bs.Fragment=n,bs.Profiler=d,bs.PureComponent=R,bs.StrictMode=l,bs.Suspense=g,bs.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,bs.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},bs.cache=function(O){return function(){return O.apply(null,arguments)}},bs.cacheSignal=function(){return null},bs.cloneElement=function(O,J,z){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ye=P({},O.props),xe=O.key;if(J!=null)for(I in J.key!==void 0&&(xe=""+J.key),J)!Q.call(J,I)||I==="key"||I==="__self"||I==="__source"||I==="ref"&&J.ref===void 0||(ye[I]=J[I]);var I=arguments.length-2;if(I===1)ye.children=z;else if(1<I){for(var L=Array(I),_=0;_<I;_++)L[_]=arguments[_+2];ye.children=L}return W(O.type,xe,ye)},bs.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:m,_context:O},O},bs.createElement=function(O,J,z){var ye,xe={},I=null;if(J!=null)for(ye in J.key!==void 0&&(I=""+J.key),J)Q.call(J,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(xe[ye]=J[ye]);var L=arguments.length-2;if(L===1)xe.children=z;else if(1<L){for(var _=Array(L),me=0;me<L;me++)_[me]=arguments[me+2];xe.children=_}if(O&&O.defaultProps)for(ye in L=O.defaultProps,L)xe[ye]===void 0&&(xe[ye]=L[ye]);return W(O,I,xe)},bs.createRef=function(){return{current:null}},bs.forwardRef=function(O){return{$$typeof:p,render:O}},bs.isValidElement=ie,bs.lazy=function(O){return{$$typeof:j,_payload:{_status:-1,_result:O},_init:Z}},bs.memo=function(O,J){return{$$typeof:h,type:O,compare:J===void 0?null:J}},bs.startTransition=function(O){var J=k.T,z={};k.T=z;try{var ye=O(),xe=k.S;xe!==null&&xe(z,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(D,ue)}catch(I){ue(I)}finally{J!==null&&z.types!==null&&(J.types=z.types),k.T=J}},bs.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},bs.use=function(O){return k.H.use(O)},bs.useActionState=function(O,J,z){return k.H.useActionState(O,J,z)},bs.useCallback=function(O,J){return k.H.useCallback(O,J)},bs.useContext=function(O){return k.H.useContext(O)},bs.useDebugValue=function(){},bs.useDeferredValue=function(O,J){return k.H.useDeferredValue(O,J)},bs.useEffect=function(O,J){return k.H.useEffect(O,J)},bs.useEffectEvent=function(O){return k.H.useEffectEvent(O)},bs.useId=function(){return k.H.useId()},bs.useImperativeHandle=function(O,J,z){return k.H.useImperativeHandle(O,J,z)},bs.useInsertionEffect=function(O,J){return k.H.useInsertionEffect(O,J)},bs.useLayoutEffect=function(O,J){return k.H.useLayoutEffect(O,J)},bs.useMemo=function(O,J){return k.H.useMemo(O,J)},bs.useOptimistic=function(O,J){return k.H.useOptimistic(O,J)},bs.useReducer=function(O,J,z){return k.H.useReducer(O,J,z)},bs.useRef=function(O){return k.H.useRef(O)},bs.useState=function(O){return k.H.useState(O)},bs.useSyncExternalStore=function(O,J,z){return k.H.useSyncExternalStore(O,J,z)},bs.useTransition=function(){return k.H.useTransition()},bs.version="19.2.3",bs}var Fb;function Kx(){return Fb||(Fb=1,zp.exports=nw()),zp.exports}var Lp={exports:{}},vr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function iw(){if(Ub)return vr;Ub=1;var s=Kx();function r(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)h+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(g,h,j){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:v==null?null:""+v,children:g,containerInfo:h,implementation:j}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return vr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,vr.createPortal=function(g,h){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(r(299));return m(g,h,null,j)},vr.flushSync=function(g){var h=u.T,j=l.p;try{if(u.T=null,l.p=2,g)return g()}finally{u.T=h,l.p=j,l.d.f()}},vr.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,l.d.C(g,h))},vr.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},vr.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var j=h.as,v=p(j,h.crossOrigin),w=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;j==="style"?l.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:E}):j==="script"&&l.d.X(g,{crossOrigin:v,integrity:w,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},vr.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var j=p(h.as,h.crossOrigin);l.d.M(g,{crossOrigin:j,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&l.d.M(g)},vr.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var j=h.as,v=p(j,h.crossOrigin);l.d.L(g,j,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},vr.preloadModule=function(g,h){if(typeof g=="string")if(h){var j=p(h.as,h.crossOrigin);l.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:j,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else l.d.m(g)},vr.requestFormReset=function(g){l.d.r(g)},vr.unstable_batchedUpdates=function(g,h){return g(h)},vr.useFormState=function(g,h,j){return u.H.useFormState(g,h,j)},vr.useFormStatus=function(){return u.H.useHostTransitionStatus()},vr.version="19.2.3",vr}var Ib;function ov(){if(Ib)return Lp.exports;Ib=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Lp.exports=iw(),Lp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function lw(){if(Bb)return yd;Bb=1;var s=rw(),r=Kx(),n=ov();function l(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var a=t,i=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(i=a.return),t=a.return;while(t)}return a.tag===3?i:null}function u(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function p(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(m(t)!==t)throw Error(l(188))}function h(t){var a=t.alternate;if(!a){if(a=m(t),a===null)throw Error(l(188));return a!==t?null:t}for(var i=t,o=a;;){var x=i.return;if(x===null)break;var f=x.alternate;if(f===null){if(o=x.return,o!==null){i=o;continue}break}if(x.child===f.child){for(f=x.child;f;){if(f===i)return g(x),t;if(f===o)return g(x),a;f=f.sibling}throw Error(l(188))}if(i.return!==o.return)i=x,o=f;else{for(var C=!1,F=x.child;F;){if(F===i){C=!0,i=x,o=f;break}if(F===o){C=!0,o=x,i=f;break}F=F.sibling}if(!C){for(F=f.child;F;){if(F===i){C=!0,i=f,o=x;break}if(F===o){C=!0,o=f,i=x;break}F=F.sibling}if(!C)throw Error(l(189))}}if(i.alternate!==o)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?t:a}function j(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=j(t),a!==null)return a;t=t.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),R=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function X(t){return t===null||typeof t!="object"?null:(t=ie&&t[ie]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Symbol.for("react.client.reference");function $(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Se?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case V:return"Profiler";case q:return"StrictMode";case H:return"Suspense";case D:return"SuspenseList";case W:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case A:return"Portal";case R:return t.displayName||"Context";case M:return(t._context.displayName||"Context")+".Consumer";case ae:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return a=t.displayName||null,a!==null?a:$(t.type)||"Memo";case Q:a=t._payload,t=t._init;try{return $(t(a))}catch{}}return null}var re=Array.isArray,B=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ue=[],ve=-1;function O(t){return{current:t}}function J(t){0>ve||(t.current=ue[ve],ue[ve]=null,ve--)}function z(t,a){ve++,ue[ve]=t.current,t.current=a}var ye=O(null),xe=O(null),I=O(null),L=O(null);function _(t,a){switch(z(I,a),z(xe,t),z(ye,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?ab(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=ab(a),t=rb(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(ye),z(ye,t)}function me(){J(ye),J(xe),J(I)}function fe(t){t.memoizedState!==null&&z(L,t);var a=ye.current,i=rb(a,t.type);a!==i&&(z(xe,t),z(ye,i))}function Me(t){xe.current===t&&(J(ye),J(xe)),L.current===t&&(J(L),pd._currentValue=Z)}var se,le;function Be(t){if(se===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);se=a&&a[1]||"",le=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+se+t+le}var Qe=!1;function tt(t,a){if(!t||Qe)return"";Qe=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(qe){var Oe=qe}Reflect.construct(t,[],Xe)}else{try{Xe.call()}catch(qe){Oe=qe}t.call(Xe.prototype)}}else{try{throw Error()}catch(qe){Oe=qe}(Xe=t())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(qe){if(qe&&Oe&&typeof qe.stack=="string")return[qe.stack,Oe.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),C=f[0],F=f[1];if(C&&F){var de=C.split(`
`),Ee=F.split(`
`);for(x=o=0;o<de.length&&!de[o].includes("DetermineComponentFrameRoot");)o++;for(;x<Ee.length&&!Ee[x].includes("DetermineComponentFrameRoot");)x++;if(o===de.length||x===Ee.length)for(o=de.length-1,x=Ee.length-1;1<=o&&0<=x&&de[o]!==Ee[x];)x--;for(;1<=o&&0<=x;o--,x--)if(de[o]!==Ee[x]){if(o!==1||x!==1)do if(o--,x--,0>x||de[o]!==Ee[x]){var Ye=`
`+de[o].replace(" at new "," at ");return t.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",t.displayName)),Ye}while(1<=o&&0<=x);break}}}finally{Qe=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?Be(i):""}function ot(t,a){switch(t.tag){case 26:case 27:case 5:return Be(t.type);case 16:return Be("Lazy");case 13:return t.child!==a&&a!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return tt(t.type,!1);case 11:return tt(t.type.render,!1);case 1:return tt(t.type,!0);case 31:return Be("Activity");default:return""}}function Ve(t){try{var a="",i=null;do a+=ot(t,i),i=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Ct=Object.prototype.hasOwnProperty,ds=s.unstable_scheduleCallback,At=s.unstable_cancelCallback,as=s.unstable_shouldYield,hs=s.unstable_requestPaint,Vt=s.unstable_now,Bs=s.unstable_getCurrentPriorityLevel,Ss=s.unstable_ImmediatePriority,wa=s.unstable_UserBlockingPriority,ge=s.unstable_NormalPriority,yt=s.unstable_LowPriority,_t=s.unstable_IdlePriority,ps=s.log,ys=s.unstable_setDisableYieldValue,at=null,Yt=null;function Ms(t){if(typeof ps=="function"&&ys(t),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(at,t)}catch{}}var rs=Math.clz32?Math.clz32:mt,ea=Math.log,He=Math.LN2;function mt(t){return t>>>=0,t===0?32:31-(ea(t)/He|0)|0}var xt=256,Ds=262144,Vs=4194304;function Ks(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Gs(t,a,i){var o=t.pendingLanes;if(o===0)return 0;var x=0,f=t.suspendedLanes,C=t.pingedLanes;t=t.warmLanes;var F=o&134217727;return F!==0?(o=F&~f,o!==0?x=Ks(o):(C&=F,C!==0?x=Ks(C):i||(i=F&~t,i!==0&&(x=Ks(i))))):(F=o&~f,F!==0?x=Ks(F):C!==0?x=Ks(C):i||(i=o&~t,i!==0&&(x=Ks(i)))),x===0?0:a!==0&&a!==x&&(a&f)===0&&(f=x&-x,i=a&-a,f>=i||f===32&&(i&4194048)!==0)?a:x}function ha(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function $a(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ir(){var t=Vs;return Vs<<=1,(Vs&62914560)===0&&(Vs=4194304),t}function mr(t){for(var a=[],i=0;31>i;i++)a.push(t);return a}function ln(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Li(t,a,i,o,x,f){var C=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var F=t.entanglements,de=t.expirationTimes,Ee=t.hiddenUpdates;for(i=C&~i;0<i;){var Ye=31-rs(i),Xe=1<<Ye;F[Ye]=0,de[Ye]=-1;var Oe=Ee[Ye];if(Oe!==null)for(Ee[Ye]=null,Ye=0;Ye<Oe.length;Ye++){var qe=Oe[Ye];qe!==null&&(qe.lane&=-536870913)}i&=~Xe}o!==0&&Qn(t,o,0),f!==0&&x===0&&t.tag!==0&&(t.suspendedLanes|=f&~(C&~a))}function Qn(t,a,i){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-rs(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|i&261930}function oe(t,a){var i=t.entangledLanes|=a;for(t=t.entanglements;i;){var o=31-rs(i),x=1<<o;x&a|t[o]&a&&(t[o]|=a),i&=~x}}function be(t,a){var i=a&-a;return i=(i&42)!==0?1:Te(i),(i&(t.suspendedLanes|a))!==0?0:i}function Te(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function rt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function lt(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:Eb(t.type))}function zt(t,a){var i=ne.p;try{return ne.p=t,a()}finally{ne.p=i}}var ct=Math.random().toString(36).slice(2),ft="__reactFiber$"+ct,kt="__reactProps$"+ct,Lt="__reactContainer$"+ct,Ut="__reactEvents$"+ct,It="__reactListeners$"+ct,cs="__reactHandles$"+ct,Os="__reactResources$"+ct,gs="__reactMarker$"+ct;function la(t){delete t[ft],delete t[kt],delete t[Ut],delete t[It],delete t[cs]}function ns(t){var a=t[ft];if(a)return a;for(var i=t.parentNode;i;){if(a=i[Lt]||i[ft]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(t=ub(t);t!==null;){if(i=t[ft])return i;t=ub(t)}return a}t=i,i=t.parentNode}return null}function Rs(t){if(t=t[ft]||t[Lt]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Es(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(l(33))}function hr(t){var a=t[Os];return a||(a=t[Os]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function oa(t){t[gs]=!0}var yr=new Set,Sr={};function ta(t,a){lr(t,a),lr(t+"Capture",a)}function lr(t,a){for(Sr[t]=a,t=0;t<a.length;t++)yr.add(a[t])}var on=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ys={},es={};function Ts(t){return Ct.call(es,t)?!0:Ct.call(Ys,t)?!1:on.test(t)?es[t]=!0:(Ys[t]=!0,!1)}function Ga(t,a,i){if(Ts(a))if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+i)}}function ca(t,a,i){if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+i)}}function vs(t,a,i,o){if(o===null)t.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(a,i,""+o)}}function ya(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vn(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function or(t,a,i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var x=o.get,f=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return x.call(this)},set:function(C){i=""+C,f.call(this,C)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(C){i=""+C},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Yn(t){if(!t._valueTracker){var a=vn(t)?"checked":"value";t._valueTracker=or(t,a,""+t[a])}}function Nn(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var i=a.getValue(),o="";return t&&(o=vn(t)?t.checked?"true":"false":t.value),t=o,t!==i?(a.setValue(t),!0):!1}function cr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ea=/[\n"\\]/g;function da(t){return t.replace(Ea,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function zs(t,a,i,o,x,f,C,F){t.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.type=C:t.removeAttribute("type"),a!=null?C==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+ya(a)):t.value!==""+ya(a)&&(t.value=""+ya(a)):C!=="submit"&&C!=="reset"||t.removeAttribute("value"),a!=null?to(t,C,ya(a)):i!=null?to(t,C,ya(i)):o!=null&&t.removeAttribute("value"),x==null&&f!=null&&(t.defaultChecked=!!f),x!=null&&(t.checked=x&&typeof x!="function"&&typeof x!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?t.name=""+ya(F):t.removeAttribute("name")}function cn(t,a,i,o,x,f,C,F){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),a!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||a!=null)){Yn(t);return}i=i!=null?""+ya(i):"",a=a!=null?""+ya(a):i,F||a===t.value||(t.value=a),t.defaultValue=a}o=o??x,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=F?t.checked:!!o,t.defaultChecked=!!o,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(t.name=C),Yn(t)}function to(t,a,i){a==="number"&&cr(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function wn(t,a,i,o){if(t=t.options,a){a={};for(var x=0;x<i.length;x++)a["$"+i[x]]=!0;for(i=0;i<t.length;i++)x=a.hasOwnProperty("$"+t[i].value),t[i].selected!==x&&(t[i].selected=x),x&&o&&(t[i].defaultSelected=!0)}else{for(i=""+ya(i),a=null,x=0;x<t.length;x++){if(t[x].value===i){t[x].selected=!0,o&&(t[x].defaultSelected=!0);return}a!==null||t[x].disabled||(a=t[x])}a!==null&&(a.selected=!0)}}function Sn(t,a,i){if(a!=null&&(a=""+ya(a),a!==t.value&&(t.value=a),i==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=i!=null?""+ya(i):""}function he(t,a,i,o){if(a==null){if(o!=null){if(i!=null)throw Error(l(92));if(re(o)){if(1<o.length)throw Error(l(93));o=o[0]}i=o}i==null&&(i=""),a=i}i=ya(a),t.defaultValue=i,o=t.textContent,o===i&&o!==""&&o!==null&&(t.value=o),Yn(t)}function ze(t,a){if(a){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=a;return}}t.textContent=a}var Ce=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ne(t,a,i){var o=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,i):typeof i!="number"||i===0||Ce.has(a)?a==="float"?t.cssFloat=i:t[a]=(""+i).trim():t[a]=i+"px"}function Fe(t,a,i){if(a!=null&&typeof a!="object")throw Error(l(62));if(t=t.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var x in a)o=a[x],a.hasOwnProperty(x)&&i[x]!==o&&Ne(t,x,o)}else for(var f in a)a.hasOwnProperty(f)&&Ne(t,f,a[f])}function nt(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ge=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Le(t){return Ge.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ue(){}var Re=null;function vt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $e=null,ut=null;function Gt(t){var a=Rs(t);if(a&&(t=a.stateNode)){var i=t[kt]||null;e:switch(t=a.stateNode,a.type){case"input":if(zs(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+da(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var o=i[a];if(o!==t&&o.form===t.form){var x=o[kt]||null;if(!x)throw Error(l(90));zs(o,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(a=0;a<i.length;a++)o=i[a],o.form===t.form&&Nn(o)}break e;case"textarea":Sn(t,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&wn(t,!!i.multiple,a,!1)}}}var Cs=!1;function is(t,a,i){if(Cs)return t(a,i);Cs=!0;try{var o=t(a);return o}finally{if(Cs=!1,($e!==null||ut!==null)&&(Vu(),$e&&(a=$e,t=ut,ut=$e=null,Gt(a),t)))for(a=0;a<t.length;a++)Gt(t[a])}}function qs(t,a){var i=t.stateNode;if(i===null)return null;var o=i[kt]||null;if(o===null)return null;i=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(l(231,a,typeof i));return i}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ie=!1;if(As)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{Ie=!1}var et=null,it=null,Bt=null;function We(){if(Bt)return Bt;var t,a=it,i=a.length,o,x="value"in et?et.value:et.textContent,f=x.length;for(t=0;t<i&&a[t]===x[t];t++);var C=i-t;for(o=1;o<=C&&a[i-o]===x[f-o];o++);return Bt=x.slice(t,1<o?1-o:void 0)}function Pe(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function _e(){return!0}function Mt(){return!1}function Nt(t){function a(i,o,x,f,C){this._reactName=i,this._targetInst=x,this.type=o,this.nativeEvent=f,this.target=C,this.currentTarget=null;for(var F in t)t.hasOwnProperty(F)&&(i=t[F],this[F]=i?i(f):f[F]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?_e:Mt,this.isPropagationStopped=Mt,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=_e)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=_e)},persist:function(){},isPersistent:_e}),a}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ms=Nt(ts),jt=v({},ts,{view:0,detail:0}),Wt=Nt(jt),gt,Na,Ta,Cr=v({},jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ta&&(Ta&&t.type==="mousemove"?(gt=t.screenX-Ta.screenX,Na=t.screenY-Ta.screenY):Na=gt=0,Ta=t),gt)},movementY:function(t){return"movementY"in t?t.movementY:Na}}),dr=Nt(Cr),Fa=v({},Cr,{dataTransfer:0}),Ws=Nt(Fa),Qa=v({},jt,{relatedTarget:0}),Wn=Nt(Qa),Zn=v({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Kn=Nt(Zn),xi=v({},ts,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ec=Nt(xi),au=v({},ts,{data:0}),Jn=Nt(au),Tc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},th={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ru(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Eo[t])?!!a[t]:!1}function kc(){return ru}var Ft=v({},jt,{key:function(t){if(t.key){var a=Tc[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Pe(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?th[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kc,charCode:function(t){return t.type==="keypress"?Pe(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pe(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ua=Nt(Ft),To=v({},Cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pc=Nt(To),sh=v({},jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kc}),nu=Nt(sh),fi=v({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),iu=Nt(fi),ah=v({},Cr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dc=Nt(ah),Qs=v({},ts,{newState:0,oldState:0}),Xn=Nt(Qs),Fr=[9,13,27,32],gi=As&&"CompositionEvent"in window,ei=null;As&&"documentMode"in document&&(ei=document.documentMode);var lu=As&&"TextEvent"in window&&!ei,er=As&&(!gi||ei&&8<ei&&11>=ei),Oc=" ",ou=!1;function Rc(t,a){switch(t){case"keyup":return Fr.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ti(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $i=!1;function Ar(t,a){switch(t){case"compositionend":return ti(a);case"keypress":return a.which!==32?null:(ou=!0,Oc);case"textInput":return t=a.data,t===Oc&&ou?null:t;default:return null}}function Fi(t,a){if($i)return t==="compositionend"||!gi&&Rc(t,a)?(t=We(),Bt=it=et=null,$i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return er&&a.locale!=="ko"?null:a.data;default:return null}}var bi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cu(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!bi[t.type]:a==="textarea"}function du(t,a,i,o){$e?ut?ut.push(o):ut=[o]:$e=o,a=Zu(a,"onChange"),0<a.length&&(i=new ms("onChange","change",null,i,o),t.push({event:i,listeners:a}))}var ml=null,Er=null;function _c(t){Kg(t,0)}function Ui(t){var a=Es(t);if(Nn(a))return t}function hl(t,a){if(t==="change")return a}var Mc=!1;if(As){var pl;if(As){var qt="oninput"in document;if(!qt){var pr=document.createElement("div");pr.setAttribute("oninput","return;"),qt=typeof pr.oninput=="function"}pl=qt}else pl=!1;Mc=pl&&(!document.documentMode||9<document.documentMode)}function ee(){ml&&(ml.detachEvent("onpropertychange",bt),Er=ml=null)}function bt(t){if(t.propertyName==="value"&&Ui(Er)){var a=[];du(a,Er,t,vt(t)),is(_c,a)}}function rh(t,a,i){t==="focusin"?(ee(),ml=a,Er=i,ml.attachEvent("onpropertychange",bt)):t==="focusout"&&ee()}function uu(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ui(Er)}function Ot(t,a){if(t==="click")return Ui(a)}function Ii(t,a){if(t==="input"||t==="change")return Ui(a)}function wt(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Sa=typeof Object.is=="function"?Object.is:wt;function Cn(t,a){if(Sa(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var i=Object.keys(t),o=Object.keys(a);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var x=i[o];if(!Ct.call(a,x)||!Sa(t[x],a[x]))return!1}return!0}function yi(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ur(t,a){var i=yi(t);t=0;for(var o;i;){if(i.nodeType===3){if(o=t+i.textContent.length,t<=a&&o>=a)return{node:i,offset:a-t};t=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=yi(i)}}function mu(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?mu(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function An(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=cr(t.document);a instanceof t.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)t=a.contentWindow;else break;a=cr(t.document)}return a}function ko(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var xl=As&&"documentMode"in document&&11>=document.documentMode,Bi=null,so=null,dn=null,zc=!1;function Lc(t,a,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;zc||Bi==null||Bi!==cr(o)||(o=Bi,"selectionStart"in o&&ko(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),dn&&Cn(dn,o)||(dn=o,o=Zu(so,"onSelect"),0<o.length&&(a=new ms("onSelect","select",null,a,i),t.push({event:a,listeners:o}),a.target=Bi)))}function Vi(t,a){var i={};return i[t.toLowerCase()]=a.toLowerCase(),i["Webkit"+t]="webkit"+a,i["Moz"+t]="moz"+a,i}var ji={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionrun:Vi("Transition","TransitionRun"),transitionstart:Vi("Transition","TransitionStart"),transitioncancel:Vi("Transition","TransitionCancel"),transitionend:Vi("Transition","TransitionEnd")},vi={},Po={};As&&(Po=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);function si(t){if(vi[t])return vi[t];if(!ji[t])return t;var a=ji[t],i;for(i in a)if(a.hasOwnProperty(i)&&i in Po)return vi[t]=a[i];return t}var fl=si("animationend"),Do=si("animationiteration"),hu=si("animationstart"),nh=si("transitionrun"),Oo=si("transitionstart"),ih=si("transitioncancel"),pu=si("transitionend"),ao=new Map,$c="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$c.push("scrollEnd");function un(t,a){ao.set(t,a),ta(a,[t])}var Ni=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Tr=[],qi=0,Ir=0;function Ro(){for(var t=qi,a=Ir=qi=0;a<t;){var i=Tr[a];Tr[a++]=null;var o=Tr[a];Tr[a++]=null;var x=Tr[a];Tr[a++]=null;var f=Tr[a];if(Tr[a++]=null,o!==null&&x!==null){var C=o.pending;C===null?x.next=x:(x.next=C.next,C.next=x),o.pending=x}f!==0&&xu(i,x,f)}}function xr(t,a,i,o){Tr[qi++]=t,Tr[qi++]=a,Tr[qi++]=i,Tr[qi++]=o,Ir|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Fc(t,a,i,o){return xr(t,a,i,o),_o(t)}function wi(t,a){return xr(t,null,null,a),_o(t)}function xu(t,a,i){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i);for(var x=!1,f=t.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(x=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,x&&a!==null&&(x=31-rs(i),t=f.hiddenUpdates,o=t[x],o===null?t[x]=[a]:o.push(a),a.lane=i|536870912),f):null}function _o(t){if(50<ld)throw ld=0,sp=null,Error(l(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Br={};function lh(t,a,i,o){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(t,a,i,o){return new lh(t,a,i,o)}function Uc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vr(t,a){var i=t.alternate;return i===null?(i=kr(t.tag,a,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=a,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,a=t.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function fu(t,a){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,a=i.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Mo(t,a,i,o,x,f){var C=0;if(o=t,typeof t=="function")Uc(t)&&(C=1);else if(typeof t=="string")C=I2(t,i,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case W:return t=kr(31,i,a,x),t.elementType=W,t.lanes=f,t;case P:return Hi(i.children,x,f,a);case q:C=8,x|=24;break;case V:return t=kr(12,i,a,x|2),t.elementType=V,t.lanes=f,t;case H:return t=kr(13,i,a,x),t.elementType=H,t.lanes=f,t;case D:return t=kr(19,i,a,x),t.elementType=D,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:C=10;break e;case M:C=9;break e;case ae:C=11;break e;case k:C=14;break e;case Q:C=16,o=null;break e}C=29,i=Error(l(130,t===null?"null":typeof t,"")),o=null}return a=kr(C,i,a,x),a.elementType=t,a.type=o,a.lanes=f,a}function Hi(t,a,i,o){return t=kr(7,t,o,a),t.lanes=i,t}function Ic(t,a,i){return t=kr(6,t,null,a),t.lanes=i,t}function gl(t){var a=kr(18,null,null,0);return a.stateNode=t,a}function Bc(t,a,i){return a=kr(4,t.children!==null?t.children:[],t.key,a),a.lanes=i,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var ro=new WeakMap;function qr(t,a){if(typeof t=="object"&&t!==null){var i=ro.get(t);return i!==void 0?i:(a={value:t,source:a,stack:Ve(a)},ro.set(t,a),a)}return{value:t,source:a,stack:Ve(a)}}var Si=[],bl=0,Gi=null,no=0,Hr=[],Gr=0,ai=null,mn=1,En="";function ri(t,a){Si[bl++]=no,Si[bl++]=Gi,Gi=t,no=a}function gu(t,a,i){Hr[Gr++]=mn,Hr[Gr++]=En,Hr[Gr++]=ai,ai=t;var o=mn;t=En;var x=32-rs(o)-1;o&=~(1<<x),i+=1;var f=32-rs(a)+x;if(30<f){var C=x-x%5;f=(o&(1<<C)-1).toString(32),o>>=C,x-=C,mn=1<<32-rs(a)+x|i<<x|o,En=f+t}else mn=1<<f|i<<x|o,En=t}function Vc(t){t.return!==null&&(ri(t,1),gu(t,1,0))}function qc(t){for(;t===Gi;)Gi=Si[--bl],Si[bl]=null,no=Si[--bl],Si[bl]=null;for(;t===ai;)ai=Hr[--Gr],Hr[Gr]=null,En=Hr[--Gr],Hr[Gr]=null,mn=Hr[--Gr],Hr[Gr]=null}function bu(t,a){Hr[Gr++]=mn,Hr[Gr++]=En,Hr[Gr++]=ai,mn=a.id,En=a.overflow,ai=t}var tr=null,pa=null,ks=!1,Ci=null,sr=!1,zo=Error(l(519));function ni(t){var a=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jl(qr(a,t)),zo}function io(t){var a=t.stateNode,i=t.type,o=t.memoizedProps;switch(a[ft]=t,a[kt]=o,i){case"dialog":Fs("cancel",a),Fs("close",a);break;case"iframe":case"object":case"embed":Fs("load",a);break;case"video":case"audio":for(i=0;i<cd.length;i++)Fs(cd[i],a);break;case"source":Fs("error",a);break;case"img":case"image":case"link":Fs("error",a),Fs("load",a);break;case"details":Fs("toggle",a);break;case"input":Fs("invalid",a),cn(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Fs("invalid",a);break;case"textarea":Fs("invalid",a),he(a,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||o.suppressHydrationWarning===!0||tb(a.textContent,i)?(o.popover!=null&&(Fs("beforetoggle",a),Fs("toggle",a)),o.onScroll!=null&&Fs("scroll",a),o.onScrollEnd!=null&&Fs("scrollend",a),o.onClick!=null&&(a.onclick=Ue),a=!0):a=!1,a||ni(t,!0)}function Hc(t){for(tr=t.return;tr;)switch(tr.tag){case 5:case 31:case 13:sr=!1;return;case 27:case 3:sr=!0;return;default:tr=tr.return}}function yl(t){if(t!==tr)return!1;if(!ks)return Hc(t),ks=!0,!1;var a=t.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||gp(t.type,t.memoizedProps)),i=!i),i&&pa&&ni(t),Hc(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));pa=db(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));pa=db(t)}else a===27?(a=pa,Rl(t.type)?(t=Np,Np=null,pa=t):pa=a):pa=tr?_n(t.stateNode.nextSibling):null;return!0}function Qi(){pa=tr=null,ks=!1}function Lo(){var t=Ci;return t!==null&&(Xr===null?Xr=t:Xr.push.apply(Xr,t),Ci=null),t}function jl(t){Ci===null?Ci=[t]:Ci.push(t)}var $o=O(null),Ai=null,Tn=null;function ii(t,a,i){z($o,a._currentValue),a._currentValue=i}function kn(t){t._currentValue=$o.current,J($o)}function c(t,a,i){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===i)break;t=t.return}}function b(t,a,i,o){var x=t.child;for(x!==null&&(x.return=t);x!==null;){var f=x.dependencies;if(f!==null){var C=x.child;f=f.firstContext;e:for(;f!==null;){var F=f;f=x;for(var de=0;de<a.length;de++)if(F.context===a[de]){f.lanes|=i,F=f.alternate,F!==null&&(F.lanes|=i),c(f.return,i,t),o||(C=null);break e}f=F.next}}else if(x.tag===18){if(C=x.return,C===null)throw Error(l(341));C.lanes|=i,f=C.alternate,f!==null&&(f.lanes|=i),c(C,i,t),C=null}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===t){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}}function N(t,a,i,o){t=null;for(var x=a,f=!1;x!==null;){if(!f){if((x.flags&524288)!==0)f=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var C=x.alternate;if(C===null)throw Error(l(387));if(C=C.memoizedProps,C!==null){var F=x.type;Sa(x.pendingProps.value,C.value)||(t!==null?t.push(F):t=[F])}}else if(x===L.current){if(C=x.alternate,C===null)throw Error(l(387));C.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(t!==null?t.push(pd):t=[pd])}x=x.return}t!==null&&b(a,t,i,o),a.flags|=262144}function S(t){for(t=t.firstContext;t!==null;){if(!Sa(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function T(t){Ai=t,Tn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function U(t){return Y(Ai,t)}function G(t,a){return Ai===null&&T(t),Y(t,a)}function Y(t,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},Tn===null){if(t===null)throw Error(l(308));Tn=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Tn=Tn.next=a;return i}var K=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(i,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(i){return i()})}},ce=s.unstable_scheduleCallback,De=s.unstable_NormalPriority,Ze={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Et(){return{controller:new K,data:new Map,refCount:0}}function Qt(t){t.refCount--,t.refCount===0&&ce(De,function(){t.controller.abort()})}var Dt=null,Pt=0,Tt=0,Zt=null;function ht(t,a){if(Dt===null){var i=Dt=[];Pt=0,Tt=op(),Zt={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Pt++,a.then(Xt,Xt),a}function Xt(){if(--Pt===0&&Dt!==null){Zt!==null&&(Zt.status="fulfilled");var t=Dt;Dt=null,Tt=0,Zt=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function na(t,a){var i=[],o={status:"pending",value:null,reason:null,then:function(x){i.push(x)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var x=0;x<i.length;x++)(0,i[x])(a)},function(x){for(o.status="rejected",o.reason=x,x=0;x<i.length;x++)(0,i[x])(void 0)}),o}var Qr=B.S;B.S=function(t,a){Cg=Vt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&ht(t,a),Qr!==null&&Qr(t,a)};var St=O(null);function Hs(){var t=St.current;return t!==null?t:ja.pooledCache}function Ls(t,a){a===null?z(St,St.current):z(St,a.pool)}function Yr(){var t=Hs();return t===null?null:{parent:Ze._currentValue,pool:t}}var jr=Error(l(460)),ar=Error(l(474)),Pn=Error(l(542)),pt={then:function(){}};function yu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Pr(t,a,i){switch(i=t[i],i===void 0?t.push(a):i!==a&&(a.then(Ue,Ue),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,vu(t),t;default:if(typeof a.status=="string")a.then(Ue,Ue);else{if(t=ja,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var x=a;x.status="fulfilled",x.value=o}},function(o){if(a.status==="pending"){var x=a;x.status="rejected",x.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,vu(t),t}throw Yi=a,jr}}function hn(t){try{var a=t._init;return a(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Yi=i,jr):i}}var Yi=null;function ju(){if(Yi===null)throw Error(l(459));var t=Yi;return Yi=null,t}function vu(t){if(t===jr||t===Pn)throw Error(l(483))}var vl=null,lo=0;function Fo(t){var a=lo;return lo+=1,vl===null&&(vl=[]),Pr(vl,t,a)}function Dn(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function oo(t,a){throw a.$$typeof===w?Error(l(525)):(t=Object.prototype.toString.call(a),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function ls(t){function a(je,pe){if(t){var Ae=je.deletions;Ae===null?(je.deletions=[pe],je.flags|=16):Ae.push(pe)}}function i(je,pe){if(!t)return null;for(;pe!==null;)a(je,pe),pe=pe.sibling;return null}function o(je){for(var pe=new Map;je!==null;)je.key!==null?pe.set(je.key,je):pe.set(je.index,je),je=je.sibling;return pe}function x(je,pe){return je=Vr(je,pe),je.index=0,je.sibling=null,je}function f(je,pe,Ae){return je.index=Ae,t?(Ae=je.alternate,Ae!==null?(Ae=Ae.index,Ae<pe?(je.flags|=67108866,pe):Ae):(je.flags|=67108866,pe)):(je.flags|=1048576,pe)}function C(je){return t&&je.alternate===null&&(je.flags|=67108866),je}function F(je,pe,Ae,Ke){return pe===null||pe.tag!==6?(pe=Ic(Ae,je.mode,Ke),pe.return=je,pe):(pe=x(pe,Ae),pe.return=je,pe)}function de(je,pe,Ae,Ke){var Kt=Ae.type;return Kt===P?Ye(je,pe,Ae.props.children,Ke,Ae.key):pe!==null&&(pe.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===Q&&hn(Kt)===pe.type)?(pe=x(pe,Ae.props),Dn(pe,Ae),pe.return=je,pe):(pe=Mo(Ae.type,Ae.key,Ae.props,null,je.mode,Ke),Dn(pe,Ae),pe.return=je,pe)}function Ee(je,pe,Ae,Ke){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Ae.containerInfo||pe.stateNode.implementation!==Ae.implementation?(pe=Bc(Ae,je.mode,Ke),pe.return=je,pe):(pe=x(pe,Ae.children||[]),pe.return=je,pe)}function Ye(je,pe,Ae,Ke,Kt){return pe===null||pe.tag!==7?(pe=Hi(Ae,je.mode,Ke,Kt),pe.return=je,pe):(pe=x(pe,Ae),pe.return=je,pe)}function Xe(je,pe,Ae){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=Ic(""+pe,je.mode,Ae),pe.return=je,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case E:return Ae=Mo(pe.type,pe.key,pe.props,null,je.mode,Ae),Dn(Ae,pe),Ae.return=je,Ae;case A:return pe=Bc(pe,je.mode,Ae),pe.return=je,pe;case Q:return pe=hn(pe),Xe(je,pe,Ae)}if(re(pe)||X(pe))return pe=Hi(pe,je.mode,Ae,null),pe.return=je,pe;if(typeof pe.then=="function")return Xe(je,Fo(pe),Ae);if(pe.$$typeof===R)return Xe(je,G(je,pe),Ae);oo(je,pe)}return null}function Oe(je,pe,Ae,Ke){var Kt=pe!==null?pe.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return Kt!==null?null:F(je,pe,""+Ae,Ke);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case E:return Ae.key===Kt?de(je,pe,Ae,Ke):null;case A:return Ae.key===Kt?Ee(je,pe,Ae,Ke):null;case Q:return Ae=hn(Ae),Oe(je,pe,Ae,Ke)}if(re(Ae)||X(Ae))return Kt!==null?null:Ye(je,pe,Ae,Ke,null);if(typeof Ae.then=="function")return Oe(je,pe,Fo(Ae),Ke);if(Ae.$$typeof===R)return Oe(je,pe,G(je,Ae),Ke);oo(je,Ae)}return null}function qe(je,pe,Ae,Ke,Kt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return je=je.get(Ae)||null,F(pe,je,""+Ke,Kt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case E:return je=je.get(Ke.key===null?Ae:Ke.key)||null,de(pe,je,Ke,Kt);case A:return je=je.get(Ke.key===null?Ae:Ke.key)||null,Ee(pe,je,Ke,Kt);case Q:return Ke=hn(Ke),qe(je,pe,Ae,Ke,Kt)}if(re(Ke)||X(Ke))return je=je.get(Ae)||null,Ye(pe,je,Ke,Kt,null);if(typeof Ke.then=="function")return qe(je,pe,Ae,Fo(Ke),Kt);if(Ke.$$typeof===R)return qe(je,pe,Ae,G(pe,Ke),Kt);oo(pe,Ke)}return null}function $t(je,pe,Ae,Ke){for(var Kt=null,Js=null,Ht=pe,ws=pe=0,Is=null;Ht!==null&&ws<Ae.length;ws++){Ht.index>ws?(Is=Ht,Ht=null):Is=Ht.sibling;var Xs=Oe(je,Ht,Ae[ws],Ke);if(Xs===null){Ht===null&&(Ht=Is);break}t&&Ht&&Xs.alternate===null&&a(je,Ht),pe=f(Xs,pe,ws),Js===null?Kt=Xs:Js.sibling=Xs,Js=Xs,Ht=Is}if(ws===Ae.length)return i(je,Ht),ks&&ri(je,ws),Kt;if(Ht===null){for(;ws<Ae.length;ws++)Ht=Xe(je,Ae[ws],Ke),Ht!==null&&(pe=f(Ht,pe,ws),Js===null?Kt=Ht:Js.sibling=Ht,Js=Ht);return ks&&ri(je,ws),Kt}for(Ht=o(Ht);ws<Ae.length;ws++)Is=qe(Ht,je,ws,Ae[ws],Ke),Is!==null&&(t&&Is.alternate!==null&&Ht.delete(Is.key===null?ws:Is.key),pe=f(Is,pe,ws),Js===null?Kt=Is:Js.sibling=Is,Js=Is);return t&&Ht.forEach(function($l){return a(je,$l)}),ks&&ri(je,ws),Kt}function os(je,pe,Ae,Ke){if(Ae==null)throw Error(l(151));for(var Kt=null,Js=null,Ht=pe,ws=pe=0,Is=null,Xs=Ae.next();Ht!==null&&!Xs.done;ws++,Xs=Ae.next()){Ht.index>ws?(Is=Ht,Ht=null):Is=Ht.sibling;var $l=Oe(je,Ht,Xs.value,Ke);if($l===null){Ht===null&&(Ht=Is);break}t&&Ht&&$l.alternate===null&&a(je,Ht),pe=f($l,pe,ws),Js===null?Kt=$l:Js.sibling=$l,Js=$l,Ht=Is}if(Xs.done)return i(je,Ht),ks&&ri(je,ws),Kt;if(Ht===null){for(;!Xs.done;ws++,Xs=Ae.next())Xs=Xe(je,Xs.value,Ke),Xs!==null&&(pe=f(Xs,pe,ws),Js===null?Kt=Xs:Js.sibling=Xs,Js=Xs);return ks&&ri(je,ws),Kt}for(Ht=o(Ht);!Xs.done;ws++,Xs=Ae.next())Xs=qe(Ht,je,ws,Xs.value,Ke),Xs!==null&&(t&&Xs.alternate!==null&&Ht.delete(Xs.key===null?ws:Xs.key),pe=f(Xs,pe,ws),Js===null?Kt=Xs:Js.sibling=Xs,Js=Xs);return t&&Ht.forEach(function(J2){return a(je,J2)}),ks&&ri(je,ws),Kt}function ga(je,pe,Ae,Ke){if(typeof Ae=="object"&&Ae!==null&&Ae.type===P&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case E:e:{for(var Kt=Ae.key;pe!==null;){if(pe.key===Kt){if(Kt=Ae.type,Kt===P){if(pe.tag===7){i(je,pe.sibling),Ke=x(pe,Ae.props.children),Ke.return=je,je=Ke;break e}}else if(pe.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===Q&&hn(Kt)===pe.type){i(je,pe.sibling),Ke=x(pe,Ae.props),Dn(Ke,Ae),Ke.return=je,je=Ke;break e}i(je,pe);break}else a(je,pe);pe=pe.sibling}Ae.type===P?(Ke=Hi(Ae.props.children,je.mode,Ke,Ae.key),Ke.return=je,je=Ke):(Ke=Mo(Ae.type,Ae.key,Ae.props,null,je.mode,Ke),Dn(Ke,Ae),Ke.return=je,je=Ke)}return C(je);case A:e:{for(Kt=Ae.key;pe!==null;){if(pe.key===Kt)if(pe.tag===4&&pe.stateNode.containerInfo===Ae.containerInfo&&pe.stateNode.implementation===Ae.implementation){i(je,pe.sibling),Ke=x(pe,Ae.children||[]),Ke.return=je,je=Ke;break e}else{i(je,pe);break}else a(je,pe);pe=pe.sibling}Ke=Bc(Ae,je.mode,Ke),Ke.return=je,je=Ke}return C(je);case Q:return Ae=hn(Ae),ga(je,pe,Ae,Ke)}if(re(Ae))return $t(je,pe,Ae,Ke);if(X(Ae)){if(Kt=X(Ae),typeof Kt!="function")throw Error(l(150));return Ae=Kt.call(Ae),os(je,pe,Ae,Ke)}if(typeof Ae.then=="function")return ga(je,pe,Fo(Ae),Ke);if(Ae.$$typeof===R)return ga(je,pe,G(je,Ae),Ke);oo(je,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint"?(Ae=""+Ae,pe!==null&&pe.tag===6?(i(je,pe.sibling),Ke=x(pe,Ae),Ke.return=je,je=Ke):(i(je,pe),Ke=Ic(Ae,je.mode,Ke),Ke.return=je,je=Ke),C(je)):i(je,pe)}return function(je,pe,Ae,Ke){try{lo=0;var Kt=ga(je,pe,Ae,Ke);return vl=null,Kt}catch(Ht){if(Ht===jr||Ht===Pn)throw Ht;var Js=kr(29,Ht,null,je.mode);return Js.lanes=Ke,Js.return=je,Js}finally{}}}var Ns=ls(!0),Wr=ls(!1),On=!1;function oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ch(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Nl(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function wl(t,a,i){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(sa&2)!==0){var x=o.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),o.pending=a,a=_o(t),xu(t,null,i),a}return xr(t,o,a,i),_o(t)}function Gc(t,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,i|=o,a.lanes=i,oe(t,i)}}function dh(t,a){var i=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var x=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var C={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?x=f=C:f=f.next=C,i=i.next}while(i!==null);f===null?x=f=a:f=f.next=a}else x=f=a;i={baseState:o.baseState,firstBaseUpdate:x,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=a:t.next=a,i.lastBaseUpdate=a}var uh=!1;function Qc(){if(uh){var t=Zt;if(t!==null)throw t}}function Yc(t,a,i,o){uh=!1;var x=t.updateQueue;On=!1;var f=x.firstBaseUpdate,C=x.lastBaseUpdate,F=x.shared.pending;if(F!==null){x.shared.pending=null;var de=F,Ee=de.next;de.next=null,C===null?f=Ee:C.next=Ee,C=de;var Ye=t.alternate;Ye!==null&&(Ye=Ye.updateQueue,F=Ye.lastBaseUpdate,F!==C&&(F===null?Ye.firstBaseUpdate=Ee:F.next=Ee,Ye.lastBaseUpdate=de))}if(f!==null){var Xe=x.baseState;C=0,Ye=Ee=de=null,F=f;do{var Oe=F.lane&-536870913,qe=Oe!==F.lane;if(qe?(Us&Oe)===Oe:(o&Oe)===Oe){Oe!==0&&Oe===Tt&&(uh=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var $t=t,os=F;Oe=a;var ga=i;switch(os.tag){case 1:if($t=os.payload,typeof $t=="function"){Xe=$t.call(ga,Xe,Oe);break e}Xe=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=os.payload,Oe=typeof $t=="function"?$t.call(ga,Xe,Oe):$t,Oe==null)break e;Xe=v({},Xe,Oe);break e;case 2:On=!0}}Oe=F.callback,Oe!==null&&(t.flags|=64,qe&&(t.flags|=8192),qe=x.callbacks,qe===null?x.callbacks=[Oe]:qe.push(Oe))}else qe={lane:Oe,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Ye===null?(Ee=Ye=qe,de=Xe):Ye=Ye.next=qe,C|=Oe;if(F=F.next,F===null){if(F=x.shared.pending,F===null)break;qe=F,F=qe.next,qe.next=null,x.lastBaseUpdate=qe,x.shared.pending=null}}while(!0);Ye===null&&(de=Xe),x.baseState=de,x.firstBaseUpdate=Ee,x.lastBaseUpdate=Ye,f===null&&(x.shared.lanes=0),Tl|=C,t.lanes=C,t.memoizedState=Xe}}function Zf(t,a){if(typeof t!="function")throw Error(l(191,t));t.call(a)}function Kf(t,a){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)Zf(i[t],a)}var Uo=O(null),Nu=O(0);function Jf(t,a){t=al,z(Nu,t),z(Uo,a),al=t|a.baseLanes}function mh(){z(Nu,al),z(Uo,Uo.current)}function hh(){al=Nu.current,J(Uo),J(Nu)}var pn=O(null),Rn=null;function Sl(t){var a=t.alternate;z(Ia,Ia.current&1),z(pn,t),Rn===null&&(a===null||Uo.current!==null||a.memoizedState!==null)&&(Rn=t)}function ph(t){z(Ia,Ia.current),z(pn,t),Rn===null&&(Rn=t)}function Xf(t){t.tag===22?(z(Ia,Ia.current),z(pn,t),Rn===null&&(Rn=t)):Cl()}function Cl(){z(Ia,Ia.current),z(pn,pn.current)}function xn(t){J(pn),Rn===t&&(Rn=null),J(Ia)}var Ia=O(0);function wu(t){for(var a=t;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||jp(i)||vp(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Wi=0,js=null,xa=null,Ya=null,Su=!1,Io=!1,co=!1,Cu=0,Wc=0,Bo=null,B1=0;function Ra(){throw Error(l(321))}function xh(t,a){if(a===null)return!1;for(var i=0;i<a.length&&i<t.length;i++)if(!Sa(t[i],a[i]))return!1;return!0}function fh(t,a,i,o,x,f){return Wi=f,js=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,B.H=t===null||t.memoizedState===null?z0:Dh,co=!1,f=i(o,x),co=!1,Io&&(f=t0(a,i,o,x)),e0(t),f}function e0(t){B.H=Jc;var a=xa!==null&&xa.next!==null;if(Wi=0,Ya=xa=js=null,Su=!1,Wc=0,Bo=null,a)throw Error(l(300));t===null||Wa||(t=t.dependencies,t!==null&&S(t)&&(Wa=!0))}function t0(t,a,i,o){js=t;var x=0;do{if(Io&&(Bo=null),Wc=0,Io=!1,25<=x)throw Error(l(301));if(x+=1,Ya=xa=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}B.H=L0,f=a(i,o)}while(Io);return f}function V1(){var t=B.H,a=t.useState()[0];return a=typeof a.then=="function"?Zc(a):a,t=t.useState()[0],(xa!==null?xa.memoizedState:null)!==t&&(js.flags|=1024),a}function gh(){var t=Cu!==0;return Cu=0,t}function bh(t,a,i){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~i}function yh(t){if(Su){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Su=!1}Wi=0,Ya=xa=js=null,Io=!1,Wc=Cu=0,Bo=null}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ya===null?js.memoizedState=Ya=t:Ya=Ya.next=t,Ya}function Ba(){if(xa===null){var t=js.alternate;t=t!==null?t.memoizedState:null}else t=xa.next;var a=Ya===null?js.memoizedState:Ya.next;if(a!==null)Ya=a,xa=t;else{if(t===null)throw js.alternate===null?Error(l(467)):Error(l(310));xa=t,t={memoizedState:xa.memoizedState,baseState:xa.baseState,baseQueue:xa.baseQueue,queue:xa.queue,next:null},Ya===null?js.memoizedState=Ya=t:Ya=Ya.next=t}return Ya}function Au(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zc(t){var a=Wc;return Wc+=1,Bo===null&&(Bo=[]),t=Pr(Bo,t,a),a=js,(Ya===null?a.memoizedState:Ya.next)===null&&(a=a.alternate,B.H=a===null||a.memoizedState===null?z0:Dh),t}function Eu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Zc(t);if(t.$$typeof===R)return U(t)}throw Error(l(438,String(t)))}function jh(t){var a=null,i=js.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var o=js.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(x){return x.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=Au(),js.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(t),o=0;o<t;o++)i[o]=te;return a.index++,i}function Zi(t,a){return typeof a=="function"?a(t):a}function Tu(t){var a=Ba();return vh(a,xa,t)}function vh(t,a,i){var o=t.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=i;var x=t.baseQueue,f=o.pending;if(f!==null){if(x!==null){var C=x.next;x.next=f.next,f.next=C}a.baseQueue=x=f,o.pending=null}if(f=t.baseState,x===null)t.memoizedState=f;else{a=x.next;var F=C=null,de=null,Ee=a,Ye=!1;do{var Xe=Ee.lane&-536870913;if(Xe!==Ee.lane?(Us&Xe)===Xe:(Wi&Xe)===Xe){var Oe=Ee.revertLane;if(Oe===0)de!==null&&(de=de.next={lane:0,revertLane:0,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),Xe===Tt&&(Ye=!0);else if((Wi&Oe)===Oe){Ee=Ee.next,Oe===Tt&&(Ye=!0);continue}else Xe={lane:0,revertLane:Ee.revertLane,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},de===null?(F=de=Xe,C=f):de=de.next=Xe,js.lanes|=Oe,Tl|=Oe;Xe=Ee.action,co&&i(f,Xe),f=Ee.hasEagerState?Ee.eagerState:i(f,Xe)}else Oe={lane:Xe,revertLane:Ee.revertLane,gesture:Ee.gesture,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},de===null?(F=de=Oe,C=f):de=de.next=Oe,js.lanes|=Xe,Tl|=Xe;Ee=Ee.next}while(Ee!==null&&Ee!==a);if(de===null?C=f:de.next=F,!Sa(f,t.memoizedState)&&(Wa=!0,Ye&&(i=Zt,i!==null)))throw i;t.memoizedState=f,t.baseState=C,t.baseQueue=de,o.lastRenderedState=f}return x===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Nh(t){var a=Ba(),i=a.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=t;var o=i.dispatch,x=i.pending,f=a.memoizedState;if(x!==null){i.pending=null;var C=x=x.next;do f=t(f,C.action),C=C.next;while(C!==x);Sa(f,a.memoizedState)||(Wa=!0),a.memoizedState=f,a.baseQueue===null&&(a.baseState=f),i.lastRenderedState=f}return[f,o]}function s0(t,a,i){var o=js,x=Ba(),f=ks;if(f){if(i===void 0)throw Error(l(407));i=i()}else i=a();var C=!Sa((xa||x).memoizedState,i);if(C&&(x.memoizedState=i,Wa=!0),x=x.queue,Ch(n0.bind(null,o,x,t),[t]),x.getSnapshot!==a||C||Ya!==null&&Ya.memoizedState.tag&1){if(o.flags|=2048,Vo(9,{destroy:void 0},r0.bind(null,o,x,i,a),null),ja===null)throw Error(l(349));f||(Wi&127)!==0||a0(o,a,i)}return i}function a0(t,a,i){t.flags|=16384,t={getSnapshot:a,value:i},a=js.updateQueue,a===null?(a=Au(),js.updateQueue=a,a.stores=[t]):(i=a.stores,i===null?a.stores=[t]:i.push(t))}function r0(t,a,i,o){a.value=i,a.getSnapshot=o,i0(a)&&l0(t)}function n0(t,a,i){return i(function(){i0(a)&&l0(t)})}function i0(t){var a=t.getSnapshot;t=t.value;try{var i=a();return!Sa(t,i)}catch{return!0}}function l0(t){var a=wi(t,2);a!==null&&en(a,t,2)}function wh(t){var a=Dr();if(typeof t=="function"){var i=t;if(t=i(),co){Ms(!0);try{i()}finally{Ms(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:t},a}function o0(t,a,i,o){return t.baseState=i,vh(t,xa,typeof o=="function"?o:Zi)}function q1(t,a,i,o,x){if(Du(t))throw Error(l(485));if(t=a.action,t!==null){var f={payload:x,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){f.listeners.push(C)}};B.T!==null?i(!0):f.isTransition=!1,o(f),i=a.pending,i===null?(f.next=a.pending=f,c0(a,f)):(f.next=i.next,a.pending=i.next=f)}}function c0(t,a){var i=a.action,o=a.payload,x=t.state;if(a.isTransition){var f=B.T,C={};B.T=C;try{var F=i(x,o),de=B.S;de!==null&&de(C,F),d0(t,a,F)}catch(Ee){Sh(t,a,Ee)}finally{f!==null&&C.types!==null&&(f.types=C.types),B.T=f}}else try{f=i(x,o),d0(t,a,f)}catch(Ee){Sh(t,a,Ee)}}function d0(t,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){u0(t,a,o)},function(o){return Sh(t,a,o)}):u0(t,a,i)}function u0(t,a,i){a.status="fulfilled",a.value=i,m0(a),t.state=i,a=t.pending,a!==null&&(i=a.next,i===a?t.pending=null:(i=i.next,a.next=i,c0(t,i)))}function Sh(t,a,i){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=i,m0(a),a=a.next;while(a!==o)}t.action=null}function m0(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function h0(t,a){return a}function p0(t,a){if(ks){var i=ja.formState;if(i!==null){e:{var o=js;if(ks){if(pa){t:{for(var x=pa,f=sr;x.nodeType!==8;){if(!f){x=null;break t}if(x=_n(x.nextSibling),x===null){x=null;break t}}f=x.data,x=f==="F!"||f==="F"?x:null}if(x){pa=_n(x.nextSibling),o=x.data==="F!";break e}}ni(o)}o=!1}o&&(a=i[0])}}return i=Dr(),i.memoizedState=i.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h0,lastRenderedState:a},i.queue=o,i=R0.bind(null,js,o),o.dispatch=i,o=wh(!1),f=Ph.bind(null,js,!1,o.queue),o=Dr(),x={state:a,dispatch:null,action:t,pending:null},o.queue=x,i=q1.bind(null,js,x,f,i),x.dispatch=i,o.memoizedState=t,[a,i,!1]}function x0(t){var a=Ba();return f0(a,xa,t)}function f0(t,a,i){if(a=vh(t,a,h0)[0],t=Tu(Zi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=Zc(a)}catch(C){throw C===jr?Pn:C}else o=a;a=Ba();var x=a.queue,f=x.dispatch;return i!==a.memoizedState&&(js.flags|=2048,Vo(9,{destroy:void 0},H1.bind(null,x,i),null)),[o,f,t]}function H1(t,a){t.action=a}function g0(t){var a=Ba(),i=xa;if(i!==null)return f0(a,i,t);Ba(),a=a.memoizedState,i=Ba();var o=i.queue.dispatch;return i.memoizedState=t,[a,o,!1]}function Vo(t,a,i,o){return t={tag:t,create:i,deps:o,inst:a,next:null},a=js.updateQueue,a===null&&(a=Au(),js.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=t.next=t:(o=i.next,i.next=t,t.next=o,a.lastEffect=t),t}function b0(){return Ba().memoizedState}function ku(t,a,i,o){var x=Dr();js.flags|=t,x.memoizedState=Vo(1|a,{destroy:void 0},i,o===void 0?null:o)}function Pu(t,a,i,o){var x=Ba();o=o===void 0?null:o;var f=x.memoizedState.inst;xa!==null&&o!==null&&xh(o,xa.memoizedState.deps)?x.memoizedState=Vo(a,f,i,o):(js.flags|=t,x.memoizedState=Vo(1|a,f,i,o))}function y0(t,a){ku(8390656,8,t,a)}function Ch(t,a){Pu(2048,8,t,a)}function G1(t){js.flags|=4;var a=js.updateQueue;if(a===null)a=Au(),js.updateQueue=a,a.events=[t];else{var i=a.events;i===null?a.events=[t]:i.push(t)}}function j0(t){var a=Ba().memoizedState;return G1({ref:a,nextImpl:t}),function(){if((sa&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}function v0(t,a){return Pu(4,2,t,a)}function N0(t,a){return Pu(4,4,t,a)}function w0(t,a){if(typeof a=="function"){t=t();var i=a(t);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function S0(t,a,i){i=i!=null?i.concat([t]):null,Pu(4,4,w0.bind(null,a,t),i)}function Ah(){}function C0(t,a){var i=Ba();a=a===void 0?null:a;var o=i.memoizedState;return a!==null&&xh(a,o[1])?o[0]:(i.memoizedState=[t,a],t)}function A0(t,a){var i=Ba();a=a===void 0?null:a;var o=i.memoizedState;if(a!==null&&xh(a,o[1]))return o[0];if(o=t(),co){Ms(!0);try{t()}finally{Ms(!1)}}return i.memoizedState=[o,a],o}function Eh(t,a,i){return i===void 0||(Wi&1073741824)!==0&&(Us&261930)===0?t.memoizedState=a:(t.memoizedState=i,t=Eg(),js.lanes|=t,Tl|=t,i)}function E0(t,a,i,o){return Sa(i,a)?i:Uo.current!==null?(t=Eh(t,i,o),Sa(t,a)||(Wa=!0),t):(Wi&42)===0||(Wi&1073741824)!==0&&(Us&261930)===0?(Wa=!0,t.memoizedState=i):(t=Eg(),js.lanes|=t,Tl|=t,a)}function T0(t,a,i,o,x){var f=ne.p;ne.p=f!==0&&8>f?f:8;var C=B.T,F={};B.T=F,Ph(t,!1,a,i);try{var de=x(),Ee=B.S;if(Ee!==null&&Ee(F,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var Ye=na(de,o);Kc(t,a,Ye,bn(t))}else Kc(t,a,o,bn(t))}catch(Xe){Kc(t,a,{then:function(){},status:"rejected",reason:Xe},bn())}finally{ne.p=f,C!==null&&F.types!==null&&(C.types=F.types),B.T=C}}function Q1(){}function Th(t,a,i,o){if(t.tag!==5)throw Error(l(476));var x=k0(t).queue;T0(t,x,a,Z,i===null?Q1:function(){return P0(t),i(o)})}function k0(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:Z},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:i},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function P0(t){var a=k0(t);a.next===null&&(a=t.alternate.memoizedState),Kc(t,a.next.queue,{},bn())}function kh(){return U(pd)}function D0(){return Ba().memoizedState}function O0(){return Ba().memoizedState}function Y1(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var i=bn();t=Nl(i);var o=wl(a,t,i);o!==null&&(en(o,a,i),Gc(o,a,i)),a={cache:Et()},t.payload=a;return}a=a.return}}function W1(t,a,i){var o=bn();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Du(t)?_0(a,i):(i=Fc(t,a,i,o),i!==null&&(en(i,t,o),M0(i,a,o)))}function R0(t,a,i){var o=bn();Kc(t,a,i,o)}function Kc(t,a,i,o){var x={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Du(t))_0(a,x);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=a.lastRenderedReducer,f!==null))try{var C=a.lastRenderedState,F=f(C,i);if(x.hasEagerState=!0,x.eagerState=F,Sa(F,C))return xr(t,a,x,0),ja===null&&Ro(),!1}catch{}finally{}if(i=Fc(t,a,x,o),i!==null)return en(i,t,o),M0(i,a,o),!0}return!1}function Ph(t,a,i,o){if(o={lane:2,revertLane:op(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Du(t)){if(a)throw Error(l(479))}else a=Fc(t,i,o,2),a!==null&&en(a,t,2)}function Du(t){var a=t.alternate;return t===js||a!==null&&a===js}function _0(t,a){Io=Su=!0;var i=t.pending;i===null?a.next=a:(a.next=i.next,i.next=a),t.pending=a}function M0(t,a,i){if((i&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,i|=o,a.lanes=i,oe(t,i)}}var Jc={readContext:U,use:Eu,useCallback:Ra,useContext:Ra,useEffect:Ra,useImperativeHandle:Ra,useLayoutEffect:Ra,useInsertionEffect:Ra,useMemo:Ra,useReducer:Ra,useRef:Ra,useState:Ra,useDebugValue:Ra,useDeferredValue:Ra,useTransition:Ra,useSyncExternalStore:Ra,useId:Ra,useHostTransitionStatus:Ra,useFormState:Ra,useActionState:Ra,useOptimistic:Ra,useMemoCache:Ra,useCacheRefresh:Ra};Jc.useEffectEvent=Ra;var z0={readContext:U,use:Eu,useCallback:function(t,a){return Dr().memoizedState=[t,a===void 0?null:a],t},useContext:U,useEffect:y0,useImperativeHandle:function(t,a,i){i=i!=null?i.concat([t]):null,ku(4194308,4,w0.bind(null,a,t),i)},useLayoutEffect:function(t,a){return ku(4194308,4,t,a)},useInsertionEffect:function(t,a){ku(4,2,t,a)},useMemo:function(t,a){var i=Dr();a=a===void 0?null:a;var o=t();if(co){Ms(!0);try{t()}finally{Ms(!1)}}return i.memoizedState=[o,a],o},useReducer:function(t,a,i){var o=Dr();if(i!==void 0){var x=i(a);if(co){Ms(!0);try{i(a)}finally{Ms(!1)}}}else x=a;return o.memoizedState=o.baseState=x,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:x},o.queue=t,t=t.dispatch=W1.bind(null,js,t),[o.memoizedState,t]},useRef:function(t){var a=Dr();return t={current:t},a.memoizedState=t},useState:function(t){t=wh(t);var a=t.queue,i=R0.bind(null,js,a);return a.dispatch=i,[t.memoizedState,i]},useDebugValue:Ah,useDeferredValue:function(t,a){var i=Dr();return Eh(i,t,a)},useTransition:function(){var t=wh(!1);return t=T0.bind(null,js,t.queue,!0,!1),Dr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,i){var o=js,x=Dr();if(ks){if(i===void 0)throw Error(l(407));i=i()}else{if(i=a(),ja===null)throw Error(l(349));(Us&127)!==0||a0(o,a,i)}x.memoizedState=i;var f={value:i,getSnapshot:a};return x.queue=f,y0(n0.bind(null,o,f,t),[t]),o.flags|=2048,Vo(9,{destroy:void 0},r0.bind(null,o,f,i,a),null),i},useId:function(){var t=Dr(),a=ja.identifierPrefix;if(ks){var i=En,o=mn;i=(o&~(1<<32-rs(o)-1)).toString(32)+i,a="_"+a+"R_"+i,i=Cu++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=B1++,a="_"+a+"r_"+i.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:kh,useFormState:p0,useActionState:p0,useOptimistic:function(t){var a=Dr();a.memoizedState=a.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=Ph.bind(null,js,!0,i),i.dispatch=a,[t,a]},useMemoCache:jh,useCacheRefresh:function(){return Dr().memoizedState=Y1.bind(null,js)},useEffectEvent:function(t){var a=Dr(),i={impl:t};return a.memoizedState=i,function(){if((sa&2)!==0)throw Error(l(440));return i.impl.apply(void 0,arguments)}}},Dh={readContext:U,use:Eu,useCallback:C0,useContext:U,useEffect:Ch,useImperativeHandle:S0,useInsertionEffect:v0,useLayoutEffect:N0,useMemo:A0,useReducer:Tu,useRef:b0,useState:function(){return Tu(Zi)},useDebugValue:Ah,useDeferredValue:function(t,a){var i=Ba();return E0(i,xa.memoizedState,t,a)},useTransition:function(){var t=Tu(Zi)[0],a=Ba().memoizedState;return[typeof t=="boolean"?t:Zc(t),a]},useSyncExternalStore:s0,useId:D0,useHostTransitionStatus:kh,useFormState:x0,useActionState:x0,useOptimistic:function(t,a){var i=Ba();return o0(i,xa,t,a)},useMemoCache:jh,useCacheRefresh:O0};Dh.useEffectEvent=j0;var L0={readContext:U,use:Eu,useCallback:C0,useContext:U,useEffect:Ch,useImperativeHandle:S0,useInsertionEffect:v0,useLayoutEffect:N0,useMemo:A0,useReducer:Nh,useRef:b0,useState:function(){return Nh(Zi)},useDebugValue:Ah,useDeferredValue:function(t,a){var i=Ba();return xa===null?Eh(i,t,a):E0(i,xa.memoizedState,t,a)},useTransition:function(){var t=Nh(Zi)[0],a=Ba().memoizedState;return[typeof t=="boolean"?t:Zc(t),a]},useSyncExternalStore:s0,useId:D0,useHostTransitionStatus:kh,useFormState:g0,useActionState:g0,useOptimistic:function(t,a){var i=Ba();return xa!==null?o0(i,xa,t,a):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:jh,useCacheRefresh:O0};L0.useEffectEvent=j0;function Oh(t,a,i,o){a=t.memoizedState,i=i(o,a),i=i==null?a:v({},a,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Rh={enqueueSetState:function(t,a,i){t=t._reactInternals;var o=bn(),x=Nl(o);x.payload=a,i!=null&&(x.callback=i),a=wl(t,x,o),a!==null&&(en(a,t,o),Gc(a,t,o))},enqueueReplaceState:function(t,a,i){t=t._reactInternals;var o=bn(),x=Nl(o);x.tag=1,x.payload=a,i!=null&&(x.callback=i),a=wl(t,x,o),a!==null&&(en(a,t,o),Gc(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var i=bn(),o=Nl(i);o.tag=2,a!=null&&(o.callback=a),a=wl(t,o,i),a!==null&&(en(a,t,i),Gc(a,t,i))}};function $0(t,a,i,o,x,f,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,C):a.prototype&&a.prototype.isPureReactComponent?!Cn(i,o)||!Cn(x,f):!0}function F0(t,a,i,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,o),a.state!==t&&Rh.enqueueReplaceState(a,a.state,null)}function uo(t,a){var i=a;if("ref"in a){i={};for(var o in a)o!=="ref"&&(i[o]=a[o])}if(t=t.defaultProps){i===a&&(i=v({},i));for(var x in t)i[x]===void 0&&(i[x]=t[x])}return i}function U0(t){Ni(t)}function I0(t){console.error(t)}function B0(t){Ni(t)}function Ou(t,a){try{var i=t.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function V0(t,a,i){try{var o=t.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function _h(t,a,i){return i=Nl(i),i.tag=3,i.payload={element:null},i.callback=function(){Ou(t,a)},i}function q0(t){return t=Nl(t),t.tag=3,t}function H0(t,a,i,o){var x=i.type.getDerivedStateFromError;if(typeof x=="function"){var f=o.value;t.payload=function(){return x(f)},t.callback=function(){V0(a,i,o)}}var C=i.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(t.callback=function(){V0(a,i,o),typeof x!="function"&&(kl===null?kl=new Set([this]):kl.add(this));var F=o.stack;this.componentDidCatch(o.value,{componentStack:F!==null?F:""})})}function Z1(t,a,i,o,x){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=i.alternate,a!==null&&N(a,i,x,!0),i=pn.current,i!==null){switch(i.tag){case 31:case 13:return Rn===null?qu():i.alternate===null&&_a===0&&(_a=3),i.flags&=-257,i.flags|=65536,i.lanes=x,o===pt?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([o]):a.add(o),np(t,o,x)),!1;case 22:return i.flags|=65536,o===pt?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([o]):i.add(o)),np(t,o,x)),!1}throw Error(l(435,i.tag))}return np(t,o,x),qu(),!1}if(ks)return a=pn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=x,o!==zo&&(t=Error(l(422),{cause:o}),jl(qr(t,i)))):(o!==zo&&(a=Error(l(423),{cause:o}),jl(qr(a,i))),t=t.current.alternate,t.flags|=65536,x&=-x,t.lanes|=x,o=qr(o,i),x=_h(t.stateNode,o,x),dh(t,x),_a!==4&&(_a=2)),!1;var f=Error(l(520),{cause:o});if(f=qr(f,i),id===null?id=[f]:id.push(f),_a!==4&&(_a=2),a===null)return!0;o=qr(o,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,t=x&-x,i.lanes|=t,t=_h(i.stateNode,o,t),dh(i,t),!1;case 1:if(a=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(kl===null||!kl.has(f))))return i.flags|=65536,x&=-x,i.lanes|=x,x=q0(x),H0(x,t,i,o),dh(i,x),!1}i=i.return}while(i!==null);return!1}var Mh=Error(l(461)),Wa=!1;function fr(t,a,i,o){a.child=t===null?Wr(a,null,i,o):Ns(a,t.child,i,o)}function G0(t,a,i,o,x){i=i.render;var f=a.ref;if("ref"in o){var C={};for(var F in o)F!=="ref"&&(C[F]=o[F])}else C=o;return T(a),o=fh(t,a,i,C,f,x),F=gh(),t!==null&&!Wa?(bh(t,a,x),Ki(t,a,x)):(ks&&F&&Vc(a),a.flags|=1,fr(t,a,o,x),a.child)}function Q0(t,a,i,o,x){if(t===null){var f=i.type;return typeof f=="function"&&!Uc(f)&&f.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=f,Y0(t,a,f,o,x)):(t=Mo(i.type,null,o,a,a.mode,x),t.ref=a.ref,t.return=a,a.child=t)}if(f=t.child,!Vh(t,x)){var C=f.memoizedProps;if(i=i.compare,i=i!==null?i:Cn,i(C,o)&&t.ref===a.ref)return Ki(t,a,x)}return a.flags|=1,t=Vr(f,o),t.ref=a.ref,t.return=a,a.child=t}function Y0(t,a,i,o,x){if(t!==null){var f=t.memoizedProps;if(Cn(f,o)&&t.ref===a.ref)if(Wa=!1,a.pendingProps=o=f,Vh(t,x))(t.flags&131072)!==0&&(Wa=!0);else return a.lanes=t.lanes,Ki(t,a,x)}return zh(t,a,i,o,x)}function W0(t,a,i,o){var x=o.children,f=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,t!==null){for(o=a.child=t.child,x=0;o!==null;)x=x|o.lanes|o.childLanes,o=o.sibling;o=x&~f}else o=0,a.child=null;return Z0(t,a,f,i,o)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ls(a,f!==null?f.cachePool:null),f!==null?Jf(a,f):mh(),Xf(a);else return o=a.lanes=536870912,Z0(t,a,f!==null?f.baseLanes|i:i,i,o)}else f!==null?(Ls(a,f.cachePool),Jf(a,f),Cl(),a.memoizedState=null):(t!==null&&Ls(a,null),mh(),Cl());return fr(t,a,x,i),a.child}function Xc(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Z0(t,a,i,o,x){var f=Hs();return f=f===null?null:{parent:Ze._currentValue,pool:f},a.memoizedState={baseLanes:i,cachePool:f},t!==null&&Ls(a,null),mh(),Xf(a),t!==null&&N(t,a,o,!0),a.childLanes=x,null}function Ru(t,a){return a=Mu({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function K0(t,a,i){return Ns(a,t.child,null,i),t=Ru(a,a.pendingProps),t.flags|=2,xn(a),a.memoizedState=null,t}function K1(t,a,i){var o=a.pendingProps,x=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(ks){if(o.mode==="hidden")return t=Ru(a,o),a.lanes=536870912,Xc(null,t);if(ph(a),(t=pa)?(t=cb(t,sr),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ai!==null?{id:mn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},i=gl(t),i.return=a,a.child=i,tr=a,pa=null)):t=null,t===null)throw ni(a);return a.lanes=536870912,null}return Ru(a,o)}var f=t.memoizedState;if(f!==null){var C=f.dehydrated;if(ph(a),x)if(a.flags&256)a.flags&=-257,a=K0(t,a,i);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(l(558));else if(Wa||N(t,a,i,!1),x=(i&t.childLanes)!==0,Wa||x){if(o=ja,o!==null&&(C=be(o,i),C!==0&&C!==f.retryLane))throw f.retryLane=C,wi(t,C),en(o,t,C),Mh;qu(),a=K0(t,a,i)}else t=f.treeContext,pa=_n(C.nextSibling),tr=a,ks=!0,Ci=null,sr=!1,t!==null&&bu(a,t),a=Ru(a,o),a.flags|=4096;return a}return t=Vr(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function _u(t,a){var i=a.ref;if(i===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(t===null||t.ref!==i)&&(a.flags|=4194816)}}function zh(t,a,i,o,x){return T(a),i=fh(t,a,i,o,void 0,x),o=gh(),t!==null&&!Wa?(bh(t,a,x),Ki(t,a,x)):(ks&&o&&Vc(a),a.flags|=1,fr(t,a,i,x),a.child)}function J0(t,a,i,o,x,f){return T(a),a.updateQueue=null,i=t0(a,o,i,x),e0(t),o=gh(),t!==null&&!Wa?(bh(t,a,f),Ki(t,a,f)):(ks&&o&&Vc(a),a.flags|=1,fr(t,a,i,f),a.child)}function X0(t,a,i,o,x){if(T(a),a.stateNode===null){var f=Br,C=i.contextType;typeof C=="object"&&C!==null&&(f=U(C)),f=new i(o,f),a.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Rh,a.stateNode=f,f._reactInternals=a,f=a.stateNode,f.props=o,f.state=a.memoizedState,f.refs={},oh(a),C=i.contextType,f.context=typeof C=="object"&&C!==null?U(C):Br,f.state=a.memoizedState,C=i.getDerivedStateFromProps,typeof C=="function"&&(Oh(a,i,C,o),f.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(C=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),C!==f.state&&Rh.enqueueReplaceState(f,f.state,null),Yc(a,o,f,x),Qc(),f.state=a.memoizedState),typeof f.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){f=a.stateNode;var F=a.memoizedProps,de=uo(i,F);f.props=de;var Ee=f.context,Ye=i.contextType;C=Br,typeof Ye=="object"&&Ye!==null&&(C=U(Ye));var Xe=i.getDerivedStateFromProps;Ye=typeof Xe=="function"||typeof f.getSnapshotBeforeUpdate=="function",F=a.pendingProps!==F,Ye||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(F||Ee!==C)&&F0(a,f,o,C),On=!1;var Oe=a.memoizedState;f.state=Oe,Yc(a,o,f,x),Qc(),Ee=a.memoizedState,F||Oe!==Ee||On?(typeof Xe=="function"&&(Oh(a,i,Xe,o),Ee=a.memoizedState),(de=On||$0(a,i,de,o,Oe,Ee,C))?(Ye||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(a.flags|=4194308)):(typeof f.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=Ee),f.props=o,f.state=Ee,f.context=C,o=de):(typeof f.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{f=a.stateNode,ch(t,a),C=a.memoizedProps,Ye=uo(i,C),f.props=Ye,Xe=a.pendingProps,Oe=f.context,Ee=i.contextType,de=Br,typeof Ee=="object"&&Ee!==null&&(de=U(Ee)),F=i.getDerivedStateFromProps,(Ee=typeof F=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(C!==Xe||Oe!==de)&&F0(a,f,o,de),On=!1,Oe=a.memoizedState,f.state=Oe,Yc(a,o,f,x),Qc();var qe=a.memoizedState;C!==Xe||Oe!==qe||On||t!==null&&t.dependencies!==null&&S(t.dependencies)?(typeof F=="function"&&(Oh(a,i,F,o),qe=a.memoizedState),(Ye=On||$0(a,i,Ye,o,Oe,qe,de)||t!==null&&t.dependencies!==null&&S(t.dependencies))?(Ee||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,qe,de),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,qe,de)),typeof f.componentDidUpdate=="function"&&(a.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof f.componentDidUpdate!="function"||C===t.memoizedProps&&Oe===t.memoizedState||(a.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&Oe===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=qe),f.props=o,f.state=qe,f.context=de,o=Ye):(typeof f.componentDidUpdate!="function"||C===t.memoizedProps&&Oe===t.memoizedState||(a.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&Oe===t.memoizedState||(a.flags|=1024),o=!1)}return f=o,_u(t,a),o=(a.flags&128)!==0,f||o?(f=a.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),a.flags|=1,t!==null&&o?(a.child=Ns(a,t.child,null,x),a.child=Ns(a,null,i,x)):fr(t,a,i,x),a.memoizedState=f.state,t=a.child):t=Ki(t,a,x),t}function eg(t,a,i,o){return Qi(),a.flags|=256,fr(t,a,i,o),a.child}var Lh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $h(t){return{baseLanes:t,cachePool:Yr()}}function Fh(t,a,i){return t=t!==null?t.childLanes&~i:0,a&&(t|=gn),t}function tg(t,a,i){var o=a.pendingProps,x=!1,f=(a.flags&128)!==0,C;if((C=f)||(C=t!==null&&t.memoizedState===null?!1:(Ia.current&2)!==0),C&&(x=!0,a.flags&=-129),C=(a.flags&32)!==0,a.flags&=-33,t===null){if(ks){if(x?Sl(a):Cl(),(t=pa)?(t=cb(t,sr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ai!==null?{id:mn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},i=gl(t),i.return=a,a.child=i,tr=a,pa=null)):t=null,t===null)throw ni(a);return vp(t)?a.lanes=32:a.lanes=536870912,null}var F=o.children;return o=o.fallback,x?(Cl(),x=a.mode,F=Mu({mode:"hidden",children:F},x),o=Hi(o,x,i,null),F.return=a,o.return=a,F.sibling=o,a.child=F,o=a.child,o.memoizedState=$h(i),o.childLanes=Fh(t,C,i),a.memoizedState=Lh,Xc(null,o)):(Sl(a),Uh(a,F))}var de=t.memoizedState;if(de!==null&&(F=de.dehydrated,F!==null)){if(f)a.flags&256?(Sl(a),a.flags&=-257,a=Ih(t,a,i)):a.memoizedState!==null?(Cl(),a.child=t.child,a.flags|=128,a=null):(Cl(),F=o.fallback,x=a.mode,o=Mu({mode:"visible",children:o.children},x),F=Hi(F,x,i,null),F.flags|=2,o.return=a,F.return=a,o.sibling=F,a.child=o,Ns(a,t.child,null,i),o=a.child,o.memoizedState=$h(i),o.childLanes=Fh(t,C,i),a.memoizedState=Lh,a=Xc(null,o));else if(Sl(a),vp(F)){if(C=F.nextSibling&&F.nextSibling.dataset,C)var Ee=C.dgst;C=Ee,o=Error(l(419)),o.stack="",o.digest=C,jl({value:o,source:null,stack:null}),a=Ih(t,a,i)}else if(Wa||N(t,a,i,!1),C=(i&t.childLanes)!==0,Wa||C){if(C=ja,C!==null&&(o=be(C,i),o!==0&&o!==de.retryLane))throw de.retryLane=o,wi(t,o),en(C,t,o),Mh;jp(F)||qu(),a=Ih(t,a,i)}else jp(F)?(a.flags|=192,a.child=t.child,a=null):(t=de.treeContext,pa=_n(F.nextSibling),tr=a,ks=!0,Ci=null,sr=!1,t!==null&&bu(a,t),a=Uh(a,o.children),a.flags|=4096);return a}return x?(Cl(),F=o.fallback,x=a.mode,de=t.child,Ee=de.sibling,o=Vr(de,{mode:"hidden",children:o.children}),o.subtreeFlags=de.subtreeFlags&65011712,Ee!==null?F=Vr(Ee,F):(F=Hi(F,x,i,null),F.flags|=2),F.return=a,o.return=a,o.sibling=F,a.child=o,Xc(null,o),o=a.child,F=t.child.memoizedState,F===null?F=$h(i):(x=F.cachePool,x!==null?(de=Ze._currentValue,x=x.parent!==de?{parent:de,pool:de}:x):x=Yr(),F={baseLanes:F.baseLanes|i,cachePool:x}),o.memoizedState=F,o.childLanes=Fh(t,C,i),a.memoizedState=Lh,Xc(t.child,o)):(Sl(a),i=t.child,t=i.sibling,i=Vr(i,{mode:"visible",children:o.children}),i.return=a,i.sibling=null,t!==null&&(C=a.deletions,C===null?(a.deletions=[t],a.flags|=16):C.push(t)),a.child=i,a.memoizedState=null,i)}function Uh(t,a){return a=Mu({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Mu(t,a){return t=kr(22,t,null,a),t.lanes=0,t}function Ih(t,a,i){return Ns(a,t.child,null,i),t=Uh(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function sg(t,a,i){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),c(t.return,a,i)}function Bh(t,a,i,o,x,f){var C=t.memoizedState;C===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:x,treeForkCount:f}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=o,C.tail=i,C.tailMode=x,C.treeForkCount=f)}function ag(t,a,i){var o=a.pendingProps,x=o.revealOrder,f=o.tail;o=o.children;var C=Ia.current,F=(C&2)!==0;if(F?(C=C&1|2,a.flags|=128):C&=1,z(Ia,C),fr(t,a,o,i),o=ks?no:0,!F&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sg(t,i,a);else if(t.tag===19)sg(t,i,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(x){case"forwards":for(i=a.child,x=null;i!==null;)t=i.alternate,t!==null&&wu(t)===null&&(x=i),i=i.sibling;i=x,i===null?(x=a.child,a.child=null):(x=i.sibling,i.sibling=null),Bh(a,!1,x,i,f,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,x=a.child,a.child=null;x!==null;){if(t=x.alternate,t!==null&&wu(t)===null){a.child=x;break}t=x.sibling,x.sibling=i,i=x,x=t}Bh(a,!0,i,null,f,o);break;case"together":Bh(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function Ki(t,a,i){if(t!==null&&(a.dependencies=t.dependencies),Tl|=a.lanes,(i&a.childLanes)===0)if(t!==null){if(N(t,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(l(153));if(a.child!==null){for(t=a.child,i=Vr(t,t.pendingProps),a.child=i,i.return=a;t.sibling!==null;)t=t.sibling,i=i.sibling=Vr(t,t.pendingProps),i.return=a;i.sibling=null}return a.child}function Vh(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&S(t)))}function J1(t,a,i){switch(a.tag){case 3:_(a,a.stateNode.containerInfo),ii(a,Ze,t.memoizedState.cache),Qi();break;case 27:case 5:fe(a);break;case 4:_(a,a.stateNode.containerInfo);break;case 10:ii(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,ph(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(Sl(a),a.flags|=128,null):(i&a.child.childLanes)!==0?tg(t,a,i):(Sl(a),t=Ki(t,a,i),t!==null?t.sibling:null);Sl(a);break;case 19:var x=(t.flags&128)!==0;if(o=(i&a.childLanes)!==0,o||(N(t,a,i,!1),o=(i&a.childLanes)!==0),x){if(o)return ag(t,a,i);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),z(Ia,Ia.current),o)break;return null;case 22:return a.lanes=0,W0(t,a,i,a.pendingProps);case 24:ii(a,Ze,t.memoizedState.cache)}return Ki(t,a,i)}function rg(t,a,i){if(t!==null)if(t.memoizedProps!==a.pendingProps)Wa=!0;else{if(!Vh(t,i)&&(a.flags&128)===0)return Wa=!1,J1(t,a,i);Wa=(t.flags&131072)!==0}else Wa=!1,ks&&(a.flags&1048576)!==0&&gu(a,no,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=hn(a.elementType),a.type=t,typeof t=="function")Uc(t)?(o=uo(t,o),a.tag=1,a=X0(null,a,t,o,i)):(a.tag=0,a=zh(null,a,t,o,i));else{if(t!=null){var x=t.$$typeof;if(x===ae){a.tag=11,a=G0(null,a,t,o,i);break e}else if(x===k){a.tag=14,a=Q0(null,a,t,o,i);break e}}throw a=$(t)||t,Error(l(306,a,""))}}return a;case 0:return zh(t,a,a.type,a.pendingProps,i);case 1:return o=a.type,x=uo(o,a.pendingProps),X0(t,a,o,x,i);case 3:e:{if(_(a,a.stateNode.containerInfo),t===null)throw Error(l(387));o=a.pendingProps;var f=a.memoizedState;x=f.element,ch(t,a),Yc(a,o,null,i);var C=a.memoizedState;if(o=C.cache,ii(a,Ze,o),o!==f.cache&&b(a,[Ze],i,!0),Qc(),o=C.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:C.cache},a.updateQueue.baseState=f,a.memoizedState=f,a.flags&256){a=eg(t,a,o,i);break e}else if(o!==x){x=qr(Error(l(424)),a),jl(x),a=eg(t,a,o,i);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(pa=_n(t.firstChild),tr=a,ks=!0,Ci=null,sr=!0,i=Wr(a,null,o,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Qi(),o===x){a=Ki(t,a,i);break e}fr(t,a,o,i)}a=a.child}return a;case 26:return _u(t,a),t===null?(i=xb(a.type,null,a.pendingProps,null))?a.memoizedState=i:ks||(i=a.type,t=a.pendingProps,o=Ku(I.current).createElement(i),o[ft]=a,o[kt]=t,gr(o,i,t),oa(o),a.stateNode=o):a.memoizedState=xb(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return fe(a),t===null&&ks&&(o=a.stateNode=mb(a.type,a.pendingProps,I.current),tr=a,sr=!0,x=pa,Rl(a.type)?(Np=x,pa=_n(o.firstChild)):pa=x),fr(t,a,a.pendingProps.children,i),_u(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&ks&&((x=o=pa)&&(o=T2(o,a.type,a.pendingProps,sr),o!==null?(a.stateNode=o,tr=a,pa=_n(o.firstChild),sr=!1,x=!0):x=!1),x||ni(a)),fe(a),x=a.type,f=a.pendingProps,C=t!==null?t.memoizedProps:null,o=f.children,gp(x,f)?o=null:C!==null&&gp(x,C)&&(a.flags|=32),a.memoizedState!==null&&(x=fh(t,a,V1,null,null,i),pd._currentValue=x),_u(t,a),fr(t,a,o,i),a.child;case 6:return t===null&&ks&&((t=i=pa)&&(i=k2(i,a.pendingProps,sr),i!==null?(a.stateNode=i,tr=a,pa=null,t=!0):t=!1),t||ni(a)),null;case 13:return tg(t,a,i);case 4:return _(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=Ns(a,null,o,i):fr(t,a,o,i),a.child;case 11:return G0(t,a,a.type,a.pendingProps,i);case 7:return fr(t,a,a.pendingProps,i),a.child;case 8:return fr(t,a,a.pendingProps.children,i),a.child;case 12:return fr(t,a,a.pendingProps.children,i),a.child;case 10:return o=a.pendingProps,ii(a,a.type,o.value),fr(t,a,o.children,i),a.child;case 9:return x=a.type._context,o=a.pendingProps.children,T(a),x=U(x),o=o(x),a.flags|=1,fr(t,a,o,i),a.child;case 14:return Q0(t,a,a.type,a.pendingProps,i);case 15:return Y0(t,a,a.type,a.pendingProps,i);case 19:return ag(t,a,i);case 31:return K1(t,a,i);case 22:return W0(t,a,i,a.pendingProps);case 24:return T(a),o=U(Ze),t===null?(x=Hs(),x===null&&(x=ja,f=Et(),x.pooledCache=f,f.refCount++,f!==null&&(x.pooledCacheLanes|=i),x=f),a.memoizedState={parent:o,cache:x},oh(a),ii(a,Ze,x)):((t.lanes&i)!==0&&(ch(t,a),Yc(a,null,null,i),Qc()),x=t.memoizedState,f=a.memoizedState,x.parent!==o?(x={parent:o,cache:o},a.memoizedState=x,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=x),ii(a,Ze,o)):(o=f.cache,ii(a,Ze,o),o!==x.cache&&b(a,[Ze],i,!0))),fr(t,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(l(156,a.tag))}function Ji(t){t.flags|=4}function qh(t,a,i,o,x){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(x&335544128)===x)if(t.stateNode.complete)t.flags|=8192;else if(Dg())t.flags|=8192;else throw Yi=pt,ar}else t.flags&=-16777217}function ng(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!jb(a))if(Dg())t.flags|=8192;else throw Yi=pt,ar}function zu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?ir():536870912,t.lanes|=a,Qo|=a)}function ed(t,a){if(!ks)switch(t.tailMode){case"hidden":a=t.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Ca(t){var a=t.alternate!==null&&t.alternate.child===t.child,i=0,o=0;if(a)for(var x=t.child;x!==null;)i|=x.lanes|x.childLanes,o|=x.subtreeFlags&65011712,o|=x.flags&65011712,x.return=t,x=x.sibling;else for(x=t.child;x!==null;)i|=x.lanes|x.childLanes,o|=x.subtreeFlags,o|=x.flags,x.return=t,x=x.sibling;return t.subtreeFlags|=o,t.childLanes=i,a}function X1(t,a,i){var o=a.pendingProps;switch(qc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ca(a),null;case 1:return Ca(a),null;case 3:return i=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),kn(Ze),me(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(yl(a)?Ji(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Lo())),Ca(a),null;case 26:var x=a.type,f=a.memoizedState;return t===null?(Ji(a),f!==null?(Ca(a),ng(a,f)):(Ca(a),qh(a,x,null,o,i))):f?f!==t.memoizedState?(Ji(a),Ca(a),ng(a,f)):(Ca(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&Ji(a),Ca(a),qh(a,x,t,o,i)),null;case 27:if(Me(a),i=I.current,x=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ji(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return Ca(a),null}t=ye.current,yl(a)?io(a):(t=mb(x,o,i),a.stateNode=t,Ji(a))}return Ca(a),null;case 5:if(Me(a),x=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ji(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return Ca(a),null}if(f=ye.current,yl(a))io(a);else{var C=Ku(I.current);switch(f){case 1:f=C.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:f=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":f=C.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":f=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":f=C.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?C.createElement("select",{is:o.is}):C.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?C.createElement(x,{is:o.is}):C.createElement(x)}}f[ft]=a,f[kt]=o;e:for(C=a.child;C!==null;){if(C.tag===5||C.tag===6)f.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===a)break e;for(;C.sibling===null;){if(C.return===null||C.return===a)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}a.stateNode=f;e:switch(gr(f,x,o),x){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ji(a)}}return Ca(a),qh(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,i),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Ji(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(l(166));if(t=I.current,yl(a)){if(t=a.stateNode,i=a.memoizedProps,o=null,x=tr,x!==null)switch(x.tag){case 27:case 5:o=x.memoizedProps}t[ft]=a,t=!!(t.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||tb(t.nodeValue,i)),t||ni(a,!0)}else t=Ku(t).createTextNode(o),t[ft]=a,a.stateNode=t}return Ca(a),null;case 31:if(i=a.memoizedState,t===null||t.memoizedState!==null){if(o=yl(a),i!==null){if(t===null){if(!o)throw Error(l(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[ft]=a}else Qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ca(a),t=!1}else i=Lo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return a.flags&256?(xn(a),a):(xn(a),null);if((a.flags&128)!==0)throw Error(l(558))}return Ca(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(x=yl(a),o!==null&&o.dehydrated!==null){if(t===null){if(!x)throw Error(l(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(l(317));x[ft]=a}else Qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ca(a),x=!1}else x=Lo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=x),x=!0;if(!x)return a.flags&256?(xn(a),a):(xn(a),null)}return xn(a),(a.flags&128)!==0?(a.lanes=i,a):(i=o!==null,t=t!==null&&t.memoizedState!==null,i&&(o=a.child,x=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(x=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==x&&(o.flags|=2048)),i!==t&&i&&(a.child.flags|=8192),zu(a,a.updateQueue),Ca(a),null);case 4:return me(),t===null&&mp(a.stateNode.containerInfo),Ca(a),null;case 10:return kn(a.type),Ca(a),null;case 19:if(J(Ia),o=a.memoizedState,o===null)return Ca(a),null;if(x=(a.flags&128)!==0,f=o.rendering,f===null)if(x)ed(o,!1);else{if(_a!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(f=wu(t),f!==null){for(a.flags|=128,ed(o,!1),t=f.updateQueue,a.updateQueue=t,zu(a,t),a.subtreeFlags=0,t=i,i=a.child;i!==null;)fu(i,t),i=i.sibling;return z(Ia,Ia.current&1|2),ks&&ri(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&Vt()>Iu&&(a.flags|=128,x=!0,ed(o,!1),a.lanes=4194304)}else{if(!x)if(t=wu(f),t!==null){if(a.flags|=128,x=!0,t=t.updateQueue,a.updateQueue=t,zu(a,t),ed(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!ks)return Ca(a),null}else 2*Vt()-o.renderingStartTime>Iu&&i!==536870912&&(a.flags|=128,x=!0,ed(o,!1),a.lanes=4194304);o.isBackwards?(f.sibling=a.child,a.child=f):(t=o.last,t!==null?t.sibling=f:a.child=f,o.last=f)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Vt(),t.sibling=null,i=Ia.current,z(Ia,x?i&1|2:i&1),ks&&ri(a,o.treeForkCount),t):(Ca(a),null);case 22:case 23:return xn(a),hh(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(i&536870912)!==0&&(a.flags&128)===0&&(Ca(a),a.subtreeFlags&6&&(a.flags|=8192)):Ca(a),i=a.updateQueue,i!==null&&zu(a,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==i&&(a.flags|=2048),t!==null&&J(St),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),kn(Ze),Ca(a),null;case 25:return null;case 30:return null}throw Error(l(156,a.tag))}function e2(t,a){switch(qc(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return kn(Ze),me(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Me(a),null;case 31:if(a.memoizedState!==null){if(xn(a),a.alternate===null)throw Error(l(340));Qi()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(xn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(l(340));Qi()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return J(Ia),null;case 4:return me(),null;case 10:return kn(a.type),null;case 22:case 23:return xn(a),hh(),t!==null&&J(St),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return kn(Ze),null;case 25:return null;default:return null}}function ig(t,a){switch(qc(a),a.tag){case 3:kn(Ze),me();break;case 26:case 27:case 5:Me(a);break;case 4:me();break;case 31:a.memoizedState!==null&&xn(a);break;case 13:xn(a);break;case 19:J(Ia);break;case 10:kn(a.type);break;case 22:case 23:xn(a),hh(),t!==null&&J(St);break;case 24:kn(Ze)}}function td(t,a){try{var i=a.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var x=o.next;i=x;do{if((i.tag&t)===t){o=void 0;var f=i.create,C=i.inst;o=f(),C.destroy=o}i=i.next}while(i!==x)}}catch(F){ma(a,a.return,F)}}function Al(t,a,i){try{var o=a.updateQueue,x=o!==null?o.lastEffect:null;if(x!==null){var f=x.next;o=f;do{if((o.tag&t)===t){var C=o.inst,F=C.destroy;if(F!==void 0){C.destroy=void 0,x=a;var de=i,Ee=F;try{Ee()}catch(Ye){ma(x,de,Ye)}}}o=o.next}while(o!==f)}}catch(Ye){ma(a,a.return,Ye)}}function lg(t){var a=t.updateQueue;if(a!==null){var i=t.stateNode;try{Kf(a,i)}catch(o){ma(t,t.return,o)}}}function og(t,a,i){i.props=uo(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(o){ma(t,a,o)}}function sd(t,a){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof i=="function"?t.refCleanup=i(o):i.current=o}}catch(x){ma(t,a,x)}}function Ei(t,a){var i=t.ref,o=t.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(x){ma(t,a,x)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(x){ma(t,a,x)}else i.current=null}function cg(t){var a=t.type,i=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(x){ma(t,t.return,x)}}function Hh(t,a,i){try{var o=t.stateNode;N2(o,t.type,i,a),o[kt]=a}catch(x){ma(t,t.return,x)}}function dg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Rl(t.type)||t.tag===4}function Gh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Rl(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qh(t,a,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(t),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=Ue));else if(o!==4&&(o===27&&Rl(t.type)&&(i=t.stateNode,a=null),t=t.child,t!==null))for(Qh(t,a,i),t=t.sibling;t!==null;)Qh(t,a,i),t=t.sibling}function Lu(t,a,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?i.insertBefore(t,a):i.appendChild(t);else if(o!==4&&(o===27&&Rl(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Lu(t,a,i),t=t.sibling;t!==null;)Lu(t,a,i),t=t.sibling}function ug(t){var a=t.stateNode,i=t.memoizedProps;try{for(var o=t.type,x=a.attributes;x.length;)a.removeAttributeNode(x[0]);gr(a,o,i),a[ft]=t,a[kt]=i}catch(f){ma(t,t.return,f)}}var Xi=!1,Za=!1,Yh=!1,mg=typeof WeakSet=="function"?WeakSet:Set,ur=null;function t2(t,a){if(t=t.containerInfo,xp=rm,t=An(t),ko(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var x=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var C=0,F=-1,de=-1,Ee=0,Ye=0,Xe=t,Oe=null;t:for(;;){for(var qe;Xe!==i||x!==0&&Xe.nodeType!==3||(F=C+x),Xe!==f||o!==0&&Xe.nodeType!==3||(de=C+o),Xe.nodeType===3&&(C+=Xe.nodeValue.length),(qe=Xe.firstChild)!==null;)Oe=Xe,Xe=qe;for(;;){if(Xe===t)break t;if(Oe===i&&++Ee===x&&(F=C),Oe===f&&++Ye===o&&(de=C),(qe=Xe.nextSibling)!==null)break;Xe=Oe,Oe=Xe.parentNode}Xe=qe}i=F===-1||de===-1?null:{start:F,end:de}}else i=null}i=i||{start:0,end:0}}else i=null;for(fp={focusedElem:t,selectionRange:i},rm=!1,ur=a;ur!==null;)if(a=ur,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,ur=t;else for(;ur!==null;){switch(a=ur,f=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)x=t[i],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,i=a,x=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var $t=uo(i.type,x);t=o.getSnapshotBeforeUpdate($t,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(os){ma(i,i.return,os)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,i=t.nodeType,i===9)yp(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":yp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=a.sibling,t!==null){t.return=a.return,ur=t;break}ur=a.return}}function hg(t,a,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:tl(t,i),o&4&&td(5,i);break;case 1:if(tl(t,i),o&4)if(t=i.stateNode,a===null)try{t.componentDidMount()}catch(C){ma(i,i.return,C)}else{var x=uo(i.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(x,a,t.__reactInternalSnapshotBeforeUpdate)}catch(C){ma(i,i.return,C)}}o&64&&lg(i),o&512&&sd(i,i.return);break;case 3:if(tl(t,i),o&64&&(t=i.updateQueue,t!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{Kf(t,a)}catch(C){ma(i,i.return,C)}}break;case 27:a===null&&o&4&&ug(i);case 26:case 5:tl(t,i),a===null&&o&4&&cg(i),o&512&&sd(i,i.return);break;case 12:tl(t,i);break;case 31:tl(t,i),o&4&&fg(t,i);break;case 13:tl(t,i),o&4&&gg(t,i),o&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=d2.bind(null,i),P2(t,i))));break;case 22:if(o=i.memoizedState!==null||Xi,!o){a=a!==null&&a.memoizedState!==null||Za,x=Xi;var f=Za;Xi=o,(Za=a)&&!f?sl(t,i,(i.subtreeFlags&8772)!==0):tl(t,i),Xi=x,Za=f}break;case 30:break;default:tl(t,i)}}function pg(t){var a=t.alternate;a!==null&&(t.alternate=null,pg(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&la(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ka=null,Zr=!1;function el(t,a,i){for(i=i.child;i!==null;)xg(t,a,i),i=i.sibling}function xg(t,a,i){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(at,i)}catch{}switch(i.tag){case 26:Za||Ei(i,a),el(t,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Za||Ei(i,a);var o=ka,x=Zr;Rl(i.type)&&(ka=i.stateNode,Zr=!1),el(t,a,i),ud(i.stateNode),ka=o,Zr=x;break;case 5:Za||Ei(i,a);case 6:if(o=ka,x=Zr,ka=null,el(t,a,i),ka=o,Zr=x,ka!==null)if(Zr)try{(ka.nodeType===9?ka.body:ka.nodeName==="HTML"?ka.ownerDocument.body:ka).removeChild(i.stateNode)}catch(f){ma(i,a,f)}else try{ka.removeChild(i.stateNode)}catch(f){ma(i,a,f)}break;case 18:ka!==null&&(Zr?(t=ka,lb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),tc(t)):lb(ka,i.stateNode));break;case 4:o=ka,x=Zr,ka=i.stateNode.containerInfo,Zr=!0,el(t,a,i),ka=o,Zr=x;break;case 0:case 11:case 14:case 15:Al(2,i,a),Za||Al(4,i,a),el(t,a,i);break;case 1:Za||(Ei(i,a),o=i.stateNode,typeof o.componentWillUnmount=="function"&&og(i,a,o)),el(t,a,i);break;case 21:el(t,a,i);break;case 22:Za=(o=Za)||i.memoizedState!==null,el(t,a,i),Za=o;break;default:el(t,a,i)}}function fg(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{tc(t)}catch(i){ma(a,a.return,i)}}}function gg(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{tc(t)}catch(i){ma(a,a.return,i)}}function s2(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new mg),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new mg),a;default:throw Error(l(435,t.tag))}}function $u(t,a){var i=s2(t);a.forEach(function(o){if(!i.has(o)){i.add(o);var x=u2.bind(null,t,o);o.then(x,x)}})}function Kr(t,a){var i=a.deletions;if(i!==null)for(var o=0;o<i.length;o++){var x=i[o],f=t,C=a,F=C;e:for(;F!==null;){switch(F.tag){case 27:if(Rl(F.type)){ka=F.stateNode,Zr=!1;break e}break;case 5:ka=F.stateNode,Zr=!1;break e;case 3:case 4:ka=F.stateNode.containerInfo,Zr=!0;break e}F=F.return}if(ka===null)throw Error(l(160));xg(f,C,x),ka=null,Zr=!1,f=x.alternate,f!==null&&(f.return=null),x.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)bg(a,t),a=a.sibling}var li=null;function bg(t,a){var i=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Kr(a,t),Jr(t),o&4&&(Al(3,t,t.return),td(3,t),Al(5,t,t.return));break;case 1:Kr(a,t),Jr(t),o&512&&(Za||i===null||Ei(i,i.return)),o&64&&Xi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var x=li;if(Kr(a,t),Jr(t),o&512&&(Za||i===null||Ei(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=t.memoizedState,i===null)if(o===null)if(t.stateNode===null){e:{o=t.type,i=t.memoizedProps,x=x.ownerDocument||x;t:switch(o){case"title":f=x.getElementsByTagName("title")[0],(!f||f[gs]||f[ft]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=x.createElement(o),x.head.insertBefore(f,x.querySelector("head > title"))),gr(f,o,i),f[ft]=t,oa(f),o=f;break e;case"link":var C=bb("link","href",x).get(o+(i.href||""));if(C){for(var F=0;F<C.length;F++)if(f=C[F],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){C.splice(F,1);break t}}f=x.createElement(o),gr(f,o,i),x.head.appendChild(f);break;case"meta":if(C=bb("meta","content",x).get(o+(i.content||""))){for(F=0;F<C.length;F++)if(f=C[F],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){C.splice(F,1);break t}}f=x.createElement(o),gr(f,o,i),x.head.appendChild(f);break;default:throw Error(l(468,o))}f[ft]=t,oa(f),o=f}t.stateNode=o}else yb(x,t.type,t.stateNode);else t.stateNode=gb(x,o,t.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?yb(x,t.type,t.stateNode):gb(x,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Hh(t,t.memoizedProps,i.memoizedProps)}break;case 27:Kr(a,t),Jr(t),o&512&&(Za||i===null||Ei(i,i.return)),i!==null&&o&4&&Hh(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Kr(a,t),Jr(t),o&512&&(Za||i===null||Ei(i,i.return)),t.flags&32){x=t.stateNode;try{ze(x,"")}catch($t){ma(t,t.return,$t)}}o&4&&t.stateNode!=null&&(x=t.memoizedProps,Hh(t,x,i!==null?i.memoizedProps:x)),o&1024&&(Yh=!0);break;case 6:if(Kr(a,t),Jr(t),o&4){if(t.stateNode===null)throw Error(l(162));o=t.memoizedProps,i=t.stateNode;try{i.nodeValue=o}catch($t){ma(t,t.return,$t)}}break;case 3:if(em=null,x=li,li=Ju(a.containerInfo),Kr(a,t),li=x,Jr(t),o&4&&i!==null&&i.memoizedState.isDehydrated)try{tc(a.containerInfo)}catch($t){ma(t,t.return,$t)}Yh&&(Yh=!1,yg(t));break;case 4:o=li,li=Ju(t.stateNode.containerInfo),Kr(a,t),Jr(t),li=o;break;case 12:Kr(a,t),Jr(t);break;case 31:Kr(a,t),Jr(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,$u(t,o)));break;case 13:Kr(a,t),Jr(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Uu=Vt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,$u(t,o)));break;case 22:x=t.memoizedState!==null;var de=i!==null&&i.memoizedState!==null,Ee=Xi,Ye=Za;if(Xi=Ee||x,Za=Ye||de,Kr(a,t),Za=Ye,Xi=Ee,Jr(t),o&8192)e:for(a=t.stateNode,a._visibility=x?a._visibility&-2:a._visibility|1,x&&(i===null||de||Xi||Za||mo(t)),i=null,a=t;;){if(a.tag===5||a.tag===26){if(i===null){de=i=a;try{if(f=de.stateNode,x)C=f.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{F=de.stateNode;var Xe=de.memoizedProps.style,Oe=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;F.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch($t){ma(de,de.return,$t)}}}else if(a.tag===6){if(i===null){de=a;try{de.stateNode.nodeValue=x?"":de.memoizedProps}catch($t){ma(de,de.return,$t)}}}else if(a.tag===18){if(i===null){de=a;try{var qe=de.stateNode;x?ob(qe,!0):ob(de.stateNode,!1)}catch($t){ma(de,de.return,$t)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,$u(t,i))));break;case 19:Kr(a,t),Jr(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,$u(t,o)));break;case 30:break;case 21:break;default:Kr(a,t),Jr(t)}}function Jr(t){var a=t.flags;if(a&2){try{for(var i,o=t.return;o!==null;){if(dg(o)){i=o;break}o=o.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:var x=i.stateNode,f=Gh(t);Lu(t,f,x);break;case 5:var C=i.stateNode;i.flags&32&&(ze(C,""),i.flags&=-33);var F=Gh(t);Lu(t,F,C);break;case 3:case 4:var de=i.stateNode.containerInfo,Ee=Gh(t);Qh(t,Ee,de);break;default:throw Error(l(161))}}catch(Ye){ma(t,t.return,Ye)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function yg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;yg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function tl(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)hg(t,a.alternate,a),a=a.sibling}function mo(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Al(4,a,a.return),mo(a);break;case 1:Ei(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&og(a,a.return,i),mo(a);break;case 27:ud(a.stateNode);case 26:case 5:Ei(a,a.return),mo(a);break;case 22:a.memoizedState===null&&mo(a);break;case 30:mo(a);break;default:mo(a)}t=t.sibling}}function sl(t,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,x=t,f=a,C=f.flags;switch(f.tag){case 0:case 11:case 15:sl(x,f,i),td(4,f);break;case 1:if(sl(x,f,i),o=f,x=o.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Ee){ma(o,o.return,Ee)}if(o=f,x=o.updateQueue,x!==null){var F=o.stateNode;try{var de=x.shared.hiddenCallbacks;if(de!==null)for(x.shared.hiddenCallbacks=null,x=0;x<de.length;x++)Zf(de[x],F)}catch(Ee){ma(o,o.return,Ee)}}i&&C&64&&lg(f),sd(f,f.return);break;case 27:ug(f);case 26:case 5:sl(x,f,i),i&&o===null&&C&4&&cg(f),sd(f,f.return);break;case 12:sl(x,f,i);break;case 31:sl(x,f,i),i&&C&4&&fg(x,f);break;case 13:sl(x,f,i),i&&C&4&&gg(x,f);break;case 22:f.memoizedState===null&&sl(x,f,i),sd(f,f.return);break;case 30:break;default:sl(x,f,i)}a=a.sibling}}function Wh(t,a){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Qt(i))}function Zh(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Qt(t))}function oi(t,a,i,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)jg(t,a,i,o),a=a.sibling}function jg(t,a,i,o){var x=a.flags;switch(a.tag){case 0:case 11:case 15:oi(t,a,i,o),x&2048&&td(9,a);break;case 1:oi(t,a,i,o);break;case 3:oi(t,a,i,o),x&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Qt(t)));break;case 12:if(x&2048){oi(t,a,i,o),t=a.stateNode;try{var f=a.memoizedProps,C=f.id,F=f.onPostCommit;typeof F=="function"&&F(C,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(de){ma(a,a.return,de)}}else oi(t,a,i,o);break;case 31:oi(t,a,i,o);break;case 13:oi(t,a,i,o);break;case 23:break;case 22:f=a.stateNode,C=a.alternate,a.memoizedState!==null?f._visibility&2?oi(t,a,i,o):ad(t,a):f._visibility&2?oi(t,a,i,o):(f._visibility|=2,qo(t,a,i,o,(a.subtreeFlags&10256)!==0||!1)),x&2048&&Wh(C,a);break;case 24:oi(t,a,i,o),x&2048&&Zh(a.alternate,a);break;default:oi(t,a,i,o)}}function qo(t,a,i,o,x){for(x=x&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var f=t,C=a,F=i,de=o,Ee=C.flags;switch(C.tag){case 0:case 11:case 15:qo(f,C,F,de,x),td(8,C);break;case 23:break;case 22:var Ye=C.stateNode;C.memoizedState!==null?Ye._visibility&2?qo(f,C,F,de,x):ad(f,C):(Ye._visibility|=2,qo(f,C,F,de,x)),x&&Ee&2048&&Wh(C.alternate,C);break;case 24:qo(f,C,F,de,x),x&&Ee&2048&&Zh(C.alternate,C);break;default:qo(f,C,F,de,x)}a=a.sibling}}function ad(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=t,o=a,x=o.flags;switch(o.tag){case 22:ad(i,o),x&2048&&Wh(o.alternate,o);break;case 24:ad(i,o),x&2048&&Zh(o.alternate,o);break;default:ad(i,o)}a=a.sibling}}var rd=8192;function Ho(t,a,i){if(t.subtreeFlags&rd)for(t=t.child;t!==null;)vg(t,a,i),t=t.sibling}function vg(t,a,i){switch(t.tag){case 26:Ho(t,a,i),t.flags&rd&&t.memoizedState!==null&&B2(i,li,t.memoizedState,t.memoizedProps);break;case 5:Ho(t,a,i);break;case 3:case 4:var o=li;li=Ju(t.stateNode.containerInfo),Ho(t,a,i),li=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=rd,rd=16777216,Ho(t,a,i),rd=o):Ho(t,a,i));break;default:Ho(t,a,i)}}function Ng(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function nd(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var o=a[i];ur=o,Sg(o,t)}Ng(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wg(t),t=t.sibling}function wg(t){switch(t.tag){case 0:case 11:case 15:nd(t),t.flags&2048&&Al(9,t,t.return);break;case 3:nd(t);break;case 12:nd(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Fu(t)):nd(t);break;default:nd(t)}}function Fu(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var o=a[i];ur=o,Sg(o,t)}Ng(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Al(8,a,a.return),Fu(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,Fu(a));break;default:Fu(a)}t=t.sibling}}function Sg(t,a){for(;ur!==null;){var i=ur;switch(i.tag){case 0:case 11:case 15:Al(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Qt(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,ur=o;else e:for(i=t;ur!==null;){o=ur;var x=o.sibling,f=o.return;if(pg(o),o===i){ur=null;break e}if(x!==null){x.return=f,ur=x;break e}ur=f}}}var a2={getCacheForType:function(t){var a=U(Ze),i=a.data.get(t);return i===void 0&&(i=t(),a.data.set(t,i)),i},cacheSignal:function(){return U(Ze).controller.signal}},r2=typeof WeakMap=="function"?WeakMap:Map,sa=0,ja=null,$s=null,Us=0,ua=0,fn=null,El=!1,Go=!1,Kh=!1,al=0,_a=0,Tl=0,ho=0,Jh=0,gn=0,Qo=0,id=null,Xr=null,Xh=!1,Uu=0,Cg=0,Iu=1/0,Bu=null,kl=null,rr=0,Pl=null,Yo=null,rl=0,ep=0,tp=null,Ag=null,ld=0,sp=null;function bn(){return(sa&2)!==0&&Us!==0?Us&-Us:B.T!==null?op():lt()}function Eg(){if(gn===0)if((Us&536870912)===0||ks){var t=Ds;Ds<<=1,(Ds&3932160)===0&&(Ds=262144),gn=t}else gn=536870912;return t=pn.current,t!==null&&(t.flags|=32),gn}function en(t,a,i){(t===ja&&(ua===2||ua===9)||t.cancelPendingCommit!==null)&&(Wo(t,0),Dl(t,Us,gn,!1)),ln(t,i),((sa&2)===0||t!==ja)&&(t===ja&&((sa&2)===0&&(ho|=i),_a===4&&Dl(t,Us,gn,!1)),Ti(t))}function Tg(t,a,i){if((sa&6)!==0)throw Error(l(327));var o=!i&&(a&127)===0&&(a&t.expiredLanes)===0||ha(t,a),x=o?l2(t,a):rp(t,a,!0),f=o;do{if(x===0){Go&&!o&&Dl(t,a,0,!1);break}else{if(i=t.current.alternate,f&&!n2(i)){x=rp(t,a,!1),f=!1;continue}if(x===2){if(f=a,t.errorRecoveryDisabledLanes&f)var C=0;else C=t.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){a=C;e:{var F=t;x=id;var de=F.current.memoizedState.isDehydrated;if(de&&(Wo(F,C).flags|=256),C=rp(F,C,!1),C!==2){if(Kh&&!de){F.errorRecoveryDisabledLanes|=f,ho|=f,x=4;break e}f=Xr,Xr=x,f!==null&&(Xr===null?Xr=f:Xr.push.apply(Xr,f))}x=C}if(f=!1,x!==2)continue}}if(x===1){Wo(t,0),Dl(t,a,0,!0);break}e:{switch(o=t,f=x,f){case 0:case 1:throw Error(l(345));case 4:if((a&4194048)!==a)break;case 6:Dl(o,a,gn,!El);break e;case 2:Xr=null;break;case 3:case 5:break;default:throw Error(l(329))}if((a&62914560)===a&&(x=Uu+300-Vt(),10<x)){if(Dl(o,a,gn,!El),Gs(o,0,!0)!==0)break e;rl=a,o.timeoutHandle=nb(kg.bind(null,o,i,Xr,Bu,Xh,a,gn,ho,Qo,El,f,"Throttled",-0,0),x);break e}kg(o,i,Xr,Bu,Xh,a,gn,ho,Qo,El,f,null,-0,0)}}break}while(!0);Ti(t)}function kg(t,a,i,o,x,f,C,F,de,Ee,Ye,Xe,Oe,qe){if(t.timeoutHandle=-1,Xe=a.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ue},vg(a,f,Xe);var $t=(f&62914560)===f?Uu-Vt():(f&4194048)===f?Cg-Vt():0;if($t=V2(Xe,$t),$t!==null){rl=f,t.cancelPendingCommit=$t(Lg.bind(null,t,a,f,i,o,x,C,F,de,Ye,Xe,null,Oe,qe)),Dl(t,f,C,!Ee);return}}Lg(t,a,f,i,o,x,C,F,de)}function n2(t){for(var a=t;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var x=i[o],f=x.getSnapshot;x=x.value;try{if(!Sa(f(),x))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Dl(t,a,i,o){a&=~Jh,a&=~ho,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var x=a;0<x;){var f=31-rs(x),C=1<<f;o[f]=-1,x&=~C}i!==0&&Qn(t,i,a)}function Vu(){return(sa&6)===0?(od(0),!1):!0}function ap(){if($s!==null){if(ua===0)var t=$s.return;else t=$s,Tn=Ai=null,yh(t),vl=null,lo=0,t=$s;for(;t!==null;)ig(t.alternate,t),t=t.return;$s=null}}function Wo(t,a){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,C2(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),rl=0,ap(),ja=t,$s=i=Vr(t.current,null),Us=a,ua=0,fn=null,El=!1,Go=ha(t,a),Kh=!1,Qo=gn=Jh=ho=Tl=_a=0,Xr=id=null,Xh=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var x=31-rs(o),f=1<<x;a|=t[x],o&=~f}return al=a,Ro(),i}function Pg(t,a){js=null,B.H=Jc,a===jr||a===Pn?(a=ju(),ua=3):a===ar?(a=ju(),ua=4):ua=a===Mh?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,fn=a,$s===null&&(_a=1,Ou(t,qr(a,t.current)))}function Dg(){var t=pn.current;return t===null?!0:(Us&4194048)===Us?Rn===null:(Us&62914560)===Us||(Us&536870912)!==0?t===Rn:!1}function Og(){var t=B.H;return B.H=Jc,t===null?Jc:t}function Rg(){var t=B.A;return B.A=a2,t}function qu(){_a=4,El||(Us&4194048)!==Us&&pn.current!==null||(Go=!0),(Tl&134217727)===0&&(ho&134217727)===0||ja===null||Dl(ja,Us,gn,!1)}function rp(t,a,i){var o=sa;sa|=2;var x=Og(),f=Rg();(ja!==t||Us!==a)&&(Bu=null,Wo(t,a)),a=!1;var C=_a;e:do try{if(ua!==0&&$s!==null){var F=$s,de=fn;switch(ua){case 8:ap(),C=6;break e;case 3:case 2:case 9:case 6:pn.current===null&&(a=!0);var Ee=ua;if(ua=0,fn=null,Zo(t,F,de,Ee),i&&Go){C=0;break e}break;default:Ee=ua,ua=0,fn=null,Zo(t,F,de,Ee)}}i2(),C=_a;break}catch(Ye){Pg(t,Ye)}while(!0);return a&&t.shellSuspendCounter++,Tn=Ai=null,sa=o,B.H=x,B.A=f,$s===null&&(ja=null,Us=0,Ro()),C}function i2(){for(;$s!==null;)_g($s)}function l2(t,a){var i=sa;sa|=2;var o=Og(),x=Rg();ja!==t||Us!==a?(Bu=null,Iu=Vt()+500,Wo(t,a)):Go=ha(t,a);e:do try{if(ua!==0&&$s!==null){a=$s;var f=fn;t:switch(ua){case 1:ua=0,fn=null,Zo(t,a,f,1);break;case 2:case 9:if(yu(f)){ua=0,fn=null,Mg(a);break}a=function(){ua!==2&&ua!==9||ja!==t||(ua=7),Ti(t)},f.then(a,a);break e;case 3:ua=7;break e;case 4:ua=5;break e;case 7:yu(f)?(ua=0,fn=null,Mg(a)):(ua=0,fn=null,Zo(t,a,f,7));break;case 5:var C=null;switch($s.tag){case 26:C=$s.memoizedState;case 5:case 27:var F=$s;if(C?jb(C):F.stateNode.complete){ua=0,fn=null;var de=F.sibling;if(de!==null)$s=de;else{var Ee=F.return;Ee!==null?($s=Ee,Hu(Ee)):$s=null}break t}}ua=0,fn=null,Zo(t,a,f,5);break;case 6:ua=0,fn=null,Zo(t,a,f,6);break;case 8:ap(),_a=6;break e;default:throw Error(l(462))}}o2();break}catch(Ye){Pg(t,Ye)}while(!0);return Tn=Ai=null,B.H=o,B.A=x,sa=i,$s!==null?0:(ja=null,Us=0,Ro(),_a)}function o2(){for(;$s!==null&&!as();)_g($s)}function _g(t){var a=rg(t.alternate,t,al);t.memoizedProps=t.pendingProps,a===null?Hu(t):$s=a}function Mg(t){var a=t,i=a.alternate;switch(a.tag){case 15:case 0:a=J0(i,a,a.pendingProps,a.type,void 0,Us);break;case 11:a=J0(i,a,a.pendingProps,a.type.render,a.ref,Us);break;case 5:yh(a);default:ig(i,a),a=$s=fu(a,al),a=rg(i,a,al)}t.memoizedProps=t.pendingProps,a===null?Hu(t):$s=a}function Zo(t,a,i,o){Tn=Ai=null,yh(a),vl=null,lo=0;var x=a.return;try{if(Z1(t,x,a,i,Us)){_a=1,Ou(t,qr(i,t.current)),$s=null;return}}catch(f){if(x!==null)throw $s=x,f;_a=1,Ou(t,qr(i,t.current)),$s=null;return}a.flags&32768?(ks||o===1?t=!0:Go||(Us&536870912)!==0?t=!1:(El=t=!0,(o===2||o===9||o===3||o===6)&&(o=pn.current,o!==null&&o.tag===13&&(o.flags|=16384))),zg(a,t)):Hu(a)}function Hu(t){var a=t;do{if((a.flags&32768)!==0){zg(a,El);return}t=a.return;var i=X1(a.alternate,a,al);if(i!==null){$s=i;return}if(a=a.sibling,a!==null){$s=a;return}$s=a=t}while(a!==null);_a===0&&(_a=5)}function zg(t,a){do{var i=e2(t.alternate,t);if(i!==null){i.flags&=32767,$s=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(t=t.sibling,t!==null)){$s=t;return}$s=t=i}while(t!==null);_a=6,$s=null}function Lg(t,a,i,o,x,f,C,F,de){t.cancelPendingCommit=null;do Gu();while(rr!==0);if((sa&6)!==0)throw Error(l(327));if(a!==null){if(a===t.current)throw Error(l(177));if(f=a.lanes|a.childLanes,f|=Ir,Li(t,i,f,C,F,de),t===ja&&($s=ja=null,Us=0),Yo=a,Pl=t,rl=i,ep=f,tp=x,Ag=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,m2(ge,function(){return Bg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=B.T,B.T=null,x=ne.p,ne.p=2,C=sa,sa|=4;try{t2(t,a,i)}finally{sa=C,ne.p=x,B.T=o}}rr=1,$g(),Fg(),Ug()}}function $g(){if(rr===1){rr=0;var t=Pl,a=Yo,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=B.T,B.T=null;var o=ne.p;ne.p=2;var x=sa;sa|=4;try{bg(a,t);var f=fp,C=An(t.containerInfo),F=f.focusedElem,de=f.selectionRange;if(C!==F&&F&&F.ownerDocument&&mu(F.ownerDocument.documentElement,F)){if(de!==null&&ko(F)){var Ee=de.start,Ye=de.end;if(Ye===void 0&&(Ye=Ee),"selectionStart"in F)F.selectionStart=Ee,F.selectionEnd=Math.min(Ye,F.value.length);else{var Xe=F.ownerDocument||document,Oe=Xe&&Xe.defaultView||window;if(Oe.getSelection){var qe=Oe.getSelection(),$t=F.textContent.length,os=Math.min(de.start,$t),ga=de.end===void 0?os:Math.min(de.end,$t);!qe.extend&&os>ga&&(C=ga,ga=os,os=C);var je=Ur(F,os),pe=Ur(F,ga);if(je&&pe&&(qe.rangeCount!==1||qe.anchorNode!==je.node||qe.anchorOffset!==je.offset||qe.focusNode!==pe.node||qe.focusOffset!==pe.offset)){var Ae=Xe.createRange();Ae.setStart(je.node,je.offset),qe.removeAllRanges(),os>ga?(qe.addRange(Ae),qe.extend(pe.node,pe.offset)):(Ae.setEnd(pe.node,pe.offset),qe.addRange(Ae))}}}}for(Xe=[],qe=F;qe=qe.parentNode;)qe.nodeType===1&&Xe.push({element:qe,left:qe.scrollLeft,top:qe.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<Xe.length;F++){var Ke=Xe[F];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}rm=!!xp,fp=xp=null}finally{sa=x,ne.p=o,B.T=i}}t.current=a,rr=2}}function Fg(){if(rr===2){rr=0;var t=Pl,a=Yo,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=B.T,B.T=null;var o=ne.p;ne.p=2;var x=sa;sa|=4;try{hg(t,a.alternate,a)}finally{sa=x,ne.p=o,B.T=i}}rr=3}}function Ug(){if(rr===4||rr===3){rr=0,hs();var t=Pl,a=Yo,i=rl,o=Ag;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?rr=5:(rr=0,Yo=Pl=null,Ig(t,t.pendingLanes));var x=t.pendingLanes;if(x===0&&(kl=null),rt(i),a=a.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(at,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=B.T,x=ne.p,ne.p=2,B.T=null;try{for(var f=t.onRecoverableError,C=0;C<o.length;C++){var F=o[C];f(F.value,{componentStack:F.stack})}}finally{B.T=a,ne.p=x}}(rl&3)!==0&&Gu(),Ti(t),x=t.pendingLanes,(i&261930)!==0&&(x&42)!==0?t===sp?ld++:(ld=0,sp=t):ld=0,od(0)}}function Ig(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Qt(a)))}function Gu(){return $g(),Fg(),Ug(),Bg()}function Bg(){if(rr!==5)return!1;var t=Pl,a=ep;ep=0;var i=rt(rl),o=B.T,x=ne.p;try{ne.p=32>i?32:i,B.T=null,i=tp,tp=null;var f=Pl,C=rl;if(rr=0,Yo=Pl=null,rl=0,(sa&6)!==0)throw Error(l(331));var F=sa;if(sa|=4,wg(f.current),jg(f,f.current,C,i),sa=F,od(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(at,f)}catch{}return!0}finally{ne.p=x,B.T=o,Ig(t,a)}}function Vg(t,a,i){a=qr(i,a),a=_h(t.stateNode,a,2),t=wl(t,a,2),t!==null&&(ln(t,2),Ti(t))}function ma(t,a,i){if(t.tag===3)Vg(t,t,i);else for(;a!==null;){if(a.tag===3){Vg(a,t,i);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(kl===null||!kl.has(o))){t=qr(i,t),i=q0(2),o=wl(a,i,2),o!==null&&(H0(i,o,a,t),ln(o,2),Ti(o));break}}a=a.return}}function np(t,a,i){var o=t.pingCache;if(o===null){o=t.pingCache=new r2;var x=new Set;o.set(a,x)}else x=o.get(a),x===void 0&&(x=new Set,o.set(a,x));x.has(i)||(Kh=!0,x.add(i),t=c2.bind(null,t,a,i),a.then(t,t))}function c2(t,a,i){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,ja===t&&(Us&i)===i&&(_a===4||_a===3&&(Us&62914560)===Us&&300>Vt()-Uu?(sa&2)===0&&Wo(t,0):Jh|=i,Qo===Us&&(Qo=0)),Ti(t)}function qg(t,a){a===0&&(a=ir()),t=wi(t,a),t!==null&&(ln(t,a),Ti(t))}function d2(t){var a=t.memoizedState,i=0;a!==null&&(i=a.retryLane),qg(t,i)}function u2(t,a){var i=0;switch(t.tag){case 31:case 13:var o=t.stateNode,x=t.memoizedState;x!==null&&(i=x.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(a),qg(t,i)}function m2(t,a){return ds(t,a)}var Qu=null,Ko=null,ip=!1,Yu=!1,lp=!1,Ol=0;function Ti(t){t!==Ko&&t.next===null&&(Ko===null?Qu=Ko=t:Ko=Ko.next=t),Yu=!0,ip||(ip=!0,p2())}function od(t,a){if(!lp&&Yu){lp=!0;do for(var i=!1,o=Qu;o!==null;){if(t!==0){var x=o.pendingLanes;if(x===0)var f=0;else{var C=o.suspendedLanes,F=o.pingedLanes;f=(1<<31-rs(42|t)+1)-1,f&=x&~(C&~F),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Yg(o,f))}else f=Us,f=Gs(o,o===ja?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||ha(o,f)||(i=!0,Yg(o,f));o=o.next}while(i);lp=!1}}function h2(){Hg()}function Hg(){Yu=ip=!1;var t=0;Ol!==0&&S2()&&(t=Ol);for(var a=Vt(),i=null,o=Qu;o!==null;){var x=o.next,f=Gg(o,a);f===0?(o.next=null,i===null?Qu=x:i.next=x,x===null&&(Ko=i)):(i=o,(t!==0||(f&3)!==0)&&(Yu=!0)),o=x}rr!==0&&rr!==5||od(t),Ol!==0&&(Ol=0)}function Gg(t,a){for(var i=t.suspendedLanes,o=t.pingedLanes,x=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var C=31-rs(f),F=1<<C,de=x[C];de===-1?((F&i)===0||(F&o)!==0)&&(x[C]=$a(F,a)):de<=a&&(t.expiredLanes|=F),f&=~F}if(a=ja,i=Us,i=Gs(t,t===a?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,i===0||t===a&&(ua===2||ua===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&At(o),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||ha(t,i)){if(a=i&-i,a===t.callbackPriority)return a;switch(o!==null&&At(o),rt(i)){case 2:case 8:i=wa;break;case 32:i=ge;break;case 268435456:i=_t;break;default:i=ge}return o=Qg.bind(null,t),i=ds(i,o),t.callbackPriority=a,t.callbackNode=i,a}return o!==null&&o!==null&&At(o),t.callbackPriority=2,t.callbackNode=null,2}function Qg(t,a){if(rr!==0&&rr!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Gu()&&t.callbackNode!==i)return null;var o=Us;return o=Gs(t,t===ja?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Tg(t,o,a),Gg(t,Vt()),t.callbackNode!=null&&t.callbackNode===i?Qg.bind(null,t):null)}function Yg(t,a){if(Gu())return null;Tg(t,a,!0)}function p2(){A2(function(){(sa&6)!==0?ds(Ss,h2):Hg()})}function op(){if(Ol===0){var t=Tt;t===0&&(t=xt,xt<<=1,(xt&261888)===0&&(xt=256)),Ol=t}return Ol}function Wg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Le(""+t)}function Zg(t,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,t.id&&i.setAttribute("form",t.id),a.parentNode.insertBefore(i,a),t=new FormData(t),i.parentNode.removeChild(i),t}function x2(t,a,i,o,x){if(a==="submit"&&i&&i.stateNode===x){var f=Wg((x[kt]||null).action),C=o.submitter;C&&(a=(a=C[kt]||null)?Wg(a.formAction):C.getAttribute("formAction"),a!==null&&(f=a,C=null));var F=new ms("action","action",null,o,x);t.push({event:F,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ol!==0){var de=C?Zg(x,C):new FormData(x);Th(i,{pending:!0,data:de,method:x.method,action:f},null,de)}}else typeof f=="function"&&(F.preventDefault(),de=C?Zg(x,C):new FormData(x),Th(i,{pending:!0,data:de,method:x.method,action:f},f,de))},currentTarget:x}]})}}for(var cp=0;cp<$c.length;cp++){var dp=$c[cp],f2=dp.toLowerCase(),g2=dp[0].toUpperCase()+dp.slice(1);un(f2,"on"+g2)}un(fl,"onAnimationEnd"),un(Do,"onAnimationIteration"),un(hu,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(nh,"onTransitionRun"),un(Oo,"onTransitionStart"),un(ih,"onTransitionCancel"),un(pu,"onTransitionEnd"),lr("onMouseEnter",["mouseout","mouseover"]),lr("onMouseLeave",["mouseout","mouseover"]),lr("onPointerEnter",["pointerout","pointerover"]),lr("onPointerLeave",["pointerout","pointerover"]),ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cd));function Kg(t,a){a=(a&4)!==0;for(var i=0;i<t.length;i++){var o=t[i],x=o.event;o=o.listeners;e:{var f=void 0;if(a)for(var C=o.length-1;0<=C;C--){var F=o[C],de=F.instance,Ee=F.currentTarget;if(F=F.listener,de!==f&&x.isPropagationStopped())break e;f=F,x.currentTarget=Ee;try{f(x)}catch(Ye){Ni(Ye)}x.currentTarget=null,f=de}else for(C=0;C<o.length;C++){if(F=o[C],de=F.instance,Ee=F.currentTarget,F=F.listener,de!==f&&x.isPropagationStopped())break e;f=F,x.currentTarget=Ee;try{f(x)}catch(Ye){Ni(Ye)}x.currentTarget=null,f=de}}}}function Fs(t,a){var i=a[Ut];i===void 0&&(i=a[Ut]=new Set);var o=t+"__bubble";i.has(o)||(Jg(a,t,2,!1),i.add(o))}function up(t,a,i){var o=0;a&&(o|=4),Jg(i,t,o,a)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function mp(t){if(!t[Wu]){t[Wu]=!0,yr.forEach(function(i){i!=="selectionchange"&&(b2.has(i)||up(i,!1,t),up(i,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Wu]||(a[Wu]=!0,up("selectionchange",!1,a))}}function Jg(t,a,i,o){switch(Eb(a)){case 2:var x=G2;break;case 8:x=Q2;break;default:x=Ep}i=x.bind(null,a,i,t),x=void 0,!Ie||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),o?x!==void 0?t.addEventListener(a,i,{capture:!0,passive:x}):t.addEventListener(a,i,!0):x!==void 0?t.addEventListener(a,i,{passive:x}):t.addEventListener(a,i,!1)}function hp(t,a,i,o,x){var f=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var C=o.tag;if(C===3||C===4){var F=o.stateNode.containerInfo;if(F===x)break;if(C===4)for(C=o.return;C!==null;){var de=C.tag;if((de===3||de===4)&&C.stateNode.containerInfo===x)return;C=C.return}for(;F!==null;){if(C=ns(F),C===null)return;if(de=C.tag,de===5||de===6||de===26||de===27){o=f=C;continue e}F=F.parentNode}}o=o.return}is(function(){var Ee=f,Ye=vt(i),Xe=[];e:{var Oe=ao.get(t);if(Oe!==void 0){var qe=ms,$t=t;switch(t){case"keypress":if(Pe(i)===0)break e;case"keydown":case"keyup":qe=Ua;break;case"focusin":$t="focus",qe=Wn;break;case"focusout":$t="blur",qe=Wn;break;case"beforeblur":case"afterblur":qe=Wn;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=Ws;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=nu;break;case fl:case Do:case hu:qe=Kn;break;case pu:qe=iu;break;case"scroll":case"scrollend":qe=Wt;break;case"wheel":qe=Dc;break;case"copy":case"cut":case"paste":qe=Ec;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=Pc;break;case"toggle":case"beforetoggle":qe=Xn}var os=(a&4)!==0,ga=!os&&(t==="scroll"||t==="scrollend"),je=os?Oe!==null?Oe+"Capture":null:Oe;os=[];for(var pe=Ee,Ae;pe!==null;){var Ke=pe;if(Ae=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Ae===null||je===null||(Ke=qs(pe,je),Ke!=null&&os.push(dd(pe,Ke,Ae))),ga)break;pe=pe.return}0<os.length&&(Oe=new qe(Oe,$t,null,i,Ye),Xe.push({event:Oe,listeners:os}))}}if((a&7)===0){e:{if(Oe=t==="mouseover"||t==="pointerover",qe=t==="mouseout"||t==="pointerout",Oe&&i!==Re&&($t=i.relatedTarget||i.fromElement)&&(ns($t)||$t[Lt]))break e;if((qe||Oe)&&(Oe=Ye.window===Ye?Ye:(Oe=Ye.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,qe?($t=i.relatedTarget||i.toElement,qe=Ee,$t=$t?ns($t):null,$t!==null&&(ga=m($t),os=$t.tag,$t!==ga||os!==5&&os!==27&&os!==6)&&($t=null)):(qe=null,$t=Ee),qe!==$t)){if(os=dr,Ke="onMouseLeave",je="onMouseEnter",pe="mouse",(t==="pointerout"||t==="pointerover")&&(os=Pc,Ke="onPointerLeave",je="onPointerEnter",pe="pointer"),ga=qe==null?Oe:Es(qe),Ae=$t==null?Oe:Es($t),Oe=new os(Ke,pe+"leave",qe,i,Ye),Oe.target=ga,Oe.relatedTarget=Ae,Ke=null,ns(Ye)===Ee&&(os=new os(je,pe+"enter",$t,i,Ye),os.target=Ae,os.relatedTarget=ga,Ke=os),ga=Ke,qe&&$t)t:{for(os=y2,je=qe,pe=$t,Ae=0,Ke=je;Ke;Ke=os(Ke))Ae++;Ke=0;for(var Kt=pe;Kt;Kt=os(Kt))Ke++;for(;0<Ae-Ke;)je=os(je),Ae--;for(;0<Ke-Ae;)pe=os(pe),Ke--;for(;Ae--;){if(je===pe||pe!==null&&je===pe.alternate){os=je;break t}je=os(je),pe=os(pe)}os=null}else os=null;qe!==null&&Xg(Xe,Oe,qe,os,!1),$t!==null&&ga!==null&&Xg(Xe,ga,$t,os,!0)}}e:{if(Oe=Ee?Es(Ee):window,qe=Oe.nodeName&&Oe.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Oe.type==="file")var Js=hl;else if(cu(Oe))if(Mc)Js=Ii;else{Js=uu;var Ht=rh}else qe=Oe.nodeName,!qe||qe.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?Ee&&nt(Ee.elementType)&&(Js=hl):Js=Ot;if(Js&&(Js=Js(t,Ee))){du(Xe,Js,i,Ye);break e}Ht&&Ht(t,Oe,Ee),t==="focusout"&&Ee&&Oe.type==="number"&&Ee.memoizedProps.value!=null&&to(Oe,"number",Oe.value)}switch(Ht=Ee?Es(Ee):window,t){case"focusin":(cu(Ht)||Ht.contentEditable==="true")&&(Bi=Ht,so=Ee,dn=null);break;case"focusout":dn=so=Bi=null;break;case"mousedown":zc=!0;break;case"contextmenu":case"mouseup":case"dragend":zc=!1,Lc(Xe,i,Ye);break;case"selectionchange":if(xl)break;case"keydown":case"keyup":Lc(Xe,i,Ye)}var ws;if(gi)e:{switch(t){case"compositionstart":var Is="onCompositionStart";break e;case"compositionend":Is="onCompositionEnd";break e;case"compositionupdate":Is="onCompositionUpdate";break e}Is=void 0}else $i?Rc(t,i)&&(Is="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Is="onCompositionStart");Is&&(er&&i.locale!=="ko"&&($i||Is!=="onCompositionStart"?Is==="onCompositionEnd"&&$i&&(ws=We()):(et=Ye,it="value"in et?et.value:et.textContent,$i=!0)),Ht=Zu(Ee,Is),0<Ht.length&&(Is=new Jn(Is,t,null,i,Ye),Xe.push({event:Is,listeners:Ht}),ws?Is.data=ws:(ws=ti(i),ws!==null&&(Is.data=ws)))),(ws=lu?Ar(t,i):Fi(t,i))&&(Is=Zu(Ee,"onBeforeInput"),0<Is.length&&(Ht=new Jn("onBeforeInput","beforeinput",null,i,Ye),Xe.push({event:Ht,listeners:Is}),Ht.data=ws)),x2(Xe,t,Ee,i,Ye)}Kg(Xe,a)})}function dd(t,a,i){return{instance:t,listener:a,currentTarget:i}}function Zu(t,a){for(var i=a+"Capture",o=[];t!==null;){var x=t,f=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||f===null||(x=qs(t,i),x!=null&&o.unshift(dd(t,x,f)),x=qs(t,a),x!=null&&o.push(dd(t,x,f))),t.tag===3)return o;t=t.return}return[]}function y2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Xg(t,a,i,o,x){for(var f=a._reactName,C=[];i!==null&&i!==o;){var F=i,de=F.alternate,Ee=F.stateNode;if(F=F.tag,de!==null&&de===o)break;F!==5&&F!==26&&F!==27||Ee===null||(de=Ee,x?(Ee=qs(i,f),Ee!=null&&C.unshift(dd(i,Ee,de))):x||(Ee=qs(i,f),Ee!=null&&C.push(dd(i,Ee,de)))),i=i.return}C.length!==0&&t.push({event:a,listeners:C})}var j2=/\r\n?/g,v2=/\u0000|\uFFFD/g;function eb(t){return(typeof t=="string"?t:""+t).replace(j2,`
`).replace(v2,"")}function tb(t,a){return a=eb(a),eb(t)===a}function fa(t,a,i,o,x,f){switch(i){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||ze(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&ze(t,""+o);break;case"className":ca(t,"class",o);break;case"tabIndex":ca(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ca(t,i,o);break;case"style":Fe(t,o,f);break;case"data":if(a!=="object"){ca(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||i!=="href")){t.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=Le(""+o),t.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(a!=="input"&&fa(t,a,"name",x.name,x,null),fa(t,a,"formEncType",x.formEncType,x,null),fa(t,a,"formMethod",x.formMethod,x,null),fa(t,a,"formTarget",x.formTarget,x,null)):(fa(t,a,"encType",x.encType,x,null),fa(t,a,"method",x.method,x,null),fa(t,a,"target",x.target,x,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=Le(""+o),t.setAttribute(i,o);break;case"onClick":o!=null&&(t.onclick=Ue);break;case"onScroll":o!=null&&Fs("scroll",t);break;case"onScrollEnd":o!=null&&Fs("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(i=o.__html,i!=null){if(x.children!=null)throw Error(l(60));t.innerHTML=i}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}i=Le(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""+o):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":o===!0?t.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,o):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(i,o):t.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(i):t.setAttribute(i,o);break;case"popover":Fs("beforetoggle",t),Fs("toggle",t),Ga(t,"popover",o);break;case"xlinkActuate":vs(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":vs(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":vs(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":vs(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":vs(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":vs(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":vs(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":vs(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":vs(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ga(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=ke.get(i)||i,Ga(t,i,o))}}function pp(t,a,i,o,x,f){switch(i){case"style":Fe(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(i=o.__html,i!=null){if(x.children!=null)throw Error(l(60));t.innerHTML=i}}break;case"children":typeof o=="string"?ze(t,o):(typeof o=="number"||typeof o=="bigint")&&ze(t,""+o);break;case"onScroll":o!=null&&Fs("scroll",t);break;case"onScrollEnd":o!=null&&Fs("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ue);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sr.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(x=i.endsWith("Capture"),a=i.slice(2,x?i.length-7:void 0),f=t[kt]||null,f=f!=null?f[i]:null,typeof f=="function"&&t.removeEventListener(a,f,x),typeof o=="function")){typeof f!="function"&&f!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(a,o,x);break e}i in t?t[i]=o:o===!0?t.setAttribute(i,""):Ga(t,i,o)}}}function gr(t,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fs("error",t),Fs("load",t);var o=!1,x=!1,f;for(f in i)if(i.hasOwnProperty(f)){var C=i[f];if(C!=null)switch(f){case"src":o=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:fa(t,a,f,C,i,null)}}x&&fa(t,a,"srcSet",i.srcSet,i,null),o&&fa(t,a,"src",i.src,i,null);return;case"input":Fs("invalid",t);var F=f=C=x=null,de=null,Ee=null;for(o in i)if(i.hasOwnProperty(o)){var Ye=i[o];if(Ye!=null)switch(o){case"name":x=Ye;break;case"type":C=Ye;break;case"checked":de=Ye;break;case"defaultChecked":Ee=Ye;break;case"value":f=Ye;break;case"defaultValue":F=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(l(137,a));break;default:fa(t,a,o,Ye,i,null)}}cn(t,f,F,de,Ee,C,x,!1);return;case"select":Fs("invalid",t),o=C=f=null;for(x in i)if(i.hasOwnProperty(x)&&(F=i[x],F!=null))switch(x){case"value":f=F;break;case"defaultValue":C=F;break;case"multiple":o=F;default:fa(t,a,x,F,i,null)}a=f,i=C,t.multiple=!!o,a!=null?wn(t,!!o,a,!1):i!=null&&wn(t,!!o,i,!0);return;case"textarea":Fs("invalid",t),f=x=o=null;for(C in i)if(i.hasOwnProperty(C)&&(F=i[C],F!=null))switch(C){case"value":o=F;break;case"defaultValue":x=F;break;case"children":f=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(l(91));break;default:fa(t,a,C,F,i,null)}he(t,o,x,f);return;case"option":for(de in i)if(i.hasOwnProperty(de)&&(o=i[de],o!=null))switch(de){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:fa(t,a,de,o,i,null)}return;case"dialog":Fs("beforetoggle",t),Fs("toggle",t),Fs("cancel",t),Fs("close",t);break;case"iframe":case"object":Fs("load",t);break;case"video":case"audio":for(o=0;o<cd.length;o++)Fs(cd[o],t);break;case"image":Fs("error",t),Fs("load",t);break;case"details":Fs("toggle",t);break;case"embed":case"source":case"link":Fs("error",t),Fs("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in i)if(i.hasOwnProperty(Ee)&&(o=i[Ee],o!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:fa(t,a,Ee,o,i,null)}return;default:if(nt(a)){for(Ye in i)i.hasOwnProperty(Ye)&&(o=i[Ye],o!==void 0&&pp(t,a,Ye,o,i,void 0));return}}for(F in i)i.hasOwnProperty(F)&&(o=i[F],o!=null&&fa(t,a,F,o,i,null))}function N2(t,a,i,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,f=null,C=null,F=null,de=null,Ee=null,Ye=null;for(qe in i){var Xe=i[qe];if(i.hasOwnProperty(qe)&&Xe!=null)switch(qe){case"checked":break;case"value":break;case"defaultValue":de=Xe;default:o.hasOwnProperty(qe)||fa(t,a,qe,null,o,Xe)}}for(var Oe in o){var qe=o[Oe];if(Xe=i[Oe],o.hasOwnProperty(Oe)&&(qe!=null||Xe!=null))switch(Oe){case"type":f=qe;break;case"name":x=qe;break;case"checked":Ee=qe;break;case"defaultChecked":Ye=qe;break;case"value":C=qe;break;case"defaultValue":F=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(l(137,a));break;default:qe!==Xe&&fa(t,a,Oe,qe,o,Xe)}}zs(t,C,F,de,Ee,Ye,f,x);return;case"select":qe=C=F=Oe=null;for(f in i)if(de=i[f],i.hasOwnProperty(f)&&de!=null)switch(f){case"value":break;case"multiple":qe=de;default:o.hasOwnProperty(f)||fa(t,a,f,null,o,de)}for(x in o)if(f=o[x],de=i[x],o.hasOwnProperty(x)&&(f!=null||de!=null))switch(x){case"value":Oe=f;break;case"defaultValue":F=f;break;case"multiple":C=f;default:f!==de&&fa(t,a,x,f,o,de)}a=F,i=C,o=qe,Oe!=null?wn(t,!!i,Oe,!1):!!o!=!!i&&(a!=null?wn(t,!!i,a,!0):wn(t,!!i,i?[]:"",!1));return;case"textarea":qe=Oe=null;for(F in i)if(x=i[F],i.hasOwnProperty(F)&&x!=null&&!o.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:fa(t,a,F,null,o,x)}for(C in o)if(x=o[C],f=i[C],o.hasOwnProperty(C)&&(x!=null||f!=null))switch(C){case"value":Oe=x;break;case"defaultValue":qe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(l(91));break;default:x!==f&&fa(t,a,C,x,o,f)}Sn(t,Oe,qe);return;case"option":for(var $t in i)if(Oe=i[$t],i.hasOwnProperty($t)&&Oe!=null&&!o.hasOwnProperty($t))switch($t){case"selected":t.selected=!1;break;default:fa(t,a,$t,null,o,Oe)}for(de in o)if(Oe=o[de],qe=i[de],o.hasOwnProperty(de)&&Oe!==qe&&(Oe!=null||qe!=null))switch(de){case"selected":t.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:fa(t,a,de,Oe,o,qe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var os in i)Oe=i[os],i.hasOwnProperty(os)&&Oe!=null&&!o.hasOwnProperty(os)&&fa(t,a,os,null,o,Oe);for(Ee in o)if(Oe=o[Ee],qe=i[Ee],o.hasOwnProperty(Ee)&&Oe!==qe&&(Oe!=null||qe!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(l(137,a));break;default:fa(t,a,Ee,Oe,o,qe)}return;default:if(nt(a)){for(var ga in i)Oe=i[ga],i.hasOwnProperty(ga)&&Oe!==void 0&&!o.hasOwnProperty(ga)&&pp(t,a,ga,void 0,o,Oe);for(Ye in o)Oe=o[Ye],qe=i[Ye],!o.hasOwnProperty(Ye)||Oe===qe||Oe===void 0&&qe===void 0||pp(t,a,Ye,Oe,o,qe);return}}for(var je in i)Oe=i[je],i.hasOwnProperty(je)&&Oe!=null&&!o.hasOwnProperty(je)&&fa(t,a,je,null,o,Oe);for(Xe in o)Oe=o[Xe],qe=i[Xe],!o.hasOwnProperty(Xe)||Oe===qe||Oe==null&&qe==null||fa(t,a,Xe,Oe,o,qe)}function sb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function w2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var x=i[o],f=x.transferSize,C=x.initiatorType,F=x.duration;if(f&&F&&sb(C)){for(C=0,F=x.responseEnd,o+=1;o<i.length;o++){var de=i[o],Ee=de.startTime;if(Ee>F)break;var Ye=de.transferSize,Xe=de.initiatorType;Ye&&sb(Xe)&&(de=de.responseEnd,C+=Ye*(de<F?1:(F-Ee)/(de-Ee)))}if(--o,a+=8*(f+C)/(x.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var xp=null,fp=null;function Ku(t){return t.nodeType===9?t:t.ownerDocument}function ab(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rb(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function gp(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var bp=null;function S2(){var t=window.event;return t&&t.type==="popstate"?t===bp?!1:(bp=t,!0):(bp=null,!1)}var nb=typeof setTimeout=="function"?setTimeout:void 0,C2=typeof clearTimeout=="function"?clearTimeout:void 0,ib=typeof Promise=="function"?Promise:void 0,A2=typeof queueMicrotask=="function"?queueMicrotask:typeof ib<"u"?function(t){return ib.resolve(null).then(t).catch(E2)}:nb;function E2(t){setTimeout(function(){throw t})}function Rl(t){return t==="head"}function lb(t,a){var i=a,o=0;do{var x=i.nextSibling;if(t.removeChild(i),x&&x.nodeType===8)if(i=x.data,i==="/$"||i==="/&"){if(o===0){t.removeChild(x),tc(a);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")ud(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,ud(i);for(var f=i.firstChild;f;){var C=f.nextSibling,F=f.nodeName;f[gs]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=C}}else i==="body"&&ud(t.ownerDocument.body);i=x}while(i);tc(a)}function ob(t,a){var i=t;t=0;do{var o=i.nextSibling;if(i.nodeType===1?a?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(a?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=o}while(i)}function yp(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":yp(i),la(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function T2(t,a,i,o){for(;t.nodeType===1;){var x=i;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[gs])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==x.rel||t.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||t.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||t.getAttribute("title")!==(x.title==null?null:x.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(x.src==null?null:x.src)||t.getAttribute("type")!==(x.type==null?null:x.type)||t.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var f=x.name==null?null:""+x.name;if(x.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=_n(t.nextSibling),t===null)break}return null}function k2(t,a,i){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=_n(t.nextSibling),t===null))return null;return t}function cb(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=_n(t.nextSibling),t===null))return null;return t}function jp(t){return t.data==="$?"||t.data==="$~"}function vp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function P2(t,a){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||i.readyState!=="loading")a();else{var o=function(){a(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function _n(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Np=null;function db(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(a===0)return _n(t.nextSibling);a--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||a++}t=t.nextSibling}return null}function ub(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(a===0)return t;a--}else i!=="/$"&&i!=="/&"||a++}t=t.previousSibling}return null}function mb(t,a,i){switch(a=Ku(i),t){case"html":if(t=a.documentElement,!t)throw Error(l(452));return t;case"head":if(t=a.head,!t)throw Error(l(453));return t;case"body":if(t=a.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function ud(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);la(t)}var Mn=new Map,hb=new Set;function Ju(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var nl=ne.d;ne.d={f:D2,r:O2,D:R2,C:_2,L:M2,m:z2,X:$2,S:L2,M:F2};function D2(){var t=nl.f(),a=Vu();return t||a}function O2(t){var a=Rs(t);a!==null&&a.tag===5&&a.type==="form"?P0(a):nl.r(t)}var Jo=typeof document>"u"?null:document;function pb(t,a,i){var o=Jo;if(o&&typeof a=="string"&&a){var x=da(a);x='link[rel="'+t+'"][href="'+x+'"]',typeof i=="string"&&(x+='[crossorigin="'+i+'"]'),hb.has(x)||(hb.add(x),t={rel:t,crossOrigin:i,href:a},o.querySelector(x)===null&&(a=o.createElement("link"),gr(a,"link",t),oa(a),o.head.appendChild(a)))}}function R2(t){nl.D(t),pb("dns-prefetch",t,null)}function _2(t,a){nl.C(t,a),pb("preconnect",t,a)}function M2(t,a,i){nl.L(t,a,i);var o=Jo;if(o&&t&&a){var x='link[rel="preload"][as="'+da(a)+'"]';a==="image"&&i&&i.imageSrcSet?(x+='[imagesrcset="'+da(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(x+='[imagesizes="'+da(i.imageSizes)+'"]')):x+='[href="'+da(t)+'"]';var f=x;switch(a){case"style":f=Xo(t);break;case"script":f=ec(t)}Mn.has(f)||(t=v({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:t,as:a},i),Mn.set(f,t),o.querySelector(x)!==null||a==="style"&&o.querySelector(md(f))||a==="script"&&o.querySelector(hd(f))||(a=o.createElement("link"),gr(a,"link",t),oa(a),o.head.appendChild(a)))}}function z2(t,a){nl.m(t,a);var i=Jo;if(i&&t){var o=a&&typeof a.as=="string"?a.as:"script",x='link[rel="modulepreload"][as="'+da(o)+'"][href="'+da(t)+'"]',f=x;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ec(t)}if(!Mn.has(f)&&(t=v({rel:"modulepreload",href:t},a),Mn.set(f,t),i.querySelector(x)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(hd(f)))return}o=i.createElement("link"),gr(o,"link",t),oa(o),i.head.appendChild(o)}}}function L2(t,a,i){nl.S(t,a,i);var o=Jo;if(o&&t){var x=hr(o).hoistableStyles,f=Xo(t);a=a||"default";var C=x.get(f);if(!C){var F={loading:0,preload:null};if(C=o.querySelector(md(f)))F.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":a},i),(i=Mn.get(f))&&wp(t,i);var de=C=o.createElement("link");oa(de),gr(de,"link",t),de._p=new Promise(function(Ee,Ye){de.onload=Ee,de.onerror=Ye}),de.addEventListener("load",function(){F.loading|=1}),de.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Xu(C,a,o)}C={type:"stylesheet",instance:C,count:1,state:F},x.set(f,C)}}}function $2(t,a){nl.X(t,a);var i=Jo;if(i&&t){var o=hr(i).hoistableScripts,x=ec(t),f=o.get(x);f||(f=i.querySelector(hd(x)),f||(t=v({src:t,async:!0},a),(a=Mn.get(x))&&Sp(t,a),f=i.createElement("script"),oa(f),gr(f,"link",t),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(x,f))}}function F2(t,a){nl.M(t,a);var i=Jo;if(i&&t){var o=hr(i).hoistableScripts,x=ec(t),f=o.get(x);f||(f=i.querySelector(hd(x)),f||(t=v({src:t,async:!0,type:"module"},a),(a=Mn.get(x))&&Sp(t,a),f=i.createElement("script"),oa(f),gr(f,"link",t),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(x,f))}}function xb(t,a,i,o){var x=(x=I.current)?Ju(x):null;if(!x)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=Xo(i.href),i=hr(x).hoistableStyles,o=i.get(a),o||(o={type:"style",instance:null,count:0,state:null},i.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Xo(i.href);var f=hr(x).hoistableStyles,C=f.get(t);if(C||(x=x.ownerDocument||x,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,C),(f=x.querySelector(md(t)))&&!f._p&&(C.instance=f,C.state.loading=5),Mn.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Mn.set(t,i),f||U2(x,t,i,C.state))),a&&o===null)throw Error(l(528,""));return C}if(a&&o!==null)throw Error(l(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ec(i),i=hr(x).hoistableScripts,o=i.get(a),o||(o={type:"script",instance:null,count:0,state:null},i.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function Xo(t){return'href="'+da(t)+'"'}function md(t){return'link[rel="stylesheet"]['+t+"]"}function fb(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function U2(t,a,i,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),gr(a,"link",i),oa(a),t.head.appendChild(a))}function ec(t){return'[src="'+da(t)+'"]'}function hd(t){return"script[async]"+t}function gb(t,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+da(i.href)+'"]');if(o)return a.instance=o,oa(o),o;var x=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),oa(o),gr(o,"style",x),Xu(o,i.precedence,t),a.instance=o;case"stylesheet":x=Xo(i.href);var f=t.querySelector(md(x));if(f)return a.state.loading|=4,a.instance=f,oa(f),f;o=fb(i),(x=Mn.get(x))&&wp(o,x),f=(t.ownerDocument||t).createElement("link"),oa(f);var C=f;return C._p=new Promise(function(F,de){C.onload=F,C.onerror=de}),gr(f,"link",o),a.state.loading|=4,Xu(f,i.precedence,t),a.instance=f;case"script":return f=ec(i.src),(x=t.querySelector(hd(f)))?(a.instance=x,oa(x),x):(o=i,(x=Mn.get(f))&&(o=v({},i),Sp(o,x)),t=t.ownerDocument||t,x=t.createElement("script"),oa(x),gr(x,"link",o),t.head.appendChild(x),a.instance=x);case"void":return null;default:throw Error(l(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,Xu(o,i.precedence,t));return a.instance}function Xu(t,a,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=o.length?o[o.length-1]:null,f=x,C=0;C<o.length;C++){var F=o[C];if(F.dataset.precedence===a)f=F;else if(f!==x)break}f?f.parentNode.insertBefore(t,f.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(t,a.firstChild))}function wp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Sp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var em=null;function bb(t,a,i){if(em===null){var o=new Map,x=em=new Map;x.set(i,o)}else x=em,o=x.get(i),o||(o=new Map,x.set(i,o));if(o.has(t))return o;for(o.set(t,null),i=i.getElementsByTagName(t),x=0;x<i.length;x++){var f=i[x];if(!(f[gs]||f[ft]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var C=f.getAttribute(a)||"";C=t+C;var F=o.get(C);F?F.push(f):o.set(C,[f])}}return o}function yb(t,a,i){t=t.ownerDocument||t,t.head.insertBefore(i,a==="title"?t.querySelector("head > title"):null)}function I2(t,a,i){if(i===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function jb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function B2(t,a,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var x=Xo(o.href),f=a.querySelector(md(x));if(f){a=f._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=tm.bind(t),a.then(t,t)),i.state.loading|=4,i.instance=f,oa(f);return}f=a.ownerDocument||a,o=fb(o),(x=Mn.get(x))&&wp(o,x),f=f.createElement("link"),oa(f);var C=f;C._p=new Promise(function(F,de){C.onload=F,C.onerror=de}),gr(f,"link",o),i.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=tm.bind(t),a.addEventListener("load",i),a.addEventListener("error",i))}}var Cp=0;function V2(t,a){return t.stylesheets&&t.count===0&&am(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var o=setTimeout(function(){if(t.stylesheets&&am(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+a);0<t.imgBytes&&Cp===0&&(Cp=62500*w2());var x=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&am(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>Cp?50:800)+a);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(x)}}:null}function tm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)am(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var sm=null;function am(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,sm=new Map,a.forEach(q2,t),sm=null,tm.call(t))}function q2(t,a){if(!(a.state.loading&4)){var i=sm.get(t);if(i)var o=i.get(null);else{i=new Map,sm.set(t,i);for(var x=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<x.length;f++){var C=x[f];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(i.set(C.dataset.precedence,C),o=C)}o&&i.set(null,o)}x=a.instance,C=x.getAttribute("data-precedence"),f=i.get(C)||o,f===o&&i.set(null,x),i.set(C,x),this.count++,o=tm.bind(this),x.addEventListener("load",o),x.addEventListener("error",o),f?f.parentNode.insertBefore(x,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(x,t.firstChild)),a.state.loading|=4}}var pd={$$typeof:R,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function H2(t,a,i,o,x,f,C,F,de){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mr(0),this.hiddenUpdates=mr(null),this.identifierPrefix=o,this.onUncaughtError=x,this.onCaughtError=f,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function vb(t,a,i,o,x,f,C,F,de,Ee,Ye,Xe){return t=new H2(t,a,i,C,de,Ee,Ye,Xe,F),a=1,f===!0&&(a|=24),f=kr(3,null,null,a),t.current=f,f.stateNode=t,a=Et(),a.refCount++,t.pooledCache=a,a.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:a},oh(f),t}function Nb(t){return t?(t=Br,t):Br}function wb(t,a,i,o,x,f){x=Nb(x),o.context===null?o.context=x:o.pendingContext=x,o=Nl(a),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=wl(t,o,a),i!==null&&(en(i,t,a),Gc(i,t,a))}function Sb(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<a?i:a}}function Ap(t,a){Sb(t,a),(t=t.alternate)&&Sb(t,a)}function Cb(t){if(t.tag===13||t.tag===31){var a=wi(t,67108864);a!==null&&en(a,t,67108864),Ap(t,67108864)}}function Ab(t){if(t.tag===13||t.tag===31){var a=bn();a=Te(a);var i=wi(t,a);i!==null&&en(i,t,a),Ap(t,a)}}var rm=!0;function G2(t,a,i,o){var x=B.T;B.T=null;var f=ne.p;try{ne.p=2,Ep(t,a,i,o)}finally{ne.p=f,B.T=x}}function Q2(t,a,i,o){var x=B.T;B.T=null;var f=ne.p;try{ne.p=8,Ep(t,a,i,o)}finally{ne.p=f,B.T=x}}function Ep(t,a,i,o){if(rm){var x=Tp(o);if(x===null)hp(t,a,o,nm,i),Tb(t,o);else if(W2(x,t,a,i,o))o.stopPropagation();else if(Tb(t,o),a&4&&-1<Y2.indexOf(t)){for(;x!==null;){var f=Rs(x);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var C=Ks(f.pendingLanes);if(C!==0){var F=f;for(F.pendingLanes|=2,F.entangledLanes|=2;C;){var de=1<<31-rs(C);F.entanglements[1]|=de,C&=~de}Ti(f),(sa&6)===0&&(Iu=Vt()+500,od(0))}}break;case 31:case 13:F=wi(f,2),F!==null&&en(F,f,2),Vu(),Ap(f,2)}if(f=Tp(o),f===null&&hp(t,a,o,nm,i),f===x)break;x=f}x!==null&&o.stopPropagation()}else hp(t,a,o,null,i)}}function Tp(t){return t=vt(t),kp(t)}var nm=null;function kp(t){if(nm=null,t=ns(t),t!==null){var a=m(t);if(a===null)t=null;else{var i=a.tag;if(i===13){if(t=u(a),t!==null)return t;t=null}else if(i===31){if(t=p(a),t!==null)return t;t=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return nm=t,null}function Eb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bs()){case Ss:return 2;case wa:return 8;case ge:case yt:return 32;case _t:return 268435456;default:return 32}default:return 32}}var Pp=!1,_l=null,Ml=null,zl=null,xd=new Map,fd=new Map,Ll=[],Y2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tb(t,a){switch(t){case"focusin":case"focusout":_l=null;break;case"dragenter":case"dragleave":Ml=null;break;case"mouseover":case"mouseout":zl=null;break;case"pointerover":case"pointerout":xd.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":fd.delete(a.pointerId)}}function gd(t,a,i,o,x,f){return t===null||t.nativeEvent!==f?(t={blockedOn:a,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[x]},a!==null&&(a=Rs(a),a!==null&&Cb(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),t)}function W2(t,a,i,o,x){switch(a){case"focusin":return _l=gd(_l,t,a,i,o,x),!0;case"dragenter":return Ml=gd(Ml,t,a,i,o,x),!0;case"mouseover":return zl=gd(zl,t,a,i,o,x),!0;case"pointerover":var f=x.pointerId;return xd.set(f,gd(xd.get(f)||null,t,a,i,o,x)),!0;case"gotpointercapture":return f=x.pointerId,fd.set(f,gd(fd.get(f)||null,t,a,i,o,x)),!0}return!1}function kb(t){var a=ns(t.target);if(a!==null){var i=m(a);if(i!==null){if(a=i.tag,a===13){if(a=u(i),a!==null){t.blockedOn=a,zt(t.priority,function(){Ab(i)});return}}else if(a===31){if(a=p(i),a!==null){t.blockedOn=a,zt(t.priority,function(){Ab(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function im(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var i=Tp(t.nativeEvent);if(i===null){i=t.nativeEvent;var o=new i.constructor(i.type,i);Re=o,i.target.dispatchEvent(o),Re=null}else return a=Rs(i),a!==null&&Cb(a),t.blockedOn=i,!1;a.shift()}return!0}function Pb(t,a,i){im(t)&&i.delete(a)}function Z2(){Pp=!1,_l!==null&&im(_l)&&(_l=null),Ml!==null&&im(Ml)&&(Ml=null),zl!==null&&im(zl)&&(zl=null),xd.forEach(Pb),fd.forEach(Pb)}function lm(t,a){t.blockedOn===a&&(t.blockedOn=null,Pp||(Pp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Z2)))}var om=null;function Db(t){om!==t&&(om=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){om===t&&(om=null);for(var a=0;a<t.length;a+=3){var i=t[a],o=t[a+1],x=t[a+2];if(typeof o!="function"){if(kp(o||i)===null)continue;break}var f=Rs(i);f!==null&&(t.splice(a,3),a-=3,Th(f,{pending:!0,data:x,method:i.method,action:o},o,x))}}))}function tc(t){function a(de){return lm(de,t)}_l!==null&&lm(_l,t),Ml!==null&&lm(Ml,t),zl!==null&&lm(zl,t),xd.forEach(a),fd.forEach(a);for(var i=0;i<Ll.length;i++){var o=Ll[i];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Ll.length&&(i=Ll[0],i.blockedOn===null);)kb(i),i.blockedOn===null&&Ll.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var x=i[o],f=i[o+1],C=x[kt]||null;if(typeof f=="function")C||Db(i);else if(C){var F=null;if(f&&f.hasAttribute("formAction")){if(x=f,C=f[kt]||null)F=C.formAction;else if(kp(x)!==null)continue}else F=C.action;typeof F=="function"?i[o+1]=F:(i.splice(o,3),o-=3),Db(i)}}}function Ob(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(C){return x=C})},focusReset:"manual",scroll:"manual"})}function a(){x!==null&&(x(),x=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,x=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),x!==null&&(x(),x=null)}}}function Dp(t){this._internalRoot=t}cm.prototype.render=Dp.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(l(409));var i=a.current,o=bn();wb(i,o,t,a,null,null)},cm.prototype.unmount=Dp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;wb(t.current,2,null,t,null,null),Vu(),a[Lt]=null}};function cm(t){this._internalRoot=t}cm.prototype.unstable_scheduleHydration=function(t){if(t){var a=lt();t={blockedOn:null,target:t,priority:a};for(var i=0;i<Ll.length&&a!==0&&a<Ll[i].priority;i++);Ll.splice(i,0,t),i===0&&kb(t)}};var Rb=r.version;if(Rb!=="19.2.3")throw Error(l(527,Rb,"19.2.3"));ne.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=h(a),t=t!==null?j(t):null,t=t===null?null:t.stateNode,t};var K2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dm.isDisabled&&dm.supportsFiber)try{at=dm.inject(K2),Yt=dm}catch{}}return yd.createRoot=function(t,a){if(!d(t))throw Error(l(299));var i=!1,o="",x=U0,f=I0,C=B0;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(x=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError)),a=vb(t,1,!1,null,null,i,o,null,x,f,C,Ob),t[Lt]=a.current,mp(t),new Dp(a)},yd.hydrateRoot=function(t,a,i){if(!d(t))throw Error(l(299));var o=!1,x="",f=U0,C=I0,F=B0,de=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(x=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(C=i.onCaughtError),i.onRecoverableError!==void 0&&(F=i.onRecoverableError),i.formState!==void 0&&(de=i.formState)),a=vb(t,1,!0,a,i??null,o,x,de,f,C,F,Ob),a.context=Nb(null),i=a.current,o=bn(),o=Te(o),x=Nl(o),x.callback=null,wl(i,x,o),i=o,a.current.lanes=i,ln(a,i),Ti(a),t[Lt]=a.current,mp(t),new cm(a)},yd.version="19.2.3",yd}var Vb;function ow(){if(Vb)return Rp.exports;Vb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Rp.exports=lw(),Rp.exports}var qb=ow(),y=Kx();const qa=ew(y),cw=X2({__proto__:null,default:qa},[y]);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cv=s=>{throw TypeError(s)},dw=(s,r,n)=>r.has(s)||cv("Cannot "+n),$p=(s,r,n)=>(dw(s,r,"read from private field"),n?n.call(s):r.get(s)),uw=(s,r,n)=>r.has(s)?cv("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,n),Hb="popstate";function mw(s={}){function r(l,d){let{pathname:m,search:u,hash:p}=l.location;return Md("",{pathname:m,search:u,hash:p},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function n(l,d){return typeof d=="string"?d:Mi(d)}return pw(r,n,null,s)}function _s(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function La(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function hw(){return Math.random().toString(36).substring(2,10)}function Gb(s,r){return{usr:s.state,key:s.key,idx:r}}function Md(s,r,n=null,l){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof r=="string"?Jl(r):r,state:n,key:r&&r.key||l||hw()}}function Mi({pathname:s="/",search:r="",hash:n=""}){return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Jl(s){let r={};if(s){let n=s.indexOf("#");n>=0&&(r.hash=s.substring(n),s=s.substring(0,n));let l=s.indexOf("?");l>=0&&(r.search=s.substring(l),s=s.substring(0,l)),s&&(r.pathname=s)}return r}function pw(s,r,n,l={}){let{window:d=document.defaultView,v5Compat:m=!1}=l,u=d.history,p="POP",g=null,h=j();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function j(){return(u.state||{idx:null}).idx}function v(){p="POP";let q=j(),V=q==null?null:q-h;h=q,g&&g({action:p,location:P.location,delta:V})}function w(q,V){p="PUSH";let M=Md(P.location,q,V);h=j()+1;let R=Gb(M,h),ae=P.createHref(M);try{u.pushState(R,"",ae)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;d.location.assign(ae)}m&&g&&g({action:p,location:P.location,delta:1})}function E(q,V){p="REPLACE";let M=Md(P.location,q,V);h=j();let R=Gb(M,h),ae=P.createHref(M);u.replaceState(R,"",ae),m&&g&&g({action:p,location:P.location,delta:0})}function A(q){return dv(q)}let P={get action(){return p},get location(){return s(d,u)},listen(q){if(g)throw new Error("A history only accepts one active listener");return d.addEventListener(Hb,v),g=q,()=>{d.removeEventListener(Hb,v),g=null}},createHref(q){return r(d,q)},createURL:A,encodeLocation(q){let V=A(q);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:w,replace:E,go(q){return u.go(q)}};return P}function dv(s,r=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_s(n,"No window.location.(origin|href) available to create URL");let l=typeof s=="string"?s:Mi(s);return l=l.replace(/ $/,"%20"),!r&&l.startsWith("//")&&(l=n+l),new URL(l,n)}var Cd,Qb=class{constructor(s){if(uw(this,Cd,new Map),s)for(let[r,n]of s)this.set(r,n)}get(s){if($p(this,Cd).has(s))return $p(this,Cd).get(s);if(s.defaultValue!==void 0)return s.defaultValue;throw new Error("No value found for context")}set(s,r){$p(this,Cd).set(s,r)}};Cd=new WeakMap;var xw=new Set(["lazy","caseSensitive","path","id","index","children"]);function fw(s){return xw.has(s)}var gw=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function bw(s){return gw.has(s)}function yw(s){return s.index===!0}function zd(s,r,n=[],l={},d=!1){return s.map((m,u)=>{let p=[...n,String(u)],g=typeof m.id=="string"?m.id:p.join("-");if(_s(m.index!==!0||!m.children,"Cannot specify children on an index route"),_s(d||!l[g],`Found a route id collision on id "${g}".  Route id's must be globally unique within Data Router usages`),yw(m)){let h={...m,id:g};return l[g]=Yb(h,r(h)),h}else{let h={...m,id:g,children:void 0};return l[g]=Yb(h,r(h)),m.children&&(h.children=zd(m.children,r,p,l,d)),h}})}function Yb(s,r){return Object.assign(s,{...r,...typeof r.lazy=="object"&&r.lazy!=null?{lazy:{...s.lazy,...r.lazy}}:{}})}function Vl(s,r,n="/"){return Ad(s,r,n,!1)}function Ad(s,r,n,l){let d=typeof r=="string"?Jl(r):r,m=Hn(d.pathname||"/",n);if(m==null)return null;let u=uv(s);vw(u);let p=null;for(let g=0;p==null&&g<u.length;++g){let h=Ow(m);p=Pw(u[g],h,l)}return p}function jw(s,r){let{route:n,pathname:l,params:d}=s;return{id:n.id,pathname:l,params:d,data:r[n.id],loaderData:r[n.id],handle:n.handle}}function uv(s,r=[],n=[],l="",d=!1){let m=(u,p,g=d,h)=>{let j={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(l)&&g)return;_s(j.relativePath.startsWith(l),`Absolute route path "${j.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(l.length)}let v=Oi([l,j.relativePath]),w=n.concat(j);u.children&&u.children.length>0&&(_s(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),uv(u.children,r,w,v,g)),!(u.path==null&&!u.index)&&r.push({path:v,score:Tw(v,u.index),routesMeta:w})};return s.forEach((u,p)=>{var g;if(u.path===""||!((g=u.path)!=null&&g.includes("?")))m(u,p);else for(let h of mv(u.path))m(u,p,!0,h)}),r}function mv(s){let r=s.split("/");if(r.length===0)return[];let[n,...l]=r,d=n.endsWith("?"),m=n.replace(/\?$/,"");if(l.length===0)return d?[m,""]:[m];let u=mv(l.join("/")),p=[];return p.push(...u.map(g=>g===""?m:[m,g].join("/"))),d&&p.push(...u),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function vw(s){s.sort((r,n)=>r.score!==n.score?n.score-r.score:kw(r.routesMeta.map(l=>l.childrenIndex),n.routesMeta.map(l=>l.childrenIndex)))}var Nw=/^:[\w-]+$/,ww=3,Sw=2,Cw=1,Aw=10,Ew=-2,Wb=s=>s==="*";function Tw(s,r){let n=s.split("/"),l=n.length;return n.some(Wb)&&(l+=Ew),r&&(l+=Sw),n.filter(d=>!Wb(d)).reduce((d,m)=>d+(Nw.test(m)?ww:m===""?Cw:Aw),l)}function kw(s,r){return s.length===r.length&&s.slice(0,-1).every((l,d)=>l===r[d])?s[s.length-1]-r[r.length-1]:0}function Pw(s,r,n=!1){let{routesMeta:l}=s,d={},m="/",u=[];for(let p=0;p<l.length;++p){let g=l[p],h=p===l.length-1,j=m==="/"?r:r.slice(m.length)||"/",v=Rm({path:g.relativePath,caseSensitive:g.caseSensitive,end:h},j),w=g.route;if(!v&&h&&n&&!l[l.length-1].route.index&&(v=Rm({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},j)),!v)return null;Object.assign(d,v.params),u.push({params:d,pathname:Oi([m,v.pathname]),pathnameBase:zw(Oi([m,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(m=Oi([m,v.pathnameBase]))}return u}function Rm(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,l]=Dw(s.path,s.caseSensitive,s.end),d=r.match(n);if(!d)return null;let m=d[0],u=m.replace(/(.)\/+$/,"$1"),p=d.slice(1);return{params:l.reduce((h,{paramName:j,isOptional:v},w)=>{if(j==="*"){let A=p[w]||"";u=m.slice(0,m.length-A.length).replace(/(.)\/+$/,"$1")}const E=p[w];return v&&!E?h[j]=void 0:h[j]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:m,pathnameBase:u,pattern:s}}function Dw(s,r=!1,n=!0){La(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let l=[],d="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,g)=>(l.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(l.push({paramName:"*"}),d+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?d+="\\/*$":s!==""&&s!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,r?void 0:"i"),l]}function Ow(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return La(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),s}}function Hn(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,l=s.charAt(n);return l&&l!=="/"?null:s.slice(n)||"/"}function Rw({basename:s,pathname:r}){return r==="/"?s:Oi([s,r])}var _w=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qm=s=>_w.test(s);function Mw(s,r="/"){let{pathname:n,search:l="",hash:d=""}=typeof s=="string"?Jl(s):s,m;if(n)if(qm(n))m=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),La(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?m=Zb(n.substring(1),"/"):m=Zb(n,r)}else m=r;return{pathname:m,search:Lw(l),hash:$w(d)}}function Zb(s,r){let n=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(d=>{d===".."?n.length>1&&n.pop():d!=="."&&n.push(d)}),n.length>1?n.join("/"):"/"}function Fp(s,r,n,l){return`Cannot include a '${s}' character in a manually specified \`to.${r}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hv(s){return s.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Jx(s){let r=hv(s);return r.map((n,l)=>l===r.length-1?n.pathname:n.pathnameBase)}function Xx(s,r,n,l=!1){let d;typeof s=="string"?d=Jl(s):(d={...s},_s(!d.pathname||!d.pathname.includes("?"),Fp("?","pathname","search",d)),_s(!d.pathname||!d.pathname.includes("#"),Fp("#","pathname","hash",d)),_s(!d.search||!d.search.includes("#"),Fp("#","search","hash",d)));let m=s===""||d.pathname==="",u=m?"/":d.pathname,p;if(u==null)p=n;else{let v=r.length-1;if(!l&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),v-=1;d.pathname=w.join("/")}p=v>=0?r[v]:"/"}let g=Mw(d,p),h=u&&u!=="/"&&u.endsWith("/"),j=(m||u===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(h||j)&&(g.pathname+="/"),g}var Oi=s=>s.join("/").replace(/\/\/+/g,"/"),zw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Lw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,$w=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Hm=class{constructor(s,r,n,l=!1){this.status=s,this.statusText=r||"",this.internal=l,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Ld(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Gd(s){return s.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Gl=Symbol("Uninstrumented");function Fw(s,r){let n={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};s.forEach(d=>d({id:r.id,index:r.index,path:r.path,instrument(m){let u=Object.keys(n);for(let p of u)m[p]&&n[p].push(m[p])}}));let l={};if(typeof r.lazy=="function"&&n.lazy.length>0){let d=ic(n.lazy,r.lazy,()=>{});d&&(l.lazy=d)}if(typeof r.lazy=="object"){let d=r.lazy;["middleware","loader","action"].forEach(m=>{let u=d[m],p=n[`lazy.${m}`];if(typeof u=="function"&&p.length>0){let g=ic(p,u,()=>{});g&&(l.lazy=Object.assign(l.lazy||{},{[m]:g}))}})}return["loader","action"].forEach(d=>{let m=r[d];if(typeof m=="function"&&n[d].length>0){let u=m[Gl]??m,p=ic(n[d],u,(...g)=>Kb(g[0]));p&&(p[Gl]=u,l[d]=p)}}),r.middleware&&r.middleware.length>0&&n.middleware.length>0&&(l.middleware=r.middleware.map(d=>{let m=d[Gl]??d,u=ic(n.middleware,m,(...p)=>Kb(p[0]));return u?(u[Gl]=m,u):d})),l}function Uw(s,r){let n={navigate:[],fetch:[]};if(r.forEach(l=>l({instrument(d){let m=Object.keys(d);for(let u of m)d[u]&&n[u].push(d[u])}})),n.navigate.length>0){let l=s.navigate[Gl]??s.navigate,d=ic(n.navigate,l,(...m)=>{let[u,p]=m;return{to:typeof u=="number"||typeof u=="string"?u:u?Mi(u):".",...Jb(s,p??{})}});d&&(d[Gl]=l,s.navigate=d)}if(n.fetch.length>0){let l=s.fetch[Gl]??s.fetch,d=ic(n.fetch,l,(...m)=>{let[u,,p,g]=m;return{href:p??".",fetcherKey:u,...Jb(s,g??{})}});d&&(d[Gl]=l,s.fetch=d)}return s}function ic(s,r,n){return s.length===0?null:async(...l)=>{let d=await pv(s,n(...l),()=>r(...l),s.length-1);if(d.type==="error")throw d.value;return d.value}}async function pv(s,r,n,l){let d=s[l],m;if(d){let u,p=async()=>(u?console.error("You cannot call instrumented handlers more than once"):u=pv(s,r,n,l-1),m=await u,_s(m,"Expected a result"),m.type==="error"&&m.value instanceof Error?{status:"error",error:m.value}:{status:"success",error:void 0});try{await d(p,r)}catch(g){console.error("An instrumentation function threw an error:",g)}u||await p(),await u}else try{m={type:"success",value:await n()}}catch(u){m={type:"error",value:u}}return m||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Kb(s){let{request:r,context:n,params:l,unstable_pattern:d}=s;return{request:Iw(r),params:{...l},unstable_pattern:d,context:Bw(n)}}function Jb(s,r){return{currentUrl:Mi(s.state.location),..."formMethod"in r?{formMethod:r.formMethod}:{},..."formEncType"in r?{formEncType:r.formEncType}:{},..."formData"in r?{formData:r.formData}:{},..."body"in r?{body:r.body}:{}}}function Iw(s){return{method:s.method,url:s.url,headers:{get:(...r)=>s.headers.get(...r)}}}function Bw(s){if(qw(s)){let r={...s};return Object.freeze(r),r}else return{get:r=>s.get(r)}}var Vw=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qw(s){if(s===null||typeof s!="object")return!1;const r=Object.getPrototypeOf(s);return r===Object.prototype||r===null||Object.getOwnPropertyNames(r).sort().join("\0")===Vw}var xv=["POST","PUT","PATCH","DELETE"],Hw=new Set(xv),Gw=["GET",...xv],Qw=new Set(Gw),Yw=new Set([301,302,303,307,308]),Ww=new Set([307,308]),Up={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Zw={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},jd={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Kw=s=>({hasErrorBoundary:!!s.hasErrorBoundary}),fv="remix-router-transitions",gv=Symbol("ResetLoaderData");function Jw(s){const r=s.window?s.window:typeof window<"u"?window:void 0,n=typeof r<"u"&&typeof r.document<"u"&&typeof r.document.createElement<"u";_s(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let l=s.hydrationRouteProperties||[],d=s.mapRouteProperties||Kw,m=d;if(s.unstable_instrumentations){let oe=s.unstable_instrumentations;m=be=>({...d(be),...Fw(oe.map(Te=>Te.route).filter(Boolean),be)})}let u={},p=zd(s.routes,m,void 0,u),g,h=s.basename||"/";h.startsWith("/")||(h=`/${h}`);let j=s.dataStrategy||a4,v={...s.future},w=null,E=new Set,A=null,P=null,q=null,V=s.hydrationData!=null,M=Vl(p,s.history.location,h),R=!1,ae=null,H;if(M==null&&!s.patchRoutesOnNavigation){let oe=$n(404,{pathname:s.history.location.pathname}),{matches:be,route:Te}=um(p);H=!0,M=be,ae={[Te.id]:oe}}else if(M&&!s.hydrationData&&ir(M,p,s.history.location.pathname).active&&(M=null),M)if(M.some(oe=>oe.route.lazy))H=!1;else if(!M.some(oe=>ef(oe.route)))H=!0;else{let oe=s.hydrationData?s.hydrationData.loaderData:null,be=s.hydrationData?s.hydrationData.errors:null;if(be){let Te=M.findIndex(rt=>be[rt.route.id]!==void 0);H=M.slice(0,Te+1).every(rt=>!mx(rt.route,oe,be))}else H=M.every(Te=>!mx(Te.route,oe,be))}else{H=!1,M=[];let oe=ir(null,p,s.history.location.pathname);oe.active&&oe.matches&&(R=!0,M=oe.matches)}let D,k={historyAction:s.history.action,location:s.history.location,matches:M,initialized:H,navigation:Up,restoreScrollPosition:s.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||ae,fetchers:new Map,blockers:new Map},Q="POP",W=null,te=!1,ie,X=!1,Se=new Map,$=null,re=!1,B=!1,ne=new Set,Z=new Map,ue=0,ve=-1,O=new Map,J=new Set,z=new Map,ye=new Map,xe=new Set,I=new Map,L,_=null;function me(){if(w=s.history.listen(({action:oe,location:be,delta:Te})=>{if(L){L(),L=void 0;return}La(I.size===0||Te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let rt=Ds({currentLocation:k.location,nextLocation:be,historyAction:oe});if(rt&&Te!=null){let lt=new Promise(zt=>{L=zt});s.history.go(Te*-1),xt(rt,{state:"blocked",location:be,proceed(){xt(rt,{state:"proceeding",proceed:void 0,reset:void 0,location:be}),lt.then(()=>s.history.go(Te))},reset(){let zt=new Map(k.blockers);zt.set(rt,jd),se({blockers:zt})}}),W==null||W.resolve(),W=null;return}return tt(oe,be)}),n){y4(r,Se);let oe=()=>j4(r,Se);r.addEventListener("pagehide",oe),$=()=>r.removeEventListener("pagehide",oe)}return k.initialized||tt("POP",k.location,{initialHydration:!0}),D}function fe(){w&&w(),$&&$(),E.clear(),ie&&ie.abort(),k.fetchers.forEach((oe,be)=>ys(be)),k.blockers.forEach((oe,be)=>mt(be))}function Me(oe){return E.add(oe),()=>E.delete(oe)}function se(oe,be={}){oe.matches&&(oe.matches=oe.matches.map(lt=>{let zt=u[lt.route.id],ct=lt.route;return ct.element!==zt.element||ct.errorElement!==zt.errorElement||ct.hydrateFallbackElement!==zt.hydrateFallbackElement?{...lt,route:zt}:lt})),k={...k,...oe};let Te=[],rt=[];k.fetchers.forEach((lt,zt)=>{lt.state==="idle"&&(xe.has(zt)?Te.push(zt):rt.push(zt))}),xe.forEach(lt=>{!k.fetchers.has(lt)&&!Z.has(lt)&&Te.push(lt)}),[...E].forEach(lt=>lt(k,{deletedFetchers:Te,newErrors:oe.errors??null,viewTransitionOpts:be.viewTransitionOpts,flushSync:be.flushSync===!0})),Te.forEach(lt=>ys(lt)),rt.forEach(lt=>k.fetchers.delete(lt))}function le(oe,be,{flushSync:Te}={}){var Ut,It;let rt=k.actionData!=null&&k.navigation.formMethod!=null&&Mr(k.navigation.formMethod)&&k.navigation.state==="loading"&&((Ut=oe.state)==null?void 0:Ut._isRedirect)!==!0,lt;be.actionData?Object.keys(be.actionData).length>0?lt=be.actionData:lt=null:rt?lt=k.actionData:lt=null;let zt=be.loaderData?oy(k.loaderData,be.loaderData,be.matches||[],be.errors):k.loaderData,ct=k.blockers;ct.size>0&&(ct=new Map(ct),ct.forEach((cs,Os)=>ct.set(Os,jd)));let ft=re?!1:$a(oe,be.matches||k.matches),kt=te===!0||k.navigation.formMethod!=null&&Mr(k.navigation.formMethod)&&((It=oe.state)==null?void 0:It._isRedirect)!==!0;g&&(p=g,g=void 0),re||Q==="POP"||(Q==="PUSH"?s.history.push(oe,oe.state):Q==="REPLACE"&&s.history.replace(oe,oe.state));let Lt;if(Q==="POP"){let cs=Se.get(k.location.pathname);cs&&cs.has(oe.pathname)?Lt={currentLocation:k.location,nextLocation:oe}:Se.has(oe.pathname)&&(Lt={currentLocation:oe,nextLocation:k.location})}else if(X){let cs=Se.get(k.location.pathname);cs?cs.add(oe.pathname):(cs=new Set([oe.pathname]),Se.set(k.location.pathname,cs)),Lt={currentLocation:k.location,nextLocation:oe}}se({...be,actionData:lt,loaderData:zt,historyAction:Q,location:oe,initialized:!0,navigation:Up,revalidation:"idle",restoreScrollPosition:ft,preventScrollReset:kt,blockers:ct},{viewTransitionOpts:Lt,flushSync:Te===!0}),Q="POP",te=!1,X=!1,re=!1,B=!1,W==null||W.resolve(),W=null,_==null||_.resolve(),_=null}async function Be(oe,be){if(W==null||W.resolve(),W=null,typeof oe=="number"){W||(W=my());let Os=W.promise;return s.history.go(oe),Os}let Te=ux(k.location,k.matches,h,oe,be==null?void 0:be.fromRouteId,be==null?void 0:be.relative),{path:rt,submission:lt,error:zt}=Xb(!1,Te,be),ct=k.location,ft=Md(k.location,rt,be&&be.state);ft={...ft,...s.history.encodeLocation(ft)};let kt=be&&be.replace!=null?be.replace:void 0,Lt="PUSH";kt===!0?Lt="REPLACE":kt===!1||lt!=null&&Mr(lt.formMethod)&&lt.formAction===k.location.pathname+k.location.search&&(Lt="REPLACE");let Ut=be&&"preventScrollReset"in be?be.preventScrollReset===!0:void 0,It=(be&&be.flushSync)===!0,cs=Ds({currentLocation:ct,nextLocation:ft,historyAction:Lt});if(cs){xt(cs,{state:"blocked",location:ft,proceed(){xt(cs,{state:"proceeding",proceed:void 0,reset:void 0,location:ft}),Be(oe,be)},reset(){let Os=new Map(k.blockers);Os.set(cs,jd),se({blockers:Os})}});return}await tt(Lt,ft,{submission:lt,pendingError:zt,preventScrollReset:Ut,replace:be&&be.replace,enableViewTransition:be&&be.viewTransition,flushSync:It})}function Qe(){_||(_=my()),wa(),se({revalidation:"loading"});let oe=_.promise;return k.navigation.state==="submitting"?oe:k.navigation.state==="idle"?(tt(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),oe):(tt(Q||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:X===!0}),oe)}async function tt(oe,be,Te){ie&&ie.abort(),ie=null,Q=oe,re=(Te&&Te.startUninterruptedRevalidation)===!0,ha(k.location,k.matches),te=(Te&&Te.preventScrollReset)===!0,X=(Te&&Te.enableViewTransition)===!0;let rt=g||p,lt=Te&&Te.overrideNavigation,zt=Te!=null&&Te.initialHydration&&k.matches&&k.matches.length>0&&!R?k.matches:Vl(rt,be,h),ct=(Te&&Te.flushSync)===!0;if(zt&&k.initialized&&!B&&u4(k.location,be)&&!(Te&&Te.submission&&Mr(Te.submission.formMethod))){le(be,{matches:zt},{flushSync:ct});return}let ft=ir(zt,rt,be.pathname);if(ft.active&&ft.matches&&(zt=ft.matches),!zt){let{error:la,notFoundMatches:ns,route:Rs}=Vs(be.pathname);le(be,{matches:ns,loaderData:{},errors:{[Rs.id]:la}},{flushSync:ct});return}ie=new AbortController;let kt=nc(s.history,be,ie.signal,Te&&Te.submission),Lt=s.getContext?await s.getContext():new Qb,Ut;if(Te&&Te.pendingError)Ut=[ql(zt).route.id,{type:"error",error:Te.pendingError}];else if(Te&&Te.submission&&Mr(Te.submission.formMethod)){let la=await ot(kt,be,Te.submission,zt,Lt,ft.active,Te&&Te.initialHydration===!0,{replace:Te.replace,flushSync:ct});if(la.shortCircuited)return;if(la.pendingActionResult){let[ns,Rs]=la.pendingActionResult;if(yn(Rs)&&Ld(Rs.error)&&Rs.error.status===404){ie=null,le(be,{matches:la.matches,loaderData:{},errors:{[ns]:Rs.error}});return}}zt=la.matches||zt,Ut=la.pendingActionResult,lt=Ip(be,Te.submission),ct=!1,ft.active=!1,kt=nc(s.history,kt.url,kt.signal)}let{shortCircuited:It,matches:cs,loaderData:Os,errors:gs}=await Ve(kt,be,zt,Lt,ft.active,lt,Te&&Te.submission,Te&&Te.fetcherSubmission,Te&&Te.replace,Te&&Te.initialHydration===!0,ct,Ut);It||(ie=null,le(be,{matches:cs||zt,...cy(Ut),loaderData:Os,errors:gs}))}async function ot(oe,be,Te,rt,lt,zt,ct,ft={}){wa();let kt=g4(be,Te);if(se({navigation:kt},{flushSync:ft.flushSync===!0}),zt){let It=await mr(rt,be.pathname,oe.signal);if(It.type==="aborted")return{shortCircuited:!0};if(It.type==="error"){if(It.partialMatches.length===0){let{matches:Os,route:gs}=um(p);return{matches:Os,pendingActionResult:[gs.id,{type:"error",error:It.error}]}}let cs=ql(It.partialMatches).route.id;return{matches:It.partialMatches,pendingActionResult:[cs,{type:"error",error:It.error}]}}else if(It.matches)rt=It.matches;else{let{notFoundMatches:cs,error:Os,route:gs}=Vs(be.pathname);return{matches:cs,pendingActionResult:[gs.id,{type:"error",error:Os}]}}}let Lt,Ut=vm(rt,be);if(!Ut.route.action&&!Ut.route.lazy)Lt={type:"error",error:$n(405,{method:oe.method,pathname:be.pathname,routeId:Ut.route.id})};else{let It=xc(m,u,oe,rt,Ut,ct?[]:l,lt),cs=await Bs(oe,It,lt,null);if(Lt=cs[Ut.route.id],!Lt){for(let Os of rt)if(cs[Os.route.id]){Lt=cs[Os.route.id];break}}if(oe.signal.aborted)return{shortCircuited:!0}}if(go(Lt)){let It;return ft&&ft.replace!=null?It=ft.replace:It=ny(Lt.response.headers.get("Location"),new URL(oe.url),h)===k.location.pathname+k.location.search,await Vt(oe,Lt,!0,{submission:Te,replace:It}),{shortCircuited:!0}}if(yn(Lt)){let It=ql(rt,Ut.route.id);return(ft&&ft.replace)!==!0&&(Q="PUSH"),{matches:rt,pendingActionResult:[It.route.id,Lt,Ut.route.id]}}return{matches:rt,pendingActionResult:[Ut.route.id,Lt]}}async function Ve(oe,be,Te,rt,lt,zt,ct,ft,kt,Lt,Ut,It){let cs=zt||Ip(be,ct),Os=ct||ft||uy(cs),gs=!re&&!Lt;if(lt){if(gs){let Ts=Ct(It);se({navigation:cs,...Ts!==void 0?{actionData:Ts}:{}},{flushSync:Ut})}let es=await mr(Te,be.pathname,oe.signal);if(es.type==="aborted")return{shortCircuited:!0};if(es.type==="error"){if(es.partialMatches.length===0){let{matches:Ga,route:ca}=um(p);return{matches:Ga,loaderData:{},errors:{[ca.id]:es.error}}}let Ts=ql(es.partialMatches).route.id;return{matches:es.partialMatches,loaderData:{},errors:{[Ts]:es.error}}}else if(es.matches)Te=es.matches;else{let{error:Ts,notFoundMatches:Ga,route:ca}=Vs(be.pathname);return{matches:Ga,loaderData:{},errors:{[ca.id]:Ts}}}}let la=g||p,{dsMatches:ns,revalidatingFetchers:Rs}=ey(oe,rt,m,u,s.history,k,Te,Os,be,Lt?[]:l,Lt===!0,B,ne,xe,z,J,la,h,s.patchRoutesOnNavigation!=null,It);if(ve=++ue,!s.dataStrategy&&!ns.some(es=>es.shouldLoad)&&!ns.some(es=>es.route.middleware&&es.route.middleware.length>0)&&Rs.length===0){let es=rs();return le(be,{matches:Te,loaderData:{},errors:It&&yn(It[1])?{[It[0]]:It[1].error}:null,...cy(It),...es?{fetchers:new Map(k.fetchers)}:{}},{flushSync:Ut}),{shortCircuited:!0}}if(gs){let es={};if(!lt){es.navigation=cs;let Ts=Ct(It);Ts!==void 0&&(es.actionData=Ts)}Rs.length>0&&(es.fetchers=ds(Rs)),se(es,{flushSync:Ut})}Rs.forEach(es=>{Yt(es.key),es.controller&&Z.set(es.key,es.controller)});let Es=()=>Rs.forEach(es=>Yt(es.key));ie&&ie.signal.addEventListener("abort",Es);let{loaderResults:hr,fetcherResults:oa}=await Ss(ns,Rs,oe,rt);if(oe.signal.aborted)return{shortCircuited:!0};ie&&ie.signal.removeEventListener("abort",Es),Rs.forEach(es=>Z.delete(es.key));let yr=mm(hr);if(yr)return await Vt(oe,yr.result,!0,{replace:kt}),{shortCircuited:!0};if(yr=mm(oa),yr)return J.add(yr.key),await Vt(oe,yr.result,!0,{replace:kt}),{shortCircuited:!0};let{loaderData:Sr,errors:ta}=ly(k,Te,hr,It,Rs,oa);Lt&&k.errors&&(ta={...k.errors,...ta});let lr=rs(),on=ea(ve),Ys=lr||on||Rs.length>0;return{matches:Te,loaderData:Sr,errors:ta,...Ys?{fetchers:new Map(k.fetchers)}:{}}}function Ct(oe){if(oe&&!yn(oe[1]))return{[oe[0]]:oe[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function ds(oe){return oe.forEach(be=>{let Te=k.fetchers.get(be.key),rt=vd(void 0,Te?Te.data:void 0);k.fetchers.set(be.key,rt)}),new Map(k.fetchers)}async function At(oe,be,Te,rt){Yt(oe);let lt=(rt&&rt.flushSync)===!0,zt=g||p,ct=ux(k.location,k.matches,h,Te,be,rt==null?void 0:rt.relative),ft=Vl(zt,ct,h),kt=ir(ft,zt,ct);if(kt.active&&kt.matches&&(ft=kt.matches),!ft){yt(oe,be,$n(404,{pathname:ct}),{flushSync:lt});return}let{path:Lt,submission:Ut,error:It}=Xb(!0,ct,rt);if(It){yt(oe,be,It,{flushSync:lt});return}let cs=s.getContext?await s.getContext():new Qb,Os=(rt&&rt.preventScrollReset)===!0;if(Ut&&Mr(Ut.formMethod)){await as(oe,be,Lt,ft,cs,kt.active,lt,Os,Ut);return}z.set(oe,{routeId:be,path:Lt}),await hs(oe,be,Lt,ft,cs,kt.active,lt,Os,Ut)}async function as(oe,be,Te,rt,lt,zt,ct,ft,kt){wa(),z.delete(oe);let Lt=k.fetchers.get(oe);ge(oe,b4(kt,Lt),{flushSync:ct});let Ut=new AbortController,It=nc(s.history,Te,Ut.signal,kt);if(zt){let vs=await mr(rt,new URL(It.url).pathname,It.signal,oe);if(vs.type==="aborted")return;if(vs.type==="error"){yt(oe,be,vs.error,{flushSync:ct});return}else if(vs.matches)rt=vs.matches;else{yt(oe,be,$n(404,{pathname:Te}),{flushSync:ct});return}}let cs=vm(rt,Te);if(!cs.route.action&&!cs.route.lazy){let vs=$n(405,{method:kt.formMethod,pathname:Te,routeId:be});yt(oe,be,vs,{flushSync:ct});return}Z.set(oe,Ut);let Os=ue,gs=xc(m,u,It,rt,cs,l,lt),la=await Bs(It,gs,lt,oe),ns=la[cs.route.id];if(!ns){for(let vs of gs)if(la[vs.route.id]){ns=la[vs.route.id];break}}if(It.signal.aborted){Z.get(oe)===Ut&&Z.delete(oe);return}if(xe.has(oe)){if(go(ns)||yn(ns)){ge(oe,ll(void 0));return}}else{if(go(ns))if(Z.delete(oe),ve>Os){ge(oe,ll(void 0));return}else return J.add(oe),ge(oe,vd(kt)),Vt(It,ns,!1,{fetcherSubmission:kt,preventScrollReset:ft});if(yn(ns)){yt(oe,be,ns.error);return}}let Rs=k.navigation.location||k.location,Es=nc(s.history,Rs,Ut.signal),hr=g||p,oa=k.navigation.state!=="idle"?Vl(hr,k.navigation.location,h):k.matches;_s(oa,"Didn't find any matches after fetcher action");let yr=++ue;O.set(oe,yr);let Sr=vd(kt,ns.data);k.fetchers.set(oe,Sr);let{dsMatches:ta,revalidatingFetchers:lr}=ey(Es,lt,m,u,s.history,k,oa,kt,Rs,l,!1,B,ne,xe,z,J,hr,h,s.patchRoutesOnNavigation!=null,[cs.route.id,ns]);lr.filter(vs=>vs.key!==oe).forEach(vs=>{let ya=vs.key,vn=k.fetchers.get(ya),or=vd(void 0,vn?vn.data:void 0);k.fetchers.set(ya,or),Yt(ya),vs.controller&&Z.set(ya,vs.controller)}),se({fetchers:new Map(k.fetchers)});let on=()=>lr.forEach(vs=>Yt(vs.key));Ut.signal.addEventListener("abort",on);let{loaderResults:Ys,fetcherResults:es}=await Ss(ta,lr,Es,lt);if(Ut.signal.aborted)return;if(Ut.signal.removeEventListener("abort",on),O.delete(oe),Z.delete(oe),lr.forEach(vs=>Z.delete(vs.key)),k.fetchers.has(oe)){let vs=ll(ns.data);k.fetchers.set(oe,vs)}let Ts=mm(Ys);if(Ts)return Vt(Es,Ts.result,!1,{preventScrollReset:ft});if(Ts=mm(es),Ts)return J.add(Ts.key),Vt(Es,Ts.result,!1,{preventScrollReset:ft});let{loaderData:Ga,errors:ca}=ly(k,oa,Ys,void 0,lr,es);ea(yr),k.navigation.state==="loading"&&yr>ve?(_s(Q,"Expected pending action"),ie&&ie.abort(),le(k.navigation.location,{matches:oa,loaderData:Ga,errors:ca,fetchers:new Map(k.fetchers)})):(se({errors:ca,loaderData:oy(k.loaderData,Ga,oa,ca),fetchers:new Map(k.fetchers)}),B=!1)}async function hs(oe,be,Te,rt,lt,zt,ct,ft,kt){let Lt=k.fetchers.get(oe);ge(oe,vd(kt,Lt?Lt.data:void 0),{flushSync:ct});let Ut=new AbortController,It=nc(s.history,Te,Ut.signal);if(zt){let Rs=await mr(rt,new URL(It.url).pathname,It.signal,oe);if(Rs.type==="aborted")return;if(Rs.type==="error"){yt(oe,be,Rs.error,{flushSync:ct});return}else if(Rs.matches)rt=Rs.matches;else{yt(oe,be,$n(404,{pathname:Te}),{flushSync:ct});return}}let cs=vm(rt,Te);Z.set(oe,Ut);let Os=ue,gs=xc(m,u,It,rt,cs,l,lt),ns=(await Bs(It,gs,lt,oe))[cs.route.id];if(Z.get(oe)===Ut&&Z.delete(oe),!It.signal.aborted){if(xe.has(oe)){ge(oe,ll(void 0));return}if(go(ns))if(ve>Os){ge(oe,ll(void 0));return}else{J.add(oe),await Vt(It,ns,!1,{preventScrollReset:ft});return}if(yn(ns)){yt(oe,be,ns.error);return}ge(oe,ll(ns.data))}}async function Vt(oe,be,Te,{submission:rt,fetcherSubmission:lt,preventScrollReset:zt,replace:ct}={}){Te||(W==null||W.resolve(),W=null),be.response.headers.has("X-Remix-Revalidate")&&(B=!0);let ft=be.response.headers.get("Location");_s(ft,"Expected a Location header on the redirect Response"),ft=ny(ft,new URL(oe.url),h);let kt=Md(k.location,ft,{_isRedirect:!0});if(n){let gs=!1;if(be.response.headers.has("X-Remix-Reload-Document"))gs=!0;else if(qm(ft)){const la=dv(ft,!0);gs=la.origin!==r.location.origin||Hn(la.pathname,h)==null}if(gs){ct?r.location.replace(ft):r.location.assign(ft);return}}ie=null;let Lt=ct===!0||be.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ut,formAction:It,formEncType:cs}=k.navigation;!rt&&!lt&&Ut&&It&&cs&&(rt=uy(k.navigation));let Os=rt||lt;if(Ww.has(be.response.status)&&Os&&Mr(Os.formMethod))await tt(Lt,kt,{submission:{...Os,formAction:ft},preventScrollReset:zt||te,enableViewTransition:Te?X:void 0});else{let gs=Ip(kt,rt);await tt(Lt,kt,{overrideNavigation:gs,fetcherSubmission:lt,preventScrollReset:zt||te,enableViewTransition:Te?X:void 0})}}async function Bs(oe,be,Te,rt){let lt,zt={};try{lt=await n4(j,oe,be,rt,Te,!1)}catch(ct){return be.filter(ft=>ft.shouldLoad).forEach(ft=>{zt[ft.route.id]={type:"error",error:ct}}),zt}if(oe.signal.aborted)return zt;for(let[ct,ft]of Object.entries(lt))if(x4(ft)){let kt=ft.result;zt[ct]={type:"redirect",response:c4(kt,oe,ct,be,h)}}else zt[ct]=await o4(ft);return zt}async function Ss(oe,be,Te,rt){let lt=Bs(Te,oe,rt,null),zt=Promise.all(be.map(async kt=>{if(kt.matches&&kt.match&&kt.request&&kt.controller){let Ut=(await Bs(kt.request,kt.matches,rt,kt.key))[kt.match.route.id];return{[kt.key]:Ut}}else return Promise.resolve({[kt.key]:{type:"error",error:$n(404,{pathname:kt.path})}})})),ct=await lt,ft=(await zt).reduce((kt,Lt)=>Object.assign(kt,Lt),{});return{loaderResults:ct,fetcherResults:ft}}function wa(){B=!0,z.forEach((oe,be)=>{Z.has(be)&&ne.add(be),Yt(be)})}function ge(oe,be,Te={}){k.fetchers.set(oe,be),se({fetchers:new Map(k.fetchers)},{flushSync:(Te&&Te.flushSync)===!0})}function yt(oe,be,Te,rt={}){let lt=ql(k.matches,be);ys(oe),se({errors:{[lt.route.id]:Te},fetchers:new Map(k.fetchers)},{flushSync:(rt&&rt.flushSync)===!0})}function _t(oe){return ye.set(oe,(ye.get(oe)||0)+1),xe.has(oe)&&xe.delete(oe),k.fetchers.get(oe)||Zw}function ps(oe,be){Yt(oe,be==null?void 0:be.reason),ge(oe,ll(null))}function ys(oe){let be=k.fetchers.get(oe);Z.has(oe)&&!(be&&be.state==="loading"&&O.has(oe))&&Yt(oe),z.delete(oe),O.delete(oe),J.delete(oe),xe.delete(oe),ne.delete(oe),k.fetchers.delete(oe)}function at(oe){let be=(ye.get(oe)||0)-1;be<=0?(ye.delete(oe),xe.add(oe)):ye.set(oe,be),se({fetchers:new Map(k.fetchers)})}function Yt(oe,be){let Te=Z.get(oe);Te&&(Te.abort(be),Z.delete(oe))}function Ms(oe){for(let be of oe){let Te=_t(be),rt=ll(Te.data);k.fetchers.set(be,rt)}}function rs(){let oe=[],be=!1;for(let Te of J){let rt=k.fetchers.get(Te);_s(rt,`Expected fetcher: ${Te}`),rt.state==="loading"&&(J.delete(Te),oe.push(Te),be=!0)}return Ms(oe),be}function ea(oe){let be=[];for(let[Te,rt]of O)if(rt<oe){let lt=k.fetchers.get(Te);_s(lt,`Expected fetcher: ${Te}`),lt.state==="loading"&&(Yt(Te),O.delete(Te),be.push(Te))}return Ms(be),be.length>0}function He(oe,be){let Te=k.blockers.get(oe)||jd;return I.get(oe)!==be&&I.set(oe,be),Te}function mt(oe){k.blockers.delete(oe),I.delete(oe)}function xt(oe,be){let Te=k.blockers.get(oe)||jd;_s(Te.state==="unblocked"&&be.state==="blocked"||Te.state==="blocked"&&be.state==="blocked"||Te.state==="blocked"&&be.state==="proceeding"||Te.state==="blocked"&&be.state==="unblocked"||Te.state==="proceeding"&&be.state==="unblocked",`Invalid blocker state transition: ${Te.state} -> ${be.state}`);let rt=new Map(k.blockers);rt.set(oe,be),se({blockers:rt})}function Ds({currentLocation:oe,nextLocation:be,historyAction:Te}){if(I.size===0)return;I.size>1&&La(!1,"A router only supports one blocker at a time");let rt=Array.from(I.entries()),[lt,zt]=rt[rt.length-1],ct=k.blockers.get(lt);if(!(ct&&ct.state==="proceeding")&&zt({currentLocation:oe,nextLocation:be,historyAction:Te}))return lt}function Vs(oe){let be=$n(404,{pathname:oe}),Te=g||p,{matches:rt,route:lt}=um(Te);return{notFoundMatches:rt,route:lt,error:be}}function Ks(oe,be,Te){if(A=oe,q=be,P=Te||null,!V&&k.navigation===Up){V=!0;let rt=$a(k.location,k.matches);rt!=null&&se({restoreScrollPosition:rt})}return()=>{A=null,q=null,P=null}}function Gs(oe,be){return P&&P(oe,be.map(rt=>jw(rt,k.loaderData)))||oe.key}function ha(oe,be){if(A&&q){let Te=Gs(oe,be);A[Te]=q()}}function $a(oe,be){if(A){let Te=Gs(oe,be),rt=A[Te];if(typeof rt=="number")return rt}return null}function ir(oe,be,Te){if(s.patchRoutesOnNavigation)if(oe){if(Object.keys(oe[0].params).length>0)return{active:!0,matches:Ad(be,Te,h,!0)}}else return{active:!0,matches:Ad(be,Te,h,!0)||[]};return{active:!1,matches:null}}async function mr(oe,be,Te,rt){if(!s.patchRoutesOnNavigation)return{type:"success",matches:oe};let lt=oe;for(;;){let zt=g==null,ct=g||p,ft=u;try{await s.patchRoutesOnNavigation({signal:Te,path:be,matches:lt,fetcherKey:rt,patch:(Ut,It)=>{Te.aborted||ty(Ut,It,ct,ft,m,!1)}})}catch(Ut){return{type:"error",error:Ut,partialMatches:lt}}finally{zt&&!Te.aborted&&(p=[...p])}if(Te.aborted)return{type:"aborted"};let kt=Vl(ct,be,h),Lt=null;if(kt){if(Object.keys(kt[0].params).length===0)return{type:"success",matches:kt};if(Lt=Ad(ct,be,h,!0),!(Lt&&lt.length<Lt.length&&ln(lt,Lt.slice(0,lt.length))))return{type:"success",matches:kt}}if(Lt||(Lt=Ad(ct,be,h,!0)),!Lt||ln(lt,Lt))return{type:"success",matches:null};lt=Lt}}function ln(oe,be){return oe.length===be.length&&oe.every((Te,rt)=>Te.route.id===be[rt].route.id)}function Li(oe){u={},g=zd(oe,m,void 0,u)}function Qn(oe,be,Te=!1){let rt=g==null;ty(oe,be,g||p,u,m,Te),rt&&(p=[...p],se({}))}return D={get basename(){return h},get future(){return v},get state(){return k},get routes(){return p},get window(){return r},initialize:me,subscribe:Me,enableScrollRestoration:Ks,navigate:Be,fetch:At,revalidate:Qe,createHref:oe=>s.history.createHref(oe),encodeLocation:oe=>s.history.encodeLocation(oe),getFetcher:_t,resetFetcher:ps,deleteFetcher:at,dispose:fe,getBlocker:He,deleteBlocker:mt,patchRoutes:Qn,_internalFetchControllers:Z,_internalSetRoutes:Li,_internalSetStateDoNotUseOrYouWillBreakYourApp(oe){se(oe)}},s.unstable_instrumentations&&(D=Uw(D,s.unstable_instrumentations.map(oe=>oe.router).filter(Boolean))),D}function Xw(s){return s!=null&&("formData"in s&&s.formData!=null||"body"in s&&s.body!==void 0)}function ux(s,r,n,l,d,m){let u,p;if(d){u=[];for(let h of r)if(u.push(h),h.route.id===d){p=h;break}}else u=r,p=r[r.length-1];let g=Xx(l||".",Jx(u),Hn(s.pathname,n)||s.pathname,m==="path");if(l==null&&(g.search=s.search,g.hash=s.hash),(l==null||l===""||l===".")&&p){let h=tf(g.search);if(p.route.index&&!h)g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index";else if(!p.route.index&&h){let j=new URLSearchParams(g.search),v=j.getAll("index");j.delete("index"),v.filter(E=>E).forEach(E=>j.append("index",E));let w=j.toString();g.search=w?`?${w}`:""}}return n!=="/"&&(g.pathname=Rw({basename:n,pathname:g.pathname})),Mi(g)}function Xb(s,r,n){if(!n||!Xw(n))return{path:r};if(n.formMethod&&!f4(n.formMethod))return{path:r,error:$n(405,{method:n.formMethod})};let l=()=>({path:r,error:$n(400,{type:"invalid-body"})}),m=(n.formMethod||"get").toUpperCase(),u=wv(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Mr(m))return l();let v=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((w,[E,A])=>`${w}${E}=${A}
`,""):String(n.body);return{path:r,submission:{formMethod:m,formAction:u,formEncType:n.formEncType,formData:void 0,json:void 0,text:v}}}else if(n.formEncType==="application/json"){if(!Mr(m))return l();try{let v=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:m,formAction:u,formEncType:n.formEncType,formData:void 0,json:v,text:void 0}}}catch{return l()}}}_s(typeof FormData=="function","FormData is not available in this environment");let p,g;if(n.formData)p=px(n.formData),g=n.formData;else if(n.body instanceof FormData)p=px(n.body),g=n.body;else if(n.body instanceof URLSearchParams)p=n.body,g=iy(p);else if(n.body==null)p=new URLSearchParams,g=new FormData;else try{p=new URLSearchParams(n.body),g=iy(p)}catch{return l()}let h={formMethod:m,formAction:u,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(Mr(h.formMethod))return{path:r,submission:h};let j=Jl(r);return s&&j.search&&tf(j.search)&&p.append("index",""),j.search=`?${p}`,{path:Mi(j),submission:h}}function ey(s,r,n,l,d,m,u,p,g,h,j,v,w,E,A,P,q,V,M,R){var $;let ae=R?yn(R[1])?R[1].error:R[1].data:void 0,H=d.createURL(m.location),D=d.createURL(g),k;if(j&&m.errors){let re=Object.keys(m.errors)[0];k=u.findIndex(B=>B.route.id===re)}else if(R&&yn(R[1])){let re=R[0];k=u.findIndex(B=>B.route.id===re)-1}let Q=R?R[1].statusCode:void 0,W=Q&&Q>=400,te={currentUrl:H,currentParams:(($=m.matches[0])==null?void 0:$.params)||{},nextUrl:D,nextParams:u[0].params,...p,actionResult:ae,actionStatus:Q},ie=Gd(u),X=u.map((re,B)=>{let{route:ne}=re,Z=null;if(k!=null&&B>k?Z=!1:ne.lazy?Z=!0:ef(ne)?j?Z=mx(ne,m.loaderData,m.errors):e4(m.loaderData,m.matches[B],re)&&(Z=!0):Z=!1,Z!==null)return hx(n,l,s,ie,re,h,r,Z);let ue=W?!1:v||H.pathname+H.search===D.pathname+D.search||H.search!==D.search||t4(m.matches[B],re),ve={...te,defaultShouldRevalidate:ue},O=_m(re,ve);return hx(n,l,s,ie,re,h,r,O,ve)}),Se=[];return A.forEach((re,B)=>{if(j||!u.some(ye=>ye.route.id===re.routeId)||E.has(B))return;let ne=m.fetchers.get(B),Z=ne&&ne.state!=="idle"&&ne.data===void 0,ue=Vl(q,re.path,V);if(!ue){if(M&&Z)return;Se.push({key:B,routeId:re.routeId,path:re.path,matches:null,match:null,request:null,controller:null});return}if(P.has(B))return;let ve=vm(ue,re.path),O=new AbortController,J=nc(d,re.path,O.signal),z=null;if(w.has(B))w.delete(B),z=xc(n,l,J,ue,ve,h,r);else if(Z)v&&(z=xc(n,l,J,ue,ve,h,r));else{let ye={...te,defaultShouldRevalidate:W?!1:v};_m(ve,ye)&&(z=xc(n,l,J,ue,ve,h,r,ye))}z&&Se.push({key:B,routeId:re.routeId,path:re.path,matches:z,match:ve,request:J,controller:O})}),{dsMatches:X,revalidatingFetchers:Se}}function ef(s){return s.loader!=null||s.middleware!=null&&s.middleware.length>0}function mx(s,r,n){if(s.lazy)return!0;if(!ef(s))return!1;let l=r!=null&&s.id in r,d=n!=null&&n[s.id]!==void 0;return!l&&d?!1:typeof s.loader=="function"&&s.loader.hydrate===!0?!0:!l&&!d}function e4(s,r,n){let l=!r||n.route.id!==r.route.id,d=!s.hasOwnProperty(n.route.id);return l||d}function t4(s,r){let n=s.route.path;return s.pathname!==r.pathname||n!=null&&n.endsWith("*")&&s.params["*"]!==r.params["*"]}function _m(s,r){if(s.route.shouldRevalidate){let n=s.route.shouldRevalidate(r);if(typeof n=="boolean")return n}return r.defaultShouldRevalidate}function ty(s,r,n,l,d,m){let u;if(s){let h=l[s];_s(h,`No route found to patch children into: routeId = ${s}`),h.children||(h.children=[]),u=h.children}else u=n;let p=[],g=[];if(r.forEach(h=>{let j=u.find(v=>bv(h,v));j?g.push({existingRoute:j,newRoute:h}):p.push(h)}),p.length>0){let h=zd(p,d,[s||"_","patch",String((u==null?void 0:u.length)||"0")],l);u.push(...h)}if(m&&g.length>0)for(let h=0;h<g.length;h++){let{existingRoute:j,newRoute:v}=g[h],w=j,[E]=zd([v],d,[],{},!0);Object.assign(w,{element:E.element?E.element:w.element,errorElement:E.errorElement?E.errorElement:w.errorElement,hydrateFallbackElement:E.hydrateFallbackElement?E.hydrateFallbackElement:w.hydrateFallbackElement})}}function bv(s,r){return"id"in s&&"id"in r&&s.id===r.id?!0:s.index===r.index&&s.path===r.path&&s.caseSensitive===r.caseSensitive?(!s.children||s.children.length===0)&&(!r.children||r.children.length===0)?!0:s.children.every((n,l)=>{var d;return(d=r.children)==null?void 0:d.some(m=>bv(n,m))}):!1}var sy=new WeakMap,yv=({key:s,route:r,manifest:n,mapRouteProperties:l})=>{let d=n[r.id];if(_s(d,"No route found in manifest"),!d.lazy||typeof d.lazy!="object")return;let m=d.lazy[s];if(!m)return;let u=sy.get(d);u||(u={},sy.set(d,u));let p=u[s];if(p)return p;let g=(async()=>{let h=fw(s),v=d[s]!==void 0&&s!=="hasErrorBoundary";if(h)La(!h,"Route property "+s+" is not a supported lazy route property. This property will be ignored."),u[s]=Promise.resolve();else if(v)La(!1,`Route "${d.id}" has a static property "${s}" defined. The lazy property will be ignored.`);else{let w=await m();w!=null&&(Object.assign(d,{[s]:w}),Object.assign(d,l(d)))}typeof d.lazy=="object"&&(d.lazy[s]=void 0,Object.values(d.lazy).every(w=>w===void 0)&&(d.lazy=void 0))})();return u[s]=g,g},ay=new WeakMap;function s4(s,r,n,l,d){let m=n[s.id];if(_s(m,"No route found in manifest"),!s.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof s.lazy=="function"){let j=ay.get(m);if(j)return{lazyRoutePromise:j,lazyHandlerPromise:j};let v=(async()=>{_s(typeof s.lazy=="function","No lazy route function found");let w=await s.lazy(),E={};for(let A in w){let P=w[A];if(P===void 0)continue;let q=bw(A),M=m[A]!==void 0&&A!=="hasErrorBoundary";q?La(!q,"Route property "+A+" is not a supported property to be returned from a lazy route function. This property will be ignored."):M?La(!M,`Route "${m.id}" has a static property "${A}" defined but its lazy function is also returning a value for this property. The lazy route property "${A}" will be ignored.`):E[A]=P}Object.assign(m,E),Object.assign(m,{...l(m),lazy:void 0})})();return ay.set(m,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let u=Object.keys(s.lazy),p=[],g;for(let j of u){if(d&&d.includes(j))continue;let v=yv({key:j,route:s,manifest:n,mapRouteProperties:l});v&&(p.push(v),j===r&&(g=v))}let h=p.length>0?Promise.all(p).then(()=>{}):void 0;return h==null||h.catch(()=>{}),g==null||g.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:g}}async function ry(s){let r=s.matches.filter(d=>d.shouldLoad),n={};return(await Promise.all(r.map(d=>d.resolve()))).forEach((d,m)=>{n[r[m].route.id]=d}),n}async function a4(s){return s.matches.some(r=>r.route.middleware)?jv(s,()=>ry(s)):ry(s)}function jv(s,r){return r4(s,r,l=>l,h4,n);function n(l,d,m){if(m)return Promise.resolve(Object.assign(m.value,{[d]:{type:"error",result:l}}));{let{matches:u}=s,p=Math.min(Math.max(u.findIndex(h=>h.route.id===d),0),Math.max(u.findIndex(h=>h.shouldCallHandler()),0)),g=ql(u,u[p].route.id).route.id;return Promise.resolve({[g]:{type:"error",result:l}})}}}async function r4(s,r,n,l,d){let{matches:m,request:u,params:p,context:g,unstable_pattern:h}=s,j=m.flatMap(w=>w.route.middleware?w.route.middleware.map(E=>[w.route.id,E]):[]);return await vv({request:u,params:p,context:g,unstable_pattern:h},j,r,n,l,d)}async function vv(s,r,n,l,d,m,u=0){let{request:p}=s;if(p.signal.aborted)throw p.signal.reason??new Error(`Request aborted: ${p.method} ${p.url}`);let g=r[u];if(!g)return await n();let[h,j]=g,v,w=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await vv(s,r,n,l,d,m,u+1)},v.value}catch(E){return v={value:await m(E,h,v)},v.value}};try{let E=await j(s,w),A=E!=null?l(E):void 0;return d(A)?A:v?A??v.value:(v={value:await w()},v.value)}catch(E){return await m(E,h,v)}}function Nv(s,r,n,l,d){let m=yv({key:"middleware",route:l.route,manifest:r,mapRouteProperties:s}),u=s4(l.route,Mr(n.method)?"action":"loader",r,s,d);return{middleware:m,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function hx(s,r,n,l,d,m,u,p,g=null){let h=!1,j=Nv(s,r,n,d,m);return{...d,_lazyPromises:j,shouldLoad:p,shouldRevalidateArgs:g,shouldCallHandler(v){return h=!0,g?typeof v=="boolean"?_m(d,{...g,defaultShouldRevalidate:v}):_m(d,g):p},resolve(v){let{lazy:w,loader:E,middleware:A}=d.route,P=h||p||v&&!Mr(n.method)&&(w||E),q=A&&A.length>0&&!E&&!w;return P&&(Mr(n.method)||!q)?i4({request:n,unstable_pattern:l,match:d,lazyHandlerPromise:j==null?void 0:j.handler,lazyRoutePromise:j==null?void 0:j.route,handlerOverride:v,scopedContext:u}):Promise.resolve({type:"data",result:void 0})}}}function xc(s,r,n,l,d,m,u,p=null){return l.map(g=>g.route.id!==d.route.id?{...g,shouldLoad:!1,shouldRevalidateArgs:p,shouldCallHandler:()=>!1,_lazyPromises:Nv(s,r,n,g,m),resolve:()=>Promise.resolve({type:"data",result:void 0})}:hx(s,r,n,Gd(l),g,m,u,!0,p))}async function n4(s,r,n,l,d,m){n.some(h=>{var j;return(j=h._lazyPromises)==null?void 0:j.middleware})&&await Promise.all(n.map(h=>{var j;return(j=h._lazyPromises)==null?void 0:j.middleware}));let u={request:r,unstable_pattern:Gd(n),params:n[0].params,context:d,matches:n},g=await s({...u,fetcherKey:l,runClientMiddleware:h=>{let j=u;return jv(j,()=>h({...j,fetcherKey:l,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(h=>{var j,v;return[(j=h._lazyPromises)==null?void 0:j.handler,(v=h._lazyPromises)==null?void 0:v.route]}))}catch{}return g}async function i4({request:s,unstable_pattern:r,match:n,lazyHandlerPromise:l,lazyRoutePromise:d,handlerOverride:m,scopedContext:u}){let p,g,h=Mr(s.method),j=h?"action":"loader",v=w=>{let E,A=new Promise((V,M)=>E=M);g=()=>E(),s.signal.addEventListener("abort",g);let P=V=>typeof w!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${j}" [routeId: ${n.route.id}]`)):w({request:s,unstable_pattern:r,params:n.params,context:u},...V!==void 0?[V]:[]),q=(async()=>{try{return{type:"data",result:await(m?m(M=>P(M)):P())}}catch(V){return{type:"error",result:V}}})();return Promise.race([q,A])};try{let w=h?n.route.action:n.route.loader;if(l||d)if(w){let E,[A]=await Promise.all([v(w).catch(P=>{E=P}),l,d]);if(E!==void 0)throw E;p=A}else{await l;let E=h?n.route.action:n.route.loader;if(E)[p]=await Promise.all([v(E),d]);else if(j==="action"){let A=new URL(s.url),P=A.pathname+A.search;throw $n(405,{method:s.method,pathname:P,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(w)p=await v(w);else{let E=new URL(s.url),A=E.pathname+E.search;throw $n(404,{pathname:A})}}catch(w){return{type:"error",result:w}}finally{g&&s.signal.removeEventListener("abort",g)}return p}async function l4(s){let r=s.headers.get("Content-Type");return r&&/\bapplication\/json\b/.test(r)?s.body==null?null:s.json():s.text()}async function o4(s){var l,d,m,u,p;let{result:r,type:n}=s;if(Sv(r)){let g;try{g=await l4(r)}catch(h){return{type:"error",error:h}}return n==="error"?{type:"error",error:new Hm(r.status,r.statusText,g),statusCode:r.status,headers:r.headers}:{type:"data",data:g,statusCode:r.status,headers:r.headers}}return n==="error"?dy(r)?r.data instanceof Error?{type:"error",error:r.data,statusCode:(l=r.init)==null?void 0:l.status,headers:(d=r.init)!=null&&d.headers?new Headers(r.init.headers):void 0}:{type:"error",error:m4(r),statusCode:Ld(r)?r.status:void 0,headers:(m=r.init)!=null&&m.headers?new Headers(r.init.headers):void 0}:{type:"error",error:r,statusCode:Ld(r)?r.status:void 0}:dy(r)?{type:"data",data:r.data,statusCode:(u=r.init)==null?void 0:u.status,headers:(p=r.init)!=null&&p.headers?new Headers(r.init.headers):void 0}:{type:"data",data:r}}function c4(s,r,n,l,d){let m=s.headers.get("Location");if(_s(m,"Redirects returned/thrown from loaders/actions must have a Location header"),!qm(m)){let u=l.slice(0,l.findIndex(p=>p.route.id===n)+1);m=ux(new URL(r.url),u,d,m),s.headers.set("Location",m)}return s}function ny(s,r,n){if(qm(s)){let l=s,d=l.startsWith("//")?new URL(r.protocol+l):new URL(l),m=Hn(d.pathname,n)!=null;if(d.origin===r.origin&&m)return d.pathname+d.search+d.hash}return s}function nc(s,r,n,l){let d=s.createURL(wv(r)).toString(),m={signal:n};if(l&&Mr(l.formMethod)){let{formMethod:u,formEncType:p}=l;m.method=u.toUpperCase(),p==="application/json"?(m.headers=new Headers({"Content-Type":p}),m.body=JSON.stringify(l.json)):p==="text/plain"?m.body=l.text:p==="application/x-www-form-urlencoded"&&l.formData?m.body=px(l.formData):m.body=l.formData}return new Request(d,m)}function px(s){let r=new URLSearchParams;for(let[n,l]of s.entries())r.append(n,typeof l=="string"?l:l.name);return r}function iy(s){let r=new FormData;for(let[n,l]of s.entries())r.append(n,l);return r}function d4(s,r,n,l=!1,d=!1){let m={},u=null,p,g=!1,h={},j=n&&yn(n[1])?n[1].error:void 0;return s.forEach(v=>{if(!(v.route.id in r))return;let w=v.route.id,E=r[w];if(_s(!go(E),"Cannot handle redirect results in processLoaderData"),yn(E)){let A=E.error;if(j!==void 0&&(A=j,j=void 0),u=u||{},d)u[w]=A;else{let P=ql(s,w);u[P.route.id]==null&&(u[P.route.id]=A)}l||(m[w]=gv),g||(g=!0,p=Ld(E.error)?E.error.status:500),E.headers&&(h[w]=E.headers)}else m[w]=E.data,E.statusCode&&E.statusCode!==200&&!g&&(p=E.statusCode),E.headers&&(h[w]=E.headers)}),j!==void 0&&n&&(u={[n[0]]:j},n[2]&&(m[n[2]]=void 0)),{loaderData:m,errors:u,statusCode:p||200,loaderHeaders:h}}function ly(s,r,n,l,d,m){let{loaderData:u,errors:p}=d4(r,n,l);return d.filter(g=>!g.matches||g.matches.some(h=>h.shouldLoad)).forEach(g=>{let{key:h,match:j,controller:v}=g;if(v&&v.signal.aborted)return;let w=m[h];if(_s(w,"Did not find corresponding fetcher result"),yn(w)){let E=ql(s.matches,j==null?void 0:j.route.id);p&&p[E.route.id]||(p={...p,[E.route.id]:w.error}),s.fetchers.delete(h)}else if(go(w))_s(!1,"Unhandled fetcher revalidation redirect");else{let E=ll(w.data);s.fetchers.set(h,E)}}),{loaderData:u,errors:p}}function oy(s,r,n,l){let d=Object.entries(r).filter(([,m])=>m!==gv).reduce((m,[u,p])=>(m[u]=p,m),{});for(let m of n){let u=m.route.id;if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&m.route.loader&&(d[u]=s[u]),l&&l.hasOwnProperty(u))break}return d}function cy(s){return s?yn(s[1])?{actionData:{}}:{actionData:{[s[0]]:s[1].data}}:{}}function ql(s,r){return(r?s.slice(0,s.findIndex(l=>l.route.id===r)+1):[...s]).reverse().find(l=>l.route.hasErrorBoundary===!0)||s[0]}function um(s){let r=s.length===1?s[0]:s.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r}}function $n(s,{pathname:r,routeId:n,method:l,type:d,message:m}={}){let u="Unknown Server Error",p="Unknown @remix-run/router error";return s===400?(u="Bad Request",l&&r&&n?p=`You made a ${l} request to "${r}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:d==="invalid-body"&&(p="Unable to encode submission body")):s===403?(u="Forbidden",p=`Route "${n}" does not match URL "${r}"`):s===404?(u="Not Found",p=`No route matches URL "${r}"`):s===405&&(u="Method Not Allowed",l&&r&&n?p=`You made a ${l.toUpperCase()} request to "${r}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:l&&(p=`Invalid request method "${l.toUpperCase()}"`)),new Hm(s||500,u,new Error(p),!0)}function mm(s){let r=Object.entries(s);for(let n=r.length-1;n>=0;n--){let[l,d]=r[n];if(go(d))return{key:l,result:d}}}function wv(s){let r=typeof s=="string"?Jl(s):s;return Mi({...r,hash:""})}function u4(s,r){return s.pathname!==r.pathname||s.search!==r.search?!1:s.hash===""?r.hash!=="":s.hash===r.hash?!0:r.hash!==""}function m4(s){var r,n;return new Hm(((r=s.init)==null?void 0:r.status)??500,((n=s.init)==null?void 0:n.statusText)??"Internal Server Error",s.data)}function h4(s){return s!=null&&typeof s=="object"&&Object.entries(s).every(([r,n])=>typeof r=="string"&&p4(n))}function p4(s){return s!=null&&typeof s=="object"&&"type"in s&&"result"in s&&(s.type==="data"||s.type==="error")}function x4(s){return Sv(s.result)&&Yw.has(s.result.status)}function yn(s){return s.type==="error"}function go(s){return(s&&s.type)==="redirect"}function dy(s){return typeof s=="object"&&s!=null&&"type"in s&&"data"in s&&"init"in s&&s.type==="DataWithResponseInit"}function Sv(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.headers=="object"&&typeof s.body<"u"}function f4(s){return Qw.has(s.toUpperCase())}function Mr(s){return Hw.has(s.toUpperCase())}function tf(s){return new URLSearchParams(s).getAll("index").some(r=>r==="")}function vm(s,r){let n=typeof r=="string"?Jl(r).search:r.search;if(s[s.length-1].route.index&&tf(n||""))return s[s.length-1];let l=hv(s);return l[l.length-1]}function uy(s){let{formMethod:r,formAction:n,formEncType:l,text:d,formData:m,json:u}=s;if(!(!r||!n||!l)){if(d!=null)return{formMethod:r,formAction:n,formEncType:l,formData:void 0,json:void 0,text:d};if(m!=null)return{formMethod:r,formAction:n,formEncType:l,formData:m,json:void 0,text:void 0};if(u!==void 0)return{formMethod:r,formAction:n,formEncType:l,formData:void 0,json:u,text:void 0}}}function Ip(s,r){return r?{state:"loading",location:s,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}:{state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function g4(s,r){return{state:"submitting",location:s,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}}function vd(s,r){return s?{state:"loading",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:r}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function b4(s,r){return{state:"submitting",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:r?r.data:void 0}}function ll(s){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function y4(s,r){try{let n=s.sessionStorage.getItem(fv);if(n){let l=JSON.parse(n);for(let[d,m]of Object.entries(l||{}))m&&Array.isArray(m)&&r.set(d,new Set(m||[]))}}catch{}}function j4(s,r){if(r.size>0){let n={};for(let[l,d]of r)n[l]=[...d];try{s.sessionStorage.setItem(fv,JSON.stringify(n))}catch(l){La(!1,`Failed to save applied view transitions in sessionStorage (${l}).`)}}}function my(){let s,r,n=new Promise((l,d)=>{s=async m=>{l(m);try{await n}catch{}},r=async m=>{d(m);try{await n}catch{}}});return{promise:n,resolve:s,reject:r}}var Ao=y.createContext(null);Ao.displayName="DataRouter";var Qd=y.createContext(null);Qd.displayName="DataRouterState";y.createContext(!1);var sf=y.createContext({isTransitioning:!1});sf.displayName="ViewTransition";var Cv=y.createContext(new Map);Cv.displayName="Fetchers";var v4=y.createContext(null);v4.displayName="Await";var hi=y.createContext(null);hi.displayName="Navigation";var Gm=y.createContext(null);Gm.displayName="Location";var pi=y.createContext({outlet:null,matches:[],isDataRoute:!1});pi.displayName="Route";var af=y.createContext(null);af.displayName="RouteError";function N4(s,{relative:r}={}){_s(Yd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:l}=y.useContext(hi),{hash:d,pathname:m,search:u}=Wd(s,{relative:r}),p=m;return n!=="/"&&(p=m==="/"?n:Oi([n,m])),l.createHref({pathname:p,search:u,hash:d})}function Yd(){return y.useContext(Gm)!=null}function Gn(){return _s(Yd(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Gm).location}var Av="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ev(s){y.useContext(hi).static||y.useLayoutEffect(s)}function Ha(){let{isDataRoute:s}=y.useContext(pi);return s?L4():w4()}function w4(){_s(Yd(),"useNavigate() may be used only in the context of a <Router> component.");let s=y.useContext(Ao),{basename:r,navigator:n}=y.useContext(hi),{matches:l}=y.useContext(pi),{pathname:d}=Gn(),m=JSON.stringify(Jx(l)),u=y.useRef(!1);return Ev(()=>{u.current=!0}),y.useCallback((g,h={})=>{if(La(u.current,Av),!u.current)return;if(typeof g=="number"){n.go(g);return}let j=Xx(g,JSON.parse(m),d,h.relative==="path");s==null&&r!=="/"&&(j.pathname=j.pathname==="/"?r:Oi([r,j.pathname])),(h.replace?n.replace:n.push)(j,h.state,h)},[r,n,m,d,s])}var S4=y.createContext(null);function C4(s){let r=y.useContext(pi).outlet;return y.useMemo(()=>r&&y.createElement(S4.Provider,{value:s},r),[r,s])}function rf(){let{matches:s}=y.useContext(pi),r=s[s.length-1];return r?r.params:{}}function Wd(s,{relative:r}={}){let{matches:n}=y.useContext(pi),{pathname:l}=Gn(),d=JSON.stringify(Jx(n));return y.useMemo(()=>Xx(s,JSON.parse(d),l,r==="path"),[s,d,l,r])}function A4(s,r,n,l,d){_s(Yd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=y.useContext(hi),{matches:u}=y.useContext(pi),p=u[u.length-1],g=p?p.params:{},h=p?p.pathname:"/",j=p?p.pathnameBase:"/",v=p&&p.route;{let M=v&&v.path||"";Tv(h,!v||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let w=Gn(),E;E=w;let A=E.pathname||"/",P=A;if(j!=="/"){let M=j.replace(/^\//,"").split("/");P="/"+A.replace(/^\//,"").split("/").slice(M.length).join("/")}let q=Vl(s,{pathname:P});return La(v||q!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),La(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),D4(q&&q.map(M=>Object.assign({},M,{params:Object.assign({},g,M.params),pathname:Oi([j,m.encodeLocation?m.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?j:Oi([j,m.encodeLocation?m.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),u,n,l,d)}function E4(){let s=z4(),r=Ld(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,l="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:l},m={padding:"2px 4px",backgroundColor:l},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:m},"ErrorBoundary")," or"," ",y.createElement("code",{style:m},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},r),n?y.createElement("pre",{style:d},n):null,u)}var T4=y.createElement(E4,null),k4=class extends y.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){this.props.onError?this.props.onError(s,r):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?y.createElement(pi.Provider,{value:this.props.routeContext},y.createElement(af.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function P4({routeContext:s,match:r,children:n}){let l=y.useContext(Ao);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(pi.Provider,{value:s},n)}function D4(s,r=[],n=null,l=null,d=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(r.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let m=s,u=n==null?void 0:n.errors;if(u!=null){let j=m.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);_s(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),m=m.slice(0,Math.min(m.length,j+1))}let p=!1,g=-1;if(n)for(let j=0;j<m.length;j++){let v=m[j];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=j),v.route.id){let{loaderData:w,errors:E}=n,A=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!E||E[v.route.id]===void 0);if(v.route.lazy||A){p=!0,g>=0?m=m.slice(0,g+1):m=[m[0]];break}}}let h=n&&l?(j,v)=>{var w,E;l(j,{location:n.location,params:((E=(w=n.matches)==null?void 0:w[0])==null?void 0:E.params)??{},unstable_pattern:Gd(n.matches),errorInfo:v})}:void 0;return m.reduceRight((j,v,w)=>{let E,A=!1,P=null,q=null;n&&(E=u&&v.route.id?u[v.route.id]:void 0,P=v.route.errorElement||T4,p&&(g<0&&w===0?(Tv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,q=null):g===w&&(A=!0,q=v.route.hydrateFallbackElement||null)));let V=r.concat(m.slice(0,w+1)),M=()=>{let R;return E?R=P:A?R=q:v.route.Component?R=y.createElement(v.route.Component,null):v.route.element?R=v.route.element:R=j,y.createElement(P4,{match:v,routeContext:{outlet:j,matches:V,isDataRoute:n!=null},children:R})};return n&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?y.createElement(k4,{location:n.location,revalidation:n.revalidation,component:P,error:E,children:M(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:h}):M()},null)}function nf(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O4(s){let r=y.useContext(Ao);return _s(r,nf(s)),r}function R4(s){let r=y.useContext(Qd);return _s(r,nf(s)),r}function _4(s){let r=y.useContext(pi);return _s(r,nf(s)),r}function lf(s){let r=_4(s),n=r.matches[r.matches.length-1];return _s(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function M4(){return lf("useRouteId")}function z4(){var l;let s=y.useContext(af),r=R4("useRouteError"),n=lf("useRouteError");return s!==void 0?s:(l=r.errors)==null?void 0:l[n]}function L4(){let{router:s}=O4("useNavigate"),r=lf("useNavigate"),n=y.useRef(!1);return Ev(()=>{n.current=!0}),y.useCallback(async(d,m={})=>{La(n.current,Av),n.current&&(typeof d=="number"?await s.navigate(d):await s.navigate(d,{fromRouteId:r,...m}))},[s,r])}var hy={};function Tv(s,r,n){!r&&!hy[s]&&(hy[s]=!0,La(!1,n))}var py={};function xy(s,r){!s&&!py[r]&&(py[r]=!0,console.warn(r))}var $4="useOptimistic",fy=cw[$4],F4=()=>{};function U4(s){return fy?fy(s):[s,F4]}function I4(s){let r={hasErrorBoundary:s.hasErrorBoundary||s.ErrorBoundary!=null||s.errorElement!=null};return s.Component&&(s.element&&La(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(r,{element:y.createElement(s.Component),Component:void 0})),s.HydrateFallback&&(s.hydrateFallbackElement&&La(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(r,{hydrateFallbackElement:y.createElement(s.HydrateFallback),HydrateFallback:void 0})),s.ErrorBoundary&&(s.errorElement&&La(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(r,{errorElement:y.createElement(s.ErrorBoundary),ErrorBoundary:void 0})),r}var B4=["HydrateFallback","hydrateFallbackElement"],V4=class{constructor(){this.status="pending",this.promise=new Promise((s,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",s(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}};function q4({router:s,flushSync:r,unstable_onError:n,unstable_useTransitions:l}){let[d,m]=y.useState(s.state),[u,p]=U4(d),[g,h]=y.useState(),[j,v]=y.useState({isTransitioning:!1}),[w,E]=y.useState(),[A,P]=y.useState(),[q,V]=y.useState(),M=y.useRef(new Map),R=y.useCallback((k,{deletedFetchers:Q,newErrors:W,flushSync:te,viewTransitionOpts:ie})=>{W&&n&&Object.values(W).forEach(Se=>{var $;return n(Se,{location:k.location,params:(($=k.matches[0])==null?void 0:$.params)??{},unstable_pattern:Gd(k.matches)})}),k.fetchers.forEach((Se,$)=>{Se.data!==void 0&&M.current.set($,Se.data)}),Q.forEach(Se=>M.current.delete(Se)),xy(te===!1||r!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let X=s.window!=null&&s.window.document!=null&&typeof s.window.document.startViewTransition=="function";if(xy(ie==null||X,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!ie||!X){r&&te?r(()=>m(k)):l===!1?m(k):y.startTransition(()=>{l===!0&&p(Se=>gy(Se,k)),m(k)});return}if(r&&te){r(()=>{A&&(w==null||w.resolve(),A.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:ie.currentLocation,nextLocation:ie.nextLocation})});let Se=s.window.document.startViewTransition(()=>{r(()=>m(k))});Se.finished.finally(()=>{r(()=>{E(void 0),P(void 0),h(void 0),v({isTransitioning:!1})})}),r(()=>P(Se));return}A?(w==null||w.resolve(),A.skipTransition(),V({state:k,currentLocation:ie.currentLocation,nextLocation:ie.nextLocation})):(h(k),v({isTransitioning:!0,flushSync:!1,currentLocation:ie.currentLocation,nextLocation:ie.nextLocation}))},[s.window,r,A,w,l,p,n]);y.useLayoutEffect(()=>s.subscribe(R),[s,R]),y.useEffect(()=>{j.isTransitioning&&!j.flushSync&&E(new V4)},[j]),y.useEffect(()=>{if(w&&g&&s.window){let k=g,Q=w.promise,W=s.window.document.startViewTransition(async()=>{l===!1?m(k):y.startTransition(()=>{l===!0&&p(te=>gy(te,k)),m(k)}),await Q});W.finished.finally(()=>{E(void 0),P(void 0),h(void 0),v({isTransitioning:!1})}),P(W)}},[g,w,s.window,l,p]),y.useEffect(()=>{w&&g&&u.location.key===g.location.key&&w.resolve()},[w,A,u.location,g]),y.useEffect(()=>{!j.isTransitioning&&q&&(h(q.state),v({isTransitioning:!0,flushSync:!1,currentLocation:q.currentLocation,nextLocation:q.nextLocation}),V(void 0))},[j.isTransitioning,q]);let ae=y.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:k=>s.navigate(k),push:(k,Q,W)=>s.navigate(k,{state:Q,preventScrollReset:W==null?void 0:W.preventScrollReset}),replace:(k,Q,W)=>s.navigate(k,{replace:!0,state:Q,preventScrollReset:W==null?void 0:W.preventScrollReset})}),[s]),H=s.basename||"/",D=y.useMemo(()=>({router:s,navigator:ae,static:!1,basename:H,unstable_onError:n}),[s,ae,H,n]);return y.createElement(y.Fragment,null,y.createElement(Ao.Provider,{value:D},y.createElement(Qd.Provider,{value:u},y.createElement(Cv.Provider,{value:M.current},y.createElement(sf.Provider,{value:j},y.createElement(Y4,{basename:H,location:u.location,navigationType:u.historyAction,navigator:ae,unstable_useTransitions:l===!0},y.createElement(H4,{routes:s.routes,future:s.future,state:u,unstable_onError:n})))))),null)}function gy(s,r){return{...s,navigation:r.navigation.state!=="idle"?r.navigation:s.navigation,revalidation:r.revalidation!=="idle"?r.revalidation:s.revalidation,actionData:r.navigation.state!=="submitting"?r.actionData:s.actionData,fetchers:r.fetchers}}var H4=y.memo(G4);function G4({routes:s,future:r,state:n,unstable_onError:l}){return A4(s,void 0,n,l,r)}function Q4(s){return C4(s.context)}function Y4({basename:s="/",children:r=null,location:n,navigationType:l="POP",navigator:d,static:m=!1,unstable_useTransitions:u}){_s(!Yd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=y.useMemo(()=>({basename:p,navigator:d,static:m,unstable_useTransitions:u,future:{}}),[p,d,m,u]);typeof n=="string"&&(n=Jl(n));let{pathname:h="/",search:j="",hash:v="",state:w=null,key:E="default"}=n,A=y.useMemo(()=>{let P=Hn(h,p);return P==null?null:{location:{pathname:P,search:j,hash:v,state:w,key:E},navigationType:l}},[p,h,j,v,w,E,l]);return La(A!=null,`<Router basename="${p}"> is not able to match the URL "${h}${j}${v}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:y.createElement(hi.Provider,{value:g},y.createElement(Gm.Provider,{children:r,value:A}))}var Nm="get",wm="application/x-www-form-urlencoded";function Qm(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function W4(s){return Qm(s)&&s.tagName.toLowerCase()==="button"}function Z4(s){return Qm(s)&&s.tagName.toLowerCase()==="form"}function K4(s){return Qm(s)&&s.tagName.toLowerCase()==="input"}function J4(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function X4(s,r){return s.button===0&&(!r||r==="_self")&&!J4(s)}function xx(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((r,n)=>{let l=s[n];return r.concat(Array.isArray(l)?l.map(d=>[n,d]):[[n,l]])},[]))}function eS(s,r){let n=xx(s);return r&&r.forEach((l,d)=>{n.has(d)||r.getAll(d).forEach(m=>{n.append(d,m)})}),n}var hm=null;function tS(){if(hm===null)try{new FormData(document.createElement("form"),0),hm=!1}catch{hm=!0}return hm}var sS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bp(s){return s!=null&&!sS.has(s)?(La(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wm}"`),null):s}function aS(s,r){let n,l,d,m,u;if(Z4(s)){let p=s.getAttribute("action");l=p?Hn(p,r):null,n=s.getAttribute("method")||Nm,d=Bp(s.getAttribute("enctype"))||wm,m=new FormData(s)}else if(W4(s)||K4(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(l=g?Hn(g,r):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||Nm,d=Bp(s.getAttribute("formenctype"))||Bp(p.getAttribute("enctype"))||wm,m=new FormData(p,s),!tS()){let{name:h,type:j,value:v}=s;if(j==="image"){let w=h?`${h}.`:"";m.append(`${w}x`,"0"),m.append(`${w}y`,"0")}else h&&m.append(h,v)}}else{if(Qm(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Nm,l=null,d=wm,u=s}return m&&d==="text/plain"&&(u=m,m=void 0),{action:l,method:n.toLowerCase(),encType:d,formData:m,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function of(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function rS(s,r,n){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return l.pathname==="/"?l.pathname=`_root.${n}`:r&&Hn(l.pathname,r)==="/"?l.pathname=`${r.replace(/\/$/,"")}/_root.${n}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${n}`,l}async function nS(s,r){if(s.id in r)return r[s.id];try{let n=await import(s.module);return r[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function lS(s,r,n){let l=await Promise.all(s.map(async d=>{let m=r.routes[d.route.id];if(m){let u=await nS(m,n);return u.links?u.links():[]}return[]}));return uS(l.flat(1).filter(iS).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function by(s,r,n,l,d,m){let u=(g,h)=>n[h]?g.route.id!==n[h].route.id:!0,p=(g,h)=>{var j;return n[h].pathname!==g.pathname||((j=n[h].route.path)==null?void 0:j.endsWith("*"))&&n[h].params["*"]!==g.params["*"]};return m==="assets"?r.filter((g,h)=>u(g,h)||p(g,h)):m==="data"?r.filter((g,h)=>{var v;let j=l.routes[g.route.id];if(!j||!j.hasLoader)return!1;if(u(g,h)||p(g,h))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function oS(s,r,{includeHydrateFallback:n}={}){return cS(s.map(l=>{let d=r.routes[l.route.id];if(!d)return[];let m=[d.module];return d.clientActionModule&&(m=m.concat(d.clientActionModule)),d.clientLoaderModule&&(m=m.concat(d.clientLoaderModule)),n&&d.hydrateFallbackModule&&(m=m.concat(d.hydrateFallbackModule)),d.imports&&(m=m.concat(d.imports)),m}).flat(1))}function cS(s){return[...new Set(s)]}function dS(s){let r={},n=Object.keys(s).sort();for(let l of n)r[l]=s[l];return r}function uS(s,r){let n=new Set;return new Set(r),s.reduce((l,d)=>{let m=JSON.stringify(dS(d));return n.has(m)||(n.add(m),l.push({key:m,link:d})),l},[])}function kv(){let s=y.useContext(Ao);return of(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function mS(){let s=y.useContext(Qd);return of(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var cf=y.createContext(void 0);cf.displayName="FrameworkContext";function Pv(){let s=y.useContext(cf);return of(s,"You must render this element inside a <HydratedRouter> element"),s}function hS(s,r){let n=y.useContext(cf),[l,d]=y.useState(!1),[m,u]=y.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:h,onMouseLeave:j,onTouchStart:v}=r,w=y.useRef(null);y.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let P=V=>{V.forEach(M=>{u(M.isIntersecting)})},q=new IntersectionObserver(P,{threshold:.5});return w.current&&q.observe(w.current),()=>{q.disconnect()}}},[s]),y.useEffect(()=>{if(l){let P=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(P)}}},[l]);let E=()=>{d(!0)},A=()=>{d(!1),u(!1)};return n?s!=="intent"?[m,w,{}]:[m,w,{onFocus:Nd(p,E),onBlur:Nd(g,A),onMouseEnter:Nd(h,E),onMouseLeave:Nd(j,A),onTouchStart:Nd(v,E)}]:[!1,w,{}]}function Nd(s,r){return n=>{s&&s(n),n.defaultPrevented||r(n)}}function pS({page:s,...r}){let{router:n}=kv(),l=y.useMemo(()=>Vl(n.routes,s,n.basename),[n.routes,s,n.basename]);return l?y.createElement(fS,{page:s,matches:l,...r}):null}function xS(s){let{manifest:r,routeModules:n}=Pv(),[l,d]=y.useState([]);return y.useEffect(()=>{let m=!1;return lS(s,r,n).then(u=>{m||d(u)}),()=>{m=!0}},[s,r,n]),l}function fS({page:s,matches:r,...n}){let l=Gn(),{manifest:d,routeModules:m}=Pv(),{basename:u}=kv(),{loaderData:p,matches:g}=mS(),h=y.useMemo(()=>by(s,r,g,d,l,"data"),[s,r,g,d,l]),j=y.useMemo(()=>by(s,r,g,d,l,"assets"),[s,r,g,d,l]),v=y.useMemo(()=>{if(s===l.pathname+l.search+l.hash)return[];let A=new Set,P=!1;if(r.forEach(V=>{var R;let M=d.routes[V.route.id];!M||!M.hasLoader||(!h.some(ae=>ae.route.id===V.route.id)&&V.route.id in p&&((R=m[V.route.id])!=null&&R.shouldRevalidate)||M.hasClientLoader?P=!0:A.add(V.route.id))}),A.size===0)return[];let q=rS(s,u,"data");return P&&A.size>0&&q.searchParams.set("_routes",r.filter(V=>A.has(V.route.id)).map(V=>V.route.id).join(",")),[q.pathname+q.search]},[u,p,l,d,h,r,s,m]),w=y.useMemo(()=>oS(j,d),[j,d]),E=xS(j);return y.createElement(y.Fragment,null,v.map(A=>y.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...n})),w.map(A=>y.createElement("link",{key:A,rel:"modulepreload",href:A,...n})),E.map(({key:A,link:P})=>y.createElement("link",{key:A,nonce:n.nonce,...P})))}function gS(...s){return r=>{s.forEach(n=>{typeof n=="function"?n(r):n!=null&&(n.current=r)})}}var Dv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Dv&&(window.__reactRouterVersion="7.10.1")}catch{}function bS(s,r){return Jw({basename:r==null?void 0:r.basename,getContext:r==null?void 0:r.getContext,future:r==null?void 0:r.future,history:mw({window:r==null?void 0:r.window}),hydrationData:yS(),routes:s,mapRouteProperties:I4,hydrationRouteProperties:B4,dataStrategy:r==null?void 0:r.dataStrategy,patchRoutesOnNavigation:r==null?void 0:r.patchRoutesOnNavigation,window:r==null?void 0:r.window,unstable_instrumentations:r==null?void 0:r.unstable_instrumentations}).initialize()}function yS(){let s=window==null?void 0:window.__staticRouterHydrationData;return s&&s.errors&&(s={...s,errors:jS(s.errors)}),s}function jS(s){if(!s)return null;let r=Object.entries(s),n={};for(let[l,d]of r)if(d&&d.__type==="RouteErrorResponse")n[l]=new Hm(d.status,d.statusText,d.data,d.internal===!0);else if(d&&d.__type==="Error"){if(d.__subType){let m=window[d.__subType];if(typeof m=="function")try{let u=new m(d.message);u.stack="",n[l]=u}catch{}}if(n[l]==null){let m=new Error(d.message);m.stack="",n[l]=m}}else n[l]=d;return n}var Ov=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ps=y.forwardRef(function({onClick:r,discover:n="render",prefetch:l="none",relative:d,reloadDocument:m,replace:u,state:p,target:g,to:h,preventScrollReset:j,viewTransition:v,...w},E){let{basename:A,unstable_useTransitions:P}=y.useContext(hi),q=typeof h=="string"&&Ov.test(h),V,M=!1;if(typeof h=="string"&&q&&(V=h,Dv))try{let te=new URL(window.location.href),ie=h.startsWith("//")?new URL(te.protocol+h):new URL(h),X=Hn(ie.pathname,A);ie.origin===te.origin&&X!=null?h=X+ie.search+ie.hash:M=!0}catch{La(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=N4(h,{relative:d}),[ae,H,D]=hS(l,w),k=SS(h,{replace:u,state:p,target:g,preventScrollReset:j,relative:d,viewTransition:v,unstable_useTransitions:P});function Q(te){r&&r(te),te.defaultPrevented||k(te)}let W=y.createElement("a",{...w,...D,href:V||R,onClick:M||m?r:Q,ref:gS(E,H),target:g,"data-discover":!q&&n==="render"?"true":void 0});return ae&&!q?y.createElement(y.Fragment,null,W,y.createElement(pS,{page:R})):W});Ps.displayName="Link";var vS=y.forwardRef(function({"aria-current":r="page",caseSensitive:n=!1,className:l="",end:d=!1,style:m,to:u,viewTransition:p,children:g,...h},j){let v=Wd(u,{relative:h.relative}),w=Gn(),E=y.useContext(Qd),{navigator:A,basename:P}=y.useContext(hi),q=E!=null&&kS(v)&&p===!0,V=A.encodeLocation?A.encodeLocation(v).pathname:v.pathname,M=w.pathname,R=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(M=M.toLowerCase(),R=R?R.toLowerCase():null,V=V.toLowerCase()),R&&P&&(R=Hn(R,P)||R);const ae=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let H=M===V||!d&&M.startsWith(V)&&M.charAt(ae)==="/",D=R!=null&&(R===V||!d&&R.startsWith(V)&&R.charAt(V.length)==="/"),k={isActive:H,isPending:D,isTransitioning:q},Q=H?r:void 0,W;typeof l=="function"?W=l(k):W=[l,H?"active":null,D?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let te=typeof m=="function"?m(k):m;return y.createElement(Ps,{...h,"aria-current":Q,className:W,ref:j,style:te,to:u,viewTransition:p},typeof g=="function"?g(k):g)});vS.displayName="NavLink";var NS=y.forwardRef(({discover:s="render",fetcherKey:r,navigate:n,reloadDocument:l,replace:d,state:m,method:u=Nm,action:p,onSubmit:g,relative:h,preventScrollReset:j,viewTransition:v,...w},E)=>{let{unstable_useTransitions:A}=y.useContext(hi),P=ES(),q=TS(p,{relative:h}),V=u.toLowerCase()==="get"?"get":"post",M=typeof p=="string"&&Ov.test(p),R=ae=>{if(g&&g(ae),ae.defaultPrevented)return;ae.preventDefault();let H=ae.nativeEvent.submitter,D=(H==null?void 0:H.getAttribute("formmethod"))||u,k=()=>P(H||ae.currentTarget,{fetcherKey:r,method:D,navigate:n,replace:d,state:m,relative:h,preventScrollReset:j,viewTransition:v});A&&n!==!1?y.startTransition(()=>k()):k()};return y.createElement("form",{ref:E,method:V,action:q,onSubmit:l?g:R,...w,"data-discover":!M&&s==="render"?"true":void 0})});NS.displayName="Form";function wS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rv(s){let r=y.useContext(Ao);return _s(r,wS(s)),r}function SS(s,{target:r,replace:n,state:l,preventScrollReset:d,relative:m,viewTransition:u,unstable_useTransitions:p}={}){let g=Ha(),h=Gn(),j=Wd(s,{relative:m});return y.useCallback(v=>{if(X4(v,r)){v.preventDefault();let w=n!==void 0?n:Mi(h)===Mi(j),E=()=>g(s,{replace:w,state:l,preventScrollReset:d,relative:m,viewTransition:u});p?y.startTransition(()=>E()):E()}},[h,g,j,n,l,r,s,d,m,u,p])}function _v(s){La(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=y.useRef(xx(s)),n=y.useRef(!1),l=Gn(),d=y.useMemo(()=>eS(l.search,n.current?null:r.current),[l.search]),m=Ha(),u=y.useCallback((p,g)=>{const h=xx(typeof p=="function"?p(new URLSearchParams(d)):p);n.current=!0,m("?"+h,g)},[m,d]);return[d,u]}var CS=0,AS=()=>`__${String(++CS)}__`;function ES(){let{router:s}=Rv("useSubmit"),{basename:r}=y.useContext(hi),n=M4(),l=s.fetch,d=s.navigate;return y.useCallback(async(m,u={})=>{let{action:p,method:g,encType:h,formData:j,body:v}=aS(m,r);if(u.navigate===!1){let w=u.fetcherKey||AS();await l(w,n,u.action||p,{preventScrollReset:u.preventScrollReset,formData:j,body:v,formMethod:u.method||g,formEncType:u.encType||h,flushSync:u.flushSync})}else await d(u.action||p,{preventScrollReset:u.preventScrollReset,formData:j,body:v,formMethod:u.method||g,formEncType:u.encType||h,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[l,d,r,n])}function TS(s,{relative:r}={}){let{basename:n}=y.useContext(hi),l=y.useContext(pi);_s(l,"useFormAction must be used inside a RouteContext");let[d]=l.matches.slice(-1),m={...Wd(s||".",{relative:r})},u=Gn();if(s==null){m.search=u.search;let p=new URLSearchParams(m.search),g=p.getAll("index");if(g.some(j=>j==="")){p.delete("index"),g.filter(v=>v).forEach(v=>p.append("index",v));let j=p.toString();m.search=j?`?${j}`:""}}return(!s||s===".")&&d.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(m.pathname=m.pathname==="/"?n:Oi([n,m.pathname])),Mi(m)}function kS(s,{relative:r}={}){let n=y.useContext(sf);_s(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Rv("useViewTransitionState"),d=Wd(s,{relative:r});if(!n.isTransitioning)return!1;let m=Hn(n.currentLocation.pathname,l)||n.currentLocation.pathname,u=Hn(n.nextLocation.pathname,l)||n.nextLocation.pathname;return Rm(d.pathname,u)!=null||Rm(d.pathname,m)!=null}var PS=ov();function yy(s){return y.createElement(q4,{flushSync:PS.flushSync,...s})}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,l)=>l?l.toUpperCase():n.toLowerCase()),jy=s=>{const r=OS(s);return r.charAt(0).toUpperCase()+r.slice(1)},Mv=(...s)=>s.filter((r,n,l)=>!!r&&r.trim()!==""&&l.indexOf(r)===n).join(" ").trim(),RS=s=>{for(const r in s)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _S={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=y.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:m,iconNode:u,...p},g)=>y.createElement("svg",{ref:g,..._S,width:r,height:r,stroke:s,strokeWidth:l?Number(n)*24/Number(r):n,className:Mv("lucide",d),...!m&&!RS(p)&&{"aria-hidden":"true"},...p},[...u.map(([h,j])=>y.createElement(h,j)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(s,r)=>{const n=y.forwardRef(({className:l,...d},m)=>y.createElement(MS,{ref:m,iconNode:r,className:Mv(`lucide-${DS(jy(s))}`,`lucide-${s}`,l),...d}));return n.displayName=jy(s),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yc=dt("arrow-left",zS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],$r=dt("arrow-right",LS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],FS=dt("badge-check",$S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vy=dt("ban",US);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],BS=dt("bell",IS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Vp=dt("book",VS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],zv=dt("box",qS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],$d=dt("briefcase",HS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Fn=dt("building-2",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],So=dt("calendar",QS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Va=dt("check",YS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ym=dt("chevron-down",WS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Wl=dt("chevron-left",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xa=dt("chevron-right",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xs=dt("circle-alert",JS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],va=dt("circle-check-big",XS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ui=dt("circle-check",e5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fx=dt("circle-question-mark",t5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ol=dt("circle-x",s5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],r5=dt("circle",a5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tn=dt("clock",n5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],l5=dt("compass",i5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],df=dt("copy",o5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Vn=dt("credit-card",c5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],lc=dt("dollar-sign",d5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ki=dt("download",u5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],h5=dt("eye-off",m5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zr=dt("eye",p5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],f5=dt("facebook",x5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],gx=dt("file-check",g5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],Ny=dt("file-image",b5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],wr=dt("file-text",y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],v5=dt("file",j5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],w5=dt("flag",N5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],qp=dt("folder-plus",S5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Lv=dt("funnel",C5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],wy=dt("globe",A5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],T5=dt("hash",E5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],P5=dt("heart",k5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],$v=dt("house",D5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Pi=dt("image",O5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_r=dt("info",R5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],M5=dt("instagram",_5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],uf=dt("layers",z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],$5=dt("linkedin",L5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fv=dt("loader-circle",F5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Jt=dt("loader",U5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Hp=dt("log-in",I5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jc=dt("lock",B5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Sy=dt("log-out",V5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ql=dt("mail",q5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],sn=dt("map-pin",H5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],Q5=dt("map-pinned",G5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],W5=dt("menu",Y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ia=dt("package",Z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],J5=dt("palette",K5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],bx=dt("pause",X5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],t3=dt("pen-line",e3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Fd=dt("pen",s3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],fc=dt("phone",a3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],bo=dt("play",r3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zs=dt("plus",n3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Uv=dt("printer",i3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],zi=dt("refresh-cw",l3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Cy=dt("ruler",o3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vc=dt("save",c3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],u3=dt("scissors",d3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],h3=dt("scroll-text",m3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],an=dt("search",p3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],f3=dt("send",x3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Rr=dt("settings",g3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],y3=dt("shield-check",b3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Co=dt("shield",j3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Ay=dt("shopping-bag",v3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],w3=dt("sparkles",N3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],zn=dt("square-pen",S3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Pd=dt("square",C3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],mi=dt("star",A3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],T3=dt("sticker",E3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],mf=dt("tag",k3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],D3=dt("target",P3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ra=dt("trash-2",O3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],_3=dt("trending-up",R3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vo=dt("triangle-alert",M3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Yl=dt("truck",z3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],$3=dt("twitter",L3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],oc=dt("upload",F3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ed=dt("user-plus",U3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],In=dt("user",I3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Il=dt("users",B3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ss=dt("x",V3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],H3=dt("zap",q3);class G3 extends y.Component{constructor(r){super(r),this.props=r,this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx(Q3,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children||null}}const Q3=({error:s,errorInfo:r})=>e.jsx(Y3,{error:s,errorInfo:r}),Y3=({error:s,errorInfo:r})=>{const n=Ha(),l=()=>{n("/"),window.location.reload()},d=()=>{window.location.reload()};return e.jsx("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-lg border border-cream-200 p-8",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(vo,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-cream-600 mb-6",children:"We encountered an unexpected error. Please try refreshing the page or return to the home page."}),s&&!1,e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors font-medium",children:[e.jsx(zi,{className:"w-4 h-4"}),"Refresh Page"]}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-cream-100 text-cream-700 rounded-lg hover:bg-cream-200 transition-colors font-medium",children:[e.jsx($v,{className:"w-4 h-4"}),"Go Home"]})]})]})})})},aa=s=>e.jsx(G3,{...s}),W3="modulepreload",Z3=function(s){return"/"+s},Ey={},Zd=function(r,n,l){let d=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(j=>Promise.resolve(j).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));d=u(n.map(h=>{if(h=Z3(h),h in Ey)return;Ey[h]=!0;const j=h.endsWith(".css"),v=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const w=document.createElement("link");if(w.rel=j?"stylesheet":W3,j||(w.as="script"),w.crossOrigin="",w.href=h,g&&w.setAttribute("nonce",g),document.head.appendChild(w),j)return new Promise((E,A)=>{w.addEventListener("load",E),w.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function m(u){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=u,window.dispatchEvent(p),!p.defaultPrevented)throw u}return d.then(u=>{for(const p of u||[])p.status==="rejected"&&m(p.reason);return r().catch(m)})},hf=y.createContext({});function pf(s){const r=y.useRef(null);return r.current===null&&(r.current=s()),r.current}const xf=typeof window<"u",Iv=xf?y.useLayoutEffect:y.useEffect,Wm=y.createContext(null);function ff(s,r){s.indexOf(r)===-1&&s.push(r)}function gf(s,r){const n=s.indexOf(r);n>-1&&s.splice(n,1)}const cl=(s,r,n)=>n>r?r:n<s?s:n;let bf=()=>{};const dl={},Bv=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function Vv(s){return typeof s=="object"&&s!==null}const qv=s=>/^0[^.\s]+$/u.test(s);function yf(s){let r;return()=>(r===void 0&&(r=s()),r)}const qn=s=>s,K3=(s,r)=>n=>r(s(n)),Kd=(...s)=>s.reduce(K3),Ud=(s,r,n)=>{const l=r-s;return l===0?1:(n-s)/l};class jf{constructor(){this.subscriptions=[]}add(r){return ff(this.subscriptions,r),()=>gf(this.subscriptions,r)}notify(r,n,l){const d=this.subscriptions.length;if(d)if(d===1)this.subscriptions[0](r,n,l);else for(let m=0;m<d;m++){const u=this.subscriptions[m];u&&u(r,n,l)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ri=s=>s*1e3,Bn=s=>s/1e3;function Hv(s,r){return r?s*(1e3/r):0}const Gv=(s,r,n)=>(((1-3*n+3*r)*s+(3*n-6*r))*s+3*r)*s,J3=1e-7,X3=12;function e6(s,r,n,l,d){let m,u,p=0;do u=r+(n-r)/2,m=Gv(u,l,d)-s,m>0?n=u:r=u;while(Math.abs(m)>J3&&++p<X3);return u}function Jd(s,r,n,l){if(s===r&&n===l)return qn;const d=m=>e6(m,0,1,s,n);return m=>m===0||m===1?m:Gv(d(m),r,l)}const Qv=s=>r=>r<=.5?s(2*r)/2:(2-s(2*(1-r)))/2,Yv=s=>r=>1-s(1-r),Wv=Jd(.33,1.53,.69,.99),vf=Yv(Wv),Zv=Qv(vf),Kv=s=>(s*=2)<1?.5*vf(s):.5*(2-Math.pow(2,-10*(s-1))),Nf=s=>1-Math.sin(Math.acos(s)),Jv=Yv(Nf),Xv=Qv(Nf),t6=Jd(.42,0,1,1),s6=Jd(0,0,.58,1),eN=Jd(.42,0,.58,1),a6=s=>Array.isArray(s)&&typeof s[0]!="number",tN=s=>Array.isArray(s)&&typeof s[0]=="number",r6={linear:qn,easeIn:t6,easeInOut:eN,easeOut:s6,circIn:Nf,circInOut:Xv,circOut:Jv,backIn:vf,backInOut:Zv,backOut:Wv,anticipate:Kv},n6=s=>typeof s=="string",Ty=s=>{if(tN(s)){bf(s.length===4);const[r,n,l,d]=s;return Jd(r,n,l,d)}else if(n6(s))return r6[s];return s},pm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function i6(s,r){let n=new Set,l=new Set,d=!1,m=!1;const u=new WeakSet;let p={delta:0,timestamp:0,isProcessing:!1};function g(j){u.has(j)&&(h.schedule(j),s()),j(p)}const h={schedule:(j,v=!1,w=!1)=>{const A=w&&d?n:l;return v&&u.add(j),A.has(j)||A.add(j),j},cancel:j=>{l.delete(j),u.delete(j)},process:j=>{if(p=j,d){m=!0;return}d=!0,[n,l]=[l,n],n.forEach(g),n.clear(),d=!1,m&&(m=!1,h.process(j))}};return h}const l6=40;function sN(s,r){let n=!1,l=!0;const d={delta:0,timestamp:0,isProcessing:!1},m=()=>n=!0,u=pm.reduce((R,ae)=>(R[ae]=i6(m),R),{}),{setup:p,read:g,resolveKeyframes:h,preUpdate:j,update:v,preRender:w,render:E,postRender:A}=u,P=()=>{const R=dl.useManualTiming?d.timestamp:performance.now();n=!1,dl.useManualTiming||(d.delta=l?1e3/60:Math.max(Math.min(R-d.timestamp,l6),1)),d.timestamp=R,d.isProcessing=!0,p.process(d),g.process(d),h.process(d),j.process(d),v.process(d),w.process(d),E.process(d),A.process(d),d.isProcessing=!1,n&&r&&(l=!1,s(P))},q=()=>{n=!0,l=!0,d.isProcessing||s(P)};return{schedule:pm.reduce((R,ae)=>{const H=u[ae];return R[ae]=(D,k=!1,Q=!1)=>(n||q(),H.schedule(D,k,Q)),R},{}),cancel:R=>{for(let ae=0;ae<pm.length;ae++)u[pm[ae]].cancel(R)},state:d,steps:u}}const{schedule:Pa,cancel:Zl,state:br,steps:Gp}=sN(typeof requestAnimationFrame<"u"?requestAnimationFrame:qn,!0);let Sm;function o6(){Sm=void 0}const rn={now:()=>(Sm===void 0&&rn.set(br.isProcessing||dl.useManualTiming?br.timestamp:performance.now()),Sm),set:s=>{Sm=s,queueMicrotask(o6)}},aN=s=>r=>typeof r=="string"&&r.startsWith(s),rN=aN("--"),c6=aN("var(--"),wf=s=>c6(s)?d6.test(s.split("/*")[0].trim()):!1,d6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sc={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Id={...Sc,transform:s=>cl(0,1,s)},xm={...Sc,default:1},Dd=s=>Math.round(s*1e5)/1e5,Sf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function u6(s){return s==null}const m6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cf=(s,r)=>n=>!!(typeof n=="string"&&m6.test(n)&&n.startsWith(s)||r&&!u6(n)&&Object.prototype.hasOwnProperty.call(n,r)),nN=(s,r,n)=>l=>{if(typeof l!="string")return l;const[d,m,u,p]=l.match(Sf);return{[s]:parseFloat(d),[r]:parseFloat(m),[n]:parseFloat(u),alpha:p!==void 0?parseFloat(p):1}},h6=s=>cl(0,255,s),Qp={...Sc,transform:s=>Math.round(h6(s))},yo={test:Cf("rgb","red"),parse:nN("red","green","blue"),transform:({red:s,green:r,blue:n,alpha:l=1})=>"rgba("+Qp.transform(s)+", "+Qp.transform(r)+", "+Qp.transform(n)+", "+Dd(Id.transform(l))+")"};function p6(s){let r="",n="",l="",d="";return s.length>5?(r=s.substring(1,3),n=s.substring(3,5),l=s.substring(5,7),d=s.substring(7,9)):(r=s.substring(1,2),n=s.substring(2,3),l=s.substring(3,4),d=s.substring(4,5),r+=r,n+=n,l+=l,d+=d),{red:parseInt(r,16),green:parseInt(n,16),blue:parseInt(l,16),alpha:d?parseInt(d,16)/255:1}}const yx={test:Cf("#"),parse:p6,transform:yo.transform},Xd=s=>({test:r=>typeof r=="string"&&r.endsWith(s)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${s}`}),Ul=Xd("deg"),_i=Xd("%"),us=Xd("px"),x6=Xd("vh"),f6=Xd("vw"),ky={..._i,parse:s=>_i.parse(s)/100,transform:s=>_i.transform(s*100)},cc={test:Cf("hsl","hue"),parse:nN("hue","saturation","lightness"),transform:({hue:s,saturation:r,lightness:n,alpha:l=1})=>"hsla("+Math.round(s)+", "+_i.transform(Dd(r))+", "+_i.transform(Dd(n))+", "+Dd(Id.transform(l))+")"},Ka={test:s=>yo.test(s)||yx.test(s)||cc.test(s),parse:s=>yo.test(s)?yo.parse(s):cc.test(s)?cc.parse(s):yx.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?yo.transform(s):cc.transform(s),getAnimatableNone:s=>{const r=Ka.parse(s);return r.alpha=0,Ka.transform(r)}},g6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function b6(s){var r,n;return isNaN(s)&&typeof s=="string"&&(((r=s.match(Sf))==null?void 0:r.length)||0)+(((n=s.match(g6))==null?void 0:n.length)||0)>0}const iN="number",lN="color",y6="var",j6="var(",Py="${}",v6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bd(s){const r=s.toString(),n=[],l={color:[],number:[],var:[]},d=[];let m=0;const p=r.replace(v6,g=>(Ka.test(g)?(l.color.push(m),d.push(lN),n.push(Ka.parse(g))):g.startsWith(j6)?(l.var.push(m),d.push(y6),n.push(g)):(l.number.push(m),d.push(iN),n.push(parseFloat(g))),++m,Py)).split(Py);return{values:n,split:p,indexes:l,types:d}}function oN(s){return Bd(s).values}function cN(s){const{split:r,types:n}=Bd(s),l=r.length;return d=>{let m="";for(let u=0;u<l;u++)if(m+=r[u],d[u]!==void 0){const p=n[u];p===iN?m+=Dd(d[u]):p===lN?m+=Ka.transform(d[u]):m+=d[u]}return m}}const N6=s=>typeof s=="number"?0:Ka.test(s)?Ka.getAnimatableNone(s):s;function w6(s){const r=oN(s);return cN(s)(r.map(N6))}const Kl={test:b6,parse:oN,createTransformer:cN,getAnimatableNone:w6};function Yp(s,r,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?s+(r-s)*6*n:n<1/2?r:n<2/3?s+(r-s)*(2/3-n)*6:s}function S6({hue:s,saturation:r,lightness:n,alpha:l}){s/=360,r/=100,n/=100;let d=0,m=0,u=0;if(!r)d=m=u=n;else{const p=n<.5?n*(1+r):n+r-n*r,g=2*n-p;d=Yp(g,p,s+1/3),m=Yp(g,p,s),u=Yp(g,p,s-1/3)}return{red:Math.round(d*255),green:Math.round(m*255),blue:Math.round(u*255),alpha:l}}function Mm(s,r){return n=>n>0?r:s}const Oa=(s,r,n)=>s+(r-s)*n,Wp=(s,r,n)=>{const l=s*s,d=n*(r*r-l)+l;return d<0?0:Math.sqrt(d)},C6=[yx,yo,cc],A6=s=>C6.find(r=>r.test(s));function Dy(s){const r=A6(s);if(!r)return!1;let n=r.parse(s);return r===cc&&(n=S6(n)),n}const Oy=(s,r)=>{const n=Dy(s),l=Dy(r);if(!n||!l)return Mm(s,r);const d={...n};return m=>(d.red=Wp(n.red,l.red,m),d.green=Wp(n.green,l.green,m),d.blue=Wp(n.blue,l.blue,m),d.alpha=Oa(n.alpha,l.alpha,m),yo.transform(d))},jx=new Set(["none","hidden"]);function E6(s,r){return jx.has(s)?n=>n<=0?s:r:n=>n>=1?r:s}function T6(s,r){return n=>Oa(s,r,n)}function Af(s){return typeof s=="number"?T6:typeof s=="string"?wf(s)?Mm:Ka.test(s)?Oy:D6:Array.isArray(s)?dN:typeof s=="object"?Ka.test(s)?Oy:k6:Mm}function dN(s,r){const n=[...s],l=n.length,d=s.map((m,u)=>Af(m)(m,r[u]));return m=>{for(let u=0;u<l;u++)n[u]=d[u](m);return n}}function k6(s,r){const n={...s,...r},l={};for(const d in n)s[d]!==void 0&&r[d]!==void 0&&(l[d]=Af(s[d])(s[d],r[d]));return d=>{for(const m in l)n[m]=l[m](d);return n}}function P6(s,r){const n=[],l={color:0,var:0,number:0};for(let d=0;d<r.values.length;d++){const m=r.types[d],u=s.indexes[m][l[m]],p=s.values[u]??0;n[d]=p,l[m]++}return n}const D6=(s,r)=>{const n=Kl.createTransformer(r),l=Bd(s),d=Bd(r);return l.indexes.var.length===d.indexes.var.length&&l.indexes.color.length===d.indexes.color.length&&l.indexes.number.length>=d.indexes.number.length?jx.has(s)&&!d.values.length||jx.has(r)&&!l.values.length?E6(s,r):Kd(dN(P6(l,d),d.values),n):Mm(s,r)};function uN(s,r,n){return typeof s=="number"&&typeof r=="number"&&typeof n=="number"?Oa(s,r,n):Af(s)(s,r)}const O6=s=>{const r=({timestamp:n})=>s(n);return{start:(n=!0)=>Pa.update(r,n),stop:()=>Zl(r),now:()=>br.isProcessing?br.timestamp:rn.now()}},mN=(s,r,n=10)=>{let l="";const d=Math.max(Math.round(r/n),2);for(let m=0;m<d;m++)l+=Math.round(s(m/(d-1))*1e4)/1e4+", ";return`linear(${l.substring(0,l.length-2)})`},zm=2e4;function Ef(s){let r=0;const n=50;let l=s.next(r);for(;!l.done&&r<zm;)r+=n,l=s.next(r);return r>=zm?1/0:r}function R6(s,r=100,n){const l=n({...s,keyframes:[0,r]}),d=Math.min(Ef(l),zm);return{type:"keyframes",ease:m=>l.next(d*m).value/r,duration:Bn(d)}}const _6=5;function hN(s,r,n){const l=Math.max(r-_6,0);return Hv(n-s(l),r-l)}const za={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Zp=.001;function M6({duration:s=za.duration,bounce:r=za.bounce,velocity:n=za.velocity,mass:l=za.mass}){let d,m,u=1-r;u=cl(za.minDamping,za.maxDamping,u),s=cl(za.minDuration,za.maxDuration,Bn(s)),u<1?(d=h=>{const j=h*u,v=j*s,w=j-n,E=vx(h,u),A=Math.exp(-v);return Zp-w/E*A},m=h=>{const v=h*u*s,w=v*n+n,E=Math.pow(u,2)*Math.pow(h,2)*s,A=Math.exp(-v),P=vx(Math.pow(h,2),u);return(-d(h)+Zp>0?-1:1)*((w-E)*A)/P}):(d=h=>{const j=Math.exp(-h*s),v=(h-n)*s+1;return-Zp+j*v},m=h=>{const j=Math.exp(-h*s),v=(n-h)*(s*s);return j*v});const p=5/s,g=L6(d,m,p);if(s=Ri(s),isNaN(g))return{stiffness:za.stiffness,damping:za.damping,duration:s};{const h=Math.pow(g,2)*l;return{stiffness:h,damping:u*2*Math.sqrt(l*h),duration:s}}}const z6=12;function L6(s,r,n){let l=n;for(let d=1;d<z6;d++)l=l-s(l)/r(l);return l}function vx(s,r){return s*Math.sqrt(1-r*r)}const $6=["duration","bounce"],F6=["stiffness","damping","mass"];function Ry(s,r){return r.some(n=>s[n]!==void 0)}function U6(s){let r={velocity:za.velocity,stiffness:za.stiffness,damping:za.damping,mass:za.mass,isResolvedFromDuration:!1,...s};if(!Ry(s,F6)&&Ry(s,$6))if(s.visualDuration){const n=s.visualDuration,l=2*Math.PI/(n*1.2),d=l*l,m=2*cl(.05,1,1-(s.bounce||0))*Math.sqrt(d);r={...r,mass:za.mass,stiffness:d,damping:m}}else{const n=M6(s);r={...r,...n,mass:za.mass},r.isResolvedFromDuration=!0}return r}function Lm(s=za.visualDuration,r=za.bounce){const n=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:r}:s;let{restSpeed:l,restDelta:d}=n;const m=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],p={done:!1,value:m},{stiffness:g,damping:h,mass:j,duration:v,velocity:w,isResolvedFromDuration:E}=U6({...n,velocity:-Bn(n.velocity||0)}),A=w||0,P=h/(2*Math.sqrt(g*j)),q=u-m,V=Bn(Math.sqrt(g/j)),M=Math.abs(q)<5;l||(l=M?za.restSpeed.granular:za.restSpeed.default),d||(d=M?za.restDelta.granular:za.restDelta.default);let R;if(P<1){const H=vx(V,P);R=D=>{const k=Math.exp(-P*V*D);return u-k*((A+P*V*q)/H*Math.sin(H*D)+q*Math.cos(H*D))}}else if(P===1)R=H=>u-Math.exp(-V*H)*(q+(A+V*q)*H);else{const H=V*Math.sqrt(P*P-1);R=D=>{const k=Math.exp(-P*V*D),Q=Math.min(H*D,300);return u-k*((A+P*V*q)*Math.sinh(Q)+H*q*Math.cosh(Q))/H}}const ae={calculatedDuration:E&&v||null,next:H=>{const D=R(H);if(E)p.done=H>=v;else{let k=H===0?A:0;P<1&&(k=H===0?Ri(A):hN(R,H,D));const Q=Math.abs(k)<=l,W=Math.abs(u-D)<=d;p.done=Q&&W}return p.value=p.done?u:D,p},toString:()=>{const H=Math.min(Ef(ae),zm),D=mN(k=>ae.next(H*k).value,H,30);return H+"ms "+D},toTransition:()=>{}};return ae}Lm.applyToOptions=s=>{const r=R6(s,100,Lm);return s.ease=r.ease,s.duration=Ri(r.duration),s.type="keyframes",s};function Nx({keyframes:s,velocity:r=0,power:n=.8,timeConstant:l=325,bounceDamping:d=10,bounceStiffness:m=500,modifyTarget:u,min:p,max:g,restDelta:h=.5,restSpeed:j}){const v=s[0],w={done:!1,value:v},E=Q=>p!==void 0&&Q<p||g!==void 0&&Q>g,A=Q=>p===void 0?g:g===void 0||Math.abs(p-Q)<Math.abs(g-Q)?p:g;let P=n*r;const q=v+P,V=u===void 0?q:u(q);V!==q&&(P=V-v);const M=Q=>-P*Math.exp(-Q/l),R=Q=>V+M(Q),ae=Q=>{const W=M(Q),te=R(Q);w.done=Math.abs(W)<=h,w.value=w.done?V:te};let H,D;const k=Q=>{E(w.value)&&(H=Q,D=Lm({keyframes:[w.value,A(w.value)],velocity:hN(R,Q,w.value),damping:d,stiffness:m,restDelta:h,restSpeed:j}))};return k(0),{calculatedDuration:null,next:Q=>{let W=!1;return!D&&H===void 0&&(W=!0,ae(Q),k(Q)),H!==void 0&&Q>=H?D.next(Q-H):(!W&&ae(Q),w)}}}function I6(s,r,n){const l=[],d=n||dl.mix||uN,m=s.length-1;for(let u=0;u<m;u++){let p=d(s[u],s[u+1]);if(r){const g=Array.isArray(r)?r[u]||qn:r;p=Kd(g,p)}l.push(p)}return l}function B6(s,r,{clamp:n=!0,ease:l,mixer:d}={}){const m=s.length;if(bf(m===r.length),m===1)return()=>r[0];if(m===2&&r[0]===r[1])return()=>r[1];const u=s[0]===s[1];s[0]>s[m-1]&&(s=[...s].reverse(),r=[...r].reverse());const p=I6(r,l,d),g=p.length,h=j=>{if(u&&j<s[0])return r[0];let v=0;if(g>1)for(;v<s.length-2&&!(j<s[v+1]);v++);const w=Ud(s[v],s[v+1],j);return p[v](w)};return n?j=>h(cl(s[0],s[m-1],j)):h}function V6(s,r){const n=s[s.length-1];for(let l=1;l<=r;l++){const d=Ud(0,r,l);s.push(Oa(n,1,d))}}function q6(s){const r=[0];return V6(r,s.length-1),r}function H6(s,r){return s.map(n=>n*r)}function G6(s,r){return s.map(()=>r||eN).splice(0,s.length-1)}function Od({duration:s=300,keyframes:r,times:n,ease:l="easeInOut"}){const d=a6(l)?l.map(Ty):Ty(l),m={done:!1,value:r[0]},u=H6(n&&n.length===r.length?n:q6(r),s),p=B6(u,r,{ease:Array.isArray(d)?d:G6(r,d)});return{calculatedDuration:s,next:g=>(m.value=p(g),m.done=g>=s,m)}}const Q6=s=>s!==null;function Tf(s,{repeat:r,repeatType:n="loop"},l,d=1){const m=s.filter(Q6),p=d<0||r&&n!=="loop"&&r%2===1?0:m.length-1;return!p||l===void 0?m[p]:l}const Y6={decay:Nx,inertia:Nx,tween:Od,keyframes:Od,spring:Lm};function pN(s){typeof s.type=="string"&&(s.type=Y6[s.type])}class kf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(r=>{this.resolve=r})}notifyFinished(){this.resolve()}then(r,n){return this.finished.then(r,n)}}const W6=s=>s/100;class Pf extends kf{constructor(r){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var l,d;const{motionValue:n}=this.options;n&&n.updatedAt!==rn.now()&&this.tick(rn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(d=(l=this.options).onStop)==null||d.call(l))},this.options=r,this.initAnimation(),this.play(),r.autoplay===!1&&this.pause()}initAnimation(){const{options:r}=this;pN(r);const{type:n=Od,repeat:l=0,repeatDelay:d=0,repeatType:m,velocity:u=0}=r;let{keyframes:p}=r;const g=n||Od;g!==Od&&typeof p[0]!="number"&&(this.mixKeyframes=Kd(W6,uN(p[0],p[1])),p=[0,100]);const h=g({...r,keyframes:p});m==="mirror"&&(this.mirroredGenerator=g({...r,keyframes:[...p].reverse(),velocity:-u})),h.calculatedDuration===null&&(h.calculatedDuration=Ef(h));const{calculatedDuration:j}=h;this.calculatedDuration=j,this.resolvedDuration=j+d,this.totalDuration=this.resolvedDuration*(l+1)-d,this.generator=h}updateTime(r){const n=Math.round(r-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(r,n=!1){const{generator:l,totalDuration:d,mixKeyframes:m,mirroredGenerator:u,resolvedDuration:p,calculatedDuration:g}=this;if(this.startTime===null)return l.next(0);const{delay:h=0,keyframes:j,repeat:v,repeatType:w,repeatDelay:E,type:A,onUpdate:P,finalKeyframe:q}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,r):this.speed<0&&(this.startTime=Math.min(r-d/this.speed,this.startTime)),n?this.currentTime=r:this.updateTime(r);const V=this.currentTime-h*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?V<0:V>d;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let R=this.currentTime,ae=l;if(v){const Q=Math.min(this.currentTime,d)/p;let W=Math.floor(Q),te=Q%1;!te&&Q>=1&&(te=1),te===1&&W--,W=Math.min(W,v+1),!!(W%2)&&(w==="reverse"?(te=1-te,E&&(te-=E/p)):w==="mirror"&&(ae=u)),R=cl(0,1,te)*p}const H=M?{done:!1,value:j[0]}:ae.next(R);m&&(H.value=m(H.value));let{done:D}=H;!M&&g!==null&&(D=this.playbackSpeed>=0?this.currentTime>=d:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return k&&A!==Nx&&(H.value=Tf(j,this.options,q,this.speed)),P&&P(H.value),k&&this.finish(),H}then(r,n){return this.finished.then(r,n)}get duration(){return Bn(this.calculatedDuration)}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+Bn(r)}get time(){return Bn(this.currentTime)}set time(r){var n;r=Ri(r),this.currentTime=r,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=r:this.driver&&(this.startTime=this.driver.now()-r/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(r){this.updateTime(rn.now());const n=this.playbackSpeed!==r;this.playbackSpeed=r,n&&(this.time=Bn(this.currentTime))}play(){var d,m;if(this.isStopped)return;const{driver:r=O6,startTime:n}=this.options;this.driver||(this.driver=r(u=>this.tick(u))),(m=(d=this.options).onPlay)==null||m.call(d);const l=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=l):this.holdTime!==null?this.startTime=l-this.holdTime:this.startTime||(this.startTime=n??l),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(rn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var r,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(r=this.options).onComplete)==null||n.call(r)}cancel(){var r,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(r=this.options).onCancel)==null||n.call(r)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(r){return this.startTime=0,this.tick(r,!0)}attachTimeline(r){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),r.observe(this)}}function Z6(s){for(let r=1;r<s.length;r++)s[r]??(s[r]=s[r-1])}const jo=s=>s*180/Math.PI,wx=s=>{const r=jo(Math.atan2(s[1],s[0]));return Sx(r)},K6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:wx,rotateZ:wx,skewX:s=>jo(Math.atan(s[1])),skewY:s=>jo(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},Sx=s=>(s=s%360,s<0&&(s+=360),s),_y=wx,My=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),zy=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),J6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:My,scaleY:zy,scale:s=>(My(s)+zy(s))/2,rotateX:s=>Sx(jo(Math.atan2(s[6],s[5]))),rotateY:s=>Sx(jo(Math.atan2(-s[2],s[0]))),rotateZ:_y,rotate:_y,skewX:s=>jo(Math.atan(s[4])),skewY:s=>jo(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function Cx(s){return s.includes("scale")?1:0}function Ax(s,r){if(!s||s==="none")return Cx(r);const n=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let l,d;if(n)l=J6,d=n;else{const p=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);l=K6,d=p}if(!d)return Cx(r);const m=l[r],u=d[1].split(",").map(eC);return typeof m=="function"?m(u):u[m]}const X6=(s,r)=>{const{transform:n="none"}=getComputedStyle(s);return Ax(n,r)};function eC(s){return parseFloat(s.trim())}const Cc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ac=new Set(Cc),Ly=s=>s===Sc||s===us,tC=new Set(["x","y","z"]),sC=Cc.filter(s=>!tC.has(s));function aC(s){const r=[];return sC.forEach(n=>{const l=s.getValue(n);l!==void 0&&(r.push([n,l.get()]),l.set(n.startsWith("scale")?1:0))}),r}const No={width:({x:s},{paddingLeft:r="0",paddingRight:n="0"})=>s.max-s.min-parseFloat(r)-parseFloat(n),height:({y:s},{paddingTop:r="0",paddingBottom:n="0"})=>s.max-s.min-parseFloat(r)-parseFloat(n),top:(s,{top:r})=>parseFloat(r),left:(s,{left:r})=>parseFloat(r),bottom:({y:s},{top:r})=>parseFloat(r)+(s.max-s.min),right:({x:s},{left:r})=>parseFloat(r)+(s.max-s.min),x:(s,{transform:r})=>Ax(r,"x"),y:(s,{transform:r})=>Ax(r,"y")};No.translateX=No.x;No.translateY=No.y;const wo=new Set;let Ex=!1,Tx=!1,kx=!1;function xN(){if(Tx){const s=Array.from(wo).filter(l=>l.needsMeasurement),r=new Set(s.map(l=>l.element)),n=new Map;r.forEach(l=>{const d=aC(l);d.length&&(n.set(l,d),l.render())}),s.forEach(l=>l.measureInitialState()),r.forEach(l=>{l.render();const d=n.get(l);d&&d.forEach(([m,u])=>{var p;(p=l.getValue(m))==null||p.set(u)})}),s.forEach(l=>l.measureEndState()),s.forEach(l=>{l.suspendedScrollY!==void 0&&window.scrollTo(0,l.suspendedScrollY)})}Tx=!1,Ex=!1,wo.forEach(s=>s.complete(kx)),wo.clear()}function fN(){wo.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(Tx=!0)})}function rC(){kx=!0,fN(),xN(),kx=!1}class Df{constructor(r,n,l,d,m,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...r],this.onComplete=n,this.name=l,this.motionValue=d,this.element=m,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(wo.add(this),Ex||(Ex=!0,Pa.read(fN),Pa.resolveKeyframes(xN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:r,name:n,element:l,motionValue:d}=this;if(r[0]===null){const m=d==null?void 0:d.get(),u=r[r.length-1];if(m!==void 0)r[0]=m;else if(l&&n){const p=l.readValue(n,u);p!=null&&(r[0]=p)}r[0]===void 0&&(r[0]=u),d&&m===void 0&&d.set(r[0])}Z6(r)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(r=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,r),wo.delete(this)}cancel(){this.state==="scheduled"&&(wo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nC=s=>s.startsWith("--");function iC(s,r,n){nC(r)?s.style.setProperty(r,n):s.style[r]=n}const lC=yf(()=>window.ScrollTimeline!==void 0),oC={};function cC(s,r){const n=yf(s);return()=>oC[r]??n()}const gN=cC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Td=([s,r,n,l])=>`cubic-bezier(${s}, ${r}, ${n}, ${l})`,$y={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Td([0,.65,.55,1]),circOut:Td([.55,0,1,.45]),backIn:Td([.31,.01,.66,-.59]),backOut:Td([.33,1.53,.69,.99])};function bN(s,r){if(s)return typeof s=="function"?gN()?mN(s,r):"ease-out":tN(s)?Td(s):Array.isArray(s)?s.map(n=>bN(n,r)||$y.easeOut):$y[s]}function dC(s,r,n,{delay:l=0,duration:d=300,repeat:m=0,repeatType:u="loop",ease:p="easeOut",times:g}={},h=void 0){const j={[r]:n};g&&(j.offset=g);const v=bN(p,d);Array.isArray(v)&&(j.easing=v);const w={delay:l,duration:d,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:m+1,direction:u==="reverse"?"alternate":"normal"};return h&&(w.pseudoElement=h),s.animate(j,w)}function yN(s){return typeof s=="function"&&"applyToOptions"in s}function uC({type:s,...r}){return yN(s)&&gN()?s.applyToOptions(r):(r.duration??(r.duration=300),r.ease??(r.ease="easeOut"),r)}class mC extends kf{constructor(r){if(super(),this.finishedTime=null,this.isStopped=!1,!r)return;const{element:n,name:l,keyframes:d,pseudoElement:m,allowFlatten:u=!1,finalKeyframe:p,onComplete:g}=r;this.isPseudoElement=!!m,this.allowFlatten=u,this.options=r,bf(typeof r.type!="string");const h=uC(r);this.animation=dC(n,l,d,h,m),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!m){const j=Tf(d,this.options,p,this.speed);this.updateMotionValue?this.updateMotionValue(j):iC(n,l,j),this.animation.cancel()}g==null||g(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var r,n;(n=(r=this.animation).finish)==null||n.call(r)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:r}=this;r==="idle"||r==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var r,n;this.isPseudoElement||(n=(r=this.animation).commitStyles)==null||n.call(r)}get duration(){var n,l;const r=((l=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:l.call(n).duration)||0;return Bn(Number(r))}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+Bn(r)}get time(){return Bn(Number(this.animation.currentTime)||0)}set time(r){this.finishedTime=null,this.animation.currentTime=Ri(r)}get speed(){return this.animation.playbackRate}set speed(r){r<0&&(this.finishedTime=null),this.animation.playbackRate=r}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(r){this.animation.startTime=r}attachTimeline({timeline:r,observe:n}){var l;return this.allowFlatten&&((l=this.animation.effect)==null||l.updateTiming({easing:"linear"})),this.animation.onfinish=null,r&&lC()?(this.animation.timeline=r,qn):n(this)}}const jN={anticipate:Kv,backInOut:Zv,circInOut:Xv};function hC(s){return s in jN}function pC(s){typeof s.ease=="string"&&hC(s.ease)&&(s.ease=jN[s.ease])}const Fy=10;class xC extends mC{constructor(r){pC(r),pN(r),super(r),r.startTime&&(this.startTime=r.startTime),this.options=r}updateMotionValue(r){const{motionValue:n,onUpdate:l,onComplete:d,element:m,...u}=this.options;if(!n)return;if(r!==void 0){n.set(r);return}const p=new Pf({...u,autoplay:!1}),g=Ri(this.finishedTime??this.time);n.setWithVelocity(p.sample(g-Fy).value,p.sample(g).value,Fy),p.stop()}}const Uy=(s,r)=>r==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Kl.test(s)||s==="0")&&!s.startsWith("url("));function fC(s){const r=s[0];if(s.length===1)return!0;for(let n=0;n<s.length;n++)if(s[n]!==r)return!0}function gC(s,r,n,l){const d=s[0];if(d===null)return!1;if(r==="display"||r==="visibility")return!0;const m=s[s.length-1],u=Uy(d,r),p=Uy(m,r);return!u||!p?!1:fC(s)||(n==="spring"||yN(n))&&l}function Px(s){s.duration=0,s.type="keyframes"}const bC=new Set(["opacity","clipPath","filter","transform"]),yC=yf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function jC(s){var j;const{motionValue:r,name:n,repeatDelay:l,repeatType:d,damping:m,type:u}=s;if(!(((j=r==null?void 0:r.owner)==null?void 0:j.current)instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:h}=r.owner.getProps();return yC()&&n&&bC.has(n)&&(n!=="transform"||!h)&&!g&&!l&&d!=="mirror"&&m!==0&&u!=="inertia"}const vC=40;class NC extends kf{constructor({autoplay:r=!0,delay:n=0,type:l="keyframes",repeat:d=0,repeatDelay:m=0,repeatType:u="loop",keyframes:p,name:g,motionValue:h,element:j,...v}){var A;super(),this.stop=()=>{var P,q;this._animation&&(this._animation.stop(),(P=this.stopTimeline)==null||P.call(this)),(q=this.keyframeResolver)==null||q.cancel()},this.createdAt=rn.now();const w={autoplay:r,delay:n,type:l,repeat:d,repeatDelay:m,repeatType:u,name:g,motionValue:h,element:j,...v},E=(j==null?void 0:j.KeyframeResolver)||Df;this.keyframeResolver=new E(p,(P,q,V)=>this.onKeyframesResolved(P,q,w,!V),g,h,j),(A=this.keyframeResolver)==null||A.scheduleResolve()}onKeyframesResolved(r,n,l,d){this.keyframeResolver=void 0;const{name:m,type:u,velocity:p,delay:g,isHandoff:h,onUpdate:j}=l;this.resolvedAt=rn.now(),gC(r,m,u,p)||((dl.instantAnimations||!g)&&(j==null||j(Tf(r,l,n))),r[0]=r[r.length-1],Px(l),l.repeat=0);const w={startTime:d?this.resolvedAt?this.resolvedAt-this.createdAt>vC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...l,keyframes:r},E=!h&&jC(w)?new xC({...w,element:w.motionValue.owner.current}):new Pf(w);E.finished.then(()=>this.notifyFinished()).catch(qn),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(r,n){return this.finished.finally(r).then(()=>{})}get animation(){var r;return this._animation||((r=this.keyframeResolver)==null||r.resume(),rC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(r){this.animation.time=r}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(r){this.animation.speed=r}get startTime(){return this.animation.startTime}attachTimeline(r){return this._animation?this.stopTimeline=this.animation.attachTimeline(r):this.pendingTimeline=r,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var r;this._animation&&this.animation.cancel(),(r=this.keyframeResolver)==null||r.cancel()}}const wC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SC(s){const r=wC.exec(s);if(!r)return[,];const[,n,l,d]=r;return[`--${n??l}`,d]}function vN(s,r,n=1){const[l,d]=SC(s);if(!l)return;const m=window.getComputedStyle(r).getPropertyValue(l);if(m){const u=m.trim();return Bv(u)?parseFloat(u):u}return wf(d)?vN(d,r,n+1):d}function Of(s,r){return(s==null?void 0:s[r])??(s==null?void 0:s.default)??s}const NN=new Set(["width","height","top","left","right","bottom",...Cc]),CC={test:s=>s==="auto",parse:s=>s},wN=s=>r=>r.test(s),SN=[Sc,us,_i,Ul,f6,x6,CC],Iy=s=>SN.find(wN(s));function AC(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||qv(s):!0}const EC=new Set(["brightness","contrast","saturate","opacity"]);function TC(s){const[r,n]=s.slice(0,-1).split("(");if(r==="drop-shadow")return s;const[l]=n.match(Sf)||[];if(!l)return s;const d=n.replace(l,"");let m=EC.has(r)?1:0;return l!==n&&(m*=100),r+"("+m+d+")"}const kC=/\b([a-z-]*)\(.*?\)/gu,Dx={...Kl,getAnimatableNone:s=>{const r=s.match(kC);return r?r.map(TC).join(" "):s}},By={...Sc,transform:Math.round},PC={rotate:Ul,rotateX:Ul,rotateY:Ul,rotateZ:Ul,scale:xm,scaleX:xm,scaleY:xm,scaleZ:xm,skew:Ul,skewX:Ul,skewY:Ul,distance:us,translateX:us,translateY:us,translateZ:us,x:us,y:us,z:us,perspective:us,transformPerspective:us,opacity:Id,originX:ky,originY:ky,originZ:us},Rf={borderWidth:us,borderTopWidth:us,borderRightWidth:us,borderBottomWidth:us,borderLeftWidth:us,borderRadius:us,radius:us,borderTopLeftRadius:us,borderTopRightRadius:us,borderBottomRightRadius:us,borderBottomLeftRadius:us,width:us,maxWidth:us,height:us,maxHeight:us,top:us,right:us,bottom:us,left:us,padding:us,paddingTop:us,paddingRight:us,paddingBottom:us,paddingLeft:us,margin:us,marginTop:us,marginRight:us,marginBottom:us,marginLeft:us,backgroundPositionX:us,backgroundPositionY:us,...PC,zIndex:By,fillOpacity:Id,strokeOpacity:Id,numOctaves:By},DC={...Rf,color:Ka,backgroundColor:Ka,outlineColor:Ka,fill:Ka,stroke:Ka,borderColor:Ka,borderTopColor:Ka,borderRightColor:Ka,borderBottomColor:Ka,borderLeftColor:Ka,filter:Dx,WebkitFilter:Dx},CN=s=>DC[s];function AN(s,r){let n=CN(s);return n!==Dx&&(n=Kl),n.getAnimatableNone?n.getAnimatableNone(r):void 0}const OC=new Set(["auto","none","0"]);function RC(s,r,n){let l=0,d;for(;l<s.length&&!d;){const m=s[l];typeof m=="string"&&!OC.has(m)&&Bd(m).values.length&&(d=s[l]),l++}if(d&&n)for(const m of r)s[m]=AN(n,d)}class _C extends Df{constructor(r,n,l,d,m){super(r,n,l,d,m,!0)}readKeyframes(){const{unresolvedKeyframes:r,element:n,name:l}=this;if(!n||!n.current)return;super.readKeyframes();for(let g=0;g<r.length;g++){let h=r[g];if(typeof h=="string"&&(h=h.trim(),wf(h))){const j=vN(h,n.current);j!==void 0&&(r[g]=j),g===r.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!NN.has(l)||r.length!==2)return;const[d,m]=r,u=Iy(d),p=Iy(m);if(u!==p)if(Ly(u)&&Ly(p))for(let g=0;g<r.length;g++){const h=r[g];typeof h=="string"&&(r[g]=parseFloat(h))}else No[l]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:r,name:n}=this,l=[];for(let d=0;d<r.length;d++)(r[d]===null||AC(r[d]))&&l.push(d);l.length&&RC(r,l,n)}measureInitialState(){const{element:r,unresolvedKeyframes:n,name:l}=this;if(!r||!r.current)return;l==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=No[l](r.measureViewportBox(),window.getComputedStyle(r.current)),n[0]=this.measuredOrigin;const d=n[n.length-1];d!==void 0&&r.getValue(l,d).jump(d,!1)}measureEndState(){var p;const{element:r,name:n,unresolvedKeyframes:l}=this;if(!r||!r.current)return;const d=r.getValue(n);d&&d.jump(this.measuredOrigin,!1);const m=l.length-1,u=l[m];l[m]=No[n](r.measureViewportBox(),window.getComputedStyle(r.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(p=this.removedTransforms)!=null&&p.length&&this.removedTransforms.forEach(([g,h])=>{r.getValue(g).set(h)}),this.resolveNoneKeyframes()}}function MC(s,r,n){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let l=document;const d=(n==null?void 0:n[s])??l.querySelectorAll(s);return d?Array.from(d):[]}return Array.from(s)}const EN=(s,r)=>r&&typeof s=="number"?r.transform(s):s;function TN(s){return Vv(s)&&"offsetHeight"in s}const Vy=30,zC=s=>!isNaN(parseFloat(s));class LC{constructor(r,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=l=>{var m;const d=rn.now();if(this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(l),this.current!==this.prev&&((m=this.events.change)==null||m.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(r),this.owner=n.owner}setCurrent(r){this.current=r,this.updatedAt=rn.now(),this.canTrackVelocity===null&&r!==void 0&&(this.canTrackVelocity=zC(this.current))}setPrevFrameValue(r=this.current){this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt}onChange(r){return this.on("change",r)}on(r,n){this.events[r]||(this.events[r]=new jf);const l=this.events[r].add(n);return r==="change"?()=>{l(),Pa.read(()=>{this.events.change.getSize()||this.stop()})}:l}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,n){this.passiveEffect=r,this.stopPassiveEffect=n}set(r){this.passiveEffect?this.passiveEffect(r,this.updateAndNotify):this.updateAndNotify(r)}setWithVelocity(r,n,l){this.set(n),this.prev=void 0,this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt-l}jump(r,n=!0){this.updateAndNotify(r),this.prev=r,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var r;(r=this.events.change)==null||r.notify(this.current)}addDependent(r){this.dependents||(this.dependents=new Set),this.dependents.add(r)}removeDependent(r){this.dependents&&this.dependents.delete(r)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const r=rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>Vy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Vy);return Hv(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(r){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=r(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var r,n;(r=this.dependents)==null||r.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nc(s,r){return new LC(s,r)}const{schedule:_f}=sN(queueMicrotask,!1),di={x:!1,y:!1};function kN(){return di.x||di.y}function $C(s){return s==="x"||s==="y"?di[s]?null:(di[s]=!0,()=>{di[s]=!1}):di.x||di.y?null:(di.x=di.y=!0,()=>{di.x=di.y=!1})}function PN(s,r){const n=MC(s),l=new AbortController,d={passive:!0,...r,signal:l.signal};return[n,d,()=>l.abort()]}function qy(s){return!(s.pointerType==="touch"||kN())}function FC(s,r,n={}){const[l,d,m]=PN(s,n),u=p=>{if(!qy(p))return;const{target:g}=p,h=r(g,p);if(typeof h!="function"||!g)return;const j=v=>{qy(v)&&(h(v),g.removeEventListener("pointerleave",j))};g.addEventListener("pointerleave",j,d)};return l.forEach(p=>{p.addEventListener("pointerenter",u,d)}),m}const DN=(s,r)=>r?s===r?!0:DN(s,r.parentElement):!1,Mf=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,UC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function IC(s){return UC.has(s.tagName)||s.tabIndex!==-1}const Cm=new WeakSet;function Hy(s){return r=>{r.key==="Enter"&&s(r)}}function Kp(s,r){s.dispatchEvent(new PointerEvent("pointer"+r,{isPrimary:!0,bubbles:!0}))}const BC=(s,r)=>{const n=s.currentTarget;if(!n)return;const l=Hy(()=>{if(Cm.has(n))return;Kp(n,"down");const d=Hy(()=>{Kp(n,"up")}),m=()=>Kp(n,"cancel");n.addEventListener("keyup",d,r),n.addEventListener("blur",m,r)});n.addEventListener("keydown",l,r),n.addEventListener("blur",()=>n.removeEventListener("keydown",l),r)};function Gy(s){return Mf(s)&&!kN()}function VC(s,r,n={}){const[l,d,m]=PN(s,n),u=p=>{const g=p.currentTarget;if(!Gy(p))return;Cm.add(g);const h=r(g,p),j=(E,A)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",w),Cm.has(g)&&Cm.delete(g),Gy(E)&&typeof h=="function"&&h(E,{success:A})},v=E=>{j(E,g===window||g===document||n.useGlobalTarget||DN(g,E.target))},w=E=>{j(E,!1)};window.addEventListener("pointerup",v,d),window.addEventListener("pointercancel",w,d)};return l.forEach(p=>{(n.useGlobalTarget?window:p).addEventListener("pointerdown",u,d),TN(p)&&(p.addEventListener("focus",h=>BC(h,d)),!IC(p)&&!p.hasAttribute("tabindex")&&(p.tabIndex=0))}),m}function ON(s){return Vv(s)&&"ownerSVGElement"in s}function qC(s){return ON(s)&&s.tagName==="svg"}const Nr=s=>!!(s&&s.getVelocity),HC=[...SN,Ka,Kl],GC=s=>HC.find(wN(s)),zf=y.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function Qy(s,r){if(typeof s=="function")return s(r);s!=null&&(s.current=r)}function QC(...s){return r=>{let n=!1;const l=s.map(d=>{const m=Qy(d,r);return!n&&typeof m=="function"&&(n=!0),m});if(n)return()=>{for(let d=0;d<l.length;d++){const m=l[d];typeof m=="function"?m():Qy(s[d],null)}}}}function YC(...s){return y.useCallback(QC(...s),s)}class WC extends y.Component{getSnapshotBeforeUpdate(r){const n=this.props.childRef.current;if(n&&r.isPresent&&!this.props.isPresent){const l=n.offsetParent,d=TN(l)&&l.offsetWidth||0,m=this.props.sizeRef.current;m.height=n.offsetHeight||0,m.width=n.offsetWidth||0,m.top=n.offsetTop,m.left=n.offsetLeft,m.right=d-m.width-m.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ZC({children:s,isPresent:r,anchorX:n,root:l}){const d=y.useId(),m=y.useRef(null),u=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=y.useContext(zf),g=YC(m,s==null?void 0:s.ref);return y.useInsertionEffect(()=>{const{width:h,height:j,top:v,left:w,right:E}=u.current;if(r||!m.current||!h||!j)return;const A=n==="left"?`left: ${w}`:`right: ${E}`;m.current.dataset.motionPopId=d;const P=document.createElement("style");p&&(P.nonce=p);const q=l??document.head;return q.appendChild(P),P.sheet&&P.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${j}px !important;
            ${A}px !important;
            top: ${v}px !important;
          }
        `),()=>{q.contains(P)&&q.removeChild(P)}},[r]),e.jsx(WC,{isPresent:r,childRef:m,sizeRef:u,children:y.cloneElement(s,{ref:g})})}const KC=({children:s,initial:r,isPresent:n,onExitComplete:l,custom:d,presenceAffectsLayout:m,mode:u,anchorX:p,root:g})=>{const h=pf(JC),j=y.useId();let v=!0,w=y.useMemo(()=>(v=!1,{id:j,initial:r,isPresent:n,custom:d,onExitComplete:E=>{h.set(E,!0);for(const A of h.values())if(!A)return;l&&l()},register:E=>(h.set(E,!1),()=>h.delete(E))}),[n,h,l]);return m&&v&&(w={...w}),y.useMemo(()=>{h.forEach((E,A)=>h.set(A,!1))},[n]),y.useEffect(()=>{!n&&!h.size&&l&&l()},[n]),u==="popLayout"&&(s=e.jsx(ZC,{isPresent:n,anchorX:p,root:g,children:s})),e.jsx(Wm.Provider,{value:w,children:s})};function JC(){return new Map}function RN(s=!0){const r=y.useContext(Wm);if(r===null)return[!0,null];const{isPresent:n,onExitComplete:l,register:d}=r,m=y.useId();y.useEffect(()=>{if(s)return d(m)},[s]);const u=y.useCallback(()=>s&&l&&l(m),[m,l,s]);return!n&&l?[!1,u]:[!0]}const fm=s=>s.key||"";function Yy(s){const r=[];return y.Children.forEach(s,n=>{y.isValidElement(n)&&r.push(n)}),r}const ba=({children:s,custom:r,initial:n=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:m="sync",propagate:u=!1,anchorX:p="left",root:g})=>{const[h,j]=RN(u),v=y.useMemo(()=>Yy(s),[s]),w=u&&!h?[]:v.map(fm),E=y.useRef(!0),A=y.useRef(v),P=pf(()=>new Map),[q,V]=y.useState(v),[M,R]=y.useState(v);Iv(()=>{E.current=!1,A.current=v;for(let D=0;D<M.length;D++){const k=fm(M[D]);w.includes(k)?P.delete(k):P.get(k)!==!0&&P.set(k,!1)}},[M,w.length,w.join("-")]);const ae=[];if(v!==q){let D=[...v];for(let k=0;k<M.length;k++){const Q=M[k],W=fm(Q);w.includes(W)||(D.splice(k,0,Q),ae.push(Q))}return m==="wait"&&ae.length&&(D=ae),R(Yy(D)),V(v),null}const{forceRender:H}=y.useContext(hf);return e.jsx(e.Fragment,{children:M.map(D=>{const k=fm(D),Q=u&&!h?!1:v===M||w.includes(k),W=()=>{if(P.has(k))P.set(k,!0);else return;let te=!0;P.forEach(ie=>{ie||(te=!1)}),te&&(H==null||H(),R(A.current),u&&(j==null||j()),l&&l())};return e.jsx(KC,{isPresent:Q,initial:!E.current||n?void 0:!1,custom:r,presenceAffectsLayout:d,mode:m,root:g,onExitComplete:Q?void 0:W,anchorX:p,children:D},k)})})},_N=y.createContext({strict:!1}),Wy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wc={};for(const s in Wy)wc[s]={isEnabled:r=>Wy[s].some(n=>!!r[n])};function XC(s){for(const r in s)wc[r]={...wc[r],...s[r]}}const eA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $m(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||eA.has(s)}let MN=s=>!$m(s);function tA(s){typeof s=="function"&&(MN=r=>r.startsWith("on")?!$m(r):s(r))}try{tA(require("@emotion/is-prop-valid").default)}catch{}function sA(s,r,n){const l={};for(const d in s)d==="values"&&typeof s.values=="object"||(MN(d)||n===!0&&$m(d)||!r&&!$m(d)||s.draggable&&d.startsWith("onDrag"))&&(l[d]=s[d]);return l}const Zm=y.createContext({});function Km(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function Vd(s){return typeof s=="string"||Array.isArray(s)}const Lf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$f=["initial",...Lf];function Jm(s){return Km(s.animate)||$f.some(r=>Vd(s[r]))}function zN(s){return!!(Jm(s)||s.variants)}function aA(s,r){if(Jm(s)){const{initial:n,animate:l}=s;return{initial:n===!1||Vd(n)?n:void 0,animate:Vd(l)?l:void 0}}return s.inherit!==!1?r:{}}function rA(s){const{initial:r,animate:n}=aA(s,y.useContext(Zm));return y.useMemo(()=>({initial:r,animate:n}),[Zy(r),Zy(n)])}function Zy(s){return Array.isArray(s)?s.join(" "):s}function Ky(s,r){return r.max===r.min?0:s/(r.max-r.min)*100}const wd={correct:(s,r)=>{if(!r.target)return s;if(typeof s=="string")if(us.test(s))s=parseFloat(s);else return s;const n=Ky(s,r.target.x),l=Ky(s,r.target.y);return`${n}% ${l}%`}},nA={correct:(s,{treeScale:r,projectionDelta:n})=>{const l=s,d=Kl.parse(s);if(d.length>5)return l;const m=Kl.createTransformer(s),u=typeof d[0]!="number"?1:0,p=n.x.scale*r.x,g=n.y.scale*r.y;d[0+u]/=p,d[1+u]/=g;const h=Oa(p,g,.5);return typeof d[2+u]=="number"&&(d[2+u]/=h),typeof d[3+u]=="number"&&(d[3+u]/=h),m(d)}},Ox={borderRadius:{...wd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wd,borderTopRightRadius:wd,borderBottomLeftRadius:wd,borderBottomRightRadius:wd,boxShadow:nA};function LN(s,{layout:r,layoutId:n}){return Ac.has(s)||s.startsWith("origin")||(r||n!==void 0)&&(!!Ox[s]||s==="opacity")}const iA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lA=Cc.length;function oA(s,r,n){let l="",d=!0;for(let m=0;m<lA;m++){const u=Cc[m],p=s[u];if(p===void 0)continue;let g=!0;if(typeof p=="number"?g=p===(u.startsWith("scale")?1:0):g=parseFloat(p)===0,!g||n){const h=EN(p,Rf[u]);if(!g){d=!1;const j=iA[u]||u;l+=`${j}(${h}) `}n&&(r[u]=h)}}return l=l.trim(),n?l=n(r,d?"":l):d&&(l="none"),l}function Ff(s,r,n){const{style:l,vars:d,transformOrigin:m}=s;let u=!1,p=!1;for(const g in r){const h=r[g];if(Ac.has(g)){u=!0;continue}else if(rN(g)){d[g]=h;continue}else{const j=EN(h,Rf[g]);g.startsWith("origin")?(p=!0,m[g]=j):l[g]=j}}if(r.transform||(u||n?l.transform=oA(r,s.transform,n):l.transform&&(l.transform="none")),p){const{originX:g="50%",originY:h="50%",originZ:j=0}=m;l.transformOrigin=`${g} ${h} ${j}`}}const Uf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $N(s,r,n){for(const l in r)!Nr(r[l])&&!LN(l,n)&&(s[l]=r[l])}function cA({transformTemplate:s},r){return y.useMemo(()=>{const n=Uf();return Ff(n,r,s),Object.assign({},n.vars,n.style)},[r])}function dA(s,r){const n=s.style||{},l={};return $N(l,n,s),Object.assign(l,cA(s,r)),l}function uA(s,r){const n={},l=dA(s,r);return s.drag&&s.dragListener!==!1&&(n.draggable=!1,l.userSelect=l.WebkitUserSelect=l.WebkitTouchCallout="none",l.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(n.tabIndex=0),n.style=l,n}const mA={offset:"stroke-dashoffset",array:"stroke-dasharray"},hA={offset:"strokeDashoffset",array:"strokeDasharray"};function pA(s,r,n=1,l=0,d=!0){s.pathLength=1;const m=d?mA:hA;s[m.offset]=us.transform(-l);const u=us.transform(r),p=us.transform(n);s[m.array]=`${u} ${p}`}function FN(s,{attrX:r,attrY:n,attrScale:l,pathLength:d,pathSpacing:m=1,pathOffset:u=0,...p},g,h,j){if(Ff(s,p,h),g){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:v,style:w}=s;v.transform&&(w.transform=v.transform,delete v.transform),(w.transform||v.transformOrigin)&&(w.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),w.transform&&(w.transformBox=(j==null?void 0:j.transformBox)??"fill-box",delete v.transformBox),r!==void 0&&(v.x=r),n!==void 0&&(v.y=n),l!==void 0&&(v.scale=l),d!==void 0&&pA(v,d,m,u,!1)}const UN=()=>({...Uf(),attrs:{}}),IN=s=>typeof s=="string"&&s.toLowerCase()==="svg";function xA(s,r,n,l){const d=y.useMemo(()=>{const m=UN();return FN(m,r,IN(l),s.transformTemplate,s.style),{...m.attrs,style:{...m.style}}},[r]);if(s.style){const m={};$N(m,s.style,s),d.style={...m,...d.style}}return d}const fA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function If(s){return typeof s!="string"||s.includes("-")?!1:!!(fA.indexOf(s)>-1||/[A-Z]/u.test(s))}function gA(s,r,n,{latestValues:l},d,m=!1){const p=(If(s)?xA:uA)(r,l,d,s),g=sA(r,typeof s=="string",m),h=s!==y.Fragment?{...g,...p,ref:n}:{},{children:j}=r,v=y.useMemo(()=>Nr(j)?j.get():j,[j]);return y.createElement(s,{...h,children:v})}function Jy(s){const r=[{},{}];return s==null||s.values.forEach((n,l)=>{r[0][l]=n.get(),r[1][l]=n.getVelocity()}),r}function Bf(s,r,n,l){if(typeof r=="function"){const[d,m]=Jy(l);r=r(n!==void 0?n:s.custom,d,m)}if(typeof r=="string"&&(r=s.variants&&s.variants[r]),typeof r=="function"){const[d,m]=Jy(l);r=r(n!==void 0?n:s.custom,d,m)}return r}function Am(s){return Nr(s)?s.get():s}function bA({scrapeMotionValuesFromProps:s,createRenderState:r},n,l,d){return{latestValues:yA(n,l,d,s),renderState:r()}}function yA(s,r,n,l){const d={},m=l(s,{});for(const w in m)d[w]=Am(m[w]);let{initial:u,animate:p}=s;const g=Jm(s),h=zN(s);r&&h&&!g&&s.inherit!==!1&&(u===void 0&&(u=r.initial),p===void 0&&(p=r.animate));let j=n?n.initial===!1:!1;j=j||u===!1;const v=j?p:u;if(v&&typeof v!="boolean"&&!Km(v)){const w=Array.isArray(v)?v:[v];for(let E=0;E<w.length;E++){const A=Bf(s,w[E]);if(A){const{transitionEnd:P,transition:q,...V}=A;for(const M in V){let R=V[M];if(Array.isArray(R)){const ae=j?R.length-1:0;R=R[ae]}R!==null&&(d[M]=R)}for(const M in P)d[M]=P[M]}}}return d}const BN=s=>(r,n)=>{const l=y.useContext(Zm),d=y.useContext(Wm),m=()=>bA(s,r,l,d);return n?m():pf(m)};function Vf(s,r,n){var m;const{style:l}=s,d={};for(const u in l)(Nr(l[u])||r.style&&Nr(r.style[u])||LN(u,s)||((m=n==null?void 0:n.getValue(u))==null?void 0:m.liveStyle)!==void 0)&&(d[u]=l[u]);return d}const jA=BN({scrapeMotionValuesFromProps:Vf,createRenderState:Uf});function VN(s,r,n){const l=Vf(s,r,n);for(const d in s)if(Nr(s[d])||Nr(r[d])){const m=Cc.indexOf(d)!==-1?"attr"+d.charAt(0).toUpperCase()+d.substring(1):d;l[m]=s[d]}return l}const vA=BN({scrapeMotionValuesFromProps:VN,createRenderState:UN}),NA=Symbol.for("motionComponentSymbol");function dc(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function wA(s,r,n){return y.useCallback(l=>{l&&s.onMount&&s.onMount(l),r&&(l?r.mount(l):r.unmount()),n&&(typeof n=="function"?n(l):dc(n)&&(n.current=l))},[r])}const qf=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),SA="framerAppearId",qN="data-"+qf(SA),HN=y.createContext({});function CA(s,r,n,l,d){var P,q;const{visualElement:m}=y.useContext(Zm),u=y.useContext(_N),p=y.useContext(Wm),g=y.useContext(zf).reducedMotion,h=y.useRef(null);l=l||u.renderer,!h.current&&l&&(h.current=l(s,{visualState:r,parent:m,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:g}));const j=h.current,v=y.useContext(HN);j&&!j.projection&&d&&(j.type==="html"||j.type==="svg")&&AA(h.current,n,d,v);const w=y.useRef(!1);y.useInsertionEffect(()=>{j&&w.current&&j.update(n,p)});const E=n[qN],A=y.useRef(!!E&&!((P=window.MotionHandoffIsComplete)!=null&&P.call(window,E))&&((q=window.MotionHasOptimisedAnimation)==null?void 0:q.call(window,E)));return Iv(()=>{j&&(w.current=!0,window.MotionIsMounted=!0,j.updateFeatures(),j.scheduleRenderMicrotask(),A.current&&j.animationState&&j.animationState.animateChanges())}),y.useEffect(()=>{j&&(!A.current&&j.animationState&&j.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,E)}),A.current=!1),j.enteringChildren=void 0)}),j}function AA(s,r,n,l){const{layoutId:d,layout:m,drag:u,dragConstraints:p,layoutScroll:g,layoutRoot:h,layoutCrossfade:j}=r;s.projection=new n(s.latestValues,r["data-framer-portal-id"]?void 0:GN(s.parent)),s.projection.setOptions({layoutId:d,layout:m,alwaysMeasureLayout:!!u||p&&dc(p),visualElement:s,animationType:typeof m=="string"?m:"both",initialPromotionConfig:l,crossfade:j,layoutScroll:g,layoutRoot:h})}function GN(s){if(s)return s.options.allowProjection!==!1?s.projection:GN(s.parent)}function Jp(s,{forwardMotionProps:r=!1}={},n,l){n&&XC(n);const d=If(s)?vA:jA;function m(p,g){let h;const j={...y.useContext(zf),...p,layoutId:EA(p)},{isStatic:v}=j,w=rA(p),E=d(p,v);if(!v&&xf){TA();const A=kA(j);h=A.MeasureLayout,w.visualElement=CA(s,E,j,l,A.ProjectionNode)}return e.jsxs(Zm.Provider,{value:w,children:[h&&w.visualElement?e.jsx(h,{visualElement:w.visualElement,...j}):null,gA(s,p,wA(E,w.visualElement,g),E,v,r)]})}m.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const u=y.forwardRef(m);return u[NA]=s,u}function EA({layoutId:s}){const r=y.useContext(hf).id;return r&&s!==void 0?r+"-"+s:s}function TA(s,r){y.useContext(_N).strict}function kA(s){const{drag:r,layout:n}=wc;if(!r&&!n)return{};const l={...r,...n};return{MeasureLayout:r!=null&&r.isEnabled(s)||n!=null&&n.isEnabled(s)?l.MeasureLayout:void 0,ProjectionNode:l.ProjectionNode}}function PA(s,r){if(typeof Proxy>"u")return Jp;const n=new Map,l=(m,u)=>Jp(m,u,s,r),d=(m,u)=>l(m,u);return new Proxy(d,{get:(m,u)=>u==="create"?l:(n.has(u)||n.set(u,Jp(u,void 0,s,r)),n.get(u))})}function QN({top:s,left:r,right:n,bottom:l}){return{x:{min:r,max:n},y:{min:s,max:l}}}function DA({x:s,y:r}){return{top:r.min,right:s.max,bottom:r.max,left:s.min}}function OA(s,r){if(!r)return s;const n=r({x:s.left,y:s.top}),l=r({x:s.right,y:s.bottom});return{top:n.y,left:n.x,bottom:l.y,right:l.x}}function Xp(s){return s===void 0||s===1}function Rx({scale:s,scaleX:r,scaleY:n}){return!Xp(s)||!Xp(r)||!Xp(n)}function fo(s){return Rx(s)||YN(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function YN(s){return Xy(s.x)||Xy(s.y)}function Xy(s){return s&&s!=="0%"}function Fm(s,r,n){const l=s-n,d=r*l;return n+d}function ej(s,r,n,l,d){return d!==void 0&&(s=Fm(s,d,l)),Fm(s,n,l)+r}function _x(s,r=0,n=1,l,d){s.min=ej(s.min,r,n,l,d),s.max=ej(s.max,r,n,l,d)}function WN(s,{x:r,y:n}){_x(s.x,r.translate,r.scale,r.originPoint),_x(s.y,n.translate,n.scale,n.originPoint)}const tj=.999999999999,sj=1.0000000000001;function RA(s,r,n,l=!1){const d=n.length;if(!d)return;r.x=r.y=1;let m,u;for(let p=0;p<d;p++){m=n[p],u=m.projectionDelta;const{visualElement:g}=m.options;g&&g.props.style&&g.props.style.display==="contents"||(l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&mc(s,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),u&&(r.x*=u.x.scale,r.y*=u.y.scale,WN(s,u)),l&&fo(m.latestValues)&&mc(s,m.latestValues))}r.x<sj&&r.x>tj&&(r.x=1),r.y<sj&&r.y>tj&&(r.y=1)}function uc(s,r){s.min=s.min+r,s.max=s.max+r}function aj(s,r,n,l,d=.5){const m=Oa(s.min,s.max,d);_x(s,r,n,m,l)}function mc(s,r){aj(s.x,r.x,r.scaleX,r.scale,r.originX),aj(s.y,r.y,r.scaleY,r.scale,r.originY)}function ZN(s,r){return QN(OA(s.getBoundingClientRect(),r))}function _A(s,r,n){const l=ZN(s,n),{scroll:d}=r;return d&&(uc(l.x,d.offset.x),uc(l.y,d.offset.y)),l}const rj=()=>({translate:0,scale:1,origin:0,originPoint:0}),hc=()=>({x:rj(),y:rj()}),nj=()=>({min:0,max:0}),nr=()=>({x:nj(),y:nj()}),Mx={current:null},KN={current:!1};function MA(){if(KN.current=!0,!!xf)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),r=()=>Mx.current=s.matches;s.addEventListener("change",r),r()}else Mx.current=!1}const zA=new WeakMap;function LA(s,r,n){for(const l in r){const d=r[l],m=n[l];if(Nr(d))s.addValue(l,d);else if(Nr(m))s.addValue(l,Nc(d,{owner:s}));else if(m!==d)if(s.hasValue(l)){const u=s.getValue(l);u.liveStyle===!0?u.jump(d):u.hasAnimated||u.set(d)}else{const u=s.getStaticValue(l);s.addValue(l,Nc(u!==void 0?u:d,{owner:s}))}}for(const l in n)r[l]===void 0&&s.removeValue(l);return r}const ij=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $A{scrapeMotionValuesFromProps(r,n,l){return{}}constructor({parent:r,props:n,presenceContext:l,reducedMotionConfig:d,blockInitialAnimation:m,visualState:u},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Df,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=rn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,Pa.render(this.render,!1,!0))};const{latestValues:g,renderState:h}=u;this.latestValues=g,this.baseTarget={...g},this.initialValues=n.initial?{...g}:{},this.renderState=h,this.parent=r,this.props=n,this.presenceContext=l,this.depth=r?r.depth+1:0,this.reducedMotionConfig=d,this.options=p,this.blockInitialAnimation=!!m,this.isControllingVariants=Jm(n),this.isVariantNode=zN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:j,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in v){const E=v[w];g[w]!==void 0&&Nr(E)&&E.set(g[w])}}mount(r){var n;this.current=r,zA.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((l,d)=>this.bindToMotionValue(d,l)),KN.current||MA(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mx.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var r;this.projection&&this.projection.unmount(),Zl(this.notifyUpdate),Zl(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(r=this.parent)==null||r.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const l=this.features[n];l&&(l.unmount(),l.isMounted=!1)}this.current=null}addChild(r){this.children.add(r),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(r)}removeChild(r){this.children.delete(r),this.enteringChildren&&this.enteringChildren.delete(r)}bindToMotionValue(r,n){this.valueSubscriptions.has(r)&&this.valueSubscriptions.get(r)();const l=Ac.has(r);l&&this.onBindTransform&&this.onBindTransform();const d=n.on("change",u=>{this.latestValues[r]=u,this.props.onUpdate&&Pa.preRender(this.notifyUpdate),l&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let m;window.MotionCheckAppearSync&&(m=window.MotionCheckAppearSync(this,r,n)),this.valueSubscriptions.set(r,()=>{d(),m&&m(),n.owner&&n.stop()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}updateFeatures(){let r="animation";for(r in wc){const n=wc[r];if(!n)continue;const{isEnabled:l,Feature:d}=n;if(!this.features[r]&&d&&l(this.props)&&(this.features[r]=new d(this)),this.features[r]){const m=this.features[r];m.isMounted?m.update():(m.mount(),m.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nr()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,n){this.latestValues[r]=n}update(r,n){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let l=0;l<ij.length;l++){const d=ij[l];this.propEventSubscriptions[d]&&(this.propEventSubscriptions[d](),delete this.propEventSubscriptions[d]);const m="on"+d,u=r[m];u&&(this.propEventSubscriptions[d]=this.on(d,u))}this.prevMotionValues=LA(this,this.scrapeMotionValuesFromProps(r,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(r){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(r),()=>n.variantChildren.delete(r)}addValue(r,n){const l=this.values.get(r);n!==l&&(l&&this.removeValue(r),this.bindToMotionValue(r,n),this.values.set(r,n),this.latestValues[r]=n.get())}removeValue(r){this.values.delete(r);const n=this.valueSubscriptions.get(r);n&&(n(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,n){if(this.props.values&&this.props.values[r])return this.props.values[r];let l=this.values.get(r);return l===void 0&&n!==void 0&&(l=Nc(n===null?void 0:n,{owner:this}),this.addValue(r,l)),l}readValue(r,n){let l=this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:this.getBaseTargetFromProps(this.props,r)??this.readValueFromInstance(this.current,r,this.options);return l!=null&&(typeof l=="string"&&(Bv(l)||qv(l))?l=parseFloat(l):!GC(l)&&Kl.test(n)&&(l=AN(r,n)),this.setBaseTarget(r,Nr(l)?l.get():l)),Nr(l)?l.get():l}setBaseTarget(r,n){this.baseTarget[r]=n}getBaseTarget(r){var m;const{initial:n}=this.props;let l;if(typeof n=="string"||typeof n=="object"){const u=Bf(this.props,n,(m=this.presenceContext)==null?void 0:m.custom);u&&(l=u[r])}if(n&&l!==void 0)return l;const d=this.getBaseTargetFromProps(this.props,r);return d!==void 0&&!Nr(d)?d:this.initialValues[r]!==void 0&&l===void 0?void 0:this.baseTarget[r]}on(r,n){return this.events[r]||(this.events[r]=new jf),this.events[r].add(n)}notify(r,...n){this.events[r]&&this.events[r].notify(...n)}scheduleRenderMicrotask(){_f.render(this.render)}}class JN extends $A{constructor(){super(...arguments),this.KeyframeResolver=_C}sortInstanceNodePosition(r,n){return r.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(r,n){return r.style?r.style[n]:void 0}removeValueFromRenderState(r,{vars:n,style:l}){delete n[r],delete l[r]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;Nr(r)&&(this.childSubscription=r.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function XN(s,{style:r,vars:n},l,d){const m=s.style;let u;for(u in r)m[u]=r[u];d==null||d.applyProjectionStyles(m,l);for(u in n)m.setProperty(u,n[u])}function FA(s){return window.getComputedStyle(s)}class UA extends JN{constructor(){super(...arguments),this.type="html",this.renderInstance=XN}readValueFromInstance(r,n){var l;if(Ac.has(n))return(l=this.projection)!=null&&l.isProjecting?Cx(n):X6(r,n);{const d=FA(r),m=(rN(n)?d.getPropertyValue(n):d[n])||0;return typeof m=="string"?m.trim():m}}measureInstanceViewportBox(r,{transformPagePoint:n}){return ZN(r,n)}build(r,n,l){Ff(r,n,l.transformTemplate)}scrapeMotionValuesFromProps(r,n,l){return Vf(r,n,l)}}const e1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IA(s,r,n,l){XN(s,r,void 0,l);for(const d in r.attrs)s.setAttribute(e1.has(d)?d:qf(d),r.attrs[d])}class BA extends JN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nr}getBaseTargetFromProps(r,n){return r[n]}readValueFromInstance(r,n){if(Ac.has(n)){const l=CN(n);return l&&l.default||0}return n=e1.has(n)?n:qf(n),r.getAttribute(n)}scrapeMotionValuesFromProps(r,n,l){return VN(r,n,l)}build(r,n,l){FN(r,n,this.isSVGTag,l.transformTemplate,l.style)}renderInstance(r,n,l,d){IA(r,n,l,d)}mount(r){this.isSVGTag=IN(r.tagName),super.mount(r)}}const VA=(s,r)=>If(s)?new BA(r):new UA(r,{allowProjection:s!==y.Fragment});function gc(s,r,n){const l=s.getProps();return Bf(l,r,n!==void 0?n:l.custom,s)}const zx=s=>Array.isArray(s);function qA(s,r,n){s.hasValue(r)?s.getValue(r).set(n):s.addValue(r,Nc(n))}function HA(s){return zx(s)?s[s.length-1]||0:s}function GA(s,r){const n=gc(s,r);let{transitionEnd:l={},transition:d={},...m}=n||{};m={...m,...l};for(const u in m){const p=HA(m[u]);qA(s,u,p)}}function QA(s){return!!(Nr(s)&&s.add)}function Lx(s,r){const n=s.getValue("willChange");if(QA(n))return n.add(r);if(!n&&dl.WillChange){const l=new dl.WillChange("auto");s.addValue("willChange",l),l.add(r)}}function t1(s){return s.props[qN]}const YA=s=>s!==null;function WA(s,{repeat:r,repeatType:n="loop"},l){const d=s.filter(YA),m=r&&n!=="loop"&&r%2===1?0:d.length-1;return d[m]}const ZA={type:"spring",stiffness:500,damping:25,restSpeed:10},KA=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),JA={type:"keyframes",duration:.8},XA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eE=(s,{keyframes:r})=>r.length>2?JA:Ac.has(s)?s.startsWith("scale")?KA(r[1]):ZA:XA;function tE({when:s,delay:r,delayChildren:n,staggerChildren:l,staggerDirection:d,repeat:m,repeatType:u,repeatDelay:p,from:g,elapsed:h,...j}){return!!Object.keys(j).length}const Hf=(s,r,n,l={},d,m)=>u=>{const p=Of(l,s)||{},g=p.delay||l.delay||0;let{elapsed:h=0}=l;h=h-Ri(g);const j={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:r.getVelocity(),...p,delay:-h,onUpdate:w=>{r.set(w),p.onUpdate&&p.onUpdate(w)},onComplete:()=>{u(),p.onComplete&&p.onComplete()},name:s,motionValue:r,element:m?void 0:d};tE(p)||Object.assign(j,eE(s,j)),j.duration&&(j.duration=Ri(j.duration)),j.repeatDelay&&(j.repeatDelay=Ri(j.repeatDelay)),j.from!==void 0&&(j.keyframes[0]=j.from);let v=!1;if((j.type===!1||j.duration===0&&!j.repeatDelay)&&(Px(j),j.delay===0&&(v=!0)),(dl.instantAnimations||dl.skipAnimations)&&(v=!0,Px(j),j.delay=0),j.allowFlatten=!p.type&&!p.ease,v&&!m&&r.get()!==void 0){const w=WA(j.keyframes,p);if(w!==void 0){Pa.update(()=>{j.onUpdate(w),j.onComplete()});return}}return p.isSync?new Pf(j):new NC(j)};function sE({protectedKeys:s,needsAnimating:r},n){const l=s.hasOwnProperty(n)&&r[n]!==!0;return r[n]=!1,l}function s1(s,r,{delay:n=0,transitionOverride:l,type:d}={}){let{transition:m=s.getDefaultTransition(),transitionEnd:u,...p}=r;l&&(m=l);const g=[],h=d&&s.animationState&&s.animationState.getState()[d];for(const j in p){const v=s.getValue(j,s.latestValues[j]??null),w=p[j];if(w===void 0||h&&sE(h,j))continue;const E={delay:n,...Of(m||{},j)},A=v.get();if(A!==void 0&&!v.isAnimating&&!Array.isArray(w)&&w===A&&!E.velocity)continue;let P=!1;if(window.MotionHandoffAnimation){const V=t1(s);if(V){const M=window.MotionHandoffAnimation(V,j,Pa);M!==null&&(E.startTime=M,P=!0)}}Lx(s,j),v.start(Hf(j,v,w,s.shouldReduceMotion&&NN.has(j)?{type:!1}:E,s,P));const q=v.animation;q&&g.push(q)}return u&&Promise.all(g).then(()=>{Pa.update(()=>{u&&GA(s,u)})}),g}function a1(s,r,n,l=0,d=1){const m=Array.from(s).sort((h,j)=>h.sortNodePosition(j)).indexOf(r),u=s.size,p=(u-1)*l;return typeof n=="function"?n(m,u):d===1?m*l:p-m*l}function $x(s,r,n={}){var g;const l=gc(s,r,n.type==="exit"?(g=s.presenceContext)==null?void 0:g.custom:void 0);let{transition:d=s.getDefaultTransition()||{}}=l||{};n.transitionOverride&&(d=n.transitionOverride);const m=l?()=>Promise.all(s1(s,l,n)):()=>Promise.resolve(),u=s.variantChildren&&s.variantChildren.size?(h=0)=>{const{delayChildren:j=0,staggerChildren:v,staggerDirection:w}=d;return aE(s,r,h,j,v,w,n)}:()=>Promise.resolve(),{when:p}=d;if(p){const[h,j]=p==="beforeChildren"?[m,u]:[u,m];return h().then(()=>j())}else return Promise.all([m(),u(n.delay)])}function aE(s,r,n=0,l=0,d=0,m=1,u){const p=[];for(const g of s.variantChildren)g.notify("AnimationStart",r),p.push($x(g,r,{...u,delay:n+(typeof l=="function"?0:l)+a1(s.variantChildren,g,l,d,m)}).then(()=>g.notify("AnimationComplete",r)));return Promise.all(p)}function rE(s,r,n={}){s.notify("AnimationStart",r);let l;if(Array.isArray(r)){const d=r.map(m=>$x(s,m,n));l=Promise.all(d)}else if(typeof r=="string")l=$x(s,r,n);else{const d=typeof r=="function"?gc(s,r,n.custom):r;l=Promise.all(s1(s,d,n))}return l.then(()=>{s.notify("AnimationComplete",r)})}function r1(s,r){if(!Array.isArray(r))return!1;const n=r.length;if(n!==s.length)return!1;for(let l=0;l<n;l++)if(r[l]!==s[l])return!1;return!0}const nE=$f.length;function n1(s){if(!s)return;if(!s.isControllingVariants){const n=s.parent?n1(s.parent)||{}:{};return s.props.initial!==void 0&&(n.initial=s.props.initial),n}const r={};for(let n=0;n<nE;n++){const l=$f[n],d=s.props[l];(Vd(d)||d===!1)&&(r[l]=d)}return r}const iE=[...Lf].reverse(),lE=Lf.length;function oE(s){return r=>Promise.all(r.map(({animation:n,options:l})=>rE(s,n,l)))}function cE(s){let r=oE(s),n=lj(),l=!0;const d=g=>(h,j)=>{var w;const v=gc(s,j,g==="exit"?(w=s.presenceContext)==null?void 0:w.custom:void 0);if(v){const{transition:E,transitionEnd:A,...P}=v;h={...h,...P,...A}}return h};function m(g){r=g(s)}function u(g){const{props:h}=s,j=n1(s.parent)||{},v=[],w=new Set;let E={},A=1/0;for(let q=0;q<lE;q++){const V=iE[q],M=n[V],R=h[V]!==void 0?h[V]:j[V],ae=Vd(R),H=V===g?M.isActive:null;H===!1&&(A=q);let D=R===j[V]&&R!==h[V]&&ae;if(D&&l&&s.manuallyAnimateOnMount&&(D=!1),M.protectedKeys={...E},!M.isActive&&H===null||!R&&!M.prevProp||Km(R)||typeof R=="boolean")continue;const k=dE(M.prevProp,R);let Q=k||V===g&&M.isActive&&!D&&ae||q>A&&ae,W=!1;const te=Array.isArray(R)?R:[R];let ie=te.reduce(d(V),{});H===!1&&(ie={});const{prevResolvedValues:X={}}=M,Se={...X,...ie},$=ne=>{Q=!0,w.has(ne)&&(W=!0,w.delete(ne)),M.needsAnimating[ne]=!0;const Z=s.getValue(ne);Z&&(Z.liveStyle=!1)};for(const ne in Se){const Z=ie[ne],ue=X[ne];if(E.hasOwnProperty(ne))continue;let ve=!1;zx(Z)&&zx(ue)?ve=!r1(Z,ue):ve=Z!==ue,ve?Z!=null?$(ne):w.add(ne):Z!==void 0&&w.has(ne)?$(ne):M.protectedKeys[ne]=!0}M.prevProp=R,M.prevResolvedValues=ie,M.isActive&&(E={...E,...ie}),l&&s.blockInitialAnimation&&(Q=!1);const re=D&&k;Q&&(!re||W)&&v.push(...te.map(ne=>{const Z={type:V};if(typeof ne=="string"&&l&&!re&&s.manuallyAnimateOnMount&&s.parent){const{parent:ue}=s,ve=gc(ue,ne);if(ue.enteringChildren&&ve){const{delayChildren:O}=ve.transition||{};Z.delay=a1(ue.enteringChildren,s,O)}}return{animation:ne,options:Z}}))}if(w.size){const q={};if(typeof h.initial!="boolean"){const V=gc(s,Array.isArray(h.initial)?h.initial[0]:h.initial);V&&V.transition&&(q.transition=V.transition)}w.forEach(V=>{const M=s.getBaseTarget(V),R=s.getValue(V);R&&(R.liveStyle=!0),q[V]=M??null}),v.push({animation:q})}let P=!!v.length;return l&&(h.initial===!1||h.initial===h.animate)&&!s.manuallyAnimateOnMount&&(P=!1),l=!1,P?r(v):Promise.resolve()}function p(g,h){var v;if(n[g].isActive===h)return Promise.resolve();(v=s.variantChildren)==null||v.forEach(w=>{var E;return(E=w.animationState)==null?void 0:E.setActive(g,h)}),n[g].isActive=h;const j=u(g);for(const w in n)n[w].protectedKeys={};return j}return{animateChanges:u,setActive:p,setAnimateFunction:m,getState:()=>n,reset:()=>{n=lj()}}}function dE(s,r){return typeof r=="string"?r!==s:Array.isArray(r)?!r1(r,s):!1}function po(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lj(){return{animate:po(!0),whileInView:po(),whileHover:po(),whileTap:po(),whileDrag:po(),whileFocus:po(),exit:po()}}class Xl{constructor(r){this.isMounted=!1,this.node=r}update(){}}class uE extends Xl{constructor(r){super(r),r.animationState||(r.animationState=cE(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();Km(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:n}=this.node.prevProps||{};r!==n&&this.updateAnimationControlsSubscription()}unmount(){var r;this.node.animationState.reset(),(r=this.unmountControls)==null||r.call(this)}}let mE=0;class hE extends Xl{constructor(){super(...arguments),this.id=mE++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:n}=this.node.presenceContext,{isPresent:l}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===l)return;const d=this.node.animationState.setActive("exit",!r);n&&!r&&d.then(()=>{n(this.id)})}mount(){const{register:r,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),r&&(this.unmount=r(this.id))}unmount(){}}const pE={animation:{Feature:uE},exit:{Feature:hE}};function qd(s,r,n,l={passive:!0}){return s.addEventListener(r,n,l),()=>s.removeEventListener(r,n)}function eu(s){return{point:{x:s.pageX,y:s.pageY}}}const xE=s=>r=>Mf(r)&&s(r,eu(r));function Rd(s,r,n,l){return qd(s,r,xE(n),l)}const i1=1e-4,fE=1-i1,gE=1+i1,l1=.01,bE=0-l1,yE=0+l1;function Lr(s){return s.max-s.min}function jE(s,r,n){return Math.abs(s-r)<=n}function oj(s,r,n,l=.5){s.origin=l,s.originPoint=Oa(r.min,r.max,s.origin),s.scale=Lr(n)/Lr(r),s.translate=Oa(n.min,n.max,s.origin)-s.originPoint,(s.scale>=fE&&s.scale<=gE||isNaN(s.scale))&&(s.scale=1),(s.translate>=bE&&s.translate<=yE||isNaN(s.translate))&&(s.translate=0)}function _d(s,r,n,l){oj(s.x,r.x,n.x,l?l.originX:void 0),oj(s.y,r.y,n.y,l?l.originY:void 0)}function cj(s,r,n){s.min=n.min+r.min,s.max=s.min+Lr(r)}function vE(s,r,n){cj(s.x,r.x,n.x),cj(s.y,r.y,n.y)}function dj(s,r,n){s.min=r.min-n.min,s.max=s.min+Lr(r)}function Um(s,r,n){dj(s.x,r.x,n.x),dj(s.y,r.y,n.y)}function Ln(s){return[s("x"),s("y")]}const o1=({current:s})=>s?s.ownerDocument.defaultView:null,uj=(s,r)=>Math.abs(s-r);function NE(s,r){const n=uj(s.x,r.x),l=uj(s.y,r.y);return Math.sqrt(n**2+l**2)}class c1{constructor(r,n,{transformPagePoint:l,contextWindow:d=window,dragSnapToOrigin:m=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=tx(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,A=NE(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!A)return;const{point:P}=w,{timestamp:q}=br;this.history.push({...P,timestamp:q});const{onStart:V,onMove:M}=this.handlers;E||(V&&V(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,w)},this.handlePointerMove=(w,E)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=ex(E,this.transformPagePoint),Pa.update(this.updatePoint,!0)},this.handlePointerUp=(w,E)=>{this.end();const{onEnd:A,onSessionEnd:P,resumeAnimation:q}=this.handlers;if(this.dragSnapToOrigin&&q&&q(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=tx(w.type==="pointercancel"?this.lastMoveEventInfo:ex(E,this.transformPagePoint),this.history);this.startEvent&&A&&A(w,V),P&&P(w,V)},!Mf(r))return;this.dragSnapToOrigin=m,this.handlers=n,this.transformPagePoint=l,this.distanceThreshold=u,this.contextWindow=d||window;const p=eu(r),g=ex(p,this.transformPagePoint),{point:h}=g,{timestamp:j}=br;this.history=[{...h,timestamp:j}];const{onSessionStart:v}=n;v&&v(r,tx(g,this.history)),this.removeListeners=Kd(Rd(this.contextWindow,"pointermove",this.handlePointerMove),Rd(this.contextWindow,"pointerup",this.handlePointerUp),Rd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),Zl(this.updatePoint)}}function ex(s,r){return r?{point:r(s.point)}:s}function mj(s,r){return{x:s.x-r.x,y:s.y-r.y}}function tx({point:s},r){return{point:s,delta:mj(s,d1(r)),offset:mj(s,wE(r)),velocity:SE(r,.1)}}function wE(s){return s[0]}function d1(s){return s[s.length-1]}function SE(s,r){if(s.length<2)return{x:0,y:0};let n=s.length-1,l=null;const d=d1(s);for(;n>=0&&(l=s[n],!(d.timestamp-l.timestamp>Ri(r)));)n--;if(!l)return{x:0,y:0};const m=Bn(d.timestamp-l.timestamp);if(m===0)return{x:0,y:0};const u={x:(d.x-l.x)/m,y:(d.y-l.y)/m};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function CE(s,{min:r,max:n},l){return r!==void 0&&s<r?s=l?Oa(r,s,l.min):Math.max(s,r):n!==void 0&&s>n&&(s=l?Oa(n,s,l.max):Math.min(s,n)),s}function hj(s,r,n){return{min:r!==void 0?s.min+r:void 0,max:n!==void 0?s.max+n-(s.max-s.min):void 0}}function AE(s,{top:r,left:n,bottom:l,right:d}){return{x:hj(s.x,n,d),y:hj(s.y,r,l)}}function pj(s,r){let n=r.min-s.min,l=r.max-s.max;return r.max-r.min<s.max-s.min&&([n,l]=[l,n]),{min:n,max:l}}function EE(s,r){return{x:pj(s.x,r.x),y:pj(s.y,r.y)}}function TE(s,r){let n=.5;const l=Lr(s),d=Lr(r);return d>l?n=Ud(r.min,r.max-l,s.min):l>d&&(n=Ud(s.min,s.max-d,r.min)),cl(0,1,n)}function kE(s,r){const n={};return r.min!==void 0&&(n.min=r.min-s.min),r.max!==void 0&&(n.max=r.max-s.min),n}const Fx=.35;function PE(s=Fx){return s===!1?s=0:s===!0&&(s=Fx),{x:xj(s,"left","right"),y:xj(s,"top","bottom")}}function xj(s,r,n){return{min:fj(s,r),max:fj(s,n)}}function fj(s,r){return typeof s=="number"?s:s[r]||0}const DE=new WeakMap;class OE{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=r}start(r,{snapToCursor:n=!1,distanceThreshold:l}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const m=v=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(eu(v).point)},u=(v,w)=>{const{drag:E,dragPropagation:A,onDragStart:P}=this.getProps();if(E&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$C(E),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ln(V=>{let M=this.getAxisMotionValue(V).get()||0;if(_i.test(M)){const{projection:R}=this.visualElement;if(R&&R.layout){const ae=R.layout.layoutBox[V];ae&&(M=Lr(ae)*(parseFloat(M)/100))}}this.originPoint[V]=M}),P&&Pa.postRender(()=>P(v,w)),Lx(this.visualElement,"transform");const{animationState:q}=this.visualElement;q&&q.setActive("whileDrag",!0)},p=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w;const{dragPropagation:E,dragDirectionLock:A,onDirectionLock:P,onDrag:q}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:V}=w;if(A&&this.currentDirection===null){this.currentDirection=RE(V),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",w.point,V),this.updateAxis("y",w.point,V),this.visualElement.render(),q&&q(v,w)},g=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w,this.stop(v,w),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Ln(v=>{var w;return this.getAnimationState(v)==="paused"&&((w=this.getAxisMotionValue(v).animation)==null?void 0:w.play())}),{dragSnapToOrigin:j}=this.getProps();this.panSession=new c1(r,{onSessionStart:m,onStart:u,onMove:p,onSessionEnd:g,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:j,distanceThreshold:l,contextWindow:o1(this.visualElement)})}stop(r,n){const l=r||this.latestPointerEvent,d=n||this.latestPanInfo,m=this.isDragging;if(this.cancel(),!m||!d||!l)return;const{velocity:u}=d;this.startAnimation(u);const{onDragEnd:p}=this.getProps();p&&Pa.postRender(()=>p(l,d))}cancel(){this.isDragging=!1;const{projection:r,animationState:n}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:l}=this.getProps();!l&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(r,n,l){const{drag:d}=this.getProps();if(!l||!gm(r,d,this.currentDirection))return;const m=this.getAxisMotionValue(r);let u=this.originPoint[r]+l[r];this.constraints&&this.constraints[r]&&(u=CE(u,this.constraints[r],this.elastic[r])),m.set(u)}resolveConstraints(){var m;const{dragConstraints:r,dragElastic:n}=this.getProps(),l=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(m=this.visualElement.projection)==null?void 0:m.layout,d=this.constraints;r&&dc(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&l?this.constraints=AE(l.layoutBox,r):this.constraints=!1,this.elastic=PE(n),d!==this.constraints&&l&&this.constraints&&!this.hasMutatedConstraints&&Ln(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=kE(l.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:n}=this.getProps();if(!r||!dc(r))return!1;const l=r.current,{projection:d}=this.visualElement;if(!d||!d.layout)return!1;const m=_A(l,d.root,this.visualElement.getTransformPagePoint());let u=EE(d.layout.layoutBox,m);if(n){const p=n(DA(u));this.hasMutatedConstraints=!!p,p&&(u=QN(p))}return u}startAnimation(r){const{drag:n,dragMomentum:l,dragElastic:d,dragTransition:m,dragSnapToOrigin:u,onDragTransitionEnd:p}=this.getProps(),g=this.constraints||{},h=Ln(j=>{if(!gm(j,n,this.currentDirection))return;let v=g&&g[j]||{};u&&(v={min:0,max:0});const w=d?200:1e6,E=d?40:1e7,A={type:"inertia",velocity:l?r[j]:0,bounceStiffness:w,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...m,...v};return this.startAxisValueAnimation(j,A)});return Promise.all(h).then(p)}startAxisValueAnimation(r,n){const l=this.getAxisMotionValue(r);return Lx(this.visualElement,r),l.start(Hf(r,l,0,n,this.visualElement,!1))}stopAnimation(){Ln(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){Ln(r=>{var n;return(n=this.getAxisMotionValue(r).animation)==null?void 0:n.pause()})}getAnimationState(r){var n;return(n=this.getAxisMotionValue(r).animation)==null?void 0:n.state}getAxisMotionValue(r){const n=`_drag${r.toUpperCase()}`,l=this.visualElement.getProps(),d=l[n];return d||this.visualElement.getValue(r,(l.initial?l.initial[r]:void 0)||0)}snapToCursor(r){Ln(n=>{const{drag:l}=this.getProps();if(!gm(n,l,this.currentDirection))return;const{projection:d}=this.visualElement,m=this.getAxisMotionValue(n);if(d&&d.layout){const{min:u,max:p}=d.layout.layoutBox[n];m.set(r[n]-Oa(u,p,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:n}=this.getProps(),{projection:l}=this.visualElement;if(!dc(n)||!l||!this.constraints)return;this.stopAnimation();const d={x:0,y:0};Ln(u=>{const p=this.getAxisMotionValue(u);if(p&&this.constraints!==!1){const g=p.get();d[u]=TE({min:g,max:g},this.constraints[u])}});const{transformTemplate:m}=this.visualElement.getProps();this.visualElement.current.style.transform=m?m({},""):"none",l.root&&l.root.updateScroll(),l.updateLayout(),this.resolveConstraints(),Ln(u=>{if(!gm(u,r,null))return;const p=this.getAxisMotionValue(u),{min:g,max:h}=this.constraints[u];p.set(Oa(g,h,d[u]))})}addListeners(){if(!this.visualElement.current)return;DE.set(this.visualElement,this);const r=this.visualElement.current,n=Rd(r,"pointerdown",g=>{const{drag:h,dragListener:j=!0}=this.getProps();h&&j&&this.start(g)}),l=()=>{const{dragConstraints:g}=this.getProps();dc(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:d}=this.visualElement,m=d.addEventListener("measure",l);d&&!d.layout&&(d.root&&d.root.updateScroll(),d.updateLayout()),Pa.read(l);const u=qd(window,"resize",()=>this.scalePositionWithinConstraints()),p=d.addEventListener("didUpdate",(({delta:g,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ln(j=>{const v=this.getAxisMotionValue(j);v&&(this.originPoint[j]+=g[j].translate,v.set(v.get()+g[j].translate))}),this.visualElement.render())}));return()=>{u(),n(),m(),p&&p()}}getProps(){const r=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:l=!1,dragPropagation:d=!1,dragConstraints:m=!1,dragElastic:u=Fx,dragMomentum:p=!0}=r;return{...r,drag:n,dragDirectionLock:l,dragPropagation:d,dragConstraints:m,dragElastic:u,dragMomentum:p}}}function gm(s,r,n){return(r===!0||r===s)&&(n===null||n===s)}function RE(s,r=10){let n=null;return Math.abs(s.y)>r?n="y":Math.abs(s.x)>r&&(n="x"),n}class _E extends Xl{constructor(r){super(r),this.removeGroupControls=qn,this.removeListeners=qn,this.controls=new OE(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qn}unmount(){this.removeGroupControls(),this.removeListeners()}}const gj=s=>(r,n)=>{s&&Pa.postRender(()=>s(r,n))};class ME extends Xl{constructor(){super(...arguments),this.removePointerDownListener=qn}onPointerDown(r){this.session=new c1(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:o1(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:n,onPan:l,onPanEnd:d}=this.node.getProps();return{onSessionStart:gj(r),onStart:gj(n),onMove:l,onEnd:(m,u)=>{delete this.session,d&&Pa.postRender(()=>d(m,u))}}}mount(){this.removePointerDownListener=Rd(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Em={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let sx=!1;class zE extends y.Component{componentDidMount(){const{visualElement:r,layoutGroup:n,switchLayoutGroup:l,layoutId:d}=this.props,{projection:m}=r;m&&(n.group&&n.group.add(m),l&&l.register&&d&&l.register(m),sx&&m.root.didUpdate(),m.addEventListener("animationComplete",()=>{this.safeToRemove()}),m.setOptions({...m.options,onExitComplete:()=>this.safeToRemove()})),Em.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:n,visualElement:l,drag:d,isPresent:m}=this.props,{projection:u}=l;return u&&(u.isPresent=m,sx=!0,d||r.layoutDependency!==n||n===void 0||r.isPresent!==m?u.willUpdate():this.safeToRemove(),r.isPresent!==m&&(m?u.promote():u.relegate()||Pa.postRender(()=>{const p=u.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),_f.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:n,switchLayoutGroup:l}=this.props,{projection:d}=r;sx=!0,d&&(d.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(d),l&&l.deregister&&l.deregister(d))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function u1(s){const[r,n]=RN(),l=y.useContext(hf);return e.jsx(zE,{...s,layoutGroup:l,switchLayoutGroup:y.useContext(HN),isPresent:r,safeToRemove:n})}function LE(s,r,n){const l=Nr(s)?s:Nc(s);return l.start(Hf("",l,r,n)),l.animation}const $E=(s,r)=>s.depth-r.depth;class FE{constructor(){this.children=[],this.isDirty=!1}add(r){ff(this.children,r),this.isDirty=!0}remove(r){gf(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort($E),this.isDirty=!1,this.children.forEach(r)}}function UE(s,r){const n=rn.now(),l=({timestamp:d})=>{const m=d-n;m>=r&&(Zl(l),s(m-r))};return Pa.setup(l,!0),()=>Zl(l)}const m1=["TopLeft","TopRight","BottomLeft","BottomRight"],IE=m1.length,bj=s=>typeof s=="string"?parseFloat(s):s,yj=s=>typeof s=="number"||us.test(s);function BE(s,r,n,l,d,m){d?(s.opacity=Oa(0,n.opacity??1,VE(l)),s.opacityExit=Oa(r.opacity??1,0,qE(l))):m&&(s.opacity=Oa(r.opacity??1,n.opacity??1,l));for(let u=0;u<IE;u++){const p=`border${m1[u]}Radius`;let g=jj(r,p),h=jj(n,p);if(g===void 0&&h===void 0)continue;g||(g=0),h||(h=0),g===0||h===0||yj(g)===yj(h)?(s[p]=Math.max(Oa(bj(g),bj(h),l),0),(_i.test(h)||_i.test(g))&&(s[p]+="%")):s[p]=h}(r.rotate||n.rotate)&&(s.rotate=Oa(r.rotate||0,n.rotate||0,l))}function jj(s,r){return s[r]!==void 0?s[r]:s.borderRadius}const VE=h1(0,.5,Jv),qE=h1(.5,.95,qn);function h1(s,r,n){return l=>l<s?0:l>r?1:n(Ud(s,r,l))}function vj(s,r){s.min=r.min,s.max=r.max}function ci(s,r){vj(s.x,r.x),vj(s.y,r.y)}function Nj(s,r){s.translate=r.translate,s.scale=r.scale,s.originPoint=r.originPoint,s.origin=r.origin}function wj(s,r,n,l,d){return s-=r,s=Fm(s,1/n,l),d!==void 0&&(s=Fm(s,1/d,l)),s}function HE(s,r=0,n=1,l=.5,d,m=s,u=s){if(_i.test(r)&&(r=parseFloat(r),r=Oa(u.min,u.max,r/100)-u.min),typeof r!="number")return;let p=Oa(m.min,m.max,l);s===m&&(p-=r),s.min=wj(s.min,r,n,p,d),s.max=wj(s.max,r,n,p,d)}function Sj(s,r,[n,l,d],m,u){HE(s,r[n],r[l],r[d],r.scale,m,u)}const GE=["x","scaleX","originX"],QE=["y","scaleY","originY"];function Cj(s,r,n,l){Sj(s.x,r,GE,n?n.x:void 0,l?l.x:void 0),Sj(s.y,r,QE,n?n.y:void 0,l?l.y:void 0)}function Aj(s){return s.translate===0&&s.scale===1}function p1(s){return Aj(s.x)&&Aj(s.y)}function Ej(s,r){return s.min===r.min&&s.max===r.max}function YE(s,r){return Ej(s.x,r.x)&&Ej(s.y,r.y)}function Tj(s,r){return Math.round(s.min)===Math.round(r.min)&&Math.round(s.max)===Math.round(r.max)}function x1(s,r){return Tj(s.x,r.x)&&Tj(s.y,r.y)}function kj(s){return Lr(s.x)/Lr(s.y)}function Pj(s,r){return s.translate===r.translate&&s.scale===r.scale&&s.originPoint===r.originPoint}class WE{constructor(){this.members=[]}add(r){ff(this.members,r),r.scheduleRender()}remove(r){if(gf(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(r){const n=this.members.findIndex(d=>r===d);if(n===0)return!1;let l;for(let d=n;d>=0;d--){const m=this.members[d];if(m.isPresent!==!1){l=m;break}}return l?(this.promote(l),!0):!1}promote(r,n){const l=this.lead;if(r!==l&&(this.prevLead=l,this.lead=r,r.show(),l)){l.instance&&l.scheduleRender(),r.scheduleRender(),r.resumeFrom=l,n&&(r.resumeFrom.preserveOpacity=!0),l.snapshot&&(r.snapshot=l.snapshot,r.snapshot.latestValues=l.animationValues||l.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:d}=r.options;d===!1&&l.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:n,resumingFrom:l}=r;n.onExitComplete&&n.onExitComplete(),l&&l.options.onExitComplete&&l.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ZE(s,r,n){let l="";const d=s.x.translate/r.x,m=s.y.translate/r.y,u=(n==null?void 0:n.z)||0;if((d||m||u)&&(l=`translate3d(${d}px, ${m}px, ${u}px) `),(r.x!==1||r.y!==1)&&(l+=`scale(${1/r.x}, ${1/r.y}) `),n){const{transformPerspective:h,rotate:j,rotateX:v,rotateY:w,skewX:E,skewY:A}=n;h&&(l=`perspective(${h}px) ${l}`),j&&(l+=`rotate(${j}deg) `),v&&(l+=`rotateX(${v}deg) `),w&&(l+=`rotateY(${w}deg) `),E&&(l+=`skewX(${E}deg) `),A&&(l+=`skewY(${A}deg) `)}const p=s.x.scale*r.x,g=s.y.scale*r.y;return(p!==1||g!==1)&&(l+=`scale(${p}, ${g})`),l||"none"}const ax=["","X","Y","Z"],KE=1e3;let JE=0;function rx(s,r,n,l){const{latestValues:d}=r;d[s]&&(n[s]=d[s],r.setStaticValue(s,0),l&&(l[s]=0))}function f1(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:r}=s.options;if(!r)return;const n=t1(r);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:d,layoutId:m}=s.options;window.MotionCancelOptimisedAnimation(n,"transform",Pa,!(d||m))}const{parent:l}=s;l&&!l.hasCheckedOptimisedAppear&&f1(l)}function g1({attachResizeListener:s,defaultParent:r,measureScroll:n,checkIsScrollRoot:l,resetTransform:d}){return class{constructor(u={},p=r==null?void 0:r()){this.id=JE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tT),this.nodes.forEach(nT),this.nodes.forEach(iT),this.nodes.forEach(sT)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new FE)}addEventListener(u,p){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new jf),this.eventHandlers.get(u).add(p)}notifyListeners(u,...p){const g=this.eventHandlers.get(u);g&&g.notify(...p)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=ON(u)&&!qC(u),this.instance=u;const{layoutId:p,layout:g,visualElement:h}=this.options;if(h&&!h.current&&h.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||p)&&(this.isLayoutDirty=!0),s){let j,v=0;const w=()=>this.root.updateBlockedByResize=!1;Pa.read(()=>{v=window.innerWidth}),s(u,()=>{const E=window.innerWidth;E!==v&&(v=E,this.root.updateBlockedByResize=!0,j&&j(),j=UE(w,250),Em.hasAnimatedSinceResize&&(Em.hasAnimatedSinceResize=!1,this.nodes.forEach(Rj)))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&h&&(p||g)&&this.addEventListener("didUpdate",({delta:j,hasLayoutChanged:v,hasRelativeLayoutChanged:w,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||h.getDefaultTransition()||uT,{onLayoutAnimationStart:P,onLayoutAnimationComplete:q}=h.getProps(),V=!this.targetLayout||!x1(this.targetLayout,E),M=!v&&w;if(this.options.layoutRoot||this.resumeFrom||M||v&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...Of(A,"layout"),onPlay:P,onComplete:q};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(j,M)}else v||Rj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Zl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lT),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&f1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let j=0;j<this.path.length;j++){const v=this.path[j];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:p,layout:g}=this.options;if(p===void 0&&!g)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Dj);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Oj);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rT),this.nodes.forEach(XE),this.nodes.forEach(eT)):this.nodes.forEach(Oj),this.clearAllSnapshots();const p=rn.now();br.delta=cl(0,1e3/60,p-br.timestamp),br.timestamp=p,br.isProcessing=!0,Gp.update.process(br),Gp.preRender.process(br),Gp.render.process(br),br.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_f.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(aT),this.sharedNodes.forEach(oT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pa.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pa.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Lr(this.snapshot.measuredBox.x)&&!Lr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(p=!1),p&&this.instance){const g=l(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:g,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!d)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!p1(this.projectionDelta),g=this.getTransformTemplate(),h=g?g(this.latestValues,""):void 0,j=h!==this.prevTransformTemplateValue;u&&this.instance&&(p||fo(this.latestValues)||j)&&(d(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const p=this.measurePageBox();let g=this.removeElementScroll(p);return u&&(g=this.removeTransform(g)),mT(g),{animationId:this.root.animationId,measuredBox:p,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:u}=this.options;if(!u)return nr();const p=u.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(hT))){const{scroll:j}=this.root;j&&(uc(p.x,j.offset.x),uc(p.y,j.offset.y))}return p}removeElementScroll(u){var g;const p=nr();if(ci(p,u),(g=this.scroll)!=null&&g.wasRoot)return p;for(let h=0;h<this.path.length;h++){const j=this.path[h],{scroll:v,options:w}=j;j!==this.root&&v&&w.layoutScroll&&(v.wasRoot&&ci(p,u),uc(p.x,v.offset.x),uc(p.y,v.offset.y))}return p}applyTransform(u,p=!1){const g=nr();ci(g,u);for(let h=0;h<this.path.length;h++){const j=this.path[h];!p&&j.options.layoutScroll&&j.scroll&&j!==j.root&&mc(g,{x:-j.scroll.offset.x,y:-j.scroll.offset.y}),fo(j.latestValues)&&mc(g,j.latestValues)}return fo(this.latestValues)&&mc(g,this.latestValues),g}removeTransform(u){const p=nr();ci(p,u);for(let g=0;g<this.path.length;g++){const h=this.path[g];if(!h.instance||!fo(h.latestValues))continue;Rx(h.latestValues)&&h.updateSnapshot();const j=nr(),v=h.measurePageBox();ci(j,v),Cj(p,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,j)}return fo(this.latestValues)&&Cj(p,this.latestValues),p}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==br.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var E;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==p;if(!(u||g&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:j,layoutId:v}=this.options;if(!this.layout||!(j||v))return;this.resolvedRelativeTargetAt=br.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=nr(),this.targetWithTransforms=nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vE(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ci(this.target,this.layout.layoutBox),WN(this.target,this.targetDelta)):ci(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Rx(this.parent.latestValues)||YN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,p,g){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nr(),this.relativeTargetOrigin=nr(),Um(this.relativeTargetOrigin,p,g),ci(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var A;const u=this.getLead(),p=!!this.resumingFrom||this!==u;let g=!0;if((this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty)&&(g=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===br.timestamp&&(g=!1),g)return;const{layout:h,layoutId:j}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||j))return;ci(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,w=this.treeScale.y;RA(this.layoutCorrected,this.treeScale,this.path,p),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=nr());const{target:E}=u;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Nj(this.prevProjectionDelta.x,this.projectionDelta.x),Nj(this.prevProjectionDelta.y,this.projectionDelta.y)),_d(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==w||!Pj(this.projectionDelta.x,this.prevProjectionDelta.x)||!Pj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var p;if((p=this.options.visualElement)==null||p.scheduleRender(),u){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hc(),this.projectionDelta=hc(),this.projectionDeltaWithTransform=hc()}setAnimationOrigin(u,p=!1){const g=this.snapshot,h=g?g.latestValues:{},j={...this.latestValues},v=hc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const w=nr(),E=g?g.source:void 0,A=this.layout?this.layout.source:void 0,P=E!==A,q=this.getStack(),V=!q||q.members.length<=1,M=!!(P&&!V&&this.options.crossfade===!0&&!this.path.some(dT));this.animationProgress=0;let R;this.mixTargetDelta=ae=>{const H=ae/1e3;_j(v.x,u.x,H),_j(v.y,u.y,H),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Um(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cT(this.relativeTarget,this.relativeTargetOrigin,w,H),R&&YE(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=nr()),ci(R,this.relativeTarget)),P&&(this.animationValues=j,BE(j,h,this.latestValues,H,M,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var p,g,h;this.notifyListeners("animationStart"),(p=this.currentAnimation)==null||p.stop(),(h=(g=this.resumingFrom)==null?void 0:g.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Zl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pa.update(()=>{Em.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Nc(0)),this.currentAnimation=LE(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:j=>{this.mixTargetDelta(j),u.onUpdate&&u.onUpdate(j)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:p,target:g,layout:h,latestValues:j}=u;if(!(!p||!g||!h)){if(this!==u&&this.layout&&h&&b1(this.options.animationType,this.layout.layoutBox,h.layoutBox)){g=this.target||nr();const v=Lr(this.layout.layoutBox.x);g.x.min=u.target.x.min,g.x.max=g.x.min+v;const w=Lr(this.layout.layoutBox.y);g.y.min=u.target.y.min,g.y.max=g.y.min+w}ci(p,g),mc(p,j),_d(this.projectionDeltaWithTransform,this.layoutCorrected,p,j)}}registerSharedNode(u,p){this.sharedNodes.has(u)||this.sharedNodes.set(u,new WE),this.sharedNodes.get(u).add(p);const h=p.options.initialPromotionConfig;p.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(p):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var p;const{layoutId:u}=this.options;return u?((p=this.getStack())==null?void 0:p.lead)||this:this}getPrevLead(){var p;const{layoutId:u}=this.options;return u?(p=this.getStack())==null?void 0:p.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:p,preserveFollowOpacity:g}={}){const h=this.getStack();h&&h.promote(this,g),u&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let p=!1;const{latestValues:g}=u;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(p=!0),!p)return;const h={};g.z&&rx("z",u,h,this.animationValues);for(let j=0;j<ax.length;j++)rx(`rotate${ax[j]}`,u,h,this.animationValues),rx(`skew${ax[j]}`,u,h,this.animationValues);u.render();for(const j in h)u.setStaticValue(j,h[j]),this.animationValues&&(this.animationValues[j]=h[j]);u.scheduleRender()}applyProjectionStyles(u,p){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=Am(p==null?void 0:p.pointerEvents)||"",u.transform=g?g(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=Am(p==null?void 0:p.pointerEvents)||""),this.hasProjected&&!fo(this.latestValues)&&(u.transform=g?g({},""):"none",this.hasProjected=!1);return}u.visibility="";const j=h.animationValues||h.latestValues;this.applyTransformsToTarget();let v=ZE(this.projectionDeltaWithTransform,this.treeScale,j);g&&(v=g(j,v)),u.transform=v;const{x:w,y:E}=this.projectionDelta;u.transformOrigin=`${w.origin*100}% ${E.origin*100}% 0`,h.animationValues?u.opacity=h===this?j.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:j.opacityExit:u.opacity=h===this?j.opacity!==void 0?j.opacity:"":j.opacityExit!==void 0?j.opacityExit:0;for(const A in Ox){if(j[A]===void 0)continue;const{correct:P,applyTo:q,isCSSVariable:V}=Ox[A],M=v==="none"?j[A]:P(j[A],h);if(q){const R=q.length;for(let ae=0;ae<R;ae++)u[q[ae]]=M}else V?this.options.visualElement.renderState.vars[A]=M:u[A]=M}this.options.layoutId&&(u.pointerEvents=h===this?Am(p==null?void 0:p.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var p;return(p=u.currentAnimation)==null?void 0:p.stop()}),this.root.nodes.forEach(Dj),this.root.sharedNodes.clear()}}}function XE(s){s.updateLayout()}function eT(s){var n;const r=((n=s.resumeFrom)==null?void 0:n.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&r&&s.hasListeners("didUpdate")){const{layoutBox:l,measuredBox:d}=s.layout,{animationType:m}=s.options,u=r.source!==s.layout.source;m==="size"?Ln(v=>{const w=u?r.measuredBox[v]:r.layoutBox[v],E=Lr(w);w.min=l[v].min,w.max=w.min+E}):b1(m,r.layoutBox,l)&&Ln(v=>{const w=u?r.measuredBox[v]:r.layoutBox[v],E=Lr(l[v]);w.max=w.min+E,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[v].max=s.relativeTarget[v].min+E)});const p=hc();_d(p,l,r.layoutBox);const g=hc();u?_d(g,s.applyTransform(d,!0),r.measuredBox):_d(g,l,r.layoutBox);const h=!p1(p);let j=!1;if(!s.resumeFrom){const v=s.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:w,layout:E}=v;if(w&&E){const A=nr();Um(A,r.layoutBox,w.layoutBox);const P=nr();Um(P,l,E.layoutBox),x1(A,P)||(j=!0),v.options.layoutRoot&&(s.relativeTarget=P,s.relativeTargetOrigin=A,s.relativeParent=v)}}}s.notifyListeners("didUpdate",{layout:l,snapshot:r,delta:g,layoutDelta:p,hasLayoutChanged:h,hasRelativeLayoutChanged:j})}else if(s.isLead()){const{onExitComplete:l}=s.options;l&&l()}s.options.transition=void 0}function tT(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function sT(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function aT(s){s.clearSnapshot()}function Dj(s){s.clearMeasurements()}function Oj(s){s.isLayoutDirty=!1}function rT(s){const{visualElement:r}=s.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),s.resetTransform()}function Rj(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function nT(s){s.resolveTargetDelta()}function iT(s){s.calcProjection()}function lT(s){s.resetSkewAndRotation()}function oT(s){s.removeLeadSnapshot()}function _j(s,r,n){s.translate=Oa(r.translate,0,n),s.scale=Oa(r.scale,1,n),s.origin=r.origin,s.originPoint=r.originPoint}function Mj(s,r,n,l){s.min=Oa(r.min,n.min,l),s.max=Oa(r.max,n.max,l)}function cT(s,r,n,l){Mj(s.x,r.x,n.x,l),Mj(s.y,r.y,n.y,l)}function dT(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const uT={duration:.45,ease:[.4,0,.1,1]},zj=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),Lj=zj("applewebkit/")&&!zj("chrome/")?Math.round:qn;function $j(s){s.min=Lj(s.min),s.max=Lj(s.max)}function mT(s){$j(s.x),$j(s.y)}function b1(s,r,n){return s==="position"||s==="preserve-aspect"&&!jE(kj(r),kj(n),.2)}function hT(s){var r;return s!==s.root&&((r=s.scroll)==null?void 0:r.wasRoot)}const pT=g1({attachResizeListener:(s,r)=>qd(s,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nx={current:void 0},y1=g1({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!nx.current){const s=new pT({});s.mount(window),s.setOptions({layoutScroll:!0}),nx.current=s}return nx.current},resetTransform:(s,r)=>{s.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),xT={pan:{Feature:ME},drag:{Feature:_E,ProjectionNode:y1,MeasureLayout:u1}};function Fj(s,r,n){const{props:l}=s;s.animationState&&l.whileHover&&s.animationState.setActive("whileHover",n==="Start");const d="onHover"+n,m=l[d];m&&Pa.postRender(()=>m(r,eu(r)))}class fT extends Xl{mount(){const{current:r}=this.node;r&&(this.unmount=FC(r,(n,l)=>(Fj(this.node,l,"Start"),d=>Fj(this.node,d,"End"))))}unmount(){}}class gT extends Xl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kd(qd(this.node.current,"focus",()=>this.onFocus()),qd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Uj(s,r,n){const{props:l}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&l.whileTap&&s.animationState.setActive("whileTap",n==="Start");const d="onTap"+(n==="End"?"":n),m=l[d];m&&Pa.postRender(()=>m(r,eu(r)))}class bT extends Xl{mount(){const{current:r}=this.node;r&&(this.unmount=VC(r,(n,l)=>(Uj(this.node,l,"Start"),(d,{success:m})=>Uj(this.node,d,m?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ux=new WeakMap,ix=new WeakMap,yT=s=>{const r=Ux.get(s.target);r&&r(s)},jT=s=>{s.forEach(yT)};function vT({root:s,...r}){const n=s||document;ix.has(n)||ix.set(n,{});const l=ix.get(n),d=JSON.stringify(r);return l[d]||(l[d]=new IntersectionObserver(jT,{root:s,...r})),l[d]}function NT(s,r,n){const l=vT(r);return Ux.set(s,n),l.observe(s),()=>{Ux.delete(s),l.unobserve(s)}}const wT={some:0,all:1};class ST extends Xl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:n,margin:l,amount:d="some",once:m}=r,u={root:n?n.current:void 0,rootMargin:l,threshold:typeof d=="number"?d:wT[d]},p=g=>{const{isIntersecting:h}=g;if(this.isInView===h||(this.isInView=h,m&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:j,onViewportLeave:v}=this.node.getProps(),w=h?j:v;w&&w(g)};return NT(this.node.current,u,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:n}=this.node;["amount","margin","root"].some(CT(r,n))&&this.startObserver()}unmount(){}}function CT({viewport:s={}},{viewport:r={}}={}){return n=>s[n]!==r[n]}const AT={inView:{Feature:ST},tap:{Feature:bT},focus:{Feature:gT},hover:{Feature:fT}},ET={layout:{ProjectionNode:y1,MeasureLayout:u1}},TT={...pE,...AT,...xT,...ET},st=PA(TT,VA),kT=()=>{var R,ae,H,D,k,Q;const[s,r]=y.useState(!1),[n,l]=y.useState(!1),[d,m]=y.useState(!1),[u,p]=y.useState(null),g=Gn(),h=Ha();y.useEffect(()=>{if(typeof window>"u")return;const W=localStorage.getItem("token"),te=localStorage.getItem("user");if(W&&te)try{p(JSON.parse(te))}catch(ie){console.error("Error parsing user data:",ie),localStorage.removeItem("token"),localStorage.removeItem("user")}else p(null);w(!0)},[g.pathname]),y.useEffect(()=>{const W=()=>{r(window.scrollY>20)};return window.addEventListener("scroll",W),()=>window.removeEventListener("scroll",W)},[]),y.useEffect(()=>{const W=te=>{te.target.closest(".profile-dropdown")||m(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const j=[{label:"Home",path:"/"},{label:"Services",path:"/digital-print"},{label:"Upload",path:"/upload"},{label:"About",path:"/about"},{label:"Policy",path:"/policy"},{label:"Reviews",path:"/reviews"}],[v,w]=qa.useState(!1),E=j,A=W=>W==="/"&&g.pathname!=="/"?!1:g.pathname.startsWith(W),P=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),p(null),m(!1),h("/"),window.location.reload()},q=W=>!W||W.length===0?"??":W.split(" ").map(te=>te[0]).join("").toUpperCase().slice(0,2),V=W=>{const te=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-orange-500","bg-teal-500"];if(!W||W.length===0)return te[0];const ie=W.length%te.length;return te[ie]},M=g.pathname==="/login"||g.pathname==="/signup";return e.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${s?"bg-white/95 backdrop-blur-md shadow-sm py-2":"bg-white py-2"}`,children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center h-16 relative",children:[e.jsx(st.div,{initial:!1,animate:{left:M?"50%":"0px",x:M?"-50%":"0%"},transition:{duration:.6,ease:[.4,0,.2,1]},className:"flex items-center absolute",children:e.jsx(Ps,{to:"/",className:"flex items-center gap-2 group cursor-pointer h-full",onClick:W=>{M?(W.preventDefault(),h("/")):g.pathname==="/"&&window.scrollTo({top:0,behavior:"smooth"})},children:e.jsx(st.img,{src:"/logo.svg",alt:"Prints24 Logo",className:`object-contain group-hover:scale-105 transition-all duration-300 cursor-pointer ${M?"h-12 sm:h-14 md:h-16 w-auto":"h-12 w-auto sm:h-14 md:h-16"}`,initial:!1})})}),!M&&e.jsxs("div",{className:"flex-1 flex items-center justify-end",children:[e.jsx("div",{className:"hidden md:flex items-center space-x-6",children:E.map(W=>e.jsxs(Ps,{to:W.path,className:`text-sm font-medium transition-colors duration-200 relative group ${A(W.path)?"text-cream-800 font-semibold":"text-cream-600 hover:text-cream-900"}`,children:[W.label,e.jsx("span",{className:`absolute -bottom-1 left-0 w-0 h-0.5 bg-cream-800 transition-all duration-300 group-hover:w-full ${A(W.path)?"w-full":""}`})]},W.path))}),e.jsx("div",{className:"hidden md:flex items-center space-x-3 ml-8",children:!u||!v?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{to:"/login",children:e.jsx("button",{className:"text-cream-900 font-medium text-base hover:text-cream-600 transition-colors px-4 py-2",children:"Login"})}),e.jsx(Ps,{to:"/signup",children:e.jsx("button",{className:"bg-cream-900 text-cream-50 px-6 py-2.5 rounded-full text-base font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Sign Up"})})]}):e.jsxs("div",{className:"relative profile-dropdown",children:[e.jsxs("button",{onClick:()=>m(!d),className:"flex items-center gap-2 p-2 rounded-lg hover:bg-cream-100 transition-colors",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${V(u.name||u.email||"User")} flex items-center justify-center text-white text-sm font-bold`,children:q(u.name||((R=u.email)==null?void 0:R.split("@")[0])||"User")}),e.jsx("span",{className:"text-cream-700 text-sm font-medium",children:(u.name||((ae=u.email)==null?void 0:ae.split("@")[0])||"User").split(" ")[0]})]}),e.jsx(ba,{children:d&&e.jsxs(st.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-xl shadow-lg border border-cream-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-cream-100",children:[" ",e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${V(u.name||u.email||"User")} flex items-center justify-center text-white font-bold`,children:q(u.name||((H=u.email)==null?void 0:H.split("@")[0])||"User")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-cream-900 truncate",children:u.name||((D=u.email)==null?void 0:D.split("@")[0])||"User"}),e.jsx("p",{className:"text-xs text-cream-600 truncate",children:u.email}),e.jsxs("span",{className:"inline-block mt-1 px-2 py-1 bg-cream-100 text-cream-700 text-xs rounded-full capitalize",children:[" ",u.role]})]})]})]}),e.jsxs("div",{className:"py-2",children:[" ",e.jsxs("button",{onClick:()=>{h("/profile"),m(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-cream-700 hover:bg-cream-50 transition-colors",children:[e.jsx(In,{size:16}),"My Profile"]}),u.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{h("/admin/dashboard"),m(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-cream-700 hover:bg-cream-50 transition-colors",children:[e.jsx(Rr,{size:16}),"Admin Dashboard"]}),e.jsxs("button",{onClick:()=>{h("/admin/payment-gateways"),m(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-cream-700 hover:bg-cream-50 transition-colors",children:[e.jsx(Vn,{size:16}),"Payment Gateways"]})]}),u.role==="emp"&&e.jsxs("button",{onClick:()=>{h("/employee/dashboard"),m(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-cream-700 hover:bg-cream-50 transition-colors",children:[e.jsx(ia,{size:16}),"Employee Dashboard"]})]}),e.jsxs("div",{className:"border-t border-cream-100 pt-2",children:[" ",e.jsxs("button",{onClick:P,className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Sy,{size:16}),"Logout"]})]})]})})]})})]}),!M&&e.jsx("div",{className:"md:hidden",children:e.jsxs("button",{onClick:()=>l(!n),className:"text-cream-900 focus:outline-none p-1",children:[n?e.jsx(ss,{size:28}):e.jsx(W5,{size:28})," "]})})]})}),!M&&e.jsx(ba,{children:n&&e.jsx(st.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-cream-50 border-t border-cream-200",children:e.jsxs("div",{className:"px-4 pt-2 pb-4 space-y-2",children:[" ",E.map(W=>e.jsx(Ps,{to:W.path,onClick:()=>l(!1),className:`block px-3 py-2 rounded-md text-base font-medium ${A(W.path)?"bg-cream-100 text-cream-900":"text-cream-600 hover:bg-cream-100 hover:text-cream-900"}`,children:W.label},W.path)),e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200 flex flex-col space-y-3",children:[" ",!u||!v?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{h("/login"),l(!1)},className:"w-full text-center text-cream-900 font-medium text-base py-3",children:"Login"}),e.jsx("button",{onClick:()=>{h("/signup"),l(!1)},className:"w-full bg-cream-900 text-cream-50 py-3 rounded-lg font-medium text-base",children:"Sign Up"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-3 py-2 bg-cream-100 rounded-lg",children:[" ",e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${V(u.name||u.email||"User")} flex items-center justify-center text-white text-sm font-bold`,children:q(u.name||((k=u.email)==null?void 0:k.split("@")[0])||"User")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-cream-900",children:u.name||((Q=u.email)==null?void 0:Q.split("@")[0])||"User"}),e.jsx("p",{className:"text-xs text-cream-600",children:u.email})]})]})]}),e.jsxs("button",{onClick:()=>{h("/profile"),l(!1)},className:"w-full text-center text-cream-900 font-medium py-2 flex items-center justify-center gap-2",children:[e.jsx(In,{size:16}),"My Profile"]}),u.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{h("/admin/dashboard"),l(!1)},className:"w-full text-center text-cream-900 font-medium py-2 flex items-center justify-center gap-2",children:[e.jsx(Rr,{size:16}),"Admin Dashboard"]}),e.jsxs("button",{onClick:()=>{h("/admin/payment-gateways"),l(!1)},className:"w-full text-center text-cream-900 font-medium py-2 flex items-center justify-center gap-2",children:[e.jsx(Vn,{size:16}),"Payment Gateways"]})]}),e.jsxs("button",{onClick:()=>{P(),l(!1)},className:"w-full bg-red-600 text-white py-2.5 rounded-lg font-medium flex items-center justify-center gap-2",children:[e.jsx(Sy,{size:16}),"Logout"]})]})]})]})})})]})},PT=()=>e.jsx("footer",{className:"bg-cream-900 text-cream-100 pt-8 sm:pt-12 md:pt-16 pb-6 sm:pb-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 sm:gap-10 md:gap-12",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("h3",{className:"font-serif text-xl sm:text-2xl font-bold text-cream-50",children:"Prints24"}),e.jsx("p",{className:"text-cream-200 text-xs sm:text-sm leading-relaxed",children:"Modern, fast-growing digital & offset printing company providing creative and high-quality solutions."}),e.jsxs("div",{className:"flex space-x-3 sm:space-x-4 pt-2",children:[e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx(f5,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx($3,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx(M5,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx($5,{size:18,className:"sm:w-5 sm:h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-serif text-base sm:text-lg font-semibold text-cream-50 mb-4 sm:mb-6",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[e.jsx("li",{children:e.jsx(Ps,{to:"/",className:"hover:text-white transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx(Ps,{to:"/digital-print",className:"hover:text-white transition-colors",children:"Digital Print"})}),e.jsx("li",{children:e.jsx(Ps,{to:"/upload",className:"hover:text-white transition-colors",children:"Upload Files"})}),e.jsx("li",{children:e.jsx(Ps,{to:"/about",className:"hover:text-white transition-colors",children:"About Us"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-serif text-base sm:text-lg font-semibold text-cream-50 mb-4 sm:mb-6",children:"Customer Service"}),e.jsxs("ul",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[e.jsx("li",{children:e.jsx(Ps,{to:"/policy",className:"hover:text-white transition-colors",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(Ps,{to:"/policy",className:"hover:text-white transition-colors",children:"Terms & Conditions"})}),e.jsx("li",{children:e.jsx(Ps,{to:"/policy",className:"hover:text-white transition-colors",children:"Shipping Policy"})}),e.jsx("li",{children:e.jsx(Ps,{to:"/login",className:"hover:text-white transition-colors",children:"My Account"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-serif text-base sm:text-lg font-semibold text-cream-50 mb-4 sm:mb-6",children:"Contact"}),e.jsxs("ul",{className:"space-y-3 sm:space-y-4 text-xs sm:text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx(sn,{size:16,className:"sm:w-[18px] sm:h-[18px] mt-0.5 shrink-0"}),e.jsxs("span",{children:["123 Print Street, Creative District,",e.jsx("br",{}),"New York, NY 10001"]})]}),e.jsxs("li",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(fc,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),e.jsx("span",{children:"+1 (555) 123-4567"})]}),e.jsxs("li",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ql,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),e.jsx("span",{children:"support@prints24.com"})]})]})]})]}),e.jsx("div",{className:"border-t border-cream-800 mt-8 sm:mt-12 pt-6 sm:pt-8 text-center text-xs sm:text-sm text-cream-400",children:e.jsx("p",{children:" 2024 Prints24. All rights reserved."})})]})}),DT=()=>{const[s,r]=qa.useState(null);return qa.useEffect(()=>{typeof window<"u"&&Zd(()=>Promise.resolve().then(()=>t9),[]).then(n=>{r(()=>n.Toaster)})},[]),s?e.jsx(s,{position:"bottom-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}):null},OT=()=>{const s=Gn();qa.useEffect(()=>{typeof window<"u"&&window.scrollTo(0,0)},[s.pathname]);const[r,n]=qa.useState(!1);return qa.useEffect(()=>{const l=setTimeout(()=>{n(!0)},100);return()=>clearTimeout(l)},[]),e.jsxs("div",{className:"min-h-screen flex flex-col font-sans text-cream-900 bg-cream-50",children:[e.jsx(kT,{}),e.jsx("main",{className:"flex-grow pt-16",children:e.jsx("div",{children:e.jsx("div",{children:e.jsx(Q4,{})})},s.pathname)}),e.jsx(PT,{}),e.jsx(DT,{})]})},lx=[{id:1,image:"/banner.jpg",alt:"Prints 24 Banner"}],RT=()=>{const[s,r]=y.useState(0);return y.useEffect(()=>{const n=setInterval(()=>{r(l=>(l+1)%lx.length)},5e3);return()=>clearInterval(n)},[]),e.jsxs("section",{className:"relative mt-2 mr-4 sm:mt-4 md:mt-6 h-[70vh] sm:h-[50vh] md:h-[55vh] lg:h-[60vh] xl:h-[65vh] min-h-[420px] sm:min-h-[380px] md:min-h-[400px] lg:min-h-[450px] xl:min-h-[500px] max-h-[750px] sm:max-h-[600px] md:max-h-[650px] lg:max-h-[700px] xl:max-h-[750px] w-full overflow-hidden bg-cream-900 rounded-xl sm:rounded-2xl md:rounded-3xl mx-2 sm:mx-4 md:mx-6 lg:mx-8",children:[e.jsx(ba,{mode:"wait",children:e.jsxs(st.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:1.5},className:"absolute inset-0",children:[e.jsx("img",{src:lx[s].image,alt:lx[s].alt,className:"w-full h-full object-cover",loading:"eager"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-black/60 backdrop-blur-[1px] sm:backdrop-blur-[2px]"})]},s)}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 z-10",children:e.jsxs(st.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-3xl md:max-w-4xl lg:max-w-5xl xl:max-w-6xl w-full",children:[e.jsx("div",{className:"inline-block py-2 px-4 sm:py-2.5 sm:px-6 md:py-3 md:px-8 lg:py-4 lg:px-10 rounded-full bg-cream-50/95 backdrop-blur-sm sm:backdrop-blur-md border border-white/20 mb-4 sm:mb-6 md:mb-8 lg:mb-10",children:e.jsx("span",{className:"text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl font-bold text-gray-800 uppercase tracking-wider",children:"WELCOME TO PRINTS 24"})}),e.jsxs("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-4 sm:mb-5 md:mb-6 lg:mb-8 leading-tight drop-shadow-lg px-2 sm:px-4",children:["Premium Printing ",e.jsx("br",{className:"hidden sm:block"}),e.jsx("span",{className:"text-cream-300 italic",children:"Simplified"})]}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl text-cream-100 mb-6 sm:mb-8 md:mb-10 lg:mb-12 max-w-xl sm:max-w-2xl md:max-w-3xl mx-auto leading-relaxed drop-shadow-md px-2 sm:px-4",children:"India's easiest and fastest printing platform. Design your personality and receive premium prints delivered right to your desk."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4 md:gap-5 lg:gap-6 px-4 sm:px-6 md:px-8",children:[e.jsxs(Ps,{to:"/signup",className:"bg-cream-50 text-cream-900 px-5 py-2.5 sm:px-6 sm:py-3 md:px-7 md:py-3.5 lg:px-8 lg:py-4 rounded-full text-sm sm:text-base md:text-lg lg:text-xl font-bold hover:bg-white transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 sm:hover:-translate-y-1 flex items-center justify-center gap-2 w-full sm:w-auto sm:min-w-[180px] md:min-w-[200px] lg:min-w-[220px]",children:[e.jsx(Ed,{size:16,className:"sm:w-4 sm:h-4 md:w-5 md:h-5 lg:w-6 lg:h-6"}),e.jsx("span",{children:"Sign Up Now"})]}),e.jsxs(Ps,{to:"/digital-print",className:"bg-cream-50 text-cream-900 px-5 py-2.5 sm:px-6 sm:py-3 md:px-7 md:py-3.5 lg:px-8 lg:py-4 rounded-full text-sm sm:text-base md:text-lg lg:text-xl font-bold hover:bg-white transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 sm:hover:-translate-y-1 flex items-center justify-center gap-2 w-full sm:w-auto sm:min-w-[180px] md:min-w-[200px] lg:min-w-[220px]",children:[e.jsx(l5,{size:16,className:"sm:w-4 sm:h-4 md:w-5 md:h-5 lg:w-6 lg:h-6"}),e.jsx("span",{children:"Explore Products"})]})]})]})})]})},_T=[{id:"cards",title:"Visiting Cards",description:"Premium matte, gloss, and textured business cards.",icon:Vn},{id:"flyers",title:"Flyers & Brochures",description:"High-quality marketing materials for your business.",icon:wr},{id:"idcards",title:"ID Cards",description:"Durable employee and student identification cards.",icon:FS},{id:"letterhead",title:"Letterhead",description:"Professional official stationary.",icon:wr},{id:"stickers",title:"Stickers",description:"Custom shapes and sizes for branding.",icon:T3},{id:"invites",title:"Invitations",description:"Elegant cards for weddings and events.",icon:Ql},{id:"banners",title:"Flex & Banners",description:"Large format printing for maximum visibility.",icon:Pi},{id:"more",title:"Digital Printing",description:"Custom solutions for all your printing needs.",icon:Uv}],MT={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},zT={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},LT=({children:s,categories:r,loadingCategories:n})=>e.jsx("section",{className:"pt-2 sm:pt-4 pb-6 sm:pb-8 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-2 sm:mb-4",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl md:text-4xl font-bold text-cream-900 mb-3 sm:mb-4",children:"Our Products"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600 max-w-xl mx-auto mb-2 sm:mb-3",children:"Select from our wide range of premium printed products specially crafted for you"})]}),!n&&r.length>0&&e.jsxs(e.Fragment,{children:[s,e.jsx("div",{className:"text-center mt-6",children:e.jsxs(Ps,{to:"/digital-print",className:"inline-flex items-center gap-2 bg-cream-900 text-cream-50 px-8 py-3 rounded-full font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1",children:["Explore More",e.jsx($r,{size:18})]})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h3",{className:"font-serif text-3xl font-bold text-cream-900 mb-2",children:"All Services"})}),e.jsx(st.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",variants:MT,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:_T.map(l=>e.jsx(st.div,{variants:zT,children:e.jsx(Ps,{to:"/digital-print",children:e.jsx("div",{className:"group h-full p-8 bg-cream-50 rounded-2xl hover:bg-cream-900 transition-all duration-300 cursor-pointer relative overflow-hidden border border-cream-100 hover:shadow-2xl",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-14 h-14 bg-cream-200 text-cream-900 rounded-xl flex items-center justify-center mb-6 group-hover:bg-cream-800 group-hover:text-cream-50 transition-colors",children:e.jsx(l.icon,{size:28})}),e.jsx("h3",{className:"font-serif text-xl font-semibold mb-3 text-cream-900 group-hover:text-cream-50 transition-colors",children:l.title}),e.jsx("p",{className:"text-cream-600 text-sm group-hover:text-cream-200 transition-colors",children:l.description})]})})})},l.id))})]})]})}),Ij=s=>s>=1536?7:s>=1280?6:s>=1024?5:s>=768?4:s>=640?3:2,$T=({categories:s,loadingCategories:r})=>(y.useEffect(()=>{if(r||s.length===0)return;let n=null,l=!1,d=Date.now(),m=!1;const u=()=>{const M=document.getElementById("category-scroll-container");if(!M)return;l=!0;const R=M.scrollWidth-M.clientWidth,ae=M.scrollLeft,H=window.innerWidth;let D=H/2;if(H>=1280?D=H*.2:H>=1024?D=H*.25:H>=768?D=H*.333:H>=640&&(D=H/2),ae>=R-10)M.scrollTo({left:0,behavior:"smooth"});else{const k=ae+D;k>=R?M.scrollTo({left:R,behavior:"smooth"}):(M.style.scrollBehavior="smooth",M.style.transition="scroll-left 0.8s ease-in-out",M.scrollTo({left:k,behavior:"smooth"}))}setTimeout(()=>{l=!1,d=Date.now(),m=!1,p()},1e3)},p=()=>{if(l)return;const M=m?2e4:1e4,R=Date.now()-d,ae=Math.max(0,M-R);n=setTimeout(()=>{Date.now()-d>=(m?2e4:1e4)?u():(l=!1,p())},ae)},g=()=>{d=Date.now(),m=!1,n&&(clearTimeout(n),n=null),l=!1,p()},h=()=>{d=Date.now(),m=!0,n&&(clearTimeout(n),n=null),l=!1,p()};window.homeCategoryUpdateFromArrow=h;const j=()=>g(),v=()=>g(),w=()=>g(),E=()=>g(),A=()=>g(),P=()=>g(),q=()=>g();window.addEventListener("mousemove",j),window.addEventListener("mousedown",E),window.addEventListener("click",w),window.addEventListener("keydown",A),window.addEventListener("touchstart",P),window.addEventListener("wheel",q);const V=document.getElementById("category-scroll-container");return V&&V.addEventListener("mouseenter",v),d=Date.now(),p(),()=>{n&&clearTimeout(n),window.removeEventListener("mousemove",j),window.removeEventListener("mousedown",E),window.removeEventListener("click",w),window.removeEventListener("keydown",A),window.removeEventListener("touchstart",P),window.removeEventListener("wheel",q),V&&V.removeEventListener("mouseenter",v)}},[r,s.length]),e.jsx("div",{className:"mb-10",children:e.jsxs("div",{className:"relative group/slider overflow-hidden",onMouseEnter:()=>{window.categoryLastInteraction=Date.now()},onMouseLeave:()=>{window.categoryLastInteraction=Date.now()},children:[e.jsx("button",{onClick:()=>{const n=document.getElementById("category-scroll-container");if(n){const l=window.innerWidth,d=Ij(l),m=l/d,u=n.scrollLeft;u<=0?n.scrollTo({left:n.scrollWidth-n.clientWidth,behavior:"smooth"}):n.scrollTo({left:u-m,behavior:"smooth"})}window.homeCategoryUpdateFromArrow&&window.homeCategoryUpdateFromArrow()},className:"absolute left-1 sm:left-2 md:left-3 z-10 w-7 h-7 sm:w-8 sm:h-8 md:w-9 md:h-9 bg-white/95 hover:bg-white active:bg-white shadow-sm sm:shadow-md rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 0.875rem)"},children:e.jsx(Wl,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"})}),e.jsx("button",{onClick:()=>{const n=document.getElementById("category-scroll-container");if(n){const l=window.innerWidth,d=Ij(l),m=l/d,u=n.scrollLeft,p=n.scrollWidth-n.clientWidth,g=u+m;u>=p-1?n.scrollTo({left:0,behavior:"smooth"}):g>=p?n.scrollTo({left:p,behavior:"smooth"}):n.scrollTo({left:g,behavior:"smooth"})}window.homeCategoryUpdateFromArrow&&window.homeCategoryUpdateFromArrow()},className:"absolute right-1 sm:right-2 md:right-3 z-10 w-7 h-7 sm:w-8 sm:h-8 md:w-9 md:h-9 bg-white/95 hover:bg-white active:bg-white shadow-sm sm:shadow-md rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 0.875rem)"},children:e.jsx(Xa,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"})}),e.jsx("div",{id:"category-scroll-container",className:"flex overflow-x-auto overflow-y-hidden pb-1 sm:pb-2 md:pb-3 snap-x snap-mandatory scroll-smooth touch-pan-x",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth"},children:s.map((n,l)=>e.jsx(st.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:l*.03},className:"flex-shrink-0 snap-start transition-all duration-500 ease-in-out w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 2xl:w-[14.285%] px-0.5 sm:px-0.5 md:px-0.5",children:e.jsx(Ps,{to:`/digital-print/${n._id}`,className:"block",children:e.jsxs("div",{className:"group flex flex-col items-center gap-0.5 sm:gap-1 p-1.5 sm:p-2 rounded-lg transition-all duration-300 relative",children:[n.type&&e.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 px-1.5 sm:px-2 md:px-2.5 py-0.5 sm:py-0.5 md:py-1 rounded-full text-[8px] sm:text-[9px] md:text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 whitespace-nowrap shadow-md ${n.type==="digital"?"bg-[#588157] text-white":"bg-[#003049] text-white"}`,children:n.type==="digital"?"Digital Print":"Bulk Print"}),e.jsx("div",{className:`w-18 h-18 sm:w-20 sm:h-20 md:w-24 md:h-24 lg:w-28 lg:h-28 xl:w-32 xl:h-32 rounded-full overflow-hidden bg-white transition-all duration-300 shadow-sm group-hover:shadow-md group-hover:scale-105 flex items-center justify-center relative ${n.type==="digital"?"group-hover:bg-[#f5faf0]":"group-hover:bg-[#f5fbff]"}`,children:e.jsx("img",{src:n.image,alt:n.name,className:`${n.name.toLowerCase().includes("visiting card")?"w-full h-full object-cover":n.name.toLowerCase().includes("card holder")?"w-9 h-9 sm:w-10 sm:h-10 md:w-12 md:h-12 lg:w-14 lg:h-14 xl:w-16 xl:h-16 object-contain":"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-18 lg:h-18 xl:w-20 xl:h-20 object-contain"}`})}),e.jsx("span",{className:"text-xs font-semibold text-cream-900 text-center max-w-[70px] sm:max-w-[80px] md:max-w-[90px] line-clamp-2 leading-tight mt-0.5",children:n.name})]})})},n._id))})]})})),Bj=({label:s,value:r,onChange:n,options:l,className:d=""})=>{const[m,u]=y.useState(!1),p=y.useRef(null),g=l.find(j=>j.value===r),h=j=>{n(j),u(!1)};return y.useEffect(()=>{const j=v=>{p.current&&!p.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),e.jsxs("div",{className:`relative ${d}`,ref:p,children:[e.jsxs("button",{type:"button",onClick:()=>u(!m),className:"flex items-center justify-between w-full px-4 py-2.5 text-sm font-medium text-cream-900 bg-white border border-cream-300 rounded-lg hover:bg-cream-50 focus:outline-none focus:ring-2 focus:ring-cream-500 focus:ring-offset-2 transition-colors",children:[e.jsx("span",{className:"truncate",children:g?g.label:s}),e.jsx(Ym,{className:`w-4 h-4 ml-2 transition-transform ${m?"rotate-180":""}`})]}),m&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-cream-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:l.map(j=>e.jsx("button",{type:"button",onClick:()=>h(j.value),className:`w-full text-left px-4 py-3 text-sm hover:bg-cream-50 transition-colors ${j.value===r?"bg-cream-100 text-cream-900 font-medium":"text-cream-700"} first:rounded-t-lg last:rounded-b-lg`,children:j.label},j.label))})]})},Vj=({review:s,index:r,isExpanded:n,onToggleExpand:l,view:d,isClient:m})=>{const u=d==="grid"?100:200,p=s.comment.length>u,g=n||!p?s.comment:s.comment.substring(0,u)+"...";return d==="list"?e.jsx(st.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:r*.05,ease:"easeOut"},className:"bg-white p-6 rounded-2xl shadow-md border border-cream-100 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-200 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-cream-900 font-bold text-lg",children:s.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-cream-900",children:s.userName}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(h=>e.jsx(mi,{size:14,className:h<=s.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"},h))})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-cream-700 leading-relaxed",children:g}),p&&e.jsx("button",{onClick:l,className:"text-cream-900 hover:text-cream-700 text-sm font-medium mt-1 underline",children:n?"Show Less":"Show More"})]}),e.jsx("p",{className:"text-xs text-cream-500",children:m?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading..."})]})]})},s._id):e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:r*.05,ease:"easeOut"},className:"bg-white p-6 rounded-2xl shadow-md border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-cream-900 font-bold text-lg",children:s.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-cream-900",children:s.userName}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(h=>e.jsx(mi,{size:14,className:h<=s.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"},h))})]})]}),e.jsx("p",{className:"text-cream-700 leading-relaxed mb-4",children:g}),e.jsx("p",{className:"text-xs text-cream-500",children:m?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading..."})]},s._id)},FT=({reviews:s})=>{const r=s.length,n=r>0?s.reduce((l,d)=>l+d.rating,0)/r:0;return r===0?null:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 sm:gap-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Total Reviews"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-cream-900",children:r})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Average Rating"}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(l=>e.jsx(mi,{size:16,className:`sm:w-5 sm:h-5 ${l<=Math.round(n)?"fill-yellow-400 text-yellow-400":"text-cream-300"}`},l))}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-cream-900",children:n.toFixed(1)})]})]})]})},UT=({reviews:s,loadingReviews:r,isLoggedIn:n,isClient:l})=>{const[d,m]=y.useState(null),[u,p]=y.useState("newest"),[g,h]=y.useState(!1),[j,v]=y.useState(!1),[w,E]=y.useState(new Set),P=[...s.filter(V=>!(d&&V.rating!==d))].sort((V,M)=>{const R=new Date(V.createdAt).getTime(),ae=new Date(M.createdAt).getTime();return u==="newest"?ae-R:u==="oldest"?R-ae:ae-R}),q=j||g?P:P.slice(0,6);return e.jsx("section",{className:"pt-8 sm:pt-12 pb-6 sm:pb-8 bg-cream-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl md:text-4xl font-bold text-cream-900 mb-3 sm:mb-4",children:"Customer Reviews"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600 max-w-xl mx-auto mb-4 sm:mb-6",children:"See what our customers have to say about their experience with Prints24."}),e.jsx(FT,{reviews:s})]}),e.jsx("div",{className:"max-w-6xl mx-auto mb-6 sm:mb-8",children:e.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl sm:rounded-2xl shadow-md border border-cream-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-0",children:[e.jsx(Lv,{size:18,className:"sm:w-5 sm:h-5 text-cream-600"}),e.jsx("span",{className:"text-sm sm:text-base font-medium text-cream-900",children:"Filters:"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[e.jsx("label",{className:"text-xs sm:text-sm text-cream-700 sm:whitespace-nowrap",children:"Rating:"}),e.jsx(Bj,{label:"All Ratings",value:d,onChange:V=>m(V),options:[{value:null,label:"All Ratings"},{value:5,label:"5 Stars"},{value:4,label:"4 Stars"},{value:3,label:"3 Stars"},{value:2,label:"2 Stars"},{value:1,label:"1 Star"}],className:"w-full sm:w-auto"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[e.jsx("label",{className:"text-xs sm:text-sm text-cream-700 sm:whitespace-nowrap",children:"Sort by:"}),e.jsx(Bj,{label:"Newest First",value:u,onChange:V=>p(V),options:[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"}],className:"w-full sm:w-auto"})]}),(d||u!=="newest")&&e.jsxs("button",{onClick:()=>{m(null),p("newest")},className:"flex items-center justify-center gap-2 px-4 py-2 text-xs sm:text-sm text-cream-700 hover:text-cream-900 border border-cream-300 rounded-lg hover:bg-cream-50 transition-colors",children:[e.jsx(ss,{size:14,className:"sm:w-4 sm:h-4"}),"Clear Filters"]}),e.jsxs(Ps,{to:"/reviews",className:"flex items-center justify-center gap-2 px-4 sm:px-5 py-2 sm:py-2.5 bg-cream-900 text-cream-50 rounded-lg text-sm sm:text-base font-medium hover:bg-cream-800 transition-all shadow-md hover:shadow-lg sm:ml-auto",children:[e.jsx(t3,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),"Write Review"]})]})})}),r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:"Loading reviews..."})}):P.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:d?`No reviews found with ${d} star rating.`:"No reviews yet. Be the first to review!"})}):e.jsx(ba,{mode:"wait",children:j?e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,ease:"easeInOut"},className:"max-w-4xl mx-auto space-y-4",children:q.map((V,M)=>e.jsx(Vj,{review:V,index:M,isExpanded:w.has(V._id),onToggleExpand:()=>{const R=new Set(w);w.has(V._id)?R.delete(V._id):R.add(V._id),E(R)},view:"list",isClient:l},V._id))},"list-view"):e.jsx(st.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4,ease:"easeInOut"},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:q.map((V,M)=>e.jsx(Vj,{review:V,index:M,isExpanded:w.has(V._id),onToggleExpand:()=>{const R=new Set(w);w.has(V._id)?R.delete(V._id):R.add(V._id),E(R)},view:"grid",isClient:l},V._id))},"grid-view")}),P.length>6&&!j&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{onClick:()=>h(!g),className:"inline-flex items-center gap-2 bg-cream-900 text-cream-50 px-6 py-3 rounded-xl font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1",children:[g?"Show Less":`Show More (${P.length-6} more)`,e.jsx($r,{size:18,className:`transition-transform ${g?"rotate-90":""}`})]})}),P.length>0&&e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>{v(!j),j||h(!1)},className:"inline-flex items-center gap-2 bg-cream-900 text-cream-50 px-5 py-2.5 rounded-lg font-medium hover:bg-cream-800 transition-all shadow-md hover:shadow-lg",children:j?"Show Less":"View All"})})]})})},IT=()=>e.jsx("section",{className:"pt-8 pb-24 bg-cream-100 relative overflow-hidden",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(st.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"bg-white p-10 md:p-16 rounded-3xl shadow-xl",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900 mb-2",children:"About Prints24"}),e.jsx("div",{className:"w-24 h-1 bg-cream-400 mx-auto rounded-full"})]}),e.jsxs("div",{className:"space-y-8 text-cream-800 leading-relaxed",children:[e.jsxs("p",{className:"text-lg",children:["Prints24 is a modern, fast-growing"," ",e.jsx("span",{className:"font-semibold",children:"Digital & Offset Printing Company"}),", whose aim is to provide Fast, Creative, and High-Quality printing solutions to customers."]}),e.jsx("p",{children:"We started Prints24 with the idea that today's digital generation should get a platform where they can avail all types of printing services, from small quantities (Short Run) to Bulk Printing, in an easy, fast, and reliable manner."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mt-12",children:[e.jsxs("div",{className:"bg-cream-50 p-6 rounded-xl border border-cream-200",children:[e.jsxs("h3",{className:"font-serif text-xl font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-cream-900 text-white rounded-full flex items-center justify-center text-sm",children:"V"})," ","Vision"]}),e.jsx("p",{className:"text-sm",children:"To make Affordable, Stylish, and Premium Quality Printing easily accessible to every individual and every business."})]}),e.jsxs("div",{className:"bg-cream-50 p-6 rounded-xl border border-cream-200",children:[e.jsxs("h3",{className:"font-serif text-xl font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-cream-900 text-white rounded-full flex items-center justify-center text-sm",children:"M"})," ","Mission"]}),e.jsxs("ul",{className:"text-sm space-y-2 list-disc list-inside",children:[e.jsx("li",{children:"To make Modern Printing easy and accessible to everyone."}),e.jsx("li",{children:"To provide smart solutions with Quick Delivery + High Quality."}),e.jsx("li",{children:"To make better options available according to every budget."})]})]})]})]})]})})})}),BT=()=>e.jsx("section",{className:"pt-24 pb-8 bg-cream-900 text-cream-50 text-center",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs(st.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.6},viewport:{once:!0},children:[e.jsx("div",{className:"mb-8 inline-flex items-center justify-center w-16 h-16 bg-cream-800 rounded-full",children:e.jsx($r,{size:32,className:"text-amber-300"})}),e.jsx("h2",{className:"font-serif text-4xl font-bold mb-6",children:"Have a Design Ready?"}),e.jsx("p",{className:"text-xl text-cream-200 max-w-2xl mx-auto mb-10",children:"Skip the templates and upload your own artwork. Our automated system checks for errors instantly."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm text-cream-300 mb-10",children:[e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"PDF"}),e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"AI"}),e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"PSD"}),e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"JPG/PNG"})]}),e.jsx(Ps,{to:"/upload",className:"bg-cream-50 text-cream-900 px-10 py-4 rounded-full text-lg font-bold hover:bg-cream-200 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1",children:"Upload Now"})]})})});function tu(){const[s,r]=y.useState(!1);return y.useEffect(()=>{r(!0)},[]),s}const VT="",Gf=VT,we=`${Gf}/api`,qT=()=>{const[s,r]=y.useState([]),[n,l]=y.useState(!0),[d,m]=y.useState([]),[u,p]=y.useState(!0),[g,h]=y.useState(!1),j=tu();return y.useEffect(()=>{(async()=>{try{l(!0);const w=we,E={Accept:"application/json"},A=await fetch(`${w}/categories/digital`,{method:"GET",headers:E}),P=await A.text();if(!A.ok)throw new Error(`HTTP ${A.status}`);const q=JSON.parse(P),V=await fetch(`${w}/categories/bulk`,{method:"GET",headers:E}),M=await V.text();if(!V.ok)throw new Error(`HTTP ${V.status}`);const R=JSON.parse(M),ae=q.map(D=>({...D,type:"digital"})),H=R.map(D=>({...D,type:"bulk"}));ae.sort((D,k)=>(D.sortOrder||0)-(k.sortOrder||0)),H.sort((D,k)=>(D.sortOrder||0)-(k.sortOrder||0)),r([...ae,...H])}catch(w){console.error("Fetch categories error:",w)}finally{l(!1)}})()},[]),y.useEffect(()=>{if(typeof window>"u")return;const v=localStorage.getItem("token");h(!!v)},[]),y.useEffect(()=>{(async()=>{try{p(!0);const w=we,E={Accept:"application/json"},A=await fetch(`${w}/reviews`,{method:"GET",headers:E});if(!A.ok)throw new Error(`HTTP ${A.status}`);const P=await A.json();m(P)}catch(w){console.error("Fetch reviews error:",w)}finally{p(!1)}})()},[]),e.jsxs("div",{className:"w-full mt-5 overflow-hidden pr-4",children:[e.jsx(RT,{}),e.jsx(LT,{categories:s,loadingCategories:n,children:e.jsx($T,{categories:s,loadingCategories:n})}),e.jsx(UT,{reviews:d,loadingReviews:u,isLoggedIn:g,isClient:j}),e.jsx(IT,{}),e.jsx(BT,{})]})},qj=({containerId:s,interval:r=5e3,slideInterval:n=3e3,scrollAmount:l=150,onScroll:d})=>{const m=y.useRef(null),u=y.useRef(null),p=y.useRef(!1),g=y.useRef(Date.now()),h=y.useCallback(()=>{m.current&&(clearTimeout(m.current),m.current=null),u.current&&(clearInterval(u.current),u.current=null)},[]),j=y.useCallback(()=>{p.current||!document.getElementById(s)||(u.current=setInterval(()=>{if(p.current){clearInterval(u.current),u.current=null;return}const q=document.getElementById(s);if(q)if(d)d(q);else{const V=q.scrollWidth-q.clientWidth;q.scrollLeft>=V-10?q.scrollTo({left:0,behavior:"smooth"}):q.scrollTo({left:q.scrollLeft+l,behavior:"smooth"})}},n))},[s,n,l,d]),v=y.useCallback(()=>{h(),m.current=setTimeout(()=>{j()},r)},[r,j,h]),w=y.useCallback(()=>{h(),g.current=Date.now(),v()},[v,h]),E=y.useCallback(()=>{p.current=!0,h()},[h]),A=y.useCallback(()=>{p.current=!1,v()},[v]);return y.useEffect(()=>{if(typeof window>"u")return;const P=document.getElementById(s);if(!P)return;const q=()=>w(),V=()=>w(),M=()=>w(),R=()=>w(),ae=()=>w(),H=()=>w(),D=()=>w(),k=()=>w(),Q=()=>w(),W=()=>w(),te=()=>{E()},ie=()=>{A()};return document.addEventListener("mousemove",q),document.addEventListener("mousedown",V),document.addEventListener("click",M),document.addEventListener("mouseover",R),document.addEventListener("keydown",ae),document.addEventListener("keyup",H),document.addEventListener("keypress",D),document.addEventListener("touchstart",k),document.addEventListener("touchmove",Q),document.addEventListener("wheel",W),P&&(P.addEventListener("mouseenter",te),P.addEventListener("mouseleave",ie)),v(),()=>{h(),document.removeEventListener("mousemove",q),document.removeEventListener("mousedown",V),document.removeEventListener("click",M),document.removeEventListener("mouseover",R),document.removeEventListener("keydown",ae),document.removeEventListener("keyup",H),document.removeEventListener("keypress",D),document.removeEventListener("touchstart",k),document.removeEventListener("touchmove",Q),document.removeEventListener("wheel",W),P&&(P.removeEventListener("mouseenter",te),P.removeEventListener("mouseleave",ie))}},[s,w,E,A,v,h]),{pause:E,resume:A,reset:w}},Da=({label:s,options:r,value:n,onChange:l,className:d="",id:m})=>{const[u,p]=y.useState(!1),g=y.useRef(null);y.useEffect(()=>{const j=v=>{g.current&&!g.current.contains(v.target)&&p(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]);const h=r.find(j=>j.value===n);return e.jsxs("div",{className:`relative ${d}`,ref:g,id:m?`${m}-container`:void 0,children:[e.jsxs("button",{type:"button",id:m,onClick:()=>p(!u),className:"flex items-center gap-2 px-4 py-2.5 border-2 border-cream-300 rounded-lg bg-white text-cream-900 cursor-pointer hover:border-cream-500 transition-all shadow-sm hover:shadow-md min-w-[140px] justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:h?h.label:s}),e.jsx(Ym,{size:16,className:`transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
            .filter-dropdown-scroll::-webkit-scrollbar {
              width: 6px;
            }
            .filter-dropdown-scroll::-webkit-scrollbar-track {
              background: #f5f5f0;
              border-radius: 3px;
            }
            .filter-dropdown-scroll::-webkit-scrollbar-thumb {
              background: #d4a574;
              border-radius: 3px;
            }
            .filter-dropdown-scroll::-webkit-scrollbar-thumb:hover {
              background: #c49564;
            }
          `}),e.jsx("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-cream-200 z-50 overflow-hidden",children:e.jsx("div",{className:"p-2 overflow-y-auto filter-dropdown-scroll",style:{maxHeight:"132px",scrollbarWidth:"thin",scrollbarColor:"#d4a574 #f5f5f0"},children:r.map(j=>e.jsxs("button",{type:"button",onClick:()=>{l(j.value),p(!1)},className:"w-full flex items-center justify-between px-3 py-2 text-sm text-cream-900 hover:bg-cream-50 rounded-md transition-colors",children:[e.jsx("span",{children:j.label}),n===j.value&&e.jsx(Va,{size:16,className:"text-cream-900"})]},j.value===null?"null":j.value))})})]})]})},sc=s=>s>=1536?7:s>=1280?6:s>=1024?5:s>=768?4:s>=640?3:2,HT=()=>{var B,ne;const s=Ha(),[r,n]=y.useState([]),[l,d]=y.useState([]),[m,u]=y.useState(!0),[p,g]=y.useState(null),[h,j]=y.useState(null),[v,w]=y.useState(null),[E,A]=y.useState(null),[P,q]=y.useState([]),[V,M]=y.useState(!1),[R,ae]=y.useState(""),H=qj({containerId:"digital-scroll-container",interval:6e3,slideInterval:3e3,scrollAmount:150,onScroll:Z=>{const ue=Z.scrollWidth-Z.clientWidth,ve=Z.scrollLeft,O=window.innerWidth,J=sc(O),z=O/J;if(ve>=ue-10)Z.scrollTo({left:0,behavior:"smooth"});else{const ye=ve+z;ye>=ue?Z.scrollTo({left:ue,behavior:"smooth"}):Z.scrollTo({left:ye,behavior:"smooth"})}}});y.useEffect(()=>{window.digitalUpdateFromArrow=()=>{H.reset()}},[H]);const D=qj({containerId:"bulk-scroll-container",interval:6e3,slideInterval:3e3,scrollAmount:150,onScroll:Z=>{const ue=Z.scrollWidth-Z.clientWidth,ve=Z.scrollLeft,O=window.innerWidth,J=sc(O),z=O/J;if(ve>=ue-10)Z.scrollTo({left:0,behavior:"smooth"});else{const ye=ve+z;ye>=ue?Z.scrollTo({left:ue,behavior:"smooth"}):Z.scrollTo({left:ye,behavior:"smooth"})}}});if(y.useEffect(()=>{window.bulkUpdateFromArrow=()=>{D.reset()}},[D]),y.useEffect(()=>{(async()=>{try{u(!0),g(null);const ue=we,ve={Accept:"application/json"},O=await fetch(`${ue}/categories/digital`,{method:"GET",headers:ve}),J=await O.text();if(J.trim().startsWith("<!DOCTYPE")||J.trim().startsWith("<html"))throw new Error("Server returned HTML instead of JSON. Please check your server configuration.");if(!O.ok)throw new Error(`HTTP ${O.status} - ${O.statusText}`);const z=JSON.parse(J),ye=Array.isArray(z)?z.sort((me,fe)=>(me.sortOrder||0)-(fe.sortOrder||0)):z;n(ye);const xe=await fetch(`${ue}/categories/bulk`,{method:"GET",headers:ve}),I=await xe.text();if(I.trim().startsWith("<!DOCTYPE")||I.trim().startsWith("<html"))throw new Error("Server returned HTML instead of JSON. Please check your server configuration.");if(!xe.ok)throw new Error(`HTTP ${xe.status} - ${xe.statusText}`);const L=JSON.parse(I),_=Array.isArray(L)?L.sort((me,fe)=>(me.sortOrder||0)-(fe.sortOrder||0)):L;d(_)}catch(ue){g(ue instanceof Error?ue.message:"An unknown error occurred"),console.error("Fetch categories error:",ue)}finally{u(!1)}})()},[]),y.useEffect(()=>{(async()=>{if(!v){q([]),A(null);return}try{M(!0);const ue=we,ve={Accept:"application/json"},O=await fetch(`${ue}/subcategories/category/${v}?includeChildren=true`,{method:"GET",headers:ve});if(O.ok){const J=await O.text();if(!J.trim().startsWith("<!DOCTYPE")&&!J.trim().startsWith("<html")){const z=JSON.parse(J),ye=Array.isArray(z)?z:(z==null?void 0:z.data)||[],I=(L=>{let _=[];return L.forEach(me=>{if(_.push({...me,_displayLevel:0}),me.children&&me.children.length>0){const fe=me.children.map(Me=>({...Me,_displayLevel:1,_parentName:me.name}));_=_.concat(fe)}}),_})(ye);I.sort((L,_)=>(L.sortOrder||0)-(_.sortOrder||0)),q(I)}else q([])}else q([])}catch(ue){console.error("Error fetching subcategories:",ue),q([])}finally{M(!1)}})()},[v]),m)return e.jsx("div",{className:"min-h-screen bg-cream-50 py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-cream-900 mb-4",children:"Services"}),e.jsx("p",{className:"text-cream-600",children:"Loading categories..."})]})})});if(p)return e.jsx("div",{className:"min-h-screen bg-cream-50 py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-cream-900 mb-4",children:"Services"}),e.jsxs("p",{className:"text-cream-600",children:["Error: ",p]})]})})});const k=[...r.map(Z=>({...Z,type:"Digital"})),...l.map(Z=>({...Z,type:"Bulk"}))],Q=v?k.find(Z=>Z._id===v):null,W=!h||h==="Digital",te=!h||h==="Bulk",ie=Q?Q.type==="Digital":W,X=Q?Q.type==="Bulk":te,Se=r.filter(Z=>!(h&&h!=="Digital"||v&&Z._id!==v||R&&!Z.name.toLowerCase().includes(R.toLowerCase()))),$=l.filter(Z=>!(h&&h!=="Bulk"||v&&Z._id!==v||R&&!Z.name.toLowerCase().includes(R.toLowerCase()))),re=k.map(Z=>({value:Z._id,label:`${Z.name} (${Z.type})`}));return e.jsx("div",{className:"min-h-screen bg-cream-50",children:e.jsxs("div",{className:"container mx-auto px-2 xs:px-3 sm:px-4 md:px-6 lg:px-8 pt-4 xs:pt-5 sm:pt-6 md:pt-8 lg:pt-10 pb-8 xs:pb-10 sm:pb-12 md:pb-16 lg:pb-20",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-4 flex-1",children:[e.jsxs("div",{className:"sm:w-48",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Print Type"}),e.jsx(Da,{label:"All Types",value:h,onChange:Z=>{j(Z),w(null)},options:[{value:null,label:"All Types"},{value:"Digital",label:"Digital Print"},{value:"Bulk",label:"Bulk Print"}],className:"w-full"})]}),e.jsxs("div",{className:"flex-1 sm:flex-initial sm:w-64",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Category"}),e.jsx(Da,{label:"All Categories",value:v,onChange:Z=>{if(w(Z),A(null),Z){const ue=k.find(ve=>ve._id===Z);ue&&j(ue.type)}else j(null)},options:[{value:null,label:"All Categories"},...re.filter(Z=>{if(h){const ue=k.find(ve=>ve._id===Z.value);return(ue==null?void 0:ue.type)===h}return!0})],className:"w-full"})]}),v&&e.jsxs("div",{className:"flex-1 sm:flex-initial sm:w-64",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Subcategory"}),e.jsx(Da,{label:V?"Loading...":"All Subcategories",value:E,onChange:Z=>{if(A(Z),Z&&v){const ue=P.find(ve=>ve._id===Z);if(ue){const ve=ue._id;s(`/digital-print/${v}/${ve}`)}}},options:[{value:null,label:"All Subcategories"},...P.map(Z=>({value:Z._id,label:Z.name}))],className:"w-full"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-4 flex-1 sm:flex-initial sm:justify-end",children:[e.jsxs("div",{className:"relative sm:w-64",children:[e.jsx(an,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:R,onChange:Z=>ae(Z.target.value),className:"w-full pl-10 pr-10 py-2.5 border-2 border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 text-sm sm:text-base bg-white shadow-sm transition-all"}),R&&e.jsx("button",{onClick:()=>ae(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cream-500 hover:text-cream-700 transition-colors",children:e.jsx(ss,{size:18})})]}),(h||v||E||R)&&e.jsxs("button",{onClick:()=>{j(null),w(null),A(null),ae("")},className:"flex items-center gap-2 px-4 py-2.5 text-sm text-cream-700 hover:text-cream-900 bg-cream-100 hover:bg-cream-200 rounded-lg transition-colors whitespace-nowrap",children:[e.jsx(ss,{size:16}),"Clear All"]})]})]}),(h||v||E||R)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4 pt-4 border-t border-cream-200",children:[e.jsx("span",{className:"text-xs font-medium text-cream-600",children:"Active filters:"}),h&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-xs font-medium flex items-center gap-2",children:["Type: ",h,e.jsx("button",{onClick:()=>{j(null),w(null),A(null)},className:"hover:text-red-600",children:e.jsx(ss,{size:12})})]}),v&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-xs font-medium flex items-center gap-2",children:["Category: ",(B=k.find(Z=>Z._id===v))==null?void 0:B.name,e.jsx("button",{onClick:()=>{w(null),A(null),j(null)},className:"hover:text-red-600",children:e.jsx(ss,{size:12})})]}),E&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-xs font-medium flex items-center gap-2",children:["Subcategory: ",(ne=P.find(Z=>Z._id===E))==null?void 0:ne.name,e.jsx("button",{onClick:()=>{A(null)},className:"hover:text-red-600",children:e.jsx(ss,{size:12})})]})]})]}),ie&&e.jsxs("div",{className:"mb-8 xs:mb-10 sm:mb-12 md:mb-16 lg:mb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 xs:gap-2.5 sm:gap-3 mb-4 xs:mb-5 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 xs:w-9 xs:h-9 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-lg sm:rounded-xl",style:{backgroundColor:"#588157"},children:e.jsx(H3,{className:"text-white w-4 h-4 xs:w-5 xs:h-5 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-lg xs:text-xl sm:text-2xl md:text-3xl font-bold text-cream-900",children:"Digital Print"}),e.jsx("p",{className:"text-cream-600 text-xs xs:text-sm sm:text-base font-medium",children:"Fast & small batches"})]})]}),e.jsxs("div",{className:"relative group/slider overflow-hidden",children:[e.jsx("button",{onClick:()=>{const Z=document.getElementById("digital-scroll-container");if(Z){const ue=window.innerWidth,ve=sc(ue),O=ue/ve,J=Z.scrollLeft;J<=0?Z.scrollTo({left:Z.scrollWidth-Z.clientWidth,behavior:"smooth"}):Z.scrollTo({left:J-O,behavior:"smooth"})}window.digitalUpdateFromArrow&&window.digitalUpdateFromArrow()},className:"absolute left-2 sm:left-3 md:left-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(Wl,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("button",{onClick:()=>{const Z=document.getElementById("digital-scroll-container");if(Z){const ue=window.innerWidth,ve=sc(ue),O=ue/ve,J=Z.scrollLeft,z=Z.scrollWidth-Z.clientWidth,ye=J+O;J>=z-1?Z.scrollTo({left:0,behavior:"smooth"}):ye>=z?Z.scrollTo({left:z,behavior:"smooth"}):Z.scrollTo({left:ye,behavior:"smooth"})}window.digitalUpdateFromArrow&&window.digitalUpdateFromArrow()},className:"absolute right-2 sm:right-3 md:right-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(Xa,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("div",{id:"digital-scroll-container",className:"flex overflow-x-auto overflow-y-hidden pb-2 sm:pb-3 md:pb-4 snap-x snap-mandatory scroll-smooth touch-pan-x",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth"},children:Se.length===0?e.jsx("div",{className:"w-full text-center py-8 text-cream-600",children:"No digital print categories found matching your filters."}):Se.map((Z,ue)=>e.jsx(st.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:ue*.03},className:"flex-shrink-0 snap-start transition-all duration-500 ease-in-out w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 px-1 sm:px-1.5 md:px-2",children:e.jsx(Ps,{to:`/digital-print/${Z._id}`,className:"block",children:e.jsxs("div",{className:"group flex flex-col items-center gap-1.5 sm:gap-2 p-2 sm:p-2.5 rounded-lg transition-all duration-300 bg-cream-50",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 lg:w-32 lg:h-32 xl:w-36 xl:h-36 rounded-full overflow-hidden bg-white group-hover:bg-[#f5faf0] transition-all duration-300 shadow-sm sm:shadow-md group-hover:shadow-lg group-hover:scale-105 flex items-center justify-center",children:e.jsx("img",{src:Z.image,alt:Z.name,className:`${Z.name.toLowerCase().includes("visiting card")?"w-full h-full object-cover":Z.name.toLowerCase().includes("card holder")?"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 lg:w-16 lg:h-16 xl:w-18 xl:h-18 object-contain":"w-14 h-14 sm:w-16 sm:h-16 md:w-18 md:h-18 lg:w-20 lg:h-20 xl:w-22 xl:h-22 object-contain"}`})}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-cream-900 text-center max-w-[80px] sm:max-w-[100px] md:max-w-[120px] line-clamp-2 leading-tight mt-0.5",children:Z.name})]})})},Z._id))})]})]}),X&&e.jsxs("div",{className:"mb-0",children:[e.jsxs("div",{className:"flex items-center gap-2 xs:gap-2.5 sm:gap-3 mb-4 xs:mb-5 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 xs:w-9 xs:h-9 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-lg sm:rounded-xl",style:{backgroundColor:"#003049"},children:e.jsx(Co,{className:"text-white w-4 h-4 xs:w-5 xs:h-5 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-lg xs:text-xl sm:text-2xl md:text-3xl font-bold text-cream-900",children:"Bulk & Offset Print"}),e.jsx("p",{className:"text-cream-600 text-xs xs:text-sm sm:text-base font-medium",children:"Quality & large orders"})]})]}),e.jsxs("div",{className:"relative group/slider overflow-hidden",children:[e.jsx("button",{onClick:()=>{const Z=document.getElementById("bulk-scroll-container");if(Z){const ue=window.innerWidth,ve=sc(ue),O=ue/ve,J=Z.scrollLeft;J<=0?Z.scrollTo({left:Z.scrollWidth-Z.clientWidth,behavior:"smooth"}):Z.scrollTo({left:J-O,behavior:"smooth"})}window.bulkUpdateFromArrow&&window.bulkUpdateFromArrow()},className:"absolute left-2 sm:left-3 md:left-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(Wl,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("button",{onClick:()=>{const Z=document.getElementById("bulk-scroll-container");if(Z){const ue=window.innerWidth,ve=sc(ue),O=ue/ve,J=Z.scrollLeft,z=Z.scrollWidth-Z.clientWidth,ye=J+O;J>=z-1?Z.scrollTo({left:0,behavior:"smooth"}):ye>=z?Z.scrollTo({left:z,behavior:"smooth"}):Z.scrollTo({left:ye,behavior:"smooth"})}window.bulkUpdateFromArrow&&window.bulkUpdateFromArrow()},className:"absolute right-2 sm:right-3 md:right-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(Xa,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("div",{id:"bulk-scroll-container",className:"flex overflow-x-auto overflow-y-hidden pb-2 sm:pb-3 md:pb-4 snap-x snap-mandatory scroll-smooth touch-pan-x",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth"},children:$.length===0?e.jsx("div",{className:"w-full text-center py-8 text-cream-600",children:"No bulk print categories found matching your filters."}):$.map((Z,ue)=>e.jsx(st.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:ue*.03},className:"flex-shrink-0 snap-start transition-all duration-500 ease-in-out w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 px-1 sm:px-1.5 md:px-2",children:e.jsx(Ps,{to:`/digital-print/${Z._id}`,className:"block",children:e.jsxs("div",{className:"group flex flex-col items-center gap-1.5 sm:gap-2 p-2 sm:p-2.5 rounded-lg transition-all duration-300 bg-cream-50",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 lg:w-32 lg:h-32 xl:w-36 xl:h-36 rounded-full overflow-hidden bg-white group-hover:bg-[#f5fbff] transition-all duration-300 shadow-sm sm:shadow-md group-hover:shadow-lg group-hover:scale-105 flex items-center justify-center",children:e.jsx("img",{src:Z.image,alt:Z.name,className:`${Z.name.toLowerCase().includes("visiting card")?"w-full h-full object-cover":Z.name.toLowerCase().includes("card holder")?"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 lg:w-16 lg:h-16 xl:w-18 xl:h-18 object-contain":"w-14 h-14 sm:w-16 sm:h-16 md:w-18 md:h-18 lg:w-20 lg:h-20 xl:w-22 xl:h-22 object-contain"}`})}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-cream-900 text-center max-w-[80px] sm:max-w-[100px] md:max-w-[120px] line-clamp-2 leading-tight mt-0.5",children:Z.name})]})})},Z._id))})]})]})]})})};function ac(...s){return s.filter(Boolean).join(" ")}const Ix=y.forwardRef(({options:s,value:r,onValueChange:n,placeholder:l="Select...",disabled:d,className:m},u)=>{const[p,g]=y.useState(!1),h=y.useRef(null);y.useEffect(()=>{const v=w=>{h.current&&!h.current.contains(w.target)&&g(!1)};if(p)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[p]);const j=s.find(v=>v.value===r);return e.jsxs("div",{className:ac("relative",m),ref:h,children:[e.jsxs("button",{ref:u,type:"button",disabled:d,onClick:()=>!d&&g(!p),className:ac("flex h-10 w-full items-center justify-between rounded-md border border-cream-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-cream-500 focus:outline-none focus:ring-2 focus:ring-cream-900 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",p&&"ring-2 ring-cream-900"),children:[e.jsx("span",{className:ac("block truncate",!j&&"text-cream-500"),children:j?j.label:l}),e.jsx(Ym,{className:ac("h-4 w-4 opacity-50 transition-transform",p&&"rotate-180")})]}),p&&e.jsx("div",{className:"absolute z-50 mt-1 w-full overflow-hidden rounded-md border border-cream-200 bg-white shadow-lg",children:e.jsx("div",{className:"max-h-60 overflow-auto p-1",children:s.length===0?e.jsx("div",{className:"px-2 py-1.5 text-sm text-cream-500",children:"No options available"}):s.map(v=>e.jsxs("button",{type:"button",onClick:()=>{n==null||n(v.value),g(!1)},className:ac("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none hover:bg-cream-50 focus:bg-cream-50",r===v.value&&"bg-cream-50"),children:[e.jsx("span",{className:ac("block truncate",r===v.value&&"font-medium"),children:v.label}),r===v.value&&e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Va,{className:"h-4 w-4 text-cream-900"})})]},v.value))})})]})});Ix.displayName="Select";const nn=({fallbackPath:s="/",label:r="Back",className:n="",onClick:l})=>{const d=Ha(),m=Gn(),u=y.useRef(null);y.useEffect(()=>{const g=m.pathname;if(u.current===null){u.current=g;return}const h=setTimeout(()=>{u.current=g},0);return()=>clearTimeout(h)},[m.pathname]);const p=()=>{if(l){l(),typeof window<"u"&&setTimeout(()=>{window.scrollTo(0,0)},100);return}const g=m.state!==null&&m.state!==void 0,h=typeof window<"u"&&window.history.length>1,j=m.pathname,v=u.current;d(h||g||v&&v!==j?-1:s),typeof window<"u"&&window.scrollTo(0,0)};return e.jsxs("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),p()},className:`flex items-center text-slate-500 hover:text-slate-700 transition-colors font-medium cursor-pointer ${n}`,type:"button",children:[e.jsx(yc,{className:"w-4 h-4 mr-2"}),r]})},Hj=({attributes:s,rules:r,selectedValues:n={}})=>{const l=s.reduce((m,u)=>(m[u._id.toString()]={...u,isVisible:!0,allowedValues:u.attributeValues?u.attributeValues.map(p=>p.value):[],defaultValue:u.defaultValue||null,visibilitySetByRule:!1,valuesRestrictedByRule:!1},m),{}),d=[...r].sort((m,u)=>(u.priority||0)-(m.priority||0));for(const m of d){const u=typeof m.when.attribute=="object"?m.when.attribute._id.toString():m.when.attribute.toString(),p=n[u];if(!(!p||String(p)!==m.when.value))for(const g of m.then){const h=typeof g.targetAttribute=="object"?g.targetAttribute._id.toString():g.targetAttribute.toString();if(!l[h])continue;const j=l[h];switch(g.action){case"SHOW":j.isVisible=!0,j.visibilitySetByRule=!0;break;case"HIDE":j.isVisible=!1,j.visibilitySetByRule=!0;break;case"SHOW_ONLY":if(Array.isArray(g.allowedValues)&&g.allowedValues.length>0){const v=j.attributeValues?j.attributeValues.map(w=>w.value):[];j.allowedValues=g.allowedValues.filter(w=>v.includes(w)),j.valuesRestrictedByRule=!0}break;case"SET_DEFAULT":g.defaultValue&&(j.allowedValues.length===0||j.allowedValues.includes(g.defaultValue))&&(j.defaultValue=g.defaultValue);break}}}return Object.keys(l).forEach(m=>{const u=l[m];!u.isVisible&&n[m]&&delete n[m],u.valuesRestrictedByRule&&n[m]&&!u.allowedValues.includes(String(n[m]))&&delete n[m],!u.valuesRestrictedByRule&&u.attributeValues&&(u.allowedValues=u.attributeValues.map(p=>p.value))}),{attributes:Object.values(l),selectedValues:n}};function GT(){const[s,r]=y.useState(null),[n,l]=y.useState(!0),[d,m]=y.useState(null),u=y.useCallback(async()=>{try{l(!0),m(null);const p=localStorage.getItem("token"),g=localStorage.getItem("userLocation");let h=null;if(g)try{h=JSON.parse(g).pincode,console.log(" Using pincode from LocationDetector:",h)}catch(A){console.warn("Failed to parse stored location:",A)}const j={"Content-Type":"application/json"};p&&(j.Authorization=`Bearer ${p}`);const v={method:h?"POST":"GET",headers:j};h&&(v.body=JSON.stringify({pincode:h}));const w=await fetch(`${Gf}/api/user/context`,v);if(!w.ok)throw new Error(`Failed to fetch user context: ${w.status}`);const E=await w.json();if(E.success)r(E),console.log(" User context loaded:",{user:E.user.name,segment:E.segment.name,location:E.location.pincode,detectionMethod:E.location.detectionMethod});else throw new Error(E.message||"Failed to load user context")}catch(p){console.error(" Error fetching user context:",p),m(p.message||"Network error"),r({user:{id:null,name:"Guest",email:null,mobileNumber:null,userType:"guest",role:"guest",isAuthenticated:!1,isGuest:!0},segment:{id:null,code:"RETAIL",name:"Retail Customer",pricingTier:0},location:{pincode:null,geoZone:{id:null,name:null},territoryAccess:[],detectionMethod:"FALLBACK"},pricing:{currency:"INR",creditLimit:null,paymentTerms:null},meta:{timestamp:new Date().toISOString(),source:"FALLBACK"}})}finally{l(!1)}},[]);return y.useEffect(()=>{u()},[u]),y.useEffect(()=>{const p=g=>{g.key==="token"&&(console.log(" Token changed, refetching context..."),u())};return window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)},[u]),{context:s,loading:n,error:d,refetch:u}}const Im=s=>({USD:"$",EUR:"",GBP:"",INR:"",JPY:"",CNY:"",AUD:"A$",CAD:"C$",AED:".",SAR:"",SGD:"S$",MYR:"RM",THB:"",CHF:"CHF",NZD:"NZ$",ZAR:"R",MXN:"$",BRL:"R$",KRW:"",HKD:"HK$",PLN:"z",TRY:""})[s]||s||"",jn=(s,r="INR",n={})=>{const{decimals:l=2,showSymbol:d=!0,locale:m="en-US"}=n;if(s==null||isNaN(s))return d?`${Im(r)}0.00`:"0.00";const u=Im(r),p=Number(s).toLocaleString(m,{minimumFractionDigits:l,maximumFractionDigits:l});return d?`${u}${p}`:p},j1=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"SAR",symbol:"",name:"Saudi Riyal"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"MYR",symbol:"RM",name:"Malaysian Ringgit"},{code:"THB",symbol:"",name:"Thai Baht"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"ZAR",symbol:"R",name:"South African Rand"},{code:"MXN",symbol:"$",name:"Mexican Peso"},{code:"BRL",symbol:"R$",name:"Brazilian Real"}];function v1({productId:s,selectedDynamicAttributes:r=[],quantity:n=1,showBreakdown:l=!1}){var V,M,R,ae,H,D,k,Q,W,te;const[d,m]=y.useState(null),[u,p]=y.useState(null),[g,h]=y.useState(!0),[j,v]=y.useState(null),[w,E]=y.useState({isNotAvailable:!1,message:""}),{context:A,loading:P}=GT();y.useEffect(()=>{s&&(async()=>{var X,Se;if(!(P||!A)){h(!0),v(null),console.log(" Fetching pricing with context:",{segment:A.segment.code,pincode:A.location.pincode,user:A.user.name});try{const $=localStorage.getItem("token"),re={"Content-Type":"application/json"};$&&(re.Authorization=`Bearer ${$}`);const ne={productId:s,selectedDynamicAttributes:(ve=>!Array.isArray(ve)||ve.length===0?[]:ve.map(O=>({type:O.attributeType||O.type,value:O.value,attributeType:O.attributeType||O.type,attributeValue:O.value})).filter(O=>O.value!=null))(r),quantity:n};A.location.pincode&&(ne.pincode=A.location.pincode),console.log(" ProductPriceBox sending request:",{hasUserContext:!!A,pincode:(X=A==null?void 0:A.location)==null?void 0:X.pincode,bodyPincode:ne.pincode,fullBody:ne});const Z=await fetch(`${Gf}/api/pricing/quote`,{method:"POST",headers:re,body:JSON.stringify(ne)});if(!Z.ok){const ve=await Z.json().catch(()=>({})),O=ve.message||`Server error: ${Z.status}`;throw console.error(" Server error:",ve),new Error(O)}const ue=await Z.json();if(ue.success){m(ue.pricing),p(ue.meta),console.log("\\n"+"=".repeat(80)),console.log(" PRICING API RESPONSE"),console.log("=".repeat(80)),console.log("\\n USER & SEGMENT:"),console.log(`   Segment: ${ue.meta.userSegmentName} (${ue.meta.userSegment})`),console.log(`   Guest Mode: ${ue.meta.isGuest?"YES":"NO"}`),console.log(`   Authenticated: ${ue.meta.isAuthenticated?"YES ":"NO "}`),console.log(`   Pricing Tier: ${ue.meta.pricingTier}`),console.log("\\n LOCATION:"),console.log(`   Pincode: ${ue.meta.pincode}`),console.log(`   Geo Zone: ${ue.meta.geoZone||"Not mapped"}`),console.log(`   Detection Method: ${ue.meta.detectedBy}`),ue.meta.detectedBy==="IP_DETECTION"?console.log("     Location detected from IP address (not browser geolocation)"):console.log("    Location provided via request/localStorage"),console.log("\\n PRICING:");const ve=Im(ue.pricing.currency||"INR");console.log(`   Base Price: ${ve}${ue.pricing.basePrice}`),console.log(`   Subtotal: ${ve}${ue.pricing.subtotal}`),console.log(`   GST (${ue.pricing.gstPercentage}%): ${ve}${ue.pricing.gstAmount}`),console.log(`   Total Payable: ${ve}${ue.pricing.totalPayable}`),console.log(`   Modifiers Applied: ${ue.meta.modifiersApplied}`),((Se=ue.pricing.appliedModifiers)==null?void 0:Se.length)>0&&(console.log("\\n MODIFIERS:"),ue.pricing.appliedModifiers.forEach((O,J)=>{const z=O.reason||O.source||O.name||"Modifier",ye=O.value!==void 0?O.value:O.applied||0,xe=O.modifierType||O.type||"FIXED";console.log(`   ${J+1}. ${z}: ${ye>0?"+":""}${ye} (${xe})`)})),console.log("=".repeat(80)+"\\n")}else ue.isAvailable===!1||ue.errorCode==="PRODUCT_NOT_AVAILABLE"?(E({isNotAvailable:!0,message:ue.displayMessage||ue.message||"This product is not available in your region"}),console.log(" Product Not Available:",ue.message)):v(ue.error||ue.message||"Failed to calculate price")}catch($){console.error(" ProductPriceBox: Error fetching pricing:",$),v($.message||"Network error")}finally{h(!1)}}})()},[s,JSON.stringify(r),n,A,P]);const q=ie=>{if(ie==null||isNaN(ie)){const Se=(d==null?void 0:d.currency)||"INR";return jn(0,Se)}const X=(d==null?void 0:d.currency)||"INR";return jn(ie,X)};return P||g?e.jsxs("div",{className:"price-box loading animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-24"})]}):j?e.jsx("div",{className:"price-box error",children:e.jsxs("div",{className:"text-red-500 text-sm mt-2 flex items-center gap-2 bg-red-50 p-2 rounded",children:[e.jsx("span",{className:"font-bold",children:" Error:"})," ",j,e.jsx("button",{onClick:()=>window.location.reload(),className:"underline ml-2 hover:text-red-700",children:"Retry"})]})}):w.isNotAvailable?e.jsx("div",{className:"price-box not-available",children:e.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),e.jsx("h3",{className:"text-lg font-bold text-amber-800",children:"Product Not Available"}),e.jsx("p",{className:"text-amber-700 text-sm",children:w.message}),((M=(V=A==null?void 0:A.location)==null?void 0:V.geoZone)==null?void 0:M.name)&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" Your region: ",e.jsx("strong",{children:A.location.geoZone.name})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please check other products or contact support for availability"})]})})}):d?e.jsxs("div",{className:"price-box",children:[!l&&e.jsxs("div",{className:"space-y-3",children:[r&&r.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-3 pb-2 border-b border-gray-100",children:"Selected Options:"}),e.jsx("div",{className:"space-y-2",children:r.filter(ie=>{const X=ie.value||ie.attributeValue;return typeof X=="string"&&(X.length>30||/^[0-9a-f]{24}$/i.test(X))?!1:X!=null&&X!==""}).map((ie,X)=>{const Se=ie.name||ie.attributeName||ie.type||ie.attributeType||"Option",$=ie.label||ie.value||ie.attributeValue;return e.jsxs("div",{className:"flex justify-between items-center text-sm py-1.5 px-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:Se}),e.jsx("span",{className:"font-semibold text-gray-900",children:$})]},X)})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Unit Price"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:q(d.subtotal/n)})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-0.5",children:[" ",n.toLocaleString()," units"]}),e.jsx("div",{className:"text-base font-bold text-gray-900",children:q(d.subtotal)})]})]})}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["GST (",d.gstPercentage,"%)"]}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:q(d.gstAmount)})]})}),e.jsx("div",{className:"px-5 py-4 bg-gradient-to-br from-green-500 to-emerald-600",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide mb-0.5",children:"Total Amount"}),e.jsx("div",{className:"text-xs text-white/90",children:"Inclusive of all taxes"})]}),e.jsx("div",{className:"text-3xl font-bold text-white",children:q(d.totalPayable)})]})})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center space-y-1",children:[e.jsxs("div",{children:["Price for ",n.toLocaleString()," units"]}),d.calculatedAt&&new Date(d.calculatedAt).toString()!=="Invalid Date"&&e.jsxs("div",{children:["Calculated at ",new Date(d.calculatedAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"price-main flex items-baseline gap-2",children:[d.compareAtPrice&&d.compareAtPrice>d.totalPayable&&e.jsx("span",{className:"text-sm text-gray-500 line-through",children:q(d.compareAtPrice)}),e.jsx("span",{className:"text-3xl font-bold text-blue-900",children:q(d.totalPayable)})]}),A&&e.jsxs("div",{className:"mt-3 p-3 bg-linear-to-r from-blue-50 to-green-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Pricing for:"}),e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded font-semibold",children:[" ",A.segment.name]}),A.location.geoZone.name&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded font-semibold",children:[" ",A.location.geoZone.name]}),A.location.pincode&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",A.location.pincode,")"]})]}),A.location.detectionMethod==="IP_DETECTION"&&e.jsx("div",{className:"mt-2 text-xs text-gray-600 italic flex items-center gap-1",children:e.jsx("span",{children:" Location detected from your IP address"})}),A.user.isGuest&&e.jsx("div",{className:"mt-2 text-xs text-blue-700 font-medium",children:" Login to unlock special pricing for your account"})]})]}),l&&e.jsxs("div",{className:"price-breakdown mt-4 space-y-2 border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"bg-linear-to-br from-blue-50 to-purple-50 rounded-lg p-4 mb-3",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"PRICING WATERFALL"})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-2 py-1 border-b border-blue-100",children:[e.jsxs("span",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx("span",{className:"text-blue-500",children:""})," Master Price:"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:q(d.basePrice)})]}),((R=d.appliedModifiers)==null?void 0:R.some(ie=>ie.type==="ZONE_BOOK"))&&e.jsxs("div",{className:"flex justify-between text-sm mb-2 py-1 border-b border-green-100 bg-green-50/50 px-2 rounded",children:[e.jsxs("span",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx("span",{className:"text-green-600",children:""})," Zone Override:",e.jsxs("span",{className:"text-xs text-green-700 font-medium",children:["(",((ae=d.appliedModifiers.find(ie=>ie.type==="ZONE_BOOK"))==null?void 0:ae.source)||"Zone Book",")"]})]}),e.jsx("span",{className:"font-semibold text-green-700",children:q(((H=d.appliedModifiers.find(ie=>ie.type==="ZONE_BOOK"))==null?void 0:H.afterPrice)||d.basePrice)})]}),((D=d.appliedModifiers)==null?void 0:D.some(ie=>ie.type==="SEGMENT_BOOK"))&&e.jsxs("div",{className:"flex justify-between text-sm mb-2 py-1 border-b border-purple-100 bg-purple-50/50 px-2 rounded",children:[e.jsxs("span",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx("span",{className:"text-purple-600",children:""})," Segment Override:",e.jsxs("span",{className:"text-xs text-purple-700 font-medium",children:["(",((k=d.appliedModifiers.find(ie=>ie.type==="SEGMENT_BOOK"))==null?void 0:k.source)||"Segment Book",")"]})]}),e.jsx("span",{className:"font-semibold text-purple-700",children:q(((Q=d.appliedModifiers.find(ie=>ie.type==="SEGMENT_BOOK"))==null?void 0:Q.afterPrice)||d.basePrice)})]}),((W=d.appliedModifiers)==null?void 0:W.filter(ie=>ie.type==="MODIFIER").length)>0&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-blue-200",children:[e.jsxs("div",{className:"text-xs font-semibold text-blue-700 mb-2 flex items-center gap-1",children:[e.jsx("span",{children:""})," Price Modifiers Applied:"]}),(te=d.appliedModifiers)==null?void 0:te.filter(ie=>ie.type==="MODIFIER").map((ie,X)=>{let Se=ie.name||ie.source||ie.modifierName;ie.modifierType==="PERCENT_DEC"&&(Se+=` (${ie.value}% off)`),ie.modifierType==="PERCENT_INC"&&(Se+=` (+${ie.value}%)`);const $=Im(d.currency||"INR");ie.modifierType==="FLAT_DEC"&&(Se+=` (-${$}${ie.value})`),ie.modifierType==="FLAT_INC"&&(Se+=` (+${$}${ie.value})`);const re=ie.change||ie.applied||0;return e.jsxs("div",{className:"flex justify-between text-xs mb-1 pl-2 py-1",children:[e.jsxs("span",{className:"text-gray-600",children:[Se,":"]}),e.jsxs("span",{className:re>=0?"text-red-600 font-medium":"text-green-600 font-medium",children:[re>=0?"+":"",q(re)]})]},X)})]})]}),e.jsxs("div",{className:"flex justify-between font-medium text-gray-800 border-b border-dashed border-gray-200 pb-2",children:[e.jsx("span",{children:"Final Unit Price:"}),e.jsx("span",{children:q(d.subtotal/n)})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 pt-2",children:[e.jsxs("span",{children:["Subtotal (",n," units):"]}),e.jsx("span",{children:q(d.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:["GST (",d.gstPercentage,"%):"]}),e.jsx("span",{children:q(d.gstAmount)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-blue-900 border-t border-gray-300 pt-3 mt-2",children:[e.jsx("span",{children:"Total Payable:"}),e.jsx("span",{children:q(d.totalPayable)})]})]}),n>1&&e.jsxs("div",{className:"price-note mt-2 text-sm text-gray-500",children:["Price for ",n," units"]}),!1]}):null}const QT=({onLocationDetected:s,showUI:r=!0,autoDetect:n=!0})=>{const[l,d]=y.useState(null),[m,u]=y.useState(!1),[p,g]=y.useState(null),[h,j]=y.useState(""),[v,w]=y.useState(!1),[E,A]=y.useState("idle");y.useEffect(()=>{n&&!l&&P()},[n]),y.useEffect(()=>{l&&s&&(s(l),localStorage.setItem("userLocation",JSON.stringify(l)))},[l,s]);const P=async()=>{u(!0),g(null),A("ip"),console.log(" Step 1: Trying IP-based location detection...");try{const V=await fetch(`${we}/geolocation/from-ip`,{method:"POST",headers:{"Content-Type":"application/json"}}),M=await V.json();if(V.ok&&M.success&&M.data&&M.data.pincode){const R={...M.data,source:"ip"};d(R),A("idle"),u(!1),console.log(" IP location detected:",R);return}V.status===400?console.log(" IP detection unavailable (localhost/private IP) - trying GPS..."):console.log(" IP detection returned no pincode - trying GPS...")}catch{console.log(" IP detection error - trying GPS...")}navigator.geolocation?(A("gps"),console.log(" Step 2: Trying GPS location..."),navigator.geolocation.getCurrentPosition(async V=>{try{const{latitude:M,longitude:R}=V.coords;console.log(` GPS coordinates obtained: ${M}, ${R}`);const ae=await fetch(`${we}/geolocation/from-gps`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:M,lng:R})}),H=await ae.json();if(ae.ok&&H.success&&H.data&&H.data.pincode){const D={...H.data,source:"gps"};d(D),A("idle"),console.log(" GPS location detected:",D)}else throw new Error(H.error||"GPS reverse geocoding failed")}catch(M){console.error(" GPS reverse geocoding failed:",M.message),g("Unable to detect your location automatically"),w(!0),A("manual")}finally{u(!1)}},V=>{console.log(` GPS denied or unavailable (${V.message})`),g("Unable to detect your location automatically"),w(!0),A("manual"),u(!1)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:0})):(console.log(" GPS not available"),g("Unable to detect your location automatically"),w(!0),A("manual"),u(!1))},q=async V=>{if(V.preventDefault(),!h||h.length!==6){g("Please enter a valid 6-digit pincode");return}u(!0),g(null);try{const M=await fetch(`${we}/geolocation/detect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pincode:h})}),R=await M.json();if(M.ok&&R.success){const ae={...R.data,source:"manual"};d(ae),w(!1),console.log(" Manual pincode accepted:",ae)}else g(R.error||"Invalid pincode")}catch(M){g(M.message||"Failed to validate pincode")}finally{u(!1)}};return r?e.jsxs("div",{className:"location-detector bg-linear-to-r from-blue-50 to-green-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(sn,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:" Your Location"})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 py-2",children:[e.jsx(Jt,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[E==="ip"&&"Detecting from IP address...",E==="gps"&&"Getting GPS location...",E==="manual"&&"Validating pincode...",E==="idle"&&"Detecting location..."]})]}),p&&!l&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded mb-3",children:[e.jsx(xs,{className:"w-4 h-4 text-yellow-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:p}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Please enter your pincode below"})]})]}),l&&!v&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-white rounded border border-green-200",children:[e.jsx(va,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[l.city&&`${l.city}, `,l.state&&`${l.state} - `,e.jsx("span",{className:"text-blue-600",children:l.pincode})]}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded font-medium",children:[l.source==="gps"&&" GPS",l.source==="ip"&&" IP",l.source==="manual"&&" Manual"]})]}),l.source==="ip"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Location detected from your IP address"})]})]}),v&&e.jsxs("form",{onSubmit:q,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter Pincode"}),e.jsx("input",{type:"text",id:"pincode",value:h,onChange:V=>j(V.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit pincode",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",maxLength:6,required:!0})]}),e.jsx("button",{type:"submit",disabled:m||h.length!==6,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium text-sm",children:m?"Validating...":"Submit"})]}),!l&&!m&&!p&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded border border-blue-100",children:e.jsx("p",{className:"text-xs text-blue-700",children:" Detecting your location for accurate pricing..."})})]}):null},YT=({isOpen:s,onClose:r,onConfirm:n,productId:l,productName:d,quantity:m,selectedDynamicAttributes:u,customerName:p,setCustomerName:g,customerEmail:h,setCustomerEmail:j,pincode:v,setPincode:w,address:E,setAddress:A,mobileNumber:P,setMobileNumber:q,estimatedDeliveryDate:V,deliveryLocationSource:M,onGetLocation:R,isGettingLocation:ae,gstPercentage:H=18})=>{const[D,k]=y.useState(null),[Q,W]=y.useState(!1),te=()=>!p||p.trim().length===0?(k("Please enter your full name."),!1):!h||h.trim().length===0?(k("Please enter your email address."),!1):!v||v.length!==6?(k("Please enter a valid 6-digit pincode."),!1):!E||E.trim().length===0?(k("Please enter your complete delivery address."),!1):!P||P.length!==10?(k("Please enter a valid 10-digit mobile number."),!1):!0,ie=async X=>{if(te()){W(!0),k(null);try{await n({...X,customerName:p,customerEmail:h,pincode:v,address:E,mobileNumber:P})}catch(Se){k(Se instanceof Error?Se.message:"Payment failed. Please try again.")}finally{W(!1)}}};return s?e.jsx(ba,{children:e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-br from-black/60 via-black/50 to-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-3 sm:p-4",onClick:()=>!Q&&r(),children:e.jsxs(st.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",duration:.5},onClick:X=>X.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-hidden flex flex-col","data-payment-modal":!0,children:[e.jsx("div",{className:"relative bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 px-6 py-5 border-b border-blue-500/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/10 backdrop-blur-sm rounded-xl",children:e.jsx(Vn,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Complete Your Order"}),e.jsx("p",{className:"text-blue-100 text-sm mt-0.5",children:"Secure checkout powered by SSL encryption"})]})]}),!Q&&e.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-lg transition-colors group",children:e.jsx(ss,{className:"w-5 h-5 text-white group-hover:rotate-90 transition-transform duration-300"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"grid lg:grid-cols-5 gap-6 p-6",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-5",children:[D&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(xs,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-900 text-sm",children:"Payment Error"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:D})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(Yl,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:"Delivery Information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(In,{className:"w-4 h-4 text-gray-500"}),"Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p,onChange:X=>{g(X.target.value),D&&k(null)},placeholder:"Enter your full name",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-sm font-medium text-gray-900 placeholder:text-gray-400"})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Ql,{className:"w-4 h-4 text-gray-500"}),"Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:h,onChange:X=>{j(X.target.value),D&&k(null)},placeholder:"your@email.com",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-sm font-medium text-gray-900 placeholder:text-gray-400"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(fc,{className:"w-4 h-4 text-gray-500"}),"Mobile ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:P,onChange:X=>{const Se=X.target.value.replace(/\D/g,"").slice(0,10);q(Se),D&&k(null)},placeholder:"10-digit number",maxLength:10,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-sm font-medium text-gray-900 placeholder:text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Q5,{className:"w-4 h-4 text-gray-500"}),"Pincode ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:v,onChange:X=>{const Se=X.target.value.replace(/\D/g,"").slice(0,6);w(Se),D&&k(null)},placeholder:"6-digit pincode",maxLength:6,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-sm font-medium text-gray-900 placeholder:text-gray-400"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(sn,{className:"w-4 h-4 text-gray-500"}),"Complete Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:E,onChange:X=>{A(X.target.value),D&&k(null)},placeholder:"House no., Building, Street, Area, Landmark...",rows:3,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-sm font-medium text-gray-900 placeholder:text-gray-400 resize-none"}),e.jsx("button",{type:"button",onClick:R,disabled:ae,className:"absolute bottom-3 right-3 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",title:"Auto-detect location",children:ae?e.jsx(Jt,{className:"w-4 h-4 animate-spin"}):e.jsx(sn,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:[e.jsx(Co,{className:"w-3 h-3"}),"Your address is encrypted and secure"]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:e.jsx(Vn,{className:"w-5 h-5 text-green-600"})}),e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:"Payment Method"})]}),e.jsx("button",{onClick:async()=>{te()&&await ie({})},disabled:Q,className:"w-full py-4 px-6 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:Q?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"w-5 h-5 animate-spin"}),"Processing Order..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ia,{className:"w-5 h-5"}),"Confirm Order"]})}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-3",children:"Secure payment gateway will open after confirmation"})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-5",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border border-gray-200 rounded-xl p-5 shadow-sm sticky top-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:e.jsx(ia,{className:"w-5 h-5 text-gray-700"})}),e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:"Order Summary"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Product"}),e.jsx("p",{className:"font-bold text-gray-900",children:d})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Quantity"}),e.jsxs("p",{className:"font-bold text-gray-900",children:[m.toLocaleString()," units"]})]}),u.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Customizations"}),e.jsx("div",{className:"space-y-1.5",children:u.map((X,Se)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"text-blue-600",children:""}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[X.name,":"]}),e.jsx("span",{className:"font-semibold text-gray-900 ml-1",children:X.label||X.value})]})]},Se))})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 border-2 border-blue-200",children:e.jsx(v1,{productId:l,quantity:m,selectedDynamicAttributes:u,showBreakdown:!0})}),V&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(So,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-green-900 text-sm",children:"Estimated Delivery"}),e.jsx("p",{className:"text-green-700 font-semibold mt-1",children:V}),M&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:M})]})]})})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Co,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 text-sm",children:"Secure Payment"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"256-bit SSL encryption  PCI DSS compliant"})]})]})})]})]})})]})})}):null},kd=({forcedProductId:s})=>{var wn,Sn;const r=rf(),n=Ha(),{categoryId:l,subCategoryId:d,nestedSubCategoryId:m}=r,u=s||r.productId,[p,g]=y.useState([]),[h,j]=y.useState(null),[v,w]=y.useState(null),[E,A]=y.useState([]),[P,q]=y.useState(!0),[V,M]=y.useState(null),[R,ae]=y.useState([]),[H,D]=y.useState({}),[k,Q]=y.useState([]),[W,te]=y.useState(null),[ie,X]=y.useState(!1),[Se,$]=y.useState(null),[re,B]=y.useState(!1),[ne,Z]=y.useState(""),[ue,ve]=y.useState(""),[O,J]=y.useState(""),[z,ye]=y.useState(1e3),[xe,I]=y.useState({}),[L,_]=y.useState(new Set),[me,fe]=y.useState([]),[Me,se]=y.useState(null),[le,Be]=y.useState(""),[Qe,tt]=y.useState(null),[ot,Ve]=y.useState(""),[Ct,ds]=y.useState(""),[At,as]=y.useState(""),[hs,Vt]=y.useState(""),[Bs,Ss]=y.useState(""),[wa,ge]=y.useState(null),[yt,_t]=y.useState(null),[ps,ys]=y.useState(""),[at,Yt]=y.useState(""),[Ms,rs]=y.useState(""),[ea,He]=y.useState(0),[mt,xt]=y.useState(0),[Ds,Vs]=y.useState(0),[Ks,Gs]=y.useState(0),[ha,$a]=y.useState(null),[ir,mr]=y.useState(0),[ln,Li]=y.useState(0),[Qn,oe]=y.useState(0),[be,Te]=y.useState(0),[rt,lt]=y.useState([]),[zt,ct]=y.useState(0),[ft,kt]=y.useState(0),[Lt,Ut]=y.useState(!1),[It,cs]=y.useState(!1),[Os,gs]=y.useState(!1),[la,ns]=y.useState(!1),[Rs,Es]=y.useState(null),[hr,oa]=y.useState([]),[yr,Sr]=y.useState(!1),[ta,lr]=y.useState(null),[on,Ys]=y.useState(!1),[es,Ts]=y.useState(null),[Ga,ca]=y.useState(!1);y.useEffect(()=>{const he=ze=>{ze.key==="Escape"&&Lt&&Ut(!1)};return window.addEventListener("keydown",he),()=>window.removeEventListener("keydown",he)},[Lt]),y.useEffect(()=>{try{const he=localStorage.getItem("userLocation");if(he){const ze=JSON.parse(he);ze.pincode&&!At&&as(ze.pincode)}}catch(he){console.error("Error loading user location:",he)}},[]),y.useEffect(()=>{var he,ze,Ce;h&&((he=h.filters)!=null&&he.printingOption&&h.filters.printingOption.length===1&&(!ne||ne!==h.filters.printingOption[0])&&Z(h.filters.printingOption[0]),(ze=h.filters)!=null&&ze.deliverySpeed&&h.filters.deliverySpeed.length===1&&(!ue||ue!==h.filters.deliverySpeed[0])&&ve(h.filters.deliverySpeed[0]),(Ce=h.filters)!=null&&Ce.textureType&&h.filters.textureType.length===1&&(!O||O!==h.filters.textureType[0])&&J(h.filters.textureType[0]),h&&re&&R.length>0?Hj({attributes:R,rules:k,selectedValues:{...xe}}).attributes.forEach(Fe=>{if(!Fe.isVisible)return;const nt=Fe.attributeValues||[];if(nt.length===1){const ke=nt[0];(!xe[Fe._id]||xe[Fe._id]!==ke.value)&&I(Ge=>({...Ge,[Fe._id]:ke.value}))}Fe.defaultValue&&!xe[Fe._id]&&I(ke=>({...ke,[Fe._id]:Fe.defaultValue}))}):h&&!re&&h.dynamicAttributes&&h.dynamicAttributes.forEach(Ne=>{if(!Ne.isEnabled)return;const Fe=typeof Ne.attributeType=="object"?Ne.attributeType:null;if(!Fe)return;const nt=Ne.customValues&&Ne.customValues.length>0?Ne.customValues:Fe.attributeValues||[];if(nt.length===1){const ke=nt[0];(!xe[Fe._id]||xe[Fe._id]!==ke.value)&&I({...xe,[Fe._id]:ke.value})}}))},[h,re,R,k,xe]),y.useEffect(()=>{(async()=>{var ze,Ce,Ne,Fe,nt,ke,Ge,Le;try{q(!0),M(null),j(null),g([]);let Ue=null,Re=null;const vt=m||d;if(u)if(!/^[0-9a-fA-F]{24}$/.test(u))console.warn("Invalid productId format:",u),$("Invalid product ID format. Please select a product from the list."),X(!1);else try{X(!0),$(null);const qs=await fetch(`${we}/products/${u}/detail`,{method:"GET",headers:{Accept:"application/json"}});if(qs.ok){const As=await qs.text();if(!As.startsWith("<!DOCTYPE")&&!As.startsWith("<html")){const Ie=JSON.parse(As),Je=Ie.product,et=Ie.attributes||[],it=Ie.subAttributes||{},Bt=Ie.rules||[],We=Ie.quantityConfig;Je.subcategory&&(typeof Je.subcategory=="object"&&Je.subcategory._id?(Ue=Je.subcategory._id,Re=Je.subcategory,w(Je.subcategory)):typeof Je.subcategory=="string"&&(Ue=Je.subcategory));const Pe={_id:Je._id,id:Je._id,name:Je.name||"",description:Je.description||"",descriptionArray:Je.descriptionArray||(Je.description?[Je.description]:[]),filters:{printingOption:((ze=Je.filters)==null?void 0:ze.printingOption)||[],orderQuantity:We||((Ce=Je.filters)==null?void 0:Ce.orderQuantity)||{min:1e3,max:72e3,multiples:1e3},deliverySpeed:((Ne=Je.filters)==null?void 0:Ne.deliverySpeed)||[],textureType:((Fe=Je.filters)==null?void 0:Fe.textureType)||void 0,filterPricesEnabled:((nt=Je.filters)==null?void 0:nt.filterPricesEnabled)||!1,printingOptionPrices:((ke=Je.filters)==null?void 0:ke.printingOptionPrices)||[],deliverySpeedPrices:((Ge=Je.filters)==null?void 0:Ge.deliverySpeedPrices)||[],textureTypePrices:((Le=Je.filters)==null?void 0:Le.textureTypePrices)||[]},basePrice:Je.basePrice||0,image:Je.image,subcategory:Je.subcategory,options:Je.options||[],dynamicAttributes:et.map(_e=>({attributeType:{_id:_e._id,attributeName:_e.attributeName,inputStyle:_e.inputStyle,attributeValues:_e.attributeValues||[],defaultValue:_e.defaultValue},isEnabled:!0,isRequired:_e.isRequired||!1,displayOrder:_e.displayOrder||0,customValues:_e.customValues||[]})),quantityDiscounts:Je.quantityDiscounts||[],maxFileSizeMB:Je.maxFileSizeMB,minFileWidth:Je.minFileWidth,maxFileWidth:Je.maxFileWidth,minFileHeight:Je.minFileHeight,maxFileHeight:Je.maxFileHeight,blockCDRandJPG:Je.blockCDRandJPG||!1,additionalDesignCharge:Je.additionalDesignCharge||0,gstPercentage:Je.gstPercentage||0,showPriceIncludingGst:Je.showPriceIncludingGst||!1,instructions:Je.instructions||""};j(Pe),ae(et),D(it),Q(Bt),te(We),B(!0)}}else{const As=await qs.text();let Ie="Failed to fetch product details";try{Ie=JSON.parse(As).error||Ie}catch{}$(Ie)}}catch(qs){console.error("Error fetching product details:",qs),$("Error loading product details")}finally{X(!1)}if(!Ue){const is=l?`${we}/subcategories/category/${l}?includeChildren=true`:`${we}/subcategories`,qs=await fetch(is,{method:"GET",headers:{Accept:"application/json"}});if(qs.ok){const As=await qs.text();if(!As.startsWith("<!DOCTYPE")&&!As.startsWith("<html")){const Ie=JSON.parse(As),Je=Bt=>{let We=[];return Bt.forEach(Pe=>{We.push(Pe),Pe.children&&Pe.children.length>0&&(We=We.concat(Je(Pe.children)))}),We},et=Je(Array.isArray(Ie)?Ie:[]),it=vt;if(it&&(/^[0-9a-fA-F]{24}$/.test(it)?Re=et.find(We=>We._id===it):Re=et.find(We=>{var Pe,_e;return We.slug===it||((Pe=We.name)==null?void 0:Pe.toLowerCase().replace(/\s+/g,"-"))===it.toLowerCase().replace(/\s+/g,"-")||((_e=We.name)==null?void 0:_e.toLowerCase())===it.toLowerCase()})),Re||(Re=Ie.find(Bt=>{var We,Pe,_e;return((We=Bt.slug)==null?void 0:We.toLowerCase())==="gloss-finish"||((Pe=Bt.name)==null?void 0:Pe.toLowerCase().includes("gloss finish"))||((_e=Bt.name)==null?void 0:_e.toLowerCase().includes("gloss"))})),Re){if(Ue=Re._id,w(Re),Re.parent&&(typeof Re.parent=="object"?Re.parent._id:Re.parent)&&!m&&l){const Pe=typeof Re.parent=="object"?Re.parent._id:Re.parent;console.log(`Nested subcategory detected in list, redirecting to include parent: ${Pe}`),n(`/digital-print/${l}/${Pe}/${Ue}${u?`/${u}`:""}`,{replace:!0}),q(!1);return}vt&&!/^[0-9a-fA-F]{24}$/.test(vt)&&Ue&&Ue!==vt&&(m?n(`/digital-print/${l}/${Ue}${u?`/${u}`:""}`,{replace:!0}):l?n(`/digital-print/${l}/${Ue}${u?`/${u}`:""}`,{replace:!0}):n(`/digital-print/${Ue}${u?`/${u}`:""}`,{replace:!0}))}else if(vt)try{const Bt=await fetch(`${we}/subcategories/${vt}`,{method:"GET",headers:{Accept:"application/json"}});if(Bt.ok){const We=await Bt.text();if(!We.startsWith("<!DOCTYPE")&&!We.startsWith("<html")){const Pe=JSON.parse(We);if(Pe&&Pe._id){if(Re=Pe,Ue=Pe._id,w(Pe),console.log("Found subcategory via API lookup, using _id:",Ue),Pe.parent&&(typeof Pe.parent=="object"?Pe.parent._id:Pe.parent)&&!m&&l){const Nt=typeof Pe.parent=="object"?Pe.parent._id:Pe.parent;console.log(`Nested subcategory detected, redirecting to include parent: ${Nt}`),n(`/digital-print/${l}/${Nt}/${Ue}${u?`/${u}`:""}`,{replace:!0});return}if(vt&&!/^[0-9a-fA-F]{24}$/.test(vt)&&Ue&&Ue!==vt)if(m&&d){const Nt=(/^[0-9a-fA-F]{24}$/.test(d),d);n(`/digital-print/${l}/${Nt}/${Ue}${u?`/${u}`:""}`,{replace:!0})}else l?n(`/digital-print/${l}/${Ue}${u?`/${u}`:""}`,{replace:!0}):n(`/digital-print/${Ue}${u?`/${u}`:""}`,{replace:!0})}}}}catch(Bt){console.warn("Error fetching subcategory via API:",Bt)}}}}const $e=(Re==null?void 0:Re._id)||vt;if($e)try{console.log(`Checking for nested subcategories of: ${$e}`);const is=await fetch(`${we}/subcategories/parent/${$e}`,{method:"GET",headers:{Accept:"application/json"}});if(is.ok){const qs=await is.text();if(!qs.startsWith("<!DOCTYPE")&&!qs.startsWith("<html"))try{const As=JSON.parse(qs),Ie=Array.isArray(As)?As:[];if(Ie.sort((Je,et)=>(Je.sortOrder||0)-(et.sortOrder||0)),Ie.length>0){if(Ie.length===1&&!u){const Je=Ie[0],et=Je._id;if(m!==et&&d!==et){console.log(`Only one nested subcategory found: ${Je.name} (${et}). Auto-navigating...`);const it=l&&d?`/digital-print/${l}/${d}/${et}`:`/digital-print/${l}/${et}`;n(it,{replace:!0});return}}console.log(`Found ${Ie.length} nested subcategories for subcategory ${$e}`),A(Ie),g([]),q(!1);return}else console.log(`No nested subcategories found for subcategory ${$e}, will fetch products`)}catch(As){console.error("Error parsing nested subcategories response:",As)}}else console.log(`Nested subcategories check returned ${is.status}, will fetch products`)}catch(is){console.error("Error fetching nested subcategories:",is)}A([]);let ut,Gt;if(!Re||Re===null)if(l&&/^[0-9a-fA-F]{24}$/.test(l))ut=`${we}/products/category/${l}`,Gt=await fetch(ut,{method:"GET",headers:{Accept:"application/json"}});else{g([]);return}else if(Re&&Re._id){const is=Re._id,qs=Re.name||is;console.log(`Fetching products for subcategory: ${qs} (${is})`),ut=`${we}/products/subcategory/${is}`,Gt=await fetch(ut,{method:"GET",headers:{Accept:"application/json"}})}else if(l&&/^[0-9a-fA-F]{24}$/.test(l))ut=`${we}/products/category/${l}`,Gt=await fetch(ut,{method:"GET",headers:{Accept:"application/json"}});else{g([]);return}const Cs=await Gt.text();if(Cs.startsWith("<!DOCTYPE")||Cs.startsWith("<html"))console.error("Server returned HTML instead of JSON for products"),g([]);else if(Gt.ok)try{const is=JSON.parse(Cs);if(!Array.isArray(is))console.warn("Products data is not an array:",is),g([]);else{const qs=(Re==null?void 0:Re.name)||(Re==null?void 0:Re._id)||Ue||"category "+l;console.log(`Fetched ${is.length} product(s) for ${qs}`);let As=is;if(is.length===0&&Re&&l&&/^[0-9a-fA-F]{24}$/.test(l)){console.log(`No products found for subcategory ${Ue}, fetching category products as fallback`);try{const Je=await fetch(`${we}/products/category/${l}`,{method:"GET",headers:{Accept:"application/json"}});if(Je.ok){const et=await Je.text();if(!et.startsWith("<!DOCTYPE")&&!et.startsWith("<html")){const it=JSON.parse(et);Array.isArray(it)&&it.length>0&&(console.log(`Found ${it.length} product(s) in category as fallback`),As=it)}}}catch(Je){console.error("Error fetching category products as fallback:",Je)}}const Ie=As.map(Je=>{var et,it,Bt,We,Pe,_e,Mt,Nt;return{_id:Je._id,id:Je._id,name:Je.name||"",description:Je.description||"",descriptionArray:Je.descriptionArray||(Je.description?[Je.description]:[]),filters:{printingOption:((et=Je.filters)==null?void 0:et.printingOption)||[],orderQuantity:((it=Je.filters)==null?void 0:it.orderQuantity)||{min:1e3,max:72e3,multiples:1e3},deliverySpeed:((Bt=Je.filters)==null?void 0:Bt.deliverySpeed)||[],textureType:((We=Je.filters)==null?void 0:We.textureType)||void 0,filterPricesEnabled:((Pe=Je.filters)==null?void 0:Pe.filterPricesEnabled)||!1,printingOptionPrices:((_e=Je.filters)==null?void 0:_e.printingOptionPrices)||[],deliverySpeedPrices:((Mt=Je.filters)==null?void 0:Mt.deliverySpeedPrices)||[],textureTypePrices:((Nt=Je.filters)==null?void 0:Nt.textureTypePrices)||[]},basePrice:Je.basePrice||0,image:Je.image,subcategory:Je.subcategory,options:Je.options||[],dynamicAttributes:Je.dynamicAttributes||[],quantityDiscounts:Je.quantityDiscounts||[],maxFileSizeMB:Je.maxFileSizeMB,minFileWidth:Je.minFileWidth,maxFileWidth:Je.maxFileWidth,minFileHeight:Je.minFileHeight,maxFileHeight:Je.maxFileHeight,blockCDRandJPG:Je.blockCDRandJPG||!1,additionalDesignCharge:Je.additionalDesignCharge||0,gstPercentage:Je.gstPercentage||0,showPriceIncludingGst:Je.showPriceIncludingGst||!1,instructions:Je.instructions||""}});if(g(Ie),Ie.length===1&&!u){const Je=Ie[0];l&&d?n(`/digital-print/${l}/${d}/${Je._id}`,{replace:!0}):l?n(`/digital-print/${l}/${Je._id}`,{replace:!0}):d?n(`/digital-print/${d}/${Je._id}`,{replace:!0}):n(`/digital-print/${Je._id}`,{replace:!0});return}if(u&&Ie.length>0){const Je=Ie.find(et=>et._id===u||et.id===u);Je&&j(Je)}}}catch{g([])}else{console.error(`Failed to fetch products: ${Gt.status} ${Gt.statusText}`);try{const is=JSON.parse(Cs);console.error("Error details:",is)}catch{console.error("Error response text:",Cs)}g([])}}catch{g([])}finally{q(!1)}})()},[l,d,m,u]);const vs=he=>{var Fe,nt,ke,Ge;j(he),Z(""),ve(""),J("");const ze=(Fe=he.filters)==null?void 0:Fe.orderQuantity;let Ce=1e3;ze&&(ze.quantityType==="STEP_WISE"&&ze.stepWiseQuantities&&ze.stepWiseQuantities.length>0?Ce=Math.min(...ze.stepWiseQuantities):ze.quantityType==="RANGE_WISE"&&ze.rangeWiseQuantities&&ze.rangeWiseQuantities.length>0?Ce=Math.min(...ze.rangeWiseQuantities.map(Le=>Le.min||1e3)):Ce=ze.min||1e3),ye(Ce),$a(null);const Ne={};he.dynamicAttributes&&Array.isArray(he.dynamicAttributes)&&he.dynamicAttributes.forEach(Le=>{if(Le.isEnabled){const Ue=typeof Le.attributeType=="object"?Le.attributeType:null;if(Ue){const Re=Le.customValues&&Le.customValues.length>0?Le.customValues:Ue.attributeValues||[];Ue.defaultValue&&Re.find(vt=>vt.value===Ue.defaultValue)?Ne[Ue._id]=Ue.defaultValue:Re.length>0&&(Ue.inputStyle==="CHECKBOX"?Ne[Ue._id]=[]:Ne[Ue._id]=Re[0].value)}}}),I(Ne),_(new Set),fe([]),(nt=he.filters)!=null&&nt.printingOption&&he.filters.printingOption.length>0&&Z(he.filters.printingOption[0]),(ke=he.filters)!=null&&ke.deliverySpeed&&he.filters.deliverySpeed.length>0&&ve(he.filters.deliverySpeed[0]),(Ge=he.filters)!=null&&Ge.textureType&&he.filters.textureType.length>0&&J(he.filters.textureType[0])};y.useEffect(()=>{if(u&&p.length>0&&!h){const he=p.find(ze=>ze._id===u||ze.id===u);he&&vs(he)}},[u,p,h]);const ya=he=>{if(re&&R.length>0){for(const Ne of R)if(!(!Ne.isVisible||!xe[Ne._id])){if(Ne.isStepQuantity&&Ne.stepQuantities&&Ne.stepQuantities.length>0){const nt=Ne.stepQuantities.map(ke=>{const Ge=parseFloat(typeof ke=="object"?ke.quantity:ke);return isNaN(Ge)?0:Ge}).filter(ke=>ke>0).sort((ke,Ge)=>ke-Ge);if(nt.length>0)return nt}if(Ne.isRangeQuantity&&Ne.rangeQuantities&&Ne.rangeQuantities.length>0){const nt=[];if(Ne.rangeQuantities.forEach(ke=>{const Ge=typeof ke=="object"?parseFloat(ke.min):0,Le=typeof ke=="object"&&ke.max?parseFloat(ke.max):null;if(Ge>0&&(nt.includes(Ge)||nt.push(Ge),Le&&Le>Ge)){const Ue=Math.max(1,Math.floor((Le-Ge)/5));for(let Re=Ge+Ue;Re<Le;Re+=Ue)nt.includes(Re)||nt.push(Re);Le<=Ge*10&&(nt.includes(Le)||nt.push(Le))}}),nt.length>0)return nt.sort((ke,Ge)=>ke-Ge)}}}if(h&&h.dynamicAttributes)for(const Ne of h.dynamicAttributes){if(!Ne.isEnabled)continue;const Fe=typeof Ne.attributeType=="object"?Ne.attributeType:null;if(!(!Fe||!xe[Fe._id])){if(Fe.isStepQuantity&&Fe.stepQuantities&&Fe.stepQuantities.length>0){const ke=Fe.stepQuantities.map(Ge=>{const Le=parseFloat(typeof Ge=="object"?Ge.quantity:Ge);return isNaN(Le)?0:Le}).filter(Ge=>Ge>0).sort((Ge,Le)=>Ge-Le);if(ke.length>0)return ke}if(Fe.isRangeQuantity&&Fe.rangeQuantities&&Fe.rangeQuantities.length>0){const ke=[];if(Fe.rangeQuantities.forEach(Ge=>{const Le=typeof Ge=="object"?parseFloat(Ge.min):0,Ue=typeof Ge=="object"&&Ge.max?parseFloat(Ge.max):null;if(Le>0&&(ke.includes(Le)||ke.push(Le),Ue&&Ue>Le)){const Re=Math.max(1,Math.floor((Ue-Le)/5));for(let vt=Le+Re;vt<Ue;vt+=Re)ke.includes(vt)||ke.push(vt);Ue<=Le*10&&(ke.includes(Ue)||ke.push(Ue))}}),ke.length>0)return ke.sort((Ge,Le)=>Ge-Le)}}}const ze=he.filters.orderQuantity,Ce=ze.quantityType||"SIMPLE";if(Ce==="STEP_WISE"&&ze.stepWiseQuantities&&ze.stepWiseQuantities.length>0)return ze.stepWiseQuantities.filter(Ne=>Ne>0).sort((Ne,Fe)=>Ne-Fe);if(Ce==="RANGE_WISE"&&ze.rangeWiseQuantities&&ze.rangeWiseQuantities.length>0){const Ne=[];return ze.rangeWiseQuantities.forEach(Fe=>{if(Fe.min>0&&(Ne.includes(Fe.min)||Ne.push(Fe.min),Fe.max&&Fe.max>Fe.min)){const nt=Math.max(1,Math.floor((Fe.max-Fe.min)/5));for(let ke=Fe.min+nt;ke<Fe.max;ke+=nt)Ne.includes(ke)||Ne.push(ke);Fe.max<=Fe.min*10&&(Ne.includes(Fe.max)||Ne.push(Fe.max))}}),Ne.sort((Fe,nt)=>Fe-nt)}else{const{min:Ne,max:Fe,multiples:nt}=ze,ke=[];for(let Ge=Ne;Ge<=Fe&&Ge<=Ne+nt*20;Ge+=nt)ke.push(Ge);return ke}};qa.useEffect(()=>{var he,ze,Ce,Ne,Fe,nt;if(h){let ke=h.basePrice;if(((ze=(he=h.filters)==null?void 0:he.orderQuantity)==null?void 0:ze.quantityType)==="RANGE_WISE"&&h.filters.orderQuantity.rangeWiseQuantities&&h.filters.orderQuantity.rangeWiseQuantities.length>0){const We=h.filters.orderQuantity.rangeWiseQuantities.find(Pe=>z>=Pe.min&&(Pe.max===null||Pe.max===void 0||z<=Pe.max));We&&We.priceMultiplier!==void 0&&We.priceMultiplier!==1&&(ke=ke*We.priceMultiplier)}let Ge=0,Le=0,Ue=0;const Re=[],vt=((Ce=h.filters)==null?void 0:Ce.filterPricesEnabled)||!1;if(vt){if(ne&&((Ne=h.filters)!=null&&Ne.printingOptionPrices)){const We=h.filters.printingOptionPrices.find(Pe=>Pe.name===ne);if(We&&We.priceAdd!==void 0){const _e=(typeof We.priceAdd=="number"?We.priceAdd:parseFloat(We.priceAdd)||0)/1e3;ke+=_e,Ge=_e*z}}if(ue&&((Fe=h.filters)!=null&&Fe.deliverySpeedPrices)){const We=h.filters.deliverySpeedPrices.find(Pe=>Pe.name===ue);if(We&&We.priceAdd!==void 0){const _e=(typeof We.priceAdd=="number"?We.priceAdd:parseFloat(We.priceAdd)||0)/1e3;ke+=_e,Le=_e*z}}if(O&&((nt=h.filters)!=null&&nt.textureTypePrices)){const We=h.filters.textureTypePrices.find(Pe=>Pe.name===O);if(We&&We.priceAdd!==void 0){const _e=(typeof We.priceAdd=="number"?We.priceAdd:parseFloat(We.priceAdd)||0)/1e3;ke+=_e,Ue=_e*z}}}else h.options&&Array.isArray(h.options)&&h.options.forEach(We=>{if(We.name===ne){const Pe=typeof We.priceAdd=="number"?We.priceAdd:parseFloat(We.priceAdd)||0;if(Pe>0){const _e=Pe/1e3;ke+=_e,Ge=_e*z}else if(Pe<0){const _e=1+Math.abs(Pe)/100,Mt=ke;ke*=_e,Ge=(ke-Mt)*z}}else if(We.name===ue){const Pe=typeof We.priceAdd=="number"?We.priceAdd:parseFloat(We.priceAdd)||0;if(Pe>0){const _e=Pe/1e3;ke+=_e,Le=_e*z}else if(Pe<0){const _e=1+Math.abs(Pe)/100,Mt=ke;ke*=_e,Le=(ke-Mt)*z}}else if(We.name===O){const Pe=typeof We.priceAdd=="number"?We.priceAdd:parseFloat(We.priceAdd)||0;if(Pe>0){const _e=Pe/1e3;ke+=_e,Ue=_e*z}else if(Pe<0){const _e=1+Math.abs(Pe)/100,Mt=ke;ke*=_e,Ue=(ke-Mt)*z}}});if(!vt&&(!h.options||h.options.length===0)){if(ne==="Both Sides"){const We=ke;ke*=1.2,Ge=(ke-We)*z}if(ue==="Express"){const We=ke;ke*=1.3,Le=(ke-We)*z}if(O){const We=ke;ke*=1.15,Ue=(ke-We)*z}}let $e=0;h.options&&Array.isArray(h.options)&&me.length>0&&me.forEach(We=>{const Pe=h.options.find(_e=>_e.name===We);if(Pe&&Pe.priceAdd!==void 0){const _e=typeof Pe.priceAdd=="number"?Pe.priceAdd:parseFloat(Pe.priceAdd)||0;if(_e!==0){const Mt=_e/1e3;ke+=Mt,$e+=Mt*z}}}),Te($e),h.dynamicAttributes&&Array.isArray(h.dynamicAttributes)&&h.dynamicAttributes.forEach(We=>{if(We.isEnabled){const Pe=typeof We.attributeType=="object"?We.attributeType:null;if(Pe){const _e=xe[Pe._id];if(_e!=null&&_e!==""){const Mt=We.customValues&&We.customValues.length>0?We.customValues:Pe.attributeValues||[];if(Array.isArray(_e)){const Nt=[];let ts=0;_e.forEach(ms=>{const jt=Mt.find(Wt=>Wt.value===ms);if(jt){let Wt=0;if(jt.description){const gt=jt.description.match(/Price Impact: ([\d.]+)/);gt&&(Wt=parseFloat(gt[1])||0)}if(Wt>0)ts+=Wt*z,jt.label&&Nt.push(jt.label);else if(jt.priceMultiplier&&jt.priceMultiplier!==1){const gt=ke;ke=ke*jt.priceMultiplier;const Na=(ke-gt)*z;ts+=Na,jt.label&&Nt.push(jt.label)}}}),ts!==0&&Re.push({name:Pe.attributeName,label:Nt.join(", ")||"Selected",charge:ts})}else{const Nt=Mt.find(ts=>ts.value===_e);if(Nt){let ts=0;if(Nt.description){const ms=Nt.description.match(/Price Impact: ([\d.]+)/);ms&&(ts=parseFloat(ms[1])||0)}if(ts>0){const ms=ts*z;ms!==0&&Re.push({name:Pe.attributeName,label:Nt.label||String(_e||""),charge:ms})}else if(Nt.priceMultiplier&&Nt.priceMultiplier!==1){const ms=ke;ke=ke*Nt.priceMultiplier;const jt=(ke-ms)*z;jt!==0&&Re.push({name:Pe.attributeName,label:Nt.label||String(_e||""),charge:jt})}}}}}}});const ut=ke*z;let Gt=1,Cs=null;if(h.quantityDiscounts&&Array.isArray(h.quantityDiscounts)){const We=h.quantityDiscounts.find(Pe=>{const _e=Pe.minQuantity||0,Mt=Pe.maxQuantity;return z>=_e&&(Mt==null||z<=Mt)});We&&(We.priceMultiplier?Gt=We.priceMultiplier:We.discountPercentage&&(Gt=(100-We.discountPercentage)/100),Cs=We.discountPercentage||0)}const is=Re.reduce((We,Pe)=>We+Pe.charge,0);ct(ut);const As=ut*Gt+is;xt(As),$a(Cs),mr(Ge),Li(Le),oe(Ue),lt(Re);const Ie=h.additionalDesignCharge||0;Gs(Ie);const Je=h.gstPercentage||0,et=(As+Ie)*(Je/100);Vs(et);const it=As+Ie;He(it);const Bt=z>0?it/z:ke;kt(Bt)}},[h,ne,ue,O,z,xe,me]),qa.useEffect(()=>{if(!h)return;const he=ya(h);he.length>0&&!he.includes(z)&&ye(he[0])},[xe,h]);const vn=he=>{const ze={};if(!he)return ze;const Ce=he.match(/max(?:imum)?\s+file\s+size[:\s]+(\d+)\s*mb/i);Ce&&(ze.maxSizeMB=parseInt(Ce[1]));const Ne=he.match(/(\d+)\s*[x]\s*(\d+)\s*pixels?/i);Ne&&(ze.fileWidth=parseInt(Ne[1]),ze.fileHeight=parseInt(Ne[2])),/cdr|jpg|jpeg.*not\s+(?:accepted|allowed|permitted)/i.test(he)&&(ze.blockCDRandJPG=!0);const Fe=he.match(/(?:format|file\s+type|extension).*?only[:\s]+([^.]+)/i);if(Fe){const nt=Fe[1].split(/[,\s]+or\s+/i).map(ke=>ke.trim().toLowerCase());ze.allowedFormats=nt}return ze},or=(he,ze)=>{var vt;const Ce=(vt=he.target.files)==null?void 0:vt[0];if(!Ce)return;if(!Ce.type.startsWith("image/")){alert("Please upload an image file"),he.target.value="";return}const Ne=h!=null&&h.instructions?vn(h.instructions):{},Fe=Ne.maxSizeMB||(h==null?void 0:h.maxFileSizeMB)||10,nt=Fe*1024*1024;if(Ce.size>nt){alert(`File size must be less than ${Fe} MB as specified in the instructions`),he.target.value="";return}if(Ne.blockCDRandJPG!==void 0?Ne.blockCDRandJPG:(h==null?void 0:h.blockCDRandJPG)||!1){const $e=Ce.name.toLowerCase(),ut=$e.substring($e.lastIndexOf(".")+1);if(ut==="cdr"||ut==="jpg"||ut==="jpeg"){alert("CDR and JPG files are not accepted for this product as per instructions. Please use PNG, PDF, or other formats."),he.target.value="";return}}if(Ne.allowedFormats&&Ne.allowedFormats.length>0){const $e=Ce.name.toLowerCase(),ut=$e.substring($e.lastIndexOf(".")+1);if(!Ne.allowedFormats.some(Cs=>ut.includes(Cs.toLowerCase()))){alert(`Only ${Ne.allowedFormats.join(", ").toUpperCase()} files are accepted as per instructions.`),he.target.value="";return}}const Ge=h==null?void 0:h.minFileWidth,Le=h==null?void 0:h.maxFileWidth,Ue=h==null?void 0:h.minFileHeight,Re=h==null?void 0:h.maxFileHeight;if(Ge||Le||Ue||Re){const $e=new Image,ut=URL.createObjectURL(Ce);$e.onload=()=>{URL.revokeObjectURL(ut);let Gt=[];if(Ge&&$e.width<Ge&&Gt.push(`Image width must be at least ${Ge} pixels. Current width: ${$e.width} pixels.`),Le&&$e.width>Le&&Gt.push(`Image width must be at most ${Le} pixels. Current width: ${$e.width} pixels.`),Ue&&$e.height<Ue&&Gt.push(`Image height must be at least ${Ue} pixels. Current height: ${$e.height} pixels.`),Re&&$e.height>Re&&Gt.push(`Image height must be at most ${Re} pixels. Current height: ${$e.height} pixels.`),Gt.length>0){alert(Gt.join(`
`)),he.target.value="";return}if(ze==="front"){ge(Ce);const Cs=new FileReader;Cs.onloadend=()=>{ys(Cs.result)},Cs.readAsDataURL(Ce)}else{_t(Ce);const Cs=new FileReader;Cs.onloadend=()=>{Yt(Cs.result)},Cs.readAsDataURL(Ce)}},$e.onerror=()=>{URL.revokeObjectURL(ut),alert("Failed to load image. Please check the file format."),he.target.value=""},$e.src=ut}else if(ze==="front"){ge(Ce);const $e=new FileReader;$e.onloadend=()=>{ys($e.result)},$e.readAsDataURL(Ce)}else{_t(Ce);const $e=new FileReader;$e.onloadend=()=>{Yt($e.result)},$e.readAsDataURL(Ce)}},Yn=()=>{const he=localStorage.getItem("token");return{"Content-Type":"application/json",...he&&{Authorization:`Bearer ${he}`}}},Nn=(he,ze,Ce,Ne)=>{const nt=(Ce-he)*Math.PI/180,ke=(Ne-ze)*Math.PI/180,Ge=Math.sin(nt/2)*Math.sin(nt/2)+Math.cos(he*Math.PI/180)*Math.cos(Ce*Math.PI/180)*Math.sin(ke/2)*Math.sin(ke/2);return 6371*(2*Math.atan2(Math.sqrt(Ge),Math.sqrt(1-Ge)))},cr=async(he,ze,Ce)=>{const Ne=[{name:"Main Branch",address:"1-A, One Colony, One Street, One, India",latitude:28.6139,longitude:77.209,pincode:"110001"},{name:"Branch 2",address:"2-B, Two Colony, Two Street, Two, India",latitude:19.076,longitude:72.8777,pincode:"400001"},{name:"Branch 3",address:"3-C, Three Colony, Three Street, Three, India",latitude:12.9716,longitude:77.5946,pincode:"560001"}];let Fe=Ne[0],nt=Nn(he,ze,Ne[0].latitude,Ne[0].longitude);for(const Re of Ne){const vt=Nn(he,ze,Re.latitude,Re.longitude);vt<nt&&(nt=vt,Fe=Re)}const ke=2,Ge=Math.max(1,Math.ceil(nt/500)),Le=ke+Ge,Ue=new Date;return Ue.setDate(Ue.getDate()+Le),{deliveryDate:Ue.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),locationSource:Ce?`[Location: ${Ce}]`:`[Location: ${he.toFixed(4)}, ${ze.toFixed(4)}]`,nearestBranch:Fe.name}},Ea=async he=>{try{const Ce=await fetch(`${we}/geocoding/search?postalcode=${he}&country=India&limit=1`,{headers:{Accept:"application/json"}});if(Ce.ok){const Ne=await Ce.json();if(Ne&&Ne.length>0){const Fe=Ne[0];return{lat:parseFloat(Fe.lat),lon:parseFloat(Fe.lon),address:Fe.display_name||`Pincode: ${he}`}}}}catch{}return null};y.useEffect(()=>{(async()=>{if(h)try{if(navigator.geolocation)navigator.geolocation.getCurrentPosition(async ze=>{const{latitude:Ce,longitude:Ne}=ze.coords;let Fe="";try{const Ge=await fetch(`${we}/geocoding/reverse?lat=${Ce}&lon=${Ne}&addressdetails=1`,{headers:{Accept:"application/json"}});if(Ge.ok){const Le=await Ge.json();if(Le.address){const Ue=Le.address,Re=[];Ue.house_number&&Re.push(Ue.house_number),Ue.road&&Re.push(Ue.road),(Ue.suburb||Ue.neighbourhood)&&Re.push(Ue.suburb||Ue.neighbourhood),(Ue.city||Ue.town||Ue.village)&&Re.push(Ue.city||Ue.town||Ue.village),Ue.state&&Re.push(Ue.state),Ue.country&&Re.push(Ue.country),Fe=Re.join(", ")}}}catch{}const nt=await cr(Ce,Ne,Fe);se(nt.deliveryDate),Be(nt.locationSource)},async()=>{const ze=localStorage.getItem("userPincode");if(ze&&ze.length===6){const Ce=await Ea(ze);if(Ce){const Ne=await cr(Ce.lat,Ce.lon,Ce.address);se(Ne.deliveryDate),Be(`[Pincode: ${ze}]`)}else{const Fe=new Date;Fe.setDate(Fe.getDate()+5),se(Fe.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),Be(`[Pincode: ${ze}]`)}}else{const Ne=new Date;Ne.setDate(Ne.getDate()+5),se(Ne.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),Be("Default estimate")}});else{const ze=localStorage.getItem("userPincode");if(ze&&ze.length===6){const Ce=await Ea(ze);if(Ce){const Ne=await cr(Ce.lat,Ce.lon,Ce.address);se(Ne.deliveryDate),Be(`[Pincode: ${ze}]`)}else{const Fe=new Date;Fe.setDate(Fe.getDate()+5),se(Fe.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),Be(`[Pincode: ${ze}]`)}}else{const Ne=new Date;Ne.setDate(Ne.getDate()+5),se(Ne.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),Be("Default estimate")}}}catch{}})()},[h]);const da=async()=>{if(!navigator.geolocation){Es("Geolocation is not supported by your browser.");return}ca(!0),Es(null);try{const he=await new Promise((Ne,Fe)=>{navigator.geolocation.getCurrentPosition(Ne,Fe,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:ze,longitude:Ce}=he.coords;try{const Fe=await fetch(`${we}/geocoding/reverse?lat=${ze}&lon=${Ce}&zoom=18&addressdetails=1`,{headers:{Accept:"application/json"}});if(!Fe.ok)throw new Error("Failed to fetch address");const ke=(await Fe.json()).address||{},Ge=[];ke.house_number&&Ge.push(ke.house_number),ke.road&&Ge.push(ke.road),ke.neighbourhood&&Ge.push(ke.neighbourhood),ke.suburb&&Ge.push(ke.suburb),(ke.city||ke.town||ke.village)&&Ge.push(ke.city||ke.town||ke.village),ke.state&&Ge.push(ke.state),ke.postcode&&as(ke.postcode);const Le=Ge.join(", ");Le?(Vt(Le),Be("location")):Es("Could not determine address from location. Please enter manually.")}catch{Es("Could not fetch address from location. Please enter manually.")}}catch(he){he.code===1?Es("Location access denied. Please enable location permissions or enter address manually."):he.code===2?Es("Location unavailable. Please enter address manually."):he.code===3?Es("Location request timeout. Please try again or enter address manually."):Es("Failed to get location. Please enter address manually.")}finally{ca(!1)}},zs=y.useRef(null),cn=async()=>{if(!localStorage.getItem("token")){tt("Please login to place an order. Redirecting to login page..."),setTimeout(()=>{n("/login")},2e3);return}zs.current=null;const ze=[];if(h||(ze.push("Please select a product"),zs.current||(zs.current=document.querySelector("[data-product-select]"))),!wa&&(ze.push("Please upload a reference image"),!zs.current)){const Ce=document.querySelector('input[type="file"][accept*="image"]');if(Ce)zs.current=Ce;else{const Ne=document.querySelector("[data-upload-section]");Ne&&(zs.current=Ne)}}if(h!=null&&h.dynamicAttributes&&h.dynamicAttributes.forEach(Ce=>{if(Ce.isRequired&&Ce.isEnabled){const Ne=typeof Ce.attributeType=="object"?Ce.attributeType:null;if(Ne){const Fe=xe[Ne._id];if((!Fe||Array.isArray(Fe)&&Fe.length===0)&&(ze.push(`${Ne.attributeName} is required`),!zs.current)){const nt=document.querySelector(`[data-attribute="${Ne._id}"]`);if(nt){const ke=nt.querySelector("input, select, button");zs.current=ke||nt}else{const ke=document.querySelector(`[data-attribute-name="${Ne.attributeName}"]`);ke&&(zs.current=ke)}}if(Fe&&(Ne.inputStyle==="DROPDOWN"||Ne.inputStyle==="RADIO")){const nt=Ce.customValues&&Ce.customValues.length>0?Ce.customValues:Ne.attributeValues||[],ke=Array.isArray(Fe)?nt.find(Ge=>Fe.includes(Ge.value)):nt.find(Ge=>Ge.value===Fe);if(ke&&ke.description){const Ge=ke.description.match(/Images Required: (\d+)/),Le=Ge?parseInt(Ge[1]):0;if(Le>0){const Ue=`${Ne._id}_images`;if((Array.isArray(xe[Ue])?xe[Ue]:[]).length<Le&&(ze.push(`${Ne.attributeName}: Please upload ${Le} image(s) for ${ke.label}`),!zs.current)){const vt=document.querySelector(`[data-attribute="${Ne._id}"]`);if(vt){const $e=vt.querySelector(".bg-cream-50");zs.current=$e||vt}}}}}}}}),ze.length>0){tt(ze.join(`
`)),setTimeout(()=>{if(zs.current){zs.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),setTimeout(()=>{if(zs.current instanceof HTMLInputElement||zs.current instanceof HTMLSelectElement)zs.current.focus();else{const Ne=zs.current.querySelector("input, select, button");Ne&&(Ne instanceof HTMLInputElement||Ne instanceof HTMLSelectElement||Ne instanceof HTMLButtonElement)&&Ne.focus()}},300);const Ce=zs.current instanceof HTMLInputElement||zs.current instanceof HTMLSelectElement?zs.current:zs.current.querySelector("input, select, button")||zs.current;Ce&&(Ce.style.borderColor="#ef4444",Ce.style.borderWidth="2px",Ce.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)",setTimeout(()=>{Ce.style.borderColor="",Ce.style.borderWidth="",Ce.style.boxShadow=""},3e3))}else setTimeout(()=>{const Ce=document.querySelector('[role="alert"]');Ce&&Ce.scrollIntoView({behavior:"smooth",block:"center"})},100)},100);return}tt(null),ns(!0),Es(null)},to=async()=>{var ze,Ce,Ne,Fe,nt,ke,Ge,Le,Ue,Re,vt,$e,ut;if(!h){Es("Please select a product.");return}if(!wa||!ps){Es("Please upload a reference image.");return}if(!z||z<=0){Es("Please enter a valid quantity (must be greater than 0).");return}const he=ea+Ds;if(!he||he<=0){Es("Invalid order total. Please refresh and try again.");return}if(h!=null&&h.dynamicAttributes){for(const Gt of h.dynamicAttributes)if(Gt.isRequired&&Gt.isEnabled){const Cs=typeof Gt.attributeType=="object"?Gt.attributeType:null;if(Cs){const is=xe[Cs._id];if(!is||Array.isArray(is)&&is.length===0){Es(`${Cs.attributeName} is required.`);return}}}}if(!ot||ot.trim().length===0){Es("Please enter your full name.");return}if(!Ct||Ct.trim().length===0){Es("Please enter your email address.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ct)){Es("Please enter a valid email address.");return}if(!At||At.trim().length===0){Es("Please enter your pincode.");return}if(At.length!==6||!/^\d+$/.test(At)){Es("Please enter a valid 6-digit pincode.");return}if(!hs||hs.trim().length===0){Es("Please enter your complete address.");return}if(!Bs||Bs.trim().length===0){Es("Please enter your mobile number.");return}if(Bs.length<10||!/^\d+$/.test(Bs)){Es("Please enter a valid 10-digit mobile number.");return}gs(!0),Es(null);try{await new Promise(Pe=>setTimeout(Pe,300));const Gt={};if(!ps||!wa)throw new Error("Front design image is required.");try{const Pe=new FileReader,_e=await new Promise((Mt,Nt)=>{Pe.onload=()=>{const ts=Pe.result,ms=ts.includes(",")?ts.split(",")[1]:ts;Mt(ms)},Pe.onerror=Nt,Pe.readAsDataURL(wa)});if(!_e||_e.trim().length===0)throw new Error("Invalid front image data. Please upload the image again.");Gt.frontImage={data:_e,contentType:wa.type||"image/png",filename:wa.name||"front-design.png"}}catch(Pe){throw new Error(Pe instanceof Error?Pe.message:"Failed to prepare front design image. Please try uploading again.")}if(yt&&at)try{let Pe=at;Pe.includes(",")&&(Pe=Pe.split(",")[1]),Pe&&Pe.trim().length>0&&(Gt.backImage={data:Pe,contentType:yt.type||"image/png",filename:yt.name||"back-design.png"})}catch{}const Cs=me.map(Pe=>{const _e=h.options.find(Mt=>Mt.name===Pe);return{optionId:Pe,optionName:(_e==null?void 0:_e.name)||Pe,name:(_e==null?void 0:_e.name)||Pe,priceAdd:(_e==null?void 0:_e.priceAdd)||0,description:(_e==null?void 0:_e.description)||null,image:(_e==null?void 0:_e.image)||null}}),is={},qs=[];for(const Pe of Object.keys(xe)){const _e=xe[Pe];if(_e!=null&&_e!=="")if(Pe.includes("__")){const[Mt,Nt]=Pe.split("__"),ts=`${Mt}:${Nt}`,jt=(H[ts]||[]).find(Wt=>Wt.value===_e);if(jt){const Wt=(ze=h.dynamicAttributes)==null?void 0:ze.find(gt=>{const Na=typeof gt.attributeType=="object"?gt.attributeType:null;return(Na==null?void 0:Na._id)===Mt});if(Wt){const gt=typeof Wt.attributeType=="object"?Wt.attributeType:null;gt&&qs.push({attributeTypeId:Mt,attributeName:`${gt.attributeName}: ${jt.label}`,attributeValue:_e,label:jt.label||(_e==null?void 0:_e.toString())||"",priceAdd:jt.priceAdd||0,description:void 0,image:jt.image||void 0})}}}else{const Mt=(Ce=h.dynamicAttributes)==null?void 0:Ce.find(Nt=>{const ts=typeof Nt.attributeType=="object"?Nt.attributeType:null;return(ts==null?void 0:ts._id)===Pe});if(Mt){const Nt=typeof Mt.attributeType=="object"?Mt.attributeType:null;if(Nt){const ts=Mt.customValues||[],ms=Nt.attributeValues||[],jt=ts.length>0?ts:ms;let Wt=null;if(Array.isArray(_e)?Wt=jt.filter(gt=>_e.includes(gt.value)):Wt=jt.find(gt=>gt.value===_e||gt.value===_e.toString()),Wt)if(Array.isArray(Wt)){const gt=Wt.map(Ws=>Ws.label||Ws.value).join(", ");let Na=0,Ta=0;Wt.forEach(Ws=>{if(Ws.description){const Qa=Ws.description.match(/Price Impact: ([\d.]+)/);Qa&&(Na+=parseFloat(Qa[1])||0)}Ws.priceMultiplier&&(Ta+=Ws.priceMultiplier)});const Cr=`${Pe}_images`,dr=Array.isArray(xe[Cr])?xe[Cr].filter(Ws=>Ws!==null):[],Fa=[];if(dr.length>0){for(const Ws of dr)if(Ws instanceof File)try{const Qa=new FileReader,Wn=await new Promise((Zn,Kn)=>{Qa.onload=()=>{const xi=Qa.result,Ec=xi.includes(",")?xi.split(",")[1]:xi;Zn(Ec)},Qa.onerror=Kn,Qa.readAsDataURL(Ws)});Fa.push({data:Wn,contentType:Ws.type||"image/png",filename:Ws.name||"attribute-image.png"})}catch(Qa){console.error("Error converting image to base64:",Qa)}}qs.push({attributeTypeId:Pe,attributeName:Nt.attributeName||"Attribute",attributeValue:_e,label:gt,priceMultiplier:Na>0?void 0:Ta||void 0,priceAdd:Na,description:Wt.map(Ws=>Ws.description).filter(Boolean).join("; ")||void 0,image:((Ne=Wt[0])==null?void 0:Ne.image)||void 0,uploadedImages:Fa.length>0?Fa:void 0})}else{let gt=0,Na=Wt.priceMultiplier;if(Wt.description){const Fa=Wt.description.match(/Price Impact: ([\d.]+)/);Fa&&(gt=parseFloat(Fa[1])||0,gt>0&&(Na=void 0))}const Ta=`${Pe}_images`,Cr=Array.isArray(xe[Ta])?xe[Ta].filter(Fa=>Fa!==null):[],dr=[];if(Cr.length>0){for(const Fa of Cr)if(Fa instanceof File)try{const Ws=new FileReader,Qa=await new Promise((Wn,Zn)=>{Ws.onload=()=>{const Kn=Ws.result,xi=Kn.includes(",")?Kn.split(",")[1]:Kn;Wn(xi)},Ws.onerror=Zn,Ws.readAsDataURL(Fa)});dr.push({data:Qa,contentType:Fa.type||"image/png",filename:Fa.name||"attribute-image.png"})}catch(Ws){console.error("Error converting image to base64:",Ws)}}qs.push({attributeTypeId:Pe,attributeName:Nt.attributeName||"Attribute",attributeValue:_e,label:Wt.label||(_e==null?void 0:_e.toString())||"",priceMultiplier:Na||void 0,priceAdd:gt,description:Wt.description||void 0,image:Wt.image||void 0,uploadedImages:dr.length>0?dr:void 0})}else qs.push({attributeTypeId:Pe,attributeName:Nt.attributeName||"Attribute",attributeValue:_e,label:(_e==null?void 0:_e.toString())||"",priceAdd:0})}}_e instanceof File?is[Pe]=_e.name:is[Pe]=_e}}const As={productId:h._id,quantity:z,finish:ne||"Standard",shape:ue||"Rectangular",selectedOptions:Cs,selectedDynamicAttributes:qs,promoCodes:hr||[],pincode:At.trim(),address:hs.trim(),mobileNumber:Bs.trim(),uploadedDesign:Gt,notes:Ms||"",advancePaid:0,paymentStatus:"pending",paymentGatewayInvoiceId:null,paperGSM:is.paperGSM||null,paperQuality:is.paperQuality||null,laminationType:is.laminationType||null,specialEffects:is.specialEffects?[is.specialEffects]:[]},Ie=localStorage.getItem("token");let Je;if(Ie)Je=await fetch(`${we}/orders`,{method:"POST",headers:Yn(),body:JSON.stringify(As)});else{const Pe={...As,name:ot.trim(),email:Ct.trim(),mobileNumber:Bs.trim()};Je=await fetch(`${we}/orders/create-with-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Pe)})}if(!Je.ok){let Pe="Failed to create order. Please try again.",_e=null;try{const Mt=await Je.json();if(Pe=Mt.error||Pe,_e=Mt.details,Pe.includes("No token provided")||Pe.includes("token")){const Nt={...As,name:ot.trim(),email:Ct.trim(),mobileNumber:Bs.trim()},ts=await fetch(`${we}/orders/create-with-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nt)});if(ts.ok){const ms=await ts.json();ms.token&&(localStorage.setItem("token",ms.token),ms.user&&localStorage.setItem("user",JSON.stringify(ms.user)));const jt=ms.order;ns(!1),gs(!1),ms.isNewUser&&ms.tempPassword?alert(`Account created successfully!

Your temporary password: ${ms.tempPassword}

Please save this password. You can change it after logging in.

Order placed successfully! Order Number: ${jt.orderNumber||((Fe=jt.order)==null?void 0:Fe.orderNumber)||"N/A"}`):alert(`Order placed successfully! Order Number: ${jt.orderNumber||((nt=jt.order)==null?void 0:nt.orderNumber)||"N/A"}`),jt._id||(ke=jt.order)!=null&&ke._id?n(`/order/${jt._id||jt.order._id}`):n("/profile");return}}if(Mt.details)if(Array.isArray(Mt.details)){const Nt=Mt.details.map(ts=>`${ts.field}: ${ts.message}`).join(`
`);Pe+=`

`+Nt}else Pe+=`

`+Mt.details}catch{const Nt=await Je.text().catch(()=>"");Pe+=`

Server returned: ${Je.status} ${Je.statusText}`}throw new Error(Pe)}const et=await Je.json(),it=et.order||et;et.token&&(localStorage.setItem("token",et.token),et.user&&localStorage.setItem("user",JSON.stringify(et.user)));const Bt=et.isNewUser&&et.tempPassword?{tempPassword:et.tempPassword}:null,We=localStorage.getItem("token")||et.token;console.log(" Step 4: Initializing payment..."),console.log(" Order ID:",it._id||((Ge=it.order)==null?void 0:Ge._id)),console.log(" Amount:",it.totalPrice||((Le=it.priceSnapshot)==null?void 0:Le.finalTotal)),console.log(" Token available:",!!We);try{const Pe=await fetch(`${we}/payment/initialize`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${We}`},body:JSON.stringify({orderId:it._id||((Ue=it.order)==null?void 0:Ue._id),amount:Math.round((it.totalPrice||((Re=it.priceSnapshot)==null?void 0:Re.finalTotal)||0)*100),currency:"INR",customerInfo:{name:ot.trim(),email:Ct.trim(),phone:Bs.trim()}})});if(!Pe.ok){const jt=await Pe.json().catch(()=>({}));throw new Error(jt.message||"Failed to initialize payment")}const _e=await Pe.json(),Mt=_e.checkout_data||_e.checkoutData,Nt=_e.transaction_id||_e.transactionId;console.log(" Payment initialized successfully:",_e),console.log(" checkoutData available:",!!Mt),console.log(" Razorpay SDK loaded:",typeof window<"u"&&!!window.Razorpay),console.log(" PayU Bolt SDK loaded:",typeof window<"u"&&!!window.bolt);const ts=_e.gateway||"RAZORPAY";console.log(` Payment gateway selected: ${ts}`);const ms=_e.redirect_required||!1;if(console.log(` Redirect required: ${ms}`),console.log(` Checkout URL: ${_e.checkout_url}`),ms&&_e.checkout_url&&Mt){console.log(" Using redirect-based payment flow"),console.log(" Checkout data:",Mt);const jt=document.createElement("form");jt.method="POST",jt.action=_e.checkout_url,Object.keys(Mt).forEach(Wt=>{const gt=document.createElement("input");gt.type="hidden",gt.name=Wt,gt.value=Mt[Wt],jt.appendChild(gt)}),document.body.appendChild(jt),console.log(" Redirect form created, submitting to:",_e.checkout_url),jt.submit()}else if(ts==="RAZORPAY"&&typeof window<"u"&&window.Razorpay&&Mt){const jt=new window.Razorpay({key:Mt.key,amount:Mt.amount,currency:Mt.currency,name:"Print24",description:`Order #${it.orderNumber||""}`,order_id:Mt.order_id,prefill:{name:ot.trim(),email:Ct.trim(),contact:Bs.trim()},notes:{orderId:it._id||((vt=it.order)==null?void 0:vt._id)},theme:{color:"#3B82F6"},handler:async Wt=>{var gt,Na,Ta,Cr,dr;try{if((await fetch(`${we}/payment/verify`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${We}`},body:JSON.stringify({razorpay_payment_id:Wt.razorpay_payment_id,razorpay_order_id:Wt.razorpay_order_id,razorpay_signature:Wt.razorpay_signature,transactionId:Nt})})).ok)ns(!1),gs(!1),Bt!=null&&Bt.tempPassword?alert(`Account created successfully!

Your temporary password: ${Bt.tempPassword}

Please save this password. You can change it after logging in.

Payment successful! Order Number: ${it.orderNumber||((gt=it.order)==null?void 0:gt.orderNumber)||"N/A"}`):alert(`Payment successful! Order Number: ${it.orderNumber||((Na=it.order)==null?void 0:Na.orderNumber)||"N/A"}`),n(`/order/${it._id||((Ta=it.order)==null?void 0:Ta._id)}`);else throw new Error("Payment verification failed")}catch(Fa){console.error("Payment verification failed:",Fa),ns(!1),gs(!1),alert(`Payment verification failed.

Order Number: ${it.orderNumber||((Cr=it.order)==null?void 0:Cr.orderNumber)||"N/A"}

Please contact support or retry payment from order details.`),n(`/order/${it._id||((dr=it.order)==null?void 0:dr._id)}`)}},modal:{ondismiss:()=>{var Wt,gt;console.log("Payment modal dismissed by user"),ns(!1),gs(!1),alert(`Payment cancelled.

Order Number: ${it.orderNumber||((Wt=it.order)==null?void 0:Wt.orderNumber)||"N/A"}

Your order is saved. You can complete payment from order details page.`),n(`/order/${it._id||((gt=it.order)==null?void 0:gt._id)}`)}}});jt.on("payment.failed",Wt=>{var gt,Na;console.error("Razorpay payment failed:",Wt.error),ns(!1),gs(!1),alert(`Payment failed: ${Wt.error.description||"Unknown error"}

Order Number: ${it.orderNumber||((gt=it.order)==null?void 0:gt.orderNumber)||"N/A"}

You can retry payment from order details page.`),n(`/order/${it._id||((Na=it.order)==null?void 0:Na._id)}`)}),jt.open()}else if((ts==="STRIPE"||ts==="PHONEPE")&&(_e.checkout_url||_e.checkoutUrl)){const jt=_e.checkout_url||_e.checkoutUrl;console.log(` Redirecting to ${ts} checkout:`,jt),window.location.href=jt}else console.warn(`Payment SDK not loaded for ${ts}, showing order success`),ns(!1),gs(!1),alert(`Order placed successfully! Order Number: ${it.orderNumber||"N/A"}

Payment will be processed offline.`),n(`/order/${it._id||(($e=it.order)==null?void 0:$e._id)}`)}catch(Pe){console.error("Payment initialization failed:",Pe),ns(!1),gs(!1),alert(`Order created but payment could not be initialized.

Order Number: ${it.orderNumber||"N/A"}

Please complete payment from your order details page.`),n(`/order/${it._id||((ut=it.order)==null?void 0:ut._id)}`)}}catch(Gt){Es(Gt instanceof Error?Gt.message:"Failed to process payment and create order. Please try again."),gs(!1)}};return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-4 sm:py-8",children:[e.jsx("style",{children:`
        .preview-container {
          position: relative;
          width: 100%;
          max-width: 500px;
          height: auto;
          display: inline-block;
          overflow: hidden;
        }
        
        .card-image {
          width: 100%;
          height: 100%;
          object-fit: contain;
          border-radius: 8px;
          transition: filter 0.4s;
          display: block;
          position: relative;
          z-index: 1;
        }
        
        /* GLOSS EFFECT (SHINY OVERLAY) */
        .preview-container.gloss::after {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(
            120deg,
            rgba(255, 255, 255, 0.25),
            rgba(255, 255, 255, 0) 60%
          );
          pointer-events: none;
          border-radius: 8px;
          z-index: 2;
        }
        
        /* UV COATING (DEEP SHINE + BOOST COLOR) */
        .preview-container.uv .card-image {
          filter: saturate(1.15) contrast(1.1) !important;
        }
        
        .preview-container.uv::after {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.35),
            rgba(255, 255, 255, 0) 70%
          );
          mix-blend-mode: screen;
          pointer-events: none;
          border-radius: 8px;
          z-index: 2;
        }
        
        /* LAMINATION (SOFT GLOSS, LOW SHINE) */
        .preview-container.laminated .card-image {
          filter: brightness(1.05) !important;
        }
        
        .preview-container.laminated::after {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(255, 255, 255, 0.08);
          border-radius: 8px;
          pointer-events: none;
          z-index: 2;
        }
        
        /* TEXTURE EFFECTS - Different patterns for each texture number */
        .preview-container.texture::before {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          pointer-events: none;
          border-radius: 8px;
          z-index: 3;
          opacity: 0.35;
          mix-blend-mode: overlay;
        }
        
        /* Texture No.1 - Fine Grid */
        .preview-container.texture-1::before {
          background-image: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.03) 2px,
            rgba(0, 0, 0, 0.03) 4px
          ),
          repeating-linear-gradient(
            90deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.03) 2px,
            rgba(0, 0, 0, 0.03) 4px
          );
        }
        
        /* Texture No.2 - Coarse Grid */
        .preview-container.texture-2::before {
          background-image: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 4px,
            rgba(0, 0, 0, 0.04) 4px,
            rgba(0, 0, 0, 0.04) 8px
          ),
          repeating-linear-gradient(
            90deg,
            transparent,
            transparent 4px,
            rgba(0, 0, 0, 0.04) 4px,
            rgba(0, 0, 0, 0.04) 8px
          );
        }
        
        /* Texture No.3 - Diagonal Lines */
        .preview-container.texture-3::before {
          background-image: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 3px,
            rgba(0, 0, 0, 0.03) 3px,
            rgba(0, 0, 0, 0.03) 6px
          );
        }
        
        /* Texture No.4 - Dots Pattern */
        .preview-container.texture-4::before {
          background-image: radial-gradient(circle, rgba(0, 0, 0, 0.04) 1px, transparent 1px);
          background-size: 6px 6px;
        }
        
        /* Texture No.5 - Horizontal Lines */
        .preview-container.texture-5::before {
          background-image: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 3px,
            rgba(0, 0, 0, 0.03) 3px,
            rgba(0, 0, 0, 0.03) 6px
          );
        }
        
        /* Texture No.6 - Vertical Lines */
        .preview-container.texture-6::before {
          background-image: repeating-linear-gradient(
            90deg,
            transparent,
            transparent 3px,
            rgba(0, 0, 0, 0.03) 3px,
            rgba(0, 0, 0, 0.03) 6px
          );
        }
        
        /* Texture No.7 - Crosshatch */
        .preview-container.texture-7::before {
          background-image: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.02) 2px,
            rgba(0, 0, 0, 0.02) 4px
          ),
          repeating-linear-gradient(
            -45deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.02) 2px,
            rgba(0, 0, 0, 0.02) 4px
          );
        }
        
        /* Texture No.8 - Fine Dots */
        .preview-container.texture-8::before {
          background-image: radial-gradient(circle, rgba(0, 0, 0, 0.03) 0.5px, transparent 0.5px);
          background-size: 4px 4px;
        }
        
        /* NO COATING (MATTE LOOK) */
        .preview-container.none .card-image {
          filter: saturate(0.9) contrast(0.95) !important;
        }
        
        /* SIZE EFFECTS */
        .preview-container.small {
          transform: scale(0.8);
          transition: transform 0.3s ease, max-width 0.3s ease;
        }
        
        .preview-container.small .card-image {
          transform: scale(1);
        }
        
        /* Modal specific styles */
        .preview-container .card-image {
          max-width: 100%;
          max-height: 90vh;
        }
      `}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx(nn,{onClick:()=>{n(u&&m&&d&&l&&!(u===m)?`/digital-print/${l}/${d}/${m}`:u&&d&&l&&!(u===d)?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:u&&m&&d&&l&&u!==m?`/digital-print/${l}/${d}/${m}`:u&&d&&l&&u!==d?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:l?`/digital-print/${l}`:"/digital-print",label:u&&d&&u!==d||u&&m&&u!==m?"Back to products":u&&l||d?"Back to Category":"Back to Categories",className:"text-sm sm:text-base text-cream-600 hover:text-cream-900"})}),P&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(Jt,{className:"animate-spin text-cream-900",size:48})}),V&&!P&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-800",children:V})}),Se&&u&&e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-50",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[e.jsx(xs,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-2",children:"Error Loading Product"}),e.jsx("p",{className:"text-cream-700 mb-4",children:Se}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800",children:"Retry"})]})}),e.jsx(ba,{children:Qe&&e.jsxs(st.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"sticky top-4 mb-4 p-4 bg-red-50 border-2 border-red-300 rounded-lg flex items-start gap-3 text-red-700 shadow-lg z-50",role:"alert",children:[e.jsx(xs,{size:20,className:"shrink-0 mt-0.5 text-red-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold mb-1 text-red-900",children:"Please complete the required fields:"}),e.jsx("ul",{className:"text-sm whitespace-pre-wrap font-sans list-disc list-inside space-y-1",children:Qe.split(`
`).filter(he=>he.trim()).map((he,ze)=>e.jsx("li",{className:"text-red-800",children:he.replace(/^Please fill in all required fields:\n?/,"")},ze))})]}),e.jsx("button",{onClick:()=>tt(null),className:"shrink-0 text-red-500 hover:text-red-700 transition-colors","aria-label":"Close error message",children:e.jsx(ss,{size:18})})]})}),!P&&!V&&!ie&&!Se&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsxs("div",{className:"lg:sticky lg:top-24 space-y-4",children:[e.jsx(st.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[320px] sm:min-h-[420px] md:min-h-[520px] bg-cream-100/50",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:(()=>{let he=(h==null?void 0:h.image)||(v==null?void 0:v.image)||"/Glossy.png",ze=(h==null?void 0:h.name)||(v==null?void 0:v.name)||"Product Preview";if((!he||he.trim()===""||he==="null"||he==="undefined")&&(he=(v==null?void 0:v.image)||"/Glossy.png"),h&&h.dynamicAttributes&&L.size>0){const Ce=[...h.dynamicAttributes].filter(Ne=>Ne.isEnabled).sort((Ne,Fe)=>(Ne.displayOrder||0)-(Fe.displayOrder||0));for(const Ne of Ce){const Fe=typeof Ne.attributeType=="object"?Ne.attributeType:null;if(!Fe||!L.has(Fe._id))continue;const nt=xe[Fe._id];if(!nt)continue;const ke=Array.isArray(nt)?nt:[nt],Ge=Ne.customValues&&Ne.customValues.length>0?Ne.customValues:Fe.attributeValues||[];let Le=!1;for(const Ue of ke){const Re=Ge.find(vt=>vt.value===Ue||vt.value===String(Ue));if(Re&&Re.image&&Re.image.trim()!==""){he=Re.image,ze=`${Fe.attributeName} - ${Re.label}`,Le=!0;break}}if(Le)break}}return e.jsx("img",{src:he,alt:ze,className:"w-full h-full object-contain rounded-lg",onError:Ce=>{const Ne=Ce.target;Ne.src!==(v==null?void 0:v.image)&&Ne.src!=="/Glossy.png"&&(Ne.src=(v==null?void 0:v.image)||"/Glossy.png")},style:{maxWidth:"100%",maxHeight:"100%"}})})()})}),h&&e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 p-4 sm:p-5 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-sm sm:text-base font-semibold text-cream-900",children:"Order Summary"}),e.jsx("span",{className:"text-xs text-cream-500",children:"Live pricing"})]}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm text-cream-800 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-cream-600",children:"Product"}),e.jsx("span",{className:"font-medium text-right line-clamp-1 ml-2",children:h.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-cream-600",children:"Quantity"}),e.jsx("span",{className:"font-medium",children:z.toLocaleString()})]})]}),e.jsx(QT,{onLocationDetected:he=>{console.log(" Location detected for pricing:",he)},showUI:!1,autoDetect:!0}),e.jsx(v1,{productId:h._id,quantity:z,selectedDynamicAttributes:Object.entries(xe).filter(([he,ze])=>ze!=null&&ze!=="").map(([he,ze])=>{const Ce=R.find(nt=>nt._id===he),Ne=(Ce==null?void 0:Ce.attributeName)||he;let Fe=ze;if(Ce!=null&&Ce.attributeValues){const nt=Ce.attributeValues.find(ke=>ke.value===ze);Fe=(nt==null?void 0:nt.label)||ze}return{attributeType:he,value:typeof ze=="object"&&!Array.isArray(ze)&&!(ze instanceof File)?JSON.stringify(ze):ze,name:Ne,label:Fe}}),showBreakdown:!1})]})]})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"bg-white p-4 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl shadow-lg border border-cream-100 min-h-[600px] lg:min-h-[700px] flex flex-col",children:h?e.jsx(ba,{mode:"wait",children:e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[e.jsxs("div",{className:"mb-6 sm:mb-8 border-b border-cream-100 pb-4 sm:pb-6 relative",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx(nn,{onClick:()=>{n(u&&m&&d&&l?`/digital-print/${l}/${d}/${m}`:u&&d&&l?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:u&&m&&d&&l?`/digital-print/${l}/${d}/${m}`:u&&d&&l?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:l?`/digital-print/${l}`:"/digital-print",label:u&&d?"Back to Subcategory":u&&l||d?"Back to Category":"Back to Categories",className:"text-sm text-cream-600 hover:text-cream-900 mb-2"})}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"font-serif text-xl sm:text-2xl md:text-3xl font-bold text-cream-900 mb-2",children:h.name}),e.jsxs("button",{onClick:()=>cs(!It),className:"mt-2 mb-4 px-4 py-2 bg-cream-100 hover:bg-cream-200 text-cream-900 rounded-lg border border-cream-300 text-sm font-medium transition-all flex items-center gap-2",children:[e.jsx(_r,{size:16}),"Instructions"]}),e.jsx(ba,{children:It&&e.jsx(st.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4 mb-6 p-4 sm:p-6 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-bold text-yellow-900 mb-3 flex items-center gap-2",children:[e.jsx(_r,{size:16}),"Important Instructions - Please Read Carefully"]}),h.instructions&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border-2 border-red-300 rounded-lg",children:[e.jsxs("p",{className:"text-xs font-bold text-red-900 mb-2 flex items-center gap-2",children:[e.jsx(ss,{size:14,className:"text-red-600"}),"CRITICAL: Company Not Responsible If Instructions Not Followed"]}),e.jsx("div",{className:"text-xs sm:text-sm text-red-800 whitespace-pre-line",children:h.instructions})]}),e.jsxs("div",{className:"space-y-3 text-xs sm:text-sm text-yellow-800",children:[(h.maxFileSizeMB||h.minFileWidth||h.maxFileWidth||h.minFileHeight||h.maxFileHeight||h.blockCDRandJPG)&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-900 mb-2",children:"File Upload Requirements:"}),e.jsxs("div",{className:"space-y-1 ml-4",children:[h.maxFileSizeMB&&e.jsxs("p",{children:[" Maximum file size: ",e.jsxs("strong",{children:[h.maxFileSizeMB," MB"]})]}),(h.minFileWidth||h.maxFileWidth||h.minFileHeight||h.maxFileHeight)&&e.jsxs("div",{children:[e.jsx("p",{children:" File dimensions:"}),e.jsxs("div",{className:"ml-4 space-y-1",children:[(h.minFileWidth||h.maxFileWidth)&&e.jsxs("p",{children:["- Width: ",e.jsx("strong",{children:h.minFileWidth&&h.maxFileWidth?`${h.minFileWidth} - ${h.maxFileWidth} pixels`:h.minFileWidth?`Minimum ${h.minFileWidth} pixels`:h.maxFileWidth?`Maximum ${h.maxFileWidth} pixels`:"Any"})]}),(h.minFileHeight||h.maxFileHeight)&&e.jsxs("p",{children:["- Height: ",e.jsx("strong",{children:h.minFileHeight&&h.maxFileHeight?`${h.minFileHeight} - ${h.maxFileHeight} pixels`:h.minFileHeight?`Minimum ${h.minFileHeight} pixels`:h.maxFileHeight?`Maximum ${h.maxFileHeight} pixels`:"Any"})]})]})]}),h.blockCDRandJPG&&e.jsxs("p",{children:[" ",e.jsx("strong",{children:"CDR and JPG files are not accepted"})," for this product"]})]})]}),(h.additionalDesignCharge||h.gstPercentage)&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-900 mb-2",children:"Additional Charges:"}),e.jsxs("div",{className:"space-y-1 ml-4",children:[h.additionalDesignCharge&&h.additionalDesignCharge>0&&e.jsxs("p",{children:[" Additional Design Charge: ",e.jsx("strong",{children:jn(h.additionalDesignCharge,"INR")})," (applied if design help is needed)"]}),h.gstPercentage&&h.gstPercentage>0&&e.jsxs("p",{children:[" GST: ",e.jsxs("strong",{children:[h.gstPercentage,"%"]})," (applied on subtotal + design charge)"]})]})]}),!h.instructions&&!h.maxFileSizeMB&&!h.minFileWidth&&!h.maxFileWidth&&!h.minFileHeight&&!h.maxFileHeight&&!h.blockCDRandJPG&&!h.additionalDesignCharge&&!h.gstPercentage&&e.jsx("p",{className:"text-yellow-700 italic",children:"No special instructions for this product."})]})]})})}),e.jsx("div",{className:"text-sm sm:text-base text-cream-600 space-y-2",children:(()=>{if(h.description&&/<[a-z][\s\S]*>/i.test(h.description))return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                                        .product-description-html {
                                          color: #92400e;
                                          line-height: 1.6;
                                          white-space: normal;
                                        }
                                        .product-description-html b,
                                        .product-description-html strong {
                                          font-weight: 600;
                                          color: #7c2d12;
                                          display: inline;
                                        }
                                        .product-description-html > b:first-child,
                                        .product-description-html > strong:first-child {
                                          display: block;
                                          font-size: 1.1em;
                                          margin-bottom: 0.75rem;
                                          color: #7c2d12;
                                        }
                                        .product-description-html p,
                                        .product-description-html div {
                                          margin-bottom: 0.5rem;
                                          line-height: 1.6;
                                          color: #92400e;
                                          white-space: normal;
                                          word-wrap: break-word;
                                          overflow-wrap: break-word;
                                        }
                                        .product-description-html div:not(:first-child) {
                                          padding-left: 0;
                                        }
                                        .product-description-html ul,
                                        .product-description-html ol {
                                          margin-left: 1.5rem;
                                          margin-bottom: 0.5rem;
                                        }
                                        .product-description-html li {
                                          margin-bottom: 0.25rem;
                                        }
                                      `}),e.jsx("div",{className:"product-description-html text-cream-600",dangerouslySetInnerHTML:{__html:h.description}})]});if(h.descriptionArray&&Array.isArray(h.descriptionArray)&&h.descriptionArray.length>0){const he=Ce=>Ce.split(/(\*\*.*?\*\*)/g).map((Fe,nt)=>{if(Fe.startsWith("**")&&Fe.endsWith("**")){const ke=Fe.slice(2,-2);return e.jsx("strong",{className:"font-bold text-cream-800",children:ke},nt)}return e.jsx("span",{children:Fe},nt)});return[...h.descriptionArray].reverse().map((Ce,Ne)=>{if(Ce.includes(":"))return e.jsx("div",{className:"mt-3 first:mt-0",children:e.jsx("p",{className:"font-semibold text-cream-700 mb-1.5",children:he(Ce)})},Ne);if(Ce.startsWith("")||Ce.startsWith("->")||Ce.startsWith("")){const Fe=Ce.replace(/^[\-]+\s*/,"").trim();return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:he(Fe)})]},Ne)}else return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:he(Ce)})]},Ne)})}else if(h.description){const he=h.description.split(`
`).map(Ce=>Ce.trim()).filter(Ce=>Ce.length>0),ze=Ce=>Ce.split(/(\*\*.*?\*\*)/g).map((Fe,nt)=>{if(Fe.startsWith("**")&&Fe.endsWith("**")){const ke=Fe.slice(2,-2);return e.jsx("strong",{className:"font-bold text-cream-800",children:ke},nt)}return e.jsx("span",{children:Fe},nt)});return he.map((Ce,Ne)=>{if(Ce.includes(":"))return e.jsx("div",{className:"mt-3 first:mt-0",children:e.jsx("p",{className:"font-semibold text-cream-700 mb-1.5",children:ze(Ce)})},Ne);if(Ce.startsWith("")||Ce.startsWith("->")||Ce.startsWith("")){const Fe=Ce.replace(/^[\-]+\s*/,"").trim();return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:ze(Fe)})]},Ne)}else return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:ze(Ce)})]},Ne)})}else return e.jsx("p",{className:"text-cream-500 italic",children:"No description available"})})()})]})})]}),(()=>{var nt,ke,Ge;let he=1;const ze=h.options&&h.options.length>0,Ce=((nt=h.filters)==null?void 0:nt.printingOption)&&h.filters.printingOption.length>0,Ne=((ke=h.filters)==null?void 0:ke.textureType)&&h.filters.textureType.length>0,Fe=((Ge=h.filters)==null?void 0:Ge.deliverySpeed)&&h.filters.deliverySpeed.length>0;return e.jsxs(e.Fragment,{children:[ze&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[he++,". Product Options"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:h.options.map((Le,Ue)=>{const Re=me.includes(Le.name);return e.jsxs("button",{type:"button",onClick:()=>{fe(Re?me.filter(vt=>vt!==Le.name):[...me,Le.name])},className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${Re?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[Re&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Va,{size:18,className:"text-cream-900"})}),e.jsx("div",{className:"font-bold text-sm mb-1",children:Le.name}),Le.description&&e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:Le.description}),Le.priceAdd!==void 0&&Le.priceAdd!==0&&e.jsxs("p",{className:"text-xs text-cream-700 mt-1 font-medium",children:[Le.priceAdd>0?"+":"",jn(typeof Le.priceAdd=="number"?Le.priceAdd:parseFloat(Le.priceAdd),"INR")," per 1000 units"]}),Le.image&&e.jsx("img",{src:Le.image,alt:Le.name,className:"w-full h-24 object-cover rounded-lg mt-2"})]},Ue)})})]}),Ce&&h.filters.printingOption.length>1&&e.jsxs("div",{className:"mb-6 sm:mb-8","data-section":"printingOption",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[he++,". Printing Option"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:h.filters.printingOption.map(Le=>{var vt,$e;const Ue=((vt=h.filters)==null?void 0:vt.filterPricesEnabled)||!1;let Re=null;if(Ue&&(($e=h.filters)!=null&&$e.printingOptionPrices)){const ut=h.filters.printingOptionPrices.find(Gt=>Gt.name===Le);ut&&ut.priceAdd!==void 0&&ut.priceAdd!==0&&(Re=ut.priceAdd)}return e.jsxs("button",{"data-field":"printingOption",onClick:()=>Z(Le),className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${ne===Le?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[ne===Le&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Va,{size:18,className:"text-cream-900"})}),e.jsx("div",{className:"font-bold text-sm",children:Le}),Re!==null&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1",children:[Re>0?"+":"",jn(Math.abs(Re),"INR")," per 1000 units"]})]},Le)})})]}),Ne&&h.filters.textureType.length>1&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[he++,". Texture Type"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:h.filters.textureType.map(Le=>{var vt,$e;const Ue=((vt=h.filters)==null?void 0:vt.filterPricesEnabled)||!1;let Re=null;if(Ue&&(($e=h.filters)!=null&&$e.textureTypePrices)){const ut=h.filters.textureTypePrices.find(Gt=>Gt.name===Le);ut&&ut.priceAdd!==void 0&&ut.priceAdd!==0&&(Re=ut.priceAdd)}return e.jsxs("button",{onClick:()=>J(Le),className:`p-3 rounded-xl border text-xs sm:text-sm font-medium transition-all duration-200 relative ${O===Le?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[O===Le&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx(Va,{size:16,className:"text-cream-900"})}),e.jsx("div",{children:Le}),Re!==null&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1",children:[Re>0?"+":"",jn(Math.abs(Re),"INR"),"/1k"]})]},Le)})})]}),Fe&&h.filters.deliverySpeed.length>1&&e.jsxs("div",{className:"mb-6 sm:mb-8","data-section":"deliverySpeed",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[he++,". Delivery Speed"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:h.filters.deliverySpeed.map(Le=>{var vt,$e;const Ue=((vt=h.filters)==null?void 0:vt.filterPricesEnabled)||!1;let Re=null;if(Ue&&(($e=h.filters)!=null&&$e.deliverySpeedPrices)){const ut=h.filters.deliverySpeedPrices.find(Gt=>Gt.name===Le);ut&&ut.priceAdd!==void 0&&ut.priceAdd!==0&&(Re=ut.priceAdd)}return e.jsxs("button",{"data-field":"deliverySpeed",onClick:()=>ve(Le),className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${ue===Le?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[ue===Le&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Va,{size:18,className:"text-cream-900"})}),e.jsx("div",{className:"font-bold text-sm",children:Le}),Re!==null&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1",children:[Re>0?"+":"",jn(Math.abs(Re),"INR")," per 1000 units"]})]},Le)})})]}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[he++,". Select Quantity"]}),e.jsx("div",{className:"mb-3",children:e.jsx(Ix,{options:ya(h).map(Le=>({value:Le,label:Le.toLocaleString()})),value:z,onValueChange:Le=>ye(Number(Le)),placeholder:"Select quantity",className:"w-full"})}),(()=>{let Le=null,Ue="";if(re&&R.length>0){for(const $e of R)if(!(!$e.isVisible||!xe[$e._id])){if($e.isStepQuantity&&$e.stepQuantities&&$e.stepQuantities.length>0){Le={type:"STEP_WISE",stepQuantities:$e.stepQuantities},Ue=$e.attributeName;break}if($e.isRangeQuantity&&$e.rangeQuantities&&$e.rangeQuantities.length>0){Le={type:"RANGE_WISE",rangeQuantities:$e.rangeQuantities},Ue=$e.attributeName;break}}}if(!Le&&h&&h.dynamicAttributes)for(const $e of h.dynamicAttributes){if(!$e.isEnabled)continue;const ut=typeof $e.attributeType=="object"?$e.attributeType:null;if(!(!ut||!xe[ut._id])){if(ut.isStepQuantity&&ut.stepQuantities&&ut.stepQuantities.length>0){Le={type:"STEP_WISE",stepQuantities:ut.stepQuantities},Ue=ut.attributeName;break}if(ut.isRangeQuantity&&ut.rangeQuantities&&ut.rangeQuantities.length>0){Le={type:"RANGE_WISE",rangeQuantities:ut.rangeQuantities},Ue=ut.attributeName;break}}}if(Le){if(Le.type==="STEP_WISE"){const $e=Le.stepQuantities.map(ut=>{const Gt=parseFloat(typeof ut=="object"?ut.quantity:ut);return isNaN(Gt)?0:Gt}).filter(ut=>ut>0).sort((ut,Gt)=>ut-Gt);return e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2",children:[e.jsxs("span",{className:"font-medium",children:[Ue,":"]})," Available quantities: ",$e.map(ut=>ut.toLocaleString()).join(", ")]})}else if(Le.type==="RANGE_WISE")return e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2 space-y-1",children:[e.jsxs("div",{className:"font-medium mb-1",children:[Ue,":"]}),Le.rangeQuantities.map(($e,ut)=>{const Gt=typeof $e=="object"?parseFloat($e.min):0,Cs=typeof $e=="object"&&$e.max?parseFloat($e.max):null,is=typeof $e=="object"?parseFloat($e.price):0;return e.jsxs("div",{children:[$e.label||`${Gt.toLocaleString()}${Cs?` - ${Cs.toLocaleString()}`:"+"} units`,is>0&&e.jsxs("span",{className:"ml-2 text-green-600",children:["(",jn(is,"INR"),")"]})]},ut)})]})}const Re=h.filters.orderQuantity,vt=Re.quantityType||"SIMPLE";return vt==="STEP_WISE"&&Re.stepWiseQuantities&&Re.stepWiseQuantities.length>0?e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2",children:["Available quantities: ",Re.stepWiseQuantities.sort(($e,ut)=>$e-ut).map($e=>$e.toLocaleString()).join(", ")]}):vt==="RANGE_WISE"&&Re.rangeWiseQuantities&&Re.rangeWiseQuantities.length>0?e.jsx("div",{className:"text-xs sm:text-sm text-cream-600 mb-2 space-y-1",children:Re.rangeWiseQuantities.map(($e,ut)=>e.jsxs("div",{children:[$e.label||`${$e.min.toLocaleString()}${$e.max?` - ${$e.max.toLocaleString()}`:"+"} units`,$e.priceMultiplier!==1&&e.jsxs("span",{className:"ml-2 text-green-600",children:["(",$e.priceMultiplier>1?"+":"",(($e.priceMultiplier-1)*100).toFixed(0),"% price)"]})]},ut))}):e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2",children:["Min: ",Re.min.toLocaleString(),", Max: ",Re.max.toLocaleString(),", Multiples of: ",Re.multiples.toLocaleString()]})})(),ha!==null&&ha>0&&e.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-xs sm:text-sm text-green-800 font-medium",children:[" You're saving ",ha,"% on this order! (Bulk discount applied)"]})}),h.quantityDiscounts&&h.quantityDiscounts.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 mb-2",children:"Available Quantity Discounts:"}),e.jsx("div",{className:"space-y-1",children:h.quantityDiscounts.map((Le,Ue)=>{const Re=Le.minQuantity||0,vt=Le.maxQuantity,$e=Le.discountPercentage||0,ut=vt?`${Re.toLocaleString()} - ${vt.toLocaleString()} units`:`${Re.toLocaleString()}+ units`;return e.jsxs("p",{className:"text-xs text-blue-800",children:[" ",ut,": ",e.jsxs("strong",{children:[$e,"% off"]})]},Ue)})})]})]}),(()=>{let Le=[];return re&&R.length>0?Le=Hj({attributes:R,rules:k,selectedValues:{...xe}}).attributes.filter(Re=>Re.isVisible).sort((Re,vt)=>(Re.displayOrder||0)-(vt.displayOrder||0)):h.dynamicAttributes&&(Le=h.dynamicAttributes.filter(Ue=>Ue.isEnabled).sort((Ue,Re)=>(Ue.displayOrder||0)-(Re.displayOrder||0))),Le.length>0?e.jsx(e.Fragment,{children:Le.map(Ue=>{var Je;let Re=null,vt=[],$e="",ut=!1;if(re&&R.length>0)$e=Ue._id,ut=Ue.isRequired||!1,Ue.displayOrder,vt=Ue.allowedValues&&Ue.allowedValues.length>0?(Ue.attributeValues||[]).filter(et=>Ue.allowedValues.includes(et.value)):Ue.attributeValues||[],Re={_id:Ue._id,attributeName:Ue.attributeName,inputStyle:Ue.inputStyle,attributeValues:vt,defaultValue:Ue.defaultValue};else{if(typeof Ue.attributeType=="object"&&Ue.attributeType!==null)Re=Ue.attributeType,$e=Re._id;else if(typeof Ue.attributeType=="string"&&Ue.attributeType.trim()!=="")return null;if(!Re||!Re._id)return null;$e=Re._id,ut=Ue.isRequired||!1,Ue.displayOrder,vt=Ue.customValues&&Ue.customValues.length>0?Ue.customValues:Re.attributeValues||[]}if(["DROPDOWN","RADIO","POPUP"].includes(Re.inputStyle)&&vt.length<1)return e.jsxs("div",{className:"mb-6 sm:mb-8 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[he++,". ",Re.attributeName,ut&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("p",{className:"text-sm text-yellow-800",children:"This attribute is not available because it requires at least 2 options. Please contact support."})]},$e);const Cs=xe[$e],is=vt.find(et=>et.value===Cs),qs=(is==null?void 0:is.hasSubAttributes)===!0,As=`${$e}:${Cs||""}`,Ie=qs&&Cs?H[As]||[]:[];return e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[he++,". ",Re.attributeName,ut&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(Re.inputStyle==="DROPDOWN"||Re.inputStyle==="POPUP")&&e.jsx("div",{"data-attribute":$e,"data-attribute-name":Re.attributeName,children:vt.length===0?e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No options available for this attribute. Please contact support."})}):e.jsxs(e.Fragment,{children:[e.jsx(Ix,{options:vt.filter(et=>et&&et.value&&et.label).map(et=>{let it="";if(et.description){const Bt=et.description.match(/Price Impact: ([\d.]+)/);if(Bt){const We=parseFloat(Bt[1])||0;We>0&&(it=` (+${We.toFixed(2)}/unit)`)}}if(!it&&et.priceMultiplier&&et.priceMultiplier!==1&&h){const We=(h.basePrice||0)*(et.priceMultiplier-1);Math.abs(We)>=.01&&(it=` (+${We.toFixed(2)}/unit)`)}return{value:et.value,label:`${et.label}${it}`}}),value:xe[$e]||"",onValueChange:et=>{I({...xe,[$e]:et}),_(it=>new Set(it).add($e))},placeholder:`Select ${Re.attributeName}`,className:"w-full"}),Ie.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-xs font-semibold text-cream-700 mb-2",children:["Select ",(is==null?void 0:is.label)||Re.attributeName," Option:"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Ie.map(et=>{const it=()=>!et.priceAdd||et.priceAdd===0?null:`+${et.priceAdd.toFixed(2)}/piece`,Bt=`${$e}__${Cs}`,We=xe[Bt]===et.value;return e.jsxs("button",{type:"button",onClick:()=>{I(Pe=>({...Pe,[Bt]:et.value}))},className:`p-3 rounded-lg border text-left transition-all ${We?"border-cream-900 bg-cream-50 ring-1 ring-cream-900":"border-cream-200 hover:border-cream-400"}`,children:[et.image&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:et.image,alt:et.label,className:"w-full h-24 object-cover rounded"})}),e.jsx("div",{className:"text-sm font-medium",children:et.label}),it()&&e.jsx("div",{className:"text-xs text-cream-600 mt-1",children:it()})]},et._id)})})]}),(()=>{const et=xe[$e];if(!et)return null;const it=vt.find(Mt=>Mt.value===et);if(!it||!it.description)return null;const Bt=it.description.match(/Images Required: (\d+)/),We=Bt?parseInt(Bt[1]):0;if(We<=0)return null;const Pe=`${$e}_images`,_e=Array.isArray(xe[Pe])?xe[Pe]:[];return e.jsxs("div",{className:"mt-4 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsxs("label",{className:"block text-sm font-semibold text-cream-900 mb-3",children:["Upload Images for ",it.label," (",We," required) *"]}),e.jsx("div",{className:"space-y-3",children:Array.from({length:We}).map((Mt,Nt)=>{const ts=_e[Nt]||null;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*","data-image-index":Nt,"data-attr-id":$e,onChange:ms=>{var Wt;const jt=((Wt=ms.target.files)==null?void 0:Wt[0])||null;if(jt){const gt=[..._e];for(;gt.length<=Nt;)gt.push(null);gt[Nt]=jt,I({...xe,[Pe]:gt})}},className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg text-sm"}),ts&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-cream-600 max-w-[150px] truncate",children:ts.name}),e.jsx("button",{type:"button",onClick:()=>{const ms=[..._e];ms[Nt]=null,I({...xe,[Pe]:ms});const jt=document.querySelector(`input[type="file"][data-image-index="${Nt}"][data-attr-id="${$e}"]`);jt&&(jt.value="")},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove image",children:e.jsx(ss,{size:16})})]})]},Nt)})}),_e.length<We&&e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Please upload ",We-_e.length," more image(s)"]})]})})()]})}),Re.inputStyle==="RADIO"&&e.jsx("div",{"data-attribute":$e,children:vt.length===0?e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No options available for this attribute. Please contact support."})}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>{const et=vt.filter(it=>it&&it.value&&it.label);lr({attributeId:$e,attributeName:Re.attributeName,attributeValues:et,selectedValue:xe[$e]||null,isRequired:ut}),Sr(!0)},className:"w-full px-4 py-3 border-2 border-dashed border-cream-300 rounded-xl hover:border-cream-400 hover:bg-cream-50 transition-all duration-200 text-left flex items-center justify-between group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-cream-700 group-hover:text-cream-900",children:xe[$e]?((Je=vt.find(et=>et.value===xe[$e]))==null?void 0:Je.label)||"Select option":`Select ${Re.attributeName}${ut?" *":""}`}),xe[$e]&&e.jsx("div",{className:"text-xs text-cream-500 mt-1",children:"Click to change selection"})]}),e.jsx($r,{size:18,className:"text-cream-400 group-hover:text-cream-600 transition-colors"})]}),(()=>{const et=xe[$e];if(!et)return null;const it=vt.find(Mt=>Mt.value===et);if(!it||!it.description)return null;const Bt=it.description.match(/Images Required: (\d+)/),We=Bt?parseInt(Bt[1]):0;if(We<=0)return null;const Pe=`${$e}_images`,_e=Array.isArray(xe[Pe])?xe[Pe]:[];return e.jsxs("div",{className:"mt-4 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsxs("label",{className:"block text-sm font-semibold text-cream-900 mb-3",children:["Upload Images for ",it.label," (",We," required) *"]}),e.jsx("div",{className:"space-y-3",children:Array.from({length:We}).map((Mt,Nt)=>{const ts=_e[Nt]||null;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*","data-image-index":Nt,"data-attr-id":$e,onChange:ms=>{var Wt;const jt=((Wt=ms.target.files)==null?void 0:Wt[0])||null;if(jt){const gt=[..._e];for(;gt.length<=Nt;)gt.push(null);gt[Nt]=jt,I({...xe,[Pe]:gt})}},className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg text-sm"}),ts&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-cream-600 max-w-[150px] truncate",children:ts.name}),e.jsx("button",{type:"button",onClick:()=>{const ms=[..._e];ms[Nt]=null,I({...xe,[Pe]:ms});const jt=document.querySelector(`input[type="file"][data-image-index="${Nt}"][data-attr-id="${$e}"]`);jt&&(jt.value="")},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove image",children:e.jsx(ss,{size:16})})]})]},Nt)})}),_e.length<We&&e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Please upload ",We-_e.length," more image(s)"]})]})})()]})}),Re.inputStyle==="CHECKBOX"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3","data-attribute":$e,children:vt.length===0?e.jsx("div",{className:"col-span-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No options available for this attribute. Please contact support."})}):vt.filter(et=>et&&et.value&&et.label).map(et=>{const it=()=>{if(et.description){const _e=et.description.match(/Price Impact: ([\d.]+)/);if(_e){const Mt=parseFloat(_e[1])||0;if(Mt>0)return`+${Mt.toFixed(2)}/unit`}}if(!et.priceMultiplier||et.priceMultiplier===1||!h)return null;const Pe=(h.basePrice||0)*(et.priceMultiplier-1);return Math.abs(Pe)<.01?null:`+${Pe.toFixed(2)}/unit`},Bt=Array.isArray(xe[$e])&&xe[$e].includes(et.value);return e.jsxs("button",{type:"button",onClick:()=>{const We=Array.isArray(xe[$e])?xe[$e]:[],Pe=Bt?We.filter(_e=>_e!==et.value):[...We,et.value];I({...xe,[$e]:Pe}),_(_e=>new Set(_e).add($e))},className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${Bt?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[Bt&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Va,{size:18,className:"text-cream-900"})}),et.image&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:et.image,alt:et.label,className:"w-full h-32 object-cover rounded-lg border border-cream-200"})}),e.jsx("div",{className:"font-bold text-sm",children:et.label}),it()&&e.jsx("div",{className:"text-xs text-cream-600 mt-1",children:it()})]},et.value)})}),Re.inputStyle==="TEXT_FIELD"&&e.jsx("div",{"data-attribute":$e,children:e.jsx("input",{type:"text",value:xe[$e]||"",onChange:et=>{I({...xe,[$e]:et.target.value}),_(it=>new Set(it).add($e))},placeholder:`Enter ${Re.attributeName}`,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})}),Re.inputStyle==="NUMBER"&&e.jsx("div",{"data-attribute":$e,children:e.jsx("input",{type:"number",value:xe[$e]||"",onChange:et=>{I({...xe,[$e]:parseFloat(et.target.value)||0}),_(it=>new Set(it).add($e))},placeholder:`Enter ${Re.attributeName}`,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})}),Re.inputStyle==="FILE_UPLOAD"&&e.jsxs("div",{"data-attribute":$e,children:[e.jsx("input",{type:"file",onChange:et=>{var Bt;const it=((Bt=et.target.files)==null?void 0:Bt[0])||null;I({...xe,[$e]:it}),it&&_(We=>new Set(We).add($e))},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",accept:"*/*"}),Re.fileRequirements&&e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:Re.fileRequirements})]})]},$e)})}):null})()]})})(),e.jsxs("div",{className:"mb-6 sm:mb-8 bg-cream-50 p-4 sm:p-6 rounded-xl border border-cream-200","data-upload-section":!0,children:[e.jsxs("h3",{className:"font-bold text-sm sm:text-base text-cream-900 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(oc,{size:16,className:"sm:w-[18px] sm:h-[18px]"})," Upload Your Design"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-cream-700 mb-2",children:"Upload Reference Image *"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:he=>or(he,"front"),className:"hidden","data-required-field":!0}),e.jsx("div",{className:"border-2 border-dashed border-cream-300 rounded-lg p-4 text-center hover:border-cream-900 transition-colors",children:ps?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ps,alt:"Reference image preview",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:he=>{he.preventDefault(),ge(null),ys("")},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(ss,{size:14})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ny,{size:24,className:"text-cream-600"}),e.jsx("span",{className:"text-sm text-cream-600",children:"Click to upload reference image"})]})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-cream-700 mb-2",children:"Back Design (Optional)"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:he=>or(he,"back"),className:"hidden"}),e.jsx("div",{className:"border-2 border-dashed border-cream-300 rounded-lg p-4 text-center hover:border-cream-900 transition-colors",children:at?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:at,alt:"Back design preview",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:he=>{he.preventDefault(),_t(null),Yt("")},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(ss,{size:14})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ny,{size:24,className:"text-cream-600"}),e.jsx("span",{className:"text-sm text-cream-600",children:"Click to upload back design"})]})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-cream-700 mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:Ms,onChange:he=>rs(he.target.value),placeholder:"Any special instructions or notes...",className:"w-full p-3 rounded-lg border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm resize-none",rows:3})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-100",children:[e.jsx("button",{onClick:cn,disabled:Os,className:`w-full py-4 sm:py-5 md:py-6 rounded-xl font-bold text-lg sm:text-xl md:text-2xl transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 flex items-center justify-center gap-3 min-h-[60px] sm:min-h-[70px] ${Os?"bg-cream-400 text-cream-700 cursor-not-allowed opacity-60":"bg-cream-900 text-cream-50 hover:bg-cream-800 active:bg-cream-700 cursor-pointer opacity-100"}`,children:Os?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:24}),e.jsx("span",{children:"Processing Payment..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Va,{size:24}),e.jsx("span",{children:"Place Order"})]})}),e.jsxs("div",{className:"mt-4 text-center text-xs text-cream-500 flex items-center justify-center gap-2",children:[e.jsx(Vn,{size:14})," Secure Payment & Data Protection"]})]})]},h._id||h.id)}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 sm:mb-8 border-b border-cream-100 pb-4 sm:pb-6",children:[e.jsx("h1",{className:"font-serif text-xl sm:text-2xl md:text-3xl font-bold text-cream-900 mb-2",children:(v==null?void 0:v.name)||"Products"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600",children:E.length>0?"Select a subcategory to view products.":"Select a product to customize and place your order."})]}),E.length>0?e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:E.map(he=>{const ze=he._id,Ce=he.image||"/Glossy.png";return e.jsx(Ps,{to:l&&d?`/digital-print/${l}/${d}/${ze}`:l?`/digital-print/${l}/${ze}`:`/digital-print/${ze}`,className:"block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsx("div",{className:"w-full p-4 sm:p-5 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"shrink-0 w-20 sm:w-24 h-20 sm:h-24 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:Ce,alt:he.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:he.name}),e.jsx($r,{size:18,className:"text-cream-400 group-hover:text-cream-600 group-hover:translate-x-1 transition-all shrink-0"})]}),he.description&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm mb-2 leading-relaxed",children:e.jsx("p",{className:"line-clamp-2",children:he.description})}),e.jsx("div",{className:"mt-auto flex items-center text-cream-500 text-xs sm:text-sm font-medium",children:e.jsx("span",{children:"View Products"})})]})]})})},he._id)})}):e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:p.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:"No products available"})}):p.map(he=>{const ze=he.descriptionArray&&he.descriptionArray.length>0?he.descriptionArray:he.description?he.description.split(`
`).filter(Ge=>Ge.trim()):[],Ce=[];for(const Ge of ze){const Le=Ge.replace(/<[^>]*>/g,"").trim();if(Le&&!Le.includes(":")&&Le.length>10&&(Ce.push(Le),Ce.length>=3))break}if(Ce.length===0&&ze.length>0)for(let Ge=0;Ge<Math.min(3,ze.length);Ge++){const Le=ze[Ge].replace(/<[^>]*>/g,"").trim();Le&&Ce.push(Le)}const Ne=Ce.slice(0,3).join("  ")||"",Fe=he.basePrice||0,nt=Fe<1?(Fe*1e3).toFixed(2):Fe.toFixed(2),ke=Fe<1?"per 1000 units":"";return e.jsxs("button",{"data-product-select":!0,onClick:()=>vs(he),className:"w-full p-3 sm:p-4 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 group",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:he.name}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:jn(parseFloat(nt),"INR")}),ke&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:ke})]})]}),Ne&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm mb-2 leading-relaxed",children:e.jsx("p",{className:"line-clamp-3",children:Ne})}),e.jsxs("div",{className:"mt-2 flex items-center text-cream-500 text-xs sm:text-sm font-medium",children:[e.jsx("span",{children:"View Details & Customize"}),e.jsx($r,{size:14,className:"ml-2 group-hover:translate-x-1 transition-transform"})]})]},he._id||he.id)})})]})})})]})})]}),e.jsx(YT,{isOpen:la,onClose:()=>ns(!1),onConfirm:to,productId:(h==null?void 0:h._id)||"",productName:(h==null?void 0:h.name)||"",quantity:z,selectedDynamicAttributes:Object.entries(xe).filter(([he,ze])=>ze!=null&&ze!=="").map(([he,ze])=>{const Ce=R.find(nt=>nt._id===he),Ne=(Ce==null?void 0:Ce.attributeName)||he;let Fe=ze;if(Ce!=null&&Ce.attributeValues){const nt=Ce.attributeValues.find(ke=>ke.value===ze);Fe=(nt==null?void 0:nt.label)||ze}return{attributeType:he,value:typeof ze=="object"&&!Array.isArray(ze)&&!(ze instanceof File)?JSON.stringify(ze):ze,name:Ne,label:Fe}}),customerName:ot,setCustomerName:Ve,customerEmail:Ct,setCustomerEmail:ds,pincode:At,setPincode:as,address:hs,setAddress:Vt,mobileNumber:Bs,setMobileNumber:Ss,estimatedDeliveryDate:Me,deliveryLocationSource:le,onGetLocation:da,isGettingLocation:Ga,gstPercentage:(h==null?void 0:h.gstPercentage)||18}),e.jsx(ba,{children:Lt&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",onClick:()=>Ut(!1),children:e.jsxs(st.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center p-4",onClick:he=>he.stopPropagation(),children:[e.jsx("div",{style:{maxWidth:"90%",maxHeight:"90%",width:"auto",height:"auto",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("img",{src:(v==null?void 0:v.image)||"/Glossy.png",alt:(v==null?void 0:v.name)||"Product Preview",className:"w-full h-full object-contain",style:{maxWidth:"100%",maxHeight:"90vh",width:"auto",height:"auto"}})}),e.jsx("button",{onClick:()=>Ut(!1),className:"absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white rounded-full p-2 backdrop-blur-sm transition-colors z-50","aria-label":"Close image",children:e.jsx(ss,{size:24})})]})})}),e.jsx(ba,{children:yr&&ta&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>Sr(!1),children:e.jsxs(st.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:he=>he.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-4 border-b border-cream-200 bg-linear-to-r from-cream-50 to-cream-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Select ",ta.attributeName]}),ta.isRequired&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Required field"})]}),e.jsx("button",{onClick:()=>Sr(!1),className:"p-2 hover:bg-cream-200 rounded-full transition-colors","aria-label":"Close modal",children:e.jsx(ss,{size:20,className:"text-cream-700"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 justify-items-center",children:ta.attributeValues.map(he=>{const ze=()=>{if(he.description){const Ge=he.description.match(/Price Impact: ([\d.]+)/);if(Ge){const Le=parseFloat(Ge[1])||0;if(Le>0)return`+${Le.toFixed(2)}/unit`}}if(!he.priceMultiplier||he.priceMultiplier===1||!h)return null;const ke=(h.basePrice||0)*(he.priceMultiplier-1);return Math.abs(ke)<.01?null:`+${ke.toFixed(2)}/unit`},Ce=ta.selectedValue===he.value,Ne=`${ta.attributeId}:${he.value}`,Fe=H[Ne]||[];return e.jsxs(st.button,{type:"button",onClick:()=>{const nt={...xe,[ta.attributeId]:he.value};if(I(nt),_(ke=>new Set(ke).add(ta.attributeId)),Fe.length>0){const ke=`${ta.attributeId}__${he.value}`,Ge=nt[ke]||null;Ts({attributeId:ta.attributeId,parentValue:he.value,parentLabel:he.label,subAttributes:Fe,selectedValue:Ge}),Ys(!0)}Sr(!1)},whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative p-2 rounded-lg border-2 text-left transition-all duration-200 flex flex-col w-[140px] h-[140px] overflow-hidden ${Ce?"border-cream-900 bg-cream-50 text-cream-900 ring-2 ring-cream-900 ring-offset-1":"border-cream-200 text-cream-700 hover:border-cream-400 hover:bg-cream-50 hover:shadow-md"}`,children:[Ce&&e.jsx(st.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-1.5 right-1.5 bg-cream-900 text-white rounded-full p-1 shadow-lg z-10",children:e.jsx(Va,{size:12})}),he.image&&e.jsx("div",{className:"mb-1.5 overflow-hidden rounded border border-cream-200 bg-cream-50 shrink-0",children:e.jsx("img",{src:he.image,alt:he.label,className:"w-full h-[70px] object-cover transition-transform duration-200 hover:scale-105"})}),e.jsxs("div",{className:"space-y-1 flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"font-semibold text-xs text-cream-900 leading-tight line-clamp-2",children:he.label}),he.description&&e.jsx("p",{className:"text-[10px] text-cream-600 line-clamp-2 leading-tight",children:he.description}),ze()&&e.jsx("div",{className:"mt-auto pt-1 border-t border-cream-200 text-[10px] font-semibold text-cream-700 leading-tight",children:ze()})]})]},he.value)})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-cream-200 bg-cream-50 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-cream-600",children:ta.selectedValue?e.jsxs("span",{children:["Selected: ",e.jsx("span",{className:"font-semibold text-cream-900",children:(wn=ta.attributeValues.find(he=>he.value===ta.selectedValue))==null?void 0:wn.label})]}):e.jsx("span",{children:"Please select an option"})}),e.jsx("button",{onClick:()=>Sr(!1),className:"px-6 py-2 bg-cream-900 text-white rounded-lg font-semibold hover:bg-cream-800 transition-colors",children:ta.selectedValue?"Done":"Cancel"})]})]})})}),e.jsx(ba,{children:on&&es&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>Ys(!1),children:e.jsxs(st.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-hidden flex flex-col",onClick:he=>he.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-4 border-b border-cream-200 bg-linear-to-r from-cream-50 to-cream-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-cream-900",children:["Select ",es.parentLabel," Option"]}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:["Additional options related to ",es.parentLabel]})]}),e.jsx("button",{onClick:()=>Ys(!1),className:"p-2 hover:bg-cream-200 rounded-full transition-colors","aria-label":"Close sub-attribute modal",children:e.jsx(ss,{size:18,className:"text-cream-700"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 justify-items-center",children:es.subAttributes.map(he=>{const ze=()=>!he.priceAdd||he.priceAdd===0?null:`+${he.priceAdd.toFixed(2)}/piece`,Ce=`${es.attributeId}__${es.parentValue}`,Ne=xe[Ce]===he.value;return e.jsxs(st.button,{type:"button",onClick:()=>{I(Fe=>({...Fe,[Ce]:he.value})),Ts({...es,selectedValue:he.value})},whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative p-2 rounded-lg border-2 text-left transition-all duration-200 flex flex-col w-[140px] h-[140px] overflow-hidden ${Ne?"border-cream-900 bg-cream-50 text-cream-900 ring-2 ring-cream-900 ring-offset-1":"border-cream-200 text-cream-700 hover:border-cream-400 hover:bg-cream-50 hover:shadow-md"}`,children:[Ne&&e.jsx(st.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-1.5 right-1.5 bg-cream-900 text-white rounded-full p-1 shadow-lg z-10",children:e.jsx(Va,{size:12})}),he.image&&e.jsx("div",{className:"mb-1.5 overflow-hidden rounded border border-cream-200 bg-cream-50 shrink-0",children:e.jsx("img",{src:he.image,alt:he.label,className:"w-full h-[70px] object-cover transition-transform duration-200 hover:scale-105"})}),e.jsxs("div",{className:"space-y-1 flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"font-semibold text-xs text-cream-900 leading-tight line-clamp-2",children:he.label}),ze()&&e.jsx("div",{className:"mt-auto pt-1 border-t border-cream-200 text-[10px] font-semibold text-cream-700 leading-tight",children:ze()})]})]},he._id)})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-cream-200 bg-cream-50 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-cream-600",children:es.selectedValue?e.jsxs("span",{children:["Selected:"," ",e.jsx("span",{className:"font-semibold text-cream-900",children:(Sn=es.subAttributes.find(he=>he.value===es.selectedValue))==null?void 0:Sn.label})]}):e.jsx("span",{children:"Sub-option is optional"})}),e.jsx("button",{onClick:()=>Ys(!1),className:"px-6 py-2 bg-cream-900 text-white rounded-lg font-semibold hover:bg-cream-800 transition-colors",children:"Done"})]})]})})})]})},ox=()=>{const{categoryId:s,subCategoryId:r,nestedSubCategoryId:n}=rf(),l=Ha(),[d,m]=y.useState(""),[u,p]=y.useState(""),[g,h]=y.useState(""),[j,v]=y.useState([]),[w,E]=y.useState([]),[A,P]=y.useState(null),[q,V]=y.useState(!0),[M,R]=y.useState(null),[ae,H]=y.useState(!1),[D,k]=y.useState(""),[Q,W]=y.useState(null),[te,ie]=y.useState(null);y.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s,r]);const X=async re=>{const ne=await re.clone().text();if(ne.trim().startsWith("<!DOCTYPE")||ne.trim().startsWith("<html"))throw new Error(`Server returned HTML instead of JSON. Status: ${re.status} ${re.statusText}`);try{const Z=JSON.parse(ne);if(!re.ok)throw new Error(Z.error||Z.message||`Request failed: ${re.status} ${re.statusText}`);return Z}catch(Z){throw Z instanceof Error?Z:new Error(ne||`Invalid response from server. Status: ${re.status} ${re.statusText}`)}};y.useEffect(()=>{(async()=>{var B,ne,Z,ue,ve,O,J,z,ye,xe;V(!0),R(null),v([]),E([]),H(!1),ie(null);try{if(s&&!r){if(!/^[0-9a-fA-F]{24}$/.test(s)){R("Invalid category ID format"),V(!1);return}let I=[];const L=`${we}/subcategories/category/${s}`;try{const _=await fetch(L,{method:"GET",headers:{Accept:"application/json"}});if(_.ok){const me=await X(_);if(I=Array.isArray(me)?me:(me==null?void 0:me.data)||[],I&&I.length>0){if(I.sort((fe,Me)=>(fe.sortOrder||0)-(Me.sortOrder||0)),I.length===1){const fe=I[0],Me=fe.slug||fe._id;l(s?`/digital-print/${s}/${Me}`:`/digital-print/${Me}`,{replace:!0}),V(!1);return}v(I);try{const fe=await fetch(`${we}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(!fe.ok)throw new Error(`Failed to fetch category: ${fe.status} ${fe.statusText}`);const Me=await X(fe);m(Me.name||""),p(Me.description||""),h(Me.image||"/Glossy.png")}catch(fe){console.error("Error fetching category info:",fe)}}}else if(_.status===404)console.log("No subcategories found for this category, checking for direct products...");else{const me=await fetch(`${we}/categories/parent/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(me.ok){const fe=await X(me);if(fe&&Array.isArray(fe)&&fe.length>0){if(I=fe,I.sort((Me,se)=>(Me.sortOrder||0)-(se.sortOrder||0)),I.length===1){const Me=I[0],se=Me.slug||Me._id;if(r!==se){console.log(`Only one subcategory found: ${Me.name} (${se}). Auto-navigating...`),l(`/digital-print/${s}/${se}`,{replace:!0});return}}v(I),V(!1);return}}console.log("No subcategories found, will check for direct products...")}}catch(_){console.error("Error fetching subcategories:",_)}try{if(!s||!/^[0-9a-fA-F]{24}$/.test(s)){console.warn("Invalid categoryId format, skipping product fetch:",s),V(!1);return}const _=`${we}/products/category/${s}`,me=await fetch(_,{method:"GET",headers:{Accept:"application/json"}});if(!me.ok){if(me.status===400||me.status===404){let le=me.status===404?"Category not found":"Invalid category ID or category not found";try{const Qe=await me.clone().text();if(Qe&&!Qe.trim().startsWith("<!DOCTYPE")&&!Qe.trim().startsWith("<html"))try{const tt=JSON.parse(Qe);le=tt.error||tt.message||le}catch{Qe.trim().length>0&&Qe.trim().length<200&&(le=Qe.trim())}}catch(Be){console.error("Error reading response:",Be)}console.warn("Failed to fetch products for category:",s,le),E([]),V(!1);return}console.error("Error fetching products:",me.status,me.statusText),E([]),V(!1);return}const fe=await X(me),Me=Array.isArray(fe)?fe.filter(le=>{var tt;const Be=typeof le.category=="object"?(tt=le.category)!=null&&tt._id?String(le.category._id):null:le.category?String(le.category):null,Qe=String(s);if(!Be||Be!==Qe)return!1;if(!le.subcategory||le.subcategory===null||le.subcategory===void 0)return!0;if(typeof le.subcategory=="string"){const ot=le.subcategory.trim();return ot===""||ot==="null"||ot==="undefined"}if(typeof le.subcategory=="object"){if(Object.keys(le.subcategory).length===0)return!0;const Ve=le.subcategory._id;return!Ve||Ve===null||Ve===""||Ve==="null"||Ve===void 0||typeof Ve=="string"&&!/^[0-9a-fA-F]{24}$/.test(Ve)}return!1}):[];console.log("Category ID:",s),console.log("Total products fetched:",Array.isArray(fe)?fe.length:0),console.log("Direct products after filtering:",Me.length),Me.length===0&&Array.isArray(fe)&&fe.length>0&&(console.log("Sample product category:",(B=fe[0])==null?void 0:B.category),console.log("Sample product subcategory:",(ne=fe[0])==null?void 0:ne.subcategory),console.log("Sample product category ID (string):",typeof((Z=fe[0])==null?void 0:Z.category)=="object"?String((ve=(ue=fe[0])==null?void 0:ue.category)==null?void 0:ve._id):String((O=fe[0])==null?void 0:O.category)));const se=I&&I.length>0;if(se&&I.length===1){const Be=I[0]._id;s?l(`/digital-print/${s}/${Be}`,{replace:!0}):l(`/digital-print/${Be}`,{replace:!0}),V(!1);return}if(se?(I.sort((le,Be)=>(le.sortOrder||0)-(Be.sortOrder||0)),v(I)):v([]),Me&&Me.length>0&&!se){if(Me.length===1){const le=Me[0];s?l(`/digital-print/${s}/${le._id}`,{replace:!0}):l(`/digital-print/${le._id}`,{replace:!0}),V(!1);return}E(Me);try{const le=await fetch(`${we}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(!le.ok)throw new Error(`Failed to fetch category: ${le.status} ${le.statusText}`);const Be=await X(le);m(Be.name||""),p(Be.description||""),h(Be.image||"/Glossy.png")}catch(le){console.error("Error fetching category info:",le)}V(!1);return}}catch(_){console.error("Error fetching products:",_);const me=_ instanceof Error?_.message:"Failed to fetch products";!me.includes("Invalid category")&&!me.includes("400")&&!me.includes("Bad Request")?R(me):console.warn("Category may not have products or category ID is invalid:",s),E([])}try{if(s&&/^[0-9a-fA-F]{24}$/.test(s)){const _=await fetch(`${we}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(_.ok){const me=await X(_);m(me.name||""),p(me.description||"")}}}catch(_){console.error("Error fetching category info:",_)}V(!1);return}if(r){E([]),v([]);try{let I=null,L=n||r;if(/^[0-9a-fA-F]{24}$/.test(L||"")){let Be=[];if(s)try{const Qe=`${we}/subcategories/category/${s}`,tt=await fetch(Qe,{method:"GET",headers:{Accept:"application/json"}});if(tt.ok){const ot=await X(tt);Be=Array.isArray(ot)?ot:(ot==null?void 0:ot.data)||[],I=Be.find(Ve=>Ve._id===L||Ve.slug===L)||null}}catch{}if(!I&&L&&/^[0-9a-fA-F]{24}$/.test(L)){const Qe=Be.find(tt=>tt._id===L);if(Qe)I=Qe;else{let tt=!1;try{if((await fetch(`${we}/products/${L}`,{method:"GET",headers:{Accept:"application/json"}})).ok){tt=!0,H(!0),ie(L),V(!1);return}}catch{console.log("subCategoryId is not a product, continuing...")}if(!tt)try{const ot=await fetch(`${we}/subcategories/${L}`,{method:"GET",headers:{Accept:"application/json"}});if(ot.ok)try{I=await X(ot)}catch{}else ot.status}catch{}}}}else{let Be=[];if(s)try{const Qe=`${we}/subcategories/category/${s}`,tt=await fetch(Qe,{method:"GET",headers:{Accept:"application/json"}});if(tt.ok){const ot=await X(tt);Be=Array.isArray(ot)?ot:(ot==null?void 0:ot.data)||[];const Ve=async Ct=>{try{const ds=await fetch(`${we}/subcategories/parent/${Ct}`,{method:"GET",headers:{Accept:"application/json"}});if(ds.ok){const At=await X(ds),as=Array.isArray(At)?At:(At==null?void 0:At.data)||[],hs=[...as];for(const Vt of as){const Bs=await Ve(Vt._id);hs.push(...Bs)}return hs}}catch(ds){console.error(`Error fetching nested subcategories for ${Ct}:`,ds)}return[]};for(const Ct of Be){const ds=await Ve(Ct._id);Be.push(...ds)}}}catch(Qe){console.error("Error fetching subcategories:",Qe)}if(Be.length===0)try{const Qe=await fetch(`${we}/subcategories`,{method:"GET",headers:{Accept:"application/json"}});if(Qe.ok){const tt=await X(Qe);Be=Array.isArray(tt)?tt:(tt==null?void 0:tt.data)||[]}}catch(Qe){console.error("Error fetching all subcategories:",Qe)}if(I=Be.find(Qe=>Qe.slug===L||Qe._id===L),I&&I._id)L=I._id,console.log("Found subcategory by slug, using _id:",L);else try{const Qe=await fetch(`${we}/subcategories/${L}`,{method:"GET",headers:{Accept:"application/json"}});Qe.ok?(I=await X(Qe),I&&I._id?(L=I._id,console.log("Found subcategory via API lookup, using _id:",L)):(I=null,L=null)):(console.warn(`Subcategory not found with slug/id: ${L}, continuing without subcategory`),I=null,L=null)}catch{console.warn(`Error fetching subcategory with slug/id: ${L}, continuing without subcategory`),I=null,L=null}}if(I){const Be=((J=I.name)==null?void 0:J.toLowerCase())||"",Qe=((z=I.slug)==null?void 0:z.toLowerCase())||"";if(Be.includes("gloss")||Qe.includes("gloss")||L!=null&&L.toLowerCase().includes("gloss")){H(!0),P(I),V(!1);return}P(I);try{const tt=await fetch(`${we}/subcategories/parent/${I._id}`,{method:"GET",headers:{Accept:"application/json"}});if(tt.ok){const ot=await X(tt),Ve=Array.isArray(ot)?ot:(ot==null?void 0:ot.data)||[];if(Ve.length>0){if(Ve.length===1){const Ct=Ve[0],ds=Ct.slug||Ct._id;if(n!==ds&&r!==ds){console.log(`Only one nested subcategory found: ${Ct.name} (${ds}). Auto-navigating...`);const At=s&&r?`/digital-print/${s}/${r}/${ds}`:`/digital-print/${s}/${ds}`;l(At,{replace:!0});return}}v(Ve),console.log(`Found ${Ve.length} nested subcategories`)}}}catch(tt){console.error("Error fetching child subcategories:",tt)}}const me=we.replace(/\/+$/,"");let fe,Me;if(!I||I===null)if(s&&/^[0-9a-fA-F]{24}$/.test(s))fe=`${me}/products/category/${s}`,Me=await fetch(fe,{method:"GET",headers:{Accept:"application/json"}});else throw new Error("Valid Category ID is required to fetch products when subcategory is null");else if(L&&/^[0-9a-fA-F]{24}$/.test(L))fe=`${me}/products/subcategory/${L}`,Me=await fetch(fe,{method:"GET",headers:{Accept:"application/json"}});else if(s&&/^[0-9a-fA-F]{24}$/.test(s))fe=`${me}/products/category/${s}`,Me=await fetch(fe,{method:"GET",headers:{Accept:"application/json"}});else throw new Error("Valid Subcategory ID or Category ID is required to fetch products");if(!Me.ok&&Me.status===400){const Be=await Me.text();let Qe="Invalid subcategory or category ID";try{const tt=JSON.parse(Be);Qe=tt.error||tt.message||Qe}catch{}throw new Error(Qe)}let se;if(Me.ok)se=await X(Me);else if(Me.status===404)se=[];else try{const Be=await X(Me);throw new Error(Be.error||Be.message||`Failed to fetch products: ${Me.status} ${Me.statusText}`)}catch(Be){throw Be instanceof Error&&Be.message.includes("body stream")?new Error(`Failed to fetch products: ${Me.status} ${Me.statusText}`):Be}console.log("=== PRODUCTS FETCHED (VisitingCards) ==="),console.log("Total products:",Array.isArray(se)?se.length:0),console.log("Full products data:",JSON.stringify(se,null,2)),Array.isArray(se)||(se=[]);let le=[];if(I&&L)try{le=await(async Qe=>{try{const tt=await fetch(`${we}/subcategories/parent/${Qe}?includeChildren=true`,{method:"GET",headers:{Accept:"application/json"}});if(tt.ok){const ot=await X(tt),Ve=Array.isArray(ot)?ot:(ot==null?void 0:ot.data)||[];Ve.sort((ds,At)=>(ds.sortOrder||0)-(At.sortOrder||0));const Ct=ds=>{let At=[];return ds.forEach(as=>{At.push(as),as.children&&as.children.length>0&&(At=At.concat(Ct(as.children)))}),At};return Ct(Ve)}}catch(tt){console.error(`Error fetching nested subcategories for ${Qe}:`,tt)}return[]})(L)}catch(Be){console.error("Error fetching nested subcategories:",Be)}if(I){if(P(I),m(((ye=I.category)==null?void 0:ye.name)||I.name||""),p(((xe=I.category)==null?void 0:xe.description)||I.description||""),le.length>0){if(le.length===1){const Qe=le[0]._id;s?l(`/digital-print/${s}/${L}/${Qe}`,{replace:!0}):l(`/digital-print/${L}/${Qe}`,{replace:!0}),V(!1);return}v(le),E([]),V(!1);return}}else if(s&&/^[0-9a-fA-F]{24}$/.test(s))try{const Be=await fetch(`${we}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(Be.ok){const Qe=await X(Be);m(Qe.name||""),p(Qe.description||""),h(Qe.image||"/Glossy.png"),Array.isArray(se)&&se.length>0&&P({_id:r||s,name:Qe.name||"Products",description:Qe.description||"",image:Qe.image||"/Glossy.png",category:Qe,slug:r||s})}}catch(Be){console.error("Error fetching category info:",Be),Array.isArray(se)&&se.length>0&&P({_id:r||s||"",name:"Products",description:"",image:"/Glossy.png",slug:r||s||""})}if(Array.isArray(se)&&se.length===1){const Be=se[0],Qe=typeof Be.subcategory=="object"?Be.subcategory:null,tt=(Qe==null?void 0:Qe._id)||(I?I._id:null),ot=tt&&tt!==s&&tt!==Be._id&&I!==null;s&&ot?l(`/digital-print/${s}/${tt}/${Be._id}`,{replace:!0}):s?l(`/digital-print/${s}/${Be._id}`,{replace:!0}):l(`/digital-print/${Be._id}`,{replace:!0}),V(!1);return}console.log("Final products data to set:",se),console.log("Products array length:",Array.isArray(se)?se.length:0),E(Array.isArray(se)?se:[]),Array.isArray(se)&&se.length>0&&!I&&s&&console.log("Products found but subcategory data missing - will display products anyway"),V(!1);return}catch(I){console.error("Error fetching products:",I),R(I instanceof Error?I.message:"Failed to fetch products"),V(!1);return}}else{let I=`${we}/subcategories`;s&&(I=`${we}/subcategories/category/${s}`);const L=await fetch(I,{method:"GET",headers:{Accept:"application/json"}});if(!L.ok)throw new Error(`Failed to fetch subcategories: ${L.status} ${L.statusText}`);const _=await X(L),me=Array.isArray(_)?_:(_==null?void 0:_.data)||[];if(me.length>0){if(me.sort((fe,Me)=>(fe.sortOrder||0)-(Me.sortOrder||0)),v(me),E([]),me[0].category){const fe=typeof me[0].category=="object"?me[0].category:null;fe&&(m(fe.name||""),p(fe.description||""),h(fe.image||"/Glossy.png"))}}else if(v([]),s&&/^[0-9a-fA-F]{24}$/.test(s))try{const fe=`${we}/products/category/${s}`,Me=await fetch(fe,{method:"GET",headers:{Accept:"application/json"}});if(Me.ok){const se=await X(Me),le=Array.isArray(se)?se:[];if(le.length>0){E(le);try{const Be=await fetch(`${we}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(Be.ok){const Qe=await X(Be);m(Qe.name||""),p(Qe.description||""),h(Qe.image||"/Glossy.png")}}catch(Be){console.error("Error fetching category info:",Be)}}else E([])}else E([])}catch(fe){console.error("Error fetching products for category:",fe),E([])}else E([])}}catch(I){console.error("Error fetching data:",I),R(I instanceof Error?I.message:"Failed to load data")}finally{V(!1)}})()},[s,r,n]);const Se={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},$={hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,ease:"easeOut"}}};return ae&&s?e.jsx(kd,{forcedProductId:te||void 0}):e.jsxs("div",{className:"min-h-screen bg-cream-50 py-4 sm:py-8",children:[!r&&e.jsx("div",{className:"bg-white border-b border-cream-200 pb-6 sm:pb-10 pt-6 sm:pt-8 mb-6 sm:mb-8 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"flex flex-col gap-2 text-center md:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-xs sm:text-sm font-medium text-cream-500 uppercase tracking-widest",children:[e.jsx(Ps,{to:"/digital-print",className:"hover:text-cream-900 transition-colors",children:"Services"}),e.jsx($r,{size:12,className:"sm:w-3.5 sm:h-3.5"}),e.jsx("span",{className:"text-cream-900",children:d})]}),e.jsx("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-cream-900",children:d}),u&&e.jsx("p",{className:"text-sm sm:text-base text-cream-600 mt-2 max-w-xl mx-auto md:mx-0",children:"Choose the perfect paper type and finish for your brand identity."})]})})}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 pb-12 sm:pb-16",children:[q?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(Jt,{className:"animate-spin text-cream-900",size:48})}):M?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-800",children:M})}):j.length>0&&!r||w.length>0&&j.length===0&&!r?e.jsxs(e.Fragment,{children:[j.length>0&&e.jsx("div",{className:"mb-6 bg-white rounded-xl shadow-md border border-cream-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-4",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial sm:w-64",children:[e.jsx(an,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search subcategories...",value:D,onChange:re=>k(re.target.value),className:"w-full pl-10 pr-10 py-2.5 border-2 border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 text-sm sm:text-base bg-white shadow-sm transition-all"}),D&&e.jsx("button",{onClick:()=>k(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cream-500 hover:text-cream-700 transition-colors",children:e.jsx(ss,{size:18})})]}),e.jsxs("div",{className:"flex-1 sm:flex-initial sm:w-64",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Filter Subcategory"}),e.jsx(Da,{label:"All Subcategories",value:Q,onChange:re=>W(re),options:[{value:null,label:"All Subcategories"},...j.filter(re=>!(D&&!re.name.toLowerCase().includes(D.toLowerCase()))).map(re=>({value:re._id,label:re.name}))],className:"w-full"})]}),(D||Q)&&e.jsxs("button",{onClick:()=>{k(""),W(null)},className:"flex items-center gap-2 px-4 py-2.5 text-sm text-cream-700 hover:text-cream-900 bg-cream-100 hover:bg-cream-200 rounded-lg transition-colors whitespace-nowrap",children:[e.jsx(ss,{size:16}),"Clear Filters"]})]})}),e.jsx(st.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-5",variants:Se,initial:"hidden",animate:"visible",children:j.filter(re=>!(D&&!re.name.toLowerCase().includes(D.toLowerCase())||Q&&re._id!==Q)).map((re,B)=>{const ne=re._id,Z=re.image||"/Glossy.png";return e.jsx(st.div,{variants:$,children:e.jsx(Ps,{to:s?`/digital-print/${s}/${ne}`:`/digital-print/${ne}`,className:"group block h-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 border border-cream-100 h-full flex flex-col hover:-translate-y-2",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-cream-100 flex items-center justify-center rounded-2xl sm:rounded-3xl m-3 sm:m-4 mx-2 sm:mx-3",children:[e.jsx("img",{src:Z,alt:re.name,className:"object-contain h-full w-full transition-transform duration-700 group-hover:scale-110 rounded-2xl sm:rounded-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-cream-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 backdrop-blur-[2px]",children:e.jsx("span",{className:"bg-white text-cream-900 px-6 py-3 rounded-full font-bold text-sm transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 shadow-lg",children:"Customize Now"})})]}),e.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-serif text-lg sm:text-xl md:text-2xl font-bold text-cream-900 mb-2 group-hover:text-cream-600 transition-colors",children:re.name}),e.jsx("p",{className:"text-cream-600 text-sm sm:text-base mb-4 flex-grow leading-relaxed",children:re.description||""}),e.jsxs("div",{className:"pt-3 border-t border-cream-100 flex items-center justify-between mt-auto",children:[e.jsx("span",{className:"text-xs sm:text-sm text-cream-500",children:"View Details"}),e.jsx($r,{size:18,className:"text-cream-900 group-hover:text-cream-600 group-hover:translate-x-1 transition-all duration-300"})]})]})]})})},re._id)})}),w.length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Direct Products"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(st.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[400px] sm:min-h-[500px] md:min-h-[600px] bg-cream-100/50",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:g||"/Glossy.png",alt:d||"Category Preview",className:"w-full h-full object-contain cursor-pointer hover:opacity-90 transition-opacity rounded-lg",style:{maxWidth:"100%",maxHeight:"100%"}})})})})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx(st.div,{className:"space-y-3 sm:space-y-4 w-full",variants:Se,initial:"hidden",animate:"visible",children:w.map(re=>{const B=typeof re.subcategory=="object"?re.subcategory:null,ne=B==null?void 0:B._id,Z=n&&r,ue=Z?n:null,ve=Z?r:null,O=ne&&ne!==s&&ne!==re._id,J=Z&&ne&&(ne===n||ne===ue),z=re.basePrice||0,ye=z<1?(z*1e3).toFixed(2):z.toFixed(2),xe=z<1?"per 1000 units":"",_=(re.description?re.description.replace(/<[^>]*>/g,"").trim():"").split(`
`).filter(fe=>fe.trim()).slice(0,3).join(" ").trim(),me=_.length>200?_.substring(0,200)+"...":_||"";return e.jsx(st.div,{variants:$,children:e.jsx(Ps,{to:s&&J&&ve&&ue?`/digital-print/${s}/${ve}/${ue}/${re._id}`:s&&O?`/digital-print/${s}/${ne}/${re._id}`:s?`/digital-print/${s}/${re._id}`:`/digital-print/${re._id}`,className:"group block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"w-full p-4 sm:p-6 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 min-h-[140px] sm:min-h-[160px] flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32 h-24 sm:h-32 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:re.image||"/Glossy.png",alt:re.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:re.name}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:jn(parseFloat(ye)||0,"INR")}),xe&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:xe})]}),e.jsx("span",{className:"text-cream-900 group-hover:text-cream-600 text-xl font-bold transition-colors",children:""})]})]}),me&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm leading-relaxed flex-grow",children:e.jsx("p",{className:"line-clamp-2",children:me})})]})]})})},re._id)})})})]})]})]}):r?e.jsxs("div",{children:[r&&e.jsx("div",{className:"mb-4",children:e.jsx(nn,{onClick:()=>{l(n&&r&&s?`/digital-print/${s}/${r}`:s?`/digital-print/${s}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:n&&r&&s?`/digital-print/${s}/${r}`:s?`/digital-print/${s}`:"/digital-print",label:n?"Back to Subcategory":d?`Back to ${d}`:"Back to Category",className:"inline-flex items-center gap-2 text-sm text-cream-600 hover:text-cream-900"})}),j.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Nested Subcategories"}),e.jsx(st.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-5 mb-12",variants:Se,initial:"hidden",animate:"visible",children:j.map(re=>{const B=re._id,ne=re.image||"/Glossy.png",Z=A?A._id:r;return e.jsx(st.div,{variants:$,children:e.jsx(Ps,{to:s&&Z?`/digital-print/${s}/${Z}/${B}`:s?`/digital-print/${s}/${B}`:`/digital-print/${B}`,className:"group block h-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 border border-cream-100 h-full flex flex-col hover:-translate-y-2",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-cream-100 flex items-center justify-center rounded-2xl sm:rounded-3xl m-3 sm:m-4 mx-2 sm:mx-3",children:[e.jsx("img",{src:ne,alt:re.name,className:"object-contain h-full w-full transition-transform duration-700 group-hover:scale-110 rounded-2xl sm:rounded-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-cream-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 backdrop-blur-[2px]",children:e.jsx("span",{className:"bg-white text-cream-900 px-6 py-3 rounded-full font-bold text-sm transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 shadow-lg",children:"Customize Now"})})]}),e.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-serif text-lg sm:text-xl md:text-2xl font-bold text-cream-900 mb-2 group-hover:text-cream-600 transition-colors",children:re.name}),e.jsx("p",{className:"text-cream-600 text-sm sm:text-base mb-4 flex-grow leading-relaxed",children:re.description||""}),e.jsxs("div",{className:"pt-3 border-t border-cream-100 flex items-center justify-between mt-auto",children:[e.jsx("span",{className:"text-xs sm:text-sm text-cream-500",children:"View Details"}),e.jsx($r,{size:18,className:"text-cream-900 group-hover:text-cream-600 group-hover:translate-x-1 transition-all duration-300"})]})]})]})})},re._id)})})]}),w.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Select Product"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(st.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[400px] sm:min-h-[500px] md:min-h-[600px] bg-cream-100/50",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:g||(A==null?void 0:A.image)||"/Glossy.png",alt:d||(A==null?void 0:A.name)||"Category Preview",className:"w-full h-full object-contain cursor-pointer hover:opacity-90 transition-opacity rounded-lg",style:{maxWidth:"100%",maxHeight:"100%"}})})})})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx(st.div,{className:"space-y-3 sm:space-y-4 w-full",variants:Se,initial:"hidden",animate:"visible",children:w.map(re=>{const B=typeof re.subcategory=="object"?re.subcategory:null,ne=(B==null?void 0:B.slug)||(B==null?void 0:B._id),Z=ne&&ne!==s&&ne!==re._id,ue=re.basePrice||0,ve=ue<1?(ue*1e3).toFixed(2):ue.toFixed(2),O=ue<1?"per 1000 units":"",ye=(re.description?re.description.replace(/<[^>]*>/g,"").trim():"").split(`
`).filter(I=>I.trim()).slice(0,3).join(" ").trim(),xe=ye.length>200?ye.substring(0,200)+"...":ye||"";return e.jsx(st.div,{variants:$,children:e.jsx(Ps,{to:s&&Z?`/digital-print/${s}/${ne}/${re._id}`:s?`/digital-print/${s}/${re._id}`:`/digital-print/${re._id}`,className:"group block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"w-full p-4 sm:p-6 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 min-h-[140px] sm:min-h-[160px] flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32 h-24 sm:h-32 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:re.image||"/Glossy.png",alt:re.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:re.name}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:jn(parseFloat(ve)||0,"INR")}),O&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:O})]}),e.jsx("span",{className:"text-cream-900 group-hover:text-cream-600 text-xl font-bold transition-colors",children:""})]})]}),xe&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm leading-relaxed flex-grow",children:e.jsx("p",{className:"line-clamp-2",children:xe})})]})]})})},re._id)})})})]})]}):j.length===0?e.jsxs("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-cream-700",children:"No products found for this subcategory."}),s&&e.jsx(nn,{onClick:()=>{l(s?`/digital-print/${s}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:s?`/digital-print/${s}`:"/digital-print",label:d?`Back to ${d}`:"Back to Category",className:"text-cream-900 hover:text-cream-600 underline mt-2 inline-block"})]}):null]}):s&&w.length>0?e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Select Product"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(st.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[400px] sm:min-h-[500px] md:min-h-[600px] bg-cream-100/50",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:g||"/Glossy.png",alt:d||"Category Preview",className:"w-full h-full object-contain cursor-pointer hover:opacity-90 transition-opacity rounded-lg",style:{maxWidth:"100%",maxHeight:"100%"}})})})})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx(st.div,{className:"space-y-3 sm:space-y-4 w-full",variants:Se,initial:"hidden",animate:"visible",children:w.map(re=>{const B=typeof re.subcategory=="object"?re.subcategory:null,ne=(B==null?void 0:B.slug)||(B==null?void 0:B._id),Z=ne&&ne!==s&&ne!==re._id,ue=re.basePrice||0,ve=ue<1?(ue*1e3).toFixed(2):ue.toFixed(2),O=ue<1?"per 1000 units":"",ye=(re.description?re.description.replace(/<[^>]*>/g,"").trim():"").split(`
`).filter(I=>I.trim()).slice(0,3).join(" ").trim(),xe=ye.length>200?ye.substring(0,200)+"...":ye||"";return e.jsx(st.div,{variants:$,children:e.jsx(Ps,{to:s&&Z?`/digital-print/${s}/${ne}/${re._id}`:s?`/digital-print/${s}/${re._id}`:`/digital-print/${re._id}`,className:"group block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"w-full p-4 sm:p-6 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 min-h-[140px] sm:min-h-[160px] flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32 h-24 sm:h-32 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:re.image||"/Glossy.png",alt:re.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:re.name}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:jn(parseFloat(ve)||0,"INR")}),O&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:O})]}),e.jsx("span",{className:"text-cream-900 group-hover:text-cream-600 text-xl font-bold transition-colors",children:""})]})]}),xe&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm leading-relaxed flex-grow",children:e.jsx("p",{className:"line-clamp-2",children:xe})})]})]})})},re._id)})})})]})]}):s&&j.length===0&&w.length===0?e.jsxs("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-cream-700",children:r?"No products found for this subcategory.":"No products found for this category."}),s&&r&&e.jsx(nn,{onClick:()=>{l(s?`/digital-print/${s}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:s?`/digital-print/${s}`:"/digital-print",label:d?`Back to ${d}`:"Back to Category",className:"text-cream-900 hover:text-cream-600 underline mt-2 inline-block"})]}):j.length===0&&!s?e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-cream-700",children:"No categories found."})}):null,!r&&d&&e.jsx(st.div,{className:"mt-12 sm:mt-20 bg-white p-8 sm:p-10 rounded-3xl border border-cream-200 shadow-sm",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:e.jsx("div",{className:"flex flex-col md:flex-row gap-10 items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-serif text-2xl font-bold text-cream-900 mb-4",children:["Why Choose Our ",d,"?"]}),u&&e.jsx("p",{className:"text-cream-700 leading-relaxed mb-6",children:u}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-cream-50 rounded-xl border border-cream-100",children:[e.jsx("div",{className:"font-bold text-2xl text-cream-900 mb-1",children:"24h"}),e.jsx("div",{className:"text-xs text-cream-500 uppercase tracking-wider",children:"Production"})]}),e.jsxs("div",{className:"text-center p-4 bg-cream-50 rounded-xl border border-cream-100",children:[e.jsx("div",{className:"font-bold text-2xl text-cream-900 mb-1",children:"300+"}),e.jsx("div",{className:"text-xs text-cream-500 uppercase tracking-wider",children:"GSM Paper"})]}),e.jsxs("div",{className:"text-center p-4 bg-cream-50 rounded-xl border border-cream-100",children:[e.jsx("div",{className:"font-bold text-2xl text-cream-900 mb-1",children:"100%"}),e.jsx("div",{className:"text-xs text-cream-500 uppercase tracking-wider",children:"Satisfaction"})]})]})]})})})]})]})},WT=({width:s="100%",height:r="100%",safeArea:n={top:10,bottom:10,left:10,right:10},bleedArea:l={top:15,bottom:15,left:15,right:15}})=>{const[d,m]=y.useState(!0);return e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[e.jsx("div",{className:"absolute -top-8 right-0 pointer-events-auto",children:e.jsxs("button",{onClick:()=>m(!d),className:"bg-cream-700 text-white px-3 py-1 rounded-lg text-xs flex items-center gap-1 hover:bg-cream-800 transition-colors",children:[d?e.jsx(h5,{size:12}):e.jsx(zr,{size:12}),d?"Hide Guides":"Show Guides"]})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute border border-red-400 opacity-50",style:{top:`${l.top}%`,bottom:`${l.bottom}%`,left:`${l.left}%`,right:`${l.right}%`},children:e.jsx("div",{className:"absolute -top-3 left-2 bg-red-500 text-white text-[10px] px-1 rounded",children:"Bleed Area"})}),e.jsx("div",{className:"absolute border border-blue-400 opacity-50",style:{top:"5%",bottom:"5%",left:"5%",right:"5%"},children:e.jsx("div",{className:"absolute border-2 border-dashed border-green-500 opacity-70",style:{top:`${n.top}%`,bottom:`${n.bottom}%`,left:`${n.left}%`,right:`${n.right}%`},children:e.jsx("div",{className:"absolute -top-3 left-2 text-green-600 bg-white/80 text-[10px] px-1 rounded font-bold",children:"Safe Area"})})})]})]})},ZT=()=>{const s=Ha(),[r,n]=y.useState("select"),[l,d]=y.useState(null),[m,u]=y.useState(""),[p,g]=y.useState(!1),[h,j]=y.useState(null),[v,w]=y.useState(null),[E,A]=y.useState("front"),[P,q]=y.useState(!1),[V,M]=y.useState(!1),[R,ae]=y.useState(0),[H,D]=y.useState(null),[k,Q]=y.useState({height:2,width:3.5,safeTop:10,safeBottom:10,safeLeft:10,safeRight:10,bleedTop:15,bleedBottom:15,bleedLeft:15,bleedRight:15,description:""}),[W,te]=y.useState(!1);y.useEffect(()=>{(()=>{try{const ve=localStorage.getItem("user");if(console.log(" Checking localStorage for user data:",{hasUserData:!!ve}),ve){const O=JSON.parse(ve);console.log(" Found user data in localStorage:",O);let J=null,z=null;if(O&&O._id&&typeof O._id=="string"?(J=O._id,z=O.name||O.email||O.username||"User"):O&&O.user&&O.user._id&&typeof O.user._id=="string"?(J=O.user._id,z=O.user.name||O.user.email||O.user.username||"User"):O&&O.id&&typeof O.id=="string"?(J=O.id,z=O.name||O.email||O.username||"User"):O&&O.user&&O.user.id&&typeof O.user.id=="string"&&(J=O.user.id,z=O.user.name||O.user.email||O.user.username||"User"),J){d(J),u(z||"Your Account"),g(!0),console.log(" User is logged in with ID:",J);return}}console.warn(" No valid user ID found - user not logged in"),d(null),g(!1),u("")}catch(ve){console.error(" Error reading localStorage:",ve),d(null),g(!1),u("")}})()},[]);const ie=()=>{s("/login")},X=ue=>new Promise(ve=>{const O=[];if(["image/jpeg","image/png","image/jpg","application/pdf"].includes(ue.type)||O.push("Invalid file format. Use JPG, PNG, or PDF."),ue.size>10*1024*1024&&O.push("File size exceeds 10MB limit."),ue.type.startsWith("image/")){const z=new Image,ye=URL.createObjectURL(ue);z.onload=()=>{const xe=z.width/k.width;xe<300&&O.push(`Low resolution (${Math.round(xe)} DPI). Minimum 300 DPI recommended.`),(z.width<1e3||z.height<600)&&O.push("Low resolution image. Minimum 1000x600px required."),ve({file:ue,preview:ye,isValid:O.length===0,errors:O})},z.onerror=()=>{O.push("Failed to load image data."),ve({file:ue,preview:"",isValid:!1,errors:O})},z.src=ye}else ve({file:ue,preview:"",isValid:O.length===0,errors:O})}),Se=async(ue,ve)=>{var O;if(ue.preventDefault(),q(!1),(O=ue.dataTransfer.files)!=null&&O[0]){const J=await X(ue.dataTransfer.files[0]);ve==="front"?j(J):w(J),A(ve)}},$=async(ue,ve)=>{var O;if((O=ue.target.files)!=null&&O[0]){const J=await X(ue.target.files[0]);ve==="front"?j(J):w(J),A(ve)}},re=async()=>{if(console.log(" Upload button clicked"),!p||!l){ie();return}if(!(!h||!h.isValid)){M(!0),ae(0);try{const ue=new FormData;ue.append("userId",l),ue.append("height",k.height.toString()),ue.append("width",k.width.toString()),ue.append("description",k.description),ue.append("safeTop",k.safeTop.toString()),ue.append("safeBottom",k.safeBottom.toString()),ue.append("safeLeft",k.safeLeft.toString()),ue.append("safeRight",k.safeRight.toString()),ue.append("bleedTop",k.bleedTop.toString()),ue.append("bleedBottom",k.bleedBottom.toString()),ue.append("bleedLeft",k.bleedLeft.toString()),ue.append("bleedRight",k.bleedRight.toString()),ue.append("frontImage",h.file),v&&v.isValid&&ue.append("backImage",v.file);const ve=localStorage.getItem("token"),O=new XMLHttpRequest;O.upload.onprogress=J=>{if(J.lengthComputable){const z=J.loaded/J.total*100;ae(z)}},O.onload=()=>{if(O.status===201){const J=JSON.parse(O.responseText);D(J),M(!1),console.log(" Upload successful!")}else console.error(" Upload failed with status:",O.status,O.responseText),M(!1)},O.onerror=()=>{console.error(" Upload XHR error"),M(!1)},O.open("POST",`${we}/upload`),ve&&O.setRequestHeader("Authorization",`Bearer ${ve}`),console.log(" Sending upload request with userId:",l),O.send(ue)}catch(ue){console.error(" Upload error:",ue),M(!1)}}},B=()=>e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"font-serif text-4xl font-bold text-cream-900 mb-4",children:"Upload Your Design"}),e.jsx("p",{className:"text-cream-600 text-lg",children:"Get professional printing with our automated file preparation"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8 px-4",children:e.jsxs(st.div,{whileHover:{y:-5},className:"bg-white p-6 sm:p-8 rounded-2xl sm:rounded-3xl border border-cream-200 shadow-lg cursor-pointer hover:shadow-xl transition-all group md:col-span-2 max-w-2xl mx-auto",onClick:()=>{if(!p){ie();return}n("upload")},children:[e.jsx("div",{className:"w-16 h-16 bg-cream-100 rounded-2xl flex items-center justify-center mb-6 text-cream-900 group-hover:bg-cream-900 group-hover:text-white transition-colors mx-auto",children:e.jsx(oc,{size:32})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-3 text-center",children:"Upload Print-Ready Files"}),e.jsx("p",{className:"text-cream-600 mb-6 text-center",children:"Upload your designs with automatic CMYK conversion, bleed area setup, and professional pre-press checks."}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"text-cream-900 font-bold flex items-center group-hover:gap-2 transition-all mx-auto",children:[p?"Start Upload":"Login to Upload"," ",e.jsx(oc,{size:16,className:"ml-2"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 mt-8 sm:mt-12 px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center p-6 bg-white rounded-xl border border-cream-100",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-green-600",children:e.jsx(va,{size:24})}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Auto CMYK Conversion"}),e.jsx("p",{className:"text-cream-600 text-sm",children:"Automatic conversion to print-ready CMYK color space"})]}),e.jsxs("div",{className:"text-center p-6 bg-white rounded-xl border border-cream-100",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-blue-600",children:e.jsx(Cy,{size:24})}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Bleed Area Setup"}),e.jsx("p",{className:"text-cream-600 text-sm",children:"Professional bleed and safe area configuration"})]}),e.jsxs("div",{className:"text-center p-6 bg-white rounded-xl border border-cream-100",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-purple-600",children:e.jsx(Co,{size:24})}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Quality Check"}),e.jsx("p",{className:"text-cream-600 text-sm",children:"Automatic resolution and format validation"})]})]})]}),ne=()=>e.jsx("div",{className:"max-w-2xl mx-auto text-center",children:e.jsxs("div",{className:"bg-white rounded-3xl p-12 border border-cream-100 shadow-lg",children:[e.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Hp,{size:40,className:"text-yellow-600"})}),e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900 mb-4",children:"Login Required"}),e.jsx("p",{className:"text-cream-600 text-lg mb-6",children:"Please log in to upload your designs and access all features."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:ie,className:"w-full bg-cream-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-cream-800 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 flex items-center justify-center gap-3",children:[e.jsx(Hp,{size:20}),"Go to Login"]}),e.jsxs("button",{onClick:()=>n("select"),className:"w-full bg-cream-100 text-cream-700 py-3 rounded-xl font-bold hover:bg-cream-200 transition-all flex items-center justify-center gap-2",children:[e.jsx(yc,{size:18}),"Back to Options"]})]})]})}),Z=()=>{var ue,ve;return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("button",{onClick:()=>{n("select"),D(null)},className:"flex items-center text-cream-600 hover:text-cream-900 mb-6 transition-colors",children:[e.jsx(yc,{size:20,className:"mr-2"})," Back to Options"]}),H?e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl p-8 text-center border border-cream-100 shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(va,{size:32,className:"text-green-600"})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-4",children:"Upload Successful!"}),e.jsxs("p",{className:"text-cream-600 mb-6",children:["Your design has been processed and is ready for printing.",H.design.hasBackImage?" Both front and back images were uploaded.":" Only front image was uploaded."]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-6 text-left",children:[e.jsxs("div",{className:"bg-cream-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-cream-900 mb-2",children:"Design Details"}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Size: ",H.design.width,'" '," ",H.design.height,'"']}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Files: ",H.design.hasBackImage?"2":"1"]})]}),e.jsxs("div",{className:"bg-cream-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-cream-900 mb-2",children:"Processing"}),e.jsx("p",{className:"text-sm text-cream-600",children:" CMYK Conversion"}),e.jsx("p",{className:"text-sm text-cream-600",children:" Bleed Setup"})]})]}),e.jsx("button",{onClick:()=>D(null),className:"bg-cream-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-cream-800 transition-colors",children:"Upload Another Design"})]}):e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"lg:w-2/5 space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl sm:rounded-2xl border border-cream-100 shadow-sm",children:[e.jsxs("h3",{className:"font-serif text-lg sm:text-xl font-bold text-cream-900 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Cy,{size:18,className:"sm:w-5 sm:h-5"}),"Design Specifications"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Width (inches)"}),e.jsx("input",{type:"number",step:"0.1",value:k.width,onChange:O=>Q(J=>({...J,width:parseFloat(O.target.value)})),className:"w-full p-3 rounded-xl border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Height (inches)"}),e.jsx("input",{type:"number",step:"0.1",value:k.height,onChange:O=>Q(J=>({...J,height:parseFloat(O.target.value)})),className:"w-full p-3 rounded-xl border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Description"}),e.jsx("textarea",{value:k.description,onChange:O=>Q(J=>({...J,description:O.target.value})),placeholder:"Add notes about your design...",className:"w-full p-3 rounded-xl border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none resize-none",rows:3})]}),e.jsxs("button",{onClick:()=>te(!W),className:"flex items-center gap-2 text-cream-700 hover:text-cream-900 transition-colors text-sm font-medium",children:[e.jsx(Rr,{size:16}),W?"Hide":"Show"," Advanced Settings"]})]}),W&&e.jsxs(st.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-white p-6 rounded-2xl border border-cream-100 shadow-sm",children:[e.jsx("h4",{className:"font-bold text-cream-900 mb-4",children:"Print Safety Margins (%)"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 text-sm",children:["safeTop","safeBottom","safeLeft","safeRight","bleedTop","bleedBottom","bleedLeft","bleedRight"].map(O=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-cream-600 mb-1 capitalize",children:O.replace(/([A-Z])/g," $1").trim()}),e.jsx("input",{type:"number",step:"1",value:k[O],onChange:J=>Q(z=>({...z,[O]:parseFloat(J.target.value)})),className:"w-full p-2 rounded-lg border border-cream-300 focus:ring-1 focus:ring-cream-900 focus:border-transparent outline-none"})]},O))})]}),["front","back"].map(O=>{const J=O==="front",z=J?h:v;return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-cream-900 uppercase mb-2 tracking-wider",children:[O," Side ",J?"*":"(Optional)"]}),z?e.jsxs("div",{className:`border rounded-xl p-4 flex items-start gap-4 relative ${z.isValid?"bg-white border-cream-200":"bg-red-50 border-red-200"}`,onClick:()=>A(O),children:[z.preview?e.jsx("img",{src:z.preview,className:"w-16 h-16 object-cover rounded bg-cream-100",alt:"preview"}):e.jsx("div",{className:"w-16 h-16 bg-cream-100 rounded flex items-center justify-center",children:e.jsx(v5,{className:"text-cream-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-cream-900 truncate",children:z.file.name}),e.jsxs("p",{className:"text-xs text-cream-500 mb-2",children:[(z.file.size/1024/1024).toFixed(2)," MB"]}),z.isValid?e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(va,{size:12})," Ready for Upload"]}):e.jsx("div",{className:"space-y-1",children:z.errors.map((ye,xe)=>e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(xs,{size:12})," ",ye]},xe))})]}),e.jsx("button",{onClick:ye=>{ye.stopPropagation(),J?j(null):w(null)},className:"text-cream-400 hover:text-red-500 p-1 transition-colors",children:e.jsx(ra,{size:16})}),E===O&&e.jsx("div",{className:"absolute -right-3 top-1/2 -translate-y-1/2 w-0 h-0 border-t-8 border-t-transparent border-l-8 border-l-cream-900 border-b-8 border-b-transparent hidden lg:block"})]}):e.jsxs("div",{className:"border-2 border-dashed border-cream-300 rounded-xl p-8 text-center bg-white hover:bg-cream-50 hover:border-cream-400 transition-all cursor-pointer relative",onDragOver:ye=>{ye.preventDefault(),q(!0)},onDragLeave:()=>q(!1),onDrop:ye=>Se(ye,O),children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:ye=>$(ye,O),accept:"image/jpeg,image/png,image/jpg,application/pdf"}),e.jsx(oc,{className:"mx-auto text-cream-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-cream-700",children:"Drag & Drop or Click"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"JPG, PNG, PDF (Max 10MB)"})]})]},O)}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-blue-900",children:[e.jsxs("h4",{className:"font-bold text-sm mb-2 flex items-center gap-2",children:[e.jsx(_r,{size:16})," Professional Print Requirements"]}),e.jsxs("ul",{className:"text-xs space-y-2 opacity-80",children:[e.jsx("li",{children:" Format: JPG, PNG, PDF"}),e.jsx("li",{children:" Resolution: 300 DPI minimum"}),e.jsx("li",{children:" Color: Auto-converted to CMYK"}),e.jsx("li",{children:" Bleed: 3mm recommended on all sides"}),e.jsx("li",{children:" File Size: Maximum 10MB per file"})]})]}),e.jsx("button",{onClick:re,disabled:!p||!h||!h.isValid||V,className:"w-full bg-cream-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-cream-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 flex items-center justify-center gap-2",children:p?V?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading... ",Math.round(R),"%"]}):e.jsxs(e.Fragment,{children:[e.jsx(oc,{size:20}),"Process & Upload Design"]}):e.jsxs(e.Fragment,{children:[e.jsx(Hp,{size:20}),"Login to Upload"]})})]}),e.jsxs("div",{className:"lg:w-3/5 bg-cream-100 rounded-2xl p-8 flex flex-col items-center justify-center relative min-h-[600px]",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(#976b4d 1px, transparent 1px), linear-gradient(90deg, #976b4d 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsx("div",{className:"relative z-10 shadow-2xl",children:E==="front"&&h||E==="back"&&v?e.jsxs("div",{className:"relative w-[500px] aspect-[1.75/1] bg-white",children:[((ue=E==="front"?h:v)==null?void 0:ue.preview)&&e.jsx("img",{src:(ve=E==="front"?h:v)==null?void 0:ve.preview,className:"w-full h-full object-cover",alt:"preview"}),e.jsx(WT,{safeArea:{top:k.safeTop,bottom:k.safeBottom,left:k.safeLeft,right:k.safeRight},bleedArea:{top:k.bleedTop,bottom:k.bleedBottom,left:k.bleedLeft,right:k.bleedRight}})]}):e.jsxs("div",{className:"w-[500px] aspect-[1.75/1] bg-white flex flex-col items-center justify-center text-cream-300 border-2 border-dashed border-cream-200",children:[e.jsx(Pi,{size:48,className:"mb-4"}),e.jsx("p",{className:"text-cream-400 font-medium",children:"Preview will appear here"})]})}),e.jsxs("div",{className:"mt-8 flex gap-6 flex-wrap justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-cream-700",children:[e.jsx("span",{className:"w-3 h-3 border border-red-400 bg-red-50"}),e.jsx("span",{children:"Bleed Area (Cut Zone)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-cream-700",children:[e.jsx("span",{className:"w-3 h-3 border border-blue-400 bg-blue-50"}),e.jsx("span",{children:"Trim Line (Final Size)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-cream-700",children:[e.jsx("span",{className:"w-3 h-3 border-2 border-dashed border-green-500 bg-green-50"}),e.jsx("span",{children:"Safe Area (Text/Logos)"})]})]})]})]})]})};return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-12",children:[e.jsx("div",{className:"container mx-auto px-4 sm:px-6 mb-6",children:e.jsx(nn,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs(ba,{mode:"wait",children:[r==="select"&&e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:B()},"select"),r==="upload"&&!p&&e.jsx(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:ne()},"login-required"),r==="upload"&&p&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Z()},"upload")]})]})},KT=[{role:"Founder & Director",name:"Name Placeholder",desc:"Vision, Business Strategy & Decision Making"},{role:"Chief Executive Officer (CEO)",name:"Kajal Sharma",desc:"Leads the company with strong direction and clarity"},{role:"Chief Operating Officer (COO)",name:"Name Placeholder",desc:"Coordination, Daily Operations & Workflow Management"},{role:"HR",name:"Name Placeholder",desc:"Human Resources & Team Management"},{role:"Marketing Head",name:"Name Placeholder",desc:"Branding, Promotions & Client Acquisition"},{role:"Production Manager",name:"Name Placeholder",desc:"Machine Management, Quality Control & Output"},{role:"Design Head / Creative Lead",name:"Name Placeholder",desc:"Layouts, Templates, Content Designing & Branding"},{role:"Sales Manager",name:"Name Placeholder",desc:"Customer Handling, Order Conversion & Follow-ups"},{role:"Accounts & Billing Manager",name:"Name Placeholder",desc:"Billing, Invoices, Vendor Payments & Records"},{role:"Customer Support Lead",name:"Name Placeholder",desc:"Client Queries, Support & Service Updates"},{role:"Logistics & Dispatch Officer",name:"Name Placeholder",desc:"Packaging, Shipment Tracking & Delivery Coordination"}],JT=[{icon:mi,title:"No Minimum Limit",text:"Premium printing available even for low quantity."},{icon:uf,title:"Bulk Production",text:"Advanced production setup for bulk orders."},{icon:J5,title:"Creative Design",text:"Creative and modern design approach."},{icon:tn,title:"Ultra-fast Delivery",text:"We respect deadlines with quick turnaround."},{icon:lc,title:"Best Pricing",text:"Affordable and transparent pricing structure."}],XT=["Commitment to Quality","Customer First Approach","Innovation & Creativity","Timely Delivery & Transparency"],ek=()=>e.jsxs("div",{className:"min-h-screen bg-cream-50",children:[e.jsx("div",{className:"container mx-auto px-4 pt-4 pb-4",children:e.jsx(nn,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsx("div",{className:"bg-cream-900 text-cream-50 py-20 mt-10",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx(st.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"font-serif text-4xl md:text-6xl font-bold mb-4",children:"About Prints24"}),e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"w-24 h-1 bg-cream-400 mx-auto rounded-full"})]})}),e.jsx("section",{className:"py-16 container mx-auto px-4 max-w-5xl",children:e.jsxs(st.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center space-y-8 text-lg text-cream-800 leading-relaxed",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-2xl text-cream-900",children:"Prints24"})," is a modern, fast-growing Digital & Offset Printing Company, aiming to deliver",e.jsx("span",{className:"font-semibold italic text-cream-600",children:" Fast, Creative, and High-Quality"})," printing solutions to customers."]}),e.jsx("p",{className:"max-w-3xl mx-auto",children:"We started Prints24 with the belief that todays digital generation should have a platform where they can order any type of printingfrom small quantities (Short Run) to large bulk ordersin a way that is:"}),e.jsx("div",{className:"flex justify-center gap-4 md:gap-12 py-6",children:["Easy","Fast","Reliable"].map((s,r)=>e.jsxs(st.div,{initial:{opacity:0,scale:.5},whileInView:{opacity:1,scale:1},transition:{delay:r*.1},className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-cream-200 flex items-center justify-center text-cream-900 mb-2",children:e.jsx(Va,{size:24,strokeWidth:3})}),e.jsx("span",{className:"font-serif font-bold text-xl text-cream-900",children:s})]},s))})]})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs(st.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"bg-cream-50 p-10 rounded-3xl border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-cream-900 text-white rounded-xl",children:e.jsx(zr,{size:28})}),e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900",children:"Our Vision"})]}),e.jsx("p",{className:"text-cream-700 text-lg leading-relaxed",children:"To make Affordable, Stylish, and Premium Quality Printing accessible to every individual and every business."})]}),e.jsxs(st.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"bg-cream-50 p-10 rounded-3xl border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-cream-900 text-white rounded-xl",children:e.jsx(D3,{size:28})}),e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900",children:"Our Mission"})]}),e.jsxs("ul",{className:"space-y-4 text-cream-700",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Va,{size:20,className:"text-cream-500 mt-1 shrink-0"}),e.jsx("span",{children:"Make modern printing easy and accessible for everyone."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Va,{size:20,className:"text-cream-500 mt-1 shrink-0"}),e.jsx("span",{children:"Provide intelligent solutions with Quick Delivery and High Quality."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Va,{size:20,className:"text-cream-500 mt-1 shrink-0"}),e.jsx("span",{children:"Offer better printing options for every budget."})]})]})]})]})})}),e.jsx("section",{className:"py-20 bg-cream-900 text-cream-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"font-serif text-4xl font-bold mb-4",children:"What Makes Prints24 Different?"}),e.jsx("p",{className:"text-cream-200 max-w-2xl mx-auto",children:"We combine traditional quality with modern speed and convenience."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6",children:JT.map((s,r)=>e.jsxs(st.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.1},className:"bg-cream-800 p-6 rounded-2xl text-center hover:bg-cream-700 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-600 rounded-full flex items-center justify-center mx-auto mb-4 text-white",children:e.jsx(s.icon,{size:24})}),e.jsx("h3",{className:"font-serif font-bold text-lg mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-cream-200",children:s.text})]},r))})]})}),e.jsx("section",{className:"py-16 bg-cream-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h2",{className:"font-serif text-3xl font-bold text-center text-cream-900 mb-12",children:"Our Core Values"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:XT.map((s,r)=>e.jsxs(st.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"bg-white px-8 py-4 rounded-full shadow-sm border border-cream-200 flex items-center gap-3 font-medium text-cream-800",children:[e.jsx(P5,{size:18,className:"text-cream-500",fill:"currentColor"}),s]},r))})]})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"text-cream-500 font-medium uppercase tracking-widest text-sm",children:"The People Behind Prints24"}),e.jsx("h2",{className:"font-serif text-4xl font-bold text-cream-900 mt-2",children:"Meet Our Core Team"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:KT.map((s,r)=>e.jsxs(st.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.05},className:"group bg-cream-50 p-6 rounded-2xl border border-cream-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"w-16 h-16 bg-cream-200 rounded-full mb-4 flex items-center justify-center text-cream-900 group-hover:bg-cream-900 group-hover:text-cream-50 transition-colors",children:e.jsx(Il,{size:24})}),e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"text-xs font-bold text-cream-500 uppercase tracking-wider mb-1",children:s.role}),e.jsx("h3",{className:"font-serif text-xl font-bold text-cream-900",children:s.name})]}),e.jsx("div",{className:"w-10 h-1 bg-cream-200 my-4 rounded-full group-hover:bg-cream-400 transition-colors"}),e.jsx("p",{className:"text-sm text-cream-600 leading-relaxed",children:s.desc})]},r))})]})})]}),tk=()=>{const[s,r]=y.useState("terms");y.useEffect(()=>{if(typeof window>"u")return;const l=()=>{const d=["terms","refund","cancellation","privacy"];for(const m of d){const u=document.getElementById(m);if(u){const p=u.getBoundingClientRect();p.top>=0&&p.top<300&&r(m)}}};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const n=l=>{const d=document.getElementById(l);if(d){const m=d.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:m,behavior:"smooth"}),r(l)}};return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-12",children:[e.jsx("div",{className:"container mx-auto px-4 pt-4 pb-4",children:e.jsx(nn,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsx("div",{className:"bg-cream-900 text-cream-50 py-16 mb-12",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold mb-4",children:"Legal Policies"}),e.jsx("p",{className:"text-cream-200 max-w-2xl mx-auto",children:"Transparency is key to our service. Please read our terms and conditions carefully."})]})}),e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-10",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsxs("div",{className:"sticky top-24 bg-white rounded-2xl shadow-sm border border-cream-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-cream-100 border-b border-cream-200 font-bold text-cream-900 flex items-center gap-2",children:[e.jsx(h3,{size:18})," Table of Contents"]}),e.jsxs("nav",{className:"p-2 space-y-1",children:[e.jsxs("button",{onClick:()=>n("terms"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="terms"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Terms of Service ",s==="terms"&&e.jsx(Xa,{size:14})]}),e.jsxs("button",{onClick:()=>n("refund"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="refund"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Refund Policy ",s==="refund"&&e.jsx(Xa,{size:14})]}),e.jsxs("button",{onClick:()=>n("cancellation"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="cancellation"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Cancellation Policy ",s==="cancellation"&&e.jsx(Xa,{size:14})]}),e.jsxs("button",{onClick:()=>n("privacy"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="privacy"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Privacy Policy ",s==="privacy"&&e.jsx(Xa,{size:14})]})]})]})}),e.jsxs("div",{className:"lg:w-3/4 space-y-12",children:[e.jsx("section",{id:"terms",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(wr,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Terms of Service"})]}),e.jsxs("div",{className:"space-y-6 text-cream-800 leading-relaxed",children:[e.jsx("p",{children:"Prints24 provides digital and offset printing services to B2B, B2C, corporate clients, small businesses, and individuals. By using our services, you agree to the following terms:"}),e.jsxs("div",{className:"bg-cream-50 p-5 rounded-xl border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(Co,{size:16})," Customer Responsibility"]}),e.jsx("p",{className:"text-sm",children:"The customer is fully responsible for the legality, originality, copyright ownership, and authenticity of all submitted designs, documents, and artwork."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2 text-lg",children:"Prohibited Printing"}),e.jsx("p",{className:"text-sm mb-3",children:"We do strictly NOT allow printing of content that is illegal, forged, duplicate, copyrighted without permission, objectionable, religiously sensitive, government ID, currency, or any material restricted under Indian law."}),e.jsxs("div",{className:"flex items-start gap-2 text-red-600 text-xs font-medium bg-red-50 p-3 rounded-lg",children:[e.jsx(vy,{size:16,className:"shrink-0 mt-0.5"}),"If such files are received, the order may be cancelled and legal action may be taken."]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Color Disclaimer"}),e.jsx("p",{className:"text-sm",children:"100% exact color matching is not guaranteed in digital or offset processes. If future reprints require identical colors, color profiling will be required and extra fees will apply."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Design Approval"}),e.jsx("p",{className:"text-sm",children:"After customer approval, Prints24 is not responsible for spelling mistakes, low-resolution images, incorrect alignment, missing elements, or design issues found later."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-3",children:"Printing Accuracy Policy"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full mt-1.5"}),e.jsx("span",{children:"If printing errors impact 5%50% of the product, we provide a proportional discount."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full mt-1.5"}),e.jsx("span",{children:"If more than 50% is defective due to production errors, we provide a free reprint."})]})]}),e.jsx("p",{className:"text-xs mt-2 text-cream-500 italic",children:"*For approved reprints, printing is free, but courier/delivery charges must be paid by the customer."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Liability & Rights"}),e.jsxs("p",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"Limited Liability:"})," In cases of courier delay, product damage, color mismatch, disputes, or loss, Prints24s maximum liability is limited to the printing value of the order only."]}),e.jsxs("p",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"Right to Refuse:"})," Prints24 reserves the right to cancel, reject, suspend, or modify any order, customer account, pricing, or policies without prior notice."]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Jurisdiction:"})," All legal matters fall under Jaipur, Rajasthan (India) jurisdiction only."]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Payments & Communication"}),e.jsx("p",{className:"text-sm mb-2",children:"Payments must be made only through officially verified Prints24 company banking channels. Payments made to personal accounts are not the responsibility of Prints24."}),e.jsx("p",{className:"text-sm",children:"By ordering, customers agree to receive transactional and promotional communications through SMS, WhatsApp, email, or phone."})]})]})]})}),e.jsx("section",{id:"refund",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(zi,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Refund Policy"})]}),e.jsxs("div",{className:"space-y-4 text-cream-800",children:[e.jsx("p",{className:"font-medium",children:"All products are custom-made and non-refundable."}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100",children:[e.jsxs("h3",{className:"font-bold text-red-900 mb-2 text-sm flex items-center gap-2",children:[e.jsx(vo,{size:16})," No Refunds Provided For:"]}),e.jsxs("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-red-800",children:[e.jsx("li",{children:" Design dissatisfaction"}),e.jsx("li",{children:" Minor color variations"}),e.jsx("li",{children:" Errors discovered after customer approval"}),e.jsx("li",{children:" Courier delays"}),e.jsx("li",{children:" Expected variation in material/texture"})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100 flex items-start gap-3",children:[e.jsx(zi,{size:20,className:"text-green-700 mt-0.5 shrink-0"}),e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Reprint Guarantee:"})," If production errors affect more than 50% of the order, we provide a free reprintnot a refund."]})]})]})]})}),e.jsx("section",{id:"cancellation",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(vy,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Cancellation Policy"})]}),e.jsx("div",{className:"space-y-4 text-cream-800",children:e.jsxs("ul",{className:"space-y-3 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-100 flex items-center justify-center shrink-0 text-cream-900 font-bold text-xs",children:"1"}),e.jsxs("span",{children:["Orders may be cancelled ",e.jsx("strong",{children:"only before printing begins"}),"."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-100 flex items-center justify-center shrink-0 text-cream-900 font-bold text-xs",children:"2"}),e.jsx("span",{children:"Once production has started, modification or cancellation is not allowed."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-100 flex items-center justify-center shrink-0 text-cream-900 font-bold text-xs",children:"3"}),e.jsx("span",{children:"If cancelled before printing, setup, processing, and material costs will be deducted from the refund."})]})]})})]})}),e.jsx("section",{id:"privacy",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(jc,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Privacy Policy"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-cream-800 text-sm",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Information We Collect"}),e.jsx("p",{className:"mb-4 text-cream-600",children:"Customer name, business details, email, phone, delivery address, and printing design files."}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"How Information Is Used"}),e.jsx("p",{className:"mb-4 text-cream-600",children:"For order processing, delivery, updates, support, and service improvement."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Data Security & Sharing"}),e.jsx("p",{className:"mb-4 text-cream-600",children:"All customer files and information remain confidential and shared only with printing partners, couriers, or payment gateways as needed."}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Customer Rights"}),e.jsx("p",{className:"text-cream-600",children:"Customers may receive promotional communications (opt-out available) and may request access/correction of stored information."})]})]})]})})]})]})})]})},Ma=(s,r)=>{if(typeof window>"u")return;let n=null;if(r&&(n=document.getElementById(r)),n||(n=document.querySelector(`[name="${s}"]`)),n||(n=document.querySelector(`[data-field="${s}"]`)),!n){const l=[`#${s}`,`input[name="${s}"]`,`select[name="${s}"]`,`textarea[name="${s}"]`,`[id*="${s}"]`];for(const d of l)if(n=document.querySelector(d),n)break}if(n)n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{n&&(n.tagName==="BUTTON"?n.click():n.focus(),n.tagName==="SELECT"&&n.click(),n.classList.add("validation-error-highlight"),setTimeout(()=>{n==null||n.classList.remove("validation-error-highlight")},2e3))},300);else if(r){const l=document.getElementById(`${r}-container`);if(l){l.scrollIntoView({behavior:"smooth",block:"center"});const d=l.querySelector("button");d&&setTimeout(()=>{d.click(),d.classList.add("validation-error-highlight"),setTimeout(()=>{d.classList.remove("validation-error-highlight")},2e3)},300)}}},sk=()=>{const[s,r]=y.useState({name:"",email:"",message:""}),[n,l]=y.useState({}),[d,m]=y.useState(!1),[u,p]=y.useState({type:null,text:""}),g=v=>{const{name:w,value:E}=v.target;r(A=>({...A,[w]:E})),n[w]&&l(A=>({...A,[w]:void 0}))},h=()=>{const v={};if(s.name.trim()||(v.name="Name is required"),s.email?/\S+@\S+\.\S+/.test(s.email)||(v.email="Please enter a valid email address"):v.email="Email is required",s.message.trim()?s.message.trim().length<10&&(v.message="Message must be at least 10 characters"):v.message="Message is required",l(v),Object.keys(v).length>0){const w=Object.keys(v)[0];Ma(w,w)}return Object.keys(v).length===0},j=async v=>{if(v.preventDefault(),!!h()){m(!0),p({type:null,text:""});try{await new Promise(w=>setTimeout(w,1e3)),p({type:"success",text:"Thank you! Your message has been sent successfully."}),r({name:"",email:"",message:""}),l({}),setTimeout(()=>{p({type:null,text:""})},5e3)}catch{p({type:"error",text:"Failed to send message. Please try again."}),setTimeout(()=>{p({type:null,text:""})},5e3)}finally{m(!1)}}};return e.jsx("div",{className:"min-h-screen bg-cream-50 py-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-2xl",children:[e.jsx("div",{className:"mb-6",children:e.jsx(nn,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs("div",{className:"bg-white p-10 rounded-2xl shadow-lg border border-cream-100",children:[e.jsx("h1",{className:"font-serif text-3xl font-bold text-cream-900 mb-6 text-center",children:"Contact Us"}),e.jsx(ba,{children:u.type&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`mb-6 p-4 rounded-lg flex items-start gap-3 ${u.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[e.jsx(xs,{size:20,className:"flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm",children:u.text})}),e.jsx("button",{onClick:()=>p({type:null,text:""}),className:"flex-shrink-0 hover:opacity-70 transition-opacity",children:e.jsx(ss,{size:18})})]})}),e.jsxs("form",{className:"space-y-6",onSubmit:j,children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-cream-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"name",name:"name",type:"text",value:s.name,onChange:g,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-transparent outline-none transition-all ${n.name?"border-red-300 focus:ring-red-500 bg-red-50":"border-cream-200"}`,placeholder:"Your Name"}),n.name&&e.jsxs("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[e.jsx(xs,{size:12}),n.name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-cream-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"email",name:"email",type:"email",value:s.email,onChange:g,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-transparent outline-none transition-all ${n.email?"border-red-300 focus:ring-red-500 bg-red-50":"border-cream-200"}`,placeholder:"your@email.com"}),n.email&&e.jsxs("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[e.jsx(xs,{size:12}),n.email]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"message",className:"block text-sm font-medium text-cream-700 mb-1",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"message",name:"message",rows:4,value:s.message,onChange:g,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-transparent outline-none resize-none transition-all ${n.message?"border-red-300 focus:ring-red-500 bg-red-50":"border-cream-200"}`,placeholder:"How can we help?"}),n.message&&e.jsxs("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[e.jsx(xs,{size:12}),n.message]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-cream-50 py-3 rounded-lg font-bold hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Sending...":"Send Message"})]})]})]})})},ak={"+1":{pattern:/^\d{10}$/,minLength:10,maxLength:10,example:"1234567890"},"+91":{pattern:/^[6-9]\d{9}$/,minLength:10,maxLength:10,example:"9876543210"},"+55":{pattern:/^[1-9]\d{10}$/,minLength:11,maxLength:11,example:"11987654321"},"+44":{pattern:/^[1-9]\d{9,10}$/,minLength:10,maxLength:11,example:"7123456789"},"+61":{pattern:/^[2-9]\d{8}$/,minLength:9,maxLength:9,example:"412345678"},"+971":{pattern:/^[2-9]\d{8}$/,minLength:9,maxLength:9,example:"501234567"},"+86":{pattern:/^1[3-9]\d{9}$/,minLength:11,maxLength:11,example:"13800138000"},"+81":{pattern:/^[789]0\d{8}$|^[789]\d{9}$/,minLength:10,maxLength:11,example:"9012345678"},"+49":{pattern:/^[1-9]\d{10,11}$/,minLength:11,maxLength:12,example:"15123456789"},"+33":{pattern:/^[67]\d{8}$/,minLength:9,maxLength:9,example:"612345678"},"+7":{pattern:/^[3-9]\d{9}$/,minLength:10,maxLength:10,example:"9123456789"},"+65":{pattern:/^[689]\d{7}$/,minLength:8,maxLength:8,example:"91234567"},"+60":{pattern:/^[1-9]\d{8,9}$/,minLength:9,maxLength:10,example:"123456789"},"+66":{pattern:/^[689]\d{8}$/,minLength:9,maxLength:9,example:"812345678"},"+82":{pattern:/^[1-9]\d{9,10}$/,minLength:10,maxLength:11,example:"1012345678"},"+34":{pattern:/^[6-9]\d{8}$/,minLength:9,maxLength:9,example:"612345678"},"+39":{pattern:/^[3]\d{9}$/,minLength:10,maxLength:10,example:"3123456789"},"+31":{pattern:/^[6]\d{8}$/,minLength:9,maxLength:9,example:"612345678"},"+46":{pattern:/^[7]\d{8}$/,minLength:9,maxLength:9,example:"712345678"},"+41":{pattern:/^[7-9]\d{8}$/,minLength:9,maxLength:9,example:"781234567"},"+27":{pattern:/^[6-9]\d{8}$/,minLength:9,maxLength:9,example:"812345678"}},rk=()=>{var I;const s=Ha(),r=Gn(),[n,l]=y.useState({email:"",password:""}),[d,m]=y.useState({}),[u,p]=y.useState(!1),[g,h]=y.useState(!1),[j,v]=y.useState("email"),[w,E]=y.useState({email:"",otp:"",newPassword:"",confirmPassword:""}),[A,P]=y.useState({}),[q,V]=y.useState(!1),[M,R]=y.useState(!1),[ae,H]=y.useState(!1),[D,k]=y.useState(""),[Q,W]=y.useState(!1),[te,ie]=y.useState([]),[X,Se]=y.useState([]),[$,re]=y.useState(""),[B,ne]=y.useState(!0),Z=y.useRef(null),ue=(I=r.state)==null?void 0:I.message;y.useEffect(()=>{(async()=>{try{ne(!0);const fe=(await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca2,flag,flags,idd")).json()).filter(Me=>{var se,le,Be;return((se=Me.idd)==null?void 0:se.root)&&((Be=(le=Me.idd)==null?void 0:le.suffixes)==null?void 0:Be.length)>0}).map(Me=>{var Be;const se=Me.idd.root+(Me.idd.suffixes[0]||""),le=ak[se]||{pattern:/^\d{8,15}$/,minLength:8,maxLength:15,example:"1234567890"};return{code:se,country:Me.cca2,name:Me.name.common,flag:Me.flag||"",flagUrl:((Be=Me.flags)==null?void 0:Be.png)||`https://flagcdn.com/w40/${Me.cca2.toLowerCase()}.png`,pattern:le.pattern,minLength:le.minLength,maxLength:le.maxLength,example:le.example,uniqueId:`${se}-${Me.cca2}`}}).sort((Me,se)=>Me.name.localeCompare(se.name));ie(fe),Se(fe)}catch(_){console.error("Error fetching countries:",_);const me=[{code:"+1",country:"US",name:"United States",flag:"",flagUrl:"https://flagcdn.com/w40/us.png",pattern:/^\d{10}$/,minLength:10,maxLength:10,example:"1234567890",uniqueId:"+1-US"},{code:"+91",country:"IN",name:"India",flag:"",flagUrl:"https://flagcdn.com/w40/in.png",pattern:/^[6-9]\d{9}$/,minLength:10,maxLength:10,example:"9876543210",uniqueId:"+91-IN"},{code:"+44",country:"GB",name:"United Kingdom",flag:"",flagUrl:"https://flagcdn.com/w40/gb.png",pattern:/^[1-9]\d{9,10}$/,minLength:10,maxLength:11,example:"7123456789",uniqueId:"+44-GB"}];ie(me),Se(me)}finally{ne(!1)}})()},[]),y.useEffect(()=>{if(!te.length){Se([]);return}if(!$||$.trim()===""){Se(te);return}const L=$.toLowerCase().trim(),_=te.filter(me=>me.name.toLowerCase().includes(L)||me.code.toLowerCase().includes(L)||me.country.toLowerCase().includes(L));Se(_)},[$,te]),y.useEffect(()=>{const L=_=>{Z.current&&!Z.current.contains(_.target)&&W(!1)};return Q&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[Q]);const ve=L=>{const{name:_,value:me}=L.target;l(fe=>({...fe,[_]:me})),d[_]&&m(fe=>({...fe,[_]:void 0})),d.general&&m(fe=>({...fe,general:void 0}))},O=()=>{const L={};if(n.email?/\S+@\S+\.\S+/.test(n.email)||(L.email="Please enter a valid email address"):L.email="Email is required",n.password||(L.password="Password is required"),m(L),Object.keys(L).length>0){const _=Object.keys(L)[0];Ma(_,_)}return Object.keys(L).length===0},J=async()=>{if(!w.email.trim()){P({email:"Email is required"});return}if(!/\S+@\S+\.\S+/.test(w.email)){P({email:"Please enter a valid email address"});return}V(!0),P({});try{const L=await fetch(`${we}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.email.trim()})}),_=await L.json();if(!L.ok){V(!1),L.status===404?P({email:_.message||"No account found with this email address. Please check and try again."}):P({general:_.message||"Failed to send OTP. Please try again."});return}k(w.email.trim()),v("otp"),V(!1)}catch(L){console.error("Error sending OTP:",L),V(!1),P({general:"Network error. Please try again."})}},z=async()=>{if(!w.otp||w.otp.length!==6){P({otp:"Please enter a valid 6-digit OTP"});return}R(!0),P({});try{const L=await fetch(`${we}/auth/verify-otp-password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.email.trim(),otp:w.otp})}),_=await L.json();if(!L.ok){R(!1),P({otp:_.message||"Invalid OTP. Please try again."});return}v("newPassword"),R(!1)}catch(L){console.error("Error verifying OTP:",L),R(!1),P({general:"Network error. Please try again."})}},ye=async()=>{const L={};if(w.newPassword?w.newPassword.length<6&&(L.newPassword="Password must be at least 6 characters"):L.newPassword="New password is required",w.confirmPassword?w.newPassword!==w.confirmPassword&&(L.confirmPassword="Passwords do not match"):L.confirmPassword="Please confirm your password",Object.keys(L).length>0){P(L);return}H(!0),P({});try{const _=await fetch(`${we}/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.email.trim(),otp:w.otp,newPassword:w.newPassword})}),me=await _.json();if(!_.ok){H(!1),P({general:me.message||"Failed to reset password. Please try again."});return}h(!1),v("email"),E({email:"",otp:"",newPassword:"",confirmPassword:""}),P({}),k(""),alert("Password reset successfully! You can now login with your new password.")}catch(_){console.error("Error resetting password:",_),H(!1),P({general:"Network error. Please try again."})}},xe=async L=>{if(L.preventDefault(),!!O()){p(!0);try{const _=await fetch(`${we}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:n.email,password:n.password})}),me=await _.text();if(me.startsWith("<!DOCTYPE")||me.startsWith("<html"))throw new Error("Server returned HTML instead of JSON. Please check your server configuration.");const fe=JSON.parse(me);if(!_.ok){m({general:fe.message||"Login failed. Please check credentials."});return}localStorage.setItem("token",fe.token),localStorage.setItem("user",JSON.stringify(fe.user)),fe.user.role==="admin"?s("/admin/dashboard"):fe.user.role==="emp"?s("/employee/dashboard"):s("/")}catch(_){console.error("Login error:",_),m({general:"Network error. Please check if the server is running."})}finally{p(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-96 h-96 bg-cream-200 rounded-full blur-3xl opacity-40 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-5%] w-96 h-96 bg-cream-300 rounded-full blur-3xl opacity-40 pointer-events-none"}),e.jsx("div",{className:"absolute top-4 left-4 z-20",children:e.jsx(nn,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl w-full space-y-6 sm:space-y-8 bg-white p-6 sm:p-8 md:p-10 rounded-2xl sm:rounded-3xl shadow-xl border border-cream-100 relative z-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900",children:"Welcome Back"}),e.jsx("p",{className:"mt-2 text-xs sm:text-sm text-cream-600",children:"Sign in to manage your prints and orders"})]}),ue&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(xs,{size:16}),ue]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:xe,children:[d.general&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-100 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(xs,{size:16}),d.general]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-cream-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ql,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",value:n.email,onChange:ve,className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${d.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter your email address"})]}),d.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-cream-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(jc,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{id:"password",name:"password",type:"password",value:n.password,onChange:ve,className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${d.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter your password"})]}),d.password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.password})]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("div",{className:"text-xs",children:e.jsx("button",{type:"button",onClick:()=>{h(!0),v("email"),E({email:"",otp:"",newPassword:"",confirmPassword:""}),P({}),k("")},className:"font-medium text-cream-900 hover:text-cream-700 hover:underline",children:"Forgot your password?"})})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed",children:u?e.jsx(Jt,{className:"animate-spin h-5 w-5"}):e.jsxs(e.Fragment,{children:["Sign in",e.jsx($r,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]})})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-cream-600",children:["Don't have an account?"," ",e.jsx(Ps,{to:"/signup",className:"font-bold text-cream-900 hover:text-cream-700 underline transition-colors",children:"Sign Up"})]})})]}),e.jsx(ba,{children:g&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>{!q&&!M&&!ae&&h(!1)},children:e.jsxs(st.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:L=>L.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 sm:p-8 relative",children:[!q&&!M&&!ae&&e.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-cream-400 hover:text-cream-900 transition-colors",children:e.jsx(ss,{className:"h-5 w-5"})}),j==="email"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-cream-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ql,{className:"h-8 w-8 text-cream-900"})}),e.jsx("h3",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-sm text-cream-600",children:"Enter your email address to receive a verification code"})]}),A.general&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(xs,{size:16}),A.general]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ql,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"email",value:w.email,onChange:L=>{E({...w,email:L.target.value}),P({...A,email:void 0})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${A.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter your email address"})]}),A.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:A.email})]}),e.jsx("button",{onClick:J,disabled:q||!w.email,className:"w-full bg-cream-900 text-cream-50 py-3 px-4 rounded-xl font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:q?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin h-5 w-5"}),"Sending OTP..."]}):e.jsxs(e.Fragment,{children:["Send OTP",e.jsx($r,{className:"h-5 w-5"})]})})]})]}),j==="otp"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(va,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Verify OTP"}),e.jsx("p",{className:"text-sm text-cream-600 mb-2",children:"We've sent a 6-digit code to:"}),e.jsx("p",{className:"text-lg font-semibold text-cream-900 mb-6",children:D})]}),A.otp&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(xs,{size:16}),A.otp]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-2",children:"Enter OTP"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:w.otp,onChange:L=>{const _=L.target.value.replace(/\D/g,"").slice(0,6);E({...w,otp:_}),P({...A,otp:void 0})},className:`w-full px-4 py-3 border-2 ${A.otp?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} rounded-xl focus:outline-none focus:ring-2 text-center text-3xl font-bold tracking-widest bg-cream-50`,placeholder:"------",maxLength:6,autoFocus:!0,autoComplete:"one-time-code"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:z,disabled:M||w.otp.length!==6,className:"flex-1 bg-cream-900 text-cream-50 py-3 px-4 rounded-xl font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin h-5 w-5"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:["Verify OTP",e.jsx($r,{className:"h-5 w-5"})]})}),e.jsx("button",{onClick:J,disabled:q||M,className:"px-4 py-3 bg-cream-100 text-cream-900 rounded-xl font-medium hover:bg-cream-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:q?"Sending...":"Resend"})]}),e.jsx("button",{onClick:()=>{v("email"),E({...w,otp:""}),P({})},className:"w-full text-sm text-cream-600 hover:text-cream-900 underline",children:"Change email address"})]})]}),j==="newPassword"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(jc,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-sm text-cream-600",children:"Enter your new password below"})]}),A.general&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(xs,{size:16}),A.general]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:w.newPassword,onChange:L=>{E({...w,newPassword:L.target.value}),P({...A,newPassword:void 0})},className:`w-full px-3 py-2 border ${A.newPassword?"border-red-300 focus:ring-red-500":"border-cream-200 focus:ring-cream-900"} rounded-lg focus:outline-none focus:ring-2 text-sm`,placeholder:"Enter new password (min 6 characters)",autoFocus:!0}),A.newPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:A.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",value:w.confirmPassword,onChange:L=>{E({...w,confirmPassword:L.target.value}),P({...A,confirmPassword:void 0})},className:`w-full px-3 py-2 border ${A.confirmPassword?"border-red-300 focus:ring-red-500":"border-cream-200 focus:ring-cream-900"} rounded-lg focus:outline-none focus:ring-2 text-sm`,placeholder:"Confirm new password"}),A.confirmPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:A.confirmPassword})]}),e.jsx("button",{onClick:ye,disabled:ae||!w.newPassword||!w.confirmPassword,className:"w-full bg-cream-900 text-cream-50 py-3 px-4 rounded-xl font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ae?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin h-5 w-5"}),"Resetting Password..."]}):e.jsxs(e.Fragment,{children:["Reset Password",e.jsx(va,{className:"h-5 w-5"})]})})]})]})]})})})]})},nk=y.lazy(()=>Zd(()=>import("./EmailVerification-CGo4W_7o.js"),[])),ik=y.lazy(()=>Zd(()=>import("./CorporateForm-CUWcVipc.js"),[])),lk=y.lazy(()=>Zd(()=>import("./PrintPartnerForm-BSlLd_C8.js"),[])),ok=()=>{const s=Ha(),[r,n]=y.useState("role-selection"),[l,d]=y.useState(""),[m,u]=y.useState(""),[p,g]=y.useState(""),[h,j]=y.useState(""),[v,w]=y.useState({}),[E,A]=y.useState(!1),P=[{id:"CUSTOMER",title:"Personal / Customer",description:"For individual printing needs",icon:In,color:"bg-blue-50 hover:bg-blue-100 border-blue-200"},{id:"PRINT_PARTNER",title:"Print Partner",description:"Join as a printing service provider",icon:$d,color:"bg-purple-50 hover:bg-purple-100 border-purple-200"},{id:"CORPORATE",title:"Corporate Member",description:"For businesses and organizations",icon:Fn,color:"bg-green-50 hover:bg-green-100 border-green-200"}],q=D=>{d(D),n("email-entry")},V=async D=>{if(D.preventDefault(),!m.trim()||!/\S+@\S+\.\S+/.test(m)){w({email:"Please enter a valid email address"});return}w({}),n("email-verification")},M=()=>{n(l==="CUSTOMER"?"password-setup":"business-details")},R=async D=>{D.preventDefault();const k={};if((!p||p.length<6)&&(k.password="Password must be at least 6 characters"),p!==h&&(k.confirmPassword="Passwords do not match"),Object.keys(k).length>0){w(k);return}A(!0),w({});try{const Q=await fetch("http://localhost:5000/api/auth/complete-customer-signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,password:p})}),W=await Q.json();if(!Q.ok){w({general:W.message||"Signup failed"}),A(!1);return}W.token&&W.user?(localStorage.setItem("token",W.token),localStorage.setItem("user",JSON.stringify(W.user)),s("/")):n("success"),A(!1)}catch{w({general:"Server error. Please try again."}),A(!1)}},ae=()=>{n("success")},H=()=>{r==="email-entry"?(n("role-selection"),d("")):r==="email-verification"?n("email-entry"):(r==="password-setup"||r==="business-details")&&n("email-verification")};return e.jsx("div",{className:"min-h-screen bg-linear-to-br from-cream-50 via-white to-cream-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[r!=="role-selection"&&r!=="success"&&e.jsxs("button",{onClick:H,className:"mb-6 flex items-center gap-2 text-cream-600 hover:text-cream-900 transition-colors",children:[e.jsx(yc,{className:"h-5 w-5"}),"Back"]}),e.jsxs(ba,{mode:"wait",children:[r==="role-selection"&&e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[e.jsx("h1",{className:"font-serif text-3xl sm:text-4xl font-bold text-cream-900 mb-4",children:"Join Prints24"}),e.jsx("p",{className:"text-cream-600 mb-12",children:"Choose how you'd like to sign up"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:P.map(D=>{const k=D.icon;return e.jsxs(st.button,{onClick:()=>q(D.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-6 rounded-2xl border-2 ${D.color} transition-all text-left`,children:[e.jsx(k,{className:"h-12 w-12 mb-4 text-cream-900"}),e.jsx("h3",{className:"font-semibold text-lg text-cream-900 mb-2",children:D.title}),e.jsx("p",{className:"text-sm text-cream-600",children:D.description})]},D.id)})})]},"role-selection"),r==="email-entry"&&e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-2",children:"Enter Your Email"}),e.jsx("p",{className:"text-cream-600 mb-6",children:"We'll send you a verification code"}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ql,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"email",value:m,onChange:D=>{u(D.target.value),w({})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${v.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"your@email.com",autoFocus:!0})]}),v.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:v.email})]}),e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:"Continue"})]})]})},"email-entry"),r==="email-verification"&&e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-2xl shadow-xl p-8",children:e.jsx(y.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Jt,{className:"h-8 w-8 animate-spin text-cream-900"})}),children:e.jsx(nk,{email:m,onVerified:M,onBack:H})})},"email-verification"),r==="password-setup"&&e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-2",children:"Create Your Password"}),e.jsx("p",{className:"text-cream-600 mb-6",children:"Secure your account with a strong password"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(jc,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"password",value:p,onChange:D=>{g(D.target.value),w({})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${v.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter password"})]}),v.password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:v.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(jc,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"password",value:h,onChange:D=>{j(D.target.value),w({})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${v.confirmPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Confirm password"})]}),v.confirmPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:v.confirmPassword})]}),v.general&&e.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(xs,{size:16}),v.general]}),e.jsx("button",{type:"submit",disabled:E,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed",children:E?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin h-5 w-5 mr-2"}),"Creating Account..."]}):"Complete Signup"})]})]})},"password-setup"),r==="business-details"&&e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-2xl shadow-xl p-8",children:e.jsx(y.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Jt,{className:"h-8 w-8 animate-spin text-cream-900"})}),children:l==="CORPORATE"?e.jsx(ik,{onBack:H,onSuccess:ae}):e.jsx(lk,{onBack:H})})},"business-details"),r==="success"&&e.jsx(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md mx-auto text-center",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-2",children:l==="CUSTOMER"?"Welcome to Prints24!":"Application Submitted!"}),e.jsx("p",{className:"text-cream-600 mb-6",children:l==="CUSTOMER"?"Your account has been created successfully. You can now login and start ordering.":"Your application has been submitted for review. We will notify you once approved."}),e.jsx("button",{onClick:()=>s("/login"),className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:l==="CUSTOMER"?"Go to Login":"Return to Home"})]})},"success")]})]})})},ck=()=>{Ha();const s=tu(),[r,n]=y.useState([]),[l,d]=y.useState(!0),[m,u]=y.useState(!1),[p,g]=y.useState({rating:5,comment:"",userName:""}),[h,j]=y.useState(!1),[v,w]=y.useState(null),[E,A]=y.useState("newest"),[P,q]=y.useState({type:null,text:""});y.useEffect(()=>{const D=localStorage.getItem("token"),k=localStorage.getItem("user");if(u(!!D),D&&k)try{const Q=JSON.parse(k);g(W=>({...W,userName:Q.name||""}))}catch(Q){console.error("Error parsing user data:",Q)}},[]),y.useEffect(()=>{(async()=>{try{d(!0);const k=we,Q={Accept:"application/json"},W=await fetch(`${k}/reviews`,{method:"GET",headers:Q});if(!W.ok)throw new Error(`HTTP ${W.status}`);const te=await W.json();n(te)}catch(k){console.error("Fetch reviews error:",k)}finally{d(!1)}})()},[]);const V=async D=>{D.preventDefault();const k=[];if(p.userName.trim()||(k.push("Please enter your name"),Ma("userName","userName")),p.comment.trim()||(k.push("Please enter a comment"),k.length===1&&Ma("comment","comment")),k.length>0){q({type:"error",text:k.join(". ")}),setTimeout(()=>q({type:null,text:""}),5e3);return}try{j(!0),q({type:null,text:""});const Q=we,W=localStorage.getItem("token"),te={"Content-Type":"application/json"};W&&(te.Authorization=`Bearer ${W}`);const ie=await fetch(`${Q}/reviews`,{method:"POST",headers:te,body:JSON.stringify({rating:p.rating,comment:p.comment,userName:p.userName.trim()})});if(!ie.ok){const Se=await ie.json();throw new Error(Se.error||"Failed to submit review")}const X=await ie.json();n([X.review,...r]),g({rating:5,comment:"",userName:m?p.userName:""}),q({type:"success",text:"Review submitted successfully!"}),setTimeout(()=>q({type:null,text:""}),3e3)}catch(Q){console.error("Submit review error:",Q),q({type:"error",text:Q instanceof Error?Q.message:"Failed to submit review"}),setTimeout(()=>q({type:null,text:""}),3e3)}finally{j(!1)}},R=[...r.filter(D=>!(v&&D.rating!==v))].sort((D,k)=>{if(E==="highestRating")return k.rating!==D.rating?k.rating-D.rating:new Date(k.createdAt).getTime()-new Date(D.createdAt).getTime();if(E==="lowestRating")return D.rating!==k.rating?D.rating-k.rating:new Date(k.createdAt).getTime()-new Date(D.createdAt).getTime();{const Q=new Date(D.createdAt).getTime(),W=new Date(k.createdAt).getTime();return E==="newest"?W-Q:E==="oldest"?Q-W:W-Q}}),ae=r.length,H=ae>0?r.reduce((D,k)=>D+k.rating,0)/ae:0;return e.jsx("div",{className:"min-h-screen bg-cream-50 py-6 sm:py-12",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx(nn,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-cream-900 mb-3 sm:mb-4",children:"Customer Reviews"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600 max-w-xl mx-auto mb-4 sm:mb-6",children:"Share your experience and see what others have to say about Prints24."}),ae>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 sm:gap-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Total Reviews"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-cream-900",children:ae})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Average Rating"}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(D=>e.jsx(mi,{size:16,className:`sm:w-5 sm:h-5 ${D<=Math.round(H)?"fill-yellow-400 text-yellow-400":"text-cream-300"}`},D))}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-cream-900",children:H.toFixed(1)})]})]})]})]}),e.jsx("div",{className:"max-w-2xl mx-auto mb-8 sm:mb-12",children:e.jsxs("div",{className:"bg-white p-4 sm:p-6 md:p-8 rounded-xl sm:rounded-2xl shadow-lg border border-cream-200",children:[e.jsx("h2",{className:"font-serif text-xl sm:text-2xl font-bold text-cream-900 mb-4 sm:mb-6",children:"Write a Review"}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Your Name *"}),e.jsx("input",{id:"userName",name:"userName",type:"text",value:p.userName,onChange:D=>g({...p,userName:D.target.value}),className:"w-full p-4 border border-cream-300 rounded-xl focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none",placeholder:"Enter your name",required:!0,disabled:m}),m&&e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"Your name is pre-filled from your account"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(D=>e.jsx("button",{type:"button",onClick:()=>g({...p,rating:D}),className:"focus:outline-none",children:e.jsx(mi,{size:24,className:`sm:w-8 sm:h-8 ${D<=p.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"} transition-colors`})},D))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Your Review *"}),e.jsx("textarea",{id:"comment",name:"comment",value:p.comment,onChange:D=>g({...p,comment:D.target.value}),rows:4,className:"w-full p-4 border border-cream-300 rounded-xl focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none resize-none",placeholder:"Share your experience...",required:!0})]}),P.type&&e.jsx("div",{className:`mb-4 p-3 rounded-lg ${P.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:P.text}),e.jsxs("button",{type:"submit",disabled:h,className:"bg-cream-900 text-cream-50 px-8 py-3 rounded-xl font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(f3,{size:18}),h?"Submitting...":"Submit Review"]})]})]})}),e.jsx("div",{className:"max-w-6xl mx-auto mb-8",children:e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-cream-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lv,{size:20,className:"text-cream-600"}),e.jsx("span",{className:"font-medium text-cream-900",children:"Filters:"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-cream-700",children:"Rating:"}),e.jsx(Da,{label:"All Ratings",value:v,onChange:D=>w(D),options:[{value:null,label:"All Ratings"},{value:5,label:"5 Stars"},{value:4,label:"4 Stars"},{value:3,label:"3 Stars"},{value:2,label:"2 Stars"},{value:1,label:"1 Star"}]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-cream-700",children:"Sort by:"}),e.jsx(Da,{label:"Newest First",value:E,onChange:D=>A(D),options:[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"highestRating",label:"Highest Rating"},{value:"lowestRating",label:"Lowest Rating"}]})]}),(v||E!=="newest")&&e.jsxs("button",{onClick:()=>{w(null),A("newest")},className:"ml-auto flex items-center gap-2 px-4 py-2 text-sm text-cream-700 hover:text-cream-900 border border-cream-300 rounded-lg hover:bg-cream-50 transition-colors",children:[e.jsx(ss,{size:16}),"Clear Filters"]})]})})}),l?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:"Loading reviews..."})}):R.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:v?`No reviews found with ${v} star rating.`:"No reviews yet. Be the first to review!"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:R.map(D=>e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-2xl shadow-md border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-cream-900 font-bold text-lg",children:D.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-cream-900",children:D.userName}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(k=>e.jsx(mi,{size:14,className:k<=D.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"},k))})]})]}),e.jsx("p",{className:"text-cream-700 leading-relaxed mb-4",children:D.comment}),e.jsx("p",{className:"text-xs text-cream-500",children:s?new Date(D.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading..."})]},D._id))})]})})},Aa=s=>s==null||isNaN(s)?"0.00":`${s.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Qf=s=>{var M,R,ae,H,D,k;const r=s.product.basePrice||0,n=s.quantity||0,l=s.product.gstPercentage||18;let d=1;if(((R=(M=s.product.filters)==null?void 0:M.orderQuantity)==null?void 0:R.quantityType)==="RANGE_WISE"&&s.product.filters.orderQuantity.rangeWiseQuantities&&s.product.filters.orderQuantity.rangeWiseQuantities.length>0){const Q=s.product.filters.orderQuantity.rangeWiseQuantities.find(W=>n>=W.min&&(W.max===null||W.max===void 0||n<=W.max));Q&&(d=Q.priceMultiplier||1)}const u=r*d*n,p=[];if(s.selectedOptions&&s.selectedOptions.length>0&&s.selectedOptions.forEach(Q=>{if(typeof Q=="string")return;const W=Q.name||Q.optionName||"Option",te=Q.priceAdd||0,ie=te<10,X=ie?te*n:te;p.push({name:W,priceAdd:te,cost:X,isPerUnit:ie})}),s.finish&&((ae=s.product.filters)!=null&&ae.filterPricesEnabled)){const Q=(H=s.product.filters.printingOptionPrices)==null?void 0:H.find(W=>W.name===s.finish);if(Q&&Q.priceAdd!==0){const W=Q.priceAdd/1e3*n;p.push({name:`Printing: ${s.finish}`,priceAdd:Q.priceAdd/1e3,cost:W,isPerUnit:!0})}}if(s.shape&&((D=s.product.filters)!=null&&D.filterPricesEnabled)){const Q=(k=s.product.filters.deliverySpeedPrices)==null?void 0:k.find(W=>W.name===s.shape);if(Q&&Q.priceAdd!==0){const W=Q.priceAdd/1e3*n;p.push({name:`Delivery: ${s.shape}`,priceAdd:Q.priceAdd/1e3,cost:W,isPerUnit:!0})}}s.selectedDynamicAttributes&&s.selectedDynamicAttributes.length>0&&s.selectedDynamicAttributes.forEach(Q=>{if(Q.priceMultiplier&&Q.priceMultiplier!==1){const W=Q.priceMultiplier-1,te=r*W,ie=te*n;p.push({name:`${Q.attributeName}: ${Q.label}`,priceAdd:te,cost:ie,isPerUnit:!0})}else if(Q.priceAdd&&Q.priceAdd>0){const W=Q.priceAdd*n;p.push({name:`${Q.attributeName}: ${Q.label}`,priceAdd:Q.priceAdd,cost:W,isPerUnit:!0})}});const g=p.reduce((Q,W)=>Q+W.cost,0),h=u+g;let j=0,v=1,w=u;if(s.product.quantityDiscounts&&Array.isArray(s.product.quantityDiscounts)&&s.product.quantityDiscounts.length>0){const Q=s.product.quantityDiscounts.find(W=>{const te=W.minQuantity||0,ie=W.maxQuantity;return n>=te&&(ie==null||n<=ie)});Q&&(Q.priceMultiplier?v=Q.priceMultiplier:Q.discountPercentage&&(v=(100-Q.discountPercentage)/100),j=Q.discountPercentage||0,w=u*v)}else n>=1e4?(j=70,v=.3,w=u*.3):n>=1e3?(j=50,v=.5,w=u*.5):n>=500&&(j=10,v=.9,w=u*.9);const E=h*v,A=h-E,P=E*l/100,q=E+P,V=E+P;return{rawBaseTotal:u,discountedBaseTotal:w,discountPercentage:j,optionBreakdowns:p,subtotal:E,gstAmount:P,finalTotal:V,subtotalBeforeGst:h,subtotalAfterDiscount:E,totalBeforeDiscount:q,discountAmount:A}},Or=s=>`${(s??0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,dk=({subcategory:s})=>{const[r,n]=y.useState(!1),l=typeof s=="object"?s==null?void 0:s.image:null;return l&&!r?e.jsx("img",{src:l,alt:typeof s=="object"?s.name:"Subcategory",className:"w-24 h-24 object-cover rounded-lg group-hover:scale-105 transition-transform duration-300 shadow-sm",onError:()=>n(!0)}):e.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-lg flex items-center justify-center text-slate-300 group-hover:scale-105 transition-transform duration-300",children:e.jsx(zv,{className:"w-8 h-8"})})},Gj=({orders:s,onSelectOrder:r})=>{const n=tu(),[l,d]=y.useState(new Set),m=(u,p)=>{p.stopPropagation(),d(g=>{const h=new Set(g);return h.has(u)?h.delete(u):h.add(u),h})};return e.jsx("div",{className:"space-y-4",children:s.map(u=>{var W,te,ie,X,Se,$,re,B,ne,Z,ue,ve,O;const p=u.status==="completed",g=u.status==="processing"||u.status==="approved"||u.status==="production_ready",h=u.status==="request",j=u.departmentStatuses||[],v=j.length,w=j.filter(J=>J&&typeof J=="object"&&J.status?J.status==="completed":!1).length;let E=0;v>0?E=Math.round(w/v*100):p?E=100:g&&(E=0);const A=!h,P=l.has(u._id),q={quantity:u.quantity,product:{basePrice:((W=u.product)==null?void 0:W.basePrice)||0,gstPercentage:((te=u.product)==null?void 0:te.gstPercentage)||18,options:((ie=u.product)==null?void 0:ie.options)||[],filters:((X=u.product)==null?void 0:X.filters)||{},quantityDiscounts:((Se=u.product)==null?void 0:Se.quantityDiscounts)||[]},finish:u.finish,shape:u.shape,selectedOptions:(u.selectedOptions||[]).map(J=>({name:typeof J=="string"?J:J.optionName||J.name||"",optionName:typeof J=="string"?J:J.optionName||J.name||"",priceAdd:typeof J=="string"?0:J.priceAdd||0})),selectedDynamicAttributes:($=u.selectedDynamicAttributes)==null?void 0:$.map(J=>({attributeName:J.attributeName,label:J.label,priceMultiplier:J.priceMultiplier,priceAdd:J.priceAdd}))},V=Qf(q),M=((re=u.product)==null?void 0:re.additionalDesignCharge)||0,R=V.subtotalBeforeGst||V.rawBaseTotal+V.optionBreakdowns.reduce((J,z)=>J+z.cost,0),ae=V.subtotalAfterDiscount||V.subtotal||R,H=V.discountAmount||R-ae,D=ae+M,k=D*(((B=u.product)==null?void 0:B.gstPercentage)||18)/100,Q=u.totalPrice;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md hover:border-brand-300 transition-all duration-200 overflow-hidden group",children:[e.jsxs("div",{className:"p-6 flex flex-col md:flex-row md:items-center gap-6",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(dk,{subcategory:(ne=u.product)==null?void 0:ne.subcategory})}),e.jsxs("div",{className:"flex-1 min-w-0 self-start md:self-center",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-mono font-medium text-slate-500 bg-slate-100 px-2 py-0.5 rounded",children:u.orderNumber}),e.jsx("span",{className:"text-xs text-slate-400",children:n?new Date(u.createdAt).toLocaleDateString():"Loading..."})]}),((Z=u.product)==null?void 0:Z.subcategory)&&e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600 mb-0.5",children:typeof u.product.subcategory=="object"?u.product.subcategory.category?`${u.product.subcategory.category.name}  ${u.product.subcategory.name}`:u.product.subcategory.name:u.product.subcategory}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 truncate pr-4",children:((ue=u.product)==null?void 0:ue.name)||"Product"}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[u.quantity.toLocaleString()," units  ",u.finish]})]}),e.jsxs("div",{className:"flex flex-col md:items-end gap-2 md:w-64 pt-4 md:pt-0 border-t md:border-t-0 border-slate-100 mt-4 md:mt-0",children:[e.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 w-full",children:[e.jsx("span",{className:"text-lg font-bold text-slate-900",children:Or(u.totalPrice)}),e.jsx("div",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${p?"bg-green-50 text-green-700 border-green-200":g?"bg-orange-50 text-orange-700 border-orange-200":"bg-slate-100 text-slate-600 border-slate-200"}`,children:u.status.replace("_"," ").toUpperCase()})]}),h?e.jsxs("div",{className:"flex items-center justify-end text-red-600 text-sm font-medium gap-1.5 animate-pulse w-full",children:[e.jsx(xs,{className:"w-4 h-4"}),"Payment Required"]}):A?e.jsxs("div",{className:"w-full md:max-w-[200px] group/progress cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1.5",children:[e.jsx("span",{children:"Production Progress"}),e.jsxs("span",{className:"font-semibold text-slate-700",children:[E,"%"]})]}),e.jsx("div",{className:"h-2.5 bg-slate-100 rounded-full overflow-hidden relative group-hover/progress:bg-slate-200 transition-colors",children:e.jsx("div",{className:"h-full bg-green-400 group-hover/progress:bg-green-300 rounded-full transition-all duration-300 ease-out shadow-sm group-hover/progress:shadow-md",style:{width:`${Math.max(0,Math.min(100,E))}%`,minWidth:E>0?"4px":"0px"}})}),v>0?e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1.5",children:[w," of ",v," departments completed"]}):p?e.jsx("p",{className:"text-[10px] text-green-600 mt-1.5 font-medium",children:"Order completed"}):e.jsx("p",{className:"text-[10px] text-slate-400 mt-1.5",children:"Production starting..."})]}):e.jsx("div",{className:"w-full md:max-w-[200px]",children:e.jsx("p",{className:"text-xs text-slate-400",children:"Waiting for production to start"})})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsxs("button",{onClick:J=>m(u._id,J),className:"text-xs text-slate-500 hover:text-brand-600 font-medium px-3 py-1.5 rounded-md hover:bg-slate-50 transition-colors",children:[P?"Hide":"Show"," Breakdown"]}),e.jsx("div",{className:"text-slate-300 group-hover:text-brand-500 transition-colors",children:e.jsx($r,{className:"w-6 h-6"})})]})]}),P&&e.jsx("div",{className:"border-t border-slate-200 bg-slate-50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Vn,{size:18}),"Price Breakdown"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-slate-100",children:[e.jsx("div",{className:"text-slate-600",children:e.jsxs("span",{children:["Base Price (",u.quantity.toLocaleString()," "," ",Or(((ve=u.product)==null?void 0:ve.basePrice)||0),")"]})}),e.jsx("span",{className:"font-medium text-slate-900",children:Or(V.rawBaseTotal)})]}),V.optionBreakdowns.map((J,z)=>e.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[e.jsxs("span",{children:[J.name," ",J.isPerUnit?`(${u.quantity}  ${Or(J.priceAdd)})`:""]}),e.jsxs("span",{children:["+",Or(J.cost)]})]},z)),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (Before Discount)"}),e.jsx("span",{children:Or(R)})]}),V.discountPercentage>0&&H>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-600 bg-green-50 p-2 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold",children:["Bulk Discount (",V.discountPercentage,"%)"]}),e.jsxs("p",{className:"text-xs opacity-80",children:["Applied for ",u.quantity," units"]})]}),e.jsxs("span",{className:"font-bold",children:["-",Or(H)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (After Discount)"}),e.jsx("span",{children:Or(ae)})]}),M>0&&e.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[e.jsx("span",{children:"Additional Design Charge"}),e.jsxs("span",{children:["+",Or(M)]})]}),M>0&&e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (Including Design Charge)"}),e.jsx("span",{children:Or(D)})]}),e.jsxs("div",{className:"flex justify-between items-center text-slate-500 text-xs",children:[e.jsxs("span",{children:["GST (",((O=u.product)==null?void 0:O.gstPercentage)||18,"%)"]}),e.jsxs("span",{children:["+",Or(k)]})]}),u.advancePaid!==void 0&&u.advancePaid>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-slate-500",children:"Advance Paid"}),e.jsx("span",{className:"font-medium text-green-600",children:Or(u.advancePaid||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500",children:"Balance Due"}),e.jsx("span",{className:`font-bold ${u.totalPrice-(u.advancePaid||0)>0?"text-red-600":"text-slate-400"}`,children:Or(u.totalPrice-(u.advancePaid||0))})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t-2 border-slate-300",children:[e.jsx("span",{className:"text-lg font-bold text-slate-900",children:"Total Amount"}),e.jsx("span",{className:"text-xl font-bold text-brand-600",children:Or(Q)})]})]})]})}),e.jsx("div",{onClick:()=>r(u),className:"cursor-pointer",children:e.jsxs("div",{className:"px-6 pb-4 md:pb-6 flex items-center justify-between",children:[e.jsxs("button",{className:"text-sm text-brand-600 hover:text-brand-700 font-medium flex items-center gap-1",children:["View Full Details",e.jsx($r,{className:"w-4 h-4"})]}),e.jsx("div",{className:"md:hidden",children:e.jsxs("button",{onClick:J=>m(u._id,J),className:"text-xs text-slate-500 hover:text-brand-600 font-medium px-3 py-1.5 rounded-md hover:bg-slate-50 transition-colors",children:[P?"Hide":"Show"," Breakdown"]})})]})})]},u._id)})})},uk=()=>{var ge,yt,_t,ps,ys,at,Yt,Ms,rs,ea;const s=Ha(),r=tu(),[n,l]=y.useState(null),[d,m]=y.useState(!0),[u,p]=y.useState([]),[g,h]=y.useState(!1),[j,v]=y.useState("dashboard"),[w,E]=y.useState({}),[A,P]=y.useState(!1),[q,V]=y.useState(""),[M,R]=y.useState(null),[ae,H]=y.useState(null),[D,k]=y.useState(!1),[Q,W]=y.useState(!1),[te,ie]=y.useState({firstName:"",lastName:"",email:"",mobileNumber:"",countryCode:"+91"}),[X,Se]=y.useState(null),[$,re]=y.useState(null),[B,ne]=y.useState(!1),[Z,ue]=y.useState(!1),[ve,O]=y.useState(""),[J,z]=y.useState(""),[ye,xe]=y.useState(!1),[I,L]=y.useState(!1),[_,me]=y.useState(""),[fe,Me]=y.useState(""),[se,le]=y.useState(""),[Be,Qe]=y.useState(!1);y.useEffect(()=>{const He=localStorage.getItem("token"),mt=localStorage.getItem("user");if(!He||!mt){s("/login");return}try{const xt=JSON.parse(mt);l(xt),m(!1),xt.countryCode&&ot(xt.countryCode),tt(),ds()}catch(xt){console.error("Error parsing user data:",xt),s("/login")}},[s]);const tt=async()=>{var He;try{const mt=await fetch(`${we}/auth/profile`,{headers:Ct()});if(mt.ok){const xt=await mt.json();xt.success&&xt.user&&(console.log("Fetched user profile data:",xt.user),console.log("User type:",xt.user.userType),console.log("Profile data:",xt.user.profile),console.log("Approval status:",xt.user.approvalStatus),l(xt.user),localStorage.setItem("user",JSON.stringify(xt.user)),ie({firstName:xt.user.firstName||"",lastName:xt.user.lastName||"",email:xt.user.email||"",mobileNumber:((He=xt.user.mobileNumber)==null?void 0:He.replace(xt.user.countryCode||"",""))||"",countryCode:xt.user.countryCode||"+91"}),xt.user.countryCode?(Qe(!1),ot(xt.user.countryCode)):Qe(!0))}}catch(mt){console.error("Error fetching profile:",mt)}},ot=async He=>{var Ds,Vs;if(!He){Qe(!0);return}const mt={"+1":{name:"United States",code:"us"},"+91":{name:"India",code:"in"},"+44":{name:"United Kingdom",code:"gb"},"+55":{name:"Brazil",code:"br"},"+61":{name:"Australia",code:"au"},"+971":{name:"United Arab Emirates",code:"ae"},"+86":{name:"China",code:"cn"},"+81":{name:"Japan",code:"jp"},"+49":{name:"Germany",code:"de"},"+33":{name:"France",code:"fr"},"+7":{name:"Russia",code:"ru"},"+65":{name:"Singapore",code:"sg"},"+60":{name:"Malaysia",code:"my"},"+66":{name:"Thailand",code:"th"},"+82":{name:"South Korea",code:"kr"},"+39":{name:"Italy",code:"it"},"+34":{name:"Spain",code:"es"},"+31":{name:"Netherlands",code:"nl"},"+32":{name:"Belgium",code:"be"},"+41":{name:"Switzerland",code:"ch"},"+46":{name:"Sweden",code:"se"},"+47":{name:"Norway",code:"no"},"+45":{name:"Denmark",code:"dk"},"+358":{name:"Finland",code:"fi"},"+48":{name:"Poland",code:"pl"},"+351":{name:"Portugal",code:"pt"},"+30":{name:"Greece",code:"gr"},"+27":{name:"South Africa",code:"za"},"+20":{name:"Egypt",code:"eg"},"+52":{name:"Mexico",code:"mx"},"+54":{name:"Argentina",code:"ar"},"+56":{name:"Chile",code:"cl"},"+57":{name:"Colombia",code:"co"},"+51":{name:"Peru",code:"pe"},"+92":{name:"Pakistan",code:"pk"},"+880":{name:"Bangladesh",code:"bd"},"+94":{name:"Sri Lanka",code:"lk"},"+95":{name:"Myanmar",code:"mm"},"+84":{name:"Vietnam",code:"vn"},"+62":{name:"Indonesia",code:"id"},"+63":{name:"Philippines",code:"ph"},"+64":{name:"New Zealand",code:"nz"},"+246":{name:"British Indian Ocean Territory",code:"io"}};if(mt[He]){Me(mt[He].name),le(`https://flagcdn.com/w40/${mt[He].code}.png`),Qe(!0);return}const xt=new AbortController;try{const Ks=He.replace("+",""),Gs=await fetch(`https://restcountries.com/v3.1/callingcode/${Ks}`,{signal:xt.signal});if(!Gs.ok){Me(""),le(""),Qe(!0);return}const ha=await Gs.json();if(ha&&Array.isArray(ha)&&ha.length>0){const $a=ha[0];Me(((Ds=$a.name)==null?void 0:Ds.common)||"");const ir=((Vs=$a.cca2)==null?void 0:Vs.toLowerCase())||"";le(ir?`https://flagcdn.com/w40/${ir}.png`:""),Qe(!0);return}Me(""),le(""),Qe(!0)}catch(Ks){Ks.name==="AbortError"||Ks instanceof TypeError&&Ks.message.includes("fetch")?(Me(""),le(""),Qe(!0)):Ks.name!=="AbortError"&&(console.warn("Error fetching country name:",Ks),Me(""),le(""),Qe(!0));const Gs=mt[He];Gs&&(Me(Gs.name),le(`https://flagcdn.com/w40/${Gs.code}.png`),Qe(!0))}},Ve=(He,mt)=>{if(!He)return"";if(!mt)return He;const xt=mt.replace("+","");let Ds=He;return He.startsWith(mt)?Ds=He.replace(mt,""):He.startsWith(xt)&&(Ds=He.replace(xt,"")),`${mt} ${Ds}`};y.useEffect(()=>{n!=null&&n.countryCode?(Qe(!1),Me(""),le(""),ot(n.countryCode)):Qe(!0)},[n==null?void 0:n.countryCode]),y.useEffect(()=>{if(!n)return;const He=setInterval(()=>{ds()},15e3);return()=>clearInterval(He)},[n,u.length]);const Ct=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}),ds=async()=>{const He=u.length===0;He&&h(!0);try{if(!localStorage.getItem("token")){p([]);return}const xt=await fetch(`${we}/orders/my-orders?limit=50`,{method:"GET",headers:{...Ct(),"Content-Type":"application/json"}}),Ds=await xt.text();if(Ds.startsWith("<!DOCTYPE")||Ds.startsWith("<html")){console.warn("Server returned HTML instead of JSON"),p([]);return}if(!xt.ok)throw new Error("Failed to fetch orders");const Vs=JSON.parse(Ds),Ks=Array.isArray(Vs)?Vs:[],Gs={};Ks.forEach(ha=>{var ln,Li;const $a=((ln=ha.departmentStatuses)==null?void 0:ln.length)||0,ir=((Li=ha.departmentStatuses)==null?void 0:Li.filter(Qn=>(typeof Qn=="object"?Qn.status:null)==="completed").length)||0,mr=$a>0?ir/$a*100:0;w[ha._id]!==mr&&(Gs[ha._id]=mr)}),Object.keys(Gs).length>0&&E(ha=>({...ha,...Gs})),p(Ks)}catch(mt){console.error("Error fetching orders:",mt),He&&p([])}finally{He&&h(!1)}},At=He=>{s(`/order/${He._id}`),window.scrollTo(0,0)},as=He=>He?He.split(" ").map(mt=>mt[0]).join("").toUpperCase().slice(0,2):"U",hs=He=>{const mt=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-orange-500","bg-teal-500"];if(!He)return mt[0];const xt=He.length%mt.length;return mt[xt]},Vt=He=>He.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(He.trim())?He.trim()===(n==null?void 0:n.email)?"New email must be different from current email":He.trim().length>254?"Email is too long (maximum 254 characters)":He.includes("..")?"Email cannot contain consecutive dots":He.startsWith(".")||He.endsWith(".")?"Email cannot start or end with a dot":He.includes("@.")||He.includes(".@")?"Invalid email format":null:"Invalid email format. Please enter a valid email address (e.g., user@example.com)":"Email is required",Bs=async()=>{if(!te.firstName||!te.lastName){Se("First name and last name are required.");return}if(te.email&&Vt(te.email)){Se(Vt(te.email));return}ne(!0),Se(null),re(null);try{const He=await fetch(`${we}/auth/profile`,{method:"PUT",headers:{"Content-Type":"application/json",...Ct()},body:JSON.stringify({firstName:te.firstName.trim(),lastName:te.lastName.trim(),email:te.email.trim()||void 0})}),mt=await He.json();if(!He.ok)throw new Error(mt.message||mt.error||"Failed to update profile");re("Profile updated successfully!");const xt={...n,firstName:mt.user.firstName,lastName:mt.user.lastName,name:mt.user.name,email:mt.user.email,countryCode:mt.user.countryCode};l(xt),localStorage.setItem("user",JSON.stringify(xt)),mt.user.countryCode?ot(mt.user.countryCode):xt.countryCode&&ot(xt.countryCode),setTimeout(()=>{W(!1),re(null)},2e3)}catch(He){Se(He instanceof Error?He.message:"Failed to update profile")}finally{ne(!1)}},Ss=async()=>{const He=Vt(q);if(He){R(He);return}k(!0),R(null),H(null);try{const mt=await fetch(`${we}/auth/update-email`,{method:"PUT",headers:{"Content-Type":"application/json",...Ct()},body:JSON.stringify({email:q.trim()})}),xt=await mt.json();if(!mt.ok)throw new Error(xt.message||xt.error||"Failed to update email");H("Email updated successfully!");const Ds={...n,email:xt.user.email};l(Ds),localStorage.setItem("user",JSON.stringify(Ds)),setTimeout(()=>{P(!1),V(""),H(null)},2e3)}catch(mt){R(mt instanceof Error?mt.message:"Failed to update email")}finally{k(!1)}};if(d)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading profile..."})]})});if(!n)return null;const wa=()=>{switch(j){case"dashboard":return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Hello, ",(n.name||"User").split(" ")[0],"."]}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Here's what's going on in your account."})]}),e.jsxs("button",{onClick:()=>v("orders"),className:"flex items-center justify-center gap-2 bg-white border border-slate-300 text-slate-700 font-medium px-5 py-2.5 rounded-lg hover:bg-slate-50 hover:border-slate-400 transition-all shadow-sm",children:[e.jsx(Rr,{className:"w-4 h-4"}),"View All Orders"]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Account snapshot"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{onClick:()=>v("orders"),className:"bg-slate-100 rounded-xl p-6 min-h-[140px] flex flex-col justify-between hover:bg-slate-200 transition-colors cursor-pointer border border-transparent hover:border-slate-300 group",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 group-hover:text-slate-900",children:"Orders"}),e.jsx("span",{className:"text-4xl font-bold text-slate-900",children:u.length})]}),e.jsxs("div",{className:"bg-slate-100 rounded-xl p-6 min-h-[140px] flex flex-col justify-between hover:bg-slate-200 transition-colors cursor-pointer border border-transparent hover:border-slate-300 group",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 group-hover:text-slate-900",children:"Account Status"}),e.jsxs("span",{className:"text-lg font-bold text-green-600 group-hover:text-green-700 flex items-center gap-1",children:["Active ",e.jsx(va,{className:"w-5 h-5"})]})]})]}),(()=>{const mt=u.filter(xt=>xt.deliveredAt&&xt.status==="completed").sort((xt,Ds)=>new Date(Ds.deliveredAt||0).getTime()-new Date(xt.deliveredAt||0).getTime())[0];return mt&&mt.deliveredAt?e.jsxs("div",{className:"mt-6 bg-green-50 rounded-xl p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Yl,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Latest Delivery"})]}),e.jsxs("p",{className:"text-sm text-slate-600 mb-1",children:["Order: ",e.jsx("span",{className:"font-mono font-medium",children:mt.orderNumber})]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Arrived on:"," ",e.jsx("span",{className:"font-semibold text-green-700",children:new Date(mt.deliveredAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})})]})]}):null})()]}),(()=>{var xt,Ds;const mt=u.filter(Vs=>Vs.deliveredAt&&Vs.status==="completed").sort((Vs,Ks)=>new Date(Ks.deliveredAt||0).getTime()-new Date(Vs.deliveredAt||0).getTime())[0];return mt?e.jsxs("div",{className:"bg-linear-to-br from-green-50 to-emerald-50 rounded-xl border border-green-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(Yl,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Latest Delivery"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Your most recent order delivery"})]})]}),e.jsxs("div",{onClick:()=>At(mt),className:"bg-white rounded-lg p-4 border border-green-200 hover:border-green-300 cursor-pointer transition-all group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[((xt=mt.product)==null?void 0:xt.image)&&e.jsx("img",{src:mt.product.image,alt:mt.product.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900",children:((Ds=mt.product)==null?void 0:Ds.name)||"Product"}),e.jsx("p",{className:"text-xs text-slate-500",children:mt.orderNumber})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Delivered on"}),e.jsx("p",{className:"font-semibold text-green-700",children:new Date(mt.deliveredAt||"").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-green-100",children:[e.jsxs("span",{className:"text-sm text-slate-600",children:[mt.quantity.toLocaleString()," units"]}),e.jsx("span",{className:"text-sm font-bold text-slate-900",children:Or(mt.totalPrice)})]})]})]}):null})(),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Recent Orders"}),e.jsx("button",{onClick:()=>v("orders"),className:"text-sm font-semibold text-slate-900 underline hover:text-brand-600",children:"View all"})]}),g&&u.length===0?e.jsx("div",{className:"space-y-4",children:[1,2].map(He=>e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"}),e.jsx("div",{className:"h-5 bg-slate-200 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]}),e.jsxs("div",{className:"w-32 space-y-2",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded"}),e.jsx("div",{className:"h-2 bg-slate-200 rounded"})]})]})},He))}):u.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(ia,{size:48,className:"mx-auto mb-4 opacity-50 text-slate-400"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"You haven't placed any orders yet."}),e.jsx(Ps,{to:"/digital-print",className:"inline-block bg-brand-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-brand-700 transition-colors",children:"Browse Products"})]}):e.jsx(Gj,{orders:u.slice(0,2),onSelectOrder:At})]})]});case"orders":return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Order History"}),e.jsx("button",{onClick:()=>v("dashboard"),className:"text-sm font-semibold text-slate-600 hover:text-brand-600",children:" Back to Dashboard"})]}),g&&u.length===0?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(He=>e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"}),e.jsx("div",{className:"h-5 bg-slate-200 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]}),e.jsxs("div",{className:"w-32 space-y-2",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded"}),e.jsx("div",{className:"h-2 bg-slate-200 rounded"})]})]})},He))}):u.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(ia,{size:48,className:"mx-auto mb-4 opacity-50 text-slate-400"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"You haven't placed any orders yet."}),e.jsx(Ps,{to:"/digital-print",className:"inline-block bg-brand-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-brand-700 transition-colors",children:"Browse Products"})]}):e.jsx(Gj,{orders:u,onSelectOrder:At})]});default:return null}};return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[e.jsx(st.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:200},className:`w-24 h-24 sm:w-28 sm:h-28 rounded-full ${hs(n.name)} flex items-center justify-center text-white text-3xl sm:text-4xl font-bold shadow-lg ring-4 ring-white`,children:as(n.name)}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap justify-center sm:justify-start",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:n.name}),(n.userType==="print partner"||n.userType==="Print Partner")&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 border border-blue-200",children:"Print Partner"}),n.userType==="corporate"&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800 border border-purple-200",children:"Corporate"}),n.approvalStatus&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${n.approvalStatus==="approved"?"bg-green-50 text-green-700 border border-green-200":n.approvalStatus==="rejected"?"bg-red-50 text-red-700 border border-red-200":"bg-yellow-50 text-yellow-700 border border-yellow-200"}`,children:n.approvalStatus==="approved"?" Verified":n.approvalStatus==="rejected"?"Rejected":"Pending Verification"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[e.jsx(Ql,{size:16,className:"text-slate-400 shrink-0 mt-1 sm:mt-0"}),A?e.jsxs("div",{className:"flex-1 w-full flex flex-col sm:flex-row items-stretch sm:items-center gap-2 min-w-0",children:[e.jsx("input",{type:"email",value:q,onChange:He=>{const mt=He.target.value;if(V(mt),H(null),mt.trim()&&mt.trim()!==(n==null?void 0:n.email)){const xt=Vt(mt);R(xt)}else R(null)},onBlur:He=>{const mt=He.target.value;if(mt.trim()){const xt=Vt(mt);R(xt)}else R(null)},onKeyDown:He=>{if(He.key==="Enter"){He.preventDefault();const mt=Vt(q);mt?R(mt):Ss()}else He.key==="Escape"&&(P(!1),V(""),R(null),H(null))},className:`flex-1 w-full sm:min-w-[200px] px-3 py-1.5 border rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm transition-colors ${M?"border-red-300 bg-red-50 focus:ring-red-500 focus:border-red-500":q.trim()&&q.trim()!==(n==null?void 0:n.email)&&!Vt(q)?"border-green-300 bg-green-50":"border-slate-300"}`,placeholder:"Enter new email",autoFocus:!0}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0 w-full sm:w-auto",children:[e.jsx("button",{type:"button",onClick:()=>{const He=Vt(q);He?R(He):Ss()},disabled:D||!q.trim()||!!Vt(q),className:"flex-1 sm:flex-initial px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1.5 text-sm whitespace-nowrap",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:14}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(va,{size:14}),"Save"]})}),e.jsxs("button",{type:"button",onClick:()=>{P(!1),V(""),R(null),H(null)},disabled:D,className:"flex-1 sm:flex-initial px-3 py-1.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 flex items-center justify-center gap-1.5 text-sm whitespace-nowrap",children:[e.jsx(ss,{size:14}),"Cancel"]})]})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-slate-600",children:n.email})})]}),A&&e.jsxs("div",{className:"ml-7 mt-1 space-y-1",children:[M&&e.jsxs("p",{className:"text-xs text-red-600 flex items-start gap-1.5",children:[e.jsx(xs,{size:12,className:"mt-0.5 shrink-0"}),e.jsx("span",{children:M})]}),ae&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1.5",children:[e.jsx(va,{size:12}),ae]}),!M&&!ae&&q.trim()&&q.trim()!==(n==null?void 0:n.email)&&!Vt(q)&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1.5",children:[e.jsx(va,{size:12}),"Email is valid. Press Enter to save or Escape to cancel."]}),!M&&!ae&&!q.trim()&&e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1.5",children:[e.jsx(_r,{size:12}),"Enter a new email address"]})]})]}),(n.firstName||n.lastName||n.mobileNumber)&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Customer Details"}),!Q&&e.jsx("button",{type:"button",onClick:()=>{var He;W(!0),ie({firstName:n.firstName||"",lastName:n.lastName||"",email:n.email||"",mobileNumber:((He=n.mobileNumber)==null?void 0:He.replace(n.countryCode||"",""))||"",countryCode:n.countryCode||"+91"}),Se(null),re(null)},className:"p-1.5 text-slate-400 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors shrink-0",title:"Edit profile",children:e.jsx(zn,{size:14})})]}),Q?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:te.firstName,onChange:He=>ie({...te,firstName:He.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm",placeholder:"Enter first name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:te.lastName,onChange:He=>ie({...te,lastName:He.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm",placeholder:"Enter last name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:te.email,onChange:He=>ie({...te,email:He.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm",placeholder:"Enter email"})]}),n.mobileNumber&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Mobile Number (Cannot be changed)"}),e.jsx("input",{type:"text",value:Ve(n.mobileNumber,n.countryCode),disabled:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-100 text-slate-500 text-sm cursor-not-allowed"})]}),X&&e.jsxs("p",{className:"text-xs text-red-600 flex items-start gap-1.5",children:[e.jsx(xs,{size:12,className:"mt-0.5 shrink-0"}),e.jsx("span",{children:X})]}),$&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1.5",children:[e.jsx(va,{size:12}),$]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:Bs,disabled:B,className:"flex-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1.5 text-sm",children:B?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:14}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(va,{size:14}),"Save Changes"]})}),e.jsx("button",{type:"button",onClick:()=>{W(!1),Se(null),re(null)},disabled:B,className:"px-3 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-3",children:[n.firstName&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(In,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"First Name:"})," ",n.firstName]})]}),n.lastName&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(In,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Last Name:"})," ",n.lastName]})]}),n.mobileNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(fc,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Mobile:"})," ",Ve(n.mobileNumber,n.countryCode)]})]}),n.countryCode&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[se?e.jsx("img",{src:se,alt:fe||"Country flag",className:"w-6 h-4 object-cover rounded shrink-0",onError:He=>{const mt=He.target;mt.style.display="none"}}):e.jsx(sn,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Country:"})," ",Be?fe||n.countryCode||"Unknown":"Loading..."]})]})]})]}),(n.userType==="print partner"||n.userType==="Print Partner")&&n.profile&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Print Partner Details"}),n.profile.verificationStatus&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${n.profile.verificationStatus==="APPROVED"?"bg-green-100 text-green-800":n.profile.verificationStatus==="REJECTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:n.profile.verificationStatus})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Fn,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Business Name:"})," ",n.profile.businessName||"Not provided"]})]}),n.profile.ownerName&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(In,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Owner Name:"})," ",n.profile.ownerName]})]}),n.profile.gstNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(wr,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"GST Number:"})," ",n.profile.gstNumber]})]}),n.profile.address&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(sn,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",[(ge=n.profile.address)==null?void 0:ge.fullAddress,(yt=n.profile.address)==null?void 0:yt.city,(_t=n.profile.address)==null?void 0:_t.state,(ps=n.profile.address)==null?void 0:ps.pincode].filter(Boolean).join(", ")||"Not provided"]})]}),n.profile.whatsappNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(fc,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"WhatsApp:"})," ",n.profile.whatsappNumber]})]}),n.profile.proofDocument&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(Pi,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-slate-600",children:e.jsx("span",{className:"font-medium",children:"Proof Document:"})}),e.jsxs("a",{href:n.profile.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm flex items-center gap-1",children:[e.jsx(zr,{size:14}),"View Proof Document"]})]})]})]})]}),n.userType==="corporate"&&n.profile&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Corporate Details"}),n.profile.verificationStatus&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${n.profile.verificationStatus==="APPROVED"?"bg-green-100 text-green-800":n.profile.verificationStatus==="REJECTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:n.profile.verificationStatus})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Fn,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Organization:"})," ",n.profile.organizationName||"Not provided"]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(wr,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",((ys=n.profile.organizationType)==null?void 0:ys.replace(/_/g," "))||"Not provided"]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(In,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Authorized Person:"})," ",n.profile.authorizedPersonName||"Not provided",n.profile.designation&&e.jsxs("span",{className:"text-slate-500",children:[" (",(at=n.profile.designation)==null?void 0:at.replace(/_/g," "),")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(wr,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"GST Number:"})," ",n.profile.gstNumber||"Not provided"]})]}),n.profile.address&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(sn,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",[(Yt=n.profile.address)==null?void 0:Yt.fullAddress,(Ms=n.profile.address)==null?void 0:Ms.city,(rs=n.profile.address)==null?void 0:rs.state,(ea=n.profile.address)==null?void 0:ea.pincode].filter(Boolean).join(", ")||"Not provided"]})]}),n.profile.whatsappNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(fc,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"WhatsApp:"})," ",n.profile.whatsappNumber]})]}),n.profile.proofDocument&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(Pi,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-slate-600",children:e.jsx("span",{className:"font-medium",children:"Proof Document:"})}),e.jsxs("a",{href:n.profile.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm flex items-center gap-1",children:[e.jsx(zr,{size:14}),"View Proof Document"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Co,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-slate-600 capitalize",children:n.role})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(So,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:["Member since"," ",r?new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}):"Loading..."]})]})]})]})]})}),wa()]})})},Qj=({status:s})=>{const n={request:{color:"text-yellow-800",bg:"bg-yellow-100",icon:e.jsx(tn,{className:"w-3 h-3"})},processing:{color:"text-blue-800",bg:"bg-blue-100",icon:e.jsx(ia,{className:"w-3 h-3"})},completed:{color:"text-green-800",bg:"bg-green-100",icon:e.jsx(ui,{className:"w-3 h-3"})},cancelled:{color:"text-red-800",bg:"bg-red-100",icon:e.jsx(ss,{className:"w-3 h-3"})},rejected:{color:"text-red-800",bg:"bg-red-100",icon:e.jsx(ss,{className:"w-3 h-3"})}}[s]||{color:"text-gray-800",bg:"bg-gray-100"};return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold ${n.color} ${n.bg} uppercase tracking-wide`,children:[n.icon,s.replace("_"," ")]})},mk=({event:s,isLast:r,isActive:n})=>{const l=s.status==="completed";return s.status,e.jsxs("div",{className:`flex-1 relative ${r?"":"mb-8 md:mb-0"}`,children:[!r&&e.jsx("div",{className:`absolute left-3.5 top-8 w-0.5 h-[calc(100%-2rem)] md:w-[calc(100%-2rem)] md:h-0.5 md:left-8 md:top-3.5 ${l?"bg-green-400":"bg-gray-200"}`}),e.jsxs("div",{className:"flex md:flex-col items-center gap-4 md:gap-3",children:[e.jsx("div",{className:`relative z-10 w-8 h-8 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${l?"bg-green-500 border-green-500 text-white shadow-lg shadow-green-200":n?"bg-white border-blue-500 text-blue-500 shadow-lg shadow-blue-200 animate-pulse":"bg-white border-gray-300 text-gray-300"}`,children:l?e.jsx(ui,{className:"w-4 h-4"}):n?e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}):e.jsx(r5,{className:"w-4 h-4"})}),e.jsxs("div",{className:"md:text-center",children:[e.jsx("p",{className:`text-sm font-semibold ${n?"text-blue-600":l?"text-gray-900":"text-gray-400"}`,children:s.stage}),s.timestamp&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(s.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),n&&e.jsx("span",{className:"inline-block mt-1 text-[10px] uppercase tracking-wider font-bold text-blue-600",children:"In Progress"})]})]})]})},hk=({order:s})=>s.product?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ia,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Product Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configuration and specifications"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-xl border border-blue-100 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(mf,{className:"w-4 h-4 text-blue-600"}),e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-semibold",children:"Product"})]}),e.jsx("p",{className:"text-gray-900 font-bold text-lg",children:s.product.name})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white rounded-xl border border-green-100 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(wr,{className:"w-4 h-4 text-green-600"}),e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-semibold",children:"Shape"})]}),e.jsx("p",{className:"text-gray-900 font-bold text-lg",children:s.shape})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white rounded-xl border border-purple-100 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(uf,{className:"w-4 h-4 text-purple-600"}),e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-semibold",children:"Finish"})]}),e.jsx("p",{className:"text-gray-900 font-bold text-lg",children:s.finish})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-base font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(_r,{className:"w-4 h-4 text-blue-600"}),"Selected Attributes"]}),s.selectedDynamicAttributes&&s.selectedDynamicAttributes.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.selectedDynamicAttributes.map((r,n)=>e.jsx("div",{className:"group relative bg-gradient-to-br from-gray-50 to-white rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition-all duration-300 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-bold mb-1",children:r.attributeName}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:r.label}),r.description&&e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:r.description})]}),(r.priceAdd>0||r.priceMultiplier)&&e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:["+",Aa(r.priceAdd),e.jsx("span",{className:"text-xs text-gray-500 font-normal ml-1",children:"/unit"})]})})]})},n))}):e.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[e.jsx(_r,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No attributes configured"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-base font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ui,{className:"w-4 h-4 text-green-600"}),"Additional Options"]}),s.selectedOptions&&s.selectedOptions.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.selectedOptions.map((r,n)=>{const l=r.optionName||r.name||"Option";return e.jsx("div",{className:"group relative bg-white rounded-xl border border-gray-200 hover:border-green-300 hover:shadow-md transition-all duration-300 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 text-green-600 flex items-center justify-center",children:e.jsx(Va,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:l}),r.description&&e.jsx("p",{className:"text-xs text-gray-600",children:r.description})]})]}),r.priceAdd>0&&e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["+",Aa(r.priceAdd)]})]})},n)})}):e.jsx("div",{className:"text-sm text-gray-500 italic p-4 bg-gray-50 rounded-lg border border-dashed border-gray-200 text-center",children:"No additional options configured"})]})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(ia,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Product Configuration"})]}),e.jsx("p",{className:"text-gray-600",children:"Product information not available."})]}),pk=({order:s})=>{var h,j,v,w,E,A,P,q,V;if(!s.product)return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Price Breakdown"}),e.jsx("p",{className:"text-gray-600",children:"Product information not available."})]});const r=!!s.priceSnapshot;let n,l,d,m,u,p,g=[];if(r&&s.priceSnapshot)n=s.priceSnapshot.unitPrice,l=s.priceSnapshot.quantity,d=s.priceSnapshot.subtotal,m=s.priceSnapshot.gstPercentage,u=s.priceSnapshot.gstAmount,p=s.priceSnapshot.totalPayable,g=s.priceSnapshot.appliedModifiers||[];else{const M={quantity:s.quantity,product:{basePrice:((h=s.product)==null?void 0:h.basePrice)||0,gstPercentage:((j=s.product)==null?void 0:j.gstPercentage)||18,options:((v=s.product)==null?void 0:v.options)||[],filters:((w=s.product)==null?void 0:w.filters)||{},quantityDiscounts:((E=s.product)==null?void 0:E.quantityDiscounts)||[]},finish:s.finish,shape:s.shape,selectedOptions:(s.selectedOptions||[]).map(Q=>({name:Q.optionName||Q.name,optionName:Q.optionName||Q.name,priceAdd:Q.priceAdd||0})),selectedDynamicAttributes:(A=s.selectedDynamicAttributes)==null?void 0:A.map(Q=>({attributeName:Q.attributeName,label:Q.label,priceMultiplier:Q.priceMultiplier,priceAdd:Q.priceAdd}))},R=Qf(M),ae=((P=s.product)==null?void 0:P.additionalDesignCharge)||0,H=R.subtotalBeforeGst||R.rawBaseTotal+R.optionBreakdowns.reduce((Q,W)=>Q+W.cost,0),k=(R.subtotalAfterDiscount||R.subtotal||H)+ae;n=((q=s.product)==null?void 0:q.basePrice)||0,l=s.quantity,d=k,m=((V=s.product)==null?void 0:V.gstPercentage)||18,u=k*m/100,p=k+u}return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(mf,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Price Breakdown"}),e.jsx("p",{className:"text-sm text-gray-600",children:r?"Dynamic pricing applied":"Detailed cost calculation"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Quantity"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[l.toLocaleString()," units"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Unit Price"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:Aa(n)})]})]})}),g.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-200",children:[e.jsxs("p",{className:"text-xs font-semibold text-purple-900 mb-2 flex items-center gap-1",children:[e.jsx(w3,{className:"w-3 h-3"}),"Applied Price Adjustments"]}),g.map((M,R)=>e.jsxs("div",{className:"flex justify-between items-center text-xs py-1.5 px-2 bg-white/50 rounded mb-1",children:[e.jsx("span",{className:"text-purple-700 font-medium",children:M.source}),e.jsx("span",{className:"text-purple-900 font-bold",children:M.modifierType==="FIXED"?Aa(M.value):`${M.value}%`})]},R))]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"font-semibold text-gray-900",children:Aa(d)})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-gray-200",children:[e.jsxs("span",{className:"text-gray-600",children:["GST (",m,"%)"]}),e.jsxs("span",{className:"text-purple-600 font-semibold",children:["+",Aa(u)]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Includes all taxes"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Aa(p)})]})}),s.paymentStatus==="PENDING"&&e.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vo,{className:"w-4 h-4 text-orange-600"}),e.jsx("p",{className:"text-sm font-medium text-orange-700",children:"Payment Required"})]})}),s.paymentStatus==="COMPLETED"&&s.payment_details&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ui,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"text-sm font-bold text-green-700",children:"Payment Completed"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-green-700",children:[s.payment_details.gateway_used&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Gateway:"})," ",s.payment_details.gateway_used]}),s.payment_details.payment_method&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Method:"})," ",s.payment_details.payment_method]}),s.payment_details.captured_at&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Paid on:"})," ",new Date(s.payment_details.captured_at).toLocaleString()]})]})]})]})]})},xk=({order:s})=>{var n,l,d;const r=[];return(n=s.uploadedDesign)!=null&&n.frontImage&&r.push({type:"front",fileName:s.uploadedDesign.frontImage.filename||"front-design.png",uploadedAt:s.createdAt,sizeMb:0,data:s.uploadedDesign.frontImage.data}),(l=s.uploadedDesign)!=null&&l.backImage&&r.push({type:"back",fileName:s.uploadedDesign.backImage.filename||"back-design.png",uploadedAt:s.createdAt,sizeMb:0,data:s.uploadedDesign.backImage.data}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(gx,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Design Files"}),e.jsx("p",{className:"text-sm text-gray-600",children:"CMYK format required"})]}),e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full font-medium",children:["Max ",((d=s.product)==null?void 0:d.maxFileSizeMB)||10,"MB"]})]})}),e.jsx("div",{className:"p-6",children:r.length>0?e.jsx("div",{className:"space-y-4",children:r.map((m,u)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gradient-to-r from-gray-50 to-white hover:border-purple-300 transition-colors group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-purple-600 border border-gray-200 group-hover:border-purple-300 transition-colors",children:e.jsx(wr,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:m.fileName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),m.type.toUpperCase()]}),e.jsx("span",{className:"text-xs text-gray-500",children:"CMYK"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.uploadedAt).toLocaleDateString()})]})]})]}),m.data&&e.jsx("a",{href:m.data,download:m.fileName,className:"p-2 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Download",children:e.jsx(ki,{className:"w-4 h-4"})})]}),m.data&&e.jsx("div",{className:"mt-3 border border-gray-200 rounded-lg overflow-hidden bg-white",children:e.jsx("img",{src:m.data,alt:`${m.type} design`,className:"w-full h-40 object-contain",onError:p=>{p.currentTarget.style.display="none"}})})]},u))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(gx,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 mb-2",children:"No design files uploaded"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Upload your CMYK design files to proceed"})]})})]})},fk=({status:s})=>{const r=s.status==="completed",n=s.status==="in_progress",l=d=>d.includes("Prepress")?e.jsx(gx,{className:"w-4 h-4"}):d.includes("Print")?e.jsx(Uv,{className:"w-4 h-4"}):d.includes("Cut")?e.jsx(u3,{className:"w-4 h-4"}):d.includes("Plate")?e.jsx(uf,{className:"w-4 h-4"}):e.jsx(zv,{className:"w-4 h-4"});return e.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl border transition-all duration-300 ${r?"bg-gradient-to-r from-green-50 to-white border-green-200":n?"bg-gradient-to-r from-blue-50 to-white border-blue-300 shadow-sm":"bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${r?"bg-green-100 text-green-600":n?"bg-blue-100 text-blue-600 animate-pulse":"bg-gray-100 text-gray-400"}`,children:l(s.departmentName)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-semibold truncate ${r?"text-green-800":n?"text-blue-800":"text-gray-500"}`,children:s.departmentName}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.completedAt?`Completed at ${new Date(s.completedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:s.startedAt?`Started at ${new Date(s.startedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:"Pending"})]}),n&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-ping"})]})},Yj=()=>{var A,P,q,V,M,R;const{orderId:s}=rf(),r=Ha(),[n,l]=y.useState(null),[d,m]=y.useState(!0),[u,p]=y.useState(null);y.useEffect(()=>{(async()=>{if(!s){p("Order ID is required"),m(!1);return}try{const H=localStorage.getItem("token");if(!H){r("/login");return}const D=await fetch(`${we}/orders/${s}`,{headers:{Authorization:`Bearer ${H}`,"Content-Type":"application/json"}});if(!D.ok)throw new Error("Failed to fetch order details");const k=await D.json();l(k)}catch(H){p(H instanceof Error?H.message:"Failed to load order details")}finally{m(!1)}})()},[s,r]);const g=()=>{var ie,X,Se,$;if(!n)return[];const ae=()=>{var B;const re=(B=n.departmentStatuses)==null?void 0:B.find(ne=>{const Z=typeof ne=="object"?ne.status:null;return Z==="in_progress"||Z==="completed"});return typeof re=="object"?re.startedAt:void 0},H=()=>{var ne;const re=(ne=n.departmentStatuses)==null?void 0:ne.filter(Z=>(typeof Z=="object"?Z.status:null)==="completed");if(!re||re.length===0)return;const B=re.reduce((Z,ue)=>{const ve=typeof ue=="object"?ue:null,O=typeof Z=="object"?Z:null;return ve!=null&&ve.completedAt?O!=null&&O.completedAt?new Date(ve.completedAt)>new Date(O.completedAt)?ue:Z:ue:Z});return typeof B=="object"?B.completedAt:void 0},D=[{stage:"Order Placed",status:"completed",timestamp:n.createdAt,startedAt:n.createdAt,completedAt:n.createdAt}],k=(ie=n.uploadedDesign)!=null&&ie.frontImage||(X=n.uploadedDesign)!=null&&X.backImage?n.createdAt:void 0;if(k?D.push({stage:"Design & File Prep",status:"completed",timestamp:k,startedAt:n.createdAt,completedAt:k}):D.push({stage:"Design & File Prep",status:"pending"}),(Se=n.departmentStatuses)==null?void 0:Se.some(re=>{const B=typeof re=="object"?re.status:null;return B==="in_progress"||B==="completed"})){const re=($=n.departmentStatuses)==null?void 0:$.every(B=>(typeof B=="object"?B.status:null)==="completed");D.push({stage:"Production",status:re?"completed":"in_progress",timestamp:ae(),startedAt:ae(),completedAt:re?H():void 0})}else D.push({stage:"Production",status:"pending"});const W=n.packedAt||(n.status==="completed"?n.updatedAt:void 0);W?D.push({stage:"Packing",status:"completed",timestamp:W,startedAt:n.movedToPackingAt||W,completedAt:W}):D.push({stage:"Packing",status:"pending"});const te=n.dispatchedAt||n.handedOverToCourierAt;return n.courierPartner||n.trackingId||te?D.push({stage:"Courier",status:"completed",timestamp:te||n.updatedAt,startedAt:te||n.handedOverToCourierAt||n.updatedAt,completedAt:n.deliveredAt||void 0}):D.push({stage:"Courier",status:"pending"}),D},h=()=>n!=null&&n.departmentStatuses?n.departmentStatuses.map(ae=>{const H=typeof ae.department=="object"?ae.department:null,D=typeof ae=="object"?ae.status:"pending";return{departmentName:(H==null?void 0:H.name)||"Unknown",status:D,startedAt:typeof ae=="object"&&ae.startedAt||void 0,completedAt:typeof ae=="object"&&ae.completedAt||void 0}}).sort((ae,H)=>{var te,ie;const D=(te=n.departmentStatuses)==null?void 0:te.find(X=>{const Se=typeof X.department=="object"?X.department:null;return(Se==null?void 0:Se.name)===ae.departmentName}),k=(ie=n.departmentStatuses)==null?void 0:ie.find(X=>{const Se=typeof X.department=="object"?X.department:null;return(Se==null?void 0:Se.name)===H.departmentName}),Q=typeof(D==null?void 0:D.department)=="object"?D.department.sequence:0,W=typeof(k==null?void 0:k.department)=="object"?k.department.sequence:0;return Q-W}):[];if(d)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-100 rounded-full"}),e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin absolute top-0 left-0"})]}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading order details..."}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please wait a moment"})]})});if(u||!n)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-8",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(vo,{className:"w-10 h-10 text-red-500"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Order Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:u||"The order you are looking for does not exist."}),e.jsx("button",{onClick:()=>r("/profile"),className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-lg",children:"Back to Orders"})]})});if(!n.product)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-8",children:[e.jsx(vo,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Product Information Missing"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This order is missing product details. Please contact support."}),e.jsx("button",{onClick:()=>r("/profile"),className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Profile"})]})});const j=n.paymentStatus!=="COMPLETED",v=g(),w=h(),E=typeof n.product.subcategory=="object"&&n.product.subcategory!==null?n.product.subcategory.name||"N/A":typeof n.product.subcategory=="string"?n.product.subcategory:"N/A";return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden mb-8",children:e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6 md:items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(T5,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Order Number"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n.orderNumber})]})]}),e.jsx(Qj,{status:n.status})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(So,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Order Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(n.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ia,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Quantity"}),e.jsxs("p",{className:"font-bold text-gray-900 text-lg",children:[n.quantity.toLocaleString()," units"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tn,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Delivery"}),e.jsx("p",{className:"font-medium text-gray-900",children:n.deliveryDate?new Date(n.deliveryDate).toLocaleDateString():"Not scheduled"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-white rounded-xl border border-blue-200 flex items-center justify-center",children:e.jsx(ia,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:n.product.name}),e.jsx("p",{className:"text-gray-600",children:E})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[n.paymentStatus==="COMPLETED"&&e.jsxs("button",{onClick:()=>{window.open(`${we}/orders/${n._id}/invoice`,"_blank")},className:"flex items-center justify-center gap-2 px-5 py-2.5 bg-white border border-gray-300 hover:border-blue-500 text-gray-700 hover:text-blue-600 rounded-lg font-medium transition-colors",children:[e.jsx(ki,{className:"w-4 h-4"}),"Download Invoice"]}),e.jsxs("button",{className:"flex items-center justify-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg font-medium transition-all shadow-lg",children:[e.jsx(fx,{className:"w-4 h-4"}),"Contact Support"]})]})]})})}),j&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 via-amber-50 to-orange-50 border-2 border-orange-300 rounded-2xl shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 px-6 py-5",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/30 rounded-full flex items-center justify-center animate-pulse",children:e.jsx(Vn,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Payment Required"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Complete payment to start production"})]})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-6 py-3 border border-white/30",children:[e.jsx("p",{className:"text-xs text-orange-100 font-medium uppercase tracking-wide",children:"Amount Due"}),e.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:Aa(((A=n.priceSnapshot)==null?void 0:A.totalPayable)||n.totalPrice-(n.advancePaid||0))})]})]})}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"grid md:grid-cols-5 gap-6 items-center",children:[e.jsxs("div",{className:"md:col-span-3 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white/60 rounded-lg border border-orange-100",children:[e.jsx(vo,{className:"w-5 h-5 text-orange-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-gray-700 text-sm",children:["Your order has been created but ",e.jsx("span",{className:"font-bold",children:"production will not start"})," until payment is confirmed."]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(mf,{className:"w-4 h-4"}),"Price Breakdown"]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:Aa(((P=n.priceSnapshot)==null?void 0:P.subtotal)||n.totalPrice/1.18)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["GST (",((q=n.priceSnapshot)==null?void 0:q.gstPercentage)||18,"%):"]}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["+",Aa(((V=n.priceSnapshot)==null?void 0:V.gstAmount)||n.totalPrice-n.totalPrice/1.18)]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-2.5",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total Amount:"}),e.jsx("span",{className:"text-xl font-bold text-blue-600",children:Aa(((M=n.priceSnapshot)==null?void 0:M.totalPayable)||n.totalPrice)})]})}),n.advancePaid&&n.advancePaid>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center text-sm pt-2 border-t border-dashed",children:[e.jsx("span",{className:"text-gray-500",children:"Advance Paid:"}),e.jsxs("span",{className:"text-green-600 font-semibold",children:["-",Aa(n.advancePaid)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-gray-700",children:"Balance Due:"}),e.jsx("span",{className:"text-lg font-bold text-orange-600",children:Aa((((R=n.priceSnapshot)==null?void 0:R.totalPayable)||n.totalPrice)-n.advancePaid)})]})]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 flex flex-col items-center justify-center text-center space-y-4",children:[e.jsxs("button",{className:"group relative w-full bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 hover:from-green-600 hover:via-emerald-600 hover:to-green-700 text-white px-8 py-5 rounded-xl font-bold text-lg shadow-2xl shadow-green-500/40 transition-all duration-300 transform hover:scale-105 hover:shadow-green-500/60 overflow-hidden",children:[e.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-3",children:[e.jsx(Vn,{className:"w-6 h-6"}),"Pay Now"]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 group-hover:translate-x-full transition-transform duration-1000"})]}),e.jsxs("div",{className:"flex flex-col items center text-xs text-gray-600 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Co,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Secure payment  SSL encrypted"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(Va,{className:"w-3 h-3"}),e.jsx("span",{children:"Multiple payment options available"})]})]})]})]})})]})}),!j&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Production Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track your order progress"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(n.updatedAt||n.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start",children:v.map((ae,H)=>e.jsx(mk,{event:ae,isLast:H===v.length-1,isActive:ae.status==="in_progress"},H))})})}),w.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Production Departments"}),e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Live Tracking"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:w.map((ae,H)=>e.jsx(fk,{status:ae},H))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(hk,{order:n}),n.uploadedDesign&&e.jsx(xk,{order:n}),n.shippingAddress&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(sn,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Delivery Address"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Shipment destination"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex items-center justify-center",children:e.jsx(Yl,{className:"w-4 h-4 text-indigo-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:n.shippingAddress.street}),e.jsxs("p",{className:"text-gray-600",children:[n.shippingAddress.city,", ",n.shippingAddress.state," ",n.shippingAddress.zipCode]}),e.jsx("p",{className:"text-gray-600",children:n.shippingAddress.country})]})]})})})]}),n.status==="completed"&&(n.courierPartner||n.trackingId)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Yl,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Tracking Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Delivery updates"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-white p-4 rounded-lg border border-green-100",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tracking Number"}),e.jsx("p",{className:"font-mono text-lg font-bold text-gray-900 bg-white px-3 py-2 rounded border border-gray-200",children:n.trackingId||"TRK-99887766"})]}),n.courierPartner&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Courier Partner"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:n.courierPartner})]})]}),n.deliveredAt&&e.jsx("div",{className:"mt-4 pt-4 border-t border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ui,{className:"w-5 h-5 text-green-500"}),e.jsxs("p",{className:"text-green-700 font-medium",children:["Delivered on ",new Date(n.deliveredAt).toLocaleDateString()]})]})})]})})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(pk,{order:n}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Quick Actions"})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("button",{onClick:()=>{n.paymentStatus==="COMPLETED"&&window.open(`${we}/orders/${n._id}/invoice`,"_blank")},className:`w-full flex items-center justify-between p-3 rounded-lg border border-gray-200 transition-colors ${n.paymentStatus==="COMPLETED"?"bg-gray-50 hover:bg-gray-100 cursor-pointer":"bg-gray-100 cursor-not-allowed opacity-50"}`,disabled:n.paymentStatus!=="COMPLETED",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Download Invoice"}),e.jsx(ki,{className:"w-4 h-4 text-gray-400"})]}),e.jsxs("button",{className:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Contact Support"}),e.jsx(fx,{className:"w-4 h-4 text-gray-400"})]}),e.jsxs("button",{className:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Track Order"}),e.jsx(Yl,{className:"w-4 h-4 text-gray-400"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-5",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Order Number"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:n.orderNumber})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Order Date"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(n.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsx(Qj,{status:n.status})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Payment"}),e.jsx("span",{className:`font-medium ${n.paymentStatus==="COMPLETED"?"text-green-600":"text-orange-600"}`,children:n.paymentStatus==="COMPLETED"?"Paid":"Pending"})]})]})]})]})]})]})})},gk=()=>{var V;const s=Ha(),[r,n]=y.useState([]),[l,d]=y.useState(null),[m,u]=y.useState(null),[p,g]=y.useState(!0),[h,j]=y.useState(null),[v,w]=y.useState(1);y.useEffect(()=>{E(v)},[v]);const E=async M=>{try{g(!0),j(null);const R=localStorage.getItem("token");if(!R){s("/login");return}const ae=await fetch(`${we}/timeline/my-orders?page=${M}&limit=20`,{headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"}});if(!ae.ok){if(ae.status===401){localStorage.removeItem("token"),s("/login");return}throw new Error("Failed to fetch orders")}const H=await ae.json();n(H.orders||[]),d(H.latestOrder||null),u(H.pagination||null)}catch(R){j(R instanceof Error?R.message:"Failed to load orders")}finally{g(!1)}},A=M=>{switch(M.toLowerCase()){case"completed":return"bg-green-100 text-green-700 border-green-200";case"processing":case"production_ready":case"approved":return"bg-blue-100 text-blue-700 border-blue-200";case"request":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"cancelled":case"rejected":return"bg-red-100 text-red-700 border-red-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},P=M=>{switch(M.toLowerCase()){case"completed":return e.jsx(ui,{className:"w-4 h-4"});case"processing":case"production_ready":case"approved":return e.jsx(Jt,{className:"w-4 h-4 animate-spin"});case"request":return e.jsx(tn,{className:"w-4 h-4"});case"cancelled":case"rejected":return e.jsx(xs,{className:"w-4 h-4"});default:return e.jsx(ia,{className:"w-4 h-4"})}},q=M=>{try{return new Date(M).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid date"}};return p&&r.length===0?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Jt,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading your orders..."})]})}):h?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(xs,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Error Loading Orders"}),e.jsx("p",{className:"text-slate-600 mb-4",children:h}),e.jsx("button",{onClick:()=>E(v),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"My Orders"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Track and manage all your orders"})]}),l&&e.jsx(st.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl shadow-lg p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium mb-1",children:"Latest Order"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:l.orderNumber}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ia,{className:"w-4 h-4"}),((V=l.product)==null?void 0:V.name)||"Product"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(So,{className:"w-4 h-4"}),q(l.createdAt)]})]})]}),e.jsxs("button",{onClick:()=>s(`/orders/${l._id}`),className:"px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition-colors flex items-center gap-2",children:["View Details",e.jsx(Xa,{className:"w-5 h-5"})]})]})}),r.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[e.jsx(ia,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Orders Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Start shopping to see your orders here"}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Products"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4",children:r.map((M,R)=>{var ae,H;return e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:R*.05},onClick:()=>s(`/orders/${M._id}`),className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition-all cursor-pointer group",children:e.jsxs("div",{className:"flex items-center gap-6",children:[(ae=M.product)!=null&&ae.image?e.jsx("img",{src:M.product.image,alt:M.product.name,className:"w-20 h-20 object-cover rounded-lg border border-slate-200"}):e.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(ia,{className:"w-8 h-8 text-slate-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:M.orderNumber}),e.jsxs("span",{className:`
                          px-3 py-1 rounded-full text-xs font-medium border
                          flex items-center gap-1
                          ${A(M.status)}
                        `,children:[P(M.status),M.status.replace("_"," ")]})]}),e.jsx("p",{className:"text-slate-700 font-medium mb-1",children:((H=M.product)==null?void 0:H.name)||"Product"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[e.jsxs("span",{children:["Quantity: ",M.quantity.toLocaleString()]}),e.jsx("span",{children:""}),e.jsx("span",{children:q(M.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 mb-2",children:jn(M.totalPrice,"INR")}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 group-hover:text-blue-700 font-medium",children:[e.jsx("span",{children:"View Details"}),e.jsx(Xa,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]})},M._id)})}),m&&m.totalPages>1&&e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:v===1,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:m.totalPages},(M,R)=>R+1).map(M=>e.jsx("button",{onClick:()=>w(M),className:`
                        w-10 h-10 rounded-lg font-medium transition-colors
                        ${M===v?"bg-blue-600 text-white":"border border-slate-300 hover:bg-slate-50"}
                      `,children:M},M))}),e.jsx("button",{onClick:()=>w(M=>Math.min(m.totalPages,M+1)),disabled:v===m.totalPages,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),m&&e.jsxs("p",{className:"text-center text-sm text-slate-500 mt-4",children:["Showing ",r.length," of ",m.totalOrders," orders"]})]})]})})},bk=()=>{const s=Ha(),[r,n]=y.useState([]),[l,d]=y.useState(null),[m,u]=y.useState([]),[p,g]=y.useState(!1),[h,j]=y.useState(null),[v,w]=y.useState(null),[E,A]=y.useState(""),[P,q]=y.useState("all");y.useEffect(()=>{if(!localStorage.getItem("token")){s("/login");return}M()},[s]),y.useEffect(()=>{l&&R(l._id)},[l,P]);const V=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}),M=async()=>{g(!0);try{const W=await fetch(`${we}/departments?isEnabled=true`,{headers:V()});if(!W.ok)throw new Error("Failed to fetch departments");const te=await W.json(),ie=te.data||te||[];n(ie.sort((X,Se)=>(X.sequence||0)-(Se.sequence||0))),ie.length>0&&!l&&d(ie[0])}catch(W){j(W instanceof Error?W.message:"Failed to fetch departments")}finally{g(!1)}},R=async W=>{g(!0);try{const te=P!=="all"?`${we}/departments/${W}/orders?status=${P}`:`${we}/departments/${W}/orders`,ie=await fetch(te,{headers:V()});if(!ie.ok)throw new Error("Failed to fetch orders");const X=await ie.json();u(X.data||X||[])}catch(te){j(te instanceof Error?te.message:"Failed to fetch orders")}finally{g(!1)}},ae=async(W,te,ie)=>{if(l){g(!0),j(null),w(null);try{const X=await fetch(`${we}/orders/${W}/departments/${l._id}/action`,{method:"POST",headers:V(),body:JSON.stringify({action:te,notes:ie||""})}),Se=await X.json();if(!X.ok)throw new Error(Se.error||"Failed to perform action");w(`Order ${te}ed successfully`),R(l._id),setTimeout(()=>w(null),3e3)}catch(X){j(X instanceof Error?X.message:"Failed to perform action")}finally{g(!1)}}},H=W=>!W.departmentStatuses||!l?null:W.departmentStatuses.find(te=>(typeof te.department=="object"?te.department._id:te.department)===l._id),D=W=>{switch(W){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"paused":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"stopped":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},k=W=>{const te=H(W);if(!te)return null;const ie=te.status,X=[];return ie==="pending"&&X.push(e.jsxs("button",{onClick:()=>ae(W._id,"start"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bo,{size:16}),"Start"]},"start")),ie==="in_progress"&&X.push(e.jsxs("button",{onClick:()=>ae(W._id,"pause"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors flex items-center gap-2",children:[e.jsx(bx,{size:16}),"Pause"]},"pause"),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job? This may require reprint.")&&ae(W._id,"stop")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(Pd,{size:16}),"Stop"]},"stop"),e.jsxs("button",{onClick:()=>ae(W._id,"complete"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(ui,{size:16}),"Complete"]},"complete")),ie==="paused"&&X.push(e.jsxs("button",{onClick:()=>ae(W._id,"resume"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bo,{size:16}),"Resume"]},"resume"),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&ae(W._id,"stop")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(Pd,{size:16}),"Stop"]},"stop")),X.length>0?e.jsx("div",{className:"flex gap-2",children:X}):null},Q=m.filter(W=>W.orderNumber.toLowerCase().includes(E.toLowerCase())||W.product.name.toLowerCase().includes(E.toLowerCase()));return e.jsx("div",{className:"min-h-screen bg-cream-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(nn,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900 mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-cream-900 mb-2",children:"Department Portal"}),e.jsx("p",{className:"text-cream-600",children:"Manage production workflow for your department"})]}),h&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(xs,{size:20}),h]}),v&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-700",children:[e.jsx(ui,{size:20}),v]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-cream-200 p-6 mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(Fn,{size:24}),"Select Department"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:r.map(W=>e.jsxs("button",{onClick:()=>d(W),className:`p-4 rounded-lg border-2 transition-all ${(l==null?void 0:l._id)===W._id?"border-cream-900 bg-cream-50 ring-2 ring-cream-900":"border-cream-200 hover:border-cream-400"}`,children:[e.jsx("div",{className:"font-semibold text-cream-900",children:W.name}),W.description&&e.jsx("div",{className:"text-xs text-cream-600 mt-1",children:W.description}),e.jsxs("div",{className:"text-xs text-cream-500 mt-2",children:["Sequence: ",W.sequence]})]},W._id))})]}),l&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-cream-200 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900 mb-2",children:["Orders - ",l.name]}),e.jsxs("p",{className:"text-sm text-cream-600",children:[Q.length," order(s) found"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:P,onChange:W=>q(W.target.value),className:"px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"stopped",children:"Stopped"})]}),e.jsxs("button",{onClick:()=>R(l._id),className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2",children:[e.jsx(zi,{size:16}),"Refresh"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(an,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by order number or product name...",value:E,onChange:W=>A(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]})}),p?e.jsx("div",{className:"text-center py-12",children:e.jsx(Jt,{className:"animate-spin text-cream-900 mx-auto",size:32})}):Q.length===0?e.jsxs("div",{className:"text-center py-12 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx(ia,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-cream-600",children:"No orders found"})]}):e.jsx("div",{className:"space-y-4",children:Q.map(W=>{var ie;const te=H(W);return e.jsx(st.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border border-cream-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"font-bold text-cream-900",children:["Order #",W.orderNumber]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border-2 ${D((te==null?void 0:te.status)||"pending")}`,children:((ie=te==null?void 0:te.status)==null?void 0:ie.replace("_"," ").toUpperCase())||"PENDING"})]}),e.jsxs("div",{className:"text-sm text-cream-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",W.product.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Quantity:"})," ",W.quantity.toLocaleString()," units"]}),(te==null?void 0:te.operator)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Operator:"})," ",te.operator.name]}),(te==null?void 0:te.startedAt)&&e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(tn,{size:14}),"Started: ",new Date(te.startedAt).toLocaleString()]}),(te==null?void 0:te.notes)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",te.notes]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:k(W)})]})},W._id)})})]})]})})},yk=()=>{var xe;const s=Ha(),[r,n]=y.useState(null),[l,d]=y.useState([]),[m,u]=y.useState(null),[p,g]=y.useState([]),[h,j]=y.useState(!1),[v,w]=y.useState(null),[E,A]=y.useState(null),[P,q]=y.useState(""),[V,M]=y.useState("all"),[R,ae]=y.useState(null),[H,D]=y.useState(null),[k,Q]=y.useState(!1),[W,te]=y.useState(!0),[ie,X]=y.useState("dashboard");y.useEffect(()=>{const I=localStorage.getItem("token"),L=localStorage.getItem("user");if(!I||!L){s("/login");return}try{const _=JSON.parse(L);if(n(_),_.role!=="emp"&&_.role!=="admin"){s("/");return}}catch(_){console.error("Error parsing user data:",_),s("/login")}},[s]),y.useEffect(()=>{r&&(r.role==="emp"||r.role==="admin")&&$()},[r]),y.useEffect(()=>{m&&r&&re(m._id)},[m,V,r]);const Se=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json",Accept:"application/json"}),$=async()=>{if(r){j(!0);try{const I=await fetch(`${we}/departments?isEnabled=true`,{headers:Se()});if(!I.ok)throw new Error("Failed to fetch departments");const L=await I.json(),_=L.data||L||[],me=r.id||r._id;if(!me){console.error("User ID not found in userData:",r),w("User ID not found. Please log in again."),j(!1);return}const fe="69327f9850162220fa7bff29",Me=_.filter(se=>se._id===fe||!se.operators||se.operators.length===0?!0:se.operators.some(Be=>{const Qe=typeof Be=="object"&&(Be._id||Be.id)||String(Be);return String(Qe)===String(me)}));d(Me.sort((se,le)=>(se.sequence||0)-(le.sequence||0))),Me.length>0&&!m&&u(Me[0])}catch(I){w(I instanceof Error?I.message:"Failed to fetch departments")}finally{j(!1)}}},re=async I=>{j(!0),w(null);try{const L=V!=="all"?`${we}/departments/${I}/orders?status=${V}`:`${we}/departments/${I}/orders`,_=await fetch(L,{headers:Se()});if(!_.ok){const Me=await _.json().catch(()=>({}));throw new Error(Me.error||"Failed to fetch orders")}const me=await _.json(),fe=me.data||me||[];g(Array.isArray(fe)?fe:[])}catch(L){const _=L instanceof Error?L.message:"Failed to fetch orders";w(_),g([]),console.error("Error fetching department orders:",L)}finally{j(!1)}},B=async I=>{try{const L=await fetch(`${we}/orders/${I}`,{headers:Se()});if(!L.ok)throw new Error("Failed to fetch order details");const _=await L.json();D(_)}catch(L){console.error("Error fetching full order details:",L),D(null)}},ne=I=>{ae(I),D(null),Q(!0),B(I._id)},Z=async(I,L,_)=>{if(m){j(!0),w(null),A(null);try{const me=await fetch(`${we}/orders/${I}/departments/${m._id}/action`,{method:"POST",headers:Se(),body:JSON.stringify({action:L,notes:_||""})}),fe=await me.json();if(!me.ok)throw new Error(fe.error||"Failed to perform action");A(`Order ${L==="complete"?"completed":L==="start"?"started":L==="resume"?"resumed":`${L}ed`} successfully`),re(m._id),setTimeout(()=>A(null),3e3)}catch(me){w(me instanceof Error?me.message:"Failed to perform action")}finally{j(!1)}}},ue=I=>!I.departmentStatuses||!m?null:I.departmentStatuses.find(L=>(typeof L.department=="object"?L.department._id:L.department)===m._id),ve=I=>{switch(I){case"completed":return"bg-green-50 text-green-700 border-green-200";case"in_progress":return"bg-blue-50 text-blue-700 border-blue-200";case"paused":return"bg-orange-50 text-orange-700 border-orange-200";case"stopped":return"bg-red-50 text-red-700 border-red-200";default:return"bg-yellow-50 text-yellow-700 border-yellow-200"}},O=I=>{switch(I){case"completed":return"bg-green-500";case"in_progress":return"bg-blue-500";case"paused":return"bg-orange-500";case"stopped":return"bg-red-500";default:return"bg-yellow-500"}},J={pending:p.filter(I=>{const L=ue(I);return(L==null?void 0:L.status)==="pending"}).length,inProgress:p.filter(I=>{const L=ue(I);return(L==null?void 0:L.status)==="in_progress"}).length,urgent:p.filter(I=>{const L=ue(I);return(L==null?void 0:L.status)==="paused"||(L==null?void 0:L.status)==="stopped"}).length,completed:p.filter(I=>{const L=ue(I);return(L==null?void 0:L.status)==="completed"}).length},z=p.filter(I=>I.orderNumber.toLowerCase().includes(P.toLowerCase())||I.product.name.toLowerCase().includes(P.toLowerCase())||I.user.name.toLowerCase().includes(P.toLowerCase())),ye=I=>I.split(" ").map(L=>L[0]).join("").toUpperCase().slice(0,2);return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[e.jsx("div",{className:"fixed top-4 left-4 z-50",children:e.jsx(nn,{fallbackPath:"/",label:"Back to Home",className:"bg-white shadow-md px-4 py-2 rounded-lg text-slate-600 hover:text-slate-900"})}),e.jsxs("aside",{className:`${W?"w-64":"w-20"} bg-white border-r border-slate-200 transition-all duration-300 flex flex-col`,children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(ia,{className:"w-6 h-6 text-white"})}),W&&e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"NexusOrder"})]})}),e.jsxs("nav",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-700 font-medium",children:[e.jsx(ia,{className:"w-5 h-5"}),W&&e.jsx("span",{children:"Dashboard"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(tn,{className:"w-5 h-5"}),W&&e.jsxs("span",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:"My Orders"}),e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:p.length})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(In,{className:"w-5 h-5"}),W&&e.jsx("span",{children:"Team"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(_3,{className:"w-5 h-5"}),W&&e.jsx("span",{children:"Reports"})]})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200",children:[e.jsx("p",{className:`text-xs font-semibold text-slate-400 uppercase mb-2 ${!W&&"hidden"}`,children:"System"}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(Rr,{className:"w-5 h-5"}),W&&e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(fx,{className:"w-5 h-5"}),W&&e.jsx("span",{children:"Support"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:r?ye(r.name):"U"}),W&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:(r==null?void 0:r.name)||"User"}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:(r==null?void 0:r.role)==="emp"?"Employee":"Admin"})]})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx("header",{className:"bg-white border-b border-slate-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 max-w-2xl",children:e.jsxs("div",{className:"relative",children:[e.jsx(an,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search orders, customers, or SKUs...",value:P,onChange:I=>q(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-4 ml-6",children:[e.jsxs("button",{className:"relative p-2 hover:bg-slate-50 rounded-lg",children:[e.jsx(BS,{className:"w-5 h-5 text-slate-600"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:r?ye(r.name):"U"})]})]})}),e.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:["Welcome back, ",((xe=r==null?void 0:r.name)==null?void 0:xe.split(" ")[0])||"Employee","."]}),e.jsxs("p",{className:"text-slate-600",children:["You have ",J.pending+J.inProgress," active tasks requiring attention."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(tn,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full font-medium",children:["+",J.pending," new"]})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:J.pending}),e.jsx("p",{className:"text-sm text-slate-600",children:"Pending Orders"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(ia,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"On track"})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:J.inProgress}),e.jsx("p",{className:"text-sm text-slate-600",children:"In Progress"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(vo,{className:"w-6 h-6 text-red-600"})}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium",children:"-1 from yesterday"})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:J.urgent}),e.jsx("p",{className:"text-sm text-slate-600",children:"Urgent Attention"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ui,{className:"w-6 h-6 text-green-600"})}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"+15%"})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:J.completed}),e.jsx("p",{className:"text-sm text-slate-600",children:"Completed Today"})]})]}),l.length>0&&e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Department:"}),l.map(I=>e.jsx("button",{onClick:()=>u(I),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${(m==null?void 0:m._id)===I._id?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:I.name},I._id))]})}),m&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Assigned Orders"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2 bg-white border border-slate-200 rounded-lg",children:["all","pending","in_progress","paused","completed"].map(I=>e.jsx("button",{onClick:()=>M(I),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${V===I?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-50"}`,children:I==="all"?"All":I.replace("_"," ").toUpperCase()},I))}),e.jsx("button",{onClick:()=>re(m._id),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50",children:e.jsx(zi,{className:"w-5 h-5 text-slate-600"})})]})]}),e.jsxs(ba,{children:[v&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(xs,{size:20}),v]}),E&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-700",children:[e.jsx(ui,{size:20}),E]})]}),h?e.jsx("div",{className:"text-center py-12",children:e.jsx(Jt,{className:"animate-spin text-blue-600 mx-auto",size:32})}):z.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(ia,{size:48,className:"mx-auto mb-4 opacity-50 text-slate-400"}),e.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"No orders found"}),e.jsx("p",{className:"text-sm text-slate-500",children:V!=="all"?`No orders with status "${V}" for this department.`:"No orders are currently assigned to this department."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map(I=>{const L=ue(I),_=(L==null?void 0:L.status)||"pending",me=O(_);return e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>ne(I),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-1",children:I.orderNumber}),e.jsx("p",{className:"text-xs text-slate-500",children:I.product.name})]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${me}`})]}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${ve(_)}`,children:_.replace("_"," ").toUpperCase()})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(In,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:I.user.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(ia,{className:"w-4 h-4"}),e.jsxs("span",{children:[I.quantity.toLocaleString()," units"]})]}),I.deliveryDate&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(So,{className:"w-4 h-4"}),e.jsxs("span",{children:["Due: ",new Date(I.deliveryDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-100",onClick:fe=>fe.stopPropagation(),children:[_==="pending"&&e.jsxs("button",{onClick:()=>Z(I._id,"start"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(bo,{className:"w-4 h-4"}),"Start"]}),_==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>Z(I._id,"pause"),className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(bx,{className:"w-4 h-4"}),"Pause"]}),e.jsxs("button",{onClick:()=>Z(I._id,"complete"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(ui,{className:"w-4 h-4"}),"Complete"]})]}),_==="paused"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>Z(I._id,"resume"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(bo,{className:"w-4 h-4"}),"Resume"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&Z(I._id,"stop")},className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(Pd,{className:"w-4 h-4"}),"Stop"]})]}),_==="completed"&&e.jsx("div",{className:"w-full px-4 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-medium text-center",children:"Completed"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("button",{onClick:fe=>{fe.stopPropagation(),ne(I)},className:"w-full flex items-center justify-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx("span",{children:"View Details"}),e.jsx(Xa,{className:"w-4 h-4"})]})})]},I._id)})})]})]})]}),e.jsx(ba,{children:k&&(H||R)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>{Q(!1),ae(null),D(null)},children:e.jsxs(st.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:(H||R).orderNumber}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Created: ",new Date((H||R).createdAt).toLocaleString()]})]}),e.jsx("div",{className:"flex items-center gap-3",children:(()=>{const L=ue(H||R),_=(L==null?void 0:L.status)||"pending";return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${ve(_)}`,children:_.replace("_"," ").toUpperCase()}),e.jsx("button",{onClick:()=>{Q(!1),ae(null),D(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(ss,{className:"w-5 h-5 text-slate-600"})})]})})()})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[(()=>{const I=H||R,L=ue(I),_=(L==null?void 0:L.status)||"pending";return e.jsxs("div",{className:"flex gap-3",children:[_==="pending"&&e.jsxs("button",{onClick:()=>{Z(I._id,"start"),Q(!1)},className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(bo,{className:"w-5 h-5"}),"Start"]}),_==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{Z(I._id,"pause"),Q(!1)},className:"flex-1 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(bx,{className:"w-5 h-5"}),"Pause"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&(Z(I._id,"stop"),Q(!1))},className:"flex-1 px-6 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(Pd,{className:"w-5 h-5"}),"Stop / Finish"]})]}),_==="paused"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{Z(I._id,"resume"),Q(!1)},className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(bo,{className:"w-5 h-5"}),"Resume"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&(Z(I._id,"stop"),Q(!1))},className:"flex-1 px-6 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(Pd,{className:"w-5 h-5"}),"Stop / Finish"]})]})]})})(),(()=>{var L,_,me,fe,Me,se;const I=H||R;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Customer"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Name"}),e.jsx("p",{className:"font-semibold text-slate-900",children:I.user.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Email"}),e.jsx("p",{className:"font-semibold text-slate-900",children:I.user.email})]}),I.mobileNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Mobile"}),e.jsx("p",{className:"font-semibold text-slate-900",children:I.mobileNumber})]}),I.deliveryDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Due Date"}),e.jsx("p",{className:"font-semibold text-slate-900",children:new Date(I.deliveryDate).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Product Info"}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[((L=I.product)==null?void 0:L.image)&&e.jsx("img",{src:I.product.image,alt:I.product.name,className:"w-24 h-24 object-cover rounded-lg border border-slate-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-slate-900 text-lg mb-2",children:((_=I.product)==null?void 0:_.name)||"Product"}),((me=I.product)==null?void 0:me.subcategory)&&e.jsx("div",{className:"mb-2",children:e.jsx("p",{className:"text-sm text-slate-600",children:typeof I.product.subcategory=="object"&&I.product.subcategory.category?`${I.product.subcategory.category.name}  ${I.product.subcategory.name}`:typeof I.product.subcategory=="object"?I.product.subcategory.name:I.product.subcategory})}),e.jsxs("div",{className:"space-y-1 text-sm text-slate-600",children:[e.jsxs("p",{children:["Quantity: ",I.quantity.toLocaleString()," units"]}),I.finish&&e.jsxs("p",{children:["Finish: ",I.finish]}),I.shape&&e.jsxs("p",{children:["Shape: ",I.shape]}),((fe=I.product)==null?void 0:fe.basePrice)&&e.jsxs("p",{children:["Base Price: ",I.product.basePrice.toFixed(2)]}),e.jsxs("p",{className:"font-semibold text-slate-900 mt-2",children:["Total: ",I.totalPrice.toFixed(2)]})]})]})]}),((Me=I.product)==null?void 0:Me.description)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Description:"}),e.jsx("p",{className:"text-sm text-slate-600",children:I.product.description})]}),((se=I.product)==null?void 0:se.instructions)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Instructions:"}),e.jsx("p",{className:"text-sm text-slate-600",children:I.product.instructions})]})]}),I.selectedOptions&&Array.isArray(I.selectedOptions)&&I.selectedOptions.length>0?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Selected Options"}),e.jsx("div",{className:"space-y-3",children:I.selectedOptions.map((le,Be)=>{const Qe=(le==null?void 0:le.optionName)||(le==null?void 0:le.name)||"Option",tt=typeof(le==null?void 0:le.priceAdd)=="number"?le.priceAdd:typeof(le==null?void 0:le.priceAdd)=="string"&&parseFloat(le.priceAdd)||0;return Qe==="Option"&&tt===0?null:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(le==null?void 0:le.image)&&e.jsx("img",{src:le.image,alt:Qe,className:"w-12 h-12 object-cover rounded-lg",onError:ot=>{ot.currentTarget.style.display="none"}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:Qe}),(le==null?void 0:le.description)&&e.jsx("p",{className:"text-xs text-slate-500",children:le.description})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-slate-900",children:["+",tt.toFixed(2)]})})]},Be)}).filter(Boolean)}),I.selectedOptions.filter(le=>{const Be=(le==null?void 0:le.optionName)||(le==null?void 0:le.name)||"Option",Qe=typeof(le==null?void 0:le.priceAdd)=="number"?le.priceAdd:typeof(le==null?void 0:le.priceAdd)=="string"&&parseFloat(le.priceAdd)||0;return!(Be==="Option"&&Qe===0)}).length===0&&e.jsx("p",{className:"text-sm text-slate-500 italic text-center py-4",children:"No valid options found"})]}):null,I.selectedDynamicAttributes&&I.selectedDynamicAttributes.length>0&&e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Selected Attributes"}),e.jsx("div",{className:"space-y-3",children:I.selectedDynamicAttributes.map((le,Be)=>e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900",children:le.attributeName}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Value: ",e.jsx("span",{className:"font-semibold",children:le.label||String(le.attributeValue)})]}),le.description&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:le.description})]}),le.image&&e.jsx("img",{src:le.image,alt:le.attributeName,className:"w-16 h-16 object-cover rounded-lg ml-3"})]}),(le.priceMultiplier!==1||le.priceAdd>0)&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-100",children:e.jsxs("p",{className:"text-xs text-slate-500",children:[le.priceMultiplier!==1&&`Multiplier: ${le.priceMultiplier}x`,le.priceMultiplier!==1&&le.priceAdd>0&&"  ",le.priceAdd>0&&`Additional: +${le.priceAdd.toFixed(2)}`]})})]},Be))})]}),I.uploadedDesign&&(I.uploadedDesign.frontImage||I.uploadedDesign.backImage)&&e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"User Uploaded Designs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.uploadedDesign.frontImage&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 mb-2",children:"Front Image"}),I.uploadedDesign.frontImage.data&&e.jsx("img",{src:I.uploadedDesign.frontImage.data,alt:"Front design",className:"w-full h-48 object-contain rounded-lg border border-slate-200 bg-slate-50"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:I.uploadedDesign.frontImage.filename})]}),I.uploadedDesign.backImage&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 mb-2",children:"Back Image"}),I.uploadedDesign.backImage.data&&e.jsx("img",{src:I.uploadedDesign.backImage.data,alt:"Back design",className:"w-full h-48 object-contain rounded-lg border border-slate-200 bg-slate-50"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:I.uploadedDesign.backImage.filename})]})]})]})]})})(),(()=>{const I=H||R;return I.notes?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Customer Instructions"}),e.jsx("div",{className:"space-y-2",children:I.notes.split(`
`).map((L,_)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:""}),e.jsx("p",{className:"text-slate-700",children:L})]},_))})]}):null})(),(()=>{const I=H||R;return I.departmentStatuses&&I.departmentStatuses.length>0?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Production Timeline"}),e.jsx("div",{className:"space-y-4",children:I.departmentStatuses.sort((L,_)=>{const me=typeof L.department=="object"?L.department.sequence:0,fe=typeof _.department=="object"?_.department.sequence:0;return me-fe}).map((L,_)=>{const me=typeof L.department=="object"?L.department.name:"Department",fe=L.status,Me=fe==="completed",se=fe==="in_progress",le=fe==="pending";return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Me?"bg-green-500":se?"bg-blue-500 animate-pulse":le?"bg-yellow-500":"bg-slate-300"}`}),_<I.departmentStatuses.length-1&&e.jsx("div",{className:`w-0.5 h-12 ${Me?"bg-green-500":"bg-slate-200"}`})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium text-slate-900",children:me}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ve(fe)}`,children:fe.replace("_"," ").toUpperCase()})]}),L.startedAt&&e.jsxs("p",{className:"text-xs text-slate-500",children:["Started: ",new Date(L.startedAt).toLocaleString()]}),L.completedAt&&e.jsxs("p",{className:"text-xs text-green-600",children:["Completed: ",new Date(L.completedAt).toLocaleString()]})]})]},_)})})]}):null})(),(()=>{var _,me,fe,Me;const I=H||R;return((_=I.uploadedDesign)==null?void 0:_.frontImage)||((me=I.uploadedDesign)==null?void 0:me.backImage)?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"User Uploaded Designs (CMYK Format)"}),e.jsxs("div",{className:"space-y-4",children:[((fe=I.uploadedDesign)==null?void 0:fe.frontImage)&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pi,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:I.uploadedDesign.frontImage.filename||"Front Image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Front design file (CMYK JPEG)"})]})]}),I.uploadedDesign.frontImage.data&&e.jsx("a",{href:I.uploadedDesign.frontImage.data,download:I.uploadedDesign.frontImage.filename,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Download image",children:e.jsx(ki,{className:"w-4 h-4 text-slate-600"})})]}),I.uploadedDesign.frontImage.data&&e.jsx("div",{className:"mt-3 border border-slate-200 rounded-lg overflow-hidden bg-slate-50",children:e.jsx("img",{src:I.uploadedDesign.frontImage.data,alt:"Front design preview",className:"w-full h-auto max-h-64 object-contain",onError:se=>{se.currentTarget.style.display="none"}})})]}),((Me=I.uploadedDesign)==null?void 0:Me.backImage)&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pi,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:I.uploadedDesign.backImage.filename||"Back Image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Back design file (CMYK JPEG)"})]})]}),I.uploadedDesign.backImage.data&&e.jsx("a",{href:I.uploadedDesign.backImage.data,download:I.uploadedDesign.backImage.filename,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Download image",children:e.jsx(ki,{className:"w-4 h-4 text-slate-600"})})]}),I.uploadedDesign.backImage.data&&e.jsx("div",{className:"mt-3 border border-slate-200 rounded-lg overflow-hidden bg-slate-50",children:e.jsx("img",{src:I.uploadedDesign.backImage.data,alt:"Back design preview",className:"w-full h-auto max-h-64 object-contain",onError:se=>{se.currentTarget.style.display="none"}})})]})]})]}):null})()]})]})})})]})};let jk={data:""},vk=s=>{if(typeof window=="object"){let r=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(s||document.head).appendChild(r),r.firstChild}return s||jk},Nk=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wk=/\/\*[^]*?\*\/|  +/g,Wj=/\n+/g,Hl=(s,r)=>{let n="",l="",d="";for(let m in s){let u=s[m];m[0]=="@"?m[1]=="i"?n=m+" "+u+";":l+=m[1]=="f"?Hl(u,m):m+"{"+Hl(u,m[1]=="k"?"":r)+"}":typeof u=="object"?l+=Hl(u,r?r.replace(/([^,])+/g,p=>m.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,p):p?p+" "+g:g)):m):u!=null&&(m=/^--/.test(m)?m:m.replace(/[A-Z]/g,"-$&").toLowerCase(),d+=Hl.p?Hl.p(m,u):m+":"+u+";")}return n+(r&&d?r+"{"+d+"}":d)+l},il={},N1=s=>{if(typeof s=="object"){let r="";for(let n in s)r+=n+N1(s[n]);return r}return s},Sk=(s,r,n,l,d)=>{let m=N1(s),u=il[m]||(il[m]=(g=>{let h=0,j=11;for(;h<g.length;)j=101*j+g.charCodeAt(h++)>>>0;return"go"+j})(m));if(!il[u]){let g=m!==s?s:(h=>{let j,v,w=[{}];for(;j=Nk.exec(h.replace(wk,""));)j[4]?w.shift():j[3]?(v=j[3].replace(Wj," ").trim(),w.unshift(w[0][v]=w[0][v]||{})):w[0][j[1]]=j[2].replace(Wj," ").trim();return w[0]})(s);il[u]=Hl(d?{["@keyframes "+u]:g}:g,n?"":"."+u)}let p=n&&il.g?il.g:null;return n&&(il.g=il[u]),((g,h,j,v)=>{v?h.data=h.data.replace(v,g):h.data.indexOf(g)===-1&&(h.data=j?g+h.data:h.data+g)})(il[u],r,l,p),u},Ck=(s,r,n)=>s.reduce((l,d,m)=>{let u=r[m];if(u&&u.call){let p=u(n),g=p&&p.props&&p.props.className||/^go/.test(p)&&p;u=g?"."+g:p&&typeof p=="object"?p.props?"":Hl(p,""):p===!1?"":p}return l+d+(u??"")},"");function Xm(s){let r=this||{},n=s.call?s(r.p):s;return Sk(n.unshift?n.raw?Ck(n,[].slice.call(arguments,1),r.p):n.reduce((l,d)=>Object.assign(l,d&&d.call?d(r.p):d),{}):n,vk(r.target),r.g,r.o,r.k)}let w1,Bx,Vx;Xm.bind({g:1});let ul=Xm.bind({k:1});function Ak(s,r,n,l){Hl.p=r,w1=s,Bx=n,Vx=l}function eo(s,r){let n=this||{};return function(){let l=arguments;function d(m,u){let p=Object.assign({},m),g=p.className||d.className;n.p=Object.assign({theme:Bx&&Bx()},p),n.o=/ *go\d+/.test(g),p.className=Xm.apply(n,l)+(g?" "+g:"");let h=s;return s[0]&&(h=p.as||s,delete p.as),Vx&&h[0]&&Vx(p),w1(h,p)}return d}}var Ek=s=>typeof s=="function",Hd=(s,r)=>Ek(s)?s(r):s,Tk=(()=>{let s=0;return()=>(++s).toString()})(),S1=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");s=!r||r.matches}return s}})(),kk=20,Yf="default",C1=(s,r)=>{let{toastLimit:n}=s.settings;switch(r.type){case 0:return{...s,toasts:[r.toast,...s.toasts].slice(0,n)};case 1:return{...s,toasts:s.toasts.map(u=>u.id===r.toast.id?{...u,...r.toast}:u)};case 2:let{toast:l}=r;return C1(s,{type:s.toasts.find(u=>u.id===l.id)?1:0,toast:l});case 3:let{toastId:d}=r;return{...s,toasts:s.toasts.map(u=>u.id===d||d===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return r.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(u=>u.id!==r.toastId)};case 5:return{...s,pausedAt:r.time};case 6:let m=r.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+m}))}}},Tm=[],A1={toasts:[],pausedAt:void 0,settings:{toastLimit:kk}},Di={},E1=(s,r=Yf)=>{Di[r]=C1(Di[r]||A1,s),Tm.forEach(([n,l])=>{n===r&&l(Di[r])})},T1=s=>Object.keys(Di).forEach(r=>E1(s,r)),Pk=s=>Object.keys(Di).find(r=>Di[r].toasts.some(n=>n.id===s)),eh=(s=Yf)=>r=>{E1(r,s)},Dk={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},k1=(s={},r=Yf)=>{let[n,l]=y.useState(Di[r]||A1),d=y.useRef(Di[r]);y.useEffect(()=>(d.current!==Di[r]&&l(Di[r]),Tm.push([r,l]),()=>{let u=Tm.findIndex(([p])=>p===r);u>-1&&Tm.splice(u,1)}),[r]);let m=n.toasts.map(u=>{var p,g,h;return{...s,...s[u.type],...u,removeDelay:u.removeDelay||((p=s[u.type])==null?void 0:p.removeDelay)||(s==null?void 0:s.removeDelay),duration:u.duration||((g=s[u.type])==null?void 0:g.duration)||(s==null?void 0:s.duration)||Dk[u.type],style:{...s.style,...(h=s[u.type])==null?void 0:h.style,...u.style}}});return{...n,toasts:m}},Ok=(s,r="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Tk()}),su=s=>(r,n)=>{let l=Ok(r,s,n);return eh(l.toasterId||Pk(l.id))({type:2,toast:l}),l.id},Ja=(s,r)=>su("blank")(s,r);Ja.error=su("error");Ja.success=su("success");Ja.loading=su("loading");Ja.custom=su("custom");Ja.dismiss=(s,r)=>{let n={type:3,toastId:s};r?eh(r)(n):T1(n)};Ja.dismissAll=s=>Ja.dismiss(void 0,s);Ja.remove=(s,r)=>{let n={type:4,toastId:s};r?eh(r)(n):T1(n)};Ja.removeAll=s=>Ja.remove(void 0,s);Ja.promise=(s,r,n)=>{let l=Ja.loading(r.loading,{...n,...n==null?void 0:n.loading});return typeof s=="function"&&(s=s()),s.then(d=>{let m=r.success?Hd(r.success,d):void 0;return m?Ja.success(m,{id:l,...n,...n==null?void 0:n.success}):Ja.dismiss(l),d}).catch(d=>{let m=r.error?Hd(r.error,d):void 0;m?Ja.error(m,{id:l,...n,...n==null?void 0:n.error}):Ja.dismiss(l)}),s};var Rk=1e3,P1=(s,r="default")=>{let{toasts:n,pausedAt:l}=k1(s,r),d=y.useRef(new Map).current,m=y.useCallback((v,w=Rk)=>{if(d.has(v))return;let E=setTimeout(()=>{d.delete(v),u({type:4,toastId:v})},w);d.set(v,E)},[]);y.useEffect(()=>{if(l)return;let v=Date.now(),w=n.map(E=>{if(E.duration===1/0)return;let A=(E.duration||0)+E.pauseDuration-(v-E.createdAt);if(A<0){E.visible&&Ja.dismiss(E.id);return}return setTimeout(()=>Ja.dismiss(E.id,r),A)});return()=>{w.forEach(E=>E&&clearTimeout(E))}},[n,l,r]);let u=y.useCallback(eh(r),[r]),p=y.useCallback(()=>{u({type:5,time:Date.now()})},[u]),g=y.useCallback((v,w)=>{u({type:1,toast:{id:v,height:w}})},[u]),h=y.useCallback(()=>{l&&u({type:6,time:Date.now()})},[l,u]),j=y.useCallback((v,w)=>{let{reverseOrder:E=!1,gutter:A=8,defaultPosition:P}=w||{},q=n.filter(R=>(R.position||P)===(v.position||P)&&R.height),V=q.findIndex(R=>R.id===v.id),M=q.filter((R,ae)=>ae<V&&R.visible).length;return q.filter(R=>R.visible).slice(...E?[M+1]:[0,M]).reduce((R,ae)=>R+(ae.height||0)+A,0)},[n]);return y.useEffect(()=>{n.forEach(v=>{if(v.dismissed)m(v.id,v.removeDelay);else{let w=d.get(v.id);w&&(clearTimeout(w),d.delete(v.id))}})},[n,m]),{toasts:n,handlers:{updateHeight:g,startPause:p,endPause:h,calculateOffset:j}}},_k=ul`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Mk=ul`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zk=ul`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,D1=eo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_k} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Mk} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${zk} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Lk=ul`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,O1=eo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${Lk} 1s linear infinite;
`,$k=ul`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Fk=ul`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,R1=eo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$k} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Fk} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Uk=eo("div")`
  position: absolute;
`,Ik=eo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Bk=ul`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Vk=eo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Bk} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,_1=({toast:s})=>{let{icon:r,type:n,iconTheme:l}=s;return r!==void 0?typeof r=="string"?y.createElement(Vk,null,r):r:n==="blank"?null:y.createElement(Ik,null,y.createElement(O1,{...l}),n!=="loading"&&y.createElement(Uk,null,n==="error"?y.createElement(D1,{...l}):y.createElement(R1,{...l})))},qk=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Hk=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Gk="0%{opacity:0;} 100%{opacity:1;}",Qk="0%{opacity:1;} 100%{opacity:0;}",Yk=eo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Wk=eo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Zk=(s,r)=>{let n=s.includes("top")?1:-1,[l,d]=S1()?[Gk,Qk]:[qk(n),Hk(n)];return{animation:r?`${ul(l)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ul(d)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},M1=y.memo(({toast:s,position:r,style:n,children:l})=>{let d=s.height?Zk(s.position||r||"top-center",s.visible):{opacity:0},m=y.createElement(_1,{toast:s}),u=y.createElement(Wk,{...s.ariaProps},Hd(s.message,s));return y.createElement(Yk,{className:s.className,style:{...d,...n,...s.style}},typeof l=="function"?l({icon:m,message:u}):y.createElement(y.Fragment,null,m,u))});Ak(y.createElement);var Kk=({id:s,className:r,style:n,onHeightUpdate:l,children:d})=>{let m=y.useCallback(u=>{if(u){let p=()=>{let g=u.getBoundingClientRect().height;l(s,g)};p(),new MutationObserver(p).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[s,l]);return y.createElement("div",{ref:m,className:r,style:n},d)},Jk=(s,r)=>{let n=s.includes("top"),l=n?{top:0}:{bottom:0},d=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:S1()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(n?1:-1)}px)`,...l,...d}},Xk=Xm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,bm=16,e9=({reverseOrder:s,position:r="top-center",toastOptions:n,gutter:l,children:d,toasterId:m,containerStyle:u,containerClassName:p})=>{let{toasts:g,handlers:h}=P1(n,m);return y.createElement("div",{"data-rht-toaster":m||"",style:{position:"fixed",zIndex:9999,top:bm,left:bm,right:bm,bottom:bm,pointerEvents:"none",...u},className:p,onMouseEnter:h.startPause,onMouseLeave:h.endPause},g.map(j=>{let v=j.position||r,w=h.calculateOffset(j,{reverseOrder:s,gutter:l,defaultPosition:r}),E=Jk(v,w);return y.createElement(Kk,{id:j.id,key:j.id,onHeightUpdate:h.updateHeight,className:j.visible?Xk:"",style:E},j.type==="custom"?Hd(j.message,j):d?d(j):y.createElement(M1,{toast:j,position:v}))}))},Rt=Ja;const t9=Object.freeze(Object.defineProperty({__proto__:null,CheckmarkIcon:R1,ErrorIcon:D1,LoaderIcon:O1,ToastBar:M1,ToastIcon:_1,Toaster:e9,default:Rt,resolveValue:Hd,toast:Ja,useToaster:P1,useToasterStore:k1},Symbol.toStringTag,{value:"Module"})),s9=({onSuccess:s,onError:r})=>{var X,Se,$,re;const[n,l]=y.useState([]),[d,m]=y.useState(!1),[u,p]=y.useState("all"),[g,h]=y.useState(""),[j,v]=y.useState(null),[w,E]=y.useState(1),[A]=y.useState(10),[P,q]=y.useState(null),V=()=>{const B=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:B?`Bearer ${B}`:""}},M=async()=>{m(!0);try{const B=u!=="all"?`?status=${u}`:"",ne=await fetch(`${we}/auth/print-partner-requests${B}`,{headers:V()});if(!ne.ok)throw new Error(`Failed to fetch: ${ne.status}`);const Z=await ne.json();if(Z.success)l(Z.requests||[]),E(1);else throw new Error(Z.message||"Failed to fetch requests")}catch(B){console.error("Fetch print partner requests error:",B),r==null||r(B.message||"Failed to fetch print partner requests")}finally{m(!1)}};y.useEffect(()=>{M()},[u]);const R=async B=>{if(window.confirm("Are you sure you want to approve this request?")){v(B);try{const Z=await(await fetch(`${we}/auth/print-partner-requests/${B}/approve`,{method:"POST",headers:V()})).json();if(Z.success)s==null||s("Print partner request approved successfully!"),M(),(P==null?void 0:P._id)===B&&q(null);else throw new Error(Z.message||"Failed to approve")}catch(ne){r==null||r(ne.message||"Failed to approve request")}finally{v(null)}}},ae=async B=>{if(window.confirm("Are you sure you want to reject this request?")){v(B);try{const Z=await(await fetch(`${we}/auth/print-partner-requests/${B}/reject`,{method:"POST",headers:V(),body:JSON.stringify({rejectionReason:"Rejected by admin"})})).json();if(Z.success)s==null||s("Print partner request rejected successfully!"),M(),(P==null?void 0:P._id)===B&&q(null);else throw new Error(Z.message||"Failed to reject")}catch(ne){r==null||r(ne.message||"Failed to reject request")}finally{v(null)}}},H=n.filter(B=>{if(!g)return!0;const ne=g.toLowerCase();return B.businessName.toLowerCase().includes(ne)||B.ownerName.toLowerCase().includes(ne)||B.email.toLowerCase().includes(ne)||B.mobileNumber.includes(ne)}),D=H.length,k=Math.ceil(D/A),Q=w*A,W=Q-A,te=H.slice(W,Q),ie=B=>E(B);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass-panel p-4 rounded-2xl bg-white shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-600",children:e.jsx($d,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Print Partners"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage partnership requests"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(an,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search partners...",value:g,onChange:B=>h(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsxs("select",{value:u,onChange:B=>p(B.target.value),className:"w-full sm:w-auto px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]}),e.jsx("button",{onClick:M,disabled:d,className:"p-2 border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 text-gray-600",children:e.jsx(zi,{size:18,className:d?"animate-spin":""})})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100 text-xs uppercase tracking-wider text-gray-500 font-medium",children:[e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Business Name"}),e.jsx("th",{className:"px-6 py-4",children:"Owner"}),e.jsx("th",{className:"px-6 py-4",children:"Contact"}),e.jsx("th",{className:"px-6 py-4",children:"Submitted"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:d?Array(5).fill(0).map((B,ne)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-16"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-32"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-24"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-28"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-20"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-12 ml-auto"})})]},ne)):te.length>0?te.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors cursor-pointer",onClick:()=>q(B),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold
                                                ${B.verificationStatus==="APPROVED"?"bg-green-100 text-green-700":B.verificationStatus==="REJECTED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${B.verificationStatus==="APPROVED"?"bg-green-500":B.verificationStatus==="REJECTED"?"bg-red-500":"bg-yellow-500"}`}),B.verificationStatus]})}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:B.businessName}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:B.ownerName}),e.jsxs("td",{className:"px-6 py-4 text-gray-500 text-sm",children:[e.jsx("div",{children:B.mobileNumber}),e.jsx("div",{className:"text-xs text-gray-400",children:B.email})]}),e.jsx("td",{className:"px-6 py-4 text-gray-500 text-sm",children:new Date(B.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:ne=>ne.stopPropagation(),children:[e.jsx("button",{onClick:()=>q(B),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(zr,{size:18})}),B.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>R(B._id),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve",disabled:j===B._id,children:e.jsx(va,{size:18})}),e.jsx("button",{onClick:()=>ae(B._id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject",disabled:j===B._id,children:e.jsx(ol,{size:18})})]})]})})]},B._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(an,{size:32,className:"opacity-20"}),e.jsx("p",{children:"No requests found"})]})})})})]})}),D>0&&e.jsxs("div",{className:"border-t border-gray-100 bg-gray-50 px-6 py-4 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",e.jsxs("span",{className:"font-medium text-gray-900",children:[W+1,"-",Math.min(Q,D)]})," of ",e.jsx("span",{className:"font-medium text-gray-900",children:D})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w>1&&ie(w-1),disabled:w===1,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(Wl,{size:16})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 px-2",children:["Page ",w," of ",Math.max(1,k)]}),e.jsx("button",{onClick:()=>w<k&&ie(w+1),disabled:w===k,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(Xa,{size:16})})]})]})]}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Full information for ",P.businessName]})]}),e.jsx("button",{onClick:()=>q(null),className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",children:e.jsx(ss,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx($d,{size:16,className:"text-blue-600"}),"Business Information"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Business Name"}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:P.businessName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"GST Number"}),e.jsx("span",{className:"font-mono text-gray-700",children:P.gstNumber||"N/A"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Address"}),e.jsx("span",{className:"text-gray-700",children:[(X=P.address)==null?void 0:X.fullAddress,(Se=P.address)==null?void 0:Se.city,($=P.address)==null?void 0:$.state,(re=P.address)==null?void 0:re.pincode].filter(Boolean).join(", ")||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(In,{size:16,className:"text-purple-600"}),"Owner Contact"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Owner Name"}),e.jsx("span",{className:"font-medium text-gray-900",children:P.ownerName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Mobile"}),e.jsx("span",{className:"text-gray-700 font-medium",children:P.mobileNumber})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Email"}),e.jsx("span",{className:"text-gray-700 break-all",children:P.email})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(wr,{size:16,className:"text-orange-600"}),"Verification Document"]}),P.proofDocument?e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:e.jsx(zr,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Proof Document"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Visiting Card / Shop Photo"})]})]}),e.jsx("a",{href:P.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-semibold text-gray-700 hover:text-blue-600 hover:border-blue-200 transition-colors shadow-sm",children:"View Original"})]}):e.jsx("div",{className:"p-4 rounded-xl bg-red-50 text-red-600 text-sm",children:"No document uploaded"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-50/50 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(tn,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-blue-800",children:"Request Timeline"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submitted on:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(P.createdAt).toLocaleString()})]}),P.verifiedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[P.verificationStatus==="APPROVED"?"Approved":"Rejected"," on:"]}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(P.verifiedAt).toLocaleString()})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50 rounded-b-2xl flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>q(null),className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors shadow-sm",children:"Close"}),P.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>ae(P._id),disabled:j===P._id,className:"px-5 py-2.5 bg-white border border-red-200 text-red-600 rounded-xl font-medium hover:bg-red-50 hover:border-red-300 transition-colors shadow-sm flex items-center gap-2",children:[e.jsx(ol,{size:18}),"Reject"]}),e.jsxs("button",{onClick:()=>R(P._id),disabled:j===P._id,className:"px-5 py-2.5 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors shadow-sm flex items-center gap-2",children:[j===P._id?e.jsx(zi,{className:"animate-spin",size:18}):e.jsx(va,{size:18}),"Approve"]})]})]})]})})]})},a9=({onSuccess:s,onError:r})=>{var X,Se,$,re;const[n,l]=y.useState([]),[d,m]=y.useState(!1),[u,p]=y.useState("all"),[g,h]=y.useState(""),[j,v]=y.useState(null),[w,E]=y.useState(1),[A]=y.useState(10),[P,q]=y.useState(null),V=()=>{const B=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:B?`Bearer ${B}`:""}},M=async()=>{m(!0);try{const B=u!=="all"?`?status=${u}`:"",ne=await fetch(`${we}/auth/corporate-requests${B}`,{headers:V()});if(!ne.ok)throw new Error(`Failed to fetch: ${ne.status}`);const Z=await ne.json();if(Z.success)l(Z.requests||[]),E(1);else throw new Error(Z.message||"Failed to fetch requests")}catch(B){console.error("Fetch corporate requests error:",B),r==null||r(B.message||"Failed to fetch corporate requests")}finally{m(!1)}};y.useEffect(()=>{M()},[u]);const R=async B=>{if(window.confirm("Are you sure you want to approve this request?")){v(B);try{const Z=await(await fetch(`${we}/auth/corporate-requests/${B}/approve`,{method:"POST",headers:V()})).json();if(Z.success)s==null||s("Corporate request approved successfully!"),M(),(P==null?void 0:P._id)===B&&q(null);else throw new Error(Z.message||"Failed to approve")}catch(ne){r==null||r(ne.message||"Failed to approve request")}finally{v(null)}}},ae=async B=>{if(window.confirm("Are you sure you want to reject this request?")){v(B);try{const Z=await(await fetch(`${we}/auth/corporate-requests/${B}/reject`,{method:"POST",headers:V(),body:JSON.stringify({rejectionReason:"Rejected by admin"})})).json();if(Z.success)s==null||s("Corporate request rejected successfully!"),M(),(P==null?void 0:P._id)===B&&q(null);else throw new Error(Z.message||"Failed to reject")}catch(ne){r==null||r(ne.message||"Failed to reject request")}finally{v(null)}}},H=n.filter(B=>{if(!g)return!0;const ne=g.toLowerCase();return B.organizationName.toLowerCase().includes(ne)||B.authorizedPersonName.toLowerCase().includes(ne)||B.officialEmail.toLowerCase().includes(ne)||B.mobileNumber.includes(ne)}),D=H.length,k=Math.ceil(D/A),Q=w*A,W=Q-A,te=H.slice(W,Q),ie=B=>E(B);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass-panel p-4 rounded-2xl bg-white shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg text-purple-600",children:e.jsx(Fn,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Corporate Requests"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage corporate partnerships"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(an,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search organization...",value:g,onChange:B=>h(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),e.jsxs("select",{value:u,onChange:B=>p(B.target.value),className:"w-full sm:w-auto px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm bg-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]}),e.jsx("button",{onClick:M,disabled:d,className:"p-2 border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 text-gray-600",children:e.jsx(zi,{size:18,className:d?"animate-spin":""})})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100 text-xs uppercase tracking-wider text-gray-500 font-medium",children:[e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Organization"}),e.jsx("th",{className:"px-6 py-4",children:"Authorized Person"}),e.jsx("th",{className:"px-6 py-4",children:"Contact"}),e.jsx("th",{className:"px-6 py-4",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:d?Array(5).fill(0).map((B,ne)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-16"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-32"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-24"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-28"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-20"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-12 ml-auto"})})]},ne)):te.length>0?te.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors cursor-pointer",onClick:()=>q(B),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold
                                                ${B.verificationStatus==="APPROVED"?"bg-green-100 text-green-700":B.verificationStatus==="REJECTED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${B.verificationStatus==="APPROVED"?"bg-green-500":B.verificationStatus==="REJECTED"?"bg-red-500":"bg-yellow-500"}`}),B.verificationStatus]})}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:B.organizationName}),e.jsxs("td",{className:"px-6 py-4 text-gray-600",children:[B.authorizedPersonName,e.jsx("div",{className:"text-xs text-gray-400",children:B.designation})]}),e.jsxs("td",{className:"px-6 py-4 text-gray-500 text-sm",children:[e.jsx("div",{children:B.mobileNumber}),e.jsx("div",{className:"text-xs text-gray-400",children:B.officialEmail})]}),e.jsx("td",{className:"px-6 py-4 text-gray-500 text-sm",children:B.organizationType}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:ne=>ne.stopPropagation(),children:[e.jsx("button",{onClick:()=>q(B),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(zr,{size:18})}),B.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>R(B._id),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve",disabled:j===B._id,children:e.jsx(va,{size:18})}),e.jsx("button",{onClick:()=>ae(B._id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject",disabled:j===B._id,children:e.jsx(ol,{size:18})})]})]})})]},B._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(an,{size:32,className:"opacity-20"}),e.jsx("p",{children:"No requests found"})]})})})})]})}),D>0&&e.jsxs("div",{className:"border-t border-gray-100 bg-gray-50 px-6 py-4 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",e.jsxs("span",{className:"font-medium text-gray-900",children:[W+1,"-",Math.min(Q,D)]})," of ",e.jsx("span",{className:"font-medium text-gray-900",children:D})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w>1&&ie(w-1),disabled:w===1,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(Wl,{size:16})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 px-2",children:["Page ",w," of ",Math.max(1,k)]}),e.jsx("button",{onClick:()=>w<k&&ie(w+1),disabled:w===k,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(Xa,{size:16})})]})]})]}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Full information for ",P.organizationName]})]}),e.jsx("button",{onClick:()=>q(null),className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",children:e.jsx(ss,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx($d,{size:16,className:"text-purple-600"}),"Organization Information"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Organization Name"}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:P.organizationName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Type"}),e.jsx("span",{className:"font-medium text-gray-900",children:P.organizationType})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"GST Number"}),e.jsx("span",{className:"font-mono text-gray-700",children:P.gstNumber||"N/A"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Address"}),e.jsx("span",{className:"text-gray-700",children:[(X=P.address)==null?void 0:X.fullAddress,(Se=P.address)==null?void 0:Se.city,($=P.address)==null?void 0:$.state,(re=P.address)==null?void 0:re.pincode].filter(Boolean).join(", ")||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(In,{size:16,className:"text-blue-600"}),"Authorized Person"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Name"}),e.jsx("span",{className:"font-medium text-gray-900",children:P.authorizedPersonName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Designation"}),e.jsx("span",{className:"font-medium text-gray-900",children:P.designation})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Mobile"}),e.jsx("span",{className:"text-gray-700 font-medium",children:P.mobileNumber})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Official Email"}),e.jsx("span",{className:"text-gray-700 break-all",children:P.officialEmail})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(wr,{size:16,className:"text-orange-600"}),"Verification Document"]}),P.proofDocument?e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:e.jsx(zr,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Proof Document"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Business Registration / ID Proof"})]})]}),e.jsx("a",{href:P.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-semibold text-gray-700 hover:text-blue-600 hover:border-blue-200 transition-colors shadow-sm",children:"View Original"})]}):e.jsx("div",{className:"p-4 rounded-xl bg-red-50 text-red-600 text-sm",children:"No document uploaded"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-50/50 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(tn,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-blue-800",children:"Request Timeline"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submitted on:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(P.createdAt).toLocaleString()})]}),P.verifiedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[P.verificationStatus==="APPROVED"?"Approved":"Rejected"," on:"]}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(P.verifiedAt).toLocaleString()})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50 rounded-b-2xl flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>q(null),className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors shadow-sm",children:"Close"}),P.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>ae(P._id),disabled:j===P._id,className:"px-5 py-2.5 bg-white border border-red-200 text-red-600 rounded-xl font-medium hover:bg-red-50 hover:border-red-300 transition-colors shadow-sm flex items-center gap-2",children:[e.jsx(ol,{size:18}),"Reject"]}),e.jsxs("button",{onClick:()=>R(P._id),disabled:j===P._id,className:"px-5 py-2.5 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors shadow-sm flex items-center gap-2",children:[j===P._id?e.jsx(zi,{className:"animate-spin",size:18}):e.jsx(va,{size:18}),"Approve"]})]})]})]})})]})},z1=({conflict:s,onResolve:r,onCancel:n})=>{var P,q,V,M,R,ae,H,D,k,Q,W,te,ie,X,Se;const[l,d]=y.useState(null),[m,u]=y.useState(!1);console.log(" ConflictDetectionModal received data:",{conflict:s,hasConflicts:s==null?void 0:s.hasConflicts,hasConflict:s==null?void 0:s.hasConflict,conflictsArray:s==null?void 0:s.conflicts,payload:s==null?void 0:s.payload});const p=(s==null?void 0:s.hasConflict)||(s==null?void 0:s.hasConflicts);if(!s||!p)return null;const g=s.conflicts&&!s.affectedItems;console.log(" Using format:",g?"OLD":"NEW");let h=s.affectedItems||[],j=s.impactSummary;if(g&&s.conflicts){h=s.conflicts.map(re=>({priceBook:{name:re.priceBookName||"Unknown"},zone:re.zone?{name:re.zoneName||"Zone"}:null,segment:re.segment?{name:re.segmentName||"Segment"}:null,pricing:{currentPrice:re.existingPrice,newZonePrice:re.newPrice,priceDifference:re.priceDifference,percentageDifference:String(re.percentageDifference).includes("%")?re.percentageDifference:re.percentageDifference+"%",direction:re.priceDifference>0?"increase":"decrease"}}));const $=s.product||((P=s.payload)==null?void 0:P.product);j={product:{_id:($==null?void 0:$._id)||((q=s.payload)==null?void 0:q.productId)||"unknown",name:($==null?void 0:$.name)||"Product",sku:($==null?void 0:$.sku)||""},updateLevel:"ZONE",currentMasterPrice:((V=s.conflicts[0])==null?void 0:V.existingPrice)||0,newPrice:((M=s.conflicts[0])==null?void 0:M.newPrice)||0,totalAffectedItems:s.conflicts.length,affectedSegments:[]},console.log(" Transformed data:",{affectedItems:h,impactSummary:j})}const v=s.resolutionOptions||[];if(!j){console.warn(" impactSummary is undefined! Creating default...");const $=s.product||((R=s.payload)==null?void 0:R.product);j={product:{_id:($==null?void 0:$._id)||((ae=s.payload)==null?void 0:ae.productId)||"unknown",name:($==null?void 0:$.name)||"Product",sku:($==null?void 0:$.sku)||""},updateLevel:"ZONE",currentMasterPrice:((D=(H=s.conflicts)==null?void 0:H[0])==null?void 0:D.existingPrice)||0,newPrice:((Q=(k=s.conflicts)==null?void 0:k[0])==null?void 0:Q.newPrice)||((W=s.payload)==null?void 0:W.newPrice)||0,totalAffectedItems:((te=s.conflicts)==null?void 0:te.length)||0,affectedSegments:[]}}console.log(" Final render data:",{productName:(ie=j==null?void 0:j.product)==null?void 0:ie.name,currentPrice:j==null?void 0:j.currentMasterPrice,newPrice:j==null?void 0:j.newPrice,affectedItemsCount:h==null?void 0:h.length});const w=async()=>{if(l){u(!0);try{await r(l)}catch($){console.error("Resolution error:",$)}finally{u(!1)}}},E=$=>({OVERWRITE:"",PRESERVE:"",RELATIVE:""})[$]||"",A=$=>({OVERWRITE:"#dc2626",PRESERVE:"#10b981",RELATIVE:"#4f46e5"})[$]||"#666";return e.jsx("div",{className:"modal-overlay",onClick:n,children:e.jsxs("div",{className:"modal-content",onClick:$=>$.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:" Pricing Conflicts Detected"}),e.jsxs("p",{className:"modal-subtitle",children:[((X=j==null?void 0:j.product)==null?void 0:X.name)||"Product"," ",(Se=j==null?void 0:j.product)!=null&&Se.sku?`(${j.product.sku})`:""]})]}),e.jsx("button",{className:"btn-close",onClick:n,children:""})]}),e.jsxs("div",{className:"impact-summary-section",children:[e.jsxs("div",{className:"summary-card",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("label",{children:"Master Price:"}),e.jsxs("strong",{children:["",((j==null?void 0:j.currentMasterPrice)||0).toFixed(2)]})]}),e.jsx("div",{className:"summary-arrow",children:""}),e.jsxs("div",{className:"summary-item",children:[e.jsx("label",{children:"New Price:"}),e.jsxs("strong",{className:"text-primary",children:["",((j==null?void 0:j.newPrice)||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"affected-count-badge",children:[(j==null?void 0:j.totalAffectedItems)||0," segment",((j==null?void 0:j.totalAffectedItems)||0)!==1?"s":""," with custom pricing"]})]}),e.jsxs("div",{className:"affected-items-section",children:[e.jsx("h4",{children:" Impact on Existing Prices:"}),e.jsx("div",{className:"affected-table-wrapper",children:e.jsxs("table",{className:"affected-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Segment"}),e.jsx("th",{children:"Current Price"}),e.jsx("th",{children:"New Zone Price"}),e.jsx("th",{children:"Difference"})]})}),e.jsx("tbody",{children:h.map(($,re)=>{var Z,ue,ve,O,J,z;const B=((Z=$.pricing)==null?void 0:Z.currentPrice)||((ue=$.pricing)==null?void 0:ue.currentEffectivePrice)||0,ne=((ve=$.pricing)==null?void 0:ve.direction)==="increase";return e.jsxs("tr",{children:[e.jsx("td",{className:"segment-name",children:$.priceBook?e.jsxs("div",{children:[e.jsxs("strong",{children:[" ",$.priceBook.name]}),$.zone&&e.jsxs("div",{style:{fontSize:"0.85em",color:"#666"},children:["Zone: ",$.zone.name]}),$.segment&&e.jsxs("div",{style:{fontSize:"0.85em",color:"#666"},children:["Segment: ",$.segment.name]})]}):$.segment?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:$.segment.name}),$.segment.code&&e.jsx("small",{className:"segment-code",children:$.segment.code})]}):e.jsx("strong",{children:"Unknown"})}),e.jsxs("td",{className:"price-current",children:["",B.toFixed(2)]}),e.jsxs("td",{className:"price-new",children:["",(((O=$.pricing)==null?void 0:O.newZonePrice)||0).toFixed(2)]}),e.jsxs("td",{className:`price-diff ${ne?"increase":"decrease"}`,children:[e.jsxs("span",{className:"diff-amount",children:[ne?"+":"","",(((J=$.pricing)==null?void 0:J.priceDifference)||0).toFixed(2)]}),e.jsxs("span",{className:"diff-percent",children:["(",ne?"+":"",((z=$.pricing)==null?void 0:z.percentageDifference)||"0%",")"]})]})]},re)})})]})})]}),e.jsxs("div",{className:"resolution-options",children:[e.jsx("h4",{children:" Choose Resolution Strategy:"}),e.jsx("div",{className:"options-grid",children:v.map($=>{var re;return e.jsxs("div",{className:`option-card ${l===$.id?"selected":""}`,onClick:()=>d($.id),style:{borderColor:l===$.id?A($.id):"#e0e0e0"},children:[e.jsx("div",{className:"option-icon",style:{background:A($.id)},children:E($.id)}),e.jsxs("div",{className:"option-content",children:[e.jsx("h5",{children:$.label}),e.jsx("p",{className:"option-description",children:$.description}),$.id==="RELATIVE"&&((re=$.impact)==null?void 0:re.preview)&&$.impact.preview.length>0&&e.jsxs("div",{className:"option-preview",children:[e.jsx("strong",{children:"Preview:"}),e.jsx("ul",{children:$.impact.preview.map((B,ne)=>e.jsxs("li",{children:[e.jsxs("span",{className:"preview-segment",children:[B.segment,":"]}),e.jsxs("span",{className:"preview-prices",children:["",B.currentPrice.toFixed(2),"  ",B.newPrice.toFixed(2)]}),e.jsxs("span",{className:"preview-diff",children:["(",B.difference>0?"+":"","",B.difference.toFixed(2),")"]})]},ne))})]})]}),l===$.id&&e.jsx("div",{className:"option-checkmark",children:""})]},$.id)})})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-cancel",onClick:n,disabled:m,children:"Cancel"}),e.jsx("button",{className:"btn-confirm",onClick:w,disabled:!l||m,style:{background:l?A(l):"#ccc"},children:m?"Applying...":"Apply Resolution"})]})]})})},r9=()=>{const[s,r]=y.useState([]),[n,l]=y.useState(!1),[d,m]=y.useState(!1),[u,p]=y.useState(null),[g,h]=y.useState(!1),[j,v]=y.useState(null),[w,E]=y.useState([]),[A,P]=y.useState(!1),[q,V]=y.useState(!1),[M,R]=y.useState(null),[ae,H]=y.useState([]),[D,k]=y.useState({product:"",basePrice:"",compareAtPrice:""}),[Q,W]=y.useState({name:"",currency:"INR",zone:"",segment:"",isMaster:!1,parentBook:"",isOverride:!1,overridePriority:0,description:""}),[te,ie]=y.useState(null),[X,Se]=y.useState(!1),[$,re]=y.useState(!1),[B,ne]=y.useState([]),[Z,ue]=y.useState([]),[ve,O]=y.useState(""),[J,z]=y.useState(""),[ye,xe]=y.useState(""),[I,L]=y.useState(1),[_,me]=y.useState(5),fe=qa.useMemo(()=>s.filter(ge=>{var ys,at,Yt;const yt=ve===""||ge.name.toLowerCase().includes(ve.toLowerCase())||((ys=ge.description)==null?void 0:ys.toLowerCase().includes(ve.toLowerCase())),_t=J===""||((at=ge.zone)==null?void 0:at._id)===J,ps=ye===""||((Yt=ge.segment)==null?void 0:Yt._id)===ye;return yt&&_t&&ps}),[s,ve,J,ye]),Me=Math.ceil(fe.length/_),se=qa.useMemo(()=>{const ge=(I-1)*_;return fe.slice(ge,ge+_)},[fe,I,_]);qa.useEffect(()=>{L(1)},[ve,J,ye]),y.useEffect(()=>{Be(),le()},[]);const le=async()=>{try{const yt={Authorization:`Bearer ${localStorage.getItem("token")}`},[_t,ps]=await Promise.all([fetch("/api/admin/pricing/geo-zones",{headers:yt}),fetch("/api/admin/pricing/user-segments",{headers:yt})]);if(_t.ok){const ys=await _t.json();ne(ys.zones||[])}if(ps.ok){const ys=await ps.json();ue(ys.segments||[])}}catch(ge){console.error("Failed to fetch lookup data:",ge)}},Be=async()=>{l(!0);try{const ge=localStorage.getItem("token"),yt=await fetch("/api/admin/price-books",{headers:{Authorization:`Bearer ${ge}`}});if(yt.ok){const _t=await yt.json();r(_t.priceBooks||[])}}catch(ge){console.error("Failed to fetch price books:",ge)}finally{l(!1)}},Qe=async ge=>{P(!0);try{const yt=localStorage.getItem("token"),_t=await fetch(`/api/admin/price-book-entries?priceBook=${ge}`,{headers:{Authorization:`Bearer ${yt}`}});if(_t.ok){const ps=await _t.json();E(ps.entries||[])}}catch(yt){console.error("Failed to fetch price book entries:",yt)}finally{P(!1)}},tt=async()=>{try{const ge=await fetch("/api/products");if(ge.ok){const yt=await ge.json();H(yt.products||yt||[])}}catch(ge){console.error("Failed to fetch products:",ge)}},ot=async ge=>{ge.preventDefault(),l(!0);try{const yt=localStorage.getItem("token"),_t=u?`/api/admin/price-books/${u._id}`:"/api/admin/price-books",ps=await fetch(_t,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${yt}`},body:JSON.stringify(Q)});if(ps.ok)Rt.success(u?"Price book updated!":"Price book created!"),m(!1),Bs(),Be();else{const ys=await ps.json();Rt.error(ys.message||"Failed to save price book")}}catch(yt){console.error("Error saving price book:",yt),Rt.error("Failed to save price book")}finally{l(!1)}},Ve=async ge=>{var _t,ps;if(ge.preventDefault(),!j)return;P(!0);const yt=localStorage.getItem("token");try{if(!M&&parseFloat(D.basePrice)>0){const Ms={zoneId:((_t=j.zone)==null?void 0:_t._id)||null,segmentId:((ps=j.segment)==null?void 0:ps._id)||null,productId:D.product,newPrice:parseFloat(D.basePrice)},rs=await fetch("/api/admin/pricing/detect-conflicts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${yt}`},body:JSON.stringify(Ms)});if(rs.ok){const ea=await rs.json();if(console.log(" Conflict Check Response:",ea),ea.success&&ea.data&&(ea.data.hasConflict||ea.data.hasConflicts)){console.log(" CONFLICTS DETECTED! Showing modal with data:",ea.data),ie({...ea.data,payload:Ms}),Se(!0),P(!1);return}else console.log(" No conflicts detected, proceeding with save")}}const ys=M?`/api/admin/price-book-entries/${M._id}`:"/api/admin/price-book-entries",at={priceBook:j._id,product:D.product,basePrice:parseFloat(D.basePrice),compareAtPrice:D.compareAtPrice?parseFloat(D.compareAtPrice):void 0},Yt=await fetch(ys,{method:M?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${yt}`},body:JSON.stringify(at)});if(Yt.ok)Rt.success(M?"Price updated!":"Product price added!"),V(!1),Ss(),Qe(j._id);else{const Ms=await Yt.json();Rt.error(Ms.message||"Failed to save price")}}catch(ys){console.error("Error saving price entry:",ys),Rt.error("Failed to save price")}finally{P(!1)}},Ct=async ge=>{var yt,_t,ps,ys,at;if(te){re(!0);try{const Yt=localStorage.getItem("token"),Ms=(yt=te.payload)==null?void 0:yt.productId,rs=(_t=te.payload)==null?void 0:_t.newPrice,ea=((ps=te.impactSummary)==null?void 0:ps.currentMasterPrice)||0,He=(ys=te.payload)==null?void 0:ys.zoneId,mt=(at=te.payload)==null?void 0:at.segmentId,xt=te.conflicts||[],Ds={resolutionId:ge,productId:Ms,newPrice:rs,oldPrice:ea,zoneId:He,segmentId:mt,conflicts:xt,updateLevel:"ZONE"};console.log(" Sending conflict resolution request:",Ds);const Vs=await fetch("/api/admin/pricing/resolve-conflict",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Yt}`},body:JSON.stringify(Ds)});if(Vs.ok)Rt.success("Conflict resolved and price saved successfully!"),Se(!1),V(!1),Ss(),ie(null),j&&Qe(j._id);else{const Ks=await Vs.json();console.error(" Conflict resolution failed:",{status:Vs.status,statusText:Vs.statusText,error:Ks,sentRequest:Ds}),Rt.error(Ks.message||"Failed to resolve conflict")}}catch(Yt){console.error("Error resolving conflict:",Yt),Rt.error("Failed to resolve conflict")}finally{re(!1)}}},ds=async ge=>{if(confirm("Are you sure you want to delete this price entry?")&&j)try{const yt=localStorage.getItem("token"),_t=await fetch(`/api/admin/price-book-entries/${ge}`,{method:"DELETE",headers:{Authorization:`Bearer ${yt}`}});if(_t.ok)Rt.success("Price entry deleted!"),Qe(j._id);else{const ps=await _t.json();Rt.error(ps.message||"Failed to delete price entry")}}catch(yt){console.error("Error deleting entry:",yt),Rt.error("Failed to delete price entry")}},At=async ge=>{if(confirm("Are you sure you want to delete this price book? All associated price entries will also be deleted."))try{const yt=localStorage.getItem("token"),_t=await fetch(`/api/admin/price-books/${ge}`,{method:"DELETE",headers:{Authorization:`Bearer ${yt}`}});if(_t.ok)Rt.success("Price book deleted!"),Be();else{const ps=await _t.json();Rt.error(ps.message||"Failed to delete price book")}}catch(yt){console.error("Error deleting price book:",yt),Rt.error("Failed to delete price book")}},as=ge=>{var yt,_t;p(ge),W({name:ge.name,currency:ge.currency,zone:((yt=ge.zone)==null?void 0:yt._id)||"",segment:((_t=ge.segment)==null?void 0:_t._id)||"",isMaster:ge.isMaster||!1,parentBook:ge.parentBook||"",isOverride:ge.isOverride||!1,overridePriority:ge.overridePriority||0,description:ge.description||""}),m(!0)},hs=ge=>{v(ge),h(!0),Qe(ge._id),tt()},Vt=ge=>{var yt;if(!ge.product){Rt.success("Cannot edit this entry: Product data is missing. Please delete and recreate this entry.");return}R(ge),k({product:ge.product._id,basePrice:ge.basePrice.toString(),compareAtPrice:((yt=ge.compareAtPrice)==null?void 0:yt.toString())||""}),V(!0)},Bs=()=>{W({name:"",currency:"INR",zone:"",segment:"",isMaster:!1,parentBook:"",isOverride:!1,overridePriority:0,description:""}),p(null)},Ss=()=>{k({product:"",basePrice:"",compareAtPrice:""}),R(null)},wa=async ge=>{const yt=prompt("Enter name for the copied price book:",`${ge.name} (Copy)`);if(!yt||yt.trim()==="")return;l(!0);const _t=Rt.loading("Copying price book...");try{const ps=localStorage.getItem("token"),ys=await fetch(`/api/admin/price-books/${ge._id}/copy`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ps}`},body:JSON.stringify({name:yt.trim()})});if(ys.ok){const at=await ys.json();Rt.dismiss(_t),Rt.success(`Price book copied! ${at.entriesCopied||0} product prices duplicated.`),Be()}else{const at=await ys.json();Rt.dismiss(_t),Rt.error(at.message||"Failed to copy price book")}}catch(ps){console.error("Error copying price book:",ps),Rt.dismiss(_t),Rt.error("Failed to copy price book")}finally{l(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Vp,{className:"text-indigo-600"}),"Price Book Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage price books and assign product prices for different pricing strategies"})]}),e.jsxs("div",{className:"mb-6 bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search price books...",value:ve,onChange:ge=>O(ge.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),e.jsxs("select",{value:J,onChange:ge=>z(ge.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Zones"}),B.map(ge=>e.jsx("option",{value:ge._id,children:ge.name},ge._id))]}),e.jsxs("select",{value:ye,onChange:ge=>xe(ge.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Segments"}),Z.map(ge=>e.jsx("option",{value:ge._id,children:ge.name},ge._id))]}),e.jsxs("button",{onClick:()=>{Bs(),m(!0)},className:"bg-indigo-600 text-white px-5 py-2.5 rounded-lg hover:bg-indigo-700 flex items-center gap-2 font-medium shadow-sm",children:[e.jsx(Zs,{size:20}),"New Price Book"]})]}),e.jsxs("div",{className:"flex gap-6 mt-4 pt-4 border-t border-gray-100 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),e.jsxs("span",{children:[s.filter(ge=>ge.isMaster).length," Master"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsxs("span",{children:[s.filter(ge=>ge.zone).length," Zone-Specific"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{children:[s.filter(ge=>ge.segment).length," Segment-Specific"]})]}),e.jsxs("div",{className:"ml-auto font-medium text-gray-800",children:[fe.length," of ",s.length," price books"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n&&s.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-16",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"}),"Loading price books..."]}):fe.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Vp,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:s.length===0?"No price books found. Create one to get started.":"No price books match your search criteria."}),s.length>0&&e.jsx("button",{onClick:()=>{O(""),z(""),xe("")},className:"mt-4 text-indigo-600 hover:underline",children:"Clear filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Price Book"}),e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Scope"}),e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Currency"}),e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"text-center px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:se.map(ge=>e.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ge.isMaster?"bg-indigo-50/30":""}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${ge.isMaster?"bg-indigo-100 text-indigo-600":ge.zone&&ge.segment?"bg-emerald-100 text-emerald-600":ge.zone?"bg-purple-100 text-purple-600":ge.segment?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(Vp,{size:20})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[ge.name,ge.isMaster&&e.jsx(mi,{size:14,className:"text-amber-500 fill-amber-500"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:ge.description||(ge.isMaster?"Base prices for all products":"Custom pricing rules")})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[ge.isMaster&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:"Master"}),ge.zone&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[" ",ge.zone.name]}),ge.segment&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[" ",ge.segment.name]}),!ge.zone&&!ge.segment&&!ge.isMaster&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Global"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-lg bg-gray-100 text-gray-800 font-mono text-sm font-medium",children:ge.currency})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:ge.createdAt?new Date(ge.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>hs(ge),className:"p-2 rounded-lg bg-green-50 text-green-600 hover:bg-green-100 transition-colors",title:"View Prices",children:e.jsx(zr,{size:18})}),e.jsx("button",{onClick:()=>wa(ge),className:"p-2 rounded-lg bg-purple-50 text-purple-600 hover:bg-purple-100 transition-colors",title:"Copy Price Book",children:e.jsx(df,{size:18})}),e.jsx("button",{onClick:()=>as(ge),className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors",title:"Edit",children:e.jsx(Fd,{size:18})}),e.jsx("button",{onClick:()=>At(ge._id),className:`p-2 rounded-lg transition-colors ${ge.isMaster?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100"}`,title:ge.isMaster?"Cannot delete Master":"Delete",disabled:ge.isMaster,children:e.jsx(ra,{size:18})})]})})]},ge._id))})]})}),fe.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",(I-1)*_+1," to ",Math.min(I*_,fe.length)," of ",fe.length]}),e.jsxs("select",{value:_,onChange:ge=>{me(Number(ge.target.value)),L(1)},className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:5,children:"5 per page"}),e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:20,children:"20 per page"}),e.jsx("option",{value:50,children:"50 per page"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>L(1),disabled:I===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),e.jsx("button",{onClick:()=>L(ge=>Math.max(1,ge-1)),disabled:I===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),Array.from({length:Math.min(5,Me)},(ge,yt)=>{let _t;return Me<=5||I<=3?_t=yt+1:I>=Me-2?_t=Me-4+yt:_t=I-2+yt,e.jsx("button",{onClick:()=>L(_t),className:`px-3 py-1.5 text-sm rounded-lg ${I===_t?"bg-indigo-600 text-white":"border border-gray-300 hover:bg-gray-100"}`,children:_t},_t)}),e.jsx("button",{onClick:()=>L(ge=>Math.min(Me,ge+1)),disabled:I===Me,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),e.jsx("button",{onClick:()=>L(Me),disabled:I===Me,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:u?"Edit Price Book":"Create Price Book"}),e.jsxs("form",{onSubmit:ot,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price Book Name *"}),e.jsx("input",{type:"text",value:Q.name,onChange:ge=>W({...Q,name:ge.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Standard Pricing, Seasonal Sale",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Currency *",Q.zone&&e.jsx("span",{className:"ml-2 text-xs text-indigo-600 font-normal",children:"(Auto-set from GeoZone)"})]}),e.jsx("select",{value:Q.currency,onChange:ge=>W({...Q,currency:ge.target.value}),className:`w-full border rounded-lg px-3 py-2 ${Q.zone?"bg-gray-100 cursor-not-allowed":""}`,disabled:!!Q.zone,required:!0,children:j1.map(ge=>e.jsxs("option",{value:ge.code,children:[ge.code," (",ge.symbol,") - ",ge.name]},ge.code))}),Q.zone?e.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:" Currency automatically set from selected GeoZone"}):e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a GeoZone to auto-set currency, or choose manually"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Geo Zone (Optional)"}),e.jsxs("select",{value:Q.zone,onChange:ge=>{const yt=ge.target.value,_t=B.find(ps=>ps._id===yt);W({...Q,zone:yt,currency:(_t==null?void 0:_t.currency_code)||Q.currency})},className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"-- No Zone (Global) --"}),B.map(ge=>e.jsxs("option",{value:ge._id,children:[ge.name," (",ge.currency_code||"INR",")"]},ge._id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Limit these prices to a specific geographic area. Currency will be auto-set."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"User Segment (Optional)"}),e.jsxs("select",{value:Q.segment,onChange:ge=>W({...Q,segment:ge.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"-- No Segment (All Users) --"}),Z.map(ge=>e.jsxs("option",{value:ge._id,children:[ge.name," (",ge.code,")"]},ge._id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Limit these prices to a specific group of customers"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:Q.isMaster,onChange:ge=>W({...Q,isMaster:ge.target.checked}),className:"rounded text-indigo-600"}),e.jsx("span",{className:"text-sm font-bold text-indigo-900",children:" Master Price Book"})]}),e.jsx("p",{className:"text-xs text-indigo-700 mb-1",children:" Contains base prices for ALL products (foundation layer)"}),e.jsx("p",{className:"text-xs text-indigo-600",children:" Only ONE master book should exist. Zone/Segment books override these prices."})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),Bs()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(vc,{size:18}),n?"Saving...":"Save"]})]})]})]})}),g&&j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[j.name," - Product Prices"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage product prices for this price book"})]}),e.jsx("button",{onClick:()=>{h(!1),v(null),E([])},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ss,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{Ss(),V(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Zs,{size:20}),"Add Product Price"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Base Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Compare At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:A?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:'No products added yet. Click "Add Product Price" to get started.'})}):w.map(ge=>{var yt,_t,ps,ys;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[((yt=ge.product)==null?void 0:yt.image)&&e.jsx("img",{src:ge.product.image,alt:ge.product.name,className:"w-10 h-10 rounded object-cover"}),e.jsx("span",{className:"font-medium",children:((_t=ge.product)==null?void 0:_t.name)||"Unknown Product"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:((ys=(ps=ge.product)==null?void 0:ps.category)==null?void 0:ys.name)||"-"}),e.jsxs("td",{className:"px-6 py-4 font-semibold text-green-600",children:[j.currency," ",ge.basePrice.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:ge.compareAtPrice?`${j.currency} ${ge.compareAtPrice.toFixed(2)}`:"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Vt(ge),className:"text-blue-600 hover:text-blue-800",children:e.jsx(Fd,{size:18})}),e.jsx("button",{onClick:()=>ds(ge._id),className:"text-red-600 hover:text-red-800",children:e.jsx(ra,{size:18})})]})})]},ge._id)})})]})})]})]})}),q&&j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999]",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:M?"Edit Product Price":"Add Product Price"}),e.jsxs("form",{onSubmit:Ve,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product *"}),e.jsxs("select",{value:D.product,onChange:ge=>k({...D,product:ge.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,disabled:!!M,children:[e.jsx("option",{value:"",children:"Select Product"}),ae.map(ge=>e.jsx("option",{value:ge._id,children:ge.name},ge._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Base Price (",j.currency,") *"]}),e.jsx("input",{type:"number",step:"0.01",value:D.basePrice,onChange:ge=>k({...D,basePrice:ge.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"0.00",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Compare At Price (",j.currency,")"]}),e.jsx("input",{type:"number",step:"0.01",value:D.compareAtPrice,onChange:ge=>k({...D,compareAtPrice:ge.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"0.00 (optional)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Original price before discount (for showing savings)"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{V(!1),Ss()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:A,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(vc,{size:18}),A?"Saving...":"Save"]})]})]})]})}),(console.log(" Modal Render Check:",{showConflictModal:X,hasConflictData:!!te,conflictData:te}),null),X&&te&&e.jsx(z1,{conflict:te,onResolve:Ct,onCancel:()=>{Se(!1),ie(null),P(!1)}})]})},Sd=[{value:"geo_zone",label:"Geo Zone",type:"select",optionsSrc:"zones"},{value:"user_segment",label:"User Segment",type:"select",optionsSrc:"segments"},{value:"category",label:"Product Category",type:"select",optionsSrc:"categories"},{value:"product_id",label:"Specific Product",type:"select",optionsSrc:"products"},{value:"quantity",label:"Cart Quantity",type:"number"},{value:"order_value",label:"Order Value",type:"number"},{value:"day_of_week",label:"Day of Week (0-6)",type:"select",options:[{value:"0",label:"Sunday"},{value:"1",label:"Monday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"}]}],n9=[{value:"EQUALS",label:"Equals (=)"},{value:"NOT_EQUALS",label:"Not Equals (!=)"},{value:"GT",label:"Greater Than (>)"},{value:"LT",label:"Less Than (<)"},{value:"GTE",label:"Greater/Equal (>=)"},{value:"LTE",label:"Less/Equal (<=)"},{value:"IN",label:"In List (comma separated)"},{value:"CONTAINS",label:"Contains Text"}],i9=()=>{var O,J;const[s,r]=y.useState([]),[n,l]=y.useState(!1),[d,m]=y.useState(null),[u,p]=y.useState(!1),[g,h]=y.useState([]),[j,v]=y.useState([]),[w,E]=y.useState([]),[A,P]=y.useState([]),[q,V]=y.useState([]),[M,R]=y.useState([]),[ae,H]=y.useState("AND"),[D,k]=y.useState({appliesTo:"GLOBAL",modifierType:"PERCENT_DEC",value:0,priority:0,isActive:!0,isStackable:!0,reason:""}),[Q,W]=y.useState({});y.useEffect(()=>{te(),ie()},[]);const te=async()=>{p(!0);try{const ye=await(await fetch("/api/admin/price-modifiers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();r(ye.modifiers||[])}catch(z){console.error("Failed to fetch modifiers:",z)}finally{p(!1)}},ie=async()=>{try{const[z,ye,xe,I,L]=await Promise.all([fetch("/api/admin/pricing/geo-zones",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/user-segments",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/products",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/attribute-types",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]),[_,me,fe,Me,se]=await Promise.all([z.json(),ye.json(),xe.json(),I.json(),L.json()]);h(_.zones||[]),v(me.segments||[]),E(fe.products||[]),P(Me.attributeTypes||[]),V(se.categories||[])}catch(z){console.error("Failed to fetch lookup data:",z)}},X=async()=>{const z={};if(D.value===void 0||D.value===null||String(D.value).trim()==="")z.value="Value is required";else{const ye=Number(D.value);isNaN(ye)?z.value="Value must be a valid number":D.modifierType.includes("PERCENT")?(ye<0||ye>100)&&(z.value="Percentage value must be between 0 and 100"):ye<0&&(z.value="Flat amount must be a positive number")}if(D.priority===void 0||D.priority===null||String(D.priority).trim()===""?z.priority="Priority is required":Number(D.priority)<0&&(z.priority="Priority must be 0 or higher"),(!D.reason||D.reason.trim()==="")&&(z.reason="Reason/Description is required"),D.validFrom&&D.validTo){const ye=new Date(D.validFrom);new Date(D.validTo)<=ye&&(z.validTo="Valid To date must be after Valid From date")}if(D.minQuantity!==void 0&&D.minQuantity<0&&(z.minQuantity="Min Quantity cannot be negative"),D.maxQuantity!==void 0&&D.maxQuantity<0&&(z.maxQuantity="Max Quantity cannot be negative"),D.minQuantity!==void 0&&D.maxQuantity!==void 0&&D.maxQuantity>0&&D.minQuantity>D.maxQuantity&&(z.maxQuantity="Max Quantity must be greater than or equal to Min Quantity"),D.appliesTo==="ZONE"&&!D.geoZone&&(z.geoZone="Geo Zone is required when scope is ZONE"),D.appliesTo==="SEGMENT"&&!D.userSegment&&(z.userSegment="User Segment is required when scope is SEGMENT"),D.appliesTo==="PRODUCT"&&!D.product&&(z.product="Product is required when scope is PRODUCT"),D.appliesTo==="ATTRIBUTE"&&(D.attributeType||(z.attributeType="Attribute Type is required when scope is ATTRIBUTE"),D.attributeValue||(z.attributeValue="Attribute Value is required when scope is ATTRIBUTE")),Object.keys(z).length>0){W(z);return}W({});try{const ye=d?`/api/admin/price-modifiers/${d._id}`:"/api/admin/price-modifiers",xe=await fetch(ye,{method:d?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(D)}),I=await xe.json();xe.ok?(alert(d?"Modifier updated successfully!":"Modifier created successfully!"),te(),l(!1),m(null),k({appliesTo:"GLOBAL",modifierType:"PERCENT_DEC",value:0,priority:0,isActive:!0,isStackable:!0,reason:"",conditions:null}),R([])):alert("Error: "+(I.message||"Failed to save modifier"))}catch(ye){console.error("Failed to save modifier:",ye),alert("Failed to save modifier. Please try again.")}},Se=async z=>{if(confirm("Delete this modifier?"))try{(await fetch(`/api/admin/price-modifiers/${z}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok&&te()}catch(ye){console.error("Failed to delete modifier:",ye)}},$=z=>{if(m(z),k({...z,validFrom:z.validFrom?new Date(z.validFrom).toISOString().split("T")[0]:void 0,validTo:z.validTo?new Date(z.validTo).toISOString().split("T")[0]:void 0}),z.appliesTo==="COMBINATION"&&z.conditions){const ye=[],xe=z.conditions.OR?"OR":"AND";H(xe);const I=L=>{L.AND?L.AND.forEach(_=>I(_)):L.OR?L.OR.forEach(_=>I(_)):L.field&&ye.push({id:Math.random().toString(36).substr(2,9),field:L.field,operator:L.operator,value:Array.isArray(L.value)?L.value.join(","):String(L.value)})};I(z.conditions),ye.length===0&&ye.push({id:"1",field:"geo_zone",operator:"EQUALS",value:""}),R(ye)}else R([]),H("AND");l(!0)},re=()=>{R([...M,{id:Math.random().toString(36).substr(2,9),field:"geo_zone",operator:"EQUALS",value:""}])},B=z=>{R(M.filter(ye=>ye.id!==z))},ne=(z,ye,xe)=>{const I=M.map(L=>L.id===z?{...L,[ye]:xe}:L);R(I),Z(I)},Z=z=>{if(z.length===0){k(xe=>({...xe,conditions:null}));return}const ye=z.map(xe=>{let I=xe.value;return xe.operator==="IN"?I=xe.value.split(",").map(L=>L.trim()):!isNaN(Number(xe.value))&&xe.value!==""&&(I=Number(xe.value)),{field:xe.field,operator:xe.operator,value:I}});k(xe=>({...xe,conditions:{[ae]:ye}}))},ue=z=>({GLOBAL:"bg-purple-100 text-purple-800",ZONE:"bg-blue-100 text-blue-800",SEGMENT:"bg-green-100 text-green-800",PRODUCT:"bg-orange-100 text-orange-800",ATTRIBUTE:"bg-pink-100 text-pink-800"})[z]||"bg-gray-100 text-gray-800",ve=z=>z.includes("INC")?"":z.includes("DEC")?"":"";return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Price Modifier Rules"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Create dynamic pricing rules for different scopes"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{m(null),k({appliesTo:"GLOBAL",modifierType:"PERCENT_DEC",value:0,priority:0,isActive:!0,isStackable:!0,reason:"",conditions:null}),R([{id:"1",field:"geo_zone",operator:"EQUALS",value:""}]),l(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(Zs,{className:"w-4 h-4"}),"Create New Modifier"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Active Modifiers"}),u?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading modifiers..."}):s.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No modifiers yet. Create one to get started!"}):e.jsx("div",{className:"space-y-4",children:s.map(z=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ue(z.appliesTo)}`,children:z.appliesTo}),e.jsx("span",{className:"text-2xl",children:ve(z.modifierType)}),e.jsx("span",{className:"font-semibold text-lg",children:z.modifierType.includes("PERCENT")?`${z.value}%`:`${z.value}`}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(Priority: ",z.priority,")"]}),!z.isActive&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:"Inactive"})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:z.reason||"No description"}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600",children:[z.geoZone&&e.jsxs("span",{children:["Zone: ",z.geoZone.name||z.geoZone]}),z.userSegment&&e.jsxs("span",{children:["Segment: ",z.userSegment.name||z.userSegment]}),z.product&&e.jsxs("span",{children:["Product: ",z.product.name||z.product]}),z.attributeType&&e.jsxs("span",{children:["Attribute: ",z.attributeType.attributeName||z.attributeType]}),z.minQuantity&&e.jsxs("span",{children:["Min Qty: ",z.minQuantity]}),z.maxQuantity&&e.jsxs("span",{children:["Max Qty: ",z.maxQuantity]}),z.validFrom&&e.jsxs("span",{children:["From: ",new Date(z.validFrom).toLocaleDateString()]}),z.validTo&&e.jsxs("span",{children:["To: ",new Date(z.validTo).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>$(z),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>z._id&&Se(z._id),className:"px-3 py-1 text-red-600 hover:bg-red-50 rounded",children:"Delete"})]})]})},z._id))})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-semibold",children:[d?"Edit":"Create"," Price Modifier"]}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ss,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Applies To (Scope) *"}),e.jsxs("select",{value:D.appliesTo,onChange:z=>k({...D,appliesTo:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"GLOBAL",children:"Global (All Products)"}),e.jsx("option",{value:"ZONE",children:"Geo Zone"}),e.jsx("option",{value:"SEGMENT",children:"User Segment"}),e.jsx("option",{value:"PRODUCT",children:"Specific Product"}),e.jsx("option",{value:"ATTRIBUTE",children:"Product Attribute"}),e.jsx("option",{value:"COMBINATION",children:"Combination Rule (Advanced)"})]})]}),D.appliesTo==="ZONE"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Geo Zone *"}),e.jsxs("select",{value:D.geoZone||"",onChange:z=>k({...D,geoZone:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a zone..."}),g.map(z=>e.jsx("option",{value:z._id,children:z.name},z._id))]})]}),D.appliesTo==="SEGMENT"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Segment *"}),e.jsxs("select",{value:D.userSegment||"",onChange:z=>k({...D,userSegment:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a segment..."}),j.map(z=>e.jsxs("option",{value:z._id,children:[z.name," (",z.code,")"]},z._id))]})]}),D.appliesTo==="PRODUCT"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),e.jsxs("select",{value:D.product||"",onChange:z=>k({...D,product:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a product..."}),w.map(z=>e.jsx("option",{value:z._id,children:z.name},z._id))]})]}),D.appliesTo==="ATTRIBUTE"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attribute Type *"}),e.jsxs("select",{value:D.attributeType||"",onChange:z=>k({...D,attributeType:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select an attribute..."}),A.map(z=>e.jsx("option",{value:z._id,children:z.attributeName},z._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attribute Value"}),e.jsx("input",{type:"text",value:D.attributeValue||"",onChange:z=>k({...D,attributeValue:z.target.value}),placeholder:"e.g., GLOSSY, A4, etc.",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to apply to all values of this attribute"})]})]}),D.appliesTo==="COMBINATION"&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logic Operator"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{H("AND"),Z(M)},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${ae==="AND"?"bg-blue-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"AND (All must match)"}),e.jsx("button",{type:"button",onClick:()=>{H("OR"),Z(M)},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${ae==="OR"?"bg-green-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"OR (Any can match)"})]})]}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rule Conditions (",ae==="AND"?"ALL must match":"ANY can match",")"]}),e.jsx("div",{className:"space-y-3",children:M.map(z=>{var ye,xe,I,L;return e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("select",{value:z.field,onChange:_=>ne(z.id,"field",_.target.value),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-sm",children:Sd.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))}),e.jsx("select",{value:z.operator,onChange:_=>ne(z.id,"operator",_.target.value),className:"w-32 px-2 py-1.5 border border-gray-300 rounded text-sm",children:n9.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))}),e.jsx("div",{className:"flex-1",children:((ye=Sd.find(_=>_.value===z.field))==null?void 0:ye.optionsSrc)==="zones"?e.jsxs("select",{value:z.value,onChange:_=>ne(z.id,"value",_.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Zone"}),g.map(_=>e.jsx("option",{value:_._id,children:_.name},_._id))]}):((xe=Sd.find(_=>_.value===z.field))==null?void 0:xe.optionsSrc)==="segments"?e.jsxs("select",{value:z.value,onChange:_=>ne(z.id,"value",_.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Segment"}),j.map(_=>e.jsx("option",{value:_._id,children:_.name},_._id))]}):((I=Sd.find(_=>_.value===z.field))==null?void 0:I.optionsSrc)==="categories"?e.jsxs("select",{value:z.value,onChange:_=>ne(z.id,"value",_.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Category"}),q.map(_=>e.jsx("option",{value:_._id,children:_.name},_._id))]}):((L=Sd.find(_=>_.value===z.field))==null?void 0:L.optionsSrc)==="products"?e.jsxs("select",{value:z.value,onChange:_=>ne(z.id,"value",_.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Product"}),w.map(_=>e.jsx("option",{value:_._id,children:_.name},_._id))]}):e.jsx("input",{type:"text",value:z.value,onChange:_=>ne(z.id,"value",_.target.value),placeholder:"Value",className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm"})}),e.jsx("button",{onClick:()=>B(z.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded",title:"Remove Condition",children:e.jsx(ss,{className:"w-4 h-4"})})]},z.id)})}),e.jsxs("button",{onClick:re,className:"mt-3 text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(Zs,{className:"w-3 h-3"})," Add Condition"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modifier Type *"}),e.jsxs("select",{value:D.modifierType,onChange:z=>k({...D,modifierType:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"PERCENT_INC",children:"Percentage Increase (+%)"}),e.jsx("option",{value:"PERCENT_DEC",children:"Percentage Decrease (-%)"}),e.jsx("option",{value:"FLAT_INC",children:"Flat Amount Increase (+)"}),e.jsx("option",{value:"FLAT_DEC",children:"Flat Amount Decrease (-)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value *"}),e.jsx("input",{type:"number",value:D.value||"",onChange:z=>k({...D,value:parseFloat(z.target.value)}),placeholder:(O=D.modifierType)!=null&&O.includes("PERCENT")?"10":"500",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${Q.value?"border-red-500":"border-gray-300"}`}),Q.value?e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{className:"w-3 h-3"}),Q.value]}):e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(J=D.modifierType)!=null&&J.includes("PERCENT")?"Enter percentage (e.g., 10 for 10%)":"Enter flat amount (e.g., 500 for 500)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("input",{type:"number",value:D.priority||0,onChange:z=>k({...D,priority:parseInt(z.target.value)}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${Q.priority?"border-red-500":"border-gray-300"}`}),Q.priority?e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{className:"w-3 h-3"}),Q.priority]}):e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher priority modifiers are applied first"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Quantity"}),e.jsx("input",{type:"number",value:D.minQuantity||"",onChange:z=>k({...D,minQuantity:parseInt(z.target.value)||void 0}),placeholder:"No minimum",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${Q.minQuantity?"border-red-500":"border-gray-300"}`}),Q.minQuantity&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{className:"w-3 h-3"}),Q.minQuantity]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Quantity"}),e.jsx("input",{type:"number",value:D.maxQuantity||"",onChange:z=>k({...D,maxQuantity:parseInt(z.target.value)||void 0}),placeholder:"No maximum",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${Q.maxQuantity?"border-red-500":"border-gray-300"}`}),Q.maxQuantity&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{className:"w-3 h-3"}),Q.maxQuantity]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),e.jsx("input",{type:"date",value:D.validFrom||"",onChange:z=>k({...D,validFrom:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid To"}),e.jsx("input",{type:"date",value:D.validTo||"",onChange:z=>k({...D,validTo:z.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${Q.validTo?"border-red-500":"border-gray-300"}`}),Q.validTo&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{className:"w-3 h-3"}),Q.validTo]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason / Description *"}),e.jsx("textarea",{value:D.reason||"",onChange:z=>k({...D,reason:z.target.value}),placeholder:"e.g., Summer Sale 2024, Corporate Bulk Discount, etc.",rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${Q.reason?"border-red-500":"border-gray-300"}`}),Q.reason&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{className:"w-3 h-3"}),Q.reason]})]}),e.jsxs("div",{className:"stacking-controls space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Modifier Behavior"}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-3 bg-white rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:D.isActive,onChange:z=>k({...D,isActive:z.target.checked}),className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Active"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Modifier is currently enabled and will be applied"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-3 bg-white rounded-lg border-2 border-gray-200 hover:border-green-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:D.isStackable,onChange:z=>{const ye=z.target.checked;k({...D,isStackable:ye})},className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Allow Stacking"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Can combine with other modifiers (e.g., 5% + 10% = 15%)"})]})]}),D.isStackable&&e.jsx("div",{className:"info-badge bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-800 flex items-start gap-2",children:[e.jsx("span",{className:"text-base",children:""}),e.jsx("span",{children:"Stackable modifiers can be combined. If a user qualifies for multiple stackable modifiers, all will be applied sequentially."})]})}),!D.isStackable&&e.jsx("div",{className:"warning-badge bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-yellow-800 flex items-start gap-2",children:[e.jsx("span",{className:"text-base",children:""}),e.jsx("span",{children:"Non-stackable modifiers will be applied based on priority. Only the highest priority modifier will be used."})]})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:X,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[e.jsx(vc,{className:"w-4 h-4"}),d?"Update":"Create"," Modifier"]})]})]})})]})},l9=()=>{var Q,W,te,ie;const[s,r]=y.useState([]),[n,l]=y.useState(!1),[d,m]=y.useState(null),[u,p]=y.useState(null),[g,h]=y.useState(!1),[j,v]=y.useState(""),[w,E]=y.useState(""),[A,P]=y.useState(""),[q,V]=y.useState(1),[M,R]=y.useState({currentPage:1,totalPages:1,totalLogs:0,limit:20});y.useEffect(()=>{ae()},[q,j,w,A]);const ae=async()=>{l(!0),m(null);try{const X=new URLSearchParams({page:q.toString(),limit:"20"});j&&X.append("search",j),w&&X.append("startDate",w),A&&X.append("endDate",A);const $=await(await fetch(`${we}/admin/pricing-logs?${X}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();$.success?(r($.logs||[]),R($.pagination)):m($.message||"Failed to fetch logs")}catch(X){console.error("Failed to fetch pricing logs:",X),m("Failed to fetch pricing logs. Please try again.")}finally{l(!1)}},H=X=>{p(X),h(!0)},D=X=>new Date(X).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=X=>`${X.toFixed(2)}`;return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(wr,{className:"w-7 h-7 md:w-8 md:h-8"}),"Pricing Audit Logs"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"View all pricing calculations and applied modifiers"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(an,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:j,onChange:X=>{v(X.target.value),V(1)},placeholder:"Order, product, user...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"date",value:w,onChange:X=>{E(X.target.value),V(1)},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"date",value:A,onChange:X=>{P(X.target.value),V(1)},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})}),d&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start gap-2",children:[e.jsx(xs,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:d})]}),n?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[e.jsx(Jt,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading pricing logs..."})]}):s.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[e.jsx(wr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No pricing logs found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Logs will appear here when orders are created"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:s.map(X=>{var Se,$,re,B,ne;return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[((Se=X.product)==null?void 0:Se.image)&&e.jsx("img",{src:X.product.image,alt:X.product.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 text-lg",children:["Order #",X.orderNumber]}),e.jsx("p",{className:"text-gray-700 mt-1",children:(($=X.product)==null?void 0:$.name)||"Unknown Product"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(re=X.user)==null?void 0:re.name," (",(B=X.user)==null?void 0:B.email,")"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["Qty: ",X.quantity]}),e.jsx("span",{children:""}),e.jsx("span",{className:"font-semibold text-green-600",children:k(X.totalPrice)}),e.jsx("span",{children:""}),e.jsxs("span",{children:[((ne=X.modifiers)==null?void 0:ne.length)||0," modifiers"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:D(X.createdAt)})]})]})}),e.jsxs("button",{onClick:()=>H(X),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx(zr,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"View Details"}),e.jsx("span",{className:"sm:hidden",children:"Details"})]})]})},X.orderId)})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing page ",M.currentPage," of ",M.totalPages," (",M.totalLogs," total logs)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>V(X=>Math.max(1,X-1)),disabled:q===1,className:"flex items-center gap-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Wl,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),e.jsx("span",{className:"px-4 py-2 text-sm font-medium",children:q}),e.jsxs("button",{onClick:()=>V(X=>Math.min(M.totalPages,X+1)),disabled:q===M.totalPages,className:"flex items-center gap-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(Xa,{className:"w-4 h-4"})]})]})]})})]}),g&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 md:p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Pricing Details"}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ss,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Order Information"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Order Number:"}),e.jsxs("span",{className:"font-semibold",children:["#",u.orderNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Product:"}),e.jsx("span",{className:"font-semibold",children:(Q=u.product)==null?void 0:Q.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"font-semibold",children:(W=u.user)==null?void 0:W.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"font-semibold",children:(te=u.user)==null?void 0:te.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"font-semibold",children:D(u.createdAt)})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3",children:["Applied Modifiers (",((ie=u.modifiers)==null?void 0:ie.length)||0,")"]}),u.modifiers&&u.modifiers.length>0?e.jsx("div",{className:"space-y-3",children:u.modifiers.map((X,Se)=>e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:[X.scope," Modifier"]}),e.jsxs("span",{className:`text-sm font-bold ${X.afterAmount>X.beforeAmount?"text-red-600":"text-green-600"}`,children:[X.afterAmount>X.beforeAmount?"+":"",k(X.afterAmount-X.beforeAmount)]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:X.reason||"No reason provided"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsxs("span",{children:["Before: ",k(X.beforeAmount)]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["After: ",k(X.afterAmount)]})]})]},X._id))}):e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 rounded-lg p-4",children:"No modifiers were applied to this order"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Price Summary"}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total Payable"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:k(u.totalPrice)})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Quantity: ",u.quantity," units"]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 p-4 md:p-6",children:e.jsx("button",{onClick:()=>h(!1),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})},cx=({options:s,value:r,onChange:n,placeholder:l="Select...",disabled:d=!1,loading:m=!1,error:u,emptyMessage:p="No options found",className:g="",icon:h})=>{const[j,v]=y.useState(!1),[w,E]=y.useState(""),[A,P]=y.useState(-1),q=y.useRef(null),V=y.useRef(null),M=y.useRef(null),R=s.find(te=>te.value===r),ae=(R==null?void 0:R.label)||"",H=s.filter(te=>te.label.toLowerCase().includes(w.toLowerCase()));y.useEffect(()=>{const te=ie=>{q.current&&!q.current.contains(ie.target)&&(v(!1),E(""),P(-1))};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[]),y.useEffect(()=>{if(j&&M.current&&A>=0){const te=M.current.children[A];te==null||te.scrollIntoView({block:"nearest"})}},[A,j]);const D=y.useCallback(()=>{d||m||(v(!0),E(""),P(-1),setTimeout(()=>{var te;return(te=V.current)==null?void 0:te.focus()},0))},[d,m]),k=y.useCallback(te=>{te.disabled||(n(te.value,te),v(!1),E(""),P(-1))},[n]),Q=te=>{if(!j){(te.key==="ArrowDown"||te.key==="Enter")&&(te.preventDefault(),D());return}switch(te.key){case"ArrowDown":te.preventDefault(),P(ie=>ie<H.length-1?ie+1:0);break;case"ArrowUp":te.preventDefault(),P(ie=>ie>0?ie-1:H.length-1);break;case"Enter":te.preventDefault(),A>=0&&H[A]&&k(H[A]);break;case"Escape":te.preventDefault(),v(!1),E("");break}},W=(te,ie)=>{if(!ie)return te;const X=new RegExp(`(${ie.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return te.split(X).map(($,re)=>X.test($)?e.jsx("span",{className:"bg-yellow-200 font-semibold",children:$},re):$)};return e.jsxs("div",{ref:q,className:`relative ${g}`,children:[e.jsxs("div",{onClick:D,onKeyDown:Q,tabIndex:d?-1:0,className:`flex items-center w-full px-4 py-3 border-2 rounded-lg cursor-pointer transition-all
          ${d?"bg-gray-100 cursor-not-allowed border-gray-200":"bg-white border-gray-300 hover:border-gray-400"}
          ${j?"border-blue-500 ring-2 ring-blue-200":""}
          ${u?"border-red-400":""}`,children:[h&&e.jsx("span",{className:"mr-2 text-gray-500",children:h}),e.jsx("span",{className:`flex-1 text-sm truncate ${r?"text-gray-900":"text-gray-400"}`,children:ae||l}),m?e.jsx(Fv,{className:"w-5 h-5 text-blue-500 animate-spin"}):r?e.jsx("button",{type:"button",onClick:te=>{te.stopPropagation(),n("",null)},className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(ss,{className:"w-4 h-4 text-gray-400"})}):e.jsx(Ym,{className:`w-5 h-5 text-gray-400 transition-transform ${j?"rotate-180":""}`})]}),j&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center px-3 py-2 border-b border-gray-100 bg-gray-50",children:[e.jsx(an,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("input",{ref:V,type:"text",value:w,onChange:te=>{E(te.target.value),P(0)},onKeyDown:Q,placeholder:"Type to search...",className:"flex-1 bg-transparent text-sm outline-none placeholder-gray-400"})]}),e.jsx("ul",{ref:M,className:"max-h-60 overflow-y-auto",children:H.length===0?e.jsx("li",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:p}):H.map((te,ie)=>e.jsxs("li",{onClick:()=>k(te),className:`flex items-center px-4 py-2 text-sm cursor-pointer transition-colors
                    ${te.disabled?"opacity-50 cursor-not-allowed":""}
                    ${ie===A?"bg-blue-50":"hover:bg-gray-50"}
                    ${te.value===r?"bg-blue-100 font-medium":""}`,children:[te.icon&&e.jsx("span",{className:"mr-2",children:te.icon}),e.jsx("span",{className:"flex-1",children:W(te.label,w)}),te.value===r&&e.jsx(Va,{className:"w-4 h-4 text-blue-600"})]},te.value))})]}),u&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:u})]})},o9=({value:s,onChange:r,onCurrencyChange:n,required:l=!0,disabled:d=!1,showCurrency:m=!0,showZipCode:u=!0,showCityDropdown:p=!0,placeholder:g={},className:h=""})=>{const[j,v]=y.useState([]),[w,E]=y.useState([]),[A,P]=y.useState([]),[q,V]=y.useState(""),[M,R]=y.useState({countries:!1,states:!1,cities:!1,currency:!1}),[ae,H]=y.useState({countries:"",states:"",cities:""});y.useEffect(()=>{D()},[]),y.useEffect(()=>{s.country?(k(s.country),W(s.country)):(E([]),V(""))},[s.country]),y.useEffect(()=>{s.country&&s.state&&p?Q(s.country,s.state):P([])},[s.state,p]);const D=async()=>{R(ie=>({...ie,countries:!0})),H(ie=>({...ie,countries:""}));try{const ie=localStorage.getItem("token"),Se=await(await fetch("/api/admin/locations/countries",{headers:{Authorization:`Bearer ${ie}`}})).json();Se.success?v(Se.data):H($=>({...$,countries:"Failed to load countries"}))}catch(ie){console.error("Error fetching countries:",ie),H(X=>({...X,countries:"Network error"}))}finally{R(ie=>({...ie,countries:!1}))}},k=async ie=>{R(X=>({...X,states:!0})),H(X=>({...X,states:""}));try{const X=localStorage.getItem("token"),$=await(await fetch(`/api/admin/locations/states?country=${ie}`,{headers:{Authorization:`Bearer ${X}`}})).json();$.success?E($.data):H(re=>({...re,states:"Failed to load states"}))}catch(X){console.error("Error fetching states:",X),H(Se=>({...Se,states:"Network error"}))}finally{R(X=>({...X,states:!1}))}},Q=async(ie,X)=>{R(Se=>({...Se,cities:!0})),H(Se=>({...Se,cities:""}));try{const Se=localStorage.getItem("token"),re=await(await fetch(`/api/admin/locations/cities?country=${ie}&state=${X}`,{headers:{Authorization:`Bearer ${Se}`}})).json();re.success?P(re.data):H(B=>({...B,cities:"Failed to load cities"}))}catch(Se){console.error("Error fetching cities:",Se),H($=>({...$,cities:"Network error"}))}finally{R(Se=>({...Se,cities:!1}))}},W=async ie=>{R(X=>({...X,currency:!0}));try{const X=localStorage.getItem("token"),$=await(await fetch(`/api/admin/locations/currency?country=${ie}`,{headers:{Authorization:`Bearer ${X}`}})).json();$.success&&$.data.currency&&(V($.data.currency),n&&n($.data.currency))}catch(X){console.error("Error fetching currency:",X)}finally{R(X=>({...X,currency:!1}))}},te=ie=>{r({...s,zipCode:ie.target.value})};return e.jsxs("div",{className:`space-y-4 ${h}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(wy,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Location Selection"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(w5,{className:"inline w-4 h-4 mr-1"}),"Country ",l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(cx,{options:j.map(ie=>({value:ie.code,label:ie.name,icon:ie.flag})),value:s.country||"",onChange:(ie,X)=>{r({country:ie,countryName:(X==null?void 0:X.label)||"",state:void 0,stateName:void 0,city:void 0,cityName:void 0,zipCode:void 0})},placeholder:g.country||" Select a country...",disabled:d,loading:M.countries,error:ae.countries,icon:e.jsx(wy,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(sn,{className:"inline w-4 h-4 mr-1"}),"State/Province ",l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(cx,{options:w.map(ie=>({value:ie.stateCode,label:ie.name})),value:s.state||"",onChange:(ie,X)=>{r({...s,state:ie,stateName:(X==null?void 0:X.label)||"",city:void 0,cityName:void 0,zipCode:void 0})},placeholder:s.country?w.length===0?"No states available":g.state||" Select a state/province...":" Select country first",disabled:d||!s.country||w.length===0,loading:M.states,error:ae.states,icon:e.jsx(sn,{className:"w-4 h-4"})})]}),p&&e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(sn,{className:"inline w-4 h-4 mr-1"}),"City ",l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(cx,{options:A.map((ie,X)=>({value:ie.name,label:ie.name})),value:s.city||"",onChange:(ie,X)=>{r({...s,city:ie,cityName:(X==null?void 0:X.label)||""})},placeholder:s.state?A.length===0?"No cities available":g.city||" Select a city...":" Select state first",disabled:d||!s.state||A.length===0,loading:M.cities,error:ae.cities,icon:e.jsx(sn,{className:"w-4 h-4"})})]}),u&&e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Zip/Pin Code"}),e.jsx("input",{type:"text",value:s.zipCode||"",onChange:te,disabled:d||!s.state,placeholder:g.zipCode||"Enter zip/pin code...",className:`w-full px-4 py-3 text-sm border-2 border-gray-300 rounded-lg \r
                                 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all\r
                                 disabled:bg-gray-100 disabled:cursor-not-allowed\r
                                 hover:border-gray-400`})]}),m&&s.country&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lc,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Auto-Detected Currency:"})]}),e.jsx("div",{className:"flex items-center gap-2",children:M.currency?e.jsx(Fv,{className:"w-4 h-4 text-green-600 animate-spin"}):e.jsx("span",{className:"text-lg font-bold text-green-700",children:q||"USD"})})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Currency is automatically set based on the selected country"})]}),(s.country||s.state||s.city)&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border-l-4 border-blue-500 rounded",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-1",children:"Selected Location:"}),e.jsx("p",{className:"text-sm text-gray-700",children:[s.cityName,s.stateName,s.countryName].filter(Boolean).join("  ")||"No location selected"})]})]})},c9=(s=[])=>{const[r,n]=y.useState(""),[l,d]=y.useState([]),[m,u]=y.useState(!1),[p,g]=y.useState(!1),h=y.useCallback(async A=>{if(!A||A.length<2){d([]),u(!1);return}g(!0);try{const q={Authorization:`Bearer ${localStorage.getItem("token")}`},V=fetch(`/api/admin/pricing/locations/suggest-region?query=${encodeURIComponent(A)}`,{headers:q}).then(Q=>Q.json()),M=fetch(`/api/admin/pricing/locations/search?query=${encodeURIComponent(A)}`,{headers:q}).then(Q=>Q.json()),[R,ae]=await Promise.all([V,M]),H=A.toLowerCase(),D=s.filter(Q=>{var W;return Q.name.toLowerCase().includes(H)||((W=Q.code)==null?void 0:W.toLowerCase().includes(H))}).map(Q=>({...Q,source:"existing",pincodeRanges:Q.pincodeRanges||[]})),k=[...R.suggestion?[R.suggestion]:[],...D,...ae.locations||[]];d(k),u(!0)}catch(P){console.error("Location search failed:",P),d([])}finally{g(!1)}},[s]),j=y.useCallback(A=>{n(A),h(A)},[h]),v=y.useCallback(()=>{n(""),d([]),u(!1)},[]),w=y.useCallback(()=>{u(!1)},[]),E=y.useCallback(()=>{l.length>0&&u(!0)},[l]);return{locationSearch:r,locationSuggestions:l,showSuggestions:m,isLoading:p,handleSearchChange:j,clearSearch:v,closeSuggestions:w,openSuggestions:E,setLocationSearch:n}},d9=({locationSearch:s,locationSuggestions:r,showSuggestions:n,isLoading:l,onSearchChange:d,onSelectLocation:m,onFocus:u,onClose:p})=>(y.useEffect(()=>{const g=h=>{const j=h.target;n&&!j.closest(".location-autocomplete-container")&&p()};return document.addEventListener("click",g),()=>document.removeEventListener("click",g)},[n,p]),e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 location-autocomplete-container",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Quick Search (Optional)"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:'Search for states, union territories, districts, or type "West India", "North India" for smart suggestions'}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s,onChange:g=>d(g.target.value),onFocus:u,placeholder:"Type state name, code, or region (e.g., Maharashtra, MH, West India)...",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10"}),l&&e.jsx("div",{className:"absolute right-3 top-2.5",children:e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 border-t-transparent rounded-full"})}),n&&r.length>0&&e.jsx("div",{className:"absolute z-50 mt-2 w-full border border-gray-200 rounded-lg bg-white shadow-xl max-h-96 overflow-y-auto",children:r.map((g,h)=>e.jsx(u9,{location:g,onClick:()=>m(g)},h))}),n&&r.length===0&&!l&&s.length>=2&&e.jsxs("div",{className:"absolute z-50 mt-2 w-full border border-gray-200 rounded-lg bg-white shadow-xl p-4 text-center text-gray-500",children:['No locations found for "',s,'"']})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Or fill the form manually below"})]})),u9=({location:s,onClick:r})=>{const n=()=>{switch(s.source){case"smart-suggestion":return"hover:bg-purple-50 bg-purple-25 border-l-4 border-purple-500";case"existing":return"hover:bg-green-50 bg-green-25";default:return"hover:bg-blue-50"}},l=()=>{switch(s.source){case"smart-suggestion":return"bg-purple-100 text-purple-700";case"existing":return"bg-green-100 text-green-700";default:return"bg-blue-100 text-blue-700"}},d=()=>{switch(s.source){case"smart-suggestion":return" Smart";case"existing":return"Existing";default:return"Database"}},m=()=>{switch(s.source){case"smart-suggestion":return"";case"existing":return"";default:return""}};return e.jsx("div",{onClick:r,className:`px-4 py-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ${n()}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[m()," ",s.displayName||s.name]}),s.description&&e.jsx("div",{className:"text-xs text-purple-600 mt-1 font-medium",children:s.description}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.level,"  Code: ",s.code,s.stateName&&`  State: ${s.stateName}`,s.districtCount&&`  Districts: ${s.districtCount}`]}),s.pincodeRanges&&s.pincodeRanges.length>0&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[s.pincodeRanges.length," pincode range(s) ",s.pincodeRanges[0].start," - ",s.pincodeRanges[s.pincodeRanges.length-1].end]}),s.statesIncluded&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Includes: ",s.statesIncluded.slice(0,3).join(", "),s.statesIncluded.length>3&&` +${s.statesIncluded.length-3} more`]})]}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded font-semibold ${l()}`,children:d()})]})})},m9=(s,r)=>r.find(n=>n.name.toUpperCase()===s.toUpperCase()),h9=(s,r,n)=>{if(s.source==="existing")return n&&s._id?(n(s),{action:"edit",data:s}):{action:"cancel"};const l=m9(s.name,r);return l?confirm(`A zone named "${s.name}" already exists.

Click OK to create "${s.name} - Custom"
Click Cancel to edit the existing zone`)?{action:"create-custom",data:{name:`${s.name} - Custom`,code:s.code,level:s.level,currency_code:s.currency||"INR",pincodeRanges:s.pincodeRanges||[]}}:(n&&n(l),{action:"edit",data:l}):{action:"create",data:{name:s.name,code:s.code,level:s.level,currency_code:s.currency||"INR",pincodeRanges:s.pincodeRanges||[]}}},p9=()=>{const[s,r]=y.useState([]),[n,l]=y.useState(!1),[d,m]=y.useState(!1),[u,p]=y.useState(null),[g,h]=y.useState({name:"",code:"",currency_code:"INR",level:"COUNTRY",pincodeRanges:[{start:0,end:0}],isActive:!0}),[j,v]=y.useState(1),w=8,[E,A]=y.useState(1),[P,q]=y.useState({country:"",countryName:"",state:"",stateName:"",city:"",cityName:""}),{locationSearch:V,locationSuggestions:M,showSuggestions:R,isLoading:ae,handleSearchChange:H,clearSearch:D,closeSuggestions:k,openSuggestions:Q}=c9(s);y.useEffect(()=>{W()},[]);const W=async()=>{l(!0);try{const L=localStorage.getItem("token"),_=await fetch("/api/admin/pricing/geo-zones",{headers:{Authorization:`Bearer ${L}`}});if(_.ok){const me=await _.json();r(me.zones||[])}}catch(L){console.error("Failed to fetch geo zones:",L)}finally{l(!1)}},te=async L=>{L.preventDefault(),l(!0);try{const _=localStorage.getItem("token"),me=u?`/api/admin/pricing/geo-zones/${u._id}`:"/api/admin/pricing/geo-zones",fe=await fetch(me,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(g)});if(fe.ok)Rt.success(u?"Geo zone updated successfully!":"Geo zone created successfully!"),m(!1),B(),W();else{const Me=fe.headers.get("content-type");let se="Failed to save geo zone";if(Me&&Me.includes("application/json"))try{se=(await fe.json()).message||se}catch(le){console.error("Failed to parse error response:",le)}else try{const le=await fe.text();le&&(se=le)}catch(le){console.error("Failed to parse text response:",le)}Rt.error(se)}}catch(_){console.error("Error saving geo zone:",_),Rt.error("Failed to save geo zone")}finally{l(!1)}},ie=async(L,_=!1)=>{if(!(!_&&!confirm("Are you sure you want to delete this geo zone?")))try{const me=localStorage.getItem("token"),fe=_?`/api/admin/pricing/geo-zones/${L}?force=true`:`/api/admin/pricing/geo-zones/${L}`,Me=await fetch(fe,{method:"DELETE",headers:{Authorization:`Bearer ${me}`}});if(Me.ok)Rt.dismiss(),Rt.success("Geo zone deleted successfully"),W();else{const se=await Me.json();if(Me.status===400&&se.requiresConfirmation){if(confirm(`${se.message}

Do you want to FORCE DELETE? This action cannot be undone.`)){await ie(L,!0);return}}else Rt.error(se.message||"Failed to delete geo zone")}}catch(me){console.error("Error deleting geo zone:",me),alert("Failed to delete geo zone")}},X=L=>{p(L),h({name:L.name,code:L.code,currency_code:L.currency_code||L.currency||"INR",level:L.level||"COUNTRY",pincodeRanges:L.pincodeRanges&&L.pincodeRanges.length>0?L.pincodeRanges.map(_=>({..._})):[{start:0,end:0}],isActive:L.isActive}),A(3),m(!0)},Se=L=>{p(null),h({name:`${L.name} (Copy)`,code:`${L.code}_COPY`,currency_code:L.currency_code||L.currency||"INR",level:L.level||"COUNTRY",pincodeRanges:L.pincodeRanges.map(_=>({..._})),isActive:!0}),m(!0)},$=async L=>{var fe;const _=(fe=L.target.files)==null?void 0:fe[0];if(!_)return;const me=new FileReader;me.onload=async Me=>{var se;try{const le=(se=Me.target)==null?void 0:se.result;if(!le)return;const Be=le.split(`
`),Qe=Be[0].split(",").map(ds=>ds.trim()),tt=Be.slice(1).filter(ds=>ds.trim()).map(ds=>{const At=ds.split(",").map(hs=>hs.trim()),as={};return Qe.forEach((hs,Vt)=>{as[hs]=At[Vt]}),as.pincodeStart&&(as.pincodeStart=parseInt(as.pincodeStart)),as.pincodeEnd&&(as.pincodeEnd=parseInt(as.pincodeEnd)),as});if(tt.length===0){Rt.error("No valid data found in CSV");return}l(!0);const ot=localStorage.getItem("token"),Ct=await(await fetch("/api/admin/pricing/geo-zones/bulk-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ot}`},body:JSON.stringify({zones:tt})})).json();Ct.success?(Rt.success(`Import successful! Created: ${Ct.results.created}, Updated: ${Ct.results.updated}`),W()):Rt.error("Import failed: "+Ct.message)}catch(le){console.error("Import error:",le),Rt.error("Error processing file")}finally{l(!1),L.target.value=""}},me.readAsText(_)},re=()=>{const L=["name,code,level,currency_code,pincodeStart,pincodeEnd"],_="South Zone,SZ,DISTRICT,INR,500000,509999",me=new Blob([[L,_].join(`
`)],{type:"text/csv"}),fe=window.URL.createObjectURL(me),Me=document.createElement("a");Me.href=fe,Me.download="geo_zones_template.csv",Me.click()},B=()=>{h({name:"",code:"",currency_code:"INR",level:"COUNTRY",pincodeRanges:[{start:0,end:0}],isActive:!0}),q({country:"",countryName:"",state:"",stateName:"",city:"",cityName:""}),p(null),D(),A(1)},ne=L=>{const _=h9(L,s,X);(_.action==="create"||_.action==="create-custom")&&(h({...g,..._.data}),A(3),Rt.success("Location details loaded. Please verify.")),D()},Z=()=>{h({...g,pincodeRanges:[...g.pincodeRanges,{start:0,end:0}]})},ue=L=>{h({...g,pincodeRanges:g.pincodeRanges.filter((_,me)=>me!==L)})},ve=(L,_,me)=>{const fe=[...g.pincodeRanges];fe[L][_]=me,h({...g,pincodeRanges:fe})},O=j*w,J=O-w,z=s.slice(J,O),ye=Math.ceil(s.length/w),xe=()=>{if(E===2&&(!g.name||!g.code||!g.currency_code)){Rt.error("Please fill in all required fields (Name, Code, Currency)");return}A(L=>L+1)},I=()=>A(L=>L-1);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(sn,{className:"text-blue-600"}),"Geo Zone Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage geographical zones for location-based pricing"})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 justify-between items-center",children:[e.jsxs("button",{onClick:()=>{B(),m(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Zs,{size:20}),"Create Geo Zone"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:re,className:"text-gray-600 hover:text-gray-800 px-3 py-2 border rounded-lg flex items-center gap-2",title:"Download CSV Template",children:[e.jsx(wr,{size:18}),"Template"]}),e.jsxs("label",{className:"cursor-pointer bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(oc,{size:20}),"Import CSV",e.jsx("input",{type:"file",accept:".csv",onChange:$,className:"hidden"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow flex flex-col ",children:[e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full relative",children:[e.jsx("thead",{className:"bg-gray-50 border-b sticky top-0 z-10 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Currency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Pincode Ranges"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No geo zones found. Create one to get started."})}):z.map(L=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:L.name}),e.jsx("td",{className:"px-6 py-4",children:L.code}),e.jsx("td",{className:"px-6 py-4",children:L.currency_code||L.currency}),e.jsx("td",{className:"px-6 py-4",children:L.pincodeRanges&&L.pincodeRanges.length>0?L.pincodeRanges.map((_,me)=>e.jsxs("div",{className:"text-sm",children:[_.start," - ",_.end]},me)):e.jsx("span",{className:"text-gray-400 text-sm",children:"No ranges"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${L.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>X(L),className:"text-blue-600 hover:text-blue-800",children:e.jsx(Fd,{size:18})}),e.jsx("button",{onClick:()=>Se(L),className:"text-green-600 hover:text-green-800",title:"Duplicate Zone",children:e.jsx(df,{size:18})}),e.jsx("button",{onClick:()=>ie(L._id),className:"text-red-600 hover:text-red-800",title:"Delete Zone",children:e.jsx(ra,{size:18})})]})})]},L._id))})]})}),s.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t flex flex-col sm:flex-row gap-4 sm:gap-0 items-center justify-between bg-gray-50",children:[e.jsxs("span",{className:"text-sm text-gray-700 order-2 sm:order-1",children:["Showing ",e.jsx("span",{className:"font-medium",children:J+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(O,s.length)})," of ",e.jsx("span",{className:"font-medium",children:s.length})," results"]}),e.jsxs("div",{className:"flex gap-2 order-1 sm:order-2 w-full sm:w-auto justify-between sm:justify-start",children:[e.jsxs("button",{onClick:()=>v(L=>Math.max(L-1,1)),disabled:j===1,className:"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e.jsx(Wl,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsxs("span",{className:"px-3 py-1 border rounded bg-white text-gray-700 whitespace-nowrap",children:["Page ",j," of ",ye]}),e.jsxs("button",{onClick:()=>v(L=>Math.min(L+1,ye)),disabled:j===ye,className:"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"}),e.jsx(Xa,{size:16})]})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between bg-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:u?"Edit Geo Zone":"Create Geo Zone"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Step ",E," of 3"]})]}),e.jsx("button",{type:"button",onClick:()=>{m(!1),B()},className:"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-full",children:e.jsx(ss,{size:24})})]}),e.jsx("div",{className:"px-12 py-6 bg-gray-50 border-b",children:e.jsxs("div",{className:"relative flex justify-between items-center",children:[e.jsx("div",{className:"absolute top-5 left-0 right-0 h-1 -translate-y-1/2 bg-gray-200 rounded-full"}),e.jsx("div",{className:"absolute top-5 left-0 h-1 -translate-y-1/2 bg-blue-600 rounded-full transition-all duration-300",style:{width:`${(E-1)/2*100}%`}}),e.jsxs("div",{className:`relative z-10 flex flex-col items-center gap-2 ${E>=1?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg border-4 transition-all duration-300 bg-white ${E>=1?"border-blue-600 text-blue-600 scale-110":"border-gray-300 text-gray-400"}`,children:"1"}),e.jsx("span",{className:"text-sm font-semibold",children:"Location"})]}),e.jsxs("div",{className:`relative z-10 flex flex-col items-center gap-2 ${E>=2?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg border-4 transition-all duration-300 bg-white ${E>=2?"border-blue-600 text-blue-600 scale-110":"border-gray-300 text-gray-400"}`,children:"2"}),e.jsx("span",{className:"text-sm font-semibold",children:"Details"})]}),e.jsxs("div",{className:`relative z-10 flex flex-col items-center gap-2 ${E>=3?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg border-4 transition-all duration-300 bg-white ${E>=3?"border-blue-600 text-blue-600 scale-110":"border-gray-300 text-gray-400"}`,children:"3"}),e.jsx("span",{className:"text-sm font-semibold",children:"Validation"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-8 py-8",children:e.jsxs("form",{onSubmit:te,id:"geoZoneForm",className:"max-w-3xl mx-auto",children:[E===1&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Where is this zone located?"}),e.jsx("p",{className:"text-gray-500",children:"Quickly search for a location in India or manually select using dropdowns."})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[" Quick Search (India Only)",e.jsx("span",{className:"text-xs font-normal text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full",children:"Recommended"})]})}),e.jsx(d9,{locationSearch:V,locationSuggestions:M,showSuggestions:R,isLoading:ae,onSearchChange:H,onSelectLocation:ne,onFocus:Q,onClose:k}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Search by City, State, or Pincode (e.g., "Mumbai", "Maharashtra", "400001")'})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-3 bg-white text-gray-500 font-medium",children:"OR Select Manually"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"International / Manual Selection"}),e.jsx(o9,{value:P,onChange:async L=>{if(q(L),h({...g,name:L.cityName||L.stateName||L.countryName||"",code:L.cityName?L.cityName.split("(")[0].trim().toUpperCase():L.state||L.country||"",level:L.city?"CITY":L.state?"STATE":"COUNTRY"}),L.country==="IN"&&(L.city||L.state))try{const _=localStorage.getItem("token"),me=L.city||L.state,fe=L.city?"CITY":"STATE";console.log(`[Pin Code Fetch] Fetching pin codes for ${fe}: ${me}`);const se=await(await fetch(`/api/admin/locations/pincode-ranges?country=IN&region=${me}`,{headers:{Authorization:`Bearer ${_}`}})).json();console.log("[Pin Code Fetch] Response:",se),se.success&&se.data.available?(h(le=>({...le,pincodeRanges:[{start:parseInt(se.data.start),end:parseInt(se.data.end)}]})),console.log(`[Pin Code Fetch] Successfully set pin codes: ${se.data.start} - ${se.data.end}`)):console.warn(`[Pin Code Fetch] No pin code data available for ${me}`)}catch(_){console.error("Failed to fetch pincode ranges:",_)}},onCurrencyChange:L=>h({...g,currency_code:L}),required:!1,showCurrency:!1,showZipCode:!1,showCityDropdown:!0})]})]})]}),E===2&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Zone Configuration"}),e.jsx("p",{className:"text-gray-500",children:"Review and customize the zone details."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Zone Name *"}),e.jsx("input",{type:"text",value:g.name,onChange:L=>h({...g,name:L.target.value}),className:"w-full border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",placeholder:"e.g., Maharashtra",required:!0})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Zone Code *"}),e.jsx("input",{type:"text",value:g.code,onChange:L=>h({...g,code:L.target.value.toUpperCase()}),className:"w-full border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",placeholder:"e.g., MH",required:!0})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Currency *"}),e.jsx("select",{value:g.currency_code,onChange:L=>h({...g,currency_code:L.target.value}),className:"w-full border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",required:!0,children:j1.map(L=>e.jsxs("option",{value:L.code,children:[L.code," (",L.symbol,") - ",L.name]},L.code))})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Level *"}),e.jsxs("select",{value:g.level,onChange:L=>h({...g,level:L.target.value}),className:"w-full border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",required:!0,children:[e.jsx("option",{value:"COUNTRY",children:"Country"}),e.jsx("option",{value:"STATE",children:"State"}),e.jsx("option",{value:"UT",children:"Union Territory"}),e.jsx("option",{value:"DISTRICT",children:"District"}),e.jsx("option",{value:"CITY",children:"City"})]})]})]})]}),E===3&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Final Validation"}),e.jsx("p",{className:"text-gray-500",children:"Define coverage ranges and activate the zone."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[" Pincode Ranges",e.jsx("span",{className:"text-xs font-normal text-gray-500 px-2 py-1 bg-white rounded border",children:"Optional"})]}),e.jsx("div",{className:"space-y-3",children:g.pincodeRanges.map((L,_)=>e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",value:L.start||"",onChange:me=>ve(_,"start",parseInt(me.target.value)),className:"w-full border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:"Start"})}),e.jsx("span",{className:"text-gray-400 font-bold",children:"-"}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",value:L.end||"",onChange:me=>ve(_,"end",parseInt(me.target.value)),className:"w-full border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:"End"})}),g.pincodeRanges.length>1&&e.jsx("button",{type:"button",onClick:()=>ue(_),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg",children:e.jsx(ss,{size:18})})]},_))}),e.jsxs("button",{type:"button",onClick:Z,className:"mt-4 text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:[e.jsx(Zs,{size:16})," Add another range"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 flex items-center justify-between cursor-pointer",onClick:()=>h({...g,isActive:!g.isActive}),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${g.isActive?"bg-green-100 text-green-600":"bg-gray-200 text-gray-500"}`,children:g.isActive?"":""}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Zone Status"}),e.jsx("div",{className:"text-sm text-gray-600",children:g.isActive?"Zone will be active immediately":"Zone is currently inactive"})]})]}),e.jsx("div",{className:`w-14 h-8 rounded-full p-1 transition-colors ${g.isActive?"bg-green-500":"bg-gray-300"}`,children:e.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-sm transition-transform ${g.isActive?"translate-x-6":""}`})})]})]})]})]})}),e.jsxs("div",{className:"px-8 py-5 border-t bg-gray-50 flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:()=>{E>1?I():(m(!1),B(),A(1))},className:"px-6 py-2.5 text-gray-600 font-medium hover:text-gray-900 transition-colors",children:E===1?"Cancel":"Back"}),e.jsx("div",{className:"flex gap-3",children:E<3?e.jsxs("button",{type:"button",onClick:xe,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium shadow-sm hover:shadow transition-all flex items-center gap-2",children:["Next Step ",e.jsx(Xa,{size:18})]}):e.jsx("button",{type:"submit",form:"geoZoneForm",disabled:n,className:"px-8 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium shadow-sm hover:shadow transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(vc,{size:18})," Complete Setup"]})})})]})]})})]})},x9=()=>{const[s,r]=y.useState([]),[n,l]=y.useState(!1),[d,m]=y.useState(!1),[u,p]=y.useState(null),[g,h]=y.useState({name:"",code:"",description:"",isDefault:!1,isActive:!0});y.useEffect(()=>{j()},[]);const j=async()=>{l(!0);try{const P=localStorage.getItem("token"),q=await fetch("/api/admin/pricing/user-segments",{headers:{Authorization:`Bearer ${P}`}});if(q.ok){const V=await q.json();r(V.segments||[])}}catch(P){console.error("Failed to fetch user segments:",P)}finally{l(!1)}},v=async P=>{P.preventDefault(),l(!0);try{const q=localStorage.getItem("token"),V=u?`/api/admin/pricing/user-segments/${u._id}`:"/api/admin/pricing/user-segments",M=await fetch(V,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify(g)});if(M.ok)alert(u?"User segment updated!":"User segment created!"),m(!1),A(),j();else{const R=await M.json();alert(R.message||"Failed to save user segment")}}catch(q){console.error("Error saving user segment:",q),alert("Failed to save user segment")}finally{l(!1)}},w=async P=>{if(confirm("Are you sure you want to delete this user segment?"))try{const q=localStorage.getItem("token");(await fetch(`/api/admin/pricing/user-segments/${P}`,{method:"DELETE",headers:{Authorization:`Bearer ${q}`}})).ok&&(alert("User segment deleted!"),j())}catch(q){console.error("Error deleting user segment:",q),alert("Failed to delete user segment")}},E=P=>{p(P),h({name:P.name,code:P.code,description:P.description||"",isDefault:P.isDefault,isActive:P.isActive}),m(!0)},A=()=>{h({name:"",code:"",description:"",isDefault:!1,isActive:!0}),p(null)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Il,{className:"text-purple-600"}),"User Segment Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage user segments for segment-based pricing (Retail, Corporate, VIP, etc.)"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{A(),m(!0)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[e.jsx(Zs,{size:20}),"Create User Segment"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n?e.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"Loading..."}):s.length===0?e.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"No user segments found. Create one to get started."}):s.map(P=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-2 border-gray-200 hover:border-purple-300 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[P.name,P.isDefault&&e.jsx(mi,{size:16,className:"text-yellow-500 fill-yellow-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 font-mono",children:P.code})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${P.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:P.isActive?"Active":"Inactive"})]}),P.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:P.description}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[P.isDefault&&e.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs font-medium flex items-center gap-1",children:[e.jsx(mi,{size:12})," Default"]}),P.isSystem&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium flex items-center gap-1",children:[e.jsx(y3,{size:12})," System Protected"]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs("button",{onClick:()=>E(P),className:"flex-1 bg-blue-50 text-blue-600 px-3 py-2 rounded hover:bg-blue-100 flex items-center justify-center gap-2",children:[e.jsx(Fd,{size:16}),"Edit"]}),P.isSystem?e.jsxs("button",{disabled:!0,className:"flex-1 bg-gray-100 text-gray-400 px-3 py-2 rounded cursor-not-allowed flex items-center justify-center gap-2",title:"System segments cannot be deleted",children:[e.jsx(jc,{size:16}),"Locked"]}):e.jsxs("button",{onClick:()=>w(P._id),className:"flex-1 bg-red-50 text-red-600 px-3 py-2 rounded hover:bg-red-100 flex items-center justify-center gap-2",children:[e.jsx(ra,{size:16}),"Delete"]})]})]},P._id))}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:u?"Edit User Segment":"Create User Segment"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Segment Name *"}),e.jsx("input",{type:"text",value:g.name,onChange:P=>h({...g,name:P.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Retail, Corporate, VIP",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Segment Code *"}),e.jsx("input",{type:"text",value:g.code,onChange:P=>h({...g,code:P.target.value.toUpperCase()}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., RETAIL, CORPORATE, VIP",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier for this segment (uppercase)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:g.description,onChange:P=>h({...g,description:P.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Optional description",rows:3})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g.isDefault,onChange:P=>h({...g,isDefault:P.target.checked}),className:"rounded"}),e.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[e.jsx(mi,{size:16,className:"text-yellow-500"}),"Set as default segment"]})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6 mt-1",children:"New users will be assigned to this segment by default"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g.isActive,onChange:P=>h({...g,isActive:P.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm font-medium",children:"Active"})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),A()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[e.jsx(vc,{size:18}),n?"Saving...":"Save"]})]})]})]})})]})},f9=()=>{const[s,r]=y.useState([]),[n,l]=y.useState([]),[d,m]=y.useState([]),[u,p]=y.useState(!1),[g,h]=y.useState(!1),[j,v]=y.useState(null),[w,E]=y.useState({product:"",geoZone:"",isSellable:!0,reason:""});y.useEffect(()=>{A(),P(),q()},[]);const A=async()=>{p(!0);try{const H=localStorage.getItem("token"),D=await fetch("/api/admin/pricing/product-availability",{headers:{Authorization:`Bearer ${H}`}});if(D.ok){const k=await D.json();r(k.availability||[])}}catch(H){console.error("Failed to fetch product availabilities:",H)}finally{p(!1)}},P=async()=>{try{const H=await fetch("/api/products");if(H.ok){const D=await H.json();l(D.products||D)}}catch(H){console.error("Failed to fetch products:",H)}},q=async()=>{try{const H=localStorage.getItem("token"),D=await fetch("/api/admin/pricing/geo-zones",{headers:{Authorization:`Bearer ${H}`}});if(D.ok){const k=await D.json();m(k.zones||[])}}catch(H){console.error("Failed to fetch geo zones:",H)}},V=async H=>{H.preventDefault(),p(!0);try{const D=localStorage.getItem("token"),k=j?`/api/admin/pricing/product-availability/${j._id}`:"/api/admin/pricing/product-availability",Q=await fetch(k,{method:j?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify(w)});if(Q.ok)alert(j?"Availability updated!":"Availability rule created!"),h(!1),ae(),A();else{const W=await Q.json();alert(W.message||"Failed to save availability rule")}}catch(D){console.error("Error saving availability:",D),alert("Failed to save availability rule")}finally{p(!1)}},M=async H=>{if(confirm("Are you sure you want to delete this availability rule?"))try{const D=localStorage.getItem("token");(await fetch(`/api/admin/pricing/product-availability/${H}`,{method:"DELETE",headers:{Authorization:`Bearer ${D}`}})).ok&&(alert("Availability rule deleted!"),A())}catch(D){console.error("Error deleting availability:",D),alert("Failed to delete availability rule")}},R=H=>{v(H),E({product:H.product._id,geoZone:H.geoZone._id,isSellable:H.isSellable,reason:H.reason||""}),h(!0)},ae=()=>{E({product:"",geoZone:"",isSellable:!0,reason:""}),v(null)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ia,{className:"text-green-600"}),"Product Availability Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Control which products are available in different geographical zones"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{ae(),h(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Zs,{size:20}),"Create Availability Rule"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Geo Zone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reason"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No availability rules found. Create one to restrict product availability by region."})}):s.map(H=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:H.product.name}),e.jsx("td",{className:"px-6 py-4",children:H.geoZone.name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 w-fit ${H.isSellable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:H.isSellable?e.jsxs(e.Fragment,{children:[e.jsx(va,{size:16}),"Available"]}):e.jsxs(e.Fragment,{children:[e.jsx(ol,{size:16}),"Blocked"]})})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:H.reason||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R(H),className:"text-blue-600 hover:text-blue-800",children:e.jsx(Fd,{size:18})}),e.jsx("button",{onClick:()=>M(H._id),className:"text-red-600 hover:text-red-800",children:e.jsx(ra,{size:18})})]})})]},H._id))})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:j?"Edit Availability Rule":"Create Availability Rule"}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product *"}),e.jsxs("select",{value:w.product,onChange:H=>E({...w,product:H.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Product"}),n.map(H=>e.jsx("option",{value:H._id,children:H.name},H._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Geo Zone *"}),e.jsxs("select",{value:w.geoZone,onChange:H=>E({...w,geoZone:H.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Geo Zone"}),d.map(H=>e.jsx("option",{value:H._id,children:H.name},H._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Availability Status *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"isSellable",checked:w.isSellable===!0,onChange:()=>E({...w,isSellable:!0,reason:""}),className:"text-green-600"}),e.jsx(va,{size:20,className:"text-green-600"}),e.jsx("span",{className:"font-medium",children:"Available (Sellable)"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"isSellable",checked:w.isSellable===!1,onChange:()=>E({...w,isSellable:!1}),className:"text-red-600"}),e.jsx(ol,{size:20,className:"text-red-600"}),e.jsx("span",{className:"font-medium",children:"Blocked (Not Sellable)"})]})]})]}),!w.isSellable&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason for Blocking"}),e.jsx("textarea",{value:w.reason,onChange:H=>E({...w,reason:H.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Not available in your region, Out of stock in this area",rows:3}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This message will be shown to customers in this region"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),ae()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(vc,{size:18}),u?"Saving...":"Save"]})]})]})]})})]})},g9=()=>{var fe,Me,se;const[s,r]=y.useState({zone:null,segment:null,product:null}),[n,l]=y.useState(null),[d,m]=y.useState("MASTER"),[u,p]=y.useState(!1),[g,h]=y.useState(null),[j,v]=y.useState([]),[w,E]=y.useState([]),[A,P]=y.useState([]),[q,V]=y.useState([]),[M,R]=y.useState(null),[ae,H]=y.useState(""),[D,k]=y.useState(!1),[Q,W]=y.useState(!1),[te,ie]=y.useState(!1),[X,Se]=y.useState(null);y.useEffect(()=>{re()},[]),y.useEffect(()=>{B(),V([]),R(null)},[s]);const $=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}),re=async()=>{try{if(!localStorage.getItem("token")){h("Please login to access pricing administration");return}const[Be,Qe,tt]=await Promise.all([fetch("/api/admin/pricing/geo-zones",{headers:$()}),fetch("/api/admin/pricing/user-segments",{headers:$()}),fetch("/api/admin/pricing/products",{headers:$()})]);if(Be.status===401||Be.status===403){h("Authentication failed. Please login as an admin.");return}if(!Be.ok||!Qe.ok||!tt.ok){h("Server error. Please check your connection.");return}const[ot,Ve,Ct]=await Promise.all([Be.json(),Qe.json(),tt.json()]);v(ot.zones||ot.data||[]),E(Ve.segments||Ve.data||[]),P(Ct.products||Ct.data||[])}catch(le){console.error("Error loading dropdown options:",le),h("Failed to load pricing data.")}},B=async()=>{p(!0),h(null);try{const le=new URLSearchParams;s.zone&&le.append("zone",s.zone),s.segment&&le.append("segment",s.segment),s.product&&le.append("product",s.product);const Qe=await(await fetch(`/api/admin/pricing/smart-view?${le}`,{headers:$()})).json();Qe.success?(l(Qe.data),m(Qe.data.viewType)):h(Qe.error||"Failed to load data")}catch(le){h(le.message)}finally{p(!1)}},ne=(le,Be)=>{r(Qe=>({...Qe,[le]:Be||null}))},Z=()=>{r({zone:null,segment:null,product:null})},ue=(le,Be)=>{R(le),H(Be.toString())},ve=()=>{R(null),H(""),k(!1)},O=(le,Be,Qe)=>{const tt=parseFloat(ae);if(isNaN(tt)||tt<0){ve();return}let ot=0;if(n!=null&&n.entries){const At=n.entries.find(as=>as.productId===le);ot=(At==null?void 0:At.basePrice)||0}else if(n!=null&&n.matrix){const At=n.matrix.find(as=>as.productId===le);if(At&&Qe&&At.segments){const as=Object.values(At.segments)[0];ot=typeof as=="object"?as.finalPrice:as}}else if(n!=null&&n.prices){const At=n.prices.find(as=>as.productId===le||as.segmentId===Qe);ot=(At==null?void 0:At.finalPrice)||(At==null?void 0:At.masterPrice)||0}if(tt===ot){ve();return}const Ve=D?void 0:Qe||s.segment||void 0;console.log("[confirmEdit] Creating edited cell:",{productId:le,productName:Be,segmentId_param:Qe,filters_segment:s.segment,effectiveSegmentId:Ve,applyToAllSegments:D,zoneId:s.zone});const Ct={productId:le,productName:Be,segmentId:Ve,zoneId:s.zone||void 0,originalPrice:ot,newPrice:tt,applyToAllSegments:D};V(At=>{const as=At.findIndex(hs=>hs.productId===Ct.productId&&hs.zoneId===Ct.zoneId&&hs.applyToAllSegments===Ct.applyToAllSegments&&(Ct.applyToAllSegments||hs.segmentId===Ct.segmentId));if(as>=0){const hs=[...At];return hs[as]=Ct,hs}return[...At,Ct]}),ve();const ds=D?" (all segments)":"";Rt.success(`Price updated to ${tt.toFixed(2)}${ds} (pending save)`)},J=async()=>{if(q.length===0){Rt("No changes to save",{icon:""});return}W(!0);const le=Rt.loading(`Saving ${q.length} price changes...`);try{const Be=q.map(ot=>({productId:ot.productId,newPrice:ot.newPrice,segmentId:ot.applyToAllSegments?void 0:ot.segmentId,zoneId:ot.zoneId,applyToAllSegments:ot.applyToAllSegments||!1}));console.log("[saveAllChanges] Sending price updates:",JSON.stringify(Be,null,2));const tt=await(await fetch("/api/admin/pricing/smart-view/update",{method:"POST",headers:$(),body:JSON.stringify({filters:{zoneId:s.zone,segmentId:s.segment,productId:s.product},priceUpdates:Be,resolutionStrategy:"ASK"})})).json();Rt.dismiss(le),tt.success?tt.requiresResolution?(Se({hasConflict:!0,affectedCount:tt.data.conflictsDetected||0,conflicts:tt.data.conflicts||[],resolutionOptions:tt.data.resolutionOptions||[{id:"OVERWRITE",label:"Force Overwrite",description:"Delete all child overrides",impact:{warning:"All child prices will be deleted"}},{id:"PRESERVE",label:"Preserve Children",description:"Keep existing child prices",impact:{warning:"Child prices remain unchanged"}},{id:"RELATIVE",label:"Relative Adjust",description:"Apply proportional adjustment",impact:{warning:"Child prices will be scaled"}}]}),ie(!0)):(Rt.success(` Successfully updated ${tt.data.updatedCount} price(s)!`),V([]),B()):Rt.error(tt.error||"Failed to save changes")}catch(Be){Rt.dismiss(le),Rt.error(Be.message||"Failed to save changes")}finally{W(!1)}},z=async le=>{W(!0);const Be=Rt.loading(`Applying ${le} resolution...`);try{const Qe=q.map(Ve=>({productId:Ve.productId,newPrice:Ve.newPrice,segmentId:Ve.segmentId,zoneId:Ve.zoneId})),ot=await(await fetch("/api/admin/pricing/smart-view/update",{method:"POST",headers:$(),body:JSON.stringify({filters:{zoneId:s.zone,segmentId:s.segment,productId:s.product},priceUpdates:Qe,resolutionStrategy:le})})).json();Rt.dismiss(Be),ot.success?(Rt.success(` ${ot.data.updatedCount} prices updated with ${le} strategy!`),V([]),B()):Rt.error(ot.error||"Failed to apply resolution")}catch(Qe){Rt.dismiss(Be),Rt.error(Qe.message||"Failed to apply resolution")}finally{W(!1),ie(!1),Se(null)}},ye=()=>{V([]),Rt("Changes discarded",{icon:""})},xe=(le,Be)=>{V(Qe=>Qe.filter(tt=>!(tt.productId===le&&tt.segmentId===Be))),Rt("Change removed",{icon:""})},I=q.length>0,L=(le,Be,Qe,tt,ot)=>{const Ve=ot||`${le}-${tt||"default"}`,Ct=M===Ve,ds=q.find(hs=>hs.productId===le&&hs.segmentId===tt),At=ds?ds.newPrice:Qe,as=!!ds;return Ct?e.jsx("td",{className:"p-2 bg-blue-50",colSpan:D&&tt?5:1,children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:ae,onChange:hs=>H(hs.target.value),onKeyDown:hs=>{hs.key==="Enter"&&O(le,Be,tt),hs.key==="Escape"&&ve()},autoFocus:!0,min:"0",step:"0.01",className:"w-20 px-2 py-1 border-2 border-indigo-500 rounded text-right font-mono text-sm focus:outline-none focus:ring-2 focus:ring-indigo-300"}),e.jsx("button",{onClick:()=>O(le,Be,tt),className:"w-7 h-7 bg-green-500 text-white rounded flex items-center justify-center hover:bg-green-600",children:""}),e.jsx("button",{onClick:ve,className:"w-7 h-7 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600",children:""})]}),tt&&s.zone&&e.jsxs("label",{className:"flex items-center gap-1 text-xs text-gray-600 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:hs=>k(hs.target.checked),className:"w-3 h-3 text-indigo-600 rounded cursor-pointer"}),e.jsx("span",{className:D?"text-indigo-600 font-medium":"",children:"Apply to all segments"})]})]})},Ve):At==null?e.jsx("td",{className:"p-3 text-center text-gray-400",title:"Price not available",children:"N/A"},Ve):e.jsxs("td",{className:`p-3 text-center font-mono cursor-pointer transition-colors hover:bg-indigo-50 ${as?"bg-amber-100 border-l-4 border-amber-500":""}`,onClick:()=>ue(Ve,At),title:"Click to edit",children:["",At.toFixed(2),as&&e.jsx("span",{className:"text-amber-500 font-bold ml-1",children:"*"})]},Ve)},_=le=>({MASTER:" Master Price Book",ZONE:" Zone View (All Products  All Segments)",GROUP_ZONE:" Group Zone View (All Products)",PRODUCT_ZONE:" Product Zone View (All Segments)",SINGLE_CELL:" Single Cell View (Detailed Breakdown)"})[le]||le,me=()=>{var le,Be,Qe,tt,ot,Ve,Ct,ds,At,as,hs,Vt,Bs,Ss,wa,ge,yt,_t,ps,ys;if(u)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-gray-500",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-indigo-500 rounded-full animate-spin mb-4"}),e.jsx("p",{children:"Loading price data..."})]});if(g)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsxs("p",{className:"text-red-500 mb-4",children:[" Error: ",g]}),e.jsx("button",{onClick:B,className:"px-4 py-2 bg-indigo-500 text-white rounded-lg font-semibold hover:bg-indigo-600",children:"Retry"})]});if(!n)return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-gray-500",children:e.jsx("p",{children:"Select filters to view pricing data"})});switch(d){case"MASTER":return e.jsxs("div",{children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-5 rounded-xl mb-6 border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500 rounded-lg flex items-center justify-center text-white text-xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:n.masterBookName||"Master Price Book"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[((le=n.entries)==null?void 0:le.length)||0," products"]})]})]})}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-5 py-4 text-right text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Base Price"}),e.jsx("th",{className:"px-5 py-4 text-right text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Compare At"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:(Be=n.entries)==null?void 0:Be.map((at,Yt)=>e.jsxs("tr",{className:`${Yt%2===0?"bg-white":"bg-gray-50/50"} hover:bg-indigo-50/50 transition-colors`,children:[e.jsx("td",{className:"px-5 py-4 font-medium text-gray-800",children:at.productName}),L(at.productId,at.productName,at.basePrice,void 0,`master-${at.productId}`),e.jsx("td",{className:"px-5 py-4 text-right font-mono text-gray-600",children:at.compareAtPrice?`${at.compareAtPrice}`:e.jsx("span",{className:"text-gray-300",children:""})})]},at.productId))})]})})]});case"ZONE":return e.jsxs("div",{children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 p-5 rounded-xl mb-6 border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center text-white text-xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:n.zoneName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[((Qe=n.matrix)==null?void 0:Qe.length)||0," products  ",Object.keys(((ot=(tt=n.matrix)==null?void 0:tt[0])==null?void 0:ot.segments)||{}).length||0," segments"]})]})]})}),e.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider sticky left-0 bg-gray-50 border-r border-gray-200",children:"Product"}),Object.keys(((Ct=(Ve=n.matrix)==null?void 0:Ve[0])==null?void 0:Ct.segments)||{}).map(at=>e.jsx("th",{className:"px-5 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider",children:at},at))]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:(ds=n.matrix)==null?void 0:ds.map((at,Yt)=>e.jsxs("tr",{className:`${at.isAvailable===!1?"bg-red-50 opacity-70":Yt%2===0?"bg-white":"bg-gray-50/30"} hover:bg-indigo-50/50 transition-colors`,children:[e.jsx("td",{className:"px-5 py-4 font-medium text-gray-800 sticky left-0 bg-white border-r border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[at.productName,at.isAvailable===!1&&e.jsx("span",{className:"text-red-500",children:""})]})}),Object.entries(at.segments).map(([Ms,rs])=>{var xt;const ea=typeof rs=="object"?rs==null?void 0:rs.finalPrice:rs;if(!(typeof rs=="object"?(rs==null?void 0:rs.isAvailable)!==!1:!0)||ea==null)return e.jsx("td",{className:"px-5 py-4 text-center text-gray-300",title:at.availabilityReason||"Not available",children:""},Ms);const mt=(xt=at.segmentIds)==null?void 0:xt[Ms];return console.log(`[ZONE View] Rendering cell for ${at.productName} - ${Ms}: segmentId=${mt}`),L(at.productId,at.productName,ea,mt,`zone-${at.productId}-${Ms}`)})]},at.productId))})]})})]});case"GROUP_ZONE":return e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",n.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Segment:"})," ",n.segmentName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Products:"})," ",((At=n.prices)==null?void 0:At.length)||0]})]}),e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Product"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Master Price"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Final Price"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Adjustments"})]})}),e.jsx("tbody",{children:(as=n.prices)==null?void 0:as.map(at=>{var Yt;return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:at.productName}),e.jsxs("td",{className:"p-3 font-mono",children:["",at.masterPrice]}),L(at.productId,at.productName,at.finalPrice,n.segmentId,`group-${at.productId}`),e.jsxs("td",{className:"p-3 text-gray-500 text-xs",children:[((Yt=at.adjustments)==null?void 0:Yt.length)||0," adjustment(s)"]})]},at.productId)})})]})]});case"PRODUCT_ZONE":return e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",n.productName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",n.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Segments:"})," ",((hs=n.prices)==null?void 0:hs.length)||0]})]}),e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Segment"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Master Price"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Final Price"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Discount"})]})}),e.jsx("tbody",{children:(Vt=n.prices)==null?void 0:Vt.map(at=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:at.segmentName}),e.jsxs("td",{className:"p-3 font-mono",children:["",at.masterPrice]}),L(n.productId,n.productName,at.finalPrice,at.segmentId,`prod-${at.segmentId}`),e.jsx("td",{className:"p-3 text-green-600 font-semibold",children:at.masterPrice>at.finalPrice?`${((1-at.finalPrice/at.masterPrice)*100).toFixed(1)}%`:"-"})]},at.segmentId))})]})]});case"SINGLE_CELL":return((Bs=n.price)==null?void 0:Bs.isAvailable)===!1?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Product Not Available"}),e.jsx("p",{className:"text-gray-500",children:((Ss=n.price)==null?void 0:Ss.availabilityReason)||"This product is not available in the selected zone"})]}):e.jsxs("div",{className:"max-w-xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",n.productName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",n.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Segment:"})," ",n.segmentName]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 pb-3 border-b",children:" Price Breakdown"}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Master Price:"}),M==="single-cell-master"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border-2 border-indigo-500 rounded-lg px-2 py-1 bg-white",children:[e.jsx("span",{className:"text-gray-600 mr-1",children:""}),e.jsx("input",{type:"number",value:ae,onChange:at=>H(at.target.value),onKeyDown:at=>{at.key==="Enter"?O(s.product,n.productName,s.segment||void 0):at.key==="Escape"&&ve()},className:"w-32 outline-none font-mono",autoFocus:!0})]}),e.jsx("button",{onClick:()=>O(s.product,n.productName,s.segment||void 0),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:" Save"}),e.jsx("button",{onClick:ve,className:"px-3 py-1 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm font-medium",children:" Cancel"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("strong",{className:"font-mono",children:["",(ge=(wa=n.price)==null?void 0:wa.masterPrice)==null?void 0:ge.toFixed(2)]}),e.jsxs("button",{onClick:()=>{var at;return ue("single-cell-master",((at=n.price)==null?void 0:at.masterPrice)||0)},className:"px-3 py-1 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm font-medium flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]}),(_t=(yt=n.price)==null?void 0:yt.adjustments)==null?void 0:_t.map((at,Yt)=>{var mt,xt,Ds;const Ms=at.type==="MODIFIER",rs=at.modifierType==="PERCENT_INC"||at.modifierType==="FLAT_INC"||at.change>0,ea=Math.abs(Ms?at.change:at.value),He=()=>at.type==="ZONE_BOOK"?"Zone Price Book":at.type==="SEGMENT_BOOK"?"Segment Price Book":Ms?at.appliesTo==="GLOBAL"?"Global Modifier":at.appliesTo==="ZONE"?"Zone Modifier":at.appliesTo==="SEGMENT"?"Segment Modifier":at.appliesTo==="PRODUCT"?"Product Modifier":at.appliesTo==="ATTRIBUTE"?"Attribute Modifier":at.appliesTo==="COMBINATION"?"Combination Modifier":"Modifier":at.type;return e.jsx("div",{className:`py-3 border-b ${rs?"bg-green-50/50":"bg-red-50/50"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:at.modifierName||at.type}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${rs?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:He()}),Ms&&e.jsxs("span",{className:"text-xs text-gray-600",children:[(mt=at.modifierType)!=null&&mt.includes("PERCENT")?"":"",at.value,(xt=at.modifierType)!=null&&xt.includes("PERCENT")?"%":""," ",(Ds=at.modifierType)!=null&&Ds.includes("INC")?"increase":"decrease"]})]})]}),e.jsxs("strong",{className:`font-mono text-lg ${rs?"text-green-600":"text-red-600"}`,children:[rs?"+":"-","",ea==null?void 0:ea.toFixed(2)]})]})},Yt)}),e.jsxs("div",{className:"flex justify-between items-center py-4 mt-2 border-t-2 border-indigo-500",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Final Price:"}),e.jsxs("strong",{className:"text-xl font-mono text-indigo-600",children:["",(ys=(ps=n.price)==null?void 0:ps.finalPrice)==null?void 0:ys.toFixed(2)]})]})]})]});default:return e.jsxs("div",{children:["Unknown view type: ",d]})}};return e.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-2xl shadow-lg",children:""}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Smart View Matrix"}),e.jsx("p",{className:"text-gray-500",children:"Manage virtual price books with hierarchical pricing"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden h-fit lg:sticky lg:top-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 px-5 py-4 border-b border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select filters to load pricing data"})]}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-600 uppercase tracking-wider mb-2",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Geo Zone"]}),e.jsxs("select",{value:s.zone||"",onChange:le=>ne("zone",le.target.value),className:"w-full p-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:bg-white focus:outline-none transition-all text-gray-700",children:[e.jsx("option",{value:"",children:"All Zones"}),j.map(le=>e.jsxs("option",{value:le._id,children:[le.name," (",le.level,")"]},le._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-600 uppercase tracking-wider mb-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"User Segment"]}),e.jsxs("select",{value:s.segment||"",onChange:le=>ne("segment",le.target.value),className:"w-full p-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:bg-white focus:outline-none transition-all text-gray-700",children:[e.jsx("option",{value:"",children:"All Segments"}),w.map(le=>e.jsx("option",{value:le._id,children:le.name||le.code},le._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-600 uppercase tracking-wider mb-2",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"Product"]}),e.jsxs("select",{value:s.product||"",onChange:le=>ne("product",le.target.value),className:"w-full p-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:bg-white focus:outline-none transition-all text-gray-700",children:[e.jsx("option",{value:"",children:"All Products"}),A.map(le=>e.jsx("option",{value:le._id,children:le.name},le._id))]})]}),e.jsxs("button",{onClick:Z,className:"w-full py-3 bg-gray-100 text-gray-600 rounded-xl font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Clear Filters"]})]}),I&&e.jsxs("div",{className:"border-t-2 border-amber-200 bg-amber-50/50 p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-500 text-white rounded-lg flex items-center justify-center text-lg",children:""}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-amber-800",children:[q.length," Unsaved Change",q.length>1?"s":""]}),e.jsx("p",{className:"text-xs text-amber-600",children:"Click save to apply"})]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto mb-4 space-y-2",children:q.map((le,Be)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-amber-200 shadow-sm",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm truncate",children:le.productName||le.productId}),le.applyToAllSegments&&e.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full",children:"All Segments"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono text-amber-700 font-semibold",children:["",le.newPrice.toFixed(2)]}),e.jsx("button",{onClick:()=>xe(le.productId,le.segmentId),className:"w-6 h-6 rounded-full bg-red-100 text-red-600 hover:bg-red-200 flex items-center justify-center text-sm",children:""})]})]},Be))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:J,disabled:Q,className:"w-full py-3.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold hover:from-green-600 hover:to-emerald-700 disabled:opacity-60 transition-all flex items-center justify-center gap-2 shadow-lg shadow-green-500/20",children:Q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsx(e.Fragment,{children:" Save All Changes"})}),e.jsx("button",{onClick:ye,disabled:Q,className:"w-full py-3 border-2 border-red-400 text-red-600 rounded-xl font-semibold hover:bg-red-50 disabled:opacity-60 transition-colors",children:" Discard All"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:_(d)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[((fe=n==null?void 0:n.matrix)==null?void 0:fe.length)||((Me=n==null?void 0:n.entries)==null?void 0:Me.length)||((se=n==null?void 0:n.prices)==null?void 0:se.length)||0," items"]})]}),e.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg text-xs font-bold uppercase tracking-wider shadow-sm",children:d})]}),e.jsx("div",{className:"p-6",children:me()})]})]}),te&&X&&e.jsx(z1,{conflict:X,onResolve:z,onCancel:()=>{ie(!1),Se(null)}})]})},b9=()=>e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Pricing Preview"}),e.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded text-center text-gray-500",children:"Pricing Preview Module Coming Soon"})]}),y9=({value:s,onChange:r,placeholder:n="Enter description...",className:l="",style:d,height:m="300px"})=>{const[u,p]=y.useState(null),[g,h]=y.useState(!1);return y.useEffect(()=>{typeof window<"u"&&Zd(()=>import("./editor.esm-GUUUF5Pz.js"),[]).then(j=>{p(()=>j.Editor),h(!0)}).catch(j=>{console.error("Failed to load PrimeReact Editor:",j),h(!0)})},[]),!g||!u?e.jsx("div",{className:`rich-text-editor-wrapper ${l}`,style:{height:m,...d},children:e.jsx("textarea",{value:s||"",onChange:j=>r(j.target.value),placeholder:n,className:"w-full p-3 border border-gray-300 rounded-lg resize-none",style:{height:m,minHeight:"200px"}})}):e.jsx(j9,{Editor:u,value:s,onChange:r,placeholder:n,className:l,style:d,height:m})},j9=({Editor:s,value:r,onChange:n,placeholder:l,className:d,style:m,height:u})=>{const p=y.useRef(null),g=y.useMemo(()=>({toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["image"],["clean"]],clipboard:{matchVisual:!1}}),[]),h=y.useMemo(()=>["header","font","size","bold","italic","underline","strike","color","background","list","indent","align","image"],[]),j=y.useMemo(()=>w=>{w.htmlValue!==void 0?n(w.htmlValue||""):w.textValue!==void 0?n(w.textValue||""):w.value!==void 0&&n(w.value||"")},[n]),v=y.useMemo(()=>({height:u,...m}),[u,m]);return e.jsxs("div",{className:`rich-text-editor-wrapper ${d}`,children:[e.jsx(s,{ref:p,value:r||"",onTextChange:j,placeholder:l,modules:g,formats:h,style:v}),e.jsx("style",{children:`
        .rich-text-editor-wrapper {
          width: 100%;
        }
        .rich-text-editor-wrapper .p-editor-container {
          border: 1px solid #d1d5db;
          border-radius: 0.5rem;
          overflow: hidden;
        }
        .rich-text-editor-wrapper .p-editor-toolbar {
          border-bottom: 1px solid #d1d5db;
          background: #f9fafb;
          padding: 0.5rem;
        }
        .rich-text-editor-wrapper .ql-editor {
          min-height: 200px;
        }
        .rich-text-editor-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: italic;
        }
      `})]})},rc="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23f5f5f5'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-family='sans-serif' font-size='14'%3ENo Image%3C/text%3E%3C/svg%3E",Fl="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Crect width='400' height='400' fill='%23f5f5f5'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-family='sans-serif' font-size='18'%3EImage Not Available%3C/text%3E%3C/svg%3E",v9=()=>{var Lo,jl,$o,Ai,Tn,ii,kn;const s=Ha(),r=tu(),[n,l]=y.useState("products"),[d,m]=y.useState(!1),[u,p]=y.useState(null),[g,h]=y.useState(null),[j,v]=y.useState(null),[w,E]=y.useState({}),[A,P]=y.useState(null),[q,V]=y.useState(null),[M,R]=y.useState({}),[ae,H]=y.useState({}),[D,k]=y.useState({}),[Q,W]=y.useState({}),[te,ie]=y.useState({}),[X,Se]=y.useState({}),[$,re]=y.useState({name:"",description:"",descriptionArray:[],category:"",subcategory:"",image:null,options:"",filters:{printingOption:[],orderQuantity:{min:1e3,max:72e3,multiples:1e3,quantityType:"SIMPLE",stepWiseQuantities:[],rangeWiseQuantities:[]},deliverySpeed:[],textureType:[]},quantityDiscounts:[],maxFileSizeMB:"",minFileWidth:"",maxFileWidth:"",minFileHeight:"",maxFileHeight:"",blockCDRandJPG:!1,additionalDesignCharge:"",gstPercentage:"",showPriceIncludingGst:!1,instructions:"",productionSequence:[],variants:[]}),[B,ne]=y.useState([]),[Z,ue]=y.useState({}),[ve,O]=y.useState(!0),[J,z]=y.useState(!1),[ye,xe]=y.useState([]),[I,L]=y.useState([]),[_,me]=y.useState([]),[fe,Me]=y.useState([]),[se,le]=y.useState({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),[Be,Qe]=y.useState(!1),[tt,ot]=y.useState(!1),[Ve,Ct]=y.useState({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),[ds,At]=y.useState([]),[as,hs]=y.useState(!1),[Vt,Bs]=y.useState(!1),[Ss,wa]=y.useState(null),[ge,yt]=y.useState(null),[_t,ps]=y.useState([]),[ys,at]=y.useState([]),[Yt,Ms]=y.useState({username:"",role:"user"}),[rs,ea]=y.useState({name:"",email:"",password:""}),[He,mt]=y.useState([]),[xt,Ds]=y.useState([]),[Vs,Ks]=y.useState(""),[Gs,ha]=y.useState("all"),[$a,ir]=y.useState("all"),[mr,ln]=y.useState(""),[Li,Qn]=y.useState([]),[oe,be]=y.useState(null),[Te,rt]=y.useState(null),lt=qa.useRef(null),zt=qa.useRef(null),[ct,ft]=y.useState({isOpen:!1,type:"category",id:"",name:"",productCount:0,subcategoryCount:0,deleteText:""}),[kt,Lt]=y.useState([]),[Ut,It]=y.useState([]),[cs,Os]=y.useState([]),[gs,la]=y.useState(""),[ns,Rs]=y.useState(""),[Es,hr]=y.useState([]),[oa,yr]=y.useState(!1),[Sr,ta]=y.useState(!1),[lr,on]=y.useState(!1),[Ys,es]=y.useState(null),[Ts,Ga]=y.useState(null),[ca,vs]=y.useState([]),[ya,vn]=y.useState({isOpen:!1,type:"category",name:"",description:""}),[or,Yn]=y.useState(""),[Nn,cr]=y.useState([]),[Ea,da]=y.useState([]),[zs,cn]=y.useState({}),[to,wn]=y.useState({}),[Sn,he]=y.useState([]),[ze,Ce]=y.useState(!1),[Ne,Fe]=y.useState([]),[nt,ke]=y.useState([]),[Ge,Le]=y.useState(null),[Ue,Re]=y.useState(!1),[vt,$e]=y.useState(!1),[ut,Gt]=y.useState({}),[Cs,is]=y.useState([]),[qs,As]=y.useState(!1),[Ie,Je]=y.useState(null),[et,it]=y.useState(!1),[Bt,We]=y.useState({status:"",deliveryDate:"",adminNotes:""}),[Pe,_e]=y.useState(!1),[Mt,Nt]=y.useState({name:"",email:"",password:""}),[ts,ms]=y.useState(!1),[jt,Wt]=y.useState({name:"",description:"",isEnabled:!0,operators:[]}),[gt,Na]=y.useState([]),[Ta,Cr]=y.useState(""),[dr,Fa]=y.useState(!1),[Ws,Qa]=y.useState(null),[Wn,Zn]=y.useState(!1),[Kn,xi]=y.useState([]),[Ec,au]=y.useState(!1),[Jn,Tc]=y.useState(null),[th,Eo]=y.useState(!1),[ru,kc]=y.useState({page:1,limit:10,total:0,totalPages:0}),[Ft,Ua]=y.useState({name:"",scope:"GLOBAL",scopeRefId:"",when:{attribute:"",value:""},then:[],priority:0,isActive:!0}),[To,Pc]=y.useState([]),[sh,nu]=y.useState(!1),[fi,iu]=y.useState(null),[ah,Dc]=y.useState(!1),[Qs,Xn]=y.useState({parentAttribute:"",parentValue:"",value:"",label:"",image:null,priceAdd:0,isEnabled:!0}),[Fr,gi]=y.useState([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}]),[ei,lu]=y.useState({attributeId:"",parentValue:""}),[er,Oc]=y.useState([]),[ou,Rc]=y.useState(!1),[ti,$i]=y.useState(null),[Ar,Fi]=y.useState({name:"",description:"",isEnabled:!0,operators:[]}),[bi,cu]=y.useState([]),[du,ml]=y.useState(!1),[Er,_c]=y.useState(null),[Ui,hl]=y.useState(null),[Mc,pl]=y.useState(!1),[qt,pr]=y.useState({name:"",printType:"",category:"",subcategory:"",selectedDepartments:[],selectedAttributes:[]}),[ee,bt]=y.useState({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]});y.useEffect(()=>{const c=localStorage.getItem("user");if(!c){s("/login");return}if(JSON.parse(c).role!=="admin"){s("/");return}Sa(),Ur(),yi(),vi(),si(),fl()},[s]),y.useEffect(()=>{n==="products"&&(xr(),Vr(),Br()),n==="departments"&&(Br(),Po()),n==="sequences"&&(Vr(),Br(),Sa(),yi()),n==="categories"&&Cn(),n==="manage-products"&&(yi(),Sa())},[n]),y.useEffect(()=>{u&&window.scrollTo({top:0,behavior:"smooth"})},[u]),y.useEffect(()=>{(Object.keys(M).length>0||Object.keys(ae).length>0||Object.keys(Q).length>0||Object.keys(te).length>0||Object.keys(X).length>0||Object.keys(D).length>0)&&window.scrollTo({top:0,behavior:"smooth"})},[M,ae,Q,te,X,D]),y.useEffect(()=>{if(se.parent&&se.type){const c=kt.find(b=>b._id===se.parent);c&&c.type!==se.type&&le({...se,parent:""})}},[se.type,kt]);const rh=async c=>{const b=new Map;c.forEach(U=>{b.set(U._id,{...U,children:[]})});const N=(U,G,Y)=>U.map(K=>({_id:K._id,name:K.name,description:K.description,image:K.image,slug:K.slug,type:K.category&&typeof K.category=="object"?K.category.type:Y,parent:G,sortOrder:K.sortOrder||0,category:K.category,isSubcategory:!0,createdAt:K.createdAt,updatedAt:K.updatedAt,children:K.children?N(K.children,K._id,Y):[]})),S=[];for(const U of c){const G=b.get(U._id);try{const Y=await fetch(`${we}/subcategories/category/${U._id}?includeChildren=true`,{headers:Ot()});if(Y.ok){const K=await wt(Y),ce=Array.isArray(K)?K:[];G.children=N(ce,U._id,U.type)}}catch(Y){console.error(`Error fetching subcategories for category ${U._id}:`,Y),G.children=[]}S.push(G)}const T=U=>Array.isArray(U)?[...U].sort((G,Y)=>(G.sortOrder||0)-(Y.sortOrder||0)).map(G=>({...G,children:G.children?T(G.children):[]})):[];return T(S)},uu=(c,b=0,N=[])=>{let S=[];return c.forEach(T=>{const U=[...N,T._id];S.push({...T,displayLevel:b,path:U}),T.children&&T.children.length>0&&(S=S.concat(uu(T.children,b+1,U)))}),S};y.useEffect(()=>{let c=[...He];if(Gs!=="all"&&(c=c.filter(N=>N.type===Gs)),Vs.trim()!==""){const N=Vs.toLowerCase().trim();c=c.filter(S=>S.name.toLowerCase().includes(N)||S.description&&S.description.toLowerCase().includes(N)||S.type&&S.type.toLowerCase().includes(N))}c.sort((N,S)=>(N.sortOrder||0)-(S.sortOrder||0)),(async()=>{let N=await rh(c);if($a==="top-level")N=N.map(T=>({...T,children:[]}));else if($a==="subcategories"){const T=[];N.forEach(U=>{U.children&&U.children.length>0&&T.push(...U.children)}),N=T}const S=uu(N);Ds(S)})()},[He,Vs,Gs,$a]),y.useEffect(()=>{let c=[..._t];if(mr.trim()!==""){const b=mr.toLowerCase().trim();c=c.filter(N=>N.name.toLowerCase().includes(b)||N.description&&N.description.toLowerCase().includes(b)||N.slug&&N.slug.toLowerCase().includes(b)||N.category&&typeof N.category=="object"&&N.category.name&&N.category.name.toLowerCase().includes(b))}c.sort((b,N)=>{const S=b.sortOrder||0,T=N.sortOrder||0;return S!==T?S-T:new Date(N.createdAt||0).getTime()-new Date(b.createdAt||0).getTime()}),Qn(c)},[_t,mr]),y.useEffect(()=>{if(or&&Nn.length===1&&!$.category){const c=Nn[0];c&&c._id&&(re({...$,category:c._id}),da([c._id]),An(c._id))}},[or,Nn,$.category]),y.useEffect(()=>{var c;if($.category&&((c=zs[$.category])==null?void 0:c.length)===1&&!$.subcategory){const b=zs[$.category][0];b&&b._id&&re({...$,subcategory:b._id})}},[$.category,zs,$.subcategory]),y.useEffect(()=>{if(n==="products"&&($.category||$.subcategory)){const c=$.category||null,b=$.subcategory||null;xr(c,b)}},[$.category,$.subcategory,n]),y.useEffect(()=>{const c=er.filter(b=>b.isEnabled);if(c.length===1&&qt.selectedDepartments.length===0){const b=c[0];b&&b._id&&pr({...qt,selectedDepartments:[b._id]})}},[er,qt.selectedDepartments.length]),y.useEffect(()=>{if(qt.printType){const c=He.filter(b=>qt.printType==="digital"?b.type==="Digital"||b.type==="digital":qt.printType==="bulk"?b.type==="Bulk"||b.type==="bulk":!1).filter(b=>!b.parent);if(c.length===1&&!qt.category){const b=c[0];b&&b._id&&pr({...qt,category:b._id})}}},[qt.printType,He,qt.category]);const Ot=(c=!1)=>{const N={Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"};return c&&(N["Content-Type"]="application/json"),N},Ii=(c,b,N)=>{if(!c)return"";let S=c.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),T=S,U=2,G=He.some(K=>K.slug===T&&(!b||K._id!==b)),Y=_t.some(K=>K.slug===T&&(!N||K._id!==N));for(;G||Y;)T=`${S}-${U}`,U++,G=He.some(K=>K.slug===T&&(!b||K._id!==b)),Y=_t.some(K=>K.slug===T&&(!N||K._id!==N));return T},wt=async c=>{const b=await c.text();if(b.trim().startsWith("<!DOCTYPE")||b.trim().startsWith("<html"))throw new Error(`Server returned HTML instead of JSON. Status: ${c.status} ${c.statusText}`);try{const N=JSON.parse(b);if(!c.ok)throw new Error(N.error||N.message||`Request failed: ${c.status} ${c.statusText}`);return N}catch(N){throw N instanceof Error?N:new Error(b||`Invalid response from server. Status: ${c.status} ${c.statusText}`)}},Sa=async()=>{try{const c=await fetch(`${we}/categories`,{method:"GET",headers:Ot()});if(!c.ok)throw new Error(`Failed to fetch categories: ${c.status} ${c.statusText}`);const b=await wt(c),N=Array.isArray(b)?b.filter(S=>!S.parent||S.parent===null||typeof S.parent=="object"&&!S.parent._id):[];N.sort((S,T)=>(S.sortOrder||0)-(T.sortOrder||0)),mt(N),Ds(N)}catch(c){console.error("Error fetching categories:",c),p(c instanceof Error?c.message:"Failed to fetch categories")}},Cn=async c=>{try{const b=c?`${we}/categories/available-parents?excludeId=${c}`:`${we}/categories/available-parents`,N=await fetch(b,{method:"GET",headers:Ot()});if(!N.ok)throw new Error(`Failed to fetch available parent categories: ${N.status} ${N.statusText}`);const S=await wt(N),T=Array.isArray(S)?S.sort((U,G)=>{const Y=U.sortOrder||0,K=G.sortOrder||0;return Y!==K?Y-K:(U.name||"").localeCompare(G.name||"")}):[];Lt(T)}catch(b){console.error("Error fetching available parent categories:",b)}},yi=async()=>{try{const c=await fetch(`${we}/subcategories`,{method:"GET",headers:Ot()});if(!c.ok)throw new Error(`Failed to fetch subcategories: ${c.status} ${c.statusText}`);const b=await wt(c),N=b.filter(S=>!S.category||S._warning);N.length>0&&p(`Warning: ${N.length} subcategor${N.length===1?"y":"ies"} have deleted parent categories. Please reassign them to valid categories.`),ps(b)}catch(c){console.error("Error fetching subcategories:",c),p(c instanceof Error?c.message:"Failed to fetch subcategories")}},Ur=async c=>{try{ta(!0);let b=`${we}/products`;c&&(b=`${we}/products/category/${c}`);const N=await fetch(b,{headers:Ot()});if(!N.ok)throw new Error(`Failed to fetch products: ${N.status} ${N.statusText}`);const S=await wt(N);console.log("=== PRODUCTS FETCHED (AdminDashboard) ==="),console.log("Total products:",Array.isArray(S)?S.length:0),console.log("Full products data:",JSON.stringify(S,null,2)),It(S),Os(S)}catch(b){console.error("Error fetching products:",b),p(b instanceof Error?b.message:"Failed to fetch products")}finally{ta(!1)}};y.useEffect(()=>{if((gs||ns.trim())&&Ut.length>0){on(!0);const N=setTimeout(()=>{on(!1)},100);return()=>clearTimeout(N)}else on(!1);let b=Ut;if(gs&&(b=b.filter(N=>{const S=N.category&&typeof N.category=="object"?N.category._id:N.category,T=N.subcategory&&typeof N.subcategory=="object"?N.subcategory._id:N.subcategory;return S===gs||T===gs})),ns.trim()){const N=ns.toLowerCase().trim();b=b.filter(S=>{var K,ce,De,Ze;const T=(K=S.name)==null?void 0:K.toLowerCase().includes(N),U=(ce=S.description)==null?void 0:ce.toLowerCase().includes(N),G=S.category&&typeof S.category=="object"?(De=S.category.name)==null?void 0:De.toLowerCase().includes(N):!1,Y=S.subcategory&&typeof S.subcategory=="object"?(Ze=S.subcategory.name)==null?void 0:Ze.toLowerCase().includes(N):!1;return T||U||G||Y})}Os(b),on(!1)},[Ut,gs,ns]);const mu=async c=>{la(c),c?await Ur(c):await Ur()},An=async c=>{if(!c){cn(b=>{const N={...b};return delete N[c],N});return}try{wn(G=>({...G,[c]:!0}));const b=await fetch(`${we}/subcategories/category/${c}?includeChildren=true`,{headers:Ot()});if(!b.ok){const G=await fetch(`${we}/categories/parent/${c}`,{headers:Ot()});if(G.ok){const Y=await wt(G),K=Array.isArray(Y)?Y:(Y==null?void 0:Y.data)||[];cn(ce=>({...ce,[c]:K}));return}throw new Error(`Failed to fetch child categories: ${b.status} ${b.statusText}`)}const N=await wt(b),S=Array.isArray(N)?N:(N==null?void 0:N.data)||[],T=G=>{let Y=[];return G.forEach(K=>{Y.push(K),K.children&&K.children.length>0&&(Y=Y.concat(T(K.children)))}),Y},U=T(S);cn(G=>({...G,[c]:U}))}catch(b){console.error("Error fetching child categories:",b),cn(N=>({...N,[c]:[]}))}finally{wn(b=>{const N={...b};return delete N[c],N})}},ko=(c,b)=>{if(!c)return[];const N=[c];if(!b||b===c)return N;const S=(G,Y,K)=>{if(G===Y)return K;const ce=zs[G]||[];for(const De of ce){const Ze=[...K,De._id],Et=S(De._id,Y,Ze);if(Et)return Et}return null},T=S(c,b,N);if(T)return T;if(He.find(G=>G._id===b)){const G=[];let Y=b;for(;Y&&(G.unshift(Y),Y!==c);){const K=He.find(ce=>ce._id===Y);if(!K||!K.parent||(Y=typeof K.parent=="object"?K.parent._id:K.parent,G.includes(Y)))break}return G}return N};y.useEffect(()=>{if(or){const c=He.filter(b=>b.type===or&&(!b.parent||b.parent===null||typeof b.parent=="object"&&!b.parent._id));cr(c)}else cr([]);or&&(re(c=>({...c,category:"",subcategory:""})),da([]),cn({}))},[or,He]),y.useEffect(()=>{const c=Ea[Ea.length-1];c&&!zs[c]&&An(c),Ea.forEach(b=>{zs[b]||An(b)})},[Ea]);const xl=async c=>{if(Ys===c)es(null),vs([]),Ga(null),he([]);else{es(c),Ga(null),he([]);try{Ce(!0);const b=await fetch(`${we}/products/category/${c}`,{headers:Ot()});let N=[];if(b.ok){const T=await wt(b);console.log("=== CATEGORY PRODUCTS (handleCategoryClick) ==="),console.log(`Category ID: ${c}`),console.log(`Products fetched: ${Array.isArray(T)?T.length:0}`),console.log("Full products data:",JSON.stringify(T,null,2)),Array.isArray(T)&&(N=T.filter(U=>!U.subcategory||U.subcategory===null||typeof U.subcategory=="string"&&U.subcategory===""))}let S=[];try{const T=await fetch(`${we}/subcategories/category/${c}?includeChildren=true`,{headers:Ot()});if(T.ok){const U=await wt(T);S=Array.isArray(U)?U:(U==null?void 0:U.data)||[],S.sort((G,Y)=>{const K=G.sortOrder||0,ce=Y.sortOrder||0;return K!==ce?K-ce:new Date(Y.createdAt||0).getTime()-new Date(G.createdAt||0).getTime()}),vs(S)}}catch(T){console.error("Error fetching subcategories:",T),vs([])}if(S.length>0){const T=[];for(const U of S)try{let G=[];const Y=await fetch(`${we}/products/subcategory/${U._id}`,{headers:Ot()});if(Y.ok){const De=await wt(Y);console.log("=== SUBCATEGORY PRODUCTS (handleCategoryClick) ==="),console.log(`Subcategory ID: ${U._id}`),console.log(`Products fetched: ${Array.isArray(De)?De.length:0}`),console.log("Full products data:",JSON.stringify(De,null,2)),Array.isArray(De)&&(G=De)}if(G.length===0){const De=await fetch(`${we}/products/category/${c}`,{headers:Ot()});if(De.ok){const Ze=await wt(De);Array.isArray(Ze)&&(G=Ze.filter(Qt=>!Qt.subcategory||Qt.subcategory===null||typeof Qt.subcategory=="string"&&Qt.subcategory===""))}}const K=new Set(T.map(De=>De._id)),ce=G.filter(De=>!K.has(De._id));T.push(...ce)}catch(G){console.error(`Error fetching products from subcategory ${U._id}:`,G)}he([...N,...T])}else he(N)}catch(b){console.error("Error fetching category products:",b),p(b instanceof Error?b.message:"Failed to fetch category products"),he([])}finally{Ce(!1)}}},Bi=async(c,b)=>{if(b&&b.stopPropagation(),Ts===c)Ga(null),he([]);else{Ga(c);try{Ce(!0);let N=[];try{const S=await fetch(`${we}/products/subcategory/${c}`,{headers:Ot()});if(S.ok){const T=await wt(S);console.log("=== SUBCATEGORY PRODUCTS (handleSubCategoryClick) ==="),console.log(`Subcategory ID: ${c}`),console.log(`Products fetched: ${Array.isArray(T)?T.length:0}`),console.log("Full products data:",JSON.stringify(T,null,2)),N=Array.isArray(T)?T:[]}}catch(S){console.error("Error fetching subcategory products:",S)}if(N.length===0&&Ys){console.log("No products found with subcategory, trying parent category products...");try{const S=await fetch(`${we}/products/category/${Ys}`,{headers:Ot()});if(S.ok){const T=await wt(S);Array.isArray(T)&&(N=T.filter(G=>!G.subcategory||G.subcategory===null||typeof G.subcategory=="string"&&G.subcategory===""),console.log(`Found ${N.length} product(s) in parent category ${Ys}`))}}catch(S){console.error("Error fetching category products as fallback:",S)}}he(N)}catch(N){console.error("Error fetching subcategory products:",N),p(N instanceof Error?N.message:"Failed to fetch subcategory products"),he([])}finally{Ce(!1)}}},so=(c,b)=>{if(!b||!oe){dn();return}const N=b.getBoundingClientRect(),S=c.clientY,T=80,U=20,G=5,Y=S-N.top,K=N.bottom-S;let ce=!1,De=null,Ze=0;if(Y<T&&b.scrollTop>0){ce=!0,De="up";const Et=Math.max(0,T-Y);Ze=G+Et/T*(U-G)}else if(K<T){const Et=b.scrollHeight-b.clientHeight;if(b.scrollTop<Et){ce=!0,De="down";const Qt=Math.max(0,T-K);Ze=G+Qt/T*(U-G)}}if(lt.current&&(clearTimeout(lt.current),lt.current=null),ce&&De){const Et=()=>{if(!b){dn();return}if(De==="up")b.scrollTop>0?(b.scrollTop=Math.max(0,b.scrollTop-Ze),lt.current=setTimeout(Et,16)):dn();else if(De==="down"){const Qt=b.scrollHeight-b.clientHeight;b.scrollTop<Qt?(b.scrollTop=Math.min(Qt,b.scrollTop+Ze),lt.current=setTimeout(Et,16)):dn()}};Et()}else dn()},dn=()=>{lt.current&&(clearTimeout(lt.current),lt.current=null)},zc=async(c,b,N)=>{if(window.confirm("Are you sure you want to reorder these categories? This will update the sort order for all affected categories."))try{m(!0),p(null),h(null);let T=xt.find(St=>St._id===c);if(T||(T=He.find(St=>St._id===c)),!T)try{const St=await fetch(`${we}/categories/${c}`,{method:"GET",headers:Ot()});if(St.ok)T=await wt(St);else try{const Hs=await fetch(`${we}/subcategories/${c}`,{method:"GET",headers:Ot()});if(Hs.ok){const Ls=await wt(Hs);T={...Ls,parent:Ls.category,type:Ls.category&&typeof Ls.category=="object"?Ls.category.type:"Digital"}}}catch(Hs){console.error("Error fetching dragged subcategory:",Hs)}}catch(St){console.error("Error fetching dragged category:",St)}if(!T){p(`Dragged category not found (ID: ${c}). Please refresh the page and try again.`),m(!1);return}if(T.isSubcategory||T.displayLevel&&T.displayLevel>0){p("Subcategories should be reordered in their own section. Please use the subcategory drag and drop."),m(!1);return}let G=xt.find(St=>St._id===b);if(G||(G=He.find(St=>St._id===b)),!G)try{const St=await fetch(`${we}/categories/${b}`,{method:"GET",headers:Ot()});if(St.ok)G=await wt(St);else try{const Hs=await fetch(`${we}/subcategories/${b}`,{method:"GET",headers:Ot()});if(Hs.ok){const Ls=await wt(Hs);G={...Ls,parent:Ls.category,type:Ls.category&&typeof Ls.category=="object"?Ls.category.type:"Digital"}}}catch(Hs){console.error("Error fetching target subcategory:",Hs)}}catch(St){console.error("Error fetching target category:",St)}if(!G){p(`Target category not found (ID: ${b}). Please refresh the page and try again.`),m(!1);return}if(G.isSubcategory||G.displayLevel&&G.displayLevel>0){p("Subcategories should be reordered in their own section. Please use the subcategory drag and drop."),m(!1);return}const K=T.parent?typeof T.parent=="object"?T.parent._id:T.parent:null,ce=G.parent?typeof G.parent=="object"?G.parent._id:G.parent:null;if(K!==ce){p("Cannot reorder categories across different levels. Categories must have the same parent."),m(!1);return}const Ze=[...He,...xt.filter(St=>!He.find(Hs=>Hs._id===St._id))].filter(St=>(St.parent?typeof St.parent=="object"?St.parent._id:St.parent:null)===K).sort((St,Hs)=>(St.sortOrder||0)-(Hs.sortOrder||0)),Et=xt.filter(St=>(St.parent?typeof St.parent=="object"?St.parent._id:St.parent:null)===K).sort((St,Hs)=>(St.sortOrder||0)-(Hs.sortOrder||0)),Qt=Et.findIndex(St=>St._id===c),Dt=Et.findIndex(St=>St._id===b);if(Qt===-1||Dt===-1){p("Category not found in filtered view"),m(!1);return}const Pt=Ze.find(St=>St._id===b);if(!Pt){p("Target category not found in siblings"),m(!1);return}const Tt=T.sortOrder??0,Zt=Pt.sortOrder??0;if(Tt===Zt){h("Categories are already in the same position"),m(!1);return}const ht=Ze.findIndex(St=>St._id===c),Xt=Ze.findIndex(St=>St._id===b);if(ht===-1||Xt===-1){p("Could not find categories in siblings list"),m(!1);return}const na=[];if(na.push({id:c,sortOrder:Zt}),ht<Xt)for(let St=ht+1;St<=Xt;St++){const Hs=Ze[St],Ls=Hs.sortOrder??St;St===Xt?na.push({id:Hs._id,sortOrder:Ls+1}):na.push({id:Hs._id,sortOrder:Ls-1})}else for(let St=Xt;St<ht;St++){const Hs=Ze[St],Ls=Hs.sortOrder??St;na.push({id:Hs._id,sortOrder:Ls+1})}const Qr=na.map(async({id:St,sortOrder:Hs})=>{let Ls=He.find(ar=>ar._id===St)||xt.find(ar=>ar._id===St);if(!Ls)try{const ar=await fetch(`${we}/categories/${St}`,{method:"GET",headers:Ot()});ar.ok&&(Ls=await wt(ar))}catch(ar){console.error(`Error fetching category ${St}:`,ar)}const Yr=new FormData;if(Yr.append("sortOrder",Hs.toString()),Ls){if(Yr.append("name",Ls.name),Yr.append("description",Ls.description||""),Yr.append("type",Ls.type),Ls.parent){const ar=typeof Ls.parent=="object"?Ls.parent._id:Ls.parent;Yr.append("parent",ar)}else Yr.append("parent","");Ls.slug&&Yr.append("slug",Ls.slug)}else console.warn(`Category ${St} not found in local state, updating with sortOrder only`);const jr=await fetch(`${we}/categories/${St}`,{method:"PUT",headers:{...Ot()},body:Yr});if(!jr.ok){const ar=await jr.json().catch(()=>({error:`HTTP ${jr.status}: ${jr.statusText}`}));throw new Error(`Failed to update category ${St}: ${ar.error||jr.statusText}`)}return jr});await Promise.all(Qr),h(`Category moved successfully! Category moved from position ${Tt+1} to ${Zt+1}.`),await Sa()}catch(T){p(T instanceof Error?T.message:"Failed to reorder categories")}finally{m(!1)}},Lc=async(c,b)=>{if(window.confirm("Are you sure you want to reorder these subcategories? This will update the sort order for all affected subcategories."))try{m(!0),p(null),h(null);let S=ca.find(Tt=>Tt._id===c);if(!S){const Tt=xt.find(Zt=>Zt._id===c&&Zt.isSubcategory);Tt&&(S=Tt)}if(!S){p("Dragged subcategory not found"),m(!1);return}let T=ca.find(Tt=>Tt._id===b);if(!T){const Tt=xt.find(Zt=>Zt._id===b&&Zt.isSubcategory);Tt&&(T=Tt)}if(!T){p("Target subcategory not found"),m(!1);return}const U=S.category?typeof S.category=="object"?S.category._id:S.category:null,G=T.category?typeof T.category=="object"?T.category._id:T.category:null;if(U!==G){p("Cannot reorder subcategories across different categories."),m(!1);return}let Y=[...ca];if(Y.length===0||!Y.some(Tt=>(Tt.category?typeof Tt.category=="object"?Tt.category._id:Tt.category:null)===U)){const Tt=xt.filter(Zt=>Zt.isSubcategory||Zt.displayLevel>0?(Zt.category?typeof Zt.category=="object"?Zt.category._id:Zt.category:Zt.parent?typeof Zt.parent=="object"?Zt.parent._id:Zt.parent:null)===U:!1);if(Tt.length>0)Y=Tt;else try{const Zt=await fetch(`${we}/subcategories/category/${U}`,{headers:Ot()});if(Zt.ok){const ht=await wt(Zt);Y=Array.isArray(ht)?ht:(ht==null?void 0:ht.data)||[]}}catch(Zt){console.error("Error fetching subcategories:",Zt)}}const K=Y.filter(Tt=>(Tt.category?typeof Tt.category=="object"?Tt.category._id:Tt.category:Tt.parent?typeof Tt.parent=="object"?Tt.parent._id:Tt.parent:null)===U).sort((Tt,Zt)=>(Tt.sortOrder||0)-(Zt.sortOrder||0)),ce=K.findIndex(Tt=>Tt._id===c),De=K.findIndex(Tt=>Tt._id===b);if(ce===-1||De===-1){p("Could not find subcategories in sorted list"),m(!1);return}if(ce===De){h("Subcategories are already in the same position"),m(!1);return}const Ze=[],Et=[...K],[Qt]=Et.splice(ce,1);Et.splice(De,0,Qt),Et.forEach((Tt,Zt)=>{Ze.push({id:Tt._id,sortOrder:Zt})});const Dt=Ze.map(({id:Tt,sortOrder:Zt})=>{const ht=new FormData;ht.append("sortOrder",Zt.toString());const Xt=ca.find(na=>na._id===Tt);return Xt&&(ht.append("name",Xt.name),ht.append("description",Xt.description||""),ht.append("category",U||""),Xt.slug&&ht.append("slug",Xt.slug)),fetch(`${we}/subcategories/${Tt}`,{method:"PUT",headers:{...Ot()},body:ht})});await Promise.all(Dt),h(`Subcategory "${S.name}" moved successfully!`);const Pt=ca.map(Tt=>{const Zt=Ze.find(ht=>ht.id===Tt._id);return Zt?{...Tt,sortOrder:Zt.sortOrder}:Tt});vs(Pt),Ys&&await xl(Ys),await Sa()}catch(S){p(S instanceof Error?S.message:"Failed to reorder subcategories")}finally{m(!1)}},Vi=c=>{const b=He.find(N=>N._id===c);b&&(Ct({name:"",description:"",category:c,parent:"",type:b.type||"",slug:"",sortOrder:0,image:null}),wa(null),yt(null),l("categories"),p(null),h(null))},ji=(c,b)=>{const N=He.find(S=>S._id===c);if(N){Yn(N.type||"");let S=[c];if(b&&(S=ko(c,b)),da(S),re({...$,category:c,subcategory:b||""}),N.type){const T=He.filter(U=>U.type===N.type);cr(T)}b&&An(b),S.forEach(T=>{An(T)}),l("products"),p(null),h(null)}},vi=async()=>{try{const c=await fetch(`${we}/admin/users`,{headers:Ot()});if(!c.ok)throw new Error(`Failed to fetch users: ${c.status} ${c.statusText}`);const b=await wt(c);Fe(b)}catch(c){console.error("Error fetching users:",c),p(c instanceof Error?c.message:"Failed to fetch users")}},Po=async()=>{try{const c=await fetch(`${we}/admin/employees`,{headers:Ot()});if(!c.ok)throw new Error(`Failed to fetch employees: ${c.status} ${c.statusText}`);const b=await wt(c);at(b)}catch(c){console.error("Error fetching employees:",c),p(c instanceof Error?c.message:"Failed to fetch employees")}},si=async(c=!1)=>{$e(!0);try{const b=`${we}/admin/uploads${c?"?includeImages=true":""}`,N=await fetch(b,{headers:Ot()}),S=await wt(N);if(N.status===503)throw new Error(S.error||"Database connection timeout. Try again without images.");const T=Array.isArray(S)?S:S.uploads||[];ke(T)}catch(b){console.error("Error fetching uploads:",b),p(b instanceof Error?b.message:"Failed to fetch uploaded images")}finally{$e(!1)}},fl=async()=>{As(!0);try{const c=await fetch(`${we}/admin/orders`,{headers:Ot()});if(!c.ok)throw new Error(`Failed to fetch orders: ${c.status} ${c.statusText}`);const b=await wt(c);is(b||[])}catch(c){console.error("Error fetching orders:",c),p(c instanceof Error?c.message:"Failed to fetch orders")}finally{As(!1)}},Do=async()=>{au(!0);try{const c=`${we}/admin/attribute-rules?page=${ru.page}&limit=${ru.limit}`,b=await fetch(c,{method:"GET",headers:Ot()});if(!b.ok)throw new Error(`Failed to fetch attribute rules: ${b.status} ${b.statusText}`);const N=await wt(b),S=N.success?N.data:Array.isArray(N)?N:[];console.log(" Fetched attribute rules:",S),xi(S),N.pagination&&kc(N.pagination)}catch(c){console.error("Error fetching attribute rules:",c),p(c instanceof Error?c.message:"Failed to fetch attribute rules"),xi([])}finally{au(!1)}},hu=async c=>{c.preventDefault(),m(!0),p(null),h(null);try{if(!Ft.name.trim()){p("Rule name is required"),m(!1);return}if(!Ft.when.attribute||!Ft.when.value){p("WHEN condition (attribute and value) is required"),m(!1);return}if(Ft.then.length===0){p("At least one THEN action is required"),m(!1);return}for(const G of Ft.then){if(!G.targetAttribute){p(`Action "${G.action}" requires a target attribute`),m(!1);return}if(G.targetAttribute===Ft.when.attribute){p("Target attribute cannot be the same as WHEN attribute"),m(!1);return}if(G.action==="SHOW_ONLY"&&(!G.allowedValues||G.allowedValues.length===0)){p("SHOW_ONLY action requires at least one allowed value"),m(!1);return}if(G.action==="SET_DEFAULT"&&!G.defaultValue){p("SET_DEFAULT action requires a default value"),m(!1);return}}if(Ft.scope==="CATEGORY"&&!Ft.scopeRefId){p("Category scope requires a category selection"),m(!1);return}if(Ft.scope==="PRODUCT"&&!Ft.scopeRefId){p("Product scope requires a product selection"),m(!1);return}const b=gt.find(G=>G.attributeName===Ft.when.attribute);if(!b){p("WHEN attribute not found"),m(!1);return}const N={name:Ft.name,when:{attribute:b._id,value:Ft.when.value},then:Ft.then.map(G=>{if(G.action==="TRIGGER_PRICING")return{action:G.action,pricingSignal:G.pricingSignal||{pricingKey:"",scope:"PRODUCT",priority:0}};const Y=gt.find(K=>K.attributeName===G.targetAttribute);if(!Y&&G.targetAttribute)throw new Error(`Target attribute "${G.targetAttribute}" not found`);return{action:G.action,targetAttribute:Y==null?void 0:Y._id,allowedValues:G.allowedValues||[],defaultValue:G.defaultValue||null}}),priority:Ft.priority||0,isActive:Ft.isActive};Ft.scope==="CATEGORY"?N.applicableCategory=Ft.scopeRefId:Ft.scope==="PRODUCT"&&(N.applicableProduct=Ft.scopeRefId);const S=Jn?`${we}/admin/attribute-rules/${Jn}`:`${we}/admin/attribute-rules`,U=await fetch(S,{method:Jn?"PUT":"POST",headers:{...Ot(!0)},body:JSON.stringify(N)});if(!U.ok){const G=await wt(U);throw new Error(G.error||`Failed to ${Jn?"update":"create"} rule`)}h(`Rule ${Jn?"updated":"created"} successfully`),await Do(),Oo()}catch(b){console.error("Error saving attribute rule:",b),p(b instanceof Error?b.message:`Failed to ${Jn?"update":"create"} rule`)}finally{m(!1)}},nh=async c=>{if(window.confirm("Are you sure you want to delete this rule?")){m(!0),p(null);try{if(!(await fetch(`${we}/admin/attribute-rules/${c}`,{method:"DELETE",headers:Ot()})).ok)throw new Error("Failed to delete rule");h("Rule deleted successfully"),await Do()}catch(b){console.error("Error deleting rule:",b),p(b instanceof Error?b.message:"Failed to delete rule")}finally{m(!1)}}},Oo=()=>{Tc(null),Eo(!1),Ua({name:"",scope:"GLOBAL",scopeRefId:"",when:{attribute:"",value:""},then:[],priority:0,isActive:!0})},ih=c=>{var T;const b=typeof c.when.attribute=="object"&&c.when.attribute!==null?c.when.attribute.attributeName:((T=gt.find(U=>U._id===c.when.attribute))==null?void 0:T.attributeName)||"";let N="";c.applicableProduct?N=typeof c.applicableProduct=="object"&&c.applicableProduct!==null?c.applicableProduct._id:c.applicableProduct:c.applicableCategory&&(N=typeof c.applicableCategory=="object"&&c.applicableCategory!==null?c.applicableCategory._id:c.applicableCategory);const S=(c.then||[]).filter(U=>U&&U.targetAttribute).map(U=>{var Y;const G=typeof U.targetAttribute=="object"&&U.targetAttribute!==null?U.targetAttribute.attributeName:U.targetAttribute&&((Y=gt.find(K=>K._id===U.targetAttribute))==null?void 0:Y.attributeName)||"";return{action:U.action,targetAttribute:G,allowedValues:U.allowedValues||[],defaultValue:U.defaultValue||null}});Ua({name:`${c.name||"Untitled Rule"} (Copy)`,scope:c.applicableProduct?"PRODUCT":c.applicableCategory?"CATEGORY":"GLOBAL",scopeRefId:N,when:{attribute:b,value:c.when.value||""},then:S,priority:c.priority||0,isActive:c.isActive!==void 0?c.isActive:!0}),Tc(null),Eo(!0)},pu=c=>{var S;const b=typeof c.when.attribute=="object"&&c.when.attribute!==null?c.when.attribute.attributeName:((S=gt.find(T=>T._id===c.when.attribute))==null?void 0:S.attributeName)||"";let N="";c.applicableProduct?N=typeof c.applicableProduct=="object"&&c.applicableProduct!==null?c.applicableProduct._id:c.applicableProduct:c.applicableCategory&&(N=typeof c.applicableCategory=="object"&&c.applicableCategory!==null?c.applicableCategory._id:c.applicableCategory),Ua({name:c.name||"",scope:c.applicableProduct?"PRODUCT":c.applicableCategory?"CATEGORY":"GLOBAL",scopeRefId:N,when:{attribute:b,value:c.when.value||""},then:(c.then||[]).filter(T=>T&&T.targetAttribute).map(T=>{var G;const U=typeof T.targetAttribute=="object"&&T.targetAttribute!==null?T.targetAttribute.attributeName:T.targetAttribute&&((G=gt.find(Y=>Y._id===T.targetAttribute))==null?void 0:G.attributeName)||"";return{action:T.action,targetAttribute:U,allowedValues:T.allowedValues||[],defaultValue:T.defaultValue||null}}),priority:c.priority||0,isActive:c.isActive!==void 0?c.isActive:!0}),Tc(c._id),Eo(!0)},ao=async c=>{nu(!0);try{const b=c||ei,N=new URLSearchParams;b.attributeId&&N.append("attributeId",b.attributeId),b.parentValue&&N.append("parentValue",b.parentValue);const S=`${we}/admin/sub-attributes${N.toString()?`?${N.toString()}`:""}`,T=await fetch(S,{method:"GET",headers:Ot()});if(!T.ok)throw new Error(`Failed to fetch sub-attributes: ${T.status} ${T.statusText}`);const U=await wt(T);Pc(Array.isArray(U)?U:[])}catch(b){console.error("Error fetching sub-attributes:",b),p(b instanceof Error?b.message:"Failed to fetch sub-attributes"),Pc([])}finally{nu(!1)}},$c=async c=>{c.preventDefault(),m(!0),p(null),h(null);try{if(!Qs.parentAttribute){p("Parent attribute is required"),m(!1);return}if(!Qs.parentValue){p("Parent value is required"),m(!1);return}const b=gt.find(N=>N.attributeName===Qs.parentAttribute);if(!b){p("Parent attribute not found"),m(!1);return}if(fi){if(!Qs.value||!Qs.label){p("Value and label are required for the sub-attribute being edited"),m(!1);return}const N=new FormData;N.append("parentAttribute",b._id),N.append("parentValue",Qs.parentValue),N.append("value",Qs.value),N.append("label",Qs.label),N.append("priceAdd",Qs.priceAdd.toString()),N.append("isEnabled",Qs.isEnabled.toString()),Qs.image&&N.append("image",Qs.image);const S=await fetch(`${we}/admin/sub-attributes/${fi}`,{method:"PUT",headers:{Authorization:Ot().Authorization,Accept:"application/json"},body:N});if(!S.ok){const ce=await wt(S);throw new Error(ce.error||"Failed to update sub-attribute")}const T=Fr.filter(ce=>ce.value.trim()&&ce.label.trim());let U=!0,G=0,Y=0;const K=[];if(T.length>0)for(const ce of T)try{const De=new FormData;De.append("parentAttribute",b._id),De.append("parentValue",Qs.parentValue),De.append("value",ce.value.trim()),De.append("label",ce.label.trim()),De.append("priceAdd",ce.priceAdd.toString()),De.append("isEnabled",ce.isEnabled.toString()),ce.image&&De.append("image",ce.image);const Ze=await fetch(`${we}/admin/sub-attributes`,{method:"POST",headers:{Authorization:Ot().Authorization,Accept:"application/json"},body:De});if(!Ze.ok){const Et=await wt(Ze);throw new Error(Et.error||"Failed to create sub-attribute")}G++}catch(De){Y++,K.push(`${ce.label}: ${De instanceof Error?De.message:"Unknown error"}`)}Y>0?p(`Updated 1 sub-attribute. Created ${G} new sub-attribute(s), but ${Y} failed: ${K.join("; ")}`):G>0?h(`Successfully updated 1 sub-attribute and created ${G} new sub-attribute(s)`):h("Sub-attribute updated successfully"),await ao(),await xr(),Ni()}else{const N=Fr.filter(G=>G.value.trim()&&G.label.trim());if(N.length===0){p("At least one sub-attribute with value and label is required"),m(!1);return}let S=0,T=0;const U=[];for(const G of N)try{const Y=new FormData;Y.append("parentAttribute",b._id),Y.append("parentValue",Qs.parentValue),Y.append("value",G.value.trim()),Y.append("label",G.label.trim()),Y.append("priceAdd",G.priceAdd.toString()),Y.append("isEnabled",G.isEnabled.toString()),G.image&&Y.append("image",G.image);const K=await fetch(`${we}/admin/sub-attributes`,{method:"POST",headers:{Authorization:Ot().Authorization,Accept:"application/json"},body:Y});if(!K.ok){const ce=await wt(K);throw new Error(ce.error||"Failed to create sub-attribute")}S++}catch(Y){T++,U.push(`${G.label}: ${Y instanceof Error?Y.message:"Unknown error"}`)}T>0?p(`Created ${S} sub-attribute(s), but ${T} failed: ${U.join("; ")}`):h(`Successfully created ${S} sub-attribute(s)`),await ao(),await xr(),Ni()}}catch(b){console.error("Error saving sub-attribute:",b),p(b instanceof Error?b.message:"Failed to save sub-attribute")}finally{m(!1)}},un=async c=>{if(window.confirm("Are you sure you want to delete this sub-attribute?")){m(!0),p(null);try{if(!(await fetch(`${we}/admin/sub-attributes/${c}`,{method:"DELETE",headers:Ot()})).ok)throw new Error("Failed to delete sub-attribute");h("Sub-attribute deleted successfully"),await ao(),await xr()}catch(b){console.error("Error deleting sub-attribute:",b),p(b instanceof Error?b.message:"Failed to delete sub-attribute")}finally{m(!1)}}},Ni=()=>{iu(null),Dc(!1),Xn({parentAttribute:"",parentValue:"",value:"",label:"",image:null,priceAdd:0,isEnabled:!0}),gi([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}])},Tr=()=>{gi([...Fr,{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}])},qi=c=>{Fr.length>1&&gi(Fr.filter((b,N)=>N!==c))},Ir=(c,b,N)=>{const S=[...Fr];S[c]={...S[c],[b]:N},gi(S)},Ro=c=>{var N;const b=typeof c.parentAttribute=="object"&&c.parentAttribute!==null?c.parentAttribute.attributeName:((N=gt.find(S=>S._id===c.parentAttribute))==null?void 0:N.attributeName)||"";Xn({parentAttribute:b,parentValue:c.parentValue||"",value:c.value||"",label:c.label||"",image:null,priceAdd:c.priceAdd||0,isEnabled:c.isEnabled!==void 0?c.isEnabled:!0}),gi([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}]),iu(c._id),Dc(!0)},xr=async(c,b)=>{Fa(!0);try{let N=`${we}/attribute-types`;const S=new URLSearchParams;c&&S.append("categoryId",c),b&&S.append("subCategoryId",b),S.toString()&&(N+=`?${S.toString()}`),console.log("Fetching attribute types from:",N);const T=await fetch(N,{method:"GET",headers:Ot()});if(console.log("Attribute types response status:",T.status,T.statusText),!T.ok){if(T.status===404){console.warn("Attribute types endpoint not found (404). The server may need to be restarted. Returning empty array."),Na([]);return}throw new Error(`Failed to fetch attribute types: ${T.status} ${T.statusText}`)}const U=await wt(T),Y=(U.data||U||[]).filter(K=>{if(K.isCommonAttribute||!c&&!b)return!0;const ce=K.applicableCategories||[],De=K.applicableSubCategories||[];return!!(ce.length===0&&De.length===0||c&&ce.some(Ze=>(typeof Ze=="object"&&Ze!==null?Ze._id:Ze)===c)||b&&De.some(Ze=>(typeof Ze=="object"&&Ze!==null?Ze._id:Ze)===b))});Na(Y)}catch(N){console.error("Error fetching attribute types:",N),N instanceof Error&&(N.message.includes("404")||N.message.includes("Not Found"))?(console.warn("Attribute types endpoint returned 404. Please restart the server to register the route."),Na([])):p(N instanceof Error?N.message:"Failed to fetch attribute types")}finally{Fa(!1)}},Fc=()=>{let c=[];if(ee.attributeOptionsTable&&ee.attributeOptionsTable.length>0)c=ee.attributeOptionsTable.filter(U=>U.name.trim()!=="").map(U=>{var De,Ze,Et,Qt;let G=0;(De=U.optionUsage)!=null&&De.price&&U.priceImpact?G=parseFloat(U.priceImpact)||0:U.priceImpactPer1000&&(G=parseFloat(U.priceImpactPer1000)||0);const Y=G>0?1+G/1e3:1,K=[];(Ze=U.optionUsage)!=null&&Ze.price&&K.push(`Price Impact: ${U.priceImpact||0}`),(Et=U.optionUsage)!=null&&Et.image&&K.push(`Images Required: ${U.numberOfImagesRequired||0}`),(Qt=U.optionUsage)!=null&&Qt.listing&&K.push(`Filters: ${U.listingFilters||"None"}`);const ce=K.length>0?K.join(" | "):"";return{value:U.name.toLowerCase().replace(/\s+/g,"-"),label:U.name,priceMultiplier:Y,description:ce,image:U.image||""}});else if(ee.simpleOptions)c=ee.simpleOptions.split(",").map(G=>G.trim()).filter(G=>G!=="").map(G=>({value:G.toLowerCase().replace(/\s+/g,"-"),label:G,priceMultiplier:1,description:"",image:""}));else if(ee.primaryEffectType==="PRICE"&&ee.priceImpactPer1000){const U=parseFloat(ee.priceImpactPer1000)||0,G=U>0?1+U/1e3:1;c=[{value:ee.attributeName.toLowerCase().replace(/\s+/g,"-"),label:ee.attributeName,priceMultiplier:G,description:"",image:""}]}const b=ee.isPriceEffect||ee.effectDescription&&ee.effectDescription.toLowerCase().includes("price");if(ee.isPriceEffect&&ee.priceEffectAmount&&c.length===0){const U=parseFloat(ee.priceEffectAmount)||0,G=U>0?1+U/1e3:1;c=[{value:ee.attributeName.toLowerCase().replace(/\s+/g,"-"),label:ee.attributeName,priceMultiplier:G,description:"",image:""}]}let N=ee.primaryEffectType;if(ee.effectDescription){const U=ee.effectDescription.toLowerCase();U.includes("price")||U.includes("cost")?N="PRICE":U.includes("file")||U.includes("upload")||U.includes("image")?N="FILE":U.includes("variant")||U.includes("version")||U.includes("type")?N="VARIANT":N="INFORMATIONAL"}const S=ee.primaryEffectType==="FILE"?ee.inputStyle==="FILE_UPLOAD"?"PRINTING_IMAGE":"GENERAL":ee.primaryEffectType==="PRICE"&&ee.inputStyle==="NUMBER"?"QUANTITY_PRICING":"GENERAL";if(ee.isFixedQuantity&&ee.fixedQuantityMin&&ee.fixedQuantityMax){const U=parseInt(ee.fixedQuantityMin)||0,G=parseInt(ee.fixedQuantityMax)||0;c.length>0?c[0].description=JSON.stringify({fixedQuantityMin:U,fixedQuantityMax:G}):c.push({value:"fixed-quantity",label:"Fixed Quantity",priceMultiplier:1,description:JSON.stringify({fixedQuantityMin:U,fixedQuantityMax:G}),image:""})}const T=N||ee.primaryEffectType||"INFORMATIONAL";return{attributeName:ee.attributeName||"",functionType:S||"GENERAL",isPricingAttribute:b||!1,inputStyle:ee.inputStyle||"DROPDOWN",isFixedQuantityNeeded:ee.isFixedQuantity||ee.inputStyle==="NUMBER"&&T==="PRICE",primaryEffectType:T,effectDescription:ee.effectDescription||"",isFilterable:ee.isFilterable!==void 0?ee.isFilterable:T==="INFORMATIONAL"||T==="VARIANT",attributeValues:c,defaultValue:c.length>0?c[0].value:"",isRequired:ee.isRequired!==void 0?ee.isRequired:T==="FILE"||T==="PRICE"||ee.isPriceEffect,displayOrder:0,isCommonAttribute:ee.isCommonAttribute!==void 0?ee.isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[],parentAttribute:ee.parentAttribute||null,showWhenParentValue:ee.showWhenParentValue||[],hideWhenParentValue:ee.hideWhenParentValue||[],fixedQuantityMin:ee.isFixedQuantity?parseInt(ee.fixedQuantityMin)||0:void 0,fixedQuantityMax:ee.isFixedQuantity?parseInt(ee.fixedQuantityMax)||0:void 0,isStepQuantity:ee.isStepQuantity||!1,isRangeQuantity:ee.isRangeQuantity||!1,stepQuantities:ee.isStepQuantity&&ee.stepQuantities.length>0?ee.stepQuantities.map(U=>({quantity:parseFloat(U.quantity)||0,price:parseFloat(U.price)||0})).filter(U=>U.quantity>0):[],rangeQuantities:ee.isRangeQuantity&&ee.rangeQuantities.length>0?ee.rangeQuantities.map(U=>({min:parseFloat(U.min)||0,max:U.max?parseFloat(U.max):null,price:parseFloat(U.price)||0})).filter(U=>U.min>0):[]}},wi=async c=>{var b,N;c.preventDefault(),c.stopPropagation(),m(!0),p(null),h(null);try{const S=Fc();k({});let T=!1;const U={};if(S.attributeName||(U.attributeName="Attribute name is required",T=!0),S.functionType,S.inputStyle,(!S.primaryEffectType||S.primaryEffectType.trim()==="")&&(U.primaryEffectType="Primary effect type is required. Please describe what this attribute affects in the 'What This Affects' field.",T=!0),(!ee.effectDescription||ee.effectDescription.trim()==="")&&(U.primaryEffectType="Please describe what this attribute affects in the 'What This Affects' field.",T=!0),["DROPDOWN","RADIO","POPUP"].includes(S.inputStyle)&&(!S.attributeValues||S.attributeValues.length<2)&&(U.attributeValues=`${S.inputStyle} requires at least 2 options. Please add options in the table above.`,T=!0),ee.attributeOptionsTable&&ee.attributeOptionsTable.length>0&&ee.attributeOptionsTable.filter((Dt,Pt)=>{if(!Dt.name||Dt.name.trim()==="")return!1;const Tt=Dt.optionUsage||{price:!1,image:!1,listing:!1};return!Tt.price&&!Tt.image&&!Tt.listing}).length>0&&(U.attributeValues="Each option must have at least one usage selected (Price, Image, or Listing).",T=!0),T){k(U),p("Please fix the errors below"),m(!1);const Qt=Object.keys(U)[0];if(Qt==="attributeName")Ma("attributeName","attribute-name");else if(Qt==="functionType")Ma("functionType","attribute-functionType");else if(Qt==="inputStyle")Ma("inputStyle","attribute-inputStyle");else if(Qt==="primaryEffectType")Ma("primaryEffectType","attribute-primaryEffectType");else if(Qt==="attributeValues"){const Dt=document.querySelector("[data-attribute-options-table]");Dt&&Dt.scrollIntoView({behavior:"smooth",block:"center"})}return}const G={attributeName:S.attributeName||"",functionType:S.functionType||"GENERAL",isPricingAttribute:S.isPricingAttribute||!1,inputStyle:S.inputStyle||"DROPDOWN",isFixedQuantityNeeded:S.isFixedQuantityNeeded||!1,primaryEffectType:S.primaryEffectType||"INFORMATIONAL",effectDescription:ee.effectDescription||S.effectDescription||"",isFilterable:S.isFilterable||!1,attributeValues:JSON.stringify(S.attributeValues),defaultValue:S.defaultValue||"",isRequired:S.isRequired||!1,displayOrder:S.displayOrder||0,isCommonAttribute:S.isCommonAttribute!==void 0?S.isCommonAttribute:!0,applicableCategories:JSON.stringify(S.applicableCategories),applicableSubCategories:JSON.stringify(S.applicableSubCategories),parentAttribute:S.parentAttribute||null,showWhenParentValue:JSON.stringify(S.showWhenParentValue||[]),hideWhenParentValue:JSON.stringify(S.hideWhenParentValue||[])};console.log("=== ATTRIBUTE TYPE PAYLOAD ==="),console.log("Form effectDescription:",ee.effectDescription),console.log("FullAttributeType effectDescription:",S.effectDescription),console.log("Payload effectDescription:",G.effectDescription),console.log("==============================");const Y=Ws?`${we}/attribute-types/${Ws}`:`${we}/attribute-types`,K=Ws?"PUT":"POST";console.log("Sending attribute type request:",{url:Y,method:K,payload:{...G,attributeValues:"[stringified]",effectDescription:G.effectDescription}});const ce=await fetch(Y,{method:K,headers:{...Ot(),"Content-Type":"application/json"},body:JSON.stringify(G)});if(console.log("Attribute type response status:",ce.status,ce.statusText),ce.status===404)throw new Error("Attribute types API endpoint not found (404). Please ensure the server is running and the route is registered. Try restarting the server.");const De=await wt(ce);if(console.log("Attribute type response data:",{success:De.success,effectDescription:(b=De.data)==null?void 0:b.effectDescription,fullData:De.data}),!ce.ok)throw new Error(De.error||De.message||`Failed to save attribute type: ${ce.status} ${ce.statusText}`);h(Ws?"Attribute type updated successfully":"Attribute type created successfully"),bt({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]});const Ze=Wn,Et=(De==null?void 0:De._id)||((N=De==null?void 0:De.attributeType)==null?void 0:N._id);Qa(null),Wn&&Zn(!1),await xr(),Ze&&Et&&Me([...fe||[],{attributeTypeId:Et,isEnabled:!0,isRequired:!1,displayOrder:(fe||[]).length}])}catch(S){console.error("Error saving attribute type:",S),p(S instanceof Error?S.message:"Failed to save attribute type")}finally{m(!1)}},xu=async c=>{var b,N,S,T;try{const U=await fetch(`${we}/attribute-types/${c}`,{method:"GET",headers:Ot()});if(!U.ok)throw new Error(`Failed to fetch attribute type: ${U.status}`);const G=await wt(U),Y=G.data||G;if(console.log("EDIT AttributeType - Fetched attributeType:",{_id:Y==null?void 0:Y._id,attributeName:Y==null?void 0:Y.attributeName,isStepQuantity:Y==null?void 0:Y.isStepQuantity,isRangeQuantity:Y==null?void 0:Y.isRangeQuantity,stepQuantities:Y==null?void 0:Y.stepQuantities,rangeQuantities:Y==null?void 0:Y.rangeQuantities}),Y){window.scrollTo({top:0,behavior:"smooth"});const K=(Y.attributeValues||[]).filter(Pt=>(Pt.label||Pt.value)&&Pt.value!=="fixed-quantity").map(Pt=>{const Tt=Pt.priceMultiplier?((Pt.priceMultiplier-1)*1e3).toFixed(2):"0",Zt=parseFloat(Tt)>0;return{name:Pt.label||Pt.value||"",priceImpactPer1000:Tt,image:Pt.image||void 0,optionUsage:{price:Zt,image:!!Pt.image,listing:!1},priceImpact:Zt?Tt:"",numberOfImagesRequired:Pt.image?1:0,listingFilters:""}})||[],ce=(K||[]).map(Pt=>Pt.name).join(", ");let De="",Ze="",Et=!1;if(Y.fixedQuantityMin!==void 0&&Y.fixedQuantityMax!==void 0)De=String(Y.fixedQuantityMin),Ze=String(Y.fixedQuantityMax),Et=!0;else if(Y.attributeValues&&Y.attributeValues.length>0)try{const Pt=Y.attributeValues[0];if(Pt.description){const Tt=JSON.parse(Pt.description);Tt.fixedQuantityMin&&Tt.fixedQuantityMax&&(De=String(Tt.fixedQuantityMin),Ze=String(Tt.fixedQuantityMax),Et=!0)}}catch{}const Qt=Y.isPricingAttribute||!1;let Dt="";if(Qt&&Y.attributeValues&&Y.attributeValues.length>0){const Pt=Y.attributeValues[0];Pt.priceMultiplier&&(Dt=((Pt.priceMultiplier-1)*1e3).toFixed(2))}bt({attributeName:Y.attributeName||"",inputStyle:Y.inputStyle||"DROPDOWN",attributeImage:null,effectDescription:Y.effectDescription||"",simpleOptions:ce,isPriceEffect:Qt,isStepQuantity:Y.isStepQuantity||!1,isRangeQuantity:Y.isRangeQuantity||!1,priceEffectAmount:Dt,stepQuantities:(Y.stepQuantities||[]).map(Pt=>({quantity:Pt.quantity?String(Pt.quantity):"",price:Pt.price?String(Pt.price):""})),rangeQuantities:(Y.rangeQuantities||[]).map(Pt=>({min:Pt.min?String(Pt.min):"",max:Pt.max?String(Pt.max):"",price:Pt.price?String(Pt.price):""})),isFixedQuantity:Et,fixedQuantityMin:De,fixedQuantityMax:Ze,primaryEffectType:Y.primaryEffectType||"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:K,functionType:Y.functionType||"GENERAL",isPricingAttribute:Y.isPricingAttribute||!1,isFixedQuantityNeeded:Y.isFixedQuantityNeeded||!1,isFilterable:Y.isFilterable||!1,attributeValues:Y.attributeValues||[],defaultValue:Y.defaultValue||"",isRequired:Y.isRequired||!1,displayOrder:Y.displayOrder||0,isCommonAttribute:Y.isCommonAttribute!==void 0?Y.isCommonAttribute:!0,applicableCategories:((b=Y.applicableCategories)==null?void 0:b.map(Pt=>Pt._id||Pt))||[],applicableSubCategories:((N=Y.applicableSubCategories)==null?void 0:N.map(Pt=>Pt._id||Pt))||[],parentAttribute:Y.parentAttribute&&typeof Y.parentAttribute=="object"?Y.parentAttribute._id:Y.parentAttribute||"",showWhenParentValue:Y.showWhenParentValue||[],hideWhenParentValue:Y.hideWhenParentValue||[]}),Qa(c)}else p("Attribute type not found")}catch(U){console.error("Error fetching attribute type for editing:",U),p(U instanceof Error?U.message:"Failed to load attribute type");const G=gt.find(Y=>Y._id===c);if(G){const Y=(G.attributeValues||[]).filter(Dt=>(Dt.label||Dt.value)&&Dt.value!=="fixed-quantity").map(Dt=>{const Pt=Dt.priceMultiplier?((Dt.priceMultiplier-1)*1e3).toFixed(2):"0",Tt=parseFloat(Pt)>0;return{name:Dt.label||Dt.value||"",priceImpactPer1000:Pt,image:Dt.image||void 0,optionUsage:{price:Tt,image:!!Dt.image,listing:!1},priceImpact:Tt?Pt:"",numberOfImagesRequired:Dt.image?1:0,listingFilters:""}})||[],K=(Y||[]).map(Dt=>Dt.name).join(", ");let ce="",De="",Ze=!1;G.fixedQuantityMin!==void 0&&G.fixedQuantityMax!==void 0&&(ce=String(G.fixedQuantityMin),De=String(G.fixedQuantityMax),Ze=!0);const Et=G.isPricingAttribute||!1;let Qt="";if(Et&&G.attributeValues&&G.attributeValues.length>0){const Dt=G.attributeValues[0];Dt.priceMultiplier&&(Qt=((Dt.priceMultiplier-1)*1e3).toFixed(2))}bt({attributeName:G.attributeName||"",inputStyle:G.inputStyle||"DROPDOWN",attributeImage:null,effectDescription:G.effectDescription||"",simpleOptions:K,isPriceEffect:Et,isStepQuantity:G.isStepQuantity||!1,isRangeQuantity:G.isRangeQuantity||!1,priceEffectAmount:Qt,stepQuantities:(G.stepQuantities||[]).map(Dt=>({quantity:Dt.quantity?String(Dt.quantity):"",price:Dt.price?String(Dt.price):""})),rangeQuantities:(G.rangeQuantities||[]).map(Dt=>({min:Dt.min?String(Dt.min):"",max:Dt.max?String(Dt.max):"",price:Dt.price?String(Dt.price):""})),isFixedQuantity:Ze,fixedQuantityMin:ce,fixedQuantityMax:De,primaryEffectType:G.primaryEffectType||"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:Y,functionType:G.functionType||"GENERAL",isPricingAttribute:G.isPricingAttribute||!1,isFixedQuantityNeeded:G.isFixedQuantityNeeded||!1,isFilterable:G.isFilterable||!1,attributeValues:G.attributeValues||[],defaultValue:G.defaultValue||"",isRequired:G.isRequired||!1,displayOrder:G.displayOrder||0,isCommonAttribute:G.isCommonAttribute!==void 0?G.isCommonAttribute:!0,applicableCategories:((S=G.applicableCategories)==null?void 0:S.map(Dt=>Dt._id||Dt))||[],applicableSubCategories:((T=G.applicableSubCategories)==null?void 0:T.map(Dt=>Dt._id||Dt))||[],parentAttribute:G.parentAttribute&&typeof G.parentAttribute=="object"?G.parentAttribute._id:G.parentAttribute||"",showWhenParentValue:G.showWhenParentValue||[],hideWhenParentValue:G.hideWhenParentValue||[]}),Qa(c)}}},_o=async c=>{const b=gt.find(N=>N._id===c);if(b&&window.confirm(`Are you sure you want to delete the attribute type "${b.attributeName}"?

Note: This action cannot be undone. If this attribute is being used in any products, the deletion will be prevented.`))try{m(!0),p(null),h(null);const N=await fetch(`${we}/attribute-types/${c}`,{method:"DELETE",headers:Ot()});if(!N.ok){const T=N.clone();let U="Failed to delete attribute type";try{const Y=await T.json();U=Y.error||Y.message||U,console.log("Error data received:",Y)}catch{try{U=await N.text()||N.statusText||U}catch{U=N.statusText||U}}console.log("Error message:",U),U.toLowerCase().includes("used")||U.toLowerCase().includes("in use")||U.toLowerCase().includes("product")||U.toLowerCase().includes("cannot delete")?Rt.error(e.jsx("div",{children:e.jsx("div",{className:"font-semibold",children:"Attribute is in use"})}),{duration:5e3,position:"bottom-right"}):Rt.error(U,{duration:4e3,position:"bottom-right"}),p(U),m(!1);return}const S=await wt(N);Rt.success("Attribute deleted successfully",{duration:3e3,position:"bottom-right"}),xr()}catch(N){console.error("Error deleting attribute type:",N);const S=N instanceof Error?N.message:"Failed to delete attribute type";S.toLowerCase().includes("used")||S.toLowerCase().includes("in use")||S.toLowerCase().includes("product")?Rt.error(e.jsx("div",{children:e.jsx("div",{className:"font-semibold",children:"Attribute is in use"})}),{duration:5e3,position:"bottom-right"}):Rt.error(S,{duration:4e3,position:"bottom-right"}),p(S)}finally{m(!1)}},Br=async()=>{Rc(!0);try{const c=await fetch(`${we}/departments`,{method:"GET",headers:Ot()});if(!c.ok)throw new Error(`Failed to fetch departments: ${c.status} ${c.statusText}`);const b=await wt(c);Oc(b.data||b||[])}catch(c){console.error("Error fetching departments:",c),p(c instanceof Error?c.message:"Failed to fetch departments"),Oc([])}finally{Rc(!1)}},lh=async c=>{c.preventDefault(),m(!0),p(null),h(null);try{if(W({}),!Ar.name.trim()){W({name:"Department name is required"}),p("Department name is required"),m(!1),Ma("name","department-name");return}const b=ti?`${we}/departments/${ti}`:`${we}/departments`,S=await fetch(b,{method:ti?"PUT":"POST",headers:{...Ot(),"Content-Type":"application/json"},body:JSON.stringify(Ar)}),T=await wt(S);if(!S.ok)throw new Error(T.error||`Failed to ${ti?"update":"create"} department`);h(ti?"Department updated successfully":"Department created successfully"),Fi({name:"",description:"",isEnabled:!0,operators:[]}),$i(null),Br()}catch(b){console.error("Error saving department:",b),p(b instanceof Error?b.message:"Failed to save department")}finally{m(!1)}},kr=c=>{var N;const b=er.find(S=>S._id===c);if(b){window.scrollTo({top:0,behavior:"smooth"});const S=((N=b.operators)==null?void 0:N.map(T=>typeof T=="object"&&T!==null&&(T._id||T.id)||String(T)))||[];Fi({name:b.name||"",description:b.description||"",isEnabled:b.isEnabled!==void 0?b.isEnabled:!0,operators:S}),$i(c)}},Uc=async c=>{if(window.confirm("Are you sure you want to delete this department? This action cannot be undone if there are active orders.")){m(!0);try{const b=await fetch(`${we}/departments/${c}`,{method:"DELETE",headers:Ot()}),N=await wt(b);if(!b.ok)throw new Error(N.error||"Failed to delete department");h("Department deleted successfully"),Br()}catch(b){console.error("Error deleting department:",b),p(b instanceof Error?b.message:"Failed to delete department")}finally{m(!1)}}},Vr=async()=>{ml(!0);try{const c=await fetch(`${we}/sequences`,{headers:Ot()});if(!c.ok)throw new Error("Failed to fetch sequences");const b=await wt(c);cu(b.data||b||[])}catch(c){console.error("Error fetching sequences:",c),p(c instanceof Error?c.message:"Failed to fetch sequences")}finally{ml(!1)}},fu=async c=>{c.preventDefault(),m(!0),p(null),h(null);try{ie({});let b=!1;const N={};if(qt.name.trim()||(N.name="Sequence name is required",b=!0),qt.printType||(N.printType="Print type is required",b=!0),qt.category||(N.category="Category is required",b=!0),(!qt.selectedDepartments||qt.selectedDepartments.length===0)&&(N.selectedDepartments="At least one department must be selected",b=!0),b){ie(N),p("Please fix the errors below"),m(!1);const Y=Object.keys(N)[0];Y==="name"?Ma("name","sequence-name"):Y==="printType"?Ma("printType","sequence-printType"):Y==="category"?Ma("category","sequence-category"):Y==="selectedDepartments"&&Ma("selectedDepartments","sequence-departments");return}const S=Er?`${we}/sequences/${Er}`:`${we}/sequences`,U=await fetch(S,{method:Er?"PUT":"POST",headers:{...Ot(),"Content-Type":"application/json"},body:JSON.stringify({name:qt.name,printType:qt.printType,category:qt.category||null,subcategory:qt.subcategory||null,departments:qt.selectedDepartments,attributes:qt.selectedAttributes||[]})}),G=await wt(U);if(!U.ok)throw new Error(G.error||`Failed to ${Er?"update":"create"} sequence`);h(Er?"Sequence updated successfully":"Sequence created successfully"),pr({name:"",printType:"",category:"",subcategory:"",selectedDepartments:[],selectedAttributes:[]}),_c(null),Vr()}catch(b){console.error("Error saving sequence:",b),p(b instanceof Error?b.message:"Failed to save sequence")}finally{m(!1)}},Mo=c=>{const b=(bi||[]).find(N=>N._id===c);if(b){window.scrollTo({top:0,behavior:"smooth"});let N="";if(b.category){const S=typeof b.category=="object"?b.category:He.find(T=>T._id===b.category);S&&(S.type==="Digital"||S.type==="digital")?N="digital":N="bulk"}else N="bulk";pr({name:b.name||"",printType:N,category:b.category&&typeof b.category=="object"&&b.category!==null?b.category._id:b.category||"",subcategory:b.subcategory&&typeof b.subcategory=="object"&&b.subcategory!==null?b.subcategory._id:b.subcategory||"",selectedDepartments:(b.departments||[]).map(S=>!S||!S.department?null:typeof S.department=="object"&&S.department!==null?S.department._id:S.department).filter(S=>S!==null)||[],selectedAttributes:(b.attributes||[]).map(S=>S?typeof S=="object"&&S!==null?S._id:S:null).filter(S=>S!==null)||[]}),_c(c)}},Hi=async c=>{if(window.confirm("Are you sure you want to delete this sequence? This action cannot be undone.")){m(!0);try{if(!(await fetch(`${we}/sequences/${c}`,{method:"DELETE",headers:Ot()})).ok)throw new Error("Failed to delete sequence");h("Sequence deleted successfully"),Vr()}catch(b){console.error("Error deleting sequence:",b),p(b instanceof Error?b.message:"Failed to delete sequence")}finally{m(!1)}}},Ic=c=>{const b=qt.selectedDepartments.indexOf(c);pr(b===-1?{...qt,selectedDepartments:[...qt.selectedDepartments,c]}:{...qt,selectedDepartments:qt.selectedDepartments.filter(N=>N!==c)})},gl=async(c,b,N,S)=>{try{const T={};N&&(T.action=N),b?T.status=b:(Bt.status&&(T.status=Bt.status),Bt.deliveryDate&&(T.deliveryDate=Bt.deliveryDate),Bt.adminNotes!==void 0&&(T.adminNotes=Bt.adminNotes)),S&&(T.deliveryDate=S);const U=await fetch(`${we}/admin/orders/${c}`,{method:"PUT",headers:{...Ot(),"Content-Type":"application/json"},body:JSON.stringify(T)});if(!U.ok){const G=await wt(U);throw new Error(G.error||`Failed to update order: ${U.status} ${U.statusText}`)}await wt(U),h("Order updated successfully"),it(!1),Je(null),We({status:"",deliveryDate:"",adminNotes:""}),fl()}catch(T){console.error("Error updating order:",T),p(T instanceof Error?T.message:"Failed to update order")}},Bc=async c=>{if(window.confirm("Are you sure you want to reject this order?"))try{const b=await fetch(`${we}/admin/orders/${c}`,{method:"PUT",headers:{...Ot(),"Content-Type":"application/json"},body:JSON.stringify({status:"rejected"})});if(!b.ok){const N=await wt(b);throw new Error(N.error||`Failed to reject order: ${b.status} ${b.statusText}`)}await wt(b),h("Order rejected successfully"),fl()}catch(b){console.error("Error rejecting order:",b),p(b instanceof Error?b.message:"Failed to reject order")}},ro=(c,b="image/png")=>!c||c.trim()===""?null:c.startsWith("data:")?c:c.startsWith("/9j/")||c.startsWith("iVBORw0KGgo")?`data:${b};base64,${c}`:c,qr=async c=>{c.preventDefault(),c.stopPropagation(),m(!0),p(null),h(null),R({});try{let b=null,N=null;const S={};(!$.name||!$.name.trim())&&(S.name="Product name is required",b||(b="name",N="product-name")),$.category||(S.category="Please select a category",b||(b="category",N="product-category"));const T=He.find(ht=>ht._id===$.category);!T&&$.category&&(S.category="Selected category not found. Please select a valid category.",b||(b="category",N="product-category"));const U=T==null?void 0:T.type,G=$.category;if((!$.gstPercentage||!$.gstPercentage.toString().trim())&&(S.gstPercentage="GST % is required for invoice calculation",b||(b="gstPercentage",N="product-gstPercentage")),(!$.instructions||!$.instructions.trim())&&(S.instructions="Instructions are required",b||(b="instructions",N="product-instructions")),Object.keys(S).length>0){R(S),p("Please fix the errors below"),m(!1);const ht=Object.values(S).filter(Xt=>!!Xt);Rt.error(e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Please fix the following errors:"}),e.jsx("ul",{className:"list-disc list-inside mt-1 text-sm",children:ht.map((Xt,na)=>e.jsx("li",{children:Xt},na))})]}),{duration:5e3,position:"bottom-right"}),b&&N&&Ma(b,N);return}let Y;if($.subcategory&&$.subcategory.trim()!==""){const ht=_t.find(Xt=>Xt._id===$.subcategory);if(ht){if((ht.category?typeof ht.category=="object"?ht.category._id:ht.category:null)!==G){p("Selected subcategory does not belong to the selected category. Please select a valid subcategory."),m(!1);return}Y=ht._id}else{const Xt=[];Object.values(zs).forEach(St=>{Array.isArray(St)&&Xt.push(...St)});const na=Xt.find(St=>St._id===$.subcategory);if(!na){p("Selected subcategory not found. Please select a valid subcategory."),m(!1);return}if((na.category?typeof na.category=="object"?na.category._id:na.category:null)!==G){p("Selected subcategory does not belong to the selected category. Please select a valid subcategory."),m(!1);return}Y=na._id}}const K=new FormData;K.append("name",$.name),K.append("description",$.description||""),$.image&&K.append("image",$.image),K.append("category",G),j?K.append("subcategory",Y&&Y.trim()!==""&&Y!=="null"?Y:""):Y&&Y.trim()!==""&&Y!=="null"&&K.append("subcategory",Y);const ce=$.description.split(`
`).map(ht=>ht.trim()).filter(ht=>ht.length>0);ce.length>0&&K.append("descriptionArray",JSON.stringify(ce));const De={printingOption:[],orderQuantity:$.filters.orderQuantity,deliverySpeed:I.map(ht=>typeof ht=="string"?ht:ht.name).filter(ht=>ht.trim()),textureType:_.map(ht=>typeof ht=="string"?ht:ht.name).filter(ht=>ht.trim()),filterPricesEnabled:J};J?(De.printingOptionPrices=[],De.deliverySpeedPrices=I.filter(ht=>typeof ht=="object"&&ht.name&&ht.name.trim()).map(ht=>({name:ht.name.trim(),priceAdd:typeof ht.priceAdd=="number"?ht.priceAdd:ht.priceAdd&&parseFloat(ht.priceAdd)||0})),De.textureTypePrices=_.filter(ht=>typeof ht=="object"&&ht.name&&ht.name.trim()).map(ht=>({name:ht.name.trim(),priceAdd:typeof ht.priceAdd=="number"?ht.priceAdd:ht.priceAdd&&parseFloat(ht.priceAdd)||0}))):(De.printingOptionPrices=[],De.deliverySpeedPrices=[],De.textureTypePrices=[]),console.log("Filters being sent:",JSON.stringify(De,null,2)),K.append("filters",JSON.stringify(De));const Ze=B.length>0?JSON.stringify(B):$.options;Ze&&K.append("options",Ze);const Et=fe&&fe.length>0?fe.filter(ht=>ht&&ht.attributeTypeId).map(ht=>({attributeType:ht.attributeTypeId,isEnabled:ht.isEnabled!==void 0?ht.isEnabled:!0,isRequired:ht.isRequired!==void 0?ht.isRequired:!1,displayOrder:ht.displayOrder!==void 0?ht.displayOrder:0,customValues:[]})):[];if(K.append("dynamicAttributes",JSON.stringify(Et)),$.variants&&$.variants.length>0&&K.append("variants",JSON.stringify($.variants)),$.quantityDiscounts&&$.quantityDiscounts.length>0){const ht=$.quantityDiscounts.filter(Xt=>Xt.minQuantity>0&&Xt.discountPercentage>0).map(Xt=>({minQuantity:Xt.minQuantity,maxQuantity:Xt.maxQuantity,discountPercentage:Xt.discountPercentage,priceMultiplier:(100-Xt.discountPercentage)/100}));ht.length>0&&K.append("quantityDiscounts",JSON.stringify(ht))}$.maxFileSizeMB&&K.append("maxFileSizeMB",$.maxFileSizeMB),$.minFileWidth&&K.append("minFileWidth",$.minFileWidth),$.maxFileWidth&&K.append("maxFileWidth",$.maxFileWidth),$.minFileHeight&&K.append("minFileHeight",$.minFileHeight),$.maxFileHeight&&K.append("maxFileHeight",$.maxFileHeight),K.append("blockCDRandJPG",$.blockCDRandJPG?"true":"false"),$.additionalDesignCharge&&K.append("additionalDesignCharge",$.additionalDesignCharge),$.gstPercentage&&K.append("gstPercentage",$.gstPercentage),K.append("showPriceIncludingGst",$.showPriceIncludingGst?"true":"false"),$.instructions&&K.append("instructions",$.instructions),$.productionSequence&&$.productionSequence.length>0&&K.append("productionSequence",JSON.stringify($.productionSequence));const Qt=j?`${we}/products/${j}`:`${we}/products`,Pt=await fetch(Qt,{method:j?"PUT":"POST",headers:{...Ot()},body:K});if(!Pt.ok){const ht=Pt.clone();let Xt="Failed to save product";const na={};try{const Qr=await ht.json();Xt=Qr.error||Qr.message||Xt,Xt.toLowerCase().includes("name")?na.name=Xt:Xt.toLowerCase().includes("price")||Xt.toLowerCase().includes("baseprice")?na.basePrice=Xt:Xt.toLowerCase().includes("category")?na.category=Xt:Xt.toLowerCase().includes("gst")?na.gstPercentage=Xt:Xt.toLowerCase().includes("instruction")&&(na.instructions=Xt)}catch{Xt=Pt.statusText||Xt}if(Object.keys(na).length>0){E(na);const Qr=Object.keys(na)[0];Ma(Qr,`product-${Qr}`)}Rt.error(Xt,{duration:5e3,position:"bottom-right"}),p(Xt),m(!1);return}const Tt=await wt(Pt),Zt=G;Rt.success(`Product ${j?"updated":"created"} successfully!`,{duration:3e3,position:"bottom-right"}),h(`Product ${j?"updated":"created"} successfully!`),Yn(""),cr([]),da([]),cn({}),re({name:"",description:"",descriptionArray:[],category:"",subcategory:"",image:null,options:"",filters:{printingOption:[],orderQuantity:{min:1e3,max:72e3,multiples:1e3,quantityType:"SIMPLE",stepWiseQuantities:[],rangeWiseQuantities:[]},deliverySpeed:[],textureType:[]},quantityDiscounts:[],maxFileSizeMB:"",minFileWidth:"",maxFileWidth:"",minFileHeight:"",variants:[],maxFileHeight:"",blockCDRandJPG:!1,additionalDesignCharge:"",gstPercentage:"",showPriceIncludingGst:!1,instructions:"",productionSequence:[]}),ne([]),z(!1),xe([]),L([]),me([]),Me([]),hr([]),v(null),E({}),Zt?Ur(Zt):Ur(),T&&xl(typeof T=="string"?T:T._id),Ts&&Bi(Ts)}catch(b){p(b instanceof Error?b.message:`Failed to ${j?"update":"create"} product`)}finally{m(!1)}},Si=async c=>{var b,N,S,T,U,G,Y,K,ce,De,Ze,Et,Qt,Dt,Pt,Tt,Zt,ht,Xt,na,Qr,St,Hs,Ls,Yr,jr,ar;try{m(!0);const Pn=await fetch(`${we}/products/${c}`,{method:"GET",headers:Ot()});if(!Pn.ok)throw new Error(`Failed to fetch product: ${Pn.status} ${Pn.statusText}`);const pt=await wt(Pn);console.log("=== SINGLE PRODUCT FETCHED (AdminDashboard - Edit) ==="),console.log("Product ID:",c),console.log("Full product data:",JSON.stringify(pt,null,2));const yu=pt.descriptionArray&&Array.isArray(pt.descriptionArray)?pt.descriptionArray.join(`
`):pt.description||"";let Pr="",hn="";if(pt.subcategory){const ls=typeof pt.subcategory=="object"&&pt.subcategory!==null?pt.subcategory:null;if(ls&&ls.category){const Ns=typeof ls.category=="object"&&ls.category!==null?ls.category:null;Pr=Ns?Ns._id:ls.category||"",hn=Ns?Ns.type:""}}if(!Pr){const ls=typeof pt.category=="object"&&pt.category!==null?pt.category:null;Pr=ls?ls._id:pt.category||"",hn=ls?ls.type:""}if(Yn(hn),hn){const ls=He.filter(Ns=>Ns.type===hn&&!Ns.parent);cr(ls)}else cr([]);re({name:pt.name||"",description:yu,descriptionArray:pt.descriptionArray||[],category:Pr||"",subcategory:pt.subcategory&&typeof pt.subcategory=="object"&&pt.subcategory._id?pt.subcategory._id:pt.subcategory&&pt.subcategory!==null&&pt.subcategory!=="null"&&pt.subcategory!==""?String(pt.subcategory):"",image:null,options:"",filters:{...pt.filters||{},printingOption:((b=pt.filters)==null?void 0:b.printingOption)||[],orderQuantity:{min:((S=(N=pt.filters)==null?void 0:N.orderQuantity)==null?void 0:S.min)||1e3,max:((U=(T=pt.filters)==null?void 0:T.orderQuantity)==null?void 0:U.max)||72e3,multiples:((Y=(G=pt.filters)==null?void 0:G.orderQuantity)==null?void 0:Y.multiples)||1e3,quantityType:((ce=(K=pt.filters)==null?void 0:K.orderQuantity)==null?void 0:ce.quantityType)||"SIMPLE",stepWiseQuantities:((Ze=(De=pt.filters)==null?void 0:De.orderQuantity)==null?void 0:Ze.stepWiseQuantities)||[],rangeWiseQuantities:((Qt=(Et=pt.filters)==null?void 0:Et.orderQuantity)==null?void 0:Qt.rangeWiseQuantities)||[]},deliverySpeed:((Dt=pt.filters)==null?void 0:Dt.deliverySpeed)||[],textureType:((Pt=pt.filters)==null?void 0:Pt.textureType)||[]},quantityDiscounts:pt.quantityDiscounts&&Array.isArray(pt.quantityDiscounts)?pt.quantityDiscounts.map(ls=>({minQuantity:ls.minQuantity||0,maxQuantity:ls.maxQuantity||null,discountPercentage:ls.discountPercentage||0})):[],maxFileSizeMB:((Tt=pt.maxFileSizeMB)==null?void 0:Tt.toString())||"",minFileWidth:((Zt=pt.minFileWidth)==null?void 0:Zt.toString())||"",maxFileWidth:((ht=pt.maxFileWidth)==null?void 0:ht.toString())||"",minFileHeight:((Xt=pt.minFileHeight)==null?void 0:Xt.toString())||"",maxFileHeight:((na=pt.maxFileHeight)==null?void 0:na.toString())||"",blockCDRandJPG:pt.blockCDRandJPG||!1,additionalDesignCharge:((Qr=pt.additionalDesignCharge)==null?void 0:Qr.toString())||"",gstPercentage:((St=pt.gstPercentage)==null?void 0:St.toString())||"",showPriceIncludingGst:pt.showPriceIncludingGst||!1,instructions:pt.instructions||"",variants:pt.variants&&Array.isArray(pt.variants)?pt.variants:[],productionSequence:pt.productionSequence&&Array.isArray(pt.productionSequence)?pt.productionSequence.filter(ls=>ls!=null).map(ls=>typeof ls=="object"&&ls!==null?ls._id||"":ls||"").filter(ls=>ls):[]}),pt.options&&Array.isArray(pt.options)&&pt.options.length>0?ne(pt.options):ne([]),z(((Hs=pt.filters)==null?void 0:Hs.filterPricesEnabled)||!1),xe([]);const Yi=((Ls=pt.filters)==null?void 0:Ls.deliverySpeed)||[],ju=((Yr=pt.filters)==null?void 0:Yr.deliverySpeedPrices)||[];L(Yi.map((ls,Ns)=>{if(typeof ls=="string"){const Wr=ju.find(On=>On.name===ls);return{name:ls,priceAdd:Wr==null?void 0:Wr.priceAdd}}return ls}));const vu=((jr=pt.filters)==null?void 0:jr.textureType)||[],vl=((ar=pt.filters)==null?void 0:ar.textureTypePrices)||[];if(me(vu.map((ls,Ns)=>{if(typeof ls=="string"){const Wr=vl.find(On=>On.name===ls);return{name:ls,priceAdd:Wr==null?void 0:Wr.priceAdd}}return ls})),pt.dynamicAttributes&&Array.isArray(pt.dynamicAttributes)&&pt.dynamicAttributes.length>0){const ls=pt.dynamicAttributes.filter(Ns=>Ns&&Ns.attributeType).map(Ns=>{let Wr="";return typeof Ns.attributeType=="object"&&Ns.attributeType!==null?Wr=Ns.attributeType._id||Ns.attributeType.id||"":typeof Ns.attributeType=="string"&&(Wr=Ns.attributeType),{attributeTypeId:Wr,isEnabled:Ns.isEnabled!==void 0?Ns.isEnabled:!0,isRequired:Ns.isRequired!==void 0?Ns.isRequired:!1,displayOrder:Ns.displayOrder!==void 0?Ns.displayOrder:0}}).filter(Ns=>Ns.attributeTypeId&&Ns.attributeTypeId.trim()!=="");console.log("Loaded attributes for editing:",ls),Me(ls)}else console.log("No dynamic attributes found in product"),Me([]);const lo=Pr||null,Fo=pt.subcategory&&typeof pt.subcategory=="object"&&pt.subcategory._id?pt.subcategory._id:pt.subcategory&&pt.subcategory!==null&&pt.subcategory!=="null"&&pt.subcategory!==""?String(pt.subcategory):null;await xr(lo,Fo);const Dn=pt.subcategory&&typeof pt.subcategory=="object"&&pt.subcategory!==null?pt.subcategory._id||"":pt.subcategory&&pt.subcategory!==null&&pt.subcategory!=="null"?String(pt.subcategory):"";Pr?(await An(Pr),Dn&&Dn.trim()!==""&&Dn!==Pr&&Dn!=="null"?setTimeout(()=>{const ls=ko(Pr,Dn);da(ls),ls.forEach(Ns=>{Ns!==Pr&&An(Ns)})},100):da([Pr])):da([]);const oo=Dn||Pr;if(oo)try{Ce(!0);const ls=await fetch(`${we}/products/category/${oo}`,{headers:Ot()});if(ls.ok){const Ns=await wt(ls);he(Ns||[])}}catch(ls){console.error("Error fetching category products:",ls),he([])}finally{Ce(!1)}v(c),hl(null),pl(!1),l("products"),p(null)}catch(Pn){p(Pn instanceof Error?Pn.message:"Failed to load product")}finally{m(!1)}},bl=async c=>{try{m(!0);let b=null,N=!1;try{const U=await fetch(`${we}/categories/${c}`,{method:"GET",headers:Ot()});if(U.ok&&(b=await wt(U),b&&b.parent))try{const G=await fetch(`${we}/subcategories/${c}`,{method:"GET",headers:Ot()});G.ok&&(b=await wt(G),N=!0)}catch{}}catch{try{const G=await fetch(`${we}/subcategories/${c}`,{method:"GET",headers:Ot()});if(G.ok)b=await wt(G),N=!0;else throw new Error(`Failed to fetch category: ${G.status} ${G.statusText}`)}catch{throw new Error("Failed to fetch category or subcategory")}}if(!b)throw new Error("Category not found");const S=b.slug||(b.name?b.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),T=N?b.category&&typeof b.category=="object"&&b.category!==null?b.category._id:b.category||"":b.parent&&typeof b.parent=="object"&&b.parent!==null?b.parent._id:b.parent||"";le({name:b.name||"",description:b.description||"",type:N?b.category&&typeof b.category=="object"&&b.category!==null?b.category.type:"Digital":b.type||"Digital",parent:T,sortOrder:b.sortOrder||0,slug:S,image:null}),Qe(!!b.slug),P(c),V(b.image||null),l("categories"),p(null),Cn(c)}catch(b){p(b instanceof Error?b.message:"Failed to load category")}finally{m(!1)}},Gi=()=>{v(null),P(null),V(null),wa(null),Yn(""),cr([]),Qn([]),re({name:"",description:"",descriptionArray:[],category:"",subcategory:"",image:null,options:"",filters:{printingOption:[],orderQuantity:{min:1e3,max:72e3,multiples:1e3,quantityType:"SIMPLE",stepWiseQuantities:[],rangeWiseQuantities:[]},deliverySpeed:[],textureType:[]},maxFileSizeMB:"",blockCDRandJPG:!1,additionalDesignCharge:"",gstPercentage:"",instructions:"",quantityDiscounts:[],minFileWidth:"",maxFileWidth:"",minFileHeight:"",maxFileHeight:"",productionSequence:[],showPriceIncludingGst:!1,variants:[]}),ne([]),xe([]),L([]),me([]),hr([]),le({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),Qe(!1),Ct({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),ot(!1),yt(null)},no=async c=>{if(window.confirm("Are you sure you want to delete this product?")){m(!0),p(null),h(null);try{const b=await fetch(`${we}/products/${c}`,{method:"DELETE",headers:Ot()});if(!b.ok){const N=await wt(b);throw new Error(N.error||`Failed to delete product: ${b.status} ${b.statusText}`)}await wt(b),h("Product deleted successfully!"),Ur()}catch(b){p(b instanceof Error?b.message:"Failed to delete product")}finally{m(!1)}}},Hr=async c=>{c.preventDefault(),m(!0),p(null),h(null);try{H({});let b=!1;const N={};if((!se.name||se.name.trim()==="")&&(N.name="Category name is required",b=!0),b){H(N),p("Please fix the errors below"),m(!1),Object.keys(N)[0]==="name"&&Ma("name","category-name");return}if(se.parent){if(!se.parent){p("Parent category is required for subcategory."),m(!1);return}if(!A&&!se.image&&(N.image="Subcategory image is required. Please upload an image",b=!0),se.parent&&_t.find(Ze=>{const Qt=(typeof Ze.category=="object"&&Ze.category!==null?Ze.category._id:Ze.category)===se.parent,Dt=(Ze.sortOrder||0)===se.sortOrder,Pt=Ze._id!==A;return Qt&&Dt&&Pt})){const Ze=He.find(Qt=>Qt._id===se.parent),Et=Ze?Ze.name:"this category";N.sortOrder=`Sort order ${se.sortOrder} is already used by another subcategory in ${Et}. Please use a different sort order.`,b=!0}if(b){H(N),p("Please fix the errors below"),m(!1);const De=Object.keys(N)[0];if(De==="image")Ma("image","category-image");else if(De==="sortOrder"){const Ze=document.querySelector('input[type="number"]');Ze&&Ze.scrollIntoView({behavior:"smooth",block:"center"})}return}if(se.image){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(se.image.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),m(!1);return}const Ze=5*1024*1024;if(se.image.size>Ze){p("Image size must be less than 5MB. Please compress the image and try again."),m(!1);return}}const S=new FormData;S.append("name",se.name.trim()),S.append("description",se.description||""),S.append("category",se.parent),S.append("sortOrder",se.sortOrder.toString());const T=se.slug||(se.name?se.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),U=T?Ii(T,A,null):"";U&&S.append("slug",U.trim()),se.image&&S.append("image",se.image);const G=A?`${we}/subcategories/${A}`:`${we}/subcategories`,K=await fetch(G,{method:A?"PUT":"POST",headers:{...Ot()},body:S}),ce=await wt(K);h(`Subcategory ${A?"updated":"created"} successfully!`),le({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),Qe(!1),P(null),V(null),Sa(),yi(),Cn()}else{if(se.type||(N.type="Category type is required",b=!0),!A&&!se.image&&(N.image="Category image is required. Please upload an image",b=!0),se.type){const De=He.find(Ze=>{const Et=!Ze.parent||typeof Ze.parent=="object"&&Ze.parent!==null&&!Ze.parent._id,Qt=Ze.type===se.type,Dt=(Ze.sortOrder||0)===se.sortOrder,Pt=Ze._id!==A;return Et&&Qt&&Dt&&Pt});De&&(N.sortOrder=`Sort order ${se.sortOrder} is already used by another ${se.type} category (${De.name}). Please use a different sort order.`,b=!0)}if(b){H(N),p("Please fix the errors below"),m(!1);const De=Object.keys(N)[0];if(De==="type")Ma("type","category-type");else if(De==="image")Ma("image","category-image");else if(De==="sortOrder"){const Ze=document.querySelector('input[type="number"][value="'+se.sortOrder+'"]');Ze&&Ze.scrollIntoView({behavior:"smooth",block:"center"})}return}if(se.image){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(se.image.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),m(!1);return}const Ze=5*1024*1024;if(se.image.size>Ze){p("Image size must be less than 5MB. Please compress the image and try again."),m(!1);return}}const S=new FormData;S.append("name",se.name.trim()),S.append("description",se.description||""),S.append("type",se.type),S.append("parent",""),S.append("sortOrder",se.sortOrder.toString());const T=se.slug||(se.name?se.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),U=T?Ii(T,A,null):"";U&&S.append("slug",U.trim()),se.image&&S.append("image",se.image);const G=A?`${we}/categories/${A}`:`${we}/categories`,K=await fetch(G,{method:A?"PUT":"POST",headers:{...Ot()},body:S}),ce=await wt(K);h(`Category ${A?"updated":"created"} successfully!`),le({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),Qe(!1),P(null),V(null),Sa(),Cn()}}catch(b){p(b instanceof Error?b.message:`Failed to ${A?"update":"create"} ${se.parent?"subcategory":"category"}`)}finally{m(!1)}},Gr=async c=>{c.preventDefault(),m(!0),p(null),h(null);try{Se({});let b=!1;const N={};if((!Ve.name||Ve.name.trim()==="")&&(N.name="Subcategory name is required",b=!0),(!Ve.category||Ve.category==="pending")&&(N.category="Parent category is required",b=!0),!Ss&&!Ve.image&&(N.image="Subcategory image is required. Please upload an image",b=!0),Ve.category&&Ve.category!=="pending"&&_t.find(De=>{const Et=(typeof De.category=="object"&&De.category!==null?De.category._id:De.category)===Ve.category,Qt=(De.sortOrder||0)===Ve.sortOrder,Dt=De._id!==Ss;return Et&&Qt&&Dt})){const De=He.find(Et=>Et._id===Ve.category),Ze=De?De.name:"this category";N.sortOrder=`Sort order ${Ve.sortOrder} is already used by another subcategory in ${Ze}. Please use a different sort order.`,b=!0}if(b){Se(N),p("Please fix the errors below"),m(!1);const ce=Object.keys(N)[0];if(ce==="name")Ma("name","subcategory-name");else if(ce==="category")Ma("category","subcategory-category");else if(ce==="image")Ma("image","subcategory-image");else if(ce==="sortOrder"){const De=document.querySelector('input[type="number"]');De&&De.scrollIntoView({behavior:"smooth",block:"center"})}return}if(Ve.image){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(Ve.image.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),m(!1);return}const De=5*1024*1024;if(Ve.image.size>De){p("Image size must be less than 5MB. Please compress the image and try again."),m(!1);return}}const S=new FormData;S.append("name",Ve.name.trim()),S.append("description",Ve.description||""),S.append("category",Ve.category),Ve.parent&&Ve.parent!==""&&S.append("parent",Ve.parent),S.append("sortOrder",Ve.sortOrder.toString());const T=Ve.slug||(Ve.name?Ve.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),U=T?Ii(T,null,Ss):"";U&&S.append("slug",U.trim()),Ve.image&&S.append("image",Ve.image);const G=Ss?`${we}/subcategories/${Ss}`:`${we}/subcategories`,K=await fetch(G,{method:Ss?"PUT":"POST",headers:{...Ot()},body:S});if(!K.ok){const ce=await wt(K);throw new Error(ce.error||`Failed to ${Ss?"update":"create"} subcategory: ${K.status} ${K.statusText}`)}await wt(K),h(`Subcategory ${Ss?"updated":"created"} successfully!`),Ys&&await xl(Ys),Ct({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),ot(!1),wa(null),yt(null),yi()}catch(b){p(b instanceof Error?b.message:`Failed to ${Ss?"update":"create"} subcategory`)}finally{m(!1)}},ai=async c=>{try{m(!0);const b=await fetch(`${we}/subcategories/${c}`,{method:"GET",headers:Ot()});if(!b.ok)throw new Error(`Failed to fetch subcategory: ${b.status} ${b.statusText}`);const N=await wt(b),S=typeof N.category=="object"&&N.category!==null?N.category:He.find(K=>K._id===N.category),T=(S==null?void 0:S.type)||"",U=N.slug||(N.name?N.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),G=typeof N.category=="object"&&N.category!==null?N.category._id:N.category||"",Y=typeof N.parent=="object"&&N.parent!==null?N.parent._id:N.parent||"";if(Ct({name:N.name||"",description:N.description||"",category:G,parent:Y,type:T,slug:U,sortOrder:N.sortOrder||0,image:null}),ot(!!N.slug),Bs(!!Y),G){hs(!0);try{const K=await fetch(`${we}/subcategories/category/${G}?includeChildren=true`);if(K.ok){const ce=await K.json(),De=(Et,Qt=0)=>{let Dt=[];return Et.forEach(Pt=>{Pt._id!==c&&(Dt.push({...Pt,_displayLevel:Qt}),Pt.children&&Pt.children.length>0&&(Dt=Dt.concat(De(Pt.children,Qt+1))))}),Dt},Ze=De(Array.isArray(ce)?ce:(ce==null?void 0:ce.data)||[]);At(Ze||[])}else At([])}catch(K){console.error("Error fetching parent subcategories:",K),At([])}finally{hs(!1)}}else At([]);wa(c),yt(N.image||null),l("categories"),p(null)}catch(b){p(b instanceof Error?b.message:"Failed to load subcategory")}finally{m(!1)}},mn=async c=>{const b=_t.find(N=>N._id===c);if(b)try{const N=await fetch(`${we}/products/subcategory/${c}`,{headers:Ot()});let S=0;if(N.ok){const T=await wt(N);S=Array.isArray(T)?T.length:0}ft({isOpen:!0,type:"subcategory",id:c,name:b.name,productCount:S,subcategoryCount:0,deleteText:""})}catch(N){console.error("Error checking products:",N),ft({isOpen:!0,type:"subcategory",id:c,name:b.name,productCount:0,subcategoryCount:0,deleteText:""})}},En=async()=>{if(ct.deleteText.toLowerCase()!=="delete"){p('Please type "delete" to confirm');return}m(!0),p(null),h(null),ft({...ct,isOpen:!1});try{const c=await fetch(`${we}/subcategories/${ct.id}`,{method:"DELETE",headers:Ot()});if(!c.ok){const N=(await wt(c)).error||`Failed to delete subcategory: ${c.status} ${c.statusText}`;p(N),m(!1);return}await wt(c),h("Subcategory deleted successfully!"),yi(),Ys&&xl(Ys),Ts===ct.id&&(Ga(null),he([]))}catch(c){p(c instanceof Error?c.message:"Failed to delete subcategory")}finally{m(!1)}},ri=async c=>{const b=He.find(N=>N._id===c);if(b)try{const N=await fetch(`${we}/subcategories/category/${c}`,{headers:Ot()});let S=0,T=[];if(N.ok){const Y=await wt(N);T=Array.isArray(Y)?Y:(Y==null?void 0:Y.data)||[],S=T.length}else try{const Y=await fetch(`${we}/categories/parent/${c}`,{headers:Ot()});if(Y.ok){const K=await wt(Y);T=Array.isArray(K)?K:(K==null?void 0:K.data)||[],S=T.length}}catch{}if(S>0){p(`Cannot delete category "${b.name}". It has ${S} child categor${S===1?"y":"ies"}. Please delete or reassign all child categories first.`);return}const U=await fetch(`${we}/products/category/${c}`,{headers:Ot()});let G=0;if(U.ok){const Y=await wt(U);G=Array.isArray(Y)?Y.length:0}ft({isOpen:!0,type:"category",id:c,name:b.name,productCount:G,subcategoryCount:S,deleteText:""})}catch(N){console.error("Error checking category dependencies:",N),p("Failed to check category dependencies. Please try again.")}},gu=async()=>{if(ct.deleteText.toLowerCase()!=="delete"){p('Please type "delete" to confirm');return}m(!0),p(null),h(null),ft({...ct,isOpen:!1});try{const c=await fetch(`${we}/categories/${ct.id}`,{method:"DELETE",headers:Ot()});if(!c.ok){const N=(await wt(c)).error||`Failed to delete category: ${c.status} ${c.statusText}`;p(N),m(!1);return}await wt(c),h("Category deleted successfully!"),Sa(),Ys===ct.id&&(es(null),vs([]))}catch(c){p(c instanceof Error?c.message:"Failed to delete category")}finally{m(!1)}},Vc=async c=>{c.preventDefault(),m(!0),p(null),h(null);try{const b=await fetch(`${we}/admin/update-user-role`,{method:"PUT",headers:{"Content-Type":"application/json",...Ot()},body:JSON.stringify({username:Yt.username,role:Yt.role})});if(!b.ok){const N=await wt(b);throw new Error(N.message||N.error||`Failed to update user role: ${b.status} ${b.statusText}`)}await wt(b),h(`User role updated to ${Yt.role} successfully!`),Ms({username:"",role:"user"}),vi()}catch(b){p(b instanceof Error?b.message:"Failed to update user role")}finally{m(!1)}},qc=async c=>{c.preventDefault(),m(!0),p(null),h(null);try{const b=await fetch(`${we}/admin/create-employee`,{method:"POST",headers:{"Content-Type":"application/json",...Ot()},body:JSON.stringify({name:rs.name,email:rs.email,password:rs.password})});if(!b.ok){const N=await wt(b);throw new Error(N.message||N.error||`Failed to create employee: ${b.status} ${b.statusText}`)}await wt(b),h("Employee created successfully!"),ea({name:"",email:"",password:""}),vi()}catch(b){p(b instanceof Error?b.message:"Failed to create employee")}finally{m(!1)}},bu=async c=>{c.preventDefault(),m(!0),p(null),h(null);try{const b=await fetch(`${we}/admin/create-employee`,{method:"POST",headers:{"Content-Type":"application/json",...Ot()},body:JSON.stringify({name:Mt.name,email:Mt.email,password:Mt.password})});if(!b.ok){const N=await wt(b);throw new Error(N.message||N.error||`Failed to create employee: ${b.status} ${b.statusText}`)}await wt(b),h("Employee created successfully!"),Nt({name:"",email:"",password:""}),_e(!1),Po(),vi()}catch(b){p(b instanceof Error?b.message:"Failed to create employee")}finally{m(!1)}},tr=async c=>{var b,N;c.preventDefault(),m(!0),p(null),h(null);try{if(!jt.name.trim()){p("Department name is required"),m(!1);return}const S=await fetch(`${we}/departments`,{method:"POST",headers:{"Content-Type":"application/json",...Ot()},body:JSON.stringify({name:jt.name,description:jt.description||"",isEnabled:jt.isEnabled,operators:jt.operators})});if(!S.ok){const G=await wt(S);throw new Error(G.error||G.message||`Failed to create department: ${S.status} ${S.statusText}`)}const T=await wt(S),U=((b=T.data)==null?void 0:b._id)||((N=T.data)==null?void 0:N.id)||T._id||T.id;h("Department created successfully!"),Wt({name:"",description:"",isEnabled:!0,operators:[]}),ms(!1),await Br(),await Po(),U&&qt.selectedDepartments&&pr({...qt,selectedDepartments:[...qt.selectedDepartments,U]})}catch(S){p(S instanceof Error?S.message:"Failed to create department")}finally{m(!1)}},pa=async c=>{if(window.confirm("Are you sure you want to delete this uploaded image?")){m(!0),p(null),h(null);try{const b=await fetch(`${we}/admin/uploads/${c}`,{method:"DELETE",headers:Ot()});if(!b.ok){const N=await wt(b);throw new Error(N.error||`Failed to delete upload: ${b.status} ${b.statusText}`)}await wt(b),h("Uploaded image deleted successfully!"),si()}catch(b){p(b instanceof Error?b.message:"Failed to delete upload")}finally{m(!1)}}},ks=(c,b)=>{try{const N=atob(c.split(",")[1]),S=new Array(N.length);for(let K=0;K<N.length;K++)S[K]=N.charCodeAt(K);const T=new Uint8Array(S),U=new Blob([T],{type:"image/jpeg"}),G=URL.createObjectURL(U),Y=document.createElement("a");Y.href=G,Y.download=b||"image.jpg",document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(G)}catch{p("Failed to download image")}},Ci=()=>{B.length,ne([...B,{name:"",priceAdd:"",description:"",image:""}])},sr=(c,b,N)=>{const S=[...B];S[c]={...S[c],[b]:N},ne(S)},zo=c=>{ne(B.filter((b,N)=>N!==c))},ni=c=>{const b={name:"",priceAdd:J?0:void 0};c==="printingOption"?xe([...ye,b]):c==="deliverySpeed"?L([...I,b]):c==="textureType"&&me([..._,b])},io=(c,b,N,S)=>{if(c==="printingOption"){const T=[...ye];T[b]={...T[b],[N]:N==="priceAdd"?S===""?void 0:parseFloat(S)||0:S},xe(T)}else if(c==="deliverySpeed"){const T=[...I];T[b]={...T[b],[N]:N==="priceAdd"?S===""?void 0:parseFloat(S)||0:S},L(T)}else if(c==="textureType"){const T=[..._];T[b]={...T[b],[N]:N==="priceAdd"?S===""?void 0:parseFloat(S)||0:S},me(T)}},Hc=(c,b)=>{c==="printingOption"?xe(ye.filter((N,S)=>S!==b)):c==="deliverySpeed"?L(I.filter((N,S)=>S!==b)):c==="textureType"&&me(_.filter((N,S)=>S!==b))},yl=()=>{try{if($.options){const c=JSON.parse($.options);Array.isArray(c)?(ne(c),O(!0)):p("Options must be an array")}}catch{p("Invalid JSON format")}},Qi=[{id:"products",label:"Add Product",icon:ia},{id:"manage-products",label:"Manage Products",icon:ia},{id:"attribute-types",label:"Attribute Types",icon:Rr},{id:"attribute-rules",label:"Attribute Rules",icon:Rr},{id:"departments",label:"Departments",icon:Fn},{id:"sequences",label:"Sequences",icon:Rr},{id:"categories",label:"Add Category",icon:qp},{id:"manage-categories",label:"Manage Categories",icon:qp},{id:"pricing-books",label:"Price Books",icon:lc},{id:"pricing-modifiers",label:"Pricing Modifiers",icon:lc},{id:"geo-zones",label:"Geo Zones",icon:sn},{id:"user-segments",label:"User Segments",icon:Il},{id:"product-availability",label:"Product Availability",icon:ia},{id:"pricing-logs",label:"Audit Logs",icon:wr},{id:"virtual-pricing",label:" Virtual Pricing (Smart View)",icon:lc},{id:"orders",label:"Orders",icon:Ay},{id:"uploads",label:"Uploaded Images",icon:Pi},{id:"users",label:"Manage Users",icon:Il},{id:"print-partner-requests",label:"Print Partners",icon:$d},{id:"corporate-requests",label:"Corporate Requests",icon:Fn}];return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(nn,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900 mb-4"})}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl font-bold text-cream-900 mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600",children:"Manage products, categories, uploads, and admin users"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-cream-200 p-3 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2 overflow-x-auto scrollbar-hide",children:Qi.map(c=>{const b=c.icon;return e.jsxs("button",{onClick:()=>{l(c.id),p(null),h(null),c.id!=="products"&&c.id!=="categories"&&Gi(),c.id==="manage-products"?(la(""),Ur()):c.id==="manage-categories"?(Sa(),yi()):c.id==="users"?vi():c.id==="print-partner-requests"||(c.id==="orders"?fl():c.id==="attribute-types"?xr():c.id==="attribute-rules"?(Do(),xr(),Sa(),Ur()):c.id==="products"&&(xr(),Ur()))},className:`flex items-center gap-2.5 px-5 py-3 text-sm sm:text-base font-semibold transition-all duration-200 whitespace-nowrap rounded-lg border-2 ${n===c.id?"bg-cream-900 text-white border-cream-900 shadow-lg transform scale-105":"text-cream-700 bg-white border-cream-200 hover:bg-cream-50 hover:border-cream-300 hover:text-cream-900 hover:shadow-sm"}`,children:[e.jsx(b,{size:18,className:`sm:w-5 sm:h-5 ${n===c.id?"text-white":"text-cream-600"}`}),e.jsx("span",{className:"hidden sm:inline",children:c.label}),e.jsx("span",{className:"sm:hidden",children:c.label.split(" ")[0]})]},c.id)})})}),e.jsxs(ba,{children:[u&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(xs,{size:20}),u]}),g&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-700",children:[e.jsx(va,{size:20}),g]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[n==="products"&&e.jsxs("form",{onSubmit:c=>{c.preventDefault(),qr(c)},onClick:c=>{const b=c.target;(b.closest(".ckeditor-container")||b.closest("[data-ckeditor-button]"))&&(c.preventDefault(),c.stopPropagation())},className:"space-y-6",children:[j&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Product: ",$.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:Gi,className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Required Fields"}),e.jsx("span",{className:"text-sm text-blue-700",children:(()=>{var N,S;const c=[{value:(N=$.name)==null?void 0:N.trim(),label:"Product Name"},{value:$.category||$.subcategory,label:"Category/Subcategory"},{value:$.gstPercentage,label:"GST %"},{value:(S=$.instructions)==null?void 0:S.trim(),label:"Instructions"}];return`${c.filter(T=>T.value).length}/${c.length} completed`})()})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(()=>{var b,N;const c=[(b=$.name)==null?void 0:b.trim(),$.category||$.subcategory,$.gstPercentage,(N=$.instructions)==null?void 0:N.trim()];return c.filter(Boolean).length/c.length*100})()}%`}})})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-6 bg-white",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(ia,{size:20}),"Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-cream-900 mb-2 flex items-center gap-2",children:["Product Name *",e.jsxs("div",{className:"group relative",children:[e.jsx(_r,{size:14,className:"text-cream-500 cursor-help"}),e.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-cream-900 text-white text-xs rounded-lg shadow-lg",children:"Enter a clear, descriptive name that customers will see. This should be unique and searchable."})]})]}),e.jsx("input",{id:"product-name",name:"name",type:"text",required:!0,value:$.name,onChange:c=>{re({...$,name:c.target.value}),M.name&&R({...M,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${M.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Glossy Business Cards - Premium",maxLength:100}),M.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{size:12}),M.name]}),$.name&&$.name.length>80&&e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:[100-$.name.length," characters remaining"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-cream-900 mb-2 flex items-center gap-2",children:["Description",e.jsxs("div",{className:"group relative",children:[e.jsx(_r,{size:14,className:"text-cream-500 cursor-help"}),e.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-cream-900 text-white text-xs rounded-lg shadow-lg",children:"Detailed product description that customers will see. Use formatting to make it readable and professional. You can insert images using the toolbar buttons."})]})]}),e.jsx(y9,{value:$.description,onChange:c=>re({...$,description:c}),placeholder:"Enter product description. Use the toolbar to format text, insert images, and more."}),e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:" Rich Text Editor Features:"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:["Format text with ",e.jsx("strong",{children:"bold"}),", ",e.jsx("em",{children:"italic"}),", underline, strikethrough"]}),e.jsx("li",{children:"Change font family, font size, and text colors"}),e.jsx("li",{children:"Insert images using the toolbar button"}),e.jsx("li",{children:"Create ordered and bullet lists with indentation"}),e.jsx("li",{children:"Align text (left, center, right, justify)"}),e.jsx("li",{children:"All formatting is preserved when saved"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-cream-900 mb-2 flex items-center gap-2",children:["Product Image",e.jsxs("div",{className:"group relative",children:[e.jsx(_r,{size:14,className:"text-cream-500 cursor-help"}),e.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-cream-900 text-white text-xs rounded-lg shadow-lg",children:"Upload a product image that will be displayed to customers. Supported formats: JPG, PNG, WebP. Max size: 5MB."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:c=>{var N;const b=(N=c.target.files)==null?void 0:N[0];if(b){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(b.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image.");return}if(b.size>5*1024*1024){p("Image size must be less than 5MB.");return}re({...$,image:b}),p(null)}},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-cream-900 file:text-white hover:file:bg-cream-800"}),$.image&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-xs text-cream-600 mb-1",children:["Selected: ",$.image.name]}),e.jsx("div",{className:"relative w-32 h-32 border border-cream-300 rounded-lg overflow-hidden",children:e.jsx("img",{src:URL.createObjectURL($.image),alt:"Product preview",className:"w-full h-full object-cover"})})]}),j&&!$.image&&e.jsx("p",{className:"text-xs text-cream-600",children:"Leave empty to keep existing image"})]})]})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-cream-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Product Filters"}),e.jsxs("div",{className:"text-sm text-cream-600",children:[e.jsx(_r,{size:14,className:"inline mr-1"}),"Printing options should be configured as attributes in the Product Attributes section below"]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg border border-cream-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Quantity Configuration *"}),e.jsxs("div",{className:"text-xs text-cream-600",children:[e.jsx(_r,{size:14,className:"inline mr-1"}),"Configure quantity options based on production capabilities and raw material batching"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Min Quantity"}),e.jsx("input",{type:"number",value:$.filters.orderQuantity.min,onChange:c=>re({...$,filters:{...$.filters,orderQuantity:{...$.filters.orderQuantity,min:parseInt(c.target.value)||0}}}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Max Quantity"}),e.jsx("input",{type:"number",value:$.filters.orderQuantity.max,onChange:c=>re({...$,filters:{...$.filters,orderQuantity:{...$.filters.orderQuantity,max:parseInt(c.target.value)||0}}}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Multiples Of"}),e.jsx("input",{type:"number",value:$.filters.orderQuantity.multiples,onChange:c=>re({...$,filters:{...$.filters,orderQuantity:{...$.filters.orderQuantity,multiples:parseInt(c.target.value)||0}}}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Delivery Speed Options"}),e.jsxs("button",{type:"button",onClick:()=>ni("deliverySpeed"),className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:16}),"Add Option"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:I.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No delivery speed options added. Click "Add Option" to start.'}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Delivery Speed"}),J&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Add (per 1000 units)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:I.map((c,b)=>{const N=typeof c=="string"?c:c.name,S=typeof c=="object"?c.priceAdd??0:0;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:N,onChange:T=>io("deliverySpeed",b,"name",T.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Standard"})}),J&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",step:"0.00001",value:S,onChange:T=>io("deliverySpeed",b,"priceAdd",T.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"0.00"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>Hc("deliverySpeed",b),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})})]},b)})})]})})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Texture Type Options (optional)"}),e.jsxs("button",{type:"button",onClick:()=>ni("textureType"),className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:16}),"Add Texture"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:_.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No texture types added. Click "Add Texture" to start.'}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Texture Type"}),J&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Add (per 1000 units)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:_.map((c,b)=>{const N=typeof c=="string"?c:c.name,S=typeof c=="object"?c.priceAdd??0:0;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:N,onChange:T=>io("textureType",b,"name",T.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Texture No.1"})}),J&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",step:"0.00001",value:S,onChange:T=>io("textureType",b,"priceAdd",T.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"0.00"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>Hc("textureType",b),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})})]},b)})})]})})})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Quantity-Based Discounts"}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:"Set discounts based on order quantity. Customers get better prices when ordering in bulk."})]}),e.jsxs("button",{type:"button",onClick:()=>{re({...$,quantityDiscounts:[...$.quantityDiscounts||[],{minQuantity:0,maxQuantity:null,discountPercentage:0}]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:16}),"Add Discount Tier"]})]}),!$.quantityDiscounts||$.quantityDiscounts.length===0?e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:'No discount tiers added. Click "Add Discount Tier" to set quantity-based discounts.'})}):e.jsxs("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Min Quantity"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Max Quantity"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Discount (%)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:($.quantityDiscounts||[]).map((c,b)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",value:c.minQuantity,onChange:N=>{const S=[...$.quantityDiscounts||[]];S[b].minQuantity=parseInt(N.target.value)||0,re({...$,quantityDiscounts:S})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., 1000",min:"0"})}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsx("input",{type:"number",value:c.maxQuantity||"",onChange:N=>{const S=[...$.quantityDiscounts||[]];S[b].maxQuantity=N.target.value?parseInt(N.target.value):null,re({...$,quantityDiscounts:S})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Leave empty for no limit",min:"0"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"Leave empty for unlimited"})]}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:c.discountPercentage,onChange:N=>{const S=[...$.quantityDiscounts||[]];S[b].discountPercentage=parseFloat(N.target.value)||0,re({...$,quantityDiscounts:S})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., 5",min:"0",max:"100",step:"0.1"}),e.jsx("span",{className:"text-sm text-cream-600",children:"%"})]}),c.discountPercentage>0&&e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:["Price: ",((100-c.discountPercentage)/100).toFixed(2),"x base price"]})]}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>{const N=($.quantityDiscounts||[]).filter((S,T)=>T!==b);re({...$,quantityDiscounts:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})})]},b))})]})}),e.jsx("div",{className:"p-3 bg-blue-50 border-t border-cream-300",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Example:"})," Min: 1000, Max: 5000, Discount: 5%  Customers ordering 1000-5000 units get 5% off. Min: 5000, Max: (empty), Discount: 10%  Customers ordering 5000+ units get 10% off."]})})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-6 bg-white",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(Vn,{size:20}),"Pricing & Category"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsx("div",{className:"col-span-2",children:e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(lc,{className:"w-6 h-6 text-blue-600 mt-0.5 shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1 flex items-center gap-2",children:" Dynamic Pricing Enabled"}),e.jsxs("p",{className:"text-sm text-blue-700 mb-3",children:["Prices for this product are managed through ",e.jsx("strong",{children:"Price Books"})," and ",e.jsx("strong",{children:"Modifiers"}),". After creating the product, set up different prices for different user segments (Retail, VIP, Corporate) and locations."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{l("price-books"),Rt.success("Navigate to Price Books after saving this product")},className:"text-sm bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Price Books "}),e.jsx("button",{type:"button",onClick:()=>{l("modifiers"),Rt.success("Navigate to Modifiers after saving this product")},className:"text-sm bg-white text-blue-600 border border-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:"View Modifiers"})]})]})]})})})})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-6 bg-white",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(Vn,{size:20}),"Category & Subcategory"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Main Type * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Select first to filter categories)"})]}),e.jsx(Da,{label:"Select Type",value:or||"",onChange:async c=>{const b=c;if(Yn(b),da([]),cn({}),re({...$,category:"",subcategory:""}),he([]),b){const N=He.filter(S=>S.type===b&&!S.parent);cr(N)}else cr([])},options:[{value:"",label:"Select Type"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"}),!or&&e.jsxs("p",{className:"mt-1 text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(xs,{size:12}),"Please select a type first to see available categories"]})]}),or&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Category * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Select based on type)"})]}),e.jsx(Da,{id:"product-category",label:"Select Category",value:String($.category||Ea[0]||""),onChange:async c=>{c?(da([String(c)]),re({...$,category:String(c),subcategory:""}),M.category&&R({...M,category:void 0}),await An(String(c)),he([])):(da([]),cn({}),re({...$,category:"",subcategory:""}),he([]))},options:[{value:"",label:"Select Category"},...Nn.filter(c=>!c.parent).map(c=>({value:c._id,label:c.name}))],className:`w-full ${M.category?"border-red-300":""}`}),M.category&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{size:12}),M.category]}),!$.category&&or&&!M.category&&e.jsxs("p",{className:"mt-1 text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(xs,{size:12}),"Please select a category to continue"]})]})]}),$.category&&Ea.length>0&&(()=>{const c=zs[String(Ea[0]||"")]||[],b=to[String(Ea[0]||"")]||!1,N=String(Ea[1]||"");return e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Optional - Leave empty to create product directly in category)"})]}),b&&c.length===0?e.jsxs("div",{className:"w-full py-2 border border-cream-300 rounded-lg flex items-center justify-center",children:[e.jsx(Jt,{className:"animate-spin text-cream-600",size:16}),e.jsx("span",{className:"ml-2 text-sm text-cream-600",children:"Loading..."})]}):c.length>0?e.jsx(Da,{label:"Select Subcategory",value:String(N||$.subcategory||""),onChange:async S=>{if(S){da([String(Ea[0]),String(S)]),re({...$,category:String(Ea[0]),subcategory:String(S)});try{Ce(!0);const T=await fetch(`${we}/products/category/${S}`,{headers:Ot()});if(T.ok){const U=await wt(T);he(U||[])}}catch(T){console.error("Error fetching category products:",T),he([])}finally{Ce(!1)}}else{da([Ea[0]]),re({...$,category:Ea[0],subcategory:""});try{Ce(!0);const T=await fetch(`${we}/products/category/${Ea[0]}`,{headers:Ot()});if(T.ok){const U=await wt(T);he(U||[])}}catch(T){console.error("Error fetching category products:",T),he([])}finally{Ce(!1)}}},options:[{value:"",label:"None (Use Category Directly)"},...c.sort((S,T)=>(S.sortOrder||0)-(T.sortOrder||0)).map(S=>({value:S._id,label:S.name}))],className:"w-full"}):null]})})(),or&&e.jsxs("div",{className:"mt-4 p-4 bg-cream-50 border border-cream-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-cream-900",children:"Existing Products in this Category"}),ze&&e.jsx(Jt,{className:"animate-spin text-cream-600",size:16})]}),ze?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"Loading..."})}):$.category?$.subcategory?Sn.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"No products found in this subcategory. This will be the first product."})}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Sn.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-cream-200 rounded-lg hover:border-cream-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"font-medium text-cream-900 text-sm truncate",children:c.name})})]}),e.jsxs("button",{type:"button",onClick:()=>Si(c._id),className:"px-3 py-1.5 text-xs bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-1 whitespace-nowrap",children:[e.jsx(zr,{size:14}),"View"]})]},c._id))}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(zs[$.category]||[]).length>0?(zs[$.category]||[]).sort((c,b)=>(c.sortOrder||0)-(b.sortOrder||0)).map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-cream-200 rounded-lg hover:border-cream-300 transition-colors cursor-pointer",onClick:async()=>{re({...$,subcategory:c._id});const b=[$.category];if(c.parent){const N=typeof c.parent=="object"&&c.parent!==null?c.parent._id:String(c.parent);N&&b.push(N)}b.push(c._id),da(b);try{Ce(!0);const N=await fetch(`${we}/products/subcategory/${c._id}`,{headers:Ot()});if(N.ok){const S=await wt(N);he(S||[])}else he([])}catch(N){console.error("Error fetching products:",N),he([])}finally{Ce(!1)}},children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-cream-900 text-sm truncate",children:c.name}),e.jsx("p",{className:"text-xs text-cream-600",children:c.parent?"Nested Subcategory":"Subcategory"})]})]}),e.jsx(Xa,{className:"text-cream-600",size:16})]},c._id)):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"No subcategories found. Product will be created directly under this category."})})}):e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[Nn.filter(c=>!c.parent).map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-cream-200 rounded-lg hover:border-cream-300 transition-colors cursor-pointer",onClick:async()=>{re({...$,category:c._id,subcategory:""}),da([c._id]),he([]),await An(c._id)},children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-cream-900 text-sm truncate",children:c.name}),e.jsxs("p",{className:"text-xs text-cream-600",children:[c.type," Category"]})]})]}),e.jsx(Xa,{className:"text-cream-600",size:16})]},c._id)),Nn.filter(c=>!c.parent).length===0&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"No categories found for this type."})})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Options"}),$.options&&e.jsx("button",{type:"button",onClick:yl,className:"px-3 py-1 text-xs bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Load from JSON"})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{type:"button",onClick:Ci,className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:16}),"Add Option"]})}),B.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No options added. Click "Add Option" to start.'}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto -mx-4 sm:mx-0",children:e.jsx("div",{className:"inline-block min-w-full align-middle px-4 sm:px-0",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900 min-w-[150px]",children:"Name"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900 min-w-[150px]",children:"Price (INR per unit)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900 min-w-[200px]",children:"Description"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:B.map((c,b)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:c.name,onChange:N=>sr(b,"name",N.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Option name"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",step:"0.00001",min:"0",value:c.priceAdd,onChange:N=>sr(b,"priceAdd",N.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm font-medium",placeholder:"0.00 (INR per unit)"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("textarea",{value:c.description,onChange:N=>sr(b,"description",N.target.value),rows:2,className:"w-full px-2 py-1 border border-cream-200 rounded text-sm resize-y",placeholder:"Description"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>zo(b),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})})]},b))})]})})}),e.jsx("div",{className:"md:hidden space-y-4",children:B.map((c,b)=>e.jsxs("div",{className:"bg-white border border-cream-300 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-semibold text-cream-900",children:["Option ",b+1]}),e.jsx("button",{type:"button",onClick:()=>zo(b),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:18})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:N=>sr(b,"name",N.target.value),className:"w-full px-3 py-2 border border-cream-200 rounded text-sm",placeholder:"Option name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Price (INR per unit)"}),e.jsx("input",{type:"text",value:c.priceAdd,onChange:N=>sr(b,"priceAdd",N.target.value),className:"w-full px-3 py-2 border border-cream-200 rounded text-sm font-medium",placeholder:"0.00 (INR per unit)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:N=>sr(b,"description",N.target.value),rows:2,className:"w-full px-3 py-2 border border-cream-200 rounded text-sm resize-y",placeholder:"Description"})]})]},b))})]})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-purple-50",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"File Upload Constraints & Additional Settings"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Maximum File Size (MB)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",value:$.maxFileSizeMB,onChange:c=>re({...$,maxFileSizeMB:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 10"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Enforces technical constraints for Staff uploads"})]}),e.jsxs("div",{className:"flex items-end",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-cream-900 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$.blockCDRandJPG,onChange:c=>re({...$,blockCDRandJPG:c.target.checked}),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{children:"Block CDR and JPG Files"})]}),e.jsx("p",{className:"text-xs text-cream-600 ml-2",children:"Restricts accepted file formats for production"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Min File Width (pixels)"}),e.jsx("input",{type:"number",min:"0",value:$.minFileWidth,onChange:c=>re({...$,minFileWidth:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 2000"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Minimum width for user artwork files"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Max File Width (pixels)"}),e.jsx("input",{type:"number",min:"0",value:$.maxFileWidth,onChange:c=>re({...$,maxFileWidth:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 5000"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Maximum width for user artwork files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Min File Height (pixels)"}),e.jsx("input",{type:"number",min:"0",value:$.minFileHeight,onChange:c=>re({...$,minFileHeight:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 1500"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Minimum height for user artwork files"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Max File Height (pixels)"}),e.jsx("input",{type:"number",min:"0",value:$.maxFileHeight,onChange:c=>re({...$,maxFileHeight:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 4000"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Maximum height for user artwork files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Additional Design Charge (INR)"}),e.jsx("input",{type:"number",step:"0.00001",min:"0",value:$.additionalDesignCharge,onChange:c=>re({...$,additionalDesignCharge:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 500"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Fixed fee if Staff requires design help"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"GST % *"}),e.jsx("input",{id:"product-gstPercentage",name:"gstPercentage",type:"number",required:!0,step:"0.01",min:"0",max:"100",value:$.gstPercentage,onChange:c=>{re({...$,gstPercentage:c.target.value}),M.gstPercentage&&R({...M,gstPercentage:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${M.gstPercentage?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., 18"}),M.gstPercentage&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{size:12}),M.gstPercentage]}),!M.gstPercentage&&e.jsx("p",{className:"text-xs text-red-600 mt-1 font-medium",children:"CRITICAL: Required for invoice calculation"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$.showPriceIncludingGst,onChange:c=>re({...$,showPriceIncludingGst:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-cream-900 block",children:"Show Prices Including GST"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:$.showPriceIncludingGst?"Prices will be displayed including GST on the product page. (Not recommended - industry standard is to show excluding GST)":"Prices will be displayed excluding GST on the product page. GST will be added at checkout. (Recommended - industry standard)"})]})]})}),e.jsxs("div",{className:"mt-6 border border-cream-300 rounded-lg p-6 bg-yellow-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(_r,{size:20}),"Custom Instructions for Customers"]}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Add specific instructions that customers must follow. If instructions are not followed, the company is not responsible. These instructions will be displayed prominently to customers."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Instructions *"}),e.jsx("textarea",{id:"product-instructions",name:"instructions",value:$.instructions,onChange:c=>{re({...$,instructions:c.target.value}),M.instructions&&R({...M,instructions:void 0})},rows:6,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${M.instructions?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Example: Maximum file size: 10 MB. Files must be in PNG or PDF format only. CDR and JPG files are not accepted. Required dimensions: 3000  2000 pixels. Please ensure all text is converted to outlines before uploading."}),M.instructions&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{size:12}),M.instructions]}),!M.instructions&&e.jsx("p",{className:"text-xs text-yellow-700 mt-2 font-medium",children:" These instructions will be displayed to customers with a disclaimer that the company is not responsible if instructions are not followed."})]})]}),e.jsxs("div",{className:"mt-6 border border-cream-300 rounded-lg p-6 bg-blue-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(_r,{size:20}),"Production Sequence (Department Order)"]}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Select a sequence or customize it for this specific product. If not set, the default department sequence will be used."}),(()=>{const c=er.length>0,b=$.productionSequence&&$.productionSequence.length>0,N=Ui!==null,S=bi.length>0,T=N?bi.find(G=>G._id===Ui):null;return T&&T.departments&&T.departments.length>0,!c&&!b&&!N&&!S?e.jsx("div",{className:"p-4 bg-cream-50 border border-cream-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:"No departments available. Please create departments first."})}):e.jsxs("div",{className:"space-y-4",children:[bi.length>0&&e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900 mb-3",children:"Available Sequences:"}),e.jsx("div",{className:"space-y-2",children:bi.map(G=>{const Y=Ui===G._id,K=(G.departments||[]).map(ce=>!ce||!ce.department?null:typeof ce.department=="object"&&ce.department!==null?ce.department._id:ce.department).filter(ce=>ce!==null);return e.jsxs("div",{className:"border border-cream-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{onClick:()=>{if(Ui===G._id)hl(null),re({...$,productionSequence:[]});else if(hl(G._id),re({...$,productionSequence:K}),G.attributes&&Array.isArray(G.attributes)&&G.attributes.length>0){const ce=G.attributes.map((De,Ze)=>{if(!De)return null;const Et=typeof De=="object"&&De!==null?De._id:De;return Et?{attributeTypeId:Et,isEnabled:!0,isRequired:!1,displayOrder:Ze}:null}).filter(De=>De!==null);Me(ce)}},className:`p-3 cursor-pointer transition-colors flex items-center justify-between ${Y?"bg-cream-100 border-cream-900":"bg-cream-50 hover:bg-cream-100"}`,children:[e.jsx("p",{className:"font-medium text-cream-900",children:G.name}),e.jsx(Xa,{size:18,className:`text-cream-600 transition-transform ${Y?"rotate-90":""}`})]}),e.jsx(ba,{children:Y&&e.jsx(st.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"border-t border-cream-200 bg-white",children:e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-cream-700 mb-2",children:"Sequence Departments:"}),e.jsx(ba,{children:$.productionSequence.map((ce,De)=>{const Ze=er.find(Et=>Et._id===ce);return Ze?e.jsxs(st.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.4,delay:De*.1,ease:"easeOut"},className:"flex items-center gap-3 p-3 bg-cream-50 border border-cream-200 rounded-lg",children:[e.jsx(st.span,{initial:{scale:0},animate:{scale:1},transition:{duration:.3,delay:De*.1+.2,type:"spring",stiffness:200},className:"flex items-center justify-center w-8 h-8 bg-cream-900 text-white rounded-full text-sm font-medium",children:De+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:Ze.name}),e.jsx(ba,{children:Ze.description&&e.jsx(st.p,{initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.5,delay:De*.1+.3,ease:"easeOut"},className:"text-xs text-cream-600 mt-1 overflow-hidden",children:Ze.description})})]})]},ce):null})})]})})})]},G._id)})})]}),!Mc&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{type:"button",onClick:()=>{pl(!0),hl(null)},className:"px-4 py-2 text-sm font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Rr,{size:16}),"Create Custom Sequence"]})}),Mc&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t-2 border-cream-300 pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900",children:"Create Custom Sequence"}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:"Select departments in order to create a custom sequence for this product"})]}),e.jsxs("button",{type:"button",onClick:()=>{pl(!1),re({...$,productionSequence:[]})},className:"px-3 py-1 text-sm bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(Wl,{size:14}),"Back"]})]}),e.jsx(ba,{children:$.productionSequence&&$.productionSequence.length>0&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"border border-cream-300 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900 mb-3",children:"Custom Production Sequence:"}),e.jsx("div",{className:"space-y-2",children:e.jsx(ba,{children:($.productionSequence||[]).map((G,Y)=>{const K=er.find(ce=>ce._id===G);return K?e.jsxs(st.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20,scale:.9},transition:{duration:.4,delay:Y*.1,ease:"easeOut"},className:"flex items-center justify-between p-3 bg-cream-50 border border-cream-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(st.span,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.4,delay:Y*.1+.2,type:"spring",stiffness:200},className:"flex items-center justify-center w-8 h-8 bg-cream-900 text-white rounded-full text-sm font-medium",children:Y+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:K.name}),e.jsx(ba,{children:K.description&&e.jsx(st.p,{initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.5,delay:Y*.1+.3,ease:"easeOut"},className:"text-xs text-cream-600 mt-1 overflow-hidden",children:K.description})})]})]}),e.jsx(st.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>{const ce=($.productionSequence||[]).filter(De=>De!==G);re({...$,productionSequence:ce})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})]},G):null})})})]})}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900 mb-3",children:"Available Departments:"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:er.filter(G=>G.isEnabled&&!($.productionSequence||[]).includes(G._id)).sort((G,Y)=>(G.sequence||0)-(Y.sequence||0)).map(G=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-cream-50 border border-cream-200 rounded-lg hover:bg-cream-100 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-cream-900",children:G.name}),G.description&&e.jsx("p",{className:"text-xs text-cream-600",children:G.description})]}),e.jsxs("button",{type:"button",onClick:()=>{re({...$,productionSequence:[...$.productionSequence||[],G._id]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:14}),"Add"]})]},G._id))}),er.filter(G=>G.isEnabled&&!($.productionSequence||[]).includes(G._id)).length===0&&e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:"All available departments have been added to the sequence."})]}),e.jsx("div",{className:"mt-4 flex items-center justify-end gap-3",children:e.jsxs("button",{type:"button",onClick:()=>{pl(!1),hl(null),h("Custom sequence saved for this product. The original sequence template remains unchanged."),setTimeout(()=>h(null),3e3)},disabled:!$.productionSequence||$.productionSequence.length===0,className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-2 ${$.productionSequence&&$.productionSequence.length>0?"bg-green-600 text-white hover:bg-green-700 cursor-pointer":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(va,{size:16}),"Save Custom Sequence"]})})]})}),(!$.productionSequence||$.productionSequence.length===0)&&e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," If no custom sequence is set, the default department sequence will be used when orders are created for this product."]})})]})})()]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-green-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Product Attributes (Advanced)"}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:"Assign reusable attribute types to this product. These are more flexible than the legacy options above."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>Zn(!0),className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Create new attribute type",children:[e.jsx(Zs,{size:14}),"Create Attribute"]}),e.jsxs("button",{type:"button",onClick:()=>{const c=$.category||(Ea.length>0?Ea[0]:null),b=$.subcategory||(Ea.length>1?Ea[Ea.length-1]:null);xr(c,b)},disabled:dr,className:"px-3 py-1.5 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center gap-2",title:"Refresh attribute types list",children:[dr?e.jsx(Jt,{className:"animate-spin",size:14}):e.jsx(Rr,{size:14}),"Refresh"]})]})]}),dr?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Jt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-3 text-sm text-cream-600",children:"Loading attribute types..."})]}):!gt||gt.length===0?e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-cream-700",children:[e.jsx("strong",{children:"No attribute types found."}),' Click "Create Attribute" to create a new attribute type, or create attribute types in the "Attribute Types" tab.']})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Select Attribute Types to Use with This Product"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(gt||[]).map(c=>{const b=(fe||[]).some(S=>S.attributeTypeId===c._id),N=(fe||[]).find(S=>S.attributeTypeId===c._id);return e.jsx("div",{className:`border rounded-lg p-3 ${b?"border-green-500 bg-green-50":"border-cream-300 bg-white"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:S=>{S.target.checked?Me([...fe||[],{attributeTypeId:c._id,isEnabled:!0,isRequired:c.isRequired||!1,displayOrder:(fe||[]).length}]):Me((fe||[]).filter(T=>T.attributeTypeId!==c._id))},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-cream-900",children:c.attributeName}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[c.inputStyle||"N/A","  ",c.primaryEffectType||"N/A"," "," ",c.isPricingAttribute?"Affects Price":"No Price Impact"]})]})}),b&&e.jsx("div",{className:"mt-3 space-y-2 pl-7",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm text-cream-700",children:[e.jsx("input",{type:"checkbox",checked:(N==null?void 0:N.isRequired)||!1,onChange:S=>{Me((fe||[]).map(T=>T.attributeTypeId===c._id?{...T,isRequired:S.target.checked}:T))},className:"w-4 h-4 text-cream-900 border-cream-300 rounded"}),"Required for this product"]})})})]})]})},c._id)})}),fe&&fe.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:fe.length})," attribute type(s) selected. These will be available when customers customize this product."]})})]})]}),Wn&&e.jsx("div",{"data-modal":"true",className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-100 p-4",onClick:c=>{c.target===c.currentTarget&&Zn(!1)},onMouseDown:c=>{c.target===c.currentTarget&&c.stopPropagation()},children:e.jsxs("div",{"data-modal":"true",className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:c=>{c.stopPropagation(),c.preventDefault()},onMouseDown:c=>{c.stopPropagation(),c.preventDefault()},onSubmit:c=>{c.stopPropagation(),c.preventDefault()},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-cream-900",children:"Create New Attribute Type"}),e.jsx("button",{type:"button",onClick:()=>{Zn(!1),Qa(null),bt({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]})},className:"text-cream-600 hover:text-cream-900 p-1",children:e.jsx(ss,{size:24})})]}),e.jsxs("form",{onSubmit:c=>{c.preventDefault(),c.stopPropagation(),wi(c)},className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Name * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(What customers will see)"})]}),e.jsx("input",{id:"attribute-name",name:"attributeName",type:"text",value:ee.attributeName,onChange:c=>{bt({...ee,attributeName:c.target.value}),D.attributeName&&k({...D,attributeName:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${D.attributeName?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Printing Option, Paper Type",required:!0}),D.attributeName&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{size:12}),D.attributeName]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["How Customers Select This * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Input method)"})]}),e.jsxs("select",{id:"attribute-inputStyle",name:"inputStyle",value:ee.inputStyle,onChange:c=>bt({...ee,inputStyle:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"DROPDOWN",children:"Dropdown Menu"}),e.jsx("option",{value:"POPUP",children:"Pop-Up"}),e.jsx("option",{value:"RADIO",children:"Radio Buttons"}),e.jsx("option",{value:"CHECKBOX",children:"Checkbox"}),e.jsx("option",{value:"TEXT_FIELD",children:"Text Field"}),e.jsx("option",{value:"NUMBER",children:"Number Input"}),e.jsx("option",{value:"FILE_UPLOAD",children:"File Upload"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Image ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(to be shown when selecting this attribute)"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:c=>{var N;const b=((N=c.target.files)==null?void 0:N[0])||null;if(b){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(b.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),c.target.value="",bt({...ee,attributeImage:null});return}const T=5*1024*1024;if(b.size>T){p("Image size must be less than 5MB. Please compress the image and try again."),c.target.value="",bt({...ee,attributeImage:null});return}p(null)}bt({...ee,attributeImage:b})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent"}),ee.attributeImage&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:URL.createObjectURL(ee.attributeImage),alt:"Attribute preview",className:"w-32 h-32 object-cover rounded-lg border border-cream-300"}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[ee.attributeImage.name," (",(ee.attributeImage.size/1024).toFixed(2)," KB)"]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["What This Affects * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Description of impact on product)"})]}),e.jsx("textarea",{value:ee.effectDescription,onChange:c=>bt({...ee,effectDescription:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent",rows:3,placeholder:"e.g., Changes the product price, Requires customer to upload a file, Creates different product versions, Just displays information",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Describe how this attribute affects the product or customer experience"})]}),e.jsxs("div",{className:"mt-6 border-t border-cream-200 pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Cascading Attributes (Optional)"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:'Make this attribute appear only when a parent attribute has specific values. For example, show "Material" options only when "Card Type" is "Glossy".'}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Parent Attribute ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Optional - if this depends on another attribute)"})]}),e.jsxs("select",{value:ee.parentAttribute,onChange:c=>{bt({...ee,parentAttribute:c.target.value,showWhenParentValue:[],hideWhenParentValue:[]})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent",children:[e.jsx("option",{value:"",children:"None (Independent Attribute)"}),gt.filter(c=>!c.parentAttribute).map(c=>e.jsx("option",{value:c._id,children:c.attributeName},c._id))]}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Select a parent attribute if this attribute should only appear when the parent has certain values"})]}),ee.parentAttribute&&(()=>{const c=gt.find(N=>N._id===ee.parentAttribute),b=(c==null?void 0:c.attributeValues)||[];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Show When Parent Value Is ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Leave empty to show for all values)"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-300 rounded-lg p-3",children:b.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:"Parent attribute has no values defined yet"}):b.map((N,S)=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ee.showWhenParentValue.includes(N.value),onChange:T=>{const U=ee.showWhenParentValue||[];T.target.checked?bt({...ee,showWhenParentValue:[...U,N.value],hideWhenParentValue:(ee.hideWhenParentValue||[]).filter(G=>G!==N.value)}):bt({...ee,showWhenParentValue:U.filter(G=>G!==N.value)})},className:"rounded border-cream-300 text-cream-900 focus:ring-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:N.label||N.value})]},S))}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Check values to show this attribute only when parent has those values. Leave all unchecked to show for all parent values."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Hide When Parent Value Is ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Optional)"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-300 rounded-lg p-3",children:b.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:"Parent attribute has no values defined yet"}):b.map((N,S)=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ee.hideWhenParentValue.includes(N.value),onChange:T=>{const U=ee.hideWhenParentValue||[];T.target.checked?bt({...ee,hideWhenParentValue:[...U,N.value],showWhenParentValue:(ee.showWhenParentValue||[]).filter(G=>G!==N.value)}):bt({...ee,hideWhenParentValue:U.filter(G=>G!==N.value)})},className:"rounded border-cream-300 text-cream-900 focus:ring-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:N.label||N.value})]},S))}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:'Check values to hide this attribute when parent has those values. This overrides "Show When" settings.'})]})]})})()]})]})]}),ee.inputStyle==="DROPDOWN"||ee.inputStyle==="RADIO"||ee.isPriceEffect?e.jsxs("div",{className:"border-b border-cream-200 pb-4","data-attribute-options-table":!0,children:[D.attributeValues&&e.jsx("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:D.attributeValues})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Options"}),e.jsxs("button",{type:"button",onClick:()=>{bt({...ee,attributeOptionsTable:[...ee.attributeOptionsTable,{name:"",priceImpactPer1000:"",image:void 0,optionUsage:{price:!1,image:!1,listing:!1},priceImpact:"",numberOfImagesRequired:0,listingFilters:""}]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:16}),"Add Option"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:ee.attributeOptionsTable.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No options added. Click "Add Option" to start.'}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Name *"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Usage *"}),ee.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.price})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Impact"}),ee.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.image})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Number of Images Required"}),ee.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.listing})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Listing Filters"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Image (Optional)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:(ee.attributeOptionsTable||[]).map((c,b)=>{var N,S,T,U,G,Y;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:c.name,onChange:K=>{const ce=[...ee.attributeOptionsTable];ce[b].name=K.target.value,bt({...ee,attributeOptionsTable:ce})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Both Sides, Express Delivery",required:!0})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((N=c.optionUsage)==null?void 0:N.price)||!1,onChange:K=>{const ce=[...ee.attributeOptionsTable];if(ce[b].optionUsage||(ce[b].optionUsage={price:!1,image:!1,listing:!1}),ce[b].optionUsage.price=K.target.checked,!K.target.checked&&!ce[b].optionUsage.image&&!ce[b].optionUsage.listing){p("At least one option usage must be selected (Price, Image, or Listing)");return}bt({...ee,attributeOptionsTable:ce}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Price"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((S=c.optionUsage)==null?void 0:S.image)||!1,onChange:K=>{const ce=[...ee.attributeOptionsTable];if(ce[b].optionUsage||(ce[b].optionUsage={price:!1,image:!1,listing:!1}),ce[b].optionUsage.image=K.target.checked,!K.target.checked&&!ce[b].optionUsage.price&&!ce[b].optionUsage.listing){p("At least one option usage must be selected (Price, Image, or Listing)");return}bt({...ee,attributeOptionsTable:ce}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Image"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((T=c.optionUsage)==null?void 0:T.listing)||!1,onChange:K=>{const ce=[...ee.attributeOptionsTable];if(ce[b].optionUsage||(ce[b].optionUsage={price:!1,image:!1,listing:!1}),ce[b].optionUsage.listing=K.target.checked,!K.target.checked&&!ce[b].optionUsage.price&&!ce[b].optionUsage.image){p("At least one option usage must be selected (Price, Image, or Listing)");return}bt({...ee,attributeOptionsTable:ce}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Listing"})]})]})}),ee.attributeOptionsTable.some(K=>{var ce;return(ce=K.optionUsage)==null?void 0:ce.price})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(U=c.optionUsage)!=null&&U.price?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-cream-700",children:""}),e.jsx("input",{type:"number",value:c.priceImpact||"",onChange:K=>{const ce=[...ee.attributeOptionsTable];ce[b].priceImpact=K.target.value,bt({...ee,attributeOptionsTable:ce})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter amount",step:"0.01",min:"0"})]}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),ee.attributeOptionsTable.some(K=>{var ce;return(ce=K.optionUsage)==null?void 0:ce.image})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(G=c.optionUsage)!=null&&G.image?e.jsx("input",{type:"number",value:c.numberOfImagesRequired||0,onChange:K=>{const ce=[...ee.attributeOptionsTable];ce[b].numberOfImagesRequired=parseInt(K.target.value)||0,bt({...ee,attributeOptionsTable:ce})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Number of images",min:"0"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),ee.attributeOptionsTable.some(K=>{var ce;return(ce=K.optionUsage)==null?void 0:ce.listing})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(Y=c.optionUsage)!=null&&Y.listing?e.jsx("input",{type:"text",value:c.listingFilters||"",onChange:K=>{const ce=[...ee.attributeOptionsTable];ce[b].listingFilters=K.target.value,bt({...ee,attributeOptionsTable:ce})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter filters (comma-separated)"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:async K=>{var De;const ce=(De=K.target.files)==null?void 0:De[0];if(ce){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(ce.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image.");return}if(ce.size>5*1024*1024){p("Image size must be less than 5MB.");return}try{m(!0);const Et=new FormData;Et.append("image",ce);const Qt=await fetch(`${we}/upload-image`,{method:"POST",headers:Ot(),body:Et});if(!Qt.ok){const Zt=await Qt.json().catch(()=>({}));throw new Error(Zt.error||"Failed to upload image")}const Dt=await Qt.json(),Pt=Dt.url||Dt.secure_url;if(!Pt)throw new Error("No image URL returned from server");const Tt=[...ee.attributeOptionsTable];Tt[b].image=Pt,bt({...ee,attributeOptionsTable:Tt}),p(null)}catch(Et){console.error("Error uploading image:",Et),p(Et instanceof Error?Et.message:"Failed to upload image. Please try again.")}finally{m(!1)}}},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm"}),c.image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded border border-cream-200"}),e.jsx("button",{type:"button",onClick:()=>{const K=[...ee.attributeOptionsTable];K[b].image=void 0,bt({...ee,attributeOptionsTable:K})},className:"mt-1 text-xs text-red-600 hover:text-red-800",children:"Remove"})]})]}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>{const K=ee.attributeOptionsTable.filter((ce,De)=>De!==b);bt({...ee,attributeOptionsTable:K})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})})]},b)})})]})})}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Add all options customers can choose from. If "Is Price Effect" is checked, enter the price impact per 1000 units for each option.'})]}):null,e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Additional Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isPriceEffect,onChange:c=>bt({...ee,isPriceEffect:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Price Effect?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if selecting this attribute changes the product price"}),ee.isPriceEffect&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Price Effect Amount ( per 1000 units) *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg text-cream-700",children:""}),e.jsx("input",{type:"number",value:ee.priceEffectAmount,onChange:c=>bt({...ee,priceEffectAmount:c.target.value}),className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg",placeholder:"e.g., 20 (means +20 per 1000 units)",step:"0.00001",min:"0",required:ee.isPriceEffect}),e.jsx("span",{className:"text-sm text-cream-600",children:"per 1000 units"})]}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Enter how much the price changes per 1000 units. Example: "20" means +20 for every 1000 units.'})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isStepQuantity,onChange:c=>bt({...ee,isStepQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Step Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific steps (e.g., 1000, 2000, 3000 only)"}),ee.isStepQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Steps:"}),e.jsxs("button",{type:"button",onClick:()=>{bt({...ee,stepQuantities:[...ee.stepQuantities,{quantity:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Zs,{size:14}),"Add Step"]})]}),ee.stepQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No steps added. Click "Add Step" to start.'}):e.jsx("div",{className:"space-y-2",children:ee.stepQuantities.map((c,b)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Step - ",b+1,":"]}),e.jsx("input",{type:"number",value:c.quantity,onChange:N=>{const S=[...ee.stepQuantities];S[b].quantity=N.target.value,bt({...ee,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"quantity of step",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...ee.stepQuantities];S[b].price=N.target.value,bt({...ee,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of step",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=ee.stepQuantities.filter((S,T)=>T!==b);bt({...ee,stepQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})]},b))})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isRangeQuantity,onChange:c=>bt({...ee,isRangeQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Range Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific Range (e.g., 1000-2000, 2000-5000)"}),ee.isRangeQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Ranges:"}),e.jsxs("button",{type:"button",onClick:()=>{bt({...ee,rangeQuantities:[...ee.rangeQuantities,{min:"",max:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Zs,{size:14}),"Add Range"]})]}),ee.rangeQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No ranges added. Click "Add Range" to start.'}):e.jsx("div",{className:"space-y-2",children:ee.rangeQuantities.map((c,b)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Range - ",b+1,":"]}),e.jsx("input",{type:"number",value:c.min,onChange:N=>{const S=[...ee.rangeQuantities];S[b].min=N.target.value,bt({...ee,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"min quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700",children:"-"}),e.jsx("input",{type:"number",value:c.max,onChange:N=>{const S=[...ee.rangeQuantities];S[b].max=N.target.value,bt({...ee,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"max quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...ee.rangeQuantities];S[b].price=N.target.value,bt({...ee,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of range",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=ee.rangeQuantities.filter((S,T)=>T!==b);bt({...ee,rangeQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})]},b))})]})]})]})]})]}),ee.primaryEffectType==="FILE"&&e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"File Requirements"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"File Requirements Description"}),e.jsx("textarea",{value:ee.fileRequirements,onChange:c=>bt({...ee,fileRequirements:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg",rows:3,placeholder:"e.g., Upload your design file (JPG, PNG, PDF). Minimum 300 DPI recommended."}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:"Describe what type of file customers need to upload and any requirements (format, size, resolution, etc.)"})]})]}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isFilterable,onChange:c=>bt({...ee,isFilterable:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Allow Filtering"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers can filter products by this attribute (e.g., filter by color, size, etc.)"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isRequired,onChange:c=>bt({...ee,isRequired:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Required Selection"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers must select an option before they can place an order"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isCommonAttribute,onChange:c=>bt({...ee,isCommonAttribute:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Available for All Products"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute can be used with any product. Uncheck to restrict to specific categories/subcategories."})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Creating...":"Create Attribute"}),e.jsx("button",{type:"button",onClick:()=>{Zn(!1),Qa(null),bt({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]})},className:"flex-1 px-6 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"})]})]})]})}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:20}),j?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{size:20}),j?"Update Product":"Create Product"]})})]}),n==="categories"&&!A&&!Ss&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Category Level *"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border-2 cursor-pointer hover:border-cream-400 transition-all hover:shadow-sm",style:{borderColor:!se.parent&&!Vt?"#d97706":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"categoryLevel",checked:!se.parent&&!Vt,onChange:()=>{le({...se,parent:"",sortOrder:0}),Bs(!1),Ct({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),At([]),p(null)},className:"w-4 h-4 text-cream-600 focus:ring-cream-500",value:"toplevel"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-cream-900",children:"Main Category"}),e.jsx("p",{className:"text-xs text-cream-600 mt-0.5",children:"Create a top-level category"})]}),!se.parent&&!Vt&&e.jsx(va,{className:"text-cream-600",size:20})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border-2 cursor-pointer hover:border-cream-400 transition-all hover:shadow-sm",style:{borderColor:se.parent&&!Vt?"#d97706":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"categoryLevel",checked:!!se.parent&&!Vt,onChange:()=>{Bs(!1),Ct({name:"",description:"",category:"pending",parent:"",type:se.type||"",slug:"",sortOrder:0,image:null}),le({...se,parent:"pending"}),At([]),p(null)},className:"w-4 h-4 text-cream-600 focus:ring-cream-500",value:"subcategory"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-cream-900",children:"Subcategory"}),e.jsx("p",{className:"text-xs text-cream-600 mt-0.5",children:"Create under an existing category"})]}),se.parent&&!Vt&&e.jsx(va,{className:"text-cream-600",size:20})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border-2 cursor-pointer hover:border-cream-400 transition-all hover:shadow-sm",style:{borderColor:Vt?"#d97706":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"categoryLevel",checked:Vt,onChange:()=>{Bs(!0),le({...se,parent:""}),Ct({name:"",description:"",category:"",parent:"pending",type:se.type||"",slug:"",sortOrder:0,image:null}),At([]),p(null)},className:"w-4 h-4 text-cream-600 focus:ring-cream-500",value:"nestedSubcategory"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-cream-900",children:"Nested Subcategory"}),e.jsx("p",{className:"text-xs text-cream-600 mt-0.5",children:"Create under an existing subcategory"})]}),Vt&&e.jsx(va,{className:"text-cream-600",size:20})]})]})]}),n==="categories"&&!Ss&&!Ve.category&&!Vt&&e.jsxs("form",{onSubmit:Hr,className:"space-y-6",children:[A&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Category: ",se.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:Gi,className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),!se.parent&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Category Name *"}),e.jsx("input",{id:"category-name",name:"name",type:"text",required:!0,value:se.name,onChange:c=>{const b=c.target.value;let N=se.slug;if(!Be){const S=b.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");S&&!b.endsWith(" ")?N=Ii(S,A,null):N=S}le({...se,name:b,slug:N}),p(null)},onBlur:()=>{if(!se.name.trim())p("Category name is required.");else if(!Be){const c=se.name.trim();if(c){const b=c.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");if(b){const N=Ii(b,A,null);le({...se,slug:N})}}}},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${u&&!se.name.trim()||!se.name.trim()&&se.name!==""?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Enter category name"}),(u&&!se.name.trim()||!se.name.trim()&&se.name!=="")&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Category name is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description"}),e.jsx("textarea",{value:se.description,onChange:c=>le({...se,description:c.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Slug (URL-friendly identifier)"}),e.jsx("input",{type:"text",value:se.slug,onChange:c=>{Qe(!0),le({...se,slug:c.target.value})},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., visiting-cards (auto-generated from name)"}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Auto-generated from category name. You can customize it if needed."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Type *"}),e.jsx(Da,{id:"category-type",label:"Select Type",value:se.type,onChange:c=>{le({...se,type:c,parent:""}),p(null),setTimeout(()=>{A?Cn(A):Cn()},0)},options:[{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"}),u&&!se.type&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Category type is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",min:"0",value:se.sortOrder,onChange:c=>{le({...se,sortOrder:parseInt(c.target.value)||0}),ae.sortOrder&&H({...ae,sortOrder:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${ae.sortOrder?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Enter sort order (0 = first)"}),ae.sortOrder?e.jsx("p",{className:"mt-1 text-xs text-red-600",children:ae.sortOrder}):e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Lower numbers appear first. Sort order must be unique within the same type (Digital or Bulk)."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Category Image *",A&&e.jsx("span",{className:"text-xs text-cream-500 font-normal ml-2",children:"(Leave empty to keep current)"}),!A&&e.jsx("span",{className:"text-xs text-red-600 font-normal ml-2",children:"(Required - JPG, PNG, WebP, max 5MB)"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",required:!A,onChange:c=>{var N;const b=((N=c.target.files)==null?void 0:N[0])||null;if(b){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(b.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),c.target.value="",le({...se,image:null});return}const T=5*1024*1024;if(b.size>T){p("Image size must be less than 5MB. Please compress the image and try again."),c.target.value="",le({...se,image:null});return}p(null)}else A||p("Category image is required. Please upload an image.");le({...se,image:b})},onBlur:()=>{!A&&!se.image&&p("Category image is required. Please upload an image.")},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${u&&!A&&!se.image?"border-red-300 bg-red-50":"border-cream-300"}`}),A&&q&&!se.image&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-cream-700 mb-2",children:"Current Image:"}),e.jsx("img",{src:q,alt:"Current category",className:"w-32 h-32 object-cover rounded-lg border border-cream-300",onError:c=>{const b=c.target;b.src="/Glossy.png"}})]}),se.image&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm text-green-700 mb-2 font-medium flex items-center gap-1",children:[e.jsx(va,{size:14}),"New Image Preview:"]}),e.jsx("img",{src:URL.createObjectURL(se.image),alt:"New category preview",className:"w-32 h-32 object-cover rounded-lg border-2 border-green-400",onError:c=>{const b=c.target;b.src="/Glossy.png"}}),e.jsxs("p",{className:"mt-2 text-xs text-green-600",children:[se.image.name," (",(se.image.size/1024).toFixed(2)," KB)"]})]}),u&&!A&&!se.image&&e.jsxs("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[e.jsx(xs,{size:12}),"Category image is required"]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{size:20}),A?"Update Category":"Create Category"]})})]})]}),n==="categories"&&(Ss||Ve.category&&Ve.category!==""&&!Vt||Vt)&&e.jsxs("form",{onSubmit:Gr,className:"space-y-6 mt-8 border-t border-cream-200 pt-8",children:[Ss&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Subcategory: ",Ve.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:Gi,className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),!Ss&&Ve.category&&Ve.category!=="pending"&&!Vt&&e.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-green-800 font-medium",children:["Adding Subcategory to: ",((Lo=He.find(c=>c._id===Ve.category))==null?void 0:Lo.name)||"Category"]}),e.jsx("button",{type:"button",onClick:()=>{Ct({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),ot(!1),le({...se,parent:""}),At([]),p(null)},className:"px-3 py-1 text-sm bg-green-100 text-green-800 rounded-lg hover:bg-green-200 transition-colors",children:"Cancel"})]}),Vt&&(!Ve.parent||Ve.parent==="pending")&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Step 1: Select Parent Subcategory"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Da,{label:"Select Type",value:Ve.type||"",onChange:c=>{Ct({...Ve,type:c,category:"",parent:"pending"}),At([]),p(null)},options:[{value:"",label:"Select Type"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"})]}),Ve.type&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Da,{id:"nested-subcategory-category",label:"Select Category",value:Ve.category||"",onChange:async c=>{const b=c||"";if(Ct({...Ve,category:b,parent:"pending"}),b){hs(!0);try{const N=await fetch(`${we}/subcategories/category/${b}?includeChildren=true`);if(N.ok){const S=await N.json(),T=(G,Y=0)=>{let K=[];return G.forEach(ce=>{K.push({...ce,_displayLevel:Y}),ce.children&&ce.children.length>0&&(K=K.concat(T(ce.children,Y+1)))}),K},U=T(Array.isArray(S)?S:(S==null?void 0:S.data)||[]);At(U||[])}else At([])}catch(N){console.error("Error fetching parent subcategories:",N),At([])}finally{hs(!1)}}else At([])},options:[{value:"",label:"Select Category"},...He.filter(c=>c.type===Ve.type).sort((c,b)=>(c.sortOrder||0)-(b.sortOrder||0)).map(c=>{const b=c.type==="Digital"?"Digital Print":"Bulk Print";return{value:c._id,label:`${c.name} (${b})`}})],className:"w-full"})]}),Ve.category&&Ve.category!==""&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory ",e.jsx("span",{className:"text-red-500",children:"*"})]}),as?e.jsxs("div",{className:"w-full px-4 py-2 border border-cream-300 rounded-lg bg-cream-50 flex items-center gap-2",children:[e.jsx(Jt,{className:"animate-spin",size:16}),e.jsx("span",{className:"text-sm text-cream-600",children:"Loading subcategories..."})]}):e.jsx(Da,{id:"nested-subcategory-parent",label:"Select Subcategory (Parent for nested subcategory)",value:Ve.parent==="pending"?"":Ve.parent||"",onChange:async c=>{const b=c||"";if(b){const N=ds.find(T=>T._id===b),S=N!=null&&N.category?typeof N.category=="object"&&N.category!==null?N.category._id:N.category:Ve.category;Ct({...Ve,parent:b,category:S||Ve.category})}},options:[{value:"",label:"Select Subcategory"},...ds.sort((c,b)=>(c.sortOrder||0)-(b.sortOrder||0)).map(c=>({value:c._id,label:`${"  ".repeat(c._displayLevel||0)}${c.name}${c._displayLevel>0?" (nested)":""}`}))],className:"w-full"}),ds.length===0&&Ve.category&&!as&&e.jsx("p",{className:"mt-2 text-xs text-red-600",children:"No subcategories found for this category. Please create a subcategory first."})]}),e.jsx("div",{className:"flex items-center justify-end gap-3 pt-2",children:e.jsx("button",{type:"button",onClick:()=>{Bs(!1),Ct({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),At([]),p(null)},className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"})})]})]}),Vt&&Ve.parent&&Ve.parent!=="pending"&&e.jsxs("div",{className:"mb-4 p-3 bg-purple-50 border border-purple-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-purple-800 font-medium",children:["Adding Nested Subcategory under: ",((jl=ds.find(c=>c._id===Ve.parent))==null?void 0:jl.name)||"Subcategory"]}),e.jsx("button",{type:"button",onClick:()=>{Ct({...Ve,parent:"pending"})},className:"px-3 py-1 text-sm bg-purple-100 text-purple-800 rounded-lg hover:bg-purple-200 transition-colors",children:"Change Parent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"subcategory-name",name:"name",type:"text",required:!0,value:Ve.name,onChange:c=>{const b=c.target.value;let N=Ve.slug;if(!tt){const S=b.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");S&&!b.endsWith(" ")?N=Ii(S,null,Ss):N=S}Ct({...Ve,name:b,slug:N}),p(null),X.name&&Se({...X,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${X.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Enter subcategory name",onBlur:()=>{if(!Ve.name.trim())Se({...X,name:"Subcategory name is required"});else if(!tt){const c=Ve.name.trim();if(c){const b=c.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");if(b){const N=Ii(b,null,Ss);Ct({...Ve,slug:N})}}}}}),X.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{size:12}),X.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description"}),e.jsx("textarea",{value:Ve.description,onChange:c=>Ct({...Ve,description:c.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),!Vt&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Da,{label:"Select Type",value:Ve.type||"",onChange:c=>{Ct({...Ve,type:c,category:Ve.category==="pending"?"pending":""}),p(null)},options:[{value:"",label:"Select Type"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"}),u&&!Ve.type&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Type is required to select parent category"})]}),Ve.type&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Parent Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Da,{id:"subcategory-category",label:"Select Category",value:Ve.category==="pending"?"":Ve.category||"",onChange:c=>{Ct({...Ve,category:c||""}),p(null),X.category&&Se({...X,category:void 0})},options:[{value:"",label:"Select Category"},...He.filter(c=>c.type===Ve.type).sort((c,b)=>(c.sortOrder||0)-(b.sortOrder||0)).map(c=>{const b=c.type==="Digital"?"Digital Print":"Bulk Print";return{value:c._id,label:`${c.name} (${b})`}})],className:"w-full"}),u&&(!Ve.category||Ve.category==="pending")&&Ve.type&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Parent category is required"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Slug (URL-friendly identifier)"}),e.jsx("input",{type:"text",value:Ve.slug,onChange:c=>{ot(!0),Ct({...Ve,slug:c.target.value})},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., gloss-finish (auto-generated from name)"}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Auto-generated from subcategory name. You can customize it if needed."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",min:"0",value:Ve.sortOrder,onChange:c=>{const b=parseInt(c.target.value,10)||0;Ct({...Ve,sortOrder:b}),X.sortOrder&&Se({...X,sortOrder:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${X.sortOrder?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"0"}),X.sortOrder?e.jsx("p",{className:"mt-1 text-xs text-red-600",children:X.sortOrder}):e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Lower numbers appear first. Sort order must be unique within the same parent category."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory Image ",Ss&&e.jsx("span",{className:"text-xs text-cream-500",children:"(Leave empty to keep current image)"})]}),Ss&&ge&&!Ve.image&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-cream-700 mb-2",children:"Current Image:"}),e.jsx("img",{src:ro(ge),alt:"Current subcategory",className:"w-32 h-32 object-cover rounded-lg border border-cream-300",onError:c=>{const b=c.target;b.src="/Glossy.png"}})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:c=>{var b;Ct({...Ve,image:((b=c.target.files)==null?void 0:b[0])||null}),p(null)},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"}),Ve.image&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm text-green-700 mb-2 font-medium flex items-center gap-1",children:[e.jsx(va,{size:14}),"New Image Preview:"]}),e.jsx("img",{src:URL.createObjectURL(Ve.image),alt:"New subcategory preview",className:"w-32 h-32 object-cover rounded-lg border-2 border-green-400",onError:c=>{const b=c.target;b.src="/Glossy.png"}}),e.jsxs("p",{className:"mt-2 text-xs text-green-600",children:[Ve.image.name," (",(Ve.image.size/1024).toFixed(2)," KB)"]})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:20}),Ss?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[Ss?e.jsx(zn,{size:20}):e.jsx(Zs,{size:20}),Ss?"Update Subcategory":"Create Subcategory"]})})]}),n==="orders"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Orders (",Cs.length,")"]}),e.jsx("button",{onClick:fl,disabled:qs,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:qs?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:16}),"Loading..."]}):"Refresh"})]}),qs?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Jt,{className:"animate-spin text-cream-600 mx-auto mb-4",size:48}),e.jsx("p",{className:"text-cream-600",children:"Loading orders..."})]}):Cs.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-cream-200",children:[e.jsx(Ay,{size:48,className:"mx-auto mb-4 opacity-50 text-cream-400"}),e.jsx("p",{className:"text-cream-600",children:"No orders found."})]}):e.jsx("div",{className:"space-y-4",children:Cs.map(c=>{var b,N,S,T,U,G,Y,K;return c.product?e.jsxs("div",{className:"bg-white rounded-lg border border-cream-200 p-4 sm:p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4 pb-4 border-b border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:((S=c.product)==null?void 0:S.image)||rc,alt:((T=c.product)==null?void 0:T.name)||"Product",className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-lg border border-cream-200",onError:ce=>{const De=ce.target;De.src=rc}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 text-lg",children:((U=c.product)==null?void 0:U.name)||"Unknown Product"}),e.jsxs("p",{className:"text-sm text-cream-600 font-semibold",children:["Order #",c.orderNumber]}),e.jsxs("p",{className:"text-xs text-cream-500 mt-1",children:[((G=c.user)==null?void 0:G.name)||"Unknown"," (",((Y=c.user)==null?void 0:Y.email)||"Unknown",")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`px-4 py-2 rounded-full border-2 flex items-center gap-2 ${c.status==="completed"?"bg-green-100 text-green-800 border-green-200":c.status==="processing"?"bg-blue-100 text-blue-800 border-blue-200":c.status==="approved"?"bg-purple-100 text-purple-800 border-purple-200":c.status==="production_ready"?"bg-orange-100 text-orange-800 border-orange-200":c.status==="request"?"bg-yellow-100 text-yellow-800 border-yellow-200":c.status==="rejected"?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:e.jsx("span",{className:"text-sm font-semibold capitalize",children:c.status})}),c.currentDepartment&&typeof c.currentDepartment=="object"&&e.jsxs("div",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg border border-indigo-200 flex items-center gap-2",children:[e.jsx(Fn,{size:14}),e.jsxs("span",{className:"text-xs font-medium",children:["Current: ",c.currentDepartment.name,c.currentDepartmentIndex!==null&&c.currentDepartmentIndex!==void 0&&e.jsxs("span",{className:"ml-1 text-indigo-500",children:["(#",c.currentDepartmentIndex+1,")"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Quantity"}),e.jsxs("p",{className:"font-bold text-cream-900",children:[c.quantity," units"]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Finish"}),e.jsx("p",{className:"font-bold text-cream-900",children:c.finish})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Shape"}),e.jsx("p",{className:"font-bold text-cream-900",children:c.shape})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Total Price"}),e.jsxs("p",{className:"font-bold text-cream-900",children:["",c.totalPrice.toFixed(2)]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Mobile"}),e.jsx("p",{className:"font-bold text-cream-900 text-xs",children:c.mobileNumber||"N/A"})]})]}),c.selectedOptions&&c.selectedOptions.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-cream-600 mb-2",children:"Selected Options"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.selectedOptions.map((ce,De)=>e.jsx("span",{className:"px-2 py-1 bg-cream-100 text-cream-800 rounded text-xs",children:typeof ce=="string"?ce:ce.optionName},De))})]}),((K=c.uploadedDesign)==null?void 0:K.frontImage)&&e.jsxs("div",{className:"mb-4 p-3 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsxs("p",{className:"text-xs font-medium text-cream-700 mb-2 flex items-center gap-2",children:[e.jsx(Pi,{size:14}),"Uploaded Front Design"]}),e.jsx("img",{src:c.uploadedDesign.frontImage.data||rc,alt:"Front design",className:"w-full max-h-48 object-contain rounded border border-cream-300 bg-white",onError:ce=>{var Et;const De=ce.target;De.style.display="none";const Ze=document.createElement("div");Ze.className="w-full h-48 flex items-center justify-center bg-red-50 text-red-600 rounded border border-red-200 text-sm",Ze.textContent="Failed to load image",(Et=De.parentElement)==null||Et.appendChild(Ze)}})]}),c.notes&&e.jsxs("div",{className:"mb-4 p-2 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-1",children:"Customer Notes:"}),e.jsx("p",{className:"text-xs text-blue-900 line-clamp-2",children:c.notes})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>{Je(c),We({status:c.status,deliveryDate:c.deliveryDate?new Date(c.deliveryDate).toISOString().split("T")[0]:"",adminNotes:c.adminNotes||""}),it(!0)},className:"flex-1 px-4 py-2.5 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2 font-medium",children:[e.jsx(zr,{size:16}),c.status!=="cancelled"?"View & Manage":"View Details"]}),c.status==="request"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>gl(c._id,"production_ready"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Va,{size:16}),"Production Ready"]}),e.jsxs("button",{onClick:()=>Bc(c._id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ol,{size:16}),"Reject"]})]}),c.status==="production_ready"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{type:"date",value:c.deliveryDate?new Date(c.deliveryDate).toISOString().split("T")[0]:"",onChange:ce=>{const De=ce.target.value;De&&gl(c._id,void 0,void 0,De)},className:"px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 text-sm",placeholder:"Delivery Date"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>gl(c._id,void 0,"start_production"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(bo,{size:16}),"Start"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to cancel this order?")&&gl(c._id,"cancelled")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ol,{size:16}),"Cancel"]})]})]})})]}),e.jsxs("div",{className:"text-xs text-cream-500 pt-2 border-t border-cream-100",children:["Ordered: ",r?new Date(c.createdAt).toLocaleString():"Loading...",c.deliveryDate&&e.jsxs("span",{className:"ml-4",children:["Delivery: ",r?new Date(c.deliveryDate).toLocaleDateString():"Loading..."]})]})]},c._id):e.jsx("div",{className:"bg-white rounded-lg border border-cream-200 p-4 sm:p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-200 rounded-lg border border-cream-200 flex items-center justify-center",children:e.jsx(ia,{size:24,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 text-lg",children:"Product Not Found"}),e.jsxs("p",{className:"text-sm text-cream-600 font-semibold",children:["Order #",c.orderNumber]}),e.jsxs("p",{className:"text-xs text-cream-500 mt-1",children:[((b=c.user)==null?void 0:b.name)||"Unknown"," (",((N=c.user)==null?void 0:N.email)||"Unknown",")"]})]})]})},c._id)})})]}),n==="uploads"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Uploaded Images (",nt.length,")"]}),e.jsx("button",{onClick:()=>si(!1),disabled:vt,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:vt?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:16}),"Loading..."]}):"Refresh"})]}),vt?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Jt,{className:"animate-spin text-cream-600 mx-auto mb-4",size:48}),e.jsx("p",{className:"text-cream-600",children:"Loading uploaded images..."})]}):nt.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(Pi,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No uploaded images yet"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:nt.map(c=>e.jsxs("div",{className:"border border-cream-300 rounded-lg overflow-hidden hover:shadow-lg transition-shadow relative bg-white",children:[e.jsxs("div",{className:"cursor-pointer",onClick:()=>{Le(c),Re(!0)},children:[c.frontImage?e.jsxs("div",{className:"aspect-video bg-cream-100 relative group",children:[ut[`front-${c._id}`]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cream-100 z-10",children:e.jsx(Jt,{className:"animate-spin text-cream-600",size:24})}),e.jsx("img",{src:ro(c.frontImage.data,c.frontImage.contentType)||rc,alt:c.frontImage.filename,className:`w-full h-full object-cover ${ut[`front-${c._id}`]?"opacity-0":"opacity-100"} transition-opacity`,onLoad:()=>Gt(b=>({...b,[`front-${c._id}`]:!1})),onError:b=>{var T;Gt(U=>({...U,[`front-${c._id}`]:!1}));const N=b.target;N.style.display="none";const S=document.createElement("div");S.className="absolute inset-0 flex items-center justify-center bg-red-50 text-red-600 text-xs p-2",S.textContent="Failed to load image",(T=N.parentElement)==null||T.appendChild(S)},onLoadStart:()=>Gt(b=>({...b,[`front-${c._id}`]:!0}))}),e.jsx("button",{onClick:b=>{b.stopPropagation(),ks(c.frontImage.data,c.frontImage.filename||"image.jpg")},className:"absolute top-2 left-2 p-2 bg-cream-900/80 text-white rounded-lg hover:bg-cream-900 transition-colors opacity-0 group-hover:opacity-100 flex items-center gap-1 shadow-md z-20",title:"Download image",children:e.jsx(ki,{size:14})})]}):e.jsx("div",{className:"aspect-video bg-cream-100 flex items-center justify-center",children:e.jsx("p",{className:"text-cream-400 text-sm",children:"No image"})}),e.jsxs("div",{className:"p-3 sm:p-4",children:[e.jsx("p",{className:"font-semibold text-sm sm:text-base text-cream-900 truncate",children:c.user.name}),e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 truncate",children:c.user.email}),e.jsxs("p",{className:"text-xs text-cream-500 mt-2",children:[c.width,"  ",c.height,"px"]}),e.jsx("p",{className:"text-xs text-cream-500",children:r?new Date(c.createdAt).toLocaleDateString():"Loading..."})]})]}),e.jsx("button",{onClick:b=>{b.stopPropagation(),pa(c._id)},disabled:d,className:"absolute top-2 right-2 p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-1 shadow-md z-20",title:"Delete upload",children:d?e.jsx(Jt,{className:"animate-spin",size:14}):e.jsx(ra,{size:16})})]},c._id))})]}),n==="manage-products"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900 mb-2",children:["Products (",cs.length,")"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1 sm:max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(an,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-cream-500",size:18}),e.jsx("input",{type:"text",placeholder:"Search products by name, description, or subcategory...",value:ns,onChange:c=>Rs(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 text-sm"}),ns&&e.jsx("button",{onClick:()=>Rs(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-cream-500 hover:text-cream-700",children:e.jsx(ss,{size:16})})]})}),e.jsx("div",{className:"flex-1 sm:max-w-xs",children:e.jsx(Da,{label:"Filter by Category",value:gs||"",onChange:c=>mu(c),options:[{value:"",label:"All Products"},...He.map(c=>{const b=(T,U=[])=>{if(!T.parent)return[T.name,...U];const G=He.find(Y=>Y._id===(typeof T.parent=="object"&&T.parent!==null?T.parent._id:T.parent));return G?b(G,[T.name,...U]):[T.name,...U]},S=b(c).join(" > ");return{value:c._id,label:`${S} (${c.type})`}})],className:"w-full"})}),(gs||ns)&&e.jsxs("button",{onClick:async()=>{la(""),Rs(""),await Ur()},className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2 whitespace-nowrap",children:[e.jsx(ss,{size:16}),"Clear Filters"]})]})]}),e.jsxs("button",{onClick:async()=>{la(""),Rs(""),await Ur()},className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors whitespace-nowrap flex items-center gap-2",children:[e.jsx(ia,{size:16}),"Refresh"]})]}),Sr||lr?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Jt,{className:"animate-spin text-cream-600 mb-4",size:32}),e.jsx("p",{className:"text-cream-600",children:Sr?"Loading products...":"Filtering products..."})]}):cs.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(ia,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:gs||ns?"No products found matching your filters":"No products yet"})]}):e.jsx("div",{className:"space-y-4",children:cs.map(c=>{let b="No Category",N="",S="";if(c.subcategory){const U=c.subcategory&&typeof c.subcategory=="object"?c.subcategory._id:c.subcategory,G=_t.find(Y=>Y._id===U);if(G){N=G.name||"";const Y=typeof G.category=="object"&&G.category!==null?G.category._id:G.category;if(Y){const K=He.find(ce=>{const De=typeof Y=="string"?Y:typeof Y=="object"&&(Y!=null&&Y._id)?Y._id:"";return ce._id===De});K&&(b=K.name||"No Category",S=K.type||"")}}else if(c.subcategory&&typeof c.subcategory=="object"&&c.subcategory.name&&(N=c.subcategory.name,c.subcategory&&typeof c.subcategory=="object"&&c.subcategory.category)){const Y=c.subcategory.category,K=Y&&typeof Y=="object"&&"_id"in Y?Y:typeof Y=="string"?He.find(ce=>ce._id===Y):null;K&&typeof K=="object"&&"_id"in K&&(b=K.name||"No Category",S=("type"in K&&typeof K.type=="string"?K.type:"")||"")}}else if(c.category){const U=c.category&&typeof c.category=="object"?c.category._id:typeof c.category=="string"?c.category:"",G=He.find(Y=>Y._id===String(U));G?(b=G.name||"No Category",S=G.type||""):c.category&&typeof c.category=="object"&&"_id"in c.category&&"name"in c.category&&(b=c.category.name||"No Category",S=("type"in c.category&&typeof c.category.type=="string"?c.category.type:"")||"")}const T=N?`${b} > ${N}`:`${b} (Direct)`;return e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 flex items-center justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-cream-900",children:c.name}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Category: ",T]}),S&&e.jsxs("p",{className:"text-xs text-cream-500",children:["Type: ",S]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>Si(c._id),disabled:d,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(zn,{size:18}),"Edit"]}),e.jsxs("button",{onClick:()=>no(c._id),disabled:d,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(ra,{size:18}),"Delete"]})]})]},c._id)})})]}),n==="manage-categories"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Categories (",xt.length," of ",He.length,")"]}),e.jsx("button",{onClick:Sa,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Refresh"})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(an,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search categories by name, description, or type...",value:Vs,onChange:c=>Ks(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"}),Vs&&e.jsx("button",{onClick:()=>Ks(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cream-500 hover:text-cream-700",children:e.jsx(ss,{size:18})})]}),e.jsx("div",{className:"sm:w-48",children:e.jsx(Da,{label:"Filter by Type",value:Gs,onChange:c=>ha(c),options:[{value:"all",label:"All Types"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"})}),e.jsx("div",{className:"sm:w-48",children:e.jsx(Da,{label:"Filter by Level",value:$a,onChange:c=>ir(c),options:[{value:"all",label:Gs!=="all"?`All ${Gs} Categories`:"All Categories"},{value:"top-level",label:Gs!=="all"?`Top-Level ${Gs}`:"Top-Level Only"},{value:"subcategories",label:Gs!=="all"?`${Gs} Subcategories`:"Subcategories Only"}],className:"w-full"})})]}),(Vs||Gs!=="all"||$a!=="all")&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-cream-600",children:"Active filters:"}),Vs&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-sm flex items-center gap-2",children:['Search: "',Vs,'"',e.jsx("button",{onClick:()=>Ks(""),className:"hover:text-red-600",children:e.jsx(ss,{size:14})})]}),Gs!=="all"&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-sm flex items-center gap-2",children:["Type: ",Gs,e.jsx("button",{onClick:()=>ha("all"),className:"hover:text-red-600",children:e.jsx(ss,{size:14})})]}),$a!=="all"&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-sm flex items-center gap-2",children:["Level: ",$a==="top-level"?"Top-Level":"Subcategories",e.jsx("button",{onClick:()=>ir("all"),className:"hover:text-red-600",children:e.jsx(ss,{size:14})})]}),e.jsx("button",{onClick:()=>{Ks(""),ha("all"),ir("all")},className:"text-sm text-cream-600 hover:text-cream-900 underline",children:"Clear all filters"})]})]}),He.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(qp,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No categories yet"})]}):xt.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(an,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No categories match your search criteria"}),e.jsx("button",{onClick:()=>{Ks(""),ha("all"),ir("all")},className:"mt-4 text-cream-900 hover:underline",children:"Clear filters"})]}):e.jsxs("div",{ref:zt,className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 scroll-smooth",style:{scrollBehavior:"auto"},onDragOver:c=>{c.preventDefault(),oe&&so(c,zt.current)},onDragEnter:c=>{c.preventDefault(),oe&&so(c,zt.current)},onDragLeave:c=>{var N;const b=c.relatedTarget;!((N=zt.current)!=null&&N.contains(b))&&b!==zt.current&&dn()},children:[e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 font-medium flex items-center gap-2",children:[e.jsx(_r,{size:16})," Drag and drop categories to reorder them. Changes will be saved after confirmation."]})}),xt.map((c,b)=>{const N=c.displayLevel||0,S=c.isSubcategory||N>0;let T="";if(S){const U=c.parent||(c.category&&typeof c.category=="object"?c.category._id:c.category);if(U){const G=He.find(Y=>Y._id===U);T=G?G.name:"Unknown"}}return e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{draggable:!0,onDragStart:U=>{be(c._id),U.dataTransfer.effectAllowed="move",U.dataTransfer.setData("text/plain",c._id)},onDragOver:U=>{U.preventDefault(),U.stopPropagation(),U.dataTransfer.dropEffect="move";const G=U.currentTarget;oe!==c._id&&(G.style.opacity="0.5"),oe&&so(U,zt.current)},onDragLeave:U=>{U.currentTarget.style.opacity="1"},onDrop:U=>{U.preventDefault(),U.currentTarget.style.opacity="1";const G=U.dataTransfer.getData("text/plain");if(G&&G!==c._id){const Y=xt.find(Ze=>Ze._id===G),K=c,ce=Y&&(Y.isSubcategory||Y.displayLevel>0),De=K.isSubcategory||K.displayLevel>0;if(ce||De){Lc(G,c._id);return}zc(G,c._id)}},onDragEnd:U=>{U.currentTarget.style.opacity="1",dn(),setTimeout(()=>{be(null)},100)},className:`border border-cream-300 rounded-lg p-4 flex items-center justify-between hover:shadow-md transition-shadow cursor-move ${oe===c._id?"opacity-50":""} ${N>0?"bg-cream-50":"bg-white"}`,style:{marginLeft:`${N*24}px`},onClick:U=>{oe||xl(c._id)},children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[N>0&&e.jsx("div",{className:"flex items-center",children:e.jsx(Xa,{size:16,className:"text-cream-400"})}),e.jsx("div",{className:"cursor-move text-cream-400 hover:text-cream-600",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M7 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 2zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 14zm6-8a2 2 0 1 1-.001-4.001A2 2 0 0 1 13 6zm0 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 14z"})})}),e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-cream-900",children:c.name}),S&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Subcategory"}),!S&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Top-level"}),Ys===c._id&&e.jsxs("span",{className:"text-xs bg-cream-200 text-cream-900 px-2 py-1 rounded-full",children:[ca.length," child categor",ca.length===1?"y":"ies"]})]}),S&&T&&e.jsxs("p",{className:"text-xs text-cream-500 mt-1",children:["Parent: ",T]}),e.jsxs("p",{className:"text-xs text-cream-500",children:["Type: ",c.type," | Sort Order: ",c.sortOrder||0]}),c.slug&&e.jsxs("p",{className:"text-xs text-cream-500",children:["Slug: ",c.slug]}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Click to view products | Drag handle to reorder"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:U=>{U.stopPropagation(),vn({isOpen:!0,type:"category",name:c.name,description:c.description||"No description available."})},disabled:d,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(zr,{size:18}),"View"]}),S?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:U=>{U.stopPropagation(),ai(c._id)},disabled:d,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(zn,{size:18}),"Edit"]}),e.jsxs("button",{onClick:U=>{U.stopPropagation(),mn(c._id)},disabled:d,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(ra,{size:18}),"Delete"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:U=>{U.stopPropagation(),bl(c._id)},disabled:d,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(zn,{size:18}),"Edit"]}),e.jsxs("button",{onClick:U=>{U.stopPropagation(),ri(c._id)},disabled:d,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(ra,{size:18}),"Delete"]})]})]})]})},c._id)}),Ys&&(()=>{var b,N;const c=He.find(S=>S._id===Ys);return c?e.jsxs("div",{className:"mt-6 space-y-3 border-t-2 border-cream-300 pt-6 bg-cream-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900",children:["Products in: ",c.name]}),e.jsx("button",{onClick:()=>es(null),className:"text-cream-600 hover:text-cream-900",children:e.jsx(ss,{size:20})})]}),e.jsxs("div",{className:"mb-4 flex gap-3",children:[e.jsxs("button",{onClick:S=>{S.stopPropagation(),Ts?ji(Ys,Ts):ji(Ys)},className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:18}),Ts?`Add Product to ${((b=ca.find(S=>S._id===Ts))==null?void 0:b.name)||"Subcategory"}`:"Add Product to this Category"]}),!Ts&&e.jsxs("button",{onClick:S=>{S.stopPropagation(),Vi(Ys||"")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:18}),"Add Subcategory to this Category"]})]}),Ts&&e.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-blue-800 font-medium",children:["Showing products from: ",((N=ca.find(S=>S._id===Ts))==null?void 0:N.name)||"Subcategory"]}),e.jsx("button",{onClick:S=>{S.stopPropagation(),Ga(null),xl(Ys||"")},className:"mt-1 text-xs text-blue-600 hover:text-blue-800 underline",children:"Show all products from category and subcategories"})]}),e.jsxs("button",{onClick:S=>{S.stopPropagation(),Ys&&Ts&&ji(Ys,Ts)},className:"px-3 py-1.5 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1",children:[e.jsx(Zs,{size:14}),"Add Product to this Subcategory"]})]})}),ze?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Jt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-2 text-cream-600",children:"Loading products..."})]}):Sn.length===0?e.jsx("div",{className:"text-center py-4 text-cream-600 text-sm bg-white rounded-lg",children:ca.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No products found directly in this category"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:Ts?"No products found in this subcategory. Click 'Add Product to this Category' to create one.":"Click on a subcategory above to view its products, or click 'Add Product to this Category' to add products directly to this category."})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No products found in this category"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:'Click "Add Product to this Category" to create one'})]})}):e.jsx("div",{className:"space-y-2",children:Sn.map(S=>e.jsxs("div",{className:"border border-cream-200 rounded-lg p-3 bg-white hover:shadow-sm transition-shadow flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[S.image&&S.image.trim()!==""&&e.jsx("img",{src:S.image,alt:S.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-cream-900 text-sm",children:S.name}),e.jsx("p",{className:"text-xs text-cream-600 line-clamp-1",children:S.description||"No description"})]})]}),e.jsxs("button",{onClick:T=>{T.stopPropagation(),Si(S._id)},className:"px-3 py-1.5 text-xs bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-1",children:[e.jsx(zn,{size:14}),"Edit"]})]},S._id))}),ca.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200",children:[e.jsxs("p",{className:"text-xs text-cream-500 mb-2 font-medium",children:["Subcategories (",ca.length,") - Drag to reorder, click to view products:"]}),e.jsxs("div",{className:"space-y-2",children:[(()=>{const S=(T,U=0)=>{const G=T.children&&T.children.length>0;return e.jsxs("div",{children:[e.jsx("div",{draggable:!0,onDragStart:Y=>{rt(T._id),Y.dataTransfer.effectAllowed="move",Y.dataTransfer.setData("text/plain",T._id)},onDragOver:Y=>{Y.preventDefault(),Y.stopPropagation(),Y.dataTransfer.dropEffect="move";const K=Y.currentTarget;Te&&Te!==T._id&&(K.style.opacity="0.5",K.style.borderColor="#d97706")},onDragEnter:Y=>{Y.preventDefault(),Y.stopPropagation(),Te&&Te!==T._id&&(Y.currentTarget.style.borderColor="#d97706")},onDragLeave:Y=>{Y.currentTarget.style.opacity="1",Y.currentTarget.style.borderColor=""},onDrop:Y=>{Y.preventDefault(),Y.stopPropagation(),Y.currentTarget.style.opacity="1",Y.currentTarget.style.borderColor="";const K=Y.dataTransfer.getData("text/plain");K&&K!==T._id&&Lc(K,T._id)},onDragEnd:Y=>{Y.currentTarget.style.opacity="1",rt(null)},className:`text-sm pl-3 py-2 rounded-lg border transition-colors cursor-move ${Ts===T._id?"bg-cream-200 border-cream-400 text-cream-900 font-medium":"bg-white border-cream-200 text-cream-700 hover:bg-cream-100 hover:border-cream-300"} ${Te===T._id?"opacity-50":""}`,style:{marginLeft:`${U*20}px`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"cursor-move text-cream-400 hover:text-cream-600",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M7 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 2zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 14zm6-8a2 2 0 1 1-.001-4.001A2 2 0 0 1 13 6zm0 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 14z"})})}),e.jsxs("div",{onClick:Y=>Bi(T._id,Y),className:"flex items-center gap-2 flex-1 cursor-pointer",children:[e.jsx(Xa,{size:14,className:`transition-transform ${Ts===T._id?"rotate-90":""}`}),e.jsx("span",{children:T.name}),U>0&&e.jsx("span",{className:"text-xs text-purple-600 font-medium",children:"(nested)"}),T.sortOrder!==void 0&&T.sortOrder!==null&&e.jsxs("span",{className:"text-xs text-cream-500",children:["(Order: ",T.sortOrder,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Ts===T._id&&e.jsxs("span",{className:"text-xs text-cream-600 mr-2",children:[Sn.length," product",Sn.length!==1?"s":""]}),e.jsx("button",{onClick:Y=>{Y.stopPropagation(),vn({isOpen:!0,type:"subcategory",name:T.name,description:T.description||"No description available."})},disabled:d,className:"px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors disabled:opacity-50 flex items-center gap-1",title:"View Description",children:e.jsx(zr,{size:14})}),e.jsx("button",{onClick:async Y=>{Y.stopPropagation(),Y.preventDefault();try{await ai(T._id)}catch(K){console.error("Error editing subcategory:",K),p("Failed to load subcategory for editing")}},disabled:d,className:"px-2 py-1 bg-cream-200 text-cream-900 rounded hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-1",title:"Edit Subcategory",children:e.jsx(zn,{size:14})}),e.jsx("button",{onClick:Y=>{Y.stopPropagation(),mn(T._id)},disabled:d,className:"px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-1",title:"Delete Subcategory",children:e.jsx(ra,{size:14})})]})]})}),G&&e.jsx("div",{className:"mt-1",children:T.children.sort((Y,K)=>(Y.sortOrder||0)-(K.sortOrder||0)).map(Y=>S(Y,U+1))})]},T._id)};return ca.sort((T,U)=>(T.sortOrder||0)-(U.sortOrder||0)).map(T=>S(T,0))})(),!1]})]})]}):null})()]})]}),n==="attribute-types"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:Ws?"Edit Attribute Type":"Create Attribute Type"}),e.jsxs("form",{onSubmit:wi,className:"space-y-6 bg-white p-6 rounded-lg border border-cream-200",children:[u&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:u})}),g&&e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 font-medium",children:g})}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Name * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(What customers will see)"})]}),e.jsx("input",{type:"text",id:"attribute-name",value:ee.attributeName,onChange:c=>{bt({...ee,attributeName:c.target.value}),D.attributeName&&k({...D,attributeName:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${D.attributeName?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Printing Option, Paper Type",required:!0}),D.attributeName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.attributeName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["How Customers Select This * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Input method)"})]}),e.jsxs("select",{id:"attribute-inputStyle",value:ee.inputStyle,onChange:c=>{bt({...ee,inputStyle:c.target.value}),D.inputStyle&&k({...D,inputStyle:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${D.inputStyle?"border-red-300 bg-red-50":"border-cream-300"}`,required:!0,children:[e.jsx("option",{value:"DROPDOWN",children:"Dropdown Menu"}),e.jsx("option",{value:"POPUP",children:"Pop-Up"}),e.jsx("option",{value:"RADIO",children:"Radio Buttons"}),e.jsx("option",{value:"CHECKBOX",children:"Checkbox"}),e.jsx("option",{value:"TEXT_FIELD",children:"Text Field"}),e.jsx("option",{value:"NUMBER",children:"Number Input"}),e.jsx("option",{value:"FILE_UPLOAD",children:"File Upload"})]}),D.inputStyle&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.inputStyle})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Image ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(to be shown when selecting this attribute)"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:c=>{var N;const b=((N=c.target.files)==null?void 0:N[0])||null;if(b){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(b.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),c.target.value="",bt({...ee,attributeImage:null});return}const T=5*1024*1024;if(b.size>T){p("Image size must be less than 5MB. Please compress the image and try again."),c.target.value="",bt({...ee,attributeImage:null});return}p(null)}bt({...ee,attributeImage:b})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent"}),ee.attributeImage&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:URL.createObjectURL(ee.attributeImage),alt:"Attribute preview",className:"w-32 h-32 object-cover rounded-lg border border-cream-300"}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[ee.attributeImage.name," (",(ee.attributeImage.size/1024).toFixed(2)," KB)"]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["What This Affects * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Description of impact on product)"})]}),e.jsx("textarea",{id:"attribute-primaryEffectType",value:ee.effectDescription,onChange:c=>{bt({...ee,effectDescription:c.target.value}),D.primaryEffectType&&k({...D,primaryEffectType:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${D.primaryEffectType?"border-red-300 bg-red-50":"border-cream-300"}`,rows:3,placeholder:"e.g., Changes the product price, Requires customer to upload a file, Creates different product versions, Just displays information",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Describe how this attribute affects the product or customer experience"}),D.primaryEffectType&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.primaryEffectType})]})]}),ee.inputStyle==="DROPDOWN"||ee.inputStyle==="RADIO"||ee.isPriceEffect?e.jsxs("div",{className:"border-b border-cream-200 pb-4","data-attribute-options-table":!0,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Options"}),e.jsxs("button",{type:"button",onClick:()=>{bt({...ee,attributeOptionsTable:[...ee.attributeOptionsTable,{name:"",priceImpactPer1000:"",image:void 0,optionUsage:{price:!1,image:!1,listing:!1},priceImpact:"",numberOfImagesRequired:0,listingFilters:""}]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:16}),"Add Option"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:ee.attributeOptionsTable.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No options added. Click "Add Option" to start.'}):e.jsxs("div",{className:"overflow-x-auto",children:[D.attributeValues&&e.jsx("div",{className:"mb-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:D.attributeValues})}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Name *"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Usage *"}),ee.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.price})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Impact"}),ee.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.image})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Number of Images Required"}),ee.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.listing})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Listing Filters"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Image (Optional)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:(ee.attributeOptionsTable||[]).map((c,b)=>{var N,S,T,U,G,Y;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:c.name,onChange:K=>{const ce=[...ee.attributeOptionsTable];ce[b].name=K.target.value,bt({...ee,attributeOptionsTable:ce})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Both Sides, Express Delivery",required:!0})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((N=c.optionUsage)==null?void 0:N.price)||!1,onChange:K=>{const ce=[...ee.attributeOptionsTable];if(ce[b].optionUsage||(ce[b].optionUsage={price:!1,image:!1,listing:!1}),ce[b].optionUsage.price=K.target.checked,!K.target.checked&&!ce[b].optionUsage.image&&!ce[b].optionUsage.listing){p("At least one option usage must be selected (Price, Image, or Listing)");return}bt({...ee,attributeOptionsTable:ce}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Price"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((S=c.optionUsage)==null?void 0:S.image)||!1,onChange:K=>{const ce=[...ee.attributeOptionsTable];if(ce[b].optionUsage||(ce[b].optionUsage={price:!1,image:!1,listing:!1}),ce[b].optionUsage.image=K.target.checked,!K.target.checked&&!ce[b].optionUsage.price&&!ce[b].optionUsage.listing){p("At least one option usage must be selected (Price, Image, or Listing)");return}bt({...ee,attributeOptionsTable:ce}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Image"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((T=c.optionUsage)==null?void 0:T.listing)||!1,onChange:K=>{const ce=[...ee.attributeOptionsTable];if(ce[b].optionUsage||(ce[b].optionUsage={price:!1,image:!1,listing:!1}),ce[b].optionUsage.listing=K.target.checked,!K.target.checked&&!ce[b].optionUsage.price&&!ce[b].optionUsage.image){p("At least one option usage must be selected (Price, Image, or Listing)");return}bt({...ee,attributeOptionsTable:ce}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Listing"})]})]})}),ee.attributeOptionsTable.some(K=>{var ce;return(ce=K.optionUsage)==null?void 0:ce.price})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(U=c.optionUsage)!=null&&U.price?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-cream-700",children:""}),e.jsx("input",{type:"number",value:c.priceImpact||"",onChange:K=>{const ce=[...ee.attributeOptionsTable];ce[b].priceImpact=K.target.value,bt({...ee,attributeOptionsTable:ce})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter amount",step:"0.01",min:"0"})]}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),ee.attributeOptionsTable.some(K=>{var ce;return(ce=K.optionUsage)==null?void 0:ce.image})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(G=c.optionUsage)!=null&&G.image?e.jsx("input",{type:"number",value:c.numberOfImagesRequired||0,onChange:K=>{const ce=[...ee.attributeOptionsTable];ce[b].numberOfImagesRequired=parseInt(K.target.value)||0,bt({...ee,attributeOptionsTable:ce})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Number of images",min:"0"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),ee.attributeOptionsTable.some(K=>{var ce;return(ce=K.optionUsage)==null?void 0:ce.listing})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(Y=c.optionUsage)!=null&&Y.listing?e.jsx("input",{type:"text",value:c.listingFilters||"",onChange:K=>{const ce=[...ee.attributeOptionsTable];ce[b].listingFilters=K.target.value,bt({...ee,attributeOptionsTable:ce})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter filters (comma-separated)"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:async K=>{var De;const ce=(De=K.target.files)==null?void 0:De[0];if(ce){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(ce.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image.");return}if(ce.size>5*1024*1024){p("Image size must be less than 5MB.");return}try{m(!0);const Et=new FormData;Et.append("image",ce);const Qt=await fetch(`${we}/upload-image`,{method:"POST",headers:Ot(),body:Et});if(!Qt.ok){const Zt=await Qt.json().catch(()=>({}));throw new Error(Zt.error||"Failed to upload image")}const Dt=await Qt.json(),Pt=Dt.url||Dt.secure_url;if(!Pt)throw new Error("No image URL returned from server");const Tt=[...ee.attributeOptionsTable];Tt[b].image=Pt,bt({...ee,attributeOptionsTable:Tt}),p(null)}catch(Et){console.error("Error uploading image:",Et),p(Et instanceof Error?Et.message:"Failed to upload image. Please try again.")}finally{m(!1)}}},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm"}),c.image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded border border-cream-200"}),e.jsx("button",{type:"button",onClick:()=>{const K=[...ee.attributeOptionsTable];K[b].image=void 0,bt({...ee,attributeOptionsTable:K})},className:"mt-1 text-xs text-red-600 hover:text-red-800",children:"Remove"})]})]}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>{const K=ee.attributeOptionsTable.filter((ce,De)=>De!==b);bt({...ee,attributeOptionsTable:K})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})})]},b)})})]})]})}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Add all options customers can choose from. If "Is Price Effect" is checked, enter the price impact per 1000 units for each option.'})]}):null,e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Additional Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isPriceEffect,onChange:c=>bt({...ee,isPriceEffect:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Price Effect?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if selecting this attribute changes the product price"}),ee.isPriceEffect&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Price Effect Amount ( per 1000 units) *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg text-cream-700",children:""}),e.jsx("input",{type:"number",value:ee.priceEffectAmount,onChange:c=>bt({...ee,priceEffectAmount:c.target.value}),className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg",placeholder:"e.g., 20 (means +20 per 1000 units)",step:"0.00001",min:"0",required:ee.isPriceEffect}),e.jsx("span",{className:"text-sm text-cream-600",children:"per 1000 units"})]}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Enter how much the price changes per 1000 units. Example: "20" means +20 for every 1000 units.'})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isStepQuantity,onChange:c=>bt({...ee,isStepQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Step Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific steps (e.g., 1000, 2000, 3000 only)"}),ee.isStepQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Steps:"}),e.jsxs("button",{type:"button",onClick:()=>{bt({...ee,stepQuantities:[...ee.stepQuantities,{quantity:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Zs,{size:14}),"Add Step"]})]}),ee.stepQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No steps added. Click "Add Step" to start.'}):e.jsx("div",{className:"space-y-2",children:ee.stepQuantities.map((c,b)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Step - ",b+1,":"]}),e.jsx("input",{type:"number",value:c.quantity,onChange:N=>{const S=[...ee.stepQuantities];S[b].quantity=N.target.value,bt({...ee,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"quantity of step",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...ee.stepQuantities];S[b].price=N.target.value,bt({...ee,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of step",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=ee.stepQuantities.filter((S,T)=>T!==b);bt({...ee,stepQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})]},b))})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isRangeQuantity,onChange:c=>bt({...ee,isRangeQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Range Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific Range (e.g., 1000-2000, 2000-5000)"}),ee.isRangeQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Ranges:"}),e.jsxs("button",{type:"button",onClick:()=>{bt({...ee,rangeQuantities:[...ee.rangeQuantities,{min:"",max:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Zs,{size:14}),"Add Range"]})]}),ee.rangeQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No ranges added. Click "Add Range" to start.'}):e.jsx("div",{className:"space-y-2",children:ee.rangeQuantities.map((c,b)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Range - ",b+1,":"]}),e.jsx("input",{type:"number",value:c.min,onChange:N=>{const S=[...ee.rangeQuantities];S[b].min=N.target.value,bt({...ee,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"min quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700",children:"-"}),e.jsx("input",{type:"number",value:c.max,onChange:N=>{const S=[...ee.rangeQuantities];S[b].max=N.target.value,bt({...ee,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"max quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...ee.rangeQuantities];S[b].price=N.target.value,bt({...ee,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of range",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=ee.rangeQuantities.filter((S,T)=>T!==b);bt({...ee,rangeQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})]},b))})]})]})]})]})]}),ee.primaryEffectType==="FILE"&&e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"File Requirements"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"File Requirements Description"}),e.jsx("textarea",{value:ee.fileRequirements,onChange:c=>bt({...ee,fileRequirements:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg",rows:3,placeholder:"e.g., Upload your design file (JPG, PNG, PDF). Minimum 300 DPI recommended."}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:"Describe what type of file customers need to upload and any requirements (format, size, resolution, etc.)"})]})]}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isFilterable,onChange:c=>bt({...ee,isFilterable:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Allow Filtering"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers can filter products by this attribute (e.g., filter by color, size, etc.)"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isRequired,onChange:c=>bt({...ee,isRequired:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Required Selection"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers must select an option before they can place an order"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:ee.isCommonAttribute,onChange:c=>bt({...ee,isCommonAttribute:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Available for All Products"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute can be used with any product. Uncheck to restrict to specific categories/subcategories."})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Saving...":Ws?"Update Attribute Type":"Create Attribute Type"}),Ws&&e.jsx("button",{type:"button",onClick:()=>{Qa(null),bt({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,isFixedQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[]})},className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-cream-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900",children:"All Attribute Types"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:Ta,onChange:c=>Cr(c.target.value),placeholder:"Search attribute types...",className:"pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 w-64"}),e.jsx(an,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500"})]}),e.jsx("div",{className:"text-sm text-cream-600",children:`${gt.filter(b=>{var N,S,T;return!Ta||((N=b.attributeName)==null?void 0:N.toLowerCase().includes(Ta.toLowerCase()))||((S=b.inputStyle)==null?void 0:S.toLowerCase().includes(Ta.toLowerCase()))||((T=b.primaryEffectType)==null?void 0:T.toLowerCase().includes(Ta.toLowerCase()))}).length} of ${gt.length}`})]})]}),dr?e.jsx("div",{className:"text-center py-8",children:e.jsx(Jt,{className:"animate-spin text-cream-900 mx-auto",size:32})}):gt.length===0?e.jsx("div",{className:"text-center py-8 bg-cream-50 rounded-lg border border-cream-200",children:e.jsx("p",{className:"text-cream-600",children:"No attribute types found. Create one above."})}):e.jsx("div",{className:"bg-white rounded-lg border border-cream-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-cream-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Input Style"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Effect Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Pricing"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Common"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-cream-200",children:gt.filter(c=>{var b,N,S;return!Ta||((b=c.attributeName)==null?void 0:b.toLowerCase().includes(Ta.toLowerCase()))||((N=c.inputStyle)==null?void 0:N.toLowerCase().includes(Ta.toLowerCase()))||((S=c.primaryEffectType)==null?void 0:S.toLowerCase().includes(Ta.toLowerCase()))}).map(c=>e.jsxs("tr",{className:"hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900",children:c.attributeName}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.inputStyle}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.primaryEffectType}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.isPricingAttribute?"Yes":"No"}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.isCommonAttribute?"Yes":"No"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>xu(c._id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:e.jsx(zn,{size:16})}),e.jsx("button",{onClick:()=>_o(c._id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})]})})]},c._id))})]})})})]})]}),n==="departments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:ti?"Edit Department":"Create Department"}),e.jsxs("form",{onSubmit:lh,className:"space-y-6 bg-white p-6 rounded-lg border border-cream-200",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Department Name *"}),e.jsx("input",{id:"department-name",name:"name",type:"text",required:!0,value:Ar.name,onChange:c=>{Fi({...Ar,name:c.target.value}),Q.name&&W({...Q,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${Q.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Prepress, Digital Printing"}),Q.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{size:12}),Q.name]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description"}),e.jsx("textarea",{value:Ar.description,onChange:c=>Fi({...Ar,description:c.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"Brief description of department responsibilities"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Ar.isEnabled,onChange:c=>Fi({...Ar,isEnabled:c.target.checked}),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm font-medium text-cream-900",children:"Enabled"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Assign Operators (Optional)"}),e.jsxs("button",{type:"button",onClick:()=>_e(!0),className:"px-3 py-1.5 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1.5",children:[e.jsx(Ed,{size:14}),"Create Employee"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-2",children:"Select employees who can perform actions for this department. Only employees can be assigned. Leave empty to allow all authenticated users."}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-200 rounded-lg p-3",children:ys.length===0?e.jsx("p",{className:"text-sm text-cream-600",children:"No employees available. Create users and mark them as employees first."}):ys.map(c=>{const b=Ar.operators.some(S=>String(S)===String(c._id)),N=er.filter(S=>!S.operators||S.operators.length===0?!1:S.operators.some(T=>{const U=typeof T=="object"&&(T._id||T.id)||String(T);return String(U)===String(c._id)})).map(S=>S.name);return e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-cream-50 border border-cream-200 rounded-lg hover:bg-cream-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:S=>{S.target.checked?Fi({...Ar,operators:[...Ar.operators,c._id]}):Fi({...Ar,operators:Ar.operators.filter(T=>String(T)!==String(c._id))})},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:c.name}),e.jsxs("p",{className:"text-xs text-cream-600",children:[c.email,N.length>0&&e.jsxs("span",{className:"ml-1 text-cream-500",children:["(",N.join(", "),")"]})]})]}),b&&e.jsx(Va,{className:"text-cream-900",size:20})]},c._id)})})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:20}),ti?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{size:20}),ti?"Update Department":"Create Department"]})})]})]}),e.jsxs("div",{className:"border-t border-cream-300 pt-6",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["All Departments (",er.length,")"]}),e.jsx("button",{onClick:Br,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Refresh"})]}),ou?e.jsx("div",{className:"text-center py-8",children:e.jsx(Jt,{className:"animate-spin text-cream-900 mx-auto",size:32})}):er.length===0?e.jsxs("div",{className:"text-center py-8 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx(Fn,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-cream-600",children:"No departments found. Create one above."})]}):e.jsx("div",{className:"bg-white rounded-lg border border-cream-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-cream-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Operators"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-cream-200",children:er.sort((c,b)=>(c.name||"").localeCompare(b.name||"")).map(c=>e.jsxs("tr",{className:"hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900 font-semibold",children:c.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.description||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${c.isEnabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.isEnabled?"Enabled":"Disabled"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.operators&&c.operators.length>0?`${c.operators.length} operator(s)`:"All users"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>kr(c._id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:e.jsx(zn,{size:16})}),e.jsx("button",{onClick:()=>Uc(c._id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ra,{size:16})})]})})]},c._id))})]})})})]})]}),n==="sequences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:Er?"Edit Sequence":"Create Sequence"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Create production sequences for categories/subcategories. Select departments in order - first selected gets sequence 1, second gets 2, etc."}),Er&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Sequence: ",qt.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:()=>{_c(null),pr({name:"",printType:"",category:"",subcategory:"",selectedDepartments:[],selectedAttributes:[]})},className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),e.jsxs("form",{onSubmit:fu,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Sequence Name *"}),e.jsx("input",{id:"sequence-name",name:"name",type:"text",required:!0,value:qt.name,onChange:c=>{pr({...qt,name:c.target.value}),te.name&&ie({...te,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${te.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Standard Printing Sequence"}),te.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{size:12}),te.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Print Type *"}),e.jsx(Da,{id:"sequence-printType",label:"Select Print Type",value:qt.printType,onChange:c=>{pr({...qt,printType:String(c),category:"",subcategory:""}),te.printType&&ie({...te,printType:void 0})},options:[{value:"",label:"Select Print Type"},{value:"digital",label:"Digital Print"},{value:"bulk",label:"Bulk Print"}],className:"w-full"}),te.printType&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(xs,{size:12}),te.printType]})]}),(qt.printType==="digital"||qt.printType==="bulk")&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Category *"}),e.jsx(Da,{id:"sequence-category",label:"Select Category",value:String(qt.category||""),onChange:c=>{pr({...qt,category:String(c),subcategory:""})},options:[{value:"",label:"Select Category"},...He.filter(c=>!c.parent||c.parent===null||typeof c.parent=="object"&&!c.parent._id?qt.printType==="digital"?c.type==="Digital"||c.type==="digital":qt.printType==="bulk"?c.type==="Bulk"||c.type==="bulk":!1:!1).map(c=>({value:c._id,label:c.name}))],className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory ",qt.category?"*":"(Optional)"]}),e.jsx(Da,{label:"Select Subcategory",value:qt.subcategory,onChange:c=>pr({...qt,subcategory:String(c)}),options:[{value:"",label:"Select Subcategory (Optional)"},..._t.filter(c=>{if(!qt.category)return!1;const b=c.category?typeof c.category=="object"&&c.category!==null?c.category._id:c.category:null;return String(b)===String(qt.category)}).sort((c,b)=>(c.sortOrder||0)-(b.sortOrder||0)).map(c=>({value:c._id,label:c.name}))],className:"w-full"})]})]})}),e.jsxs("div",{id:"sequence-departments",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Select Departments (in order) *"}),e.jsxs("button",{type:"button",onClick:()=>ms(!0),className:"px-3 py-1.5 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1.5",children:[e.jsx(Fn,{size:14}),"Create Department"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-3",children:"Check departments in the order they should process. First checked = Sequence 1, second = Sequence 2, etc."}),er.length===0?e.jsx("div",{className:"p-4 bg-cream-50 border border-cream-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:"No departments available. Please create departments first."})}):e.jsx("div",{className:"border border-cream-300 rounded-lg p-4 bg-white max-h-96 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:(er||[]).filter(c=>c.isEnabled).map(c=>{const b=qt.selectedDepartments||[],N=b.includes(c._id),S=b.indexOf(c._id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg transition-colors ${N?"border-green-500 bg-green-50":"border-cream-200 bg-white hover:bg-cream-50"}`,children:[e.jsx("input",{type:"checkbox",checked:N,onChange:()=>Ic(c._id),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-green-500 text-white rounded-full text-xs font-bold",children:S+1}),e.jsx("span",{className:"font-medium text-cream-900",children:c.name})]}),c.operators&&c.operators.length>0&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xs font-medium text-cream-700",children:"Operators:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-0.5",children:c.operators.map(T=>e.jsx("span",{className:"text-xs text-cream-600 bg-cream-100 px-2 py-0.5 rounded",children:T&&typeof T=="object"?T.name:"N/A"},T&&typeof T=="object"?T._id:T))})]}),(!c.operators||c.operators.length===0)&&e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"No operators assigned"})]})]},c._id)})})}),qt.selectedDepartments&&qt.selectedDepartments.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Selected Sequence:"}),e.jsx("div",{className:"space-y-1",children:qt.selectedDepartments.map((c,b)=>{const N=er.find(S=>S._id===c);return N?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-800",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-blue-500 text-white rounded-full text-xs font-bold",children:b+1}),e.jsx("span",{children:N.name})]},c):null})})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Select Attributes (Optional)"}),e.jsx("p",{className:"text-xs text-cream-600 mb-3",children:"Select attribute types that should be automatically assigned when this sequence is used for a product."}),dr?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Jt,{className:"animate-spin text-cream-600",size:20}),e.jsx("span",{className:"ml-2 text-sm text-cream-600",children:"Loading attributes..."})]}):!gt||gt.length===0?e.jsx("div",{className:"p-4 bg-cream-50 border border-cream-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:'No attribute types available. Create attribute types first in the "Attribute Types" tab.'})}):e.jsx("div",{className:"border border-cream-300 rounded-lg p-4 bg-white max-h-96 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:gt.map(c=>{const b=(qt.selectedAttributes||[]).includes(c._id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg transition-colors ${b?"border-green-500 bg-green-50":"border-cream-200 bg-white hover:bg-cream-50"}`,children:[e.jsx("input",{type:"checkbox",checked:b,onChange:N=>{N.target.checked?pr({...qt,selectedAttributes:[...qt.selectedAttributes||[],c._id]}):pr({...qt,selectedAttributes:(qt.selectedAttributes||[]).filter(S=>S!==c._id)})},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-cream-900",children:c.attributeName}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[c.inputStyle||"N/A","  ",c.primaryEffectType||"N/A"," "," ",c.isPricingAttribute?"Affects Price":"No Price Impact"]})]})})})]},c._id)})})}),qt.selectedAttributes&&qt.selectedAttributes.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Selected Attributes:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:qt.selectedAttributes.map(c=>{const b=gt.find(N=>N._id===c);return b?e.jsx("span",{className:"text-xs text-blue-800 bg-blue-100 px-2 py-1 rounded",children:b.attributeName},c):null})})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:20}),Er?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{size:20}),Er?"Update Sequence":"Create Sequence"]})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:"All Sequences"}),du?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Jt,{className:"animate-spin mx-auto mb-4 text-cream-900",size:32}),e.jsx("p",{className:"text-cream-600",children:"Loading sequences..."})]}):!bi||bi.length===0?e.jsxs("div",{className:"text-center py-12 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx(Rr,{size:48,className:"mx-auto mb-4 text-cream-400"}),e.jsx("p",{className:"text-cream-600",children:"No sequences found. Create one to get started!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(bi||[]).map(c=>e.jsxs("div",{className:"bg-white border border-cream-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-cream-900 mb-1",children:c.name}),e.jsxs("p",{className:"text-xs text-cream-600 mb-1",children:["Category: ",c.category&&typeof c.category=="object"&&c.category!==null?c.category.name:"N/A"]}),e.jsxs("p",{className:"text-xs text-cream-600 mb-2",children:["Subcategory: ",c.subcategory&&typeof c.subcategory=="object"&&c.subcategory!==null?c.subcategory.name:"N/A"]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-medium text-cream-700 mb-1",children:"Department Order:"}),e.jsx("div",{className:"space-y-1",children:(c.departments||[]).sort((b,N)=>(b.order||0)-(N.order||0)).map((b,N)=>{const S=typeof b.department=="object"?b.department:er.find(T=>T._id===b.department);return S?e.jsxs("div",{className:"text-xs mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-cream-600 mb-1",children:[e.jsx("span",{className:"flex items-center justify-center w-5 h-5 bg-cream-900 text-white rounded-full text-xs font-bold",children:b.order||N+1}),e.jsx("span",{className:"font-medium",children:S.name})]}),S.operators&&S.operators.length>0?e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-xs font-medium text-cream-700 mb-0.5",children:"Operators:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:S.operators.map(T=>e.jsx("span",{className:"text-xs text-cream-600 bg-cream-100 px-2 py-0.5 rounded",children:T&&typeof T=="object"?T.name:"N/A"},T&&typeof T=="object"?T._id:T))})]}):e.jsx("div",{className:"ml-7",children:e.jsx("p",{className:"text-xs text-cream-500",children:"No operators assigned"})})]},N):null})})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>Mo(c._id),disabled:d,className:"px-3 py-1.5 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2 text-sm",children:[e.jsx(zn,{size:16}),"Edit"]}),e.jsxs("button",{onClick:()=>Hi(c._id),disabled:d,className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2 text-sm",children:[e.jsx(ra,{size:16}),"Delete"]})]})]},c._id))})]})]}),n==="attribute-rules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Attribute Rules (",Kn.length,")"]}),e.jsxs("button",{onClick:()=>{Oo(),Eo(!0)},className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:18}),"Create Rule"]})]}),Ec?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Jt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-3 text-sm text-cream-600",children:"Loading rules..."})]}):Kn.length===0?e.jsx("div",{className:"text-center py-8 text-cream-600",children:e.jsx("p",{children:"No attribute rules found. Create your first rule to get started."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100 border-b border-cream-300",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Rule Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Scope"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Condition"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Actions"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Priority"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{children:Kn.sort((c,b)=>(b.priority||0)-(c.priority||0)).map(c=>{var T,U,G,Y,K;const b=(c.then||[]).filter(ce=>ce&&ce.targetAttribute),N=typeof((T=c.when)==null?void 0:T.attribute)=="object"&&c.when.attribute!==null?c.when.attribute.attributeName:((U=gt.find(ce=>{var De;return ce._id===((De=c.when)==null?void 0:De.attribute)}))==null?void 0:U.attributeName)||"Unknown",S=c.applicableProduct?`Product: ${typeof c.applicableProduct=="object"&&c.applicableProduct!==null&&c.applicableProduct.name?c.applicableProduct.name:((G=Ut.find(ce=>ce._id===(typeof c.applicableProduct=="object"&&c.applicableProduct!==null?c.applicableProduct._id:c.applicableProduct)))==null?void 0:G.name)||"N/A"}`:c.applicableCategory?`Category: ${typeof c.applicableCategory=="object"&&c.applicableCategory!==null&&c.applicableCategory.name?c.applicableCategory.name:((Y=He.find(ce=>ce._id===(typeof c.applicableCategory=="object"&&c.applicableCategory!==null?c.applicableCategory._id:c.applicableCategory)))==null?void 0:Y.name)||"N/A"}`:"Global";return e.jsxs("tr",{className:"border-b border-cream-200 hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900 font-medium",children:c.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:S}),e.jsxs("td",{className:"px-4 py-3 text-sm text-cream-700",children:["IF ",N," = ",((K=c.when)==null?void 0:K.value)||""]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-cream-700",children:[b.length," action",b.length!==1?"s":""]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.isActive?"Active":"Disabled"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.priority||0}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>pu(c),className:"px-2 py-1 text-sm bg-cream-200 text-cream-900 rounded hover:bg-cream-300 transition-colors",children:e.jsx(zn,{size:14})}),e.jsx("button",{onClick:()=>ih(c),className:"px-2 py-1 text-sm bg-cream-100 text-cream-900 rounded hover:bg-cream-200 transition-colors",title:"Duplicate rule",children:e.jsx(df,{size:14})}),e.jsx("button",{onClick:()=>nh(c._id),className:"px-2 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:e.jsx(ra,{size:14})})]})})]},c._id)})})]})}),th&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-cream-200 p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-cream-900",children:Jn?"Edit Rule":"Create Rule"}),e.jsx("button",{onClick:Oo,className:"text-cream-600 hover:text-cream-900",children:e.jsx(ss,{size:24})})]}),e.jsxs("form",{onSubmit:hu,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Rule Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Rule Name *"}),e.jsx("input",{type:"text",value:Ft.name,onChange:c=>Ua({...Ft,name:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"e.g., 350 GSM Rule",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Priority *"}),e.jsx("input",{type:"number",value:Ft.priority,onChange:c=>Ua({...Ft,priority:parseInt(c.target.value)||0}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"0",required:!0}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Higher priority rules are evaluated first"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Scope *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"GLOBAL",checked:Ft.scope==="GLOBAL",onChange:c=>Ua({...Ft,scope:"GLOBAL",scopeRefId:""}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Global (applies to all products)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"CATEGORY",checked:Ft.scope==="CATEGORY",onChange:c=>Ua({...Ft,scope:"CATEGORY",scopeRefId:""}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Category"})]}),Ft.scope==="CATEGORY"&&e.jsxs("select",{value:Ft.scopeRefId,onChange:c=>Ua({...Ft,scopeRefId:c.target.value}),className:"ml-6 w-full max-w-md px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),He.map(c=>e.jsx("option",{value:c._id,children:c.name},c._id))]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"PRODUCT",checked:Ft.scope==="PRODUCT",onChange:c=>Ua({...Ft,scope:"PRODUCT",scopeRefId:""}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Product"})]}),Ft.scope==="PRODUCT"&&e.jsxs("select",{value:Ft.scopeRefId,onChange:c=>Ua({...Ft,scopeRefId:c.target.value}),className:"ml-6 w-full max-w-md px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Product"}),Ut.map(c=>e.jsx("option",{value:c._id,children:c.name},c._id))]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:Ft.isActive,onChange:c=>Ua({...Ft,isActive:c.target.checked}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Active"})]})})]}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900 mb-4",children:"IF Condition (WHEN)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Attribute *"}),e.jsxs("select",{value:Ft.when.attribute,onChange:c=>{Ua({...Ft,when:{...Ft.when,attribute:c.target.value,value:""}})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Attribute"}),gt.map(c=>e.jsx("option",{value:c.attributeName,children:c.attributeName},c._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Value *"}),e.jsxs("select",{value:Ft.when.value,onChange:c=>Ua({...Ft,when:{...Ft.when,value:c.target.value}}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!Ft.when.attribute,children:[e.jsx("option",{value:"",children:"Select Value"}),(()=>{var b;const c=gt.find(N=>N.attributeName===Ft.when.attribute);return((b=c==null?void 0:c.attributeValues)==null?void 0:b.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value)))||[]})()]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900",children:"THEN Actions"}),e.jsxs("button",{type:"button",onClick:()=>{Ua({...Ft,then:[...Ft.then,{action:"SHOW",targetAttribute:""}]})},className:"px-3 py-1.5 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2 text-sm",children:[e.jsx(Zs,{size:16}),"Add Action"]})]}),Ft.then.length===0?e.jsx("p",{className:"text-sm text-cream-600 italic",children:"No actions defined. Add at least one action."}):e.jsx("div",{className:"space-y-4",children:Ft.then.map((c,b)=>{const N=gt.find(T=>T.attributeName===c.targetAttribute),S=(N==null?void 0:N.attributeValues)||[];return e.jsxs("div",{className:"border border-cream-200 rounded-lg p-4 bg-cream-50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("span",{className:"text-sm font-medium text-cream-900",children:["Action ",b+1]}),e.jsx("button",{type:"button",onClick:()=>{Ua({...Ft,then:Ft.then.filter((T,U)=>U!==b)})},className:"text-red-600 hover:text-red-800",children:e.jsx(ss,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Action Type *"}),e.jsxs("select",{value:c.action,onChange:T=>{const U=[...Ft.then];U[b]={...c,action:T.target.value,allowedValues:T.target.value==="SHOW_ONLY"?[]:c.allowedValues,defaultValue:T.target.value==="SET_DEFAULT"?"":c.defaultValue},Ua({...Ft,then:U})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"SHOW",children:"SHOW"}),e.jsx("option",{value:"HIDE",children:"HIDE"}),e.jsx("option",{value:"SHOW_ONLY",children:"SHOW_ONLY"}),e.jsx("option",{value:"SET_DEFAULT",children:"SET_DEFAULT"}),e.jsx("option",{value:"TRIGGER_PRICING",children:"TRIGGER_PRICING"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Target Attribute *"}),e.jsxs("select",{value:c.targetAttribute,onChange:T=>{const U=[...Ft.then];U[b]={...c,targetAttribute:T.target.value},Ua({...Ft,then:U})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Attribute"}),gt.filter(T=>T.attributeName!==Ft.when.attribute).map(T=>e.jsx("option",{value:T.attributeName,children:T.attributeName},T._id))]})]})]}),c.action==="SHOW_ONLY"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Allowed Values * (Select multiple)"}),e.jsx("div",{className:"border border-cream-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:S.length===0?e.jsx("p",{className:"text-sm text-cream-600 italic",children:"No values available for this attribute"}):e.jsx("div",{className:"space-y-2",children:S.map(T=>{var U;return e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:((U=c.allowedValues)==null?void 0:U.includes(T.value))||!1,onChange:G=>{const Y=[...Ft.then],K=c.allowedValues||[];G.target.checked?Y[b]={...c,allowedValues:[...K,T.value]}:Y[b]={...c,allowedValues:K.filter(ce=>ce!==T.value)},Ua({...Ft,then:Y})},className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:T.label})]},T.value)})})})]}),c.action==="SET_DEFAULT"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Default Value *"}),e.jsxs("select",{value:c.defaultValue||"",onChange:T=>{const U=[...Ft.then];U[b]={...c,defaultValue:T.target.value},Ua({...Ft,then:U})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!c.targetAttribute,children:[e.jsx("option",{value:"",children:"Select Default Value"}),S.map(T=>e.jsx("option",{value:T.value,children:T.label},T.value))]})]})]},b)})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-cream-200",children:[e.jsx("button",{type:"button",onClick:Oo,className:"px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center gap-2",children:[d&&e.jsx(Jt,{className:"animate-spin",size:16}),Jn?"Update Rule":"Create Rule"]})]})]})]})}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-cream-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-cream-900",children:["Sub-Attributes (",To.length,")"]}),e.jsxs("button",{onClick:()=>{Ni(),gi([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}]),Dc(!0)},className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:18}),"Create Sub-Attributes"]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Filter by Attribute"}),e.jsxs("select",{value:ei.attributeId,onChange:c=>{lu({...ei,attributeId:c.target.value})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",children:[e.jsx("option",{value:"",children:"All Attributes"}),gt.map(c=>e.jsx("option",{value:c._id,children:c.attributeName},c._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Filter by Parent Value"}),e.jsx("input",{type:"text",value:ei.parentValue,onChange:c=>{lu({...ei,parentValue:c.target.value})},placeholder:"e.g., custom-shape-",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("button",{onClick:()=>ao(),className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors text-sm",children:"Apply Filters"})}),sh?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Jt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-3 text-sm text-cream-600",children:"Loading sub-attributes..."})]}):To.length===0?e.jsx("div",{className:"text-center py-8 text-cream-600",children:e.jsx("p",{children:"No sub-attributes found. Create your first sub-attribute to get started."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100 border-b border-cream-300",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Parent Attribute"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Parent Value"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Value"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Label"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Image"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Price Addition"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{children:To.map(c=>{var N;const b=typeof c.parentAttribute=="object"&&c.parentAttribute!==null?c.parentAttribute.attributeName:((N=gt.find(S=>S._id===c.parentAttribute))==null?void 0:N.attributeName)||"Unknown";return e.jsxs("tr",{className:"border-b border-cream-200 hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900",children:b}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.parentValue}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.value}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.label}),e.jsx("td",{className:"px-4 py-3",children:c.image?e.jsx("img",{src:c.image,alt:c.label,className:"w-16 h-16 object-cover rounded"}):e.jsx("span",{className:"text-xs text-cream-500",children:"No image"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-cream-700",children:["",c.priceAdd||0,"/piece"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.isEnabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.isEnabled?"Enabled":"Disabled"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ro(c),className:"px-2 py-1 text-sm bg-cream-200 text-cream-900 rounded hover:bg-cream-300 transition-colors",children:e.jsx(zn,{size:14})}),e.jsx("button",{onClick:()=>un(c._id),className:"px-2 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:e.jsx(ra,{size:14})})]})})]},c._id)})})]})}),ah&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-cream-200 p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-cream-900",children:fi?"Edit Sub-Attribute & Add More":"Create Sub-Attributes"}),e.jsx("button",{onClick:Ni,className:"text-cream-600 hover:text-cream-900",children:e.jsx(ss,{size:24})})]}),e.jsxs("form",{onSubmit:$c,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Parent Attribute *"}),e.jsxs("select",{value:Qs.parentAttribute,onChange:c=>{Xn({...Qs,parentAttribute:c.target.value,parentValue:""})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!!fi,children:[e.jsx("option",{value:"",children:"Select Attribute"}),gt.map(c=>e.jsx("option",{value:c.attributeName,children:c.attributeName},c._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Parent Value *"}),e.jsxs("select",{value:Qs.parentValue,onChange:c=>Xn({...Qs,parentValue:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!Qs.parentAttribute||!!fi,children:[e.jsx("option",{value:"",children:"Select Parent Value"}),(()=>{var b;const c=gt.find(N=>N.attributeName===Qs.parentAttribute);return((b=c==null?void 0:c.attributeValues)==null?void 0:b.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value)))||[]})()]}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"The attribute value that triggers these sub-attributes"})]}),fi?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-cream-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-cream-900 mb-3",children:"Edit Sub-Attribute"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Value *"}),e.jsx("input",{type:"text",value:Qs.value,onChange:c=>Xn({...Qs,value:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"e.g., shape-1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Label *"}),e.jsx("input",{type:"text",value:Qs.label,onChange:c=>Xn({...Qs,label:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"e.g., Round Shape",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Image"}),(()=>{const c=To.find(b=>b._id===fi);return c!=null&&c.image&&!Qs.image?e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Current image:"}),e.jsx("img",{src:c.image,alt:"Current",className:"w-32 h-32 object-cover rounded border border-cream-300"})]}):null})(),e.jsx("input",{type:"file",accept:"image/*",onChange:c=>{var N;const b=((N=c.target.files)==null?void 0:N[0])||null;Xn({...Qs,image:b})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900"}),Qs.image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"New image preview:"}),e.jsx("img",{src:URL.createObjectURL(Qs.image),alt:"Preview",className:"w-32 h-32 object-cover rounded border border-cream-300"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Price Addition (/piece)"}),e.jsx("input",{type:"number",step:"0.01",value:Qs.priceAdd,onChange:c=>Xn({...Qs,priceAdd:parseFloat(c.target.value)||0}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Fixed price addition per piece (e.g., 20 = +20/piece)"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:Qs.isEnabled,onChange:c=>Xn({...Qs,isEnabled:c.target.checked}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Enabled"})]})})]})]}),e.jsxs("div",{className:"border-t border-cream-200 pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-cream-900",children:"Add New Sub-Attributes (Optional)"}),e.jsxs("button",{type:"button",onClick:Tr,className:"px-3 py-1.5 text-sm bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:16}),"Add Row"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-4",children:"You can add additional sub-attributes with the same parent attribute and value"}),Fr.map((c,b)=>e.jsxs("div",{className:"border border-cream-200 rounded-lg p-4 bg-cream-50/50 mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h5",{className:"text-xs font-semibold text-cream-800",children:["New Sub-Attribute #",b+1]}),Fr.length>1&&e.jsx("button",{type:"button",onClick:()=>qi(b),className:"text-red-600 hover:text-red-800 p-1",title:"Remove this row",children:e.jsx(ra,{size:14})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Value *"}),e.jsx("input",{type:"text",value:c.value,onChange:N=>Ir(b,"value",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., shape-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Label *"}),e.jsx("input",{type:"text",value:c.label,onChange:N=>Ir(b,"label",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., Square Shape"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N=>{var T;const S=((T=N.target.files)==null?void 0:T[0])||null;Ir(b,"image",S)},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm"}),c.image&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:URL.createObjectURL(c.image),alt:"Preview",className:"w-24 h-24 object-cover rounded border border-cream-300"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Price Addition (/piece)"}),e.jsx("input",{type:"number",step:"0.01",value:c.priceAdd,onChange:N=>Ir(b,"priceAdd",parseFloat(N.target.value)||0),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"0.00"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.isEnabled,onChange:N=>Ir(b,"isEnabled",N.target.checked),className:"text-cream-900"}),e.jsx("span",{className:"text-xs text-cream-700",children:"Enabled"})]})})]})]})]},b))]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900",children:["Sub-Attributes (",Fr.length,")"]}),e.jsxs("button",{type:"button",onClick:Tr,className:"px-3 py-1.5 text-sm bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2",children:[e.jsx(Zs,{size:16}),"Add Row"]})]}),Fr.map((c,b)=>e.jsxs("div",{className:"border border-cream-200 rounded-lg p-4 bg-cream-50/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"text-sm font-semibold text-cream-900",children:["Sub-Attribute #",b+1]}),Fr.length>1&&e.jsx("button",{type:"button",onClick:()=>qi(b),className:"text-red-600 hover:text-red-800 p-1",title:"Remove this row",children:e.jsx(ra,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Value *"}),e.jsx("input",{type:"text",value:c.value,onChange:N=>Ir(b,"value",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., shape-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Label *"}),e.jsx("input",{type:"text",value:c.label,onChange:N=>Ir(b,"label",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., Round Shape"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N=>{var T;const S=((T=N.target.files)==null?void 0:T[0])||null;Ir(b,"image",S)},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm"}),c.image&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:URL.createObjectURL(c.image),alt:"Preview",className:"w-24 h-24 object-cover rounded border border-cream-300"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Price Addition (/piece)"}),e.jsx("input",{type:"number",step:"0.01",value:c.priceAdd,onChange:N=>Ir(b,"priceAdd",parseFloat(N.target.value)||0),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"0.00"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.isEnabled,onChange:N=>Ir(b,"isEnabled",N.target.checked),className:"text-cream-900"}),e.jsx("span",{className:"text-xs text-cream-700",children:"Enabled"})]})})]})]})]},b))]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-cream-200",children:[e.jsx("button",{type:"button",onClick:Ni,className:"px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center gap-2",children:[d&&e.jsx(Jt,{className:"animate-spin",size:16}),fi?Fr.some(c=>c.value.trim()&&c.label.trim())?"Update & Add New Sub-Attributes":"Update Sub-Attribute":"Create Sub-Attributes"]})]})]})]})})]})]}),n==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:"Create Employee"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Create a new employee account. Employees can access the employee dashboard to manage orders assigned to their departments."}),e.jsxs("form",{onSubmit:qc,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:rs.name,onChange:c=>ea({...rs,name:c.target.value}),placeholder:"Enter employee name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:rs.email,onChange:c=>ea({...rs,email:c.target.value}),placeholder:"Enter employee email",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Password *"}),e.jsx("input",{type:"password",required:!0,value:rs.password,onChange:c=>ea({...rs,password:c.target.value}),placeholder:"Enter password",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ed,{size:20}),"Create Employee"]})})]})]}),e.jsx("div",{className:"border-t border-cream-300 pt-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:"Update User Role"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Users are created through the signup page. Use this form to update existing users' roles to admin or employee."}),e.jsxs("form",{onSubmit:Vc,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Username (Name) *"}),e.jsx("input",{type:"text",required:!0,value:Yt.username,onChange:c=>Ms({...Yt,username:c.target.value}),placeholder:"Enter user's name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Role *"}),e.jsx(Da,{label:"Select Role",value:Yt.role,onChange:c=>Ms({...Yt,role:c}),options:[{value:"user",label:"User"},{value:"admin",label:"Admin"},{value:"emp",label:"Employee"}],className:"w-full"})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:20}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Rr,{size:20}),"Update Role"]})})]})]})}),e.jsxs("div",{className:"border-t border-cream-300 pt-6",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["All Users (",Ne.length,")"]}),e.jsx("button",{onClick:vi,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Refresh"})]}),Ne.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(Il,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No users found"})]}):e.jsx("div",{className:"space-y-4",children:Ne.map(c=>e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 flex items-center justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-cream-900",children:c.name}),e.jsx("p",{className:"text-sm text-cream-600",children:c.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${c.role==="admin"?"bg-cream-900 text-white":"bg-cream-200 text-cream-900"}`,children:c.role}),c.isEmployee&&e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"})]})]}),e.jsx("div",{className:"text-xs text-cream-500",children:c.createdAt?new Date(c.createdAt).toLocaleDateString():"N/A"})]},c._id))})]})]}),n==="print-partner-requests"&&e.jsx(s9,{}),n==="corporate-requests"&&e.jsx(a9,{}),n==="pricing-books"&&e.jsx(r9,{}),n==="pricing-modifiers"&&e.jsx(i9,{}),n==="geo-zones"&&e.jsx(p9,{}),n==="user-segments"&&e.jsx(x9,{}),n==="product-availability"&&e.jsx(f9,{}),n==="pricing-preview"&&e.jsx(b9,{}),n==="pricing-logs"&&e.jsx(l9,{}),n==="virtual-pricing"&&e.jsx(g9,{})]})]}),e.jsx(ba,{children:et&&Ie&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-cream-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-cream-900",children:["Order #",Ie.orderNumber]}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:r?new Date(Ie.createdAt).toLocaleString():"Loading..."})]}),e.jsx("button",{onClick:()=>{it(!1),Je(null),We({status:"",deliveryDate:"",adminNotes:""})},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(ss,{size:24})})]}),e.jsxs("div",{className:"space-y-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-cream-700",children:"Status:"}),e.jsx("div",{className:`px-4 py-2 rounded-full border-2 ${Ie.status==="completed"?"bg-green-100 text-green-800 border-green-200":Ie.status==="processing"?"bg-blue-100 text-blue-800 border-blue-200":Ie.status==="production_ready"?"bg-orange-100 text-orange-800 border-orange-200":Ie.status==="request"?"bg-yellow-100 text-yellow-800 border-yellow-200":Ie.status==="rejected"?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:e.jsx("span",{className:"text-sm font-semibold capitalize",children:Ie.status})})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(Il,{size:18}),"Customer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1 font-medium",children:"Customer Name"}),e.jsx("p",{className:"font-semibold text-cream-900 text-base",children:Ie.user.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1 font-medium",children:"Email Address"}),e.jsx("p",{className:"font-semibold text-cream-900 text-base",children:Ie.user.email})]})]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(ia,{size:18}),"Product Information"]}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsx("img",{src:Ie.product.image||rc,alt:Ie.product.name,className:"w-24 h-24 object-cover rounded-lg border border-cream-200",onError:c=>{const b=c.target;b.src=rc}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-cream-900 text-lg mb-1",children:Ie.product.name}),e.jsxs("p",{className:"text-sm text-cream-600 mb-2",children:["Category: ",Ie.product.category&&typeof Ie.product.category=="object"&&Ie.product.category!==null&&"_id"in Ie.product.category?Ie.product.category.name||"N/A":typeof Ie.product.category=="string"?Ie.product.category:"N/A"]}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Base Price: ",(($o=Ie.product.basePrice)==null?void 0:$o.toFixed(2))||"0.00"," per unit"]})]})]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(Rr,{size:18}),"Customization Details"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Quantity"}),e.jsxs("p",{className:"font-bold text-cream-900",children:[Ie.quantity," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Finish"}),e.jsx("p",{className:"font-bold text-cream-900",children:Ie.finish})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Shape"}),e.jsx("p",{className:"font-bold text-cream-900",children:Ie.shape})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Total Price"}),e.jsxs("p",{className:"font-bold text-cream-900",children:["",Ie.totalPrice.toFixed(2)]})]})]}),Ie.selectedOptions&&Ie.selectedOptions.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-2 font-semibold",children:"Selected Options"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ie.selectedOptions.map((c,b)=>e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-800 rounded-full text-xs font-medium",children:[typeof c=="string"?c:c.optionName||c.name||"Option",typeof c=="object"&&c.priceAdd?` (+${c.priceAdd.toFixed(2)})`:""]},b))})]}),Ie.selectedDynamicAttributes&&Ie.selectedDynamicAttributes.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-2 font-semibold",children:"Selected Attributes"}),e.jsx("div",{className:"space-y-2",children:Ie.selectedDynamicAttributes.map((c,b)=>e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-cream-100 border border-cream-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.attributeName,className:"w-8 h-8 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-cream-900",children:c.attributeName}),e.jsx("p",{className:"text-xs text-cream-600",children:c.label}),c.description&&e.jsx("p",{className:"text-xs text-cream-500 mt-0.5",children:c.description})]})]}),(c.priceAdd>0||c.priceMultiplier)&&e.jsxs("div",{className:"text-right",children:[c.priceAdd>0&&e.jsxs("span",{className:"block text-xs font-bold text-cream-900",children:["+",c.priceAdd.toFixed(2)]}),c.priceMultiplier&&c.priceMultiplier!==1&&e.jsxs("span",{className:"block text-xs text-cream-600",children:["",c.priceMultiplier.toFixed(2)]})]}),c.uploadedImages&&c.uploadedImages.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-cream-200 w-full",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-2 font-semibold",children:"Uploaded Images:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:c.uploadedImages.map((N,S)=>{let T="";return N.data&&(typeof N.data=="string"?T=`data:${N.contentType||"image/jpeg"};base64,${N.data}`:Buffer.isBuffer(N.data)&&(T=`data:${N.contentType||"image/jpeg"};base64,${N.data.toString("base64")}`)),T?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:T,alt:N.filename||`Image ${S+1}`,className:"w-full h-24 object-cover rounded border border-cream-200"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1 truncate",children:N.filename})]},S):null})})]})]},b))})]})]}),(()=>{var N,S,T;const c={quantity:Ie.quantity,product:{basePrice:0,gstPercentage:Ie.product.gstPercentage||18,options:Ie.product.options,filters:Ie.product.filters,quantityDiscounts:((N=Ie.product)==null?void 0:N.quantityDiscounts)||[]},finish:Ie.finish,shape:Ie.shape,selectedOptions:((S=Ie.selectedOptions)==null?void 0:S.map(U=>({name:typeof U=="string"?U:U.optionName||U.name||"Option",optionName:typeof U=="string"?U:U.optionName||U.name||"Option",priceAdd:typeof U=="object"&&U.priceAdd||0})))||[],selectedDynamicAttributes:(T=Ie.selectedDynamicAttributes)==null?void 0:T.map(U=>({attributeName:U.attributeName,label:U.label,priceMultiplier:U.priceMultiplier,priceAdd:U.priceAdd}))},b=Qf(c);return e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(Vn,{size:18}),"Price Breakdown"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-cream-200",children:[e.jsx("div",{className:"text-cream-600",children:e.jsxs("span",{children:["Base Price (",Ie.quantity.toLocaleString()," "," ",Aa(0),")"]})}),e.jsx("span",{className:"font-medium text-cream-900",children:Aa(b.rawBaseTotal)})]}),b.discountPercentage>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-700 bg-green-50 p-2 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold",children:["Bulk Discount (",b.discountPercentage,"%)"]}),e.jsxs("p",{className:"text-xs opacity-80",children:["Applied for ",Ie.quantity," units"]})]}),e.jsxs("span",{className:"font-bold",children:["-",Aa(b.rawBaseTotal-b.discountedBaseTotal)]})]}),b.optionBreakdowns.map((U,G)=>e.jsxs("div",{className:"flex justify-between items-center text-cream-600",children:[e.jsxs("span",{children:[U.name," ",U.isPerUnit?`(${Ie.quantity}  ${Aa(U.priceAdd)})`:""]}),e.jsxs("span",{children:["+",Aa(U.cost)]})]},G)),Ie.selectedDynamicAttributes&&Ie.selectedDynamicAttributes.length>0&&e.jsx(e.Fragment,{children:Ie.selectedDynamicAttributes.filter(U=>U.priceAdd>0||U.priceMultiplier&&U.priceMultiplier!==1).map((U,G)=>{let K=0,ce=0;return U.priceAdd>0?(ce=U.priceAdd,K=U.priceAdd*Ie.quantity):U.priceMultiplier&&U.priceMultiplier!==1&&(ce=0*(U.priceMultiplier-1),K=ce*Ie.quantity),K===0?null:e.jsxs("div",{className:"flex justify-between items-center text-cream-600",children:[e.jsxs("span",{children:[U.attributeName," (",U.label,")"]}),e.jsxs("span",{children:["+",Aa(ce),"/unit  ",Ie.quantity.toLocaleString()," = ",Aa(K)]})]},`attr-${G}`)})}),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-cream-900 border-t border-cream-200",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:Aa(b.subtotal)})]}),e.jsxs("div",{className:"flex justify-between items-center text-cream-600 text-xs",children:[e.jsxs("span",{children:["GST (",Ie.product.gstPercentage||18,"%)"]}),e.jsxs("span",{children:["+",Aa(b.gstAmount)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t-2 border-cream-300",children:[e.jsx("span",{className:"text-base font-bold text-cream-900",children:"Total Amount"}),e.jsx("span",{className:"text-lg font-bold text-cream-900",children:Aa(Ie.totalPrice)})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-cream-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-cream-600 text-xs",children:"Advance Paid"}),e.jsx("span",{className:"font-medium text-green-700",children:Aa(Ie.advancePaid||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-cream-600 text-xs",children:"Balance Due"}),e.jsx("span",{className:`font-bold ${Ie.totalPrice-(Ie.advancePaid||0)>0?"text-red-600":"text-cream-500"}`,children:Aa(Ie.totalPrice-(Ie.advancePaid||0))})]})]})]})]})})(),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(Yl,{size:18}),"Delivery Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Complete Address"}),e.jsx("p",{className:"font-semibold text-cream-900 text-sm whitespace-pre-wrap",children:Ie.address||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Mobile Number"}),e.jsx("p",{className:"font-semibold text-cream-900",children:Ie.mobileNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Pincode"}),e.jsx("p",{className:"font-semibold text-cream-900",children:Ie.pincode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Delivery Date"}),e.jsx("p",{className:"font-semibold text-cream-900",children:Ie.deliveryDate?r?new Date(Ie.deliveryDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading...":"Not set"})]})]})]})]}),Ie.currentDepartment&&e.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 border border-indigo-200 mb-4",children:[e.jsxs("h3",{className:"font-bold text-indigo-900 mb-2 flex items-center gap-2",children:[e.jsx(Fn,{size:18}),"Current Department"]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"px-4 py-2 bg-white rounded-lg border border-indigo-200",children:[e.jsx("p",{className:"text-xs text-indigo-600 mb-1",children:"Currently Working On"}),e.jsx("p",{className:"text-lg font-bold text-indigo-900",children:typeof Ie.currentDepartment=="object"&&Ie.currentDepartment!==null?Ie.currentDepartment.name:"Department"}),Ie.currentDepartmentIndex!==null&&Ie.currentDepartmentIndex!==void 0&&e.jsxs("p",{className:"text-xs text-indigo-500 mt-1",children:["Position in Sequence: #",Ie.currentDepartmentIndex+1]})]})})]}),Ie.departmentStatuses&&Ie.departmentStatuses.length>0&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(Yl,{size:18}),"Production Progress"]}),(()=>{const c=Ie.departmentStatuses.length,b=Ie.departmentStatuses.filter(S=>S.status==="completed").length,N=Ie.departmentStatuses.filter(S=>S.status==="in_progress").length;return e.jsxs("div",{className:"text-xs text-blue-700 font-medium",children:[b,"/",c," Stages Completed",N>0&&`  ${N} In Progress`]})})()]}),(()=>{const c=Ie.departmentStatuses.length,b=Ie.departmentStatuses.filter(S=>S.status==="completed").length,N=Math.round(b/c*100);return e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2.5 mb-1",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${N}%`}})}),e.jsxs("p",{className:"text-xs text-blue-700 text-right",children:[N,"% Complete"]})]})})(),e.jsx("div",{className:"space-y-2",children:Ie.departmentStatuses.sort((c,b)=>{const N=typeof c.department=="object"?c.department.sequence:0,S=typeof b.department=="object"?b.department.sequence:0;return N-S}).map((c,b)=>{const N=typeof c.department=="object"?c.department.name:"Department",S=c.status;let T="";if(c.startedAt&&c.completedAt){const U=new Date(c.startedAt),Y=new Date(c.completedAt).getTime()-U.getTime(),K=Math.floor(Y/(1e3*60*60)),ce=Math.floor(Y%(1e3*60*60)/(1e3*60));K>0?T=`${K}h ${ce}m`:T=`${ce}m`}return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white rounded-lg border border-blue-100",children:[e.jsx("div",{className:`w-4 h-4 rounded-full mt-0.5 shrink-0 ${S==="completed"?"bg-green-500":S==="in_progress"?"bg-blue-500 animate-pulse":S==="paused"?"bg-yellow-500":S==="stopped"?"bg-red-500":"bg-gray-300"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-900",children:N}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${S==="completed"?"bg-green-100 text-green-800":S==="in_progress"?"bg-blue-100 text-blue-800":S==="paused"?"bg-yellow-100 text-yellow-800":S==="stopped"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:S.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"space-y-1 mt-2",children:[c.whenAssigned&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(tn,{size:12,className:"text-purple-600"}),e.jsxs("span",{className:"text-purple-600",children:["Assigned: ",new Date(c.whenAssigned).toLocaleString()]})]}),c.startedAt&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(tn,{size:12,className:"text-blue-600"}),e.jsxs("span",{className:"text-blue-600",children:["Started: ",new Date(c.startedAt).toLocaleString()]})]}),c.completedAt&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(va,{size:12,className:"text-green-600"}),e.jsxs("span",{className:"text-green-600",children:["Completed: ",new Date(c.completedAt).toLocaleString(),T&&` (Duration: ${T})`]})]}),c.pausedAt&&S==="paused"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(tn,{size:12,className:"text-yellow-600"}),e.jsxs("span",{className:"text-yellow-600",children:["Paused: ",new Date(c.pausedAt).toLocaleString()]})]}),c.stoppedAt&&S==="stopped"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ss,{size:12,className:"text-red-600"}),e.jsxs("span",{className:"text-red-600",children:["Stopped: ",new Date(c.stoppedAt).toLocaleString()]})]}),c.operator&&e.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[e.jsx(Il,{size:12,className:"text-cream-600"}),e.jsxs("span",{className:"text-cream-600",children:["Operator: ",typeof c.operator=="object"&&c.operator&&"_id"in c.operator?`${c.operator.name||"N/A"} (${"email"in c.operator&&typeof c.operator.email=="string"?c.operator.email:"N/A"})`:"N/A"]})]}),c.notes&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1 italic",children:["Notes: ",c.notes]})]})]})]},b)})})]}),Ie.productionTimeline&&Ie.productionTimeline.length>0&&e.jsxs("div",{className:"bg-linear-to-br from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200",children:[e.jsxs("h3",{className:"font-bold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx(tn,{size:18}),"Production Activity Timeline"]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Array.isArray(Ie.productionTimeline)&&Ie.productionTimeline.sort((c,b)=>new Date(b.timestamp||0).getTime()-new Date(c.timestamp||0).getTime()).map((c,b)=>{const N=typeof c.department=="object"?c.department.name:"Department",S=c.operator?typeof c.operator=="object"?`${c.operator.name} (${c.operator.email})`:c.operator:"System",T={started:"bg-blue-100 text-blue-800 border-blue-300",paused:"bg-yellow-100 text-yellow-800 border-yellow-300",resumed:"bg-green-100 text-green-800 border-green-300",completed:"bg-green-100 text-green-800 border-green-300",stopped:"bg-red-100 text-red-800 border-red-300"};return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white rounded-lg border border-purple-100 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 shrink-0 ${c.action==="completed"?"bg-green-500":c.action==="started"?"bg-blue-500":c.action==="paused"?"bg-yellow-500":c.action==="stopped"?"bg-red-500":"bg-gray-400"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-purple-900",children:N}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium border ${T[c.action]||"bg-gray-100 text-gray-800 border-gray-300"}`,children:c.action.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600 mb-1",children:[e.jsx(tn,{size:12}),e.jsx("span",{children:new Date(c.timestamp).toLocaleString()})]}),S&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600 mb-1",children:[e.jsx(Il,{size:12}),e.jsxs("span",{children:["Operator: ",S]})]}),c.notes&&e.jsx("div",{className:"text-xs text-purple-700 mt-1 italic bg-purple-50 p-2 rounded border border-purple-100",children:c.notes})]})]},b)})})]}),Ie.notes&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(_r,{size:18}),"Customer Notes"]}),e.jsx("p",{className:"text-sm text-blue-900 whitespace-pre-wrap",children:Ie.notes})]}),Ie.adminNotes&&e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsxs("h3",{className:"font-bold text-amber-900 mb-2 flex items-center gap-2",children:[e.jsx(Rr,{size:18}),"Admin Notes"]}),e.jsx("p",{className:"text-sm text-amber-900 whitespace-pre-wrap",children:Ie.adminNotes})]}),(((Ai=Ie.uploadedDesign)==null?void 0:Ai.frontImage)||((Tn=Ie.uploadedDesign)==null?void 0:Tn.backImage))&&e.jsxs(st.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"bg-linear-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-blue-900 mb-4 flex items-center gap-2 text-lg",children:[e.jsx(Pi,{size:20}),"Uploaded Customer Designs"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[((ii=Ie.uploadedDesign)==null?void 0:ii.frontImage)&&e.jsxs(st.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[e.jsxs("p",{className:"text-sm font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(wr,{size:16}),"Front Design"]}),e.jsxs("div",{className:"relative bg-white rounded-lg border-2 border-blue-200 p-4 shadow-md hover:shadow-lg transition-shadow",children:[e.jsx("img",{src:Ie.uploadedDesign.frontImage.data||Fl,alt:"Front design",className:"w-full h-80 object-contain rounded-lg",onError:c=>{const b=c.target;b.src=Fl}}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["File: ",Ie.uploadedDesign.frontImage.filename||"front-design.png"]}),e.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:["Type: ",Ie.uploadedDesign.frontImage.contentType||"image/png"]})]}),e.jsxs("button",{onClick:()=>{const c=document.createElement("a");c.href=Ie.uploadedDesign.frontImage.data||Fl,c.download=Ie.uploadedDesign.frontImage.filename||"front-design.png",document.body.appendChild(c),c.click(),document.body.removeChild(c)},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",title:"Download image",children:[e.jsx(ki,{size:14}),"Download"]})]})]})]}),((kn=Ie.uploadedDesign)==null?void 0:kn.backImage)&&e.jsxs(st.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[e.jsxs("p",{className:"text-sm font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(wr,{size:16}),"Back Design"]}),e.jsxs("div",{className:"relative bg-white rounded-lg border-2 border-blue-200 p-4 shadow-md hover:shadow-lg transition-shadow",children:[e.jsx("img",{src:Ie.uploadedDesign.backImage.data||Fl,alt:"Back design",className:"w-full h-80 object-contain rounded-lg",onError:c=>{const b=c.target;b.src=Fl}}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["File: ",Ie.uploadedDesign.backImage.filename||"back-design.png"]}),e.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:["Type: ",Ie.uploadedDesign.backImage.contentType||"image/png"]})]}),e.jsxs("button",{onClick:()=>{const c=document.createElement("a");c.href=Ie.uploadedDesign.backImage.data||Fl,c.download=Ie.uploadedDesign.backImage.filename||"back-design.png",document.body.appendChild(c),c.click(),document.body.removeChild(c)},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",title:"Download image",children:[e.jsx(ki,{size:14}),"Download"]})]})]})]})]})]})]}),Ie.status!=="cancelled"&&e.jsxs("div",{className:"border-t border-cream-200 pt-6",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(Rr,{size:18}),"Manage Order"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Order Status"}),e.jsx(Da,{label:"Select Status",value:Bt.status,onChange:c=>We({...Bt,status:c}),options:[{value:"request",label:"Request"},{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"rejected",label:"Rejected"}],className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Delivery Date"}),e.jsx("input",{type:"date",value:Bt.deliveryDate,onChange:c=>We({...Bt,deliveryDate:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Admin Notes"}),e.jsx("textarea",{value:Bt.adminNotes,onChange:c=>We({...Bt,adminNotes:c.target.value}),rows:4,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"Add notes for this order..."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>gl(Ie._id),disabled:d,className:"flex-1 bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:20}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Va,{size:20}),"Update Order"]})}),e.jsx("button",{onClick:()=>{it(!1),Je(null),We({status:"",deliveryDate:"",adminNotes:""})},className:"px-6 py-3 border border-cream-300 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"})]})]})]})]})})}),e.jsx(ba,{children:Ue&&Ge&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-cream-900",children:"Upload Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{Ge&&window.confirm("Are you sure you want to delete this uploaded image?")&&(pa(Ge._id),Re(!1),Le(null))},disabled:d,className:"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",title:"Delete upload",children:[e.jsx(ra,{size:20}),"Delete"]}),e.jsx("button",{onClick:()=>{Re(!1),Le(null)},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(ss,{size:24})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"User"}),e.jsxs("p",{className:"font-semibold text-cream-900",children:[Ge.user.name," (",Ge.user.email,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Dimensions"}),e.jsxs("p",{className:"font-semibold text-cream-900",children:[Ge.width,"  ",Ge.height,"px"]})]}),Ge.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Description"}),e.jsx("p",{className:"text-cream-900",children:Ge.description})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Front Image"}),Ge.frontImage&&e.jsxs("button",{onClick:()=>ks(Ge.frontImage.data,Ge.frontImage.filename||"front-image.jpg"),className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(ki,{size:14}),"Download"]})]}),Ge.frontImage&&e.jsxs("div",{className:"relative",children:[ut[`modal-front-${Ge._id}`]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cream-100 rounded-lg",children:e.jsx(Jt,{className:"animate-spin text-cream-600",size:32})}),e.jsx("img",{src:ro(Ge.frontImage.data,Ge.frontImage.contentType)||Fl,alt:Ge.frontImage.filename,className:`w-full rounded-lg border border-cream-300 ${ut[`modal-front-${Ge._id}`]?"opacity-0":"opacity-100"} transition-opacity`,onLoad:()=>Gt(c=>({...c,[`modal-front-${Ge._id}`]:!1})),onError:()=>{var c;Gt(b=>({...b,[`modal-front-${Ge._id}`]:!1})),console.error("Failed to load image:",(c=Ge.frontImage)==null?void 0:c.filename)},onLoadStart:()=>Gt(c=>({...c,[`modal-front-${Ge._id}`]:!0}))})]})]}),Ge.backImage&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Back Image"}),e.jsxs("button",{onClick:()=>ks(Ge.backImage.data,Ge.backImage.filename||"back-image.jpg"),className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(ki,{size:14}),"Download"]})]}),e.jsxs("div",{className:"relative",children:[ut[`modal-back-${Ge._id}`]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cream-100 rounded-lg",children:e.jsx(Jt,{className:"animate-spin text-cream-600",size:32})}),e.jsx("img",{src:ro(Ge.backImage.data,Ge.backImage.contentType)||Fl,alt:Ge.backImage.filename,className:`w-full rounded-lg border border-cream-300 ${ut[`modal-back-${Ge._id}`]?"opacity-0":"opacity-100"} transition-opacity`,onLoad:()=>Gt(c=>({...c,[`modal-back-${Ge._id}`]:!1})),onError:()=>{var c;Gt(b=>({...b,[`modal-back-${Ge._id}`]:!1})),console.error("Failed to load image:",(c=Ge.backImage)==null?void 0:c.filename)},onLoadStart:()=>Gt(c=>({...c,[`modal-back-${Ge._id}`]:!0}))})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Uploaded"}),e.jsx("p",{className:"text-cream-900",children:r?new Date(Ge.createdAt).toLocaleString():"Loading..."})]})]})]})})})}),ct.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(xs,{className:"text-red-600",size:24}),e.jsxs("h3",{className:"text-xl font-bold text-cream-900",children:["Delete ",ct.type==="category"?"Category":"Subcategory"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-cream-700 mb-3",children:["Are you sure you want to delete ",e.jsx("strong",{children:ct.name}),"?"]}),ct.subcategoryCount>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(xs,{className:"text-red-600 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-red-800 font-semibold mb-1",children:[" Cannot Delete: This category has ",ct.subcategoryCount," subcategor",ct.subcategoryCount===1?"y":"ies","!"]}),e.jsx("p",{className:"text-red-700 text-sm",children:"Please delete or reassign all subcategories before deleting this category."})]})]})}),ct.productCount>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(xs,{className:"text-red-600 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-red-800 font-semibold mb-1",children:[" Warning: This will delete ",ct.productCount," product",ct.productCount!==1?"s":"","!"]}),e.jsxs("p",{className:"text-red-700 text-sm",children:["All products under this ",ct.type==="category"?"category and its subcategories":"subcategory"," will be permanently deleted. This action cannot be undone."]}),e.jsx("p",{className:"text-red-700 text-sm mt-2 font-medium",children:"Please be careful before proceeding."})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Type ",e.jsx("strong",{children:'"delete"'})," to confirm:"]}),e.jsx("input",{type:"text",value:ct.deleteText,onChange:c=>ft({...ct,deleteText:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"Type 'delete' to confirm",autoFocus:!0})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>ft({...ct,isOpen:!1,deleteText:""}),className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{ct.type==="category"?gu():En()},disabled:ct.deleteText.toLowerCase()!=="delete"||d||ct.subcategoryCount>0,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin inline mr-2",size:16}),"Deleting..."]}):"Delete"})]})]})}),ya.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(zr,{className:"text-blue-600",size:24}),e.jsxs("h3",{className:"text-xl font-bold text-cream-900",children:[ya.type==="category"?"Category":"Subcategory"," Description"]})]}),e.jsx("button",{onClick:()=>vn({...ya,isOpen:!1}),className:"text-cream-600 hover:text-cream-900 transition-colors",children:e.jsx(ss,{size:24})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900 mb-2",children:ya.name}),e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-4 max-h-96 overflow-y-auto",children:e.jsx("p",{className:"text-cream-700 whitespace-pre-wrap leading-relaxed",children:ya.description})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>vn({...ya,isOpen:!1}),className:"px-6 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors",children:"Close"})})]})}),e.jsx(ba,{children:Pe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-cream-200",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900",children:"Create Employee"}),e.jsx("button",{onClick:()=>{_e(!1),Nt({name:"",email:"",password:""})},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(ss,{size:24})})]}),e.jsxs("form",{onSubmit:bu,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:Mt.name,onChange:c=>Nt({...Mt,name:c.target.value}),placeholder:"Enter employee name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:Mt.email,onChange:c=>Nt({...Mt,email:c.target.value}),placeholder:"Enter employee email",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Password *"}),e.jsx("input",{type:"password",required:!0,value:Mt.password,onChange:c=>Nt({...Mt,password:c.target.value}),placeholder:"Enter password",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{_e(!1),Nt({name:"",email:"",password:""})},className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ed,{size:20}),"Create Employee"]})})]})]})]})})}),e.jsx(ba,{children:ts&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-cream-200",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900",children:"Create Department"}),e.jsx("button",{onClick:()=>{ms(!1),Wt({name:"",description:"",isEnabled:!0,operators:[]})},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(ss,{size:24})})]}),e.jsxs("form",{onSubmit:tr,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Department Name *"}),e.jsx("input",{type:"text",required:!0,value:jt.name,onChange:c=>Wt({...jt,name:c.target.value}),placeholder:"Enter department name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:jt.description,onChange:c=>Wt({...jt,description:c.target.value}),placeholder:"Enter department description",rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-cream-900 mb-2",children:[e.jsx("input",{type:"checkbox",checked:jt.isEnabled,onChange:c=>Wt({...jt,isEnabled:c.target.checked}),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{children:"Enabled"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Assign Operators (Optional)"}),e.jsxs("button",{type:"button",onClick:()=>_e(!0),className:"px-3 py-1.5 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1.5",children:[e.jsx(Ed,{size:14}),"Create Employee"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-2",children:"Select employees who can perform actions for this department. Only employees can be assigned."}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-200 rounded-lg p-3",children:ys.length===0?e.jsx("p",{className:"text-sm text-cream-600",children:"No employees available. Create employees first."}):ys.map(c=>{const b=jt.operators.some(N=>String(N)===String(c._id));return e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-cream-50 border border-cream-200 rounded-lg hover:bg-cream-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:N=>{N.target.checked?Wt({...jt,operators:[...jt.operators,c._id]}):Wt({...jt,operators:jt.operators.filter(S=>String(S)!==String(c._id))})},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:c.name}),e.jsx("p",{className:"text-xs text-cream-600",children:c.email})]}),b&&e.jsx(Va,{className:"text-cream-900",size:20})]},c._id)})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{ms(!1),Wt({name:"",description:"",isEnabled:!0,operators:[]})},className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fn,{size:20}),"Create Department"]})})]})]})]})})})]})};var L1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Zj=qa.createContext&&qa.createContext(L1),N9=["attr","size","title"];function w9(s,r){if(s==null)return{};var n=S9(s,r),l,d;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(s);for(d=0;d<m.length;d++)l=m[d],!(r.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(s,l)&&(n[l]=s[l])}return n}function S9(s,r){if(s==null)return{};var n={};for(var l in s)if(Object.prototype.hasOwnProperty.call(s,l)){if(r.indexOf(l)>=0)continue;n[l]=s[l]}return n}function Bm(){return Bm=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(s[l]=n[l])}return s},Bm.apply(this,arguments)}function Kj(s,r){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);r&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),n.push.apply(n,l)}return n}function Vm(s){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Kj(Object(n),!0).forEach(function(l){C9(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Kj(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function C9(s,r,n){return r=A9(r),r in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n,s}function A9(s){var r=E9(s,"string");return typeof r=="symbol"?r:r+""}function E9(s,r){if(typeof s!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var l=n.call(s,r);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}function $1(s){return s&&s.map((r,n)=>qa.createElement(r.tag,Vm({key:n},r.attr),$1(r.child)))}function fs(s){return r=>qa.createElement(T9,Bm({attr:Vm({},s.attr)},r),$1(s.child))}function T9(s){var r=n=>{var{attr:l,size:d,title:m}=s,u=w9(s,N9),p=d||n.size||"1em",g;return n.className&&(g=n.className),s.className&&(g=(g?g+" ":"")+s.className),qa.createElement("svg",Bm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,l,u,{className:g,style:Vm(Vm({color:s.color||n.color},n.style),s.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),m&&qa.createElement("title",null,m),s.children)};return Zj!==void 0?qa.createElement(Zj.Consumer,null,n=>r(n)):r(L1)}function Bl(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(s)}function qx(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(s)}function k9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(s)}function P9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"10"},child:[]},{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"16"},child:[]}]})(s)}function Hx(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(s)}function Jj(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(s)}function D9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(s)}function Gx(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(s)}function Un(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(s)}function O9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(s)}function Qx(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(s)}function ym(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(s)}function F1(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(s)}function Xj(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(s)}function km(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},child:[]}]})(s)}function ev(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(s)}function tv(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(s)}function jm(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(s)}function Pm(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(s)}function U1(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(s)}function R9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(s)}function sv(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(s)}function _9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(s)}function M9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(s)}function z9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(s)}function L9(s){return fs({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M111.4 295.9c-3.5 19.2-17.4 108.7-21.5 134-.3 1.8-1 2.5-3 2.5H12.3c-7.6 0-13.1-6.6-12.1-13.9L58.8 46.6c1.5-9.6 10.1-16.9 20-16.9 152.3 0 165.1-3.7 204 11.4 60.1 23.3 65.6 79.5 44 140.3-21.5 62.6-72.5 89.5-140.1 90.3-43.4.7-69.5-7-75.3 24.2zM357.1 152c-1.8-1.3-2.5-1.8-3 1.3-2 11.4-5.1 22.5-8.8 33.6-39.9 113.8-150.5 103.9-204.5 103.9-6.1 0-10.1 3.3-10.9 9.4-22.6 140.4-27.1 169.7-27.1 169.7-1 7.1 3.5 12.9 10.6 12.9h63.5c8.6 0 15.7-6.3 17.4-14.9.7-5.4-1.1 6.1 14.4-91.3 4.6-22 14.3-19.7 29.3-19.7 71 0 126.4-28.8 142.9-112.3 6.5-34.8 4.6-71.4-23.8-92.6z"},child:[]}]})(s)}function Yx(s){return fs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M165 144.7l-43.3 9.2-.2 142.4c0 26.3 19.8 43.3 46.1 43.3 14.6 0 25.3-2.7 31.2-5.9v-33.8c-5.7 2.3-33.7 10.5-33.7-15.7V221h33.7v-37.8h-33.7zm89.1 51.6l-2.7-13.1H213v153.2h44.3V233.3c10.5-13.8 28.2-11.1 33.9-9.3v-40.8c-6-2.1-26.7-6-37.1 13.1zm92.3-72.3l-44.6 9.5v36.2l44.6-9.5zM44.9 228.3c0-6.9 5.8-9.6 15.1-9.7 13.5 0 30.7 4.1 44.2 11.4v-41.8c-14.7-5.8-29.4-8.1-44.1-8.1-36 0-60 18.8-60 50.2 0 49.2 67.5 41.2 67.5 62.4 0 8.2-7.1 10.9-17 10.9-14.7 0-33.7-6.1-48.6-14.2v40c16.5 7.1 33.2 10.1 48.5 10.1 36.9 0 62.3-15.8 62.3-47.8 0-52.9-67.9-43.4-67.9-63.4zM640 261.6c0-45.5-22-81.4-64.2-81.4s-67.9 35.9-67.9 81.1c0 53.5 30.3 78.2 73.5 78.2 21.2 0 37.1-4.8 49.2-11.5v-33.4c-12.1 6.1-26 9.8-43.6 9.8-17.3 0-32.5-6.1-34.5-26.9h86.9c.2-2.3.6-11.6.6-15.9zm-87.9-16.8c0-20 12.3-28.4 23.4-28.4 10.9 0 22.5 8.4 22.5 28.4zm-112.9-64.6c-17.4 0-28.6 8.2-34.8 13.9l-2.3-11H363v204.8l44.4-9.4.1-50.2c6.4 4.7 15.9 11.2 31.4 11.2 31.8 0 60.8-23.2 60.8-79.6.1-51.6-29.3-79.7-60.5-79.7zm-10.6 122.5c-10.4 0-16.6-3.8-20.9-8.4l-.3-66c4.6-5.1 11-8.8 21.2-8.8 16.2 0 27.4 18.2 27.4 41.4.1 23.9-10.9 41.8-27.4 41.8zm-126.7 33.7h44.6V183.2h-44.6z"},child:[]}]})(s)}function $9(s){return fs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(s)}function Dm(s){return fs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(s)}function av(s){return fs({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"},child:[]}]})(s)}function Om(s){return fs({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M109.25 173.25c24.99-24.99 24.99-65.52 0-90.51-24.99-24.99-65.52-24.99-90.51 0-24.99 24.99-24.99 65.52 0 90.51 25 25 65.52 25 90.51 0zm256 165.49c-24.99-24.99-65.52-24.99-90.51 0-24.99 24.99-24.99 65.52 0 90.51 24.99 24.99 65.52 24.99 90.51 0 25-24.99 25-65.51 0-90.51zm-1.94-231.43l-22.62-22.62c-12.5-12.5-32.76-12.5-45.25 0L20.69 359.44c-12.5 12.5-12.5 32.76 0 45.25l22.62 22.62c12.5 12.5 32.76 12.5 45.25 0l274.75-274.75c12.5-12.49 12.5-32.75 0-45.25z"},child:[]}]})(s)}function F9(s){return fs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"},child:[]}]})(s)}function pc(s){return fs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"},child:[]}]})(s)}function Wx(s){return fs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(s)}function Wf(s){return fs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(s)}function U9(s){return fs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.28 445.86l-73.03-292.13c-3.8-15.19-16.44-25.72-30.87-25.72h-60.25c3.57-10.05 5.88-20.72 5.88-32 0-53.02-42.98-96-96-96s-96 42.98-96 96c0 11.28 2.3 21.95 5.88 32h-60.25c-14.43 0-27.08 10.54-30.87 25.72L1.72 445.86C-6.61 479.17 16.38 512 48.03 512h415.95c31.64 0 54.63-32.83 46.3-66.14zM256 128c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32z"},child:[]}]})(s)}function I9(s){return fs({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.206 9.941h2.949v4.692c-.402.201-.938.268-1.34.268-1.072 0-1.609-.536-1.609-1.743V9.941zm13.47 4.816c-1.523 6.449-7.985 10.442-14.433 8.919C2.794 22.154-1.199 15.691.324 9.243 1.847 2.794 8.309-1.199 14.757.324c6.449 1.523 10.442 7.985 8.919 14.433zm-6.231-5.888a.887.887 0 0 0-.871-.871h-1.609l-3.686-4.222c-.335-.402-.871-.536-1.407-.402l-1.274.401c-.201.067-.268.335-.134.469l4.021 3.82H6.386c-.201 0-.335.134-.335.335v.67c0 .469.402.871.871.871h.938v3.217c0 2.413 1.273 3.82 3.418 3.82.67 0 1.206-.067 1.877-.335v2.145c0 .603.469 1.072 1.072 1.072h.938a.432.432 0 0 0 .402-.402V9.874h1.542c.201 0 .335-.134.335-.335v-.67z"},child:[]}]})(s)}function Zx(s){return fs({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.436 0l-11.91 7.773-1.174 4.276 6.625-4.297L11.65 24h4.391l6.395-24zM14.26 10.098L3.389 17.166 1.564 24h9.008l3.688-13.902Z"},child:[]}]})(s)}function rv(s){return fs({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(s)}function nv(s){return fs({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 20h4c0 1.1-.9 2-2 2s-2-.9-2-2zm-2-1h8v-2H5v2zm11.5-9.5c0 3.82-2.66 5.86-3.77 6.5H5.27c-1.11-.64-3.77-2.68-3.77-6.5C1.5 5.36 4.86 2 9 2s7.5 3.36 7.5 7.5zm-2 0C14.5 6.47 12.03 4 9 4S3.5 6.47 3.5 9.5c0 2.47 1.49 3.89 2.35 4.5h6.3c.86-.61 2.35-2.03 2.35-4.5zm6.87-2.13L20 8l1.37.63L22 10l.63-1.37L24 8l-1.37-.63L22 6l-.63 1.37zM19 6l.94-2.06L22 3l-2.06-.94L19 0l-.94 2.06L16 3l2.06.94L19 6z"},child:[]}]})(s)}function I1(s){return fs({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.5 13H8v-3h2.5V7.5h3V10H16v3h-2.5v2.5h-3V13zM12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm6 9.09c0 4-2.55 7.7-6 8.83-3.45-1.13-6-4.82-6-8.83v-4.7l6-2.25 6 2.25v4.7z"},child:[]}]})(s)}function B9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 17h-8l-3.5 -5h-6.5"},child:[]},{tag:"path",attr:{d:"M21 7h-8l-3.495 5"},child:[]},{tag:"path",attr:{d:"M18 10l3 -3l-3 -3"},child:[]},{tag:"path",attr:{d:"M18 20l3 -3l-3 -3"},child:[]}]})(s)}function V9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 4m0 1a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M7 20l10 0"},child:[]},{tag:"path",attr:{d:"M9 16l0 4"},child:[]},{tag:"path",attr:{d:"M15 16l0 4"},child:[]},{tag:"path",attr:{d:"M8 12l3 -3l2 2l3 -3"},child:[]}]})(s)}function q9(s){return fs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 20l16 0"},child:[]},{tag:"path",attr:{d:"M9.4 10l5.2 0"},child:[]},{tag:"path",attr:{d:"M7.8 15l8.4 0"},child:[]},{tag:"path",attr:{d:"M6 20l5 -15h2l5 15"},child:[]}]})(s)}function H9(s){return fs({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728m-9.9-2.829a5 5 0 010-7.07m7.072 0a5 5 0 010 7.07M13 12a1 1 0 11-2 0 1 1 0 012 0z"},child:[]}]})(s)}const xo=[{value:"RAZORPAY",label:"Razorpay",icon:Zx,color:"#0C4B78",bgColor:"#E3F2FD"},{value:"STRIPE",label:"Stripe",icon:Yx,color:"#635BFF",bgColor:"#F3F4FF"},{value:"PHONEPE",label:"PhonePe",icon:I9,color:"#5F259F",bgColor:"#F5F3FF"},{value:"PAYU",label:"PayU",icon:Wf,color:"#FF5C00",bgColor:"#FFF3E0"}],dx=[{value:"UPI",label:"UPI",icon:Wx,color:"#3B82F6",bgColor:"#EFF6FF"},{value:"CARD",label:"Card",icon:Un,color:"#8B5CF6",bgColor:"#F5F3FF"},{value:"NETBANKING",label:"Net Banking",icon:Wx,color:"#10B981",bgColor:"#ECFDF5"},{value:"WALLET",label:"Wallet",icon:Wf,color:"#F59E0B",bgColor:"#FFFBEB"},{value:"QR",label:"QR Code",icon:F9,color:"#EF4444",bgColor:"#FEF2F2"},{value:"BANK_TRANSFER",label:"Bank Transfer",icon:F1,color:"#06B6D4",bgColor:"#ECFEFF"}],iv={name:"RAZORPAY",display_name:"Razorpay",mode:"SANDBOX",priority:1,traffic_split_percent:100,test_public_key:"",test_secret_key:"",live_public_key:"",live_secret_key:"",supported_methods:["UPI","CARD","NETBANKING","WALLET"],tdr_rate:2},G9=()=>{var xe,I,L;const[s,r]=y.useState([]),[n,l]=y.useState(!0),[d,m]=y.useState(!1),[u,p]=y.useState(!1),[g,h]=y.useState(null),[j,v]=y.useState(iv),[w,E]=y.useState(null),[A,P]=y.useState(null),[q,V]=y.useState(null),[M,R]=y.useState("all"),[ae,H]=y.useState(null),[D,k]=y.useState(!1),Q=y.useCallback(()=>{const _=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:_?`Bearer ${_}`:""}},[]),W=y.useCallback(async()=>{try{l(!0);const _=await fetch("/api/admin/payment-gateways",{headers:Q()});if(!_.ok)throw new Error("Failed to fetch gateways");const me=await _.json();r(me.gateways||[]),V(me.stats)}catch(_){Rt.error(_.message)}finally{l(!1)}},[Q]),te=y.useCallback(async()=>{try{const _=await fetch("/api/payment/health",{headers:Q()});if(_.ok){const me=await _.json();P(me)}}catch{console.error("Failed to fetch health status")}},[Q]);y.useEffect(()=>{W(),te();const _=setInterval(te,3e4);return()=>clearInterval(_)},[W,te]);const ie=s.filter(_=>{switch(M){case"active":return _.is_active;case"sandbox":return _.mode==="SANDBOX";case"production":return _.mode==="PRODUCTION";default:return!0}}),X=_=>{const{name:me,value:fe,type:Me}=_.target;v(se=>({...se,[me]:Me==="number"?parseFloat(fe)||0:fe}))},Se=_=>{v(me=>({...me,supported_methods:me.supported_methods.includes(_)?me.supported_methods.filter(fe=>fe!==_):[...me.supported_methods,_]}))},$=_=>{const me=_.target.value,fe=xo.find(Me=>Me.value===me);v(Me=>({...Me,name:me,display_name:(fe==null?void 0:fe.label)||me}))},re=async _=>{_.preventDefault();try{const me=await fetch("/api/admin/payment-gateways",{method:"POST",headers:Q(),body:JSON.stringify(j)}),fe=await me.json();if(!me.ok)throw new Error(fe.error||"Failed to add gateway");Rt.success(`${j.display_name} gateway added successfully!`),m(!1),v(iv),W(),te()}catch(me){Rt.error(me.message)}},B=async _=>{if(_.preventDefault(),!!g)try{const me=await fetch(`/api/admin/payment-gateways/${g._id}`,{method:"PATCH",headers:Q(),body:JSON.stringify(j)}),fe=await me.json();if(!me.ok)throw new Error(fe.error||"Failed to update gateway");Rt.success(`${j.display_name} gateway updated!`),p(!1),h(null),W(),te()}catch(me){Rt.error(me.message)}},ne=async _=>{try{const me=await fetch(`/api/admin/payment-gateways/${_._id}/toggle`,{method:"POST",headers:Q(),body:JSON.stringify({is_active:!_.is_active})}),fe=await me.json();if(!me.ok)throw new Error(fe.error);Rt.success(fe.message),W(),te()}catch(me){Rt.error(me.message)}},Z=async _=>{E(_._id);try{const fe=await(await fetch(`/api/admin/payment-gateways/${_._id}/test`,{method:"POST",headers:Q()})).json();fe.success?Rt.success(` ${_.name} is responding (${fe.response_time_ms}ms)`):Rt.error(` ${_.name} health check failed`),W(),te()}catch(me){Rt.error(me.message)}finally{E(null)}},ue=async _=>{if(confirm(`Are you sure you want to delete ${_.display_name}? This action cannot be undone.`))try{const me=await fetch(`/api/admin/payment-gateways/${_._id}`,{method:"DELETE",headers:Q()}),fe=await me.json();if(!me.ok)throw new Error(fe.error);Rt.success(fe.message),W(),te()}catch(me){Rt.error(me.message)}},ve=_=>{h(_),v({name:_.name,display_name:_.display_name,mode:_.mode,priority:_.priority,traffic_split_percent:_.traffic_split_percent,test_public_key:"",test_secret_key:"",live_public_key:"",live_secret_key:"",supported_methods:_.supported_methods||[],tdr_rate:_.tdr_rate}),p(!0)},O=_=>{const me=xo.find(Me=>Me.value===_),fe=(me==null?void 0:me.icon)||Un;return e.jsx(fe,{className:"w-6 h-6",style:{color:me==null?void 0:me.color}})},J=_=>{const me=dx.find(Me=>Me.value===_),fe=(me==null?void 0:me.icon)||Un;return e.jsx(fe,{className:"w-4 h-4"})},z=_=>_?new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",ye=_=>{var me,fe,Me;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>_?p(!1):m(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden transform transition-all",onClick:se=>se.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:_?e.jsx(ym,{className:"w-8 h-8 text-white"}):e.jsx(jm,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:_?`Edit ${g==null?void 0:g.display_name}`:"Add Payment Gateway"}),e.jsx("p",{className:"text-indigo-100",children:_?"Update gateway configuration":"Configure a new payment gateway"})]})]}),e.jsx("button",{onClick:()=>_?p(!1):m(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(z9,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:_?B:re,className:"p-8 overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(U1,{className:"w-5 h-5 text-indigo-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Basic Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[e.jsx(Un,{className:"w-4 h-4"}),e.jsx("span",{children:"Gateway Provider"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>!_&&k(!D),disabled:_,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all text-left flex items-center justify-between disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:(me=xo.find(se=>se.value===j.name))==null?void 0:me.bgColor,color:(fe=xo.find(se=>se.value===j.name))==null?void 0:fe.color},children:O(j.name)}),e.jsx("span",{className:"font-medium text-gray-900",children:(Me=xo.find(se=>se.value===j.name))==null?void 0:Me.label})]}),e.jsx(D9,{className:`w-5 h-5 text-gray-400 transition-transform ${D?"rotate-180":""}`})]}),D&&!_&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border border-gray-300 rounded-xl shadow-xl overflow-hidden",children:xo.map(se=>{const le=se.icon;return e.jsxs("button",{type:"button",onClick:()=>{$({target:{value:se.value}}),k(!1)},className:"w-full px-4 py-3 flex items-center space-x-3 hover:bg-indigo-50 transition-colors text-left",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:se.bgColor,color:se.color},children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-medium text-gray-900",children:se.label}),j.name===se.value&&e.jsx(Jj,{className:"w-5 h-5 text-indigo-600 ml-auto"})]},se.value)})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[e.jsx(pc,{className:"w-4 h-4"}),e.jsx("span",{children:"Environment Mode"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"mode",value:j.mode,onChange:X,className:"w-full px-4 py-3 pl-10 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"SANDBOX",children:"Sandbox (Test)"}),e.jsx("option",{value:"PRODUCTION",children:"Production"})]}),j.mode==="SANDBOX"?e.jsx(Dm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-yellow-600"}):e.jsx(pc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-600"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[e.jsx(rv,{className:"w-4 h-4"}),e.jsx("span",{children:"Priority (1=Highest)"})]}),e.jsx("input",{type:"number",name:"priority",value:j.priority,onChange:X,min:1,max:10,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[e.jsx(U9,{className:"w-4 h-4"}),e.jsx("span",{children:"Traffic Split %"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"traffic_split_percent",value:j.traffic_split_percent,onChange:X,min:0,max:100,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[e.jsx(Om,{className:"w-4 h-4"}),e.jsx("span",{children:"TDR Rate %"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"tdr_rate",value:j.tdr_rate,onChange:X,step:.1,min:0,max:10,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(km,{className:"w-5 h-5 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"API Credentials"})]}),e.jsx("div",{className:"space-y-4",children:j.mode==="SANDBOX"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[e.jsx(km,{className:"w-4 h-4"}),e.jsx("span",{children:"Test Public Key"})]}),e.jsx("input",{type:"text",name:"test_public_key",value:j.test_public_key,onChange:X,placeholder:_?"(unchanged if empty)":"pk_test_...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[e.jsx(ev,{className:"w-4 h-4"}),e.jsx("span",{children:"Test Secret Key"})]}),e.jsx("input",{type:"password",name:"test_secret_key",value:j.test_secret_key,onChange:X,placeholder:_?"(unchanged if empty)":"sk_test_...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[e.jsx(km,{className:"w-4 h-4"}),e.jsx("span",{children:"Live Public Key"})]}),e.jsx("input",{type:"text",name:"live_public_key",value:j.live_public_key,onChange:X,placeholder:_?"(unchanged if empty)":"pk_live_...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[e.jsx(ev,{className:"w-4 h-4"}),e.jsx("span",{children:"Live Secret Key"})]}),e.jsx("input",{type:"password",name:"live_secret_key",value:j.live_secret_key,onChange:X,placeholder:_?"(unchanged if empty)":"sk_live_...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Un,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Supported Payment Methods"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:dx.map(se=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",id:`method-${se.value}`,checked:j.supported_methods.includes(se.value),onChange:()=>Se(se.value),className:"sr-only"}),e.jsxs("label",{htmlFor:`method-${se.value}`,className:`block p-4 rounded-xl border-2 cursor-pointer transition-all ${j.supported_methods.includes(se.value)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:se.bgColor,color:se.color},children:J(se.value)}),e.jsx("span",{className:"font-medium text-gray-700",children:se.label})]}),j.supported_methods.includes(se.value)&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Jj,{className:"w-3 h-3 text-white"})})})]})]},se.value))})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>_?p(!1):m(!1),className:"px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl flex items-center space-x-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx(ym,{className:"w-5 h-5"}),e.jsx("span",{children:"Update Gateway"})]}):e.jsxs(e.Fragment,{children:[e.jsx(jm,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Gateway"})]})})]})]})]})})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl",children:e.jsx(Un,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payment Gateway Manager"}),e.jsx("p",{className:"text-gray-600",children:"Configure, monitor, and manage all payment gateways in one place"})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>window.location.href="/admin/test-payment",className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white font-medium rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center space-x-2",children:[e.jsx(Bl,{className:"w-5 h-5"}),e.jsx("span",{children:"Test Payment"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center space-x-2 self-start",children:[e.jsx(jm,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Gateway"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Gateways"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:s.length})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(O9,{className:"w-8 h-8 text-blue-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-gray-500",children:[e.jsx(Bl,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[s.filter(_=>_.is_active).length," active"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[(q==null?void 0:q.success_rate)||0,"%"]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx($9,{className:"w-8 h-8 text-green-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-gray-500",children:[e.jsx(_9,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Last 30 days"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg TDR Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[(q==null?void 0:q.avg_tdr)||0,"%"]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(Om,{className:"w-8 h-8 text-purple-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-gray-500",children:[e.jsx(Qx,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Transaction cost"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:q!=null&&q.total_transactions?(q.total_transactions/1e3).toFixed(1)+"k":"0"})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:e.jsx(k9,{className:"w-8 h-8 text-orange-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-gray-500",children:[e.jsx(M9,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"All time"})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 mb-8 shadow-lg ${(A==null?void 0:A.overall)==="HEALTHY"?"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200":(A==null?void 0:A.overall)==="DEGRADED"?"bg-gradient-to-r from-yellow-50 to-amber-50 border border-yellow-200":"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200"}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${(A==null?void 0:A.overall)==="HEALTHY"?"bg-green-100 text-green-600":(A==null?void 0:A.overall)==="DEGRADED"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`,children:e.jsx(I1,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["System Status: ",(A==null?void 0:A.overall)||"Unknown"]}),e.jsx("p",{className:"text-gray-600",children:(A==null?void 0:A.overall)==="HEALTHY"?"All systems are operating normally":(A==null?void 0:A.overall)==="DEGRADED"?"Some systems are experiencing issues":"System health status unavailable"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((xe=A==null?void 0:A.metrics)==null?void 0:xe.healthy_gateways)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Healthy"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((I=A==null?void 0:A.metrics)==null?void 0:I.total_gateways)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[((L=A==null?void 0:A.metrics)==null?void 0:L.available_capacity)||0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Capacity"})]}),e.jsx("button",{onClick:te,className:"p-2 bg-white rounded-xl border border-gray-300 hover:bg-gray-50 transition-colors",children:e.jsx(Pm,{className:`w-5 h-5 text-gray-600 ${A?"animate-spin":""}`})})]})]})}),e.jsxs("div",{className:"flex space-x-2 mb-6 overflow-x-auto pb-2",children:[e.jsxs("button",{onClick:()=>R("all"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center space-x-2 whitespace-nowrap ${M==="all"?"bg-indigo-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:[e.jsx(F1,{className:"w-4 h-4"}),e.jsx("span",{children:"All Gateways"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:s.length})]}),e.jsxs("button",{onClick:()=>R("active"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center space-x-2 whitespace-nowrap ${M==="active"?"bg-green-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:[e.jsx(H9,{className:"w-4 h-4"}),e.jsx("span",{children:"Active"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:s.filter(_=>_.is_active).length})]}),e.jsxs("button",{onClick:()=>R("sandbox"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center space-x-2 whitespace-nowrap ${M==="sandbox"?"bg-yellow-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:[e.jsx(Dm,{className:"w-4 h-4"}),e.jsx("span",{children:"Sandbox"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:s.filter(_=>_.mode==="SANDBOX").length})]}),e.jsxs("button",{onClick:()=>R("production"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center space-x-2 whitespace-nowrap ${M==="production"?"bg-purple-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:[e.jsx(pc,{className:"w-4 h-4"}),e.jsx("span",{children:"Production"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:s.filter(_=>_.mode==="PRODUCTION").length})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:n?e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading gateways..."})]}):ie.length===0?e.jsxs("div",{className:"col-span-full bg-white rounded-2xl p-12 text-center border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Un,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Gateways Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:M==="all"?"Add your first payment gateway to get started":`No ${M} gateways found`}),e.jsxs("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl inline-flex items-center space-x-2",children:[e.jsx(jm,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Gateway"})]})]}):ie.map(_=>{var me,fe;return e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg border-2 overflow-hidden transition-all hover:shadow-xl ${_.is_active?"border-green-200 hover:border-green-300":"border-gray-200 hover:border-gray-300 opacity-75"}`,children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:((me=xo.find(Me=>Me.value===_.name))==null?void 0:me.bgColor)||"#f3f4f6"},children:O(_.name)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:_.display_name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_.mode==="SANDBOX"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:_.mode==="SANDBOX"?e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Dm,{className:"w-3 h-3"}),e.jsx("span",{children:"Sandbox"})]}):e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(pc,{className:"w-3 h-3"}),e.jsx("span",{children:"Production"})]})}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_.is_healthy?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_.is_healthy?e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Hx,{className:"w-3 h-3"}),e.jsx("span",{children:"Healthy"})]}):e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(qx,{className:"w-3 h-3"}),e.jsx("span",{children:"Unhealthy"})]})})]})]})]}),e.jsx("button",{onClick:()=>H(ae===_._id?null:_._id),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Gx,{className:`w-5 h-5 text-gray-500 transition-transform ${ae===_._id?"rotate-90":""}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),e.jsx("span",{className:`text-sm font-medium ${_.is_active?"text-green-600":"text-gray-500"}`,children:_.is_active?"Active":"Inactive"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_.is_active,onChange:()=>ne(_),className:"sr-only"}),e.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${_.is_active?"bg-green-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${_.is_active?"left-7":"left-1"}`})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg inline-block mb-2",children:e.jsx(rv,{className:"w-5 h-5 text-blue-600"})}),e.jsx("div",{className:"text-xs text-gray-600",children:"Priority"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:_.priority})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg inline-block mb-2",children:e.jsx(q9,{className:"w-5 h-5 text-purple-600"})}),e.jsx("div",{className:"text-xs text-gray-600",children:"Traffic Split"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[_.traffic_split_percent,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg inline-block mb-2",children:e.jsx(Om,{className:"w-5 h-5 text-yellow-600"})}),e.jsx("div",{className:"text-xs text-gray-600",children:"TDR Rate"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[_.tdr_rate,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg inline-block mb-2",children:e.jsx(Bl,{className:"w-5 h-5 text-red-600"})}),e.jsx("div",{className:"text-xs text-gray-600",children:"Failures"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:_.failure_count})]})]}),ae===_._id&&e.jsxs("div",{className:"border-t border-gray-200 p-6 animate-fadeIn",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Un,{className:"w-4 h-4 text-gray-500"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Supported Methods"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(fe=_.supported_methods)==null?void 0:fe.map(Me=>{const se=dx.find(le=>le.value===Me);return e.jsxs("span",{className:"px-3 py-1.5 rounded-lg text-xs font-medium border flex items-center space-x-1.5",style:{borderColor:se==null?void 0:se.bgColor,backgroundColor:(se==null?void 0:se.bgColor)+"40",color:se==null?void 0:se.color},children:[J(Me),e.jsx("span",{children:(se==null?void 0:se.label)||Me})]},Me)})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Bl,{className:"w-4 h-4 text-gray-500"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Last Health Check"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:_.last_health_check?z(_.last_health_check):"Never checked"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>Z(_),disabled:w===_._id||!_.is_active,className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center space-x-2 ${w===_._id||!_.is_active?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200"}`,children:w===_._id?e.jsxs(e.Fragment,{children:[e.jsx(Pm,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Testing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Bl,{className:"w-4 h-4"}),e.jsx("span",{children:"Test Connection"})]})}),e.jsxs("button",{onClick:()=>ve(_),className:"px-4 py-2 bg-purple-50 text-purple-600 hover:bg-purple-100 border border-purple-200 rounded-lg font-medium transition-all flex items-center justify-center space-x-2",children:[e.jsx(ym,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit Gateway"})]}),e.jsxs("button",{onClick:()=>ue(_),className:"px-4 py-2 bg-red-50 text-red-600 hover:bg-red-100 border border-red-200 rounded-lg font-medium transition-all flex items-center justify-center space-x-2 col-span-2",children:[e.jsx(sv,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete Gateway"})]})]})]}),ae!==_._id&&e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>Z(_),disabled:w===_._id||!_.is_active,className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center space-x-2 ${w===_._id||!_.is_active?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200"}`,children:[w===_._id?e.jsx(Pm,{className:"w-4 h-4 animate-spin"}):e.jsx(Bl,{className:"w-4 h-4"}),e.jsx("span",{children:"Test"})]}),e.jsxs("button",{onClick:()=>ve(_),className:"flex-1 px-4 py-2 bg-purple-50 text-purple-600 hover:bg-purple-100 border border-purple-200 rounded-lg font-medium transition-all flex items-center justify-center space-x-2",children:[e.jsx(ym,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit"})]}),e.jsx("button",{onClick:()=>ue(_),className:"px-4 py-2 bg-red-50 text-red-600 hover:bg-red-100 border border-red-200 rounded-lg font-medium transition-all flex items-center justify-center",children:e.jsx(sv,{className:"w-4 h-4"})})]})})]},_._id)})}),d&&ye(!1),u&&ye(!0)]})},Q9=()=>{const[s,r]=y.useState(""),[n,l]=y.useState(5),[d,m]=y.useState(!1),[u,p]=y.useState([]),[g,h]=y.useState(!0),[j,v]=y.useState(!0);y.useEffect(()=>{w()},[]);const w=async()=>{try{const R=localStorage.getItem("token"),H=await(await fetch("/api/admin/payment-gateways",{headers:{Authorization:`Bearer ${R}`}})).json(),D=Array.isArray(H)?H:H.gateways||[];p(D.filter(k=>k.is_active))}catch(R){console.error("Failed to fetch gateways:",R),p([])}},E=()=>new Promise(R=>{const ae=document.createElement("script");ae.src="https://checkout.razorpay.com/v1/checkout.js",ae.onload=()=>R(!0),ae.onerror=()=>R(!1),document.body.appendChild(ae)}),A=R=>{const ae=R.target.value;if(ae===""||ae==="."){l(1);return}const H=parseFloat(ae);!isNaN(H)&&H>=0&&l(H)},P=async()=>{m(!0);try{const R=localStorage.getItem("token"),ae=await fetch("/api/payment/test-initialize",{method:"POST",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"},body:JSON.stringify({amount:n,currency:"INR",preferredGateway:s||void 0,testMode:!0})});if(!ae.ok)throw new Error(`Payment initialization failed: ${ae.statusText}`);const H=await ae.json();if(console.log("Payment initialized:",H),!H.success)throw new Error(H.error||"Payment initialization failed");if(H.redirect_required)V(H);else if(H.checkout_data&&H.checkout_data.key)await q(H);else throw new Error("Unknown payment gateway response format")}catch(R){console.error("Payment initialization failed:",R),alert("Failed to initialize payment: "+R.message)}finally{m(!1)}},q=async R=>{if(!await E()){alert("Failed to load Razorpay SDK");return}const H={key:R.checkout_data.key,amount:R.checkout_data.amount,currency:"INR",name:"Test Payment",description:"Testing Razorpay Integration",order_id:R.checkout_data.order_id,handler:async function(k){console.log("Razorpay Success:",k);try{const Q=localStorage.getItem("token");(await(await fetch("/api/payment/verify",{method:"POST",headers:{Authorization:`Bearer ${Q}`,"Content-Type":"application/json"},body:JSON.stringify({razorpay_order_id:k.razorpay_order_id,razorpay_payment_id:k.razorpay_payment_id,razorpay_signature:k.razorpay_signature})})).json()).success?alert(` Payment Successful!
Payment ID: `+k.razorpay_payment_id):alert(" Payment verification failed")}catch(Q){console.error("Verification failed:",Q)}},prefill:{name:"Test User",email:"test@example.com",contact:"9999999999"},theme:{color:"#3399cc"},modal:{ondismiss:function(){console.log("Razorpay checkout closed")}}};new window.Razorpay(H).open()},V=R=>{const ae=document.createElement("form");ae.method="POST",ae.action=R.checkout_url,Object.keys(R.checkout_data).forEach(H=>{const D=document.createElement("input");D.type="hidden",D.name=H,D.value=R.checkout_data[H],ae.appendChild(D)}),document.body.appendChild(ae),console.log("Submitting PayU form to:",R.checkout_url),ae.submit()},M=R=>{switch(R){case"RAZORPAY":return e.jsx(Zx,{className:"w-5 h-5",style:{color:"#0C4B78"}});case"STRIPE":return e.jsx(Yx,{className:"w-5 h-5",style:{color:"#635BFF"}});case"PHONEPE":return e.jsx(av,{className:"w-5 h-5",style:{color:"#5F259F"}});case"PAYU":return e.jsx(Un,{className:"w-5 h-5",style:{color:"#FF5C00"}});case"CASHFREE":return e.jsx(Wf,{className:"w-5 h-5",style:{color:"#00C48C"}});case"PAYPAL":return e.jsx(L9,{className:"w-5 h-5",style:{color:"#003087"}});default:return e.jsx(Un,{className:"w-5 h-5"})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6 mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl shadow-lg",children:e.jsx(tv,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Payment Gateway Tester"}),e.jsx("p",{className:"text-gray-600",children:"Test real payment flows in sandbox environment"})]})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin/payment-gateways",className:"px-6 py-3 bg-white text-indigo-600 font-medium rounded-xl hover:bg-gray-50 transition-all shadow-lg hover:shadow-xl border border-indigo-200 flex items-center justify-center space-x-2 self-start",children:[e.jsx(U1,{className:"w-5 h-5"}),e.jsx("span",{children:"Manage Gateways"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Gateways"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:u.length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(Bl,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Test Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:["",n.toFixed(2)]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(Qx,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ready to Test"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:u.length>0&&n>=1?"Yes":"No"})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(I1,{className:"w-6 h-6 text-purple-600"})})]})})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-8 py-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(tv,{className:"w-6 h-6 text-white"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Test Configuration"})]}),e.jsx("p",{className:"text-indigo-100 mt-1",children:"Configure your payment test parameters"})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center space-x-2",children:[e.jsx(km,{className:"w-4 h-4"}),e.jsx("span",{children:"Select Payment Gateway"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:s,onChange:R=>r(R.target.value),className:"w-full px-4 py-3.5 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all outline-none appearance-none",children:[e.jsx("option",{value:"",children:"Auto-select (based on priority)"}),u.map(R=>e.jsxs("option",{value:R.name,children:[R.display_name," (",R.mode,")"]},R._id))]}),e.jsx(Gx,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 rotate-90 text-gray-400"})]}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Xj,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-blue-700",children:u.length===0?"No gateways configured. Please add gateways first.":"Leave empty to let the system choose based on priority & traffic split"})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center space-x-2",children:[e.jsx(Qx,{className:"w-4 h-4"}),e.jsx("span",{children:"Test Amount"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx("span",{className:"text-gray-900 font-bold text-lg",children:""})}),e.jsx("input",{type:"number",value:n,onChange:A,className:"w-full pl-12 pr-4 py-3.5 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all outline-none",min:"1",step:"0.01"}),e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:e.jsx("span",{className:"text-gray-500",children:"INR"})})]}),e.jsx("div",{className:"mt-3",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Minimum amount: 1.00"})})]}),e.jsx("button",{onClick:P,disabled:d||n<1||u.length===0,className:`w-full py-4 px-6 rounded-xl font-bold text-lg transition-all flex items-center justify-center space-x-3 ${d||n<1||u.length===0?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 hover:shadow-2xl hover:-translate-y-0.5 active:translate-y-0 shadow-lg"}`,children:d?e.jsxs(e.Fragment,{children:[e.jsx(Pm,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{children:"Initializing Payment..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(pc,{className:"w-6 h-6"}),e.jsx("span",{children:"Launch Test Payment"})]})}),e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(R9,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Safe Testing Environment"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"All transactions are processed in sandbox mode. No real money will be transferred."})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(V9,{className:"w-6 h-6 text-indigo-600"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Gateway Behavior"})]}),e.jsx("button",{onClick:()=>h(!g),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Gx,{className:`w-5 h-5 text-gray-500 transition-transform ${g?"rotate-90":""}`})})]}),g&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 flex items-center space-x-2",children:[e.jsx(Xj,{className:"w-4 h-4"}),e.jsx("span",{children:"What Will Happen"})]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsx(Zx,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Razorpay"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Opens payment popup with multiple options"})]})]}),e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-1.5 bg-purple-100 rounded-lg",children:e.jsx(Un,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"PayU"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Redirects to PayU's payment page"})]})]}),e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:e.jsx(Yx,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Stripe"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Redirects to Stripe Checkout"})]})]}),e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-1.5 bg-pink-100 rounded-lg",children:e.jsx(av,{className:"w-4 h-4 text-pink-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"PhonePe"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Shows QR code or app redirect"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-800 flex items-center space-x-2 mb-4",children:[e.jsx(nv,{className:"w-4 h-4"}),e.jsx("span",{children:"Test Cards & UPI"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Hx,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:"Success Card"})]}),e.jsx("p",{className:"font-mono text-sm text-gray-800",children:"4111 1111 1111 1111"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"CVV: Any | Expiry: Any future date"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-xl p-4 border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(qx,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-semibold text-red-800",children:"Failure Card"})]}),e.jsx("p",{className:"font-mono text-sm text-gray-800",children:"4000 0000 0000 0002"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"CVV: Any | Expiry: Any future date"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Wx,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-800",children:"Test UPI"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-mono text-sm text-gray-800",children:"success@razorpay"}),e.jsx("p",{className:"font-mono text-sm text-gray-800",children:"failure@razorpay"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Bl,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Active Gateways"})]}),e.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 text-sm font-medium rounded-full",children:[u.length," Active"]})]})}),e.jsx("div",{className:"p-6",children:u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Un,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-600",children:"No active gateways"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure gateways to start testing"}),e.jsx("button",{onClick:()=>window.location.href="/admin/payment-gateways",className:"mt-4 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Configure Now"})]}):e.jsx("div",{className:"space-y-4",children:u.map(R=>e.jsxs("div",{className:"group border-2 border-gray-200 hover:border-indigo-300 rounded-xl p-4 transition-all hover:shadow-md cursor-pointer",onClick:()=>r(R.name),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg group-hover:bg-indigo-50 transition-colors",children:M(R.name)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:R.display_name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${R.mode==="SANDBOX"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:R.mode==="SANDBOX"?e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Dm,{className:"w-3 h-3"}),e.jsx("span",{children:"Sandbox"})]}):e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(pc,{className:"w-3 h-3"}),e.jsx("span",{children:"Production"})]})}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${R.is_healthy?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:R.is_healthy?"Healthy":"Unhealthy"})]})]})]}),s===R.name&&e.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(B9,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:[R.traffic_split_percent,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Om,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:[R.tdr_rate,"% TDR"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-gray-600",children:[e.jsx(P9,{className:"w-4 h-4"}),e.jsxs("span",{children:["P",R.priority]})]})]})]},R._id))})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(nv,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{children:"Quick Testing Tips"})]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Test both successful and failed payments"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Try different payment methods (Card, UPI, Net Banking)"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Check mobile responsiveness of payment pages"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Verify webhook delivery for completed payments"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Monitor gateway health in real-time"})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 ${u.length>0&&n>=100?"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200":"bg-gradient-to-r from-yellow-50 to-amber-50 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-3 rounded-xl ${u.length>0&&n>=100?"bg-green-100 text-green-600":"bg-yellow-100 text-yellow-600"}`,children:u.length>0&&n>=100?e.jsx(Hx,{className:"w-6 h-6"}):e.jsx(qx,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Testing Status"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:u.length>0&&n>=100?"Ready to launch payment test":"Configure gateways and set amount to start testing"})]})]})})]})]})]})})},Y9=()=>{var g;const[s]=_v(),r=Ha(),[n,l]=y.useState(null),[d,m]=y.useState(!0),u=s.get("orderId"),p=s.get("paymentId");return y.useEffect(()=>{(async()=>{if(!u){m(!1);return}try{const j=localStorage.getItem("token"),v=await fetch(`${we}/orders/${u}`,{headers:{Authorization:`Bearer ${j}`}});if(v.ok){const w=await v.json();l(w.order||w)}}catch(j){console.error("Failed to fetch order:",j)}finally{m(!1)}})()},[u]),d?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center",children:e.jsx(Jt,{className:"w-12 h-12 animate-spin text-green-600"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(va,{className:"w-12 h-12 text-green-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your order has been placed successfully."}),n&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Order Number"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["#",n.orderNumber]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Amount Paid"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["",(n.totalPrice||((g=n.priceSnapshot)==null?void 0:g.finalTotal)||0).toFixed(2)]})]}),p&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Payment ID"}),e.jsx("span",{className:"font-mono text-xs text-gray-700",children:p})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>r(`/order/${u}`),className:"w-full flex items-center justify-center gap-2 bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(ia,{className:"w-5 h-5"}),"View Order Details"]}),e.jsxs("button",{onClick:()=>r("/"),className:"w-full flex items-center justify-center gap-2 bg-gray-100 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors",children:["Continue Shopping",e.jsx($r,{className:"w-5 h-5"})]})]})]})})},W9=()=>{const[s]=_v(),r=Ha(),n=s.get("orderId"),l=s.get("error")||"Payment could not be completed",d=()=>{r(n?`/order/${n}`:"/profile")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ol,{className:"w-12 h-12 text-red-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-600 mb-6",children:l}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 text-left",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Don't worry!"})," Your order has been saved. You can retry the payment from your order details page or contact our support team for assistance."]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(zi,{className:"w-5 h-5"}),"Retry Payment"]}),e.jsxs("button",{onClick:()=>r("/"),className:"w-full flex items-center justify-center gap-2 bg-gray-100 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(yc,{className:"w-5 h-5"}),"Back to Home"]}),e.jsxs("a",{href:"tel:+919876543210",className:"w-full flex items-center justify-center gap-2 text-gray-600 py-2 hover:text-gray-800 transition-colors",children:[e.jsx(fc,{className:"w-4 h-4"}),"Contact Support"]})]})]})})},Z9=()=>{const s=Ha();return e.jsx("div",{className:"min-h-screen bg-linear-to-br from-cream-50 to-cream-100 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("h1",{className:"text-9xl font-bold text-cream-200 select-none",children:"404"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-cream-900 text-white px-6 py-2 rounded-full shadow-lg",children:e.jsx("span",{className:"text-lg font-semibold",children:"Page Not Found"})})})]}),e.jsx("h2",{className:"text-2xl font-bold text-cream-900 mb-4",children:"Oops! Looks like you're lost"}),e.jsx("p",{className:"text-cream-600 mb-8 leading-relaxed",children:"The page you're looking for doesn't exist or has been moved. Don't worry, let's get you back on track!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs("button",{onClick:()=>s(-1),className:"flex items-center justify-center gap-2 px-6 py-3 bg-white border-2 border-cream-300 text-cream-700 rounded-lg font-semibold hover:bg-cream-50 hover:border-cream-400 transition-all shadow-sm",children:[e.jsx(yc,{className:"w-5 h-5"}),"Go Back"]}),e.jsxs(Ps,{to:"/",className:"flex items-center justify-center gap-2 px-6 py-3 bg-cream-900 text-white rounded-lg font-semibold hover:bg-cream-800 transition-all shadow-lg",children:[e.jsx($v,{className:"w-5 h-5"}),"Home Page"]})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-cream-200",children:[e.jsx("p",{className:"text-sm text-cream-500 mb-4",children:"Popular destinations:"}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[e.jsx(Ps,{to:"/digital-print",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"Digital Print"}),e.jsx("span",{className:"text-cream-300",children:""}),e.jsx(Ps,{to:"/about",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"About Us"}),e.jsx("span",{className:"text-cream-300",children:""}),e.jsx(Ps,{to:"/contact",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"Contact"}),e.jsx("span",{className:"text-cream-300",children:""}),e.jsx(Ps,{to:"/reviews",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"Reviews"})]})]})]})})},K9=[{path:"/",element:e.jsx(OT,{}),errorElement:e.jsx(aa,{}),children:[{index:!0,element:e.jsx(qT,{}),errorElement:e.jsx(aa,{})},{path:"digital-print",element:e.jsx(HT,{}),errorElement:e.jsx(aa,{})},{path:"digital-print/:categoryId",element:e.jsx(ox,{}),errorElement:e.jsx(aa,{})},{path:"digital-print/:categoryId/gloss-finish",element:e.jsx(kd,{}),errorElement:e.jsx(aa,{})},{path:"digital-print/:categoryId/:subCategoryId/:nestedSubCategoryId",element:e.jsx(ox,{}),errorElement:e.jsx(aa,{})},{path:"digital-print/:categoryId/:subCategoryId",element:e.jsx(ox,{}),errorElement:e.jsx(aa,{})},{path:"digital-print/:categoryId/:subCategoryId/:nestedSubCategoryId/:productId",element:e.jsx(kd,{}),errorElement:e.jsx(aa,{})},{path:"digital-print/:categoryId/:subCategoryId/:productId",element:e.jsx(kd,{}),errorElement:e.jsx(aa,{})},{path:"digital-print/:categoryId/:productId",element:e.jsx(kd,{}),errorElement:e.jsx(aa,{})},{path:"upload",element:e.jsx(ZT,{}),errorElement:e.jsx(aa,{})},{path:"about",element:e.jsx(ek,{}),errorElement:e.jsx(aa,{})},{path:"policy",element:e.jsx(tk,{}),errorElement:e.jsx(aa,{})},{path:"contact",element:e.jsx(sk,{}),errorElement:e.jsx(aa,{})},{path:"login",element:e.jsx(rk,{}),errorElement:e.jsx(aa,{})},{path:"signup",element:e.jsx(ok,{}),errorElement:e.jsx(aa,{})},{path:"profile",element:e.jsx(uk,{}),errorElement:e.jsx(aa,{})},{path:"my-orders",element:e.jsx(gk,{}),errorElement:e.jsx(aa,{})},{path:"orders/:orderId",element:e.jsx(Yj,{}),errorElement:e.jsx(aa,{})},{path:"order/:orderId",element:e.jsx(Yj,{}),errorElement:e.jsx(aa,{})},{path:"admin/dashboard",element:e.jsx(v9,{}),errorElement:e.jsx(aa,{})},{path:"admin/payment-gateways",element:e.jsx(G9,{}),errorElement:e.jsx(aa,{})},{path:"admin/test-payment",element:e.jsx(Q9,{}),errorElement:e.jsx(aa,{})},{path:"employee/dashboard",element:e.jsx(yk,{}),errorElement:e.jsx(aa,{})},{path:"department-portal",element:e.jsx(bk,{}),errorElement:e.jsx(aa,{})},{path:"reviews",element:e.jsx(ck,{}),errorElement:e.jsx(aa,{})},{path:"payment/success",element:e.jsx(Y9,{}),errorElement:e.jsx(aa,{})},{path:"payment/failure",element:e.jsx(W9,{}),errorElement:e.jsx(aa,{})},{path:"*",element:e.jsx(Z9,{}),errorElement:e.jsx(aa,{})}]}],bc=document.getElementById("root");if(!bc)throw new Error("Could not find root element to mount to");const lv=bS(K9),J9=bc.innerHTML.trim().length>0&&!bc.innerHTML.includes("<!--app-html-->")&&bc.children.length>0;J9?qb.hydrateRoot(bc,e.jsx(aa,{children:e.jsx(yy,{router:lv})})):qb.createRoot(bc).render(e.jsx(aa,{children:e.jsx(yy,{router:lv})}));export{we as A,Fn as B,va as C,Ny as F,Jt as L,Ql as M,fc as P,qa as R,In as U,ss as X,Zd as _,$r as a,Ym as b,ba as c,jc as d,sn as e,xs as f,X9 as g,ew as h,e as j,st as m,y as r};
