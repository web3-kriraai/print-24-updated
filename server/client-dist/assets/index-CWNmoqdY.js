function ow(s,r){for(var i=0;i<r.length;i++){const l=r[i];if(typeof l!="string"&&!Array.isArray(l)){for(const d in l)if(d!=="default"&&!(d in s)){const m=Object.getOwnPropertyDescriptor(l,d);m&&Object.defineProperty(s,d,m.get?m:{enumerable:!0,get:()=>l[d]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const u of m.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function i(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(d){if(d.ep)return;d.ep=!0;const m=i(d);fetch(d.href,m)}})();var Ak=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var vf={exports:{}},od={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb;function dw(){if(lb)return od;lb=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(l,d,m){var u=null;if(m!==void 0&&(u=""+m),d.key!==void 0&&(u=""+d.key),"key"in d){m={};for(var f in d)f!=="key"&&(m[f]=d[f])}else m=d;return d=m.ref,{$$typeof:s,type:l,key:u,ref:d!==void 0?d:null,props:m}}return od.Fragment=r,od.jsx=i,od.jsxs=i,od}var ob;function uw(){return ob||(ob=1,vf.exports=dw()),vf.exports}var e=uw(),Nf={exports:{}},cd={},wf={exports:{}},Sf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function mw(){return cb||(cb=1,(function(s){function r(_,X){var Q=_.length;_.push(X);e:for(;0<Q;){var ne=Q-1>>>1,Ne=_[ne];if(0<d(Ne,X))_[ne]=X,_[Q]=Ne,Q=ne;else break e}}function i(_){return _.length===0?null:_[0]}function l(_){if(_.length===0)return null;var X=_[0],Q=_.pop();if(Q!==X){_[0]=Q;e:for(var ne=0,Ne=_.length,C=Ne>>>1;ne<C;){var H=2*(ne+1)-1,re=_[H],je=H+1,ge=_[je];if(0>d(re,Q))je<Ne&&0>d(ge,re)?(_[ne]=ge,_[je]=Q,ne=je):(_[ne]=re,_[H]=Q,ne=H);else if(je<Ne&&0>d(ge,Q))_[ne]=ge,_[je]=Q,ne=je;else break e}}return X}function d(_,X){var Q=_.sortIndex-X.sortIndex;return Q!==0?Q:_.id-X.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;s.unstable_now=function(){return m.now()}}else{var u=Date,f=u.now();s.unstable_now=function(){return u.now()-f}}var g=[],p=[],j=1,v=null,w=3,k=!1,E=!1,T=!1,F=!1,L=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function le(_){for(var X=i(p);X!==null;){if(X.callback===null)l(p);else if(X.startTime<=_)l(p),X.sortIndex=X.expirationTime,r(g,X);else break;X=i(p)}}function G(_){if(T=!1,le(_),!E)if(i(g)!==null)E=!0,z||(z=!0,pe());else{var X=i(p);X!==null&&Y(G,X.startTime-_)}}var z=!1,P=-1,J=5,W=-1;function oe(){return F?!0:!(s.unstable_now()-W<J)}function ce(){if(F=!1,z){var _=s.unstable_now();W=_;var X=!0;try{e:{E=!1,T&&(T=!1,M(P),P=-1),k=!0;var Q=w;try{t:{for(le(_),v=i(g);v!==null&&!(v.expirationTime>_&&oe());){var ne=v.callback;if(typeof ne=="function"){v.callback=null,w=v.priorityLevel;var Ne=ne(v.expirationTime<=_);if(_=s.unstable_now(),typeof Ne=="function"){v.callback=Ne,le(_),X=!0;break t}v===i(g)&&l(g),le(_)}else l(g);v=i(g)}if(v!==null)X=!0;else{var C=i(p);C!==null&&Y(G,C.startTime-_),X=!1}}break e}finally{v=null,w=Q,k=!1}X=void 0}}finally{X?pe():z=!1}}}var pe;if(typeof V=="function")pe=function(){V(ce)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,R=qe.port2;qe.port1.onmessage=ce,pe=function(){R.postMessage(null)}}else pe=function(){L(ce,0)};function Y(_,X){P=L(function(){_(s.unstable_now())},X)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(_){_.callback=null},s.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<_?Math.floor(1e3/_):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(_){switch(w){case 1:case 2:case 3:var X=3;break;default:X=w}var Q=w;w=X;try{return _()}finally{w=Q}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(_,X){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var Q=w;w=_;try{return X()}finally{w=Q}},s.unstable_scheduleCallback=function(_,X,Q){var ne=s.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ne+Q:ne):Q=ne,_){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=Q+Ne,_={id:j++,callback:X,priorityLevel:_,startTime:Q,expirationTime:Ne,sortIndex:-1},Q>ne?(_.sortIndex=Q,r(p,_),i(g)===null&&_===i(p)&&(T?(M(P),P=-1):T=!0,Y(G,Q-ne))):(_.sortIndex=Ne,r(g,_),E||k||(E=!0,z||(z=!0,pe()))),_},s.unstable_shouldYield=oe,s.unstable_wrapCallback=function(_){var X=w;return function(){var Q=w;w=X;try{return _.apply(this,arguments)}finally{w=Q}}}})(Sf)),Sf}var db;function pw(){return db||(db=1,wf.exports=mw()),wf.exports}var Cf={exports:{}},fs={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub;function fw(){if(ub)return fs;ub=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function k(C){return C===null||typeof C!="object"?null:(C=w&&C[w]||C["@@iterator"],typeof C=="function"?C:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,F={};function L(C,H,re){this.props=C,this.context=H,this.refs=F,this.updater=re||E}L.prototype.isReactComponent={},L.prototype.setState=function(C,H){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,H,"setState")},L.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function M(){}M.prototype=L.prototype;function V(C,H,re){this.props=C,this.context=H,this.refs=F,this.updater=re||E}var le=V.prototype=new M;le.constructor=V,T(le,L.prototype),le.isPureReactComponent=!0;var G=Array.isArray;function z(){}var P={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function W(C,H,re){var je=re.ref;return{$$typeof:s,type:C,key:H,ref:je!==void 0?je:null,props:re}}function oe(C,H){return W(C.type,H,C.props)}function ce(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function pe(C){var H={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(re){return H[re]})}var qe=/\/+/g;function R(C,H){return typeof C=="object"&&C!==null&&C.key!=null?pe(""+C.key):H.toString(36)}function Y(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(z,z):(C.status="pending",C.then(function(H){C.status==="pending"&&(C.status="fulfilled",C.value=H)},function(H){C.status==="pending"&&(C.status="rejected",C.reason=H)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function _(C,H,re,je,ge){var O=typeof C;(O==="undefined"||O==="boolean")&&(C=null);var I=!1;if(C===null)I=!0;else switch(O){case"bigint":case"string":case"number":I=!0;break;case"object":switch(C.$$typeof){case s:case r:I=!0;break;case j:return I=C._init,_(I(C._payload),H,re,je,ge)}}if(I)return ge=ge(C),I=je===""?"."+R(C,0):je,G(ge)?(re="",I!=null&&(re=I.replace(qe,"$&/")+"/"),_(ge,H,re,"",function(Ce){return Ce})):ge!=null&&(ce(ge)&&(ge=oe(ge,re+(ge.key==null||C&&C.key===ge.key?"":(""+ge.key).replace(qe,"$&/")+"/")+I)),H.push(ge)),1;I=0;var de=je===""?".":je+":";if(G(C))for(var we=0;we<C.length;we++)je=C[we],O=de+R(je,we),I+=_(je,H,re,O,ge);else if(we=k(C),typeof we=="function")for(C=we.call(C),we=0;!(je=C.next()).done;)je=je.value,O=de+R(je,we++),I+=_(je,H,re,O,ge);else if(O==="object"){if(typeof C.then=="function")return _(Y(C),H,re,je,ge);throw H=String(C),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return I}function X(C,H,re){if(C==null)return C;var je=[],ge=0;return _(C,je,"","",function(O){return H.call(re,O,ge++)}),je}function Q(C){if(C._status===-1){var H=C._result;H=H(),H.then(function(re){(C._status===0||C._status===-1)&&(C._status=1,C._result=re)},function(re){(C._status===0||C._status===-1)&&(C._status=2,C._result=re)}),C._status===-1&&(C._status=0,C._result=H)}if(C._status===1)return C._result.default;throw C._result}var ne=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Ne={map:X,forEach:function(C,H,re){X(C,function(){H.apply(this,arguments)},re)},count:function(C){var H=0;return X(C,function(){H++}),H},toArray:function(C){return X(C,function(H){return H})||[]},only:function(C){if(!ce(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return fs.Activity=v,fs.Children=Ne,fs.Component=L,fs.Fragment=i,fs.Profiler=d,fs.PureComponent=V,fs.StrictMode=l,fs.Suspense=g,fs.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,fs.__COMPILER_RUNTIME={__proto__:null,c:function(C){return P.H.useMemoCache(C)}},fs.cache=function(C){return function(){return C.apply(null,arguments)}},fs.cacheSignal=function(){return null},fs.cloneElement=function(C,H,re){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var je=T({},C.props),ge=C.key;if(H!=null)for(O in H.key!==void 0&&(ge=""+H.key),H)!J.call(H,O)||O==="key"||O==="__self"||O==="__source"||O==="ref"&&H.ref===void 0||(je[O]=H[O]);var O=arguments.length-2;if(O===1)je.children=re;else if(1<O){for(var I=Array(O),de=0;de<O;de++)I[de]=arguments[de+2];je.children=I}return W(C.type,ge,je)},fs.createContext=function(C){return C={$$typeof:u,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:m,_context:C},C},fs.createElement=function(C,H,re){var je,ge={},O=null;if(H!=null)for(je in H.key!==void 0&&(O=""+H.key),H)J.call(H,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(ge[je]=H[je]);var I=arguments.length-2;if(I===1)ge.children=re;else if(1<I){for(var de=Array(I),we=0;we<I;we++)de[we]=arguments[we+2];ge.children=de}if(C&&C.defaultProps)for(je in I=C.defaultProps,I)ge[je]===void 0&&(ge[je]=I[je]);return W(C,O,ge)},fs.createRef=function(){return{current:null}},fs.forwardRef=function(C){return{$$typeof:f,render:C}},fs.isValidElement=ce,fs.lazy=function(C){return{$$typeof:j,_payload:{_status:-1,_result:C},_init:Q}},fs.memo=function(C,H){return{$$typeof:p,type:C,compare:H===void 0?null:H}},fs.startTransition=function(C){var H=P.T,re={};P.T=re;try{var je=C(),ge=P.S;ge!==null&&ge(re,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(z,ne)}catch(O){ne(O)}finally{H!==null&&re.types!==null&&(H.types=re.types),P.T=H}},fs.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},fs.use=function(C){return P.H.use(C)},fs.useActionState=function(C,H,re){return P.H.useActionState(C,H,re)},fs.useCallback=function(C,H){return P.H.useCallback(C,H)},fs.useContext=function(C){return P.H.useContext(C)},fs.useDebugValue=function(){},fs.useDeferredValue=function(C,H){return P.H.useDeferredValue(C,H)},fs.useEffect=function(C,H){return P.H.useEffect(C,H)},fs.useEffectEvent=function(C){return P.H.useEffectEvent(C)},fs.useId=function(){return P.H.useId()},fs.useImperativeHandle=function(C,H,re){return P.H.useImperativeHandle(C,H,re)},fs.useInsertionEffect=function(C,H){return P.H.useInsertionEffect(C,H)},fs.useLayoutEffect=function(C,H){return P.H.useLayoutEffect(C,H)},fs.useMemo=function(C,H){return P.H.useMemo(C,H)},fs.useOptimistic=function(C,H){return P.H.useOptimistic(C,H)},fs.useReducer=function(C,H,re){return P.H.useReducer(C,H,re)},fs.useRef=function(C){return P.H.useRef(C)},fs.useState=function(C){return P.H.useState(C)},fs.useSyncExternalStore=function(C,H,re){return P.H.useSyncExternalStore(C,H,re)},fs.useTransition=function(){return P.H.useTransition()},fs.version="19.2.3",fs}var mb;function Th(){return mb||(mb=1,Cf.exports=fw()),Cf.exports}var Af={exports:{}},xr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function hw(){if(pb)return xr;pb=1;var s=Th();function r(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)p+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(g,p,j){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:v==null?null:""+v,children:g,containerInfo:p,implementation:j}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return xr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,xr.createPortal=function(g,p){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(r(299));return m(g,p,null,j)},xr.flushSync=function(g){var p=u.T,j=l.p;try{if(u.T=null,l.p=2,g)return g()}finally{u.T=p,l.p=j,l.d.f()}},xr.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(g,p))},xr.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},xr.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var j=p.as,v=f(j,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;j==="style"?l.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:k}):j==="script"&&l.d.X(g,{crossOrigin:v,integrity:w,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},xr.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var j=f(p.as,p.crossOrigin);l.d.M(g,{crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(g)},xr.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var j=p.as,v=f(j,p.crossOrigin);l.d.L(g,j,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},xr.preloadModule=function(g,p){if(typeof g=="string")if(p){var j=f(p.as,p.crossOrigin);l.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(g)},xr.requestFormReset=function(g){l.d.r(g)},xr.unstable_batchedUpdates=function(g,p){return g(p)},xr.useFormState=function(g,p,j){return u.H.useFormState(g,p,j)},xr.useFormStatus=function(){return u.H.useHostTransitionStatus()},xr.version="19.2.3",xr}var fb;function Nj(){if(fb)return Af.exports;fb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Af.exports=hw(),Af.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb;function xw(){if(hb)return cd;hb=1;var s=pw(),r=Th(),i=Nj();function l(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)a+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var a=t,n=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(n=a.return),t=a.return;while(t)}return a.tag===3?n:null}function u(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function f(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(m(t)!==t)throw Error(l(188))}function p(t){var a=t.alternate;if(!a){if(a=m(t),a===null)throw Error(l(188));return a!==t?null:t}for(var n=t,o=a;;){var h=n.return;if(h===null)break;var x=h.alternate;if(x===null){if(o=h.return,o!==null){n=o;continue}break}if(h.child===x.child){for(x=h.child;x;){if(x===n)return g(h),t;if(x===o)return g(h),a;x=x.sibling}throw Error(l(188))}if(n.return!==o.return)n=h,o=x;else{for(var A=!1,$=h.child;$;){if($===n){A=!0,n=h,o=x;break}if($===o){A=!0,o=h,n=x;break}$=$.sibling}if(!A){for($=x.child;$;){if($===n){A=!0,n=x,o=h;break}if($===o){A=!0,o=x,n=h;break}$=$.sibling}if(!A)throw Error(l(189))}}if(n.alternate!==o)throw Error(l(190))}if(n.tag!==3)throw Error(l(188));return n.stateNode.current===n?t:a}function j(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=j(t),a!==null)return a;t=t.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),V=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function pe(t){return t===null||typeof t!="object"?null:(t=ce&&t[ce]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Symbol.for("react.client.reference");function R(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===qe?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case T:return"Fragment";case L:return"Profiler";case F:return"StrictMode";case G:return"Suspense";case z:return"SuspenseList";case W:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case V:return t.displayName||"Context";case M:return(t._context.displayName||"Context")+".Consumer";case le:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return a=t.displayName||null,a!==null?a:R(t.type)||"Memo";case J:a=t._payload,t=t._init;try{return R(t(a))}catch{}}return null}var Y=Array.isArray,_=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ne=[],Ne=-1;function C(t){return{current:t}}function H(t){0>Ne||(t.current=ne[Ne],ne[Ne]=null,Ne--)}function re(t,a){Ne++,ne[Ne]=t.current,t.current=a}var je=C(null),ge=C(null),O=C(null),I=C(null);function de(t,a){switch(re(O,a),re(ge,t),re(je,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Dg(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Dg(a),t=Pg(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}H(je),re(je,t)}function we(){H(je),H(ge),H(O)}function Ce(t){t.memoizedState!==null&&re(I,t);var a=je.current,n=Pg(a,t.type);a!==n&&(re(ge,t),re(je,n))}function Ge(t){ge.current===t&&(H(je),H(ge)),I.current===t&&(H(I),rd._currentValue=Q)}var ue,se;function Ie(t){if(ue===void 0)try{throw Error()}catch(n){var a=n.stack.trim().match(/\n( *(at )?)/);ue=a&&a[1]||"",se=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+t+se}var Qe=!1;function tt(t,a){if(!t||Qe)return"";Qe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Ue){var Me=Ue}Reflect.construct(t,[],Xe)}else{try{Xe.call()}catch(Ue){Me=Ue}t.call(Xe.prototype)}}else{try{throw Error()}catch(Ue){Me=Ue}(Xe=t())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Ue){if(Ue&&Me&&typeof Ue.stack=="string")return[Ue.stack,Me.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=o.DetermineComponentFrameRoot(),A=x[0],$=x[1];if(A&&$){var ae=A.split(`
`),Ee=$.split(`
`);for(h=o=0;o<ae.length&&!ae[o].includes("DetermineComponentFrameRoot");)o++;for(;h<Ee.length&&!Ee[h].includes("DetermineComponentFrameRoot");)h++;if(o===ae.length||h===Ee.length)for(o=ae.length-1,h=Ee.length-1;1<=o&&0<=h&&ae[o]!==Ee[h];)h--;for(;1<=o&&0<=h;o--,h--)if(ae[o]!==Ee[h]){if(o!==1||h!==1)do if(o--,h--,0>h||ae[o]!==Ee[h]){var Ye=`
`+ae[o].replace(" at new "," at ");return t.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",t.displayName)),Ye}while(1<=o&&0<=h);break}}}finally{Qe=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ie(n):""}function ot(t,a){switch(t.tag){case 26:case 27:case 5:return Ie(t.type);case 16:return Ie("Lazy");case 13:return t.child!==a&&a!==null?Ie("Suspense Fallback"):Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 15:return tt(t.type,!1);case 11:return tt(t.type.render,!1);case 1:return tt(t.type,!0);case 31:return Ie("Activity");default:return""}}function ze(t){try{var a="",n=null;do a+=ot(t,n),n=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Ot=Object.prototype.hasOwnProperty,_t=s.unstable_scheduleCallback,Dt=s.unstable_cancelCallback,us=s.unstable_shouldYield,Ps=s.unstable_requestPaint,Vt=s.unstable_now,Gs=s.unstable_getCurrentPriorityLevel,Ns=s.unstable_ImmediatePriority,wa=s.unstable_UserBlockingPriority,fe=s.unstable_NormalPriority,gt=s.unstable_LowPriority,kt=s.unstable_IdlePriority,cs=s.log,hs=s.unstable_setDisableYieldValue,ht=null,Qt=null;function Vs(t){if(typeof cs=="function"&&hs(t),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(ht,t)}catch{}}var rs=Math.clz32?Math.clz32:mt,Bs=Math.log,Be=Math.LN2;function mt(t){return t>>>=0,t===0?32:31-(Bs(t)/Be|0)|0}var bt=256,ws=262144,Fs=4194304;function Ws(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function qs(t,a,n){var o=t.pendingLanes;if(o===0)return 0;var h=0,x=t.suspendedLanes,A=t.pingedLanes;t=t.warmLanes;var $=o&134217727;return $!==0?(o=$&~x,o!==0?h=Ws(o):(A&=$,A!==0?h=Ws(A):n||(n=$&~t,n!==0&&(h=Ws(n))))):($=o&~x,$!==0?h=Ws($):A!==0?h=Ws(A):n||(n=o&~t,n!==0&&(h=Ws(n)))),h===0?0:a!==0&&a!==h&&(a&x)===0&&(x=h&-h,n=a&-a,x>=n||x===32&&(n&4194048)!==0)?a:h}function da(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Ra(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function er(){var t=Fs;return Fs<<=1,(Fs&62914560)===0&&(Fs=4194304),t}function ir(t){for(var a=[],n=0;31>n;n++)a.push(t);return a}function Xr(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ei(t,a,n,o,h,x){var A=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var $=t.entanglements,ae=t.expirationTimes,Ee=t.hiddenUpdates;for(n=A&~n;0<n;){var Ye=31-rs(n),Xe=1<<Ye;$[Ye]=0,ae[Ye]=-1;var Me=Ee[Ye];if(Me!==null)for(Ee[Ye]=null,Ye=0;Ye<Me.length;Ye++){var Ue=Me[Ye];Ue!==null&&(Ue.lane&=-536870913)}n&=~Xe}o!==0&&$n(t,o,0),x!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=x&~(A&~a))}function $n(t,a,n){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-rs(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|n&261930}function ee(t,a){var n=t.entangledLanes|=a;for(t=t.entanglements;n;){var o=31-rs(n),h=1<<o;h&a|t[o]&a&&(t[o]|=a),n&=~h}}function xe(t,a){var n=a&-a;return n=(n&42)!==0?1:ke(n),(n&(t.suspendedLanes|a))!==0?0:n}function ke(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function st(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function nt(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:eb(t.type))}function Mt(t,a){var n=X.p;try{return X.p=t,a()}finally{X.p=n}}var lt=Math.random().toString(36).slice(2),pt="__reactFiber$"+lt,St="__reactProps$"+lt,zt="__reactContainer$"+lt,Ft="__reactEvents$"+lt,Ut="__reactListeners$"+lt,as="__reactHandles$"+lt,xs="__reactResources$"+lt,Ss="__reactMarker$"+lt;function ra(t){delete t[pt],delete t[St],delete t[Ft],delete t[Ut],delete t[as]}function is(t){var a=t[pt];if(a)return a;for(var n=t.parentNode;n;){if(a=n[zt]||n[pt]){if(n=a.alternate,a.child!==null||n!==null&&n.child!==null)for(t=$g(t);t!==null;){if(n=t[pt])return n;t=$g(t)}return a}t=n,n=t.parentNode}return null}function ms(t){if(t=t[pt]||t[zt]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function ds(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(l(33))}function lr(t){var a=t[xs];return a||(a=t[xs]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function na(t){t[Ss]=!0}var fr=new Set,yr={};function Xs(t,a){tr(t,a),tr(t+"Capture",a)}function tr(t,a){for(yr[t]=a,t=0;t<a.length;t++)fr.add(a[t])}var en=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qs={},Xt={};function Cs(t){return Ot.call(Xt,t)?!0:Ot.call(Qs,t)?!1:en.test(t)?Xt[t]=!0:(Qs[t]=!0,!1)}function Ma(t,a,n){if(Cs(a))if(n===null)t.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+n)}}function ia(t,a,n){if(n===null)t.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+n)}}function ys(t,a,n,o){if(o===null)t.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(a,n,""+o)}}function xa(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hn(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function sr(t,a,n){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,x=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return h.call(this)},set:function(A){n=""+A,x.call(this,A)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return n},setValue:function(A){n=""+A},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Fn(t){if(!t._valueTracker){var a=hn(t)?"checked":"value";t._valueTracker=sr(t,a,""+t[a])}}function xn(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var n=a.getValue(),o="";return t&&(o=hn(t)?t.checked?"true":"false":t.value),t=o,t!==n?(a.setValue(t),!0):!1}function ar(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Sa=/[\n"\\]/g;function la(t){return t.replace(Sa,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function gs(t,a,n,o,h,x,A,$){t.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.type=A:t.removeAttribute("type"),a!=null?A==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+xa(a)):t.value!==""+xa(a)&&(t.value=""+xa(a)):A!=="submit"&&A!=="reset"||t.removeAttribute("value"),a!=null?Gl(t,A,xa(a)):n!=null?Gl(t,A,xa(n)):o!=null&&t.removeAttribute("value"),h==null&&x!=null&&(t.defaultChecked=!!x),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?t.name=""+xa($):t.removeAttribute("name")}function tn(t,a,n,o,h,x,A,$){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.type=x),a!=null||n!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){Fn(t);return}n=n!=null?""+xa(n):"",a=a!=null?""+xa(a):n,$||a===t.value||(t.value=a),t.defaultValue=a}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=$?t.checked:!!o,t.defaultChecked=!!o,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(t.name=A),Fn(t)}function Gl(t,a,n){a==="number"&&ar(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function gn(t,a,n,o){if(t=t.options,a){a={};for(var h=0;h<n.length;h++)a["$"+n[h]]=!0;for(n=0;n<t.length;n++)h=a.hasOwnProperty("$"+t[n].value),t[n].selected!==h&&(t[n].selected=h),h&&o&&(t[n].defaultSelected=!0)}else{for(n=""+xa(n),a=null,h=0;h<t.length;h++){if(t[h].value===n){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}a!==null||t[h].disabled||(a=t[h])}a!==null&&(a.selected=!0)}}function bn(t,a,n){if(a!=null&&(a=""+xa(a),a!==t.value&&(t.value=a),n==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=n!=null?""+xa(n):""}function ie(t,a,n,o){if(a==null){if(o!=null){if(n!=null)throw Error(l(92));if(Y(o)){if(1<o.length)throw Error(l(93));o=o[0]}n=o}n==null&&(n=""),a=n}n=xa(a),t.defaultValue=n,o=t.textContent,o===n&&o!==""&&o!==null&&(t.value=o),Fn(t)}function $e(t,a){if(a){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=a;return}}t.textContent=a}var Ae=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ye(t,a,n){var o=a.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,n):typeof n!="number"||n===0||Ae.has(a)?a==="float"?t.cssFloat=n:t[a]=(""+n).trim():t[a]=n+"px"}function Fe(t,a,n){if(a!=null&&typeof a!="object")throw Error(l(62));if(t=t.style,n!=null){for(var o in n)!n.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in a)o=a[h],a.hasOwnProperty(h)&&n[h]!==o&&ye(t,h,o)}else for(var x in a)a.hasOwnProperty(x)&&ye(t,x,a[x])}function rt(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var De=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ve=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _e(t){return Ve.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Le(){}var ve=null;function xt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pe=null,it=null;function es(t){var a=ms(t);if(a&&(t=a.stateNode)){var n=t[St]||null;e:switch(t=a.stateNode,a.type){case"input":if(gs(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),a=n.name,n.type==="radio"&&a!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+la(""+a)+'"][type="radio"]'),a=0;a<n.length;a++){var o=n[a];if(o!==t&&o.form===t.form){var h=o[St]||null;if(!h)throw Error(l(90));gs(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<n.length;a++)o=n[a],o.form===t.form&&xn(o)}break e;case"textarea":bn(t,n.value,n.defaultValue);break e;case"select":a=n.value,a!=null&&gn(t,!!n.multiple,a,!1)}}}var _s=!1;function ls(t,a,n){if(_s)return t(a,n);_s=!0;try{var o=t(a);return o}finally{if(_s=!1,(Pe!==null||it!==null)&&(zu(),Pe&&(a=Pe,t=it,it=Pe=null,es(a),t)))for(a=0;a<t.length;a++)es(t[a])}}function As(t,a){var n=t.stateNode;if(n===null)return null;var o=n[St]||null;if(o===null)return null;n=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(l(231,a,typeof n));return n}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),he=!1;if(ps)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){he=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch{he=!1}var Ke=null,yt=null,Pt=null;function He(){if(Pt)return Pt;var t,a=yt,n=a.length,o,h="value"in Ke?Ke.value:Ke.textContent,x=h.length;for(t=0;t<n&&a[t]===h[t];t++);var A=n-t;for(o=1;o<=A&&a[n-o]===h[x-o];o++);return Pt=h.slice(t,1<o?1-o:void 0)}function Ze(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function et(){return!0}function Gt(){return!1}function Rt(t){function a(n,o,h,x,A){this._reactName=n,this._targetInst=h,this.type=o,this.nativeEvent=x,this.target=A,this.currentTarget=null;for(var $ in t)t.hasOwnProperty($)&&(n=t[$],this[$]=n?n(x):x[$]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?et:Gt,this.isPropagationStopped=Gt,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=et)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=et)},persist:function(){},isPersistent:et}),a}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Us=Rt(Zs),Wt=v({},Zs,{view:0,detail:0}),zs=Rt(Wt),At,_a,Ga,ii=v({},Wt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ga&&(Ga&&t.type==="mousemove"?(At=t.screenX-Ga.screenX,_a=t.screenY-Ga.screenY):_a=At=0,Ga=t),At)},movementY:function(t){return"movementY"in t?t.movementY:_a}}),Rr=Rt(ii),li=v({},ii,{dataTransfer:0}),Un=Rt(li),al=v({},Wt,{relatedTarget:0}),Ql=Rt(al),Yl=v({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),gc=Rt(Yl),Wd=v({},Zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vm=Rt(Wd),Zd=v({},Zs,{data:0}),In=Rt(Zd),bc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jd(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=bo[t])?!!a[t]:!1}function yc(){return Jd}var $t=v({},Wt,{key:function(t){if(t.key){var a=bc[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Ze(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yc,charCode:function(t){return t.type==="keypress"?Ze(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ze(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),za=Rt($t),yo=v({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jc=Rt(yo),qm=v({},Wt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yc}),Kd=Rt(qm),oi=v({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=Rt(oi),Hm=v({},ii,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vc=Rt(Hm),Hs=v({},Zs,{newState:0,oldState:0}),Vn=Rt(Hs),Mr=[9,13,27,32],ci=ps&&"CompositionEvent"in window,Bn=null;ps&&"documentMode"in document&&(Bn=document.documentMode);var eu=ps&&"TextEvent"in window&&!Bn,Qa=ps&&(!ci||Bn&&8<Bn&&11>=Bn),Nc=" ",tu=!1;function wc(t,a){switch(t){case"keyup":return Mr.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ti=!1;function jr(t,a){switch(t){case"compositionend":return qn(a);case"keypress":return a.which!==32?null:(tu=!0,Nc);case"textInput":return t=a.data,t===Nc&&tu?null:t;default:return null}}function ki(t,a){if(Ti)return t==="compositionend"||!ci&&wc(t,a)?(t=He(),Pt=yt=Ke=null,Ti=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Qa&&a.locale!=="ko"?null:a.data;default:return null}}var di={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function su(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!di[t.type]:a==="textarea"}function au(t,a,n,o){Pe?it?it.push(o):it=[o]:Pe=o,a=Bu(a,"onChange"),0<a.length&&(n=new Us("onChange","change",null,n,o),t.push({event:n,listeners:a}))}var rl=null,vr=null;function Sc(t){Sg(t,0)}function Di(t){var a=ds(t);if(xn(a))return t}function nl(t,a){if(t==="change")return a}var Cc=!1;if(ps){var il;if(ps){var Bt="oninput"in document;if(!Bt){var or=document.createElement("div");or.setAttribute("oninput","return;"),Bt=typeof or.oninput=="function"}il=Bt}else il=!1;Cc=il&&(!document.documentMode||9<document.documentMode)}function K(){rl&&(rl.detachEvent("onpropertychange",ft),vr=rl=null)}function ft(t){if(t.propertyName==="value"&&Di(vr)){var a=[];au(a,vr,t,xt(t)),ls(Sc,a)}}function Gm(t,a,n){t==="focusin"?(K(),rl=a,vr=n,rl.attachEvent("onpropertychange",ft)):t==="focusout"&&K()}function ru(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Di(vr)}function Tt(t,a){if(t==="click")return Di(a)}function Pi(t,a){if(t==="input"||t==="change")return Di(a)}function jt(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ja=typeof Object.is=="function"?Object.is:jt;function yn(t,a){if(ja(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var n=Object.keys(t),o=Object.keys(a);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var h=n[o];if(!Ot.call(a,h)||!ja(t[h],a[h]))return!1}return!0}function ui(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _r(t,a){var n=ui(t);t=0;for(var o;n;){if(n.nodeType===3){if(o=t+n.textContent.length,t<=a&&o>=a)return{node:n,offset:a-t};t=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ui(n)}}function nu(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?nu(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function jn(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=ar(t.document);a instanceof t.HTMLIFrameElement;){try{var n=typeof a.contentWindow.location.href=="string"}catch{n=!1}if(n)t=a.contentWindow;else break;a=ar(t.document)}return a}function jo(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var ll=ps&&"documentMode"in document&&11>=document.documentMode,Oi=null,Wl=null,sn=null,Ac=!1;function Ec(t,a,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ac||Oi==null||Oi!==ar(o)||(o=Oi,"selectionStart"in o&&jo(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),sn&&yn(sn,o)||(sn=o,o=Bu(Wl,"onSelect"),0<o.length&&(a=new Us("onSelect","select",null,a,n),t.push({event:a,listeners:o}),a.target=Oi)))}function Ri(t,a){var n={};return n[t.toLowerCase()]=a.toLowerCase(),n["Webkit"+t]="webkit"+a,n["Moz"+t]="moz"+a,n}var mi={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionrun:Ri("Transition","TransitionRun"),transitionstart:Ri("Transition","TransitionStart"),transitioncancel:Ri("Transition","TransitionCancel"),transitionend:Ri("Transition","TransitionEnd")},pi={},vo={};ps&&(vo=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function Hn(t){if(pi[t])return pi[t];if(!mi[t])return t;var a=mi[t],n;for(n in a)if(a.hasOwnProperty(n)&&n in vo)return pi[t]=a[n];return t}var ol=Hn("animationend"),No=Hn("animationiteration"),iu=Hn("animationstart"),Qm=Hn("transitionrun"),wo=Hn("transitionstart"),Ym=Hn("transitioncancel"),lu=Hn("transitionend"),Zl=new Map,Tc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tc.push("scrollEnd");function an(t,a){Zl.set(t,a),Xs(a,[t])}var fi=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Nr=[],Mi=0,zr=0;function So(){for(var t=Mi,a=zr=Mi=0;a<t;){var n=Nr[a];Nr[a++]=null;var o=Nr[a];Nr[a++]=null;var h=Nr[a];Nr[a++]=null;var x=Nr[a];if(Nr[a++]=null,o!==null&&h!==null){var A=o.pending;A===null?h.next=h:(h.next=A.next,A.next=h),o.pending=h}x!==0&&ou(n,h,x)}}function cr(t,a,n,o){Nr[Mi++]=t,Nr[Mi++]=a,Nr[Mi++]=n,Nr[Mi++]=o,zr|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function kc(t,a,n,o){return cr(t,a,n,o),Co(t)}function hi(t,a){return cr(t,null,null,a),Co(t)}function ou(t,a,n){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n);for(var h=!1,x=t.return;x!==null;)x.childLanes|=n,o=x.alternate,o!==null&&(o.childLanes|=n),x.tag===22&&(t=x.stateNode,t===null||t._visibility&1||(h=!0)),t=x,x=x.return;return t.tag===3?(x=t.stateNode,h&&a!==null&&(h=31-rs(n),t=x.hiddenUpdates,o=t[h],o===null?t[h]=[a]:o.push(a),a.lane=n|536870912),x):null}function Co(t){if(50<Jc)throw Jc=0,qp=null,Error(l(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Lr={};function Wm(t,a,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(t,a,n,o){return new Wm(t,a,n,o)}function Dc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $r(t,a){var n=t.alternate;return n===null?(n=wr(t.tag,a,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=a,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,a=t.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function cu(t,a){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,a=n.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Ao(t,a,n,o,h,x){var A=0;if(o=t,typeof t=="function")Dc(t)&&(A=1);else if(typeof t=="string")A=Z1(t,n,je.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case W:return t=wr(31,n,a,h),t.elementType=W,t.lanes=x,t;case T:return _i(n.children,h,x,a);case F:A=8,h|=24;break;case L:return t=wr(12,n,a,h|2),t.elementType=L,t.lanes=x,t;case G:return t=wr(13,n,a,h),t.elementType=G,t.lanes=x,t;case z:return t=wr(19,n,a,h),t.elementType=z,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V:A=10;break e;case M:A=9;break e;case le:A=11;break e;case P:A=14;break e;case J:A=16,o=null;break e}A=29,n=Error(l(130,t===null?"null":typeof t,"")),o=null}return a=wr(A,n,a,h),a.elementType=t,a.type=o,a.lanes=x,a}function _i(t,a,n,o){return t=wr(7,t,o,a),t.lanes=n,t}function Pc(t,a,n){return t=wr(6,t,null,a),t.lanes=n,t}function cl(t){var a=wr(18,null,null,0);return a.stateNode=t,a}function Oc(t,a,n){return a=wr(4,t.children!==null?t.children:[],t.key,a),a.lanes=n,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Jl=new WeakMap;function Fr(t,a){if(typeof t=="object"&&t!==null){var n=Jl.get(t);return n!==void 0?n:(a={value:t,source:a,stack:ze(a)},Jl.set(t,a),a)}return{value:t,source:a,stack:ze(a)}}var xi=[],dl=0,zi=null,Kl=0,Ur=[],Ir=0,Gn=null,rn=1,vn="";function Qn(t,a){xi[dl++]=Kl,xi[dl++]=zi,zi=t,Kl=a}function du(t,a,n){Ur[Ir++]=rn,Ur[Ir++]=vn,Ur[Ir++]=Gn,Gn=t;var o=rn;t=vn;var h=32-rs(o)-1;o&=~(1<<h),n+=1;var x=32-rs(a)+h;if(30<x){var A=h-h%5;x=(o&(1<<A)-1).toString(32),o>>=A,h-=A,rn=1<<32-rs(a)+h|n<<h|o,vn=x+t}else rn=1<<x|n<<h|o,vn=t}function Rc(t){t.return!==null&&(Qn(t,1),du(t,1,0))}function Mc(t){for(;t===zi;)zi=xi[--dl],xi[dl]=null,Kl=xi[--dl],xi[dl]=null;for(;t===Gn;)Gn=Ur[--Ir],Ur[Ir]=null,vn=Ur[--Ir],Ur[Ir]=null,rn=Ur[--Ir],Ur[Ir]=null}function uu(t,a){Ur[Ir++]=rn,Ur[Ir++]=vn,Ur[Ir++]=Gn,rn=a.id,vn=a.overflow,Gn=t}var Ya=null,ua=null,Es=!1,gi=null,Wa=!1,Eo=Error(l(519));function Yn(t){var a=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ml(Fr(a,t)),Eo}function Xl(t){var a=t.stateNode,n=t.type,o=t.memoizedProps;switch(a[pt]=t,a[St]=o,n){case"dialog":Ms("cancel",a),Ms("close",a);break;case"iframe":case"object":case"embed":Ms("load",a);break;case"video":case"audio":for(n=0;n<Xc.length;n++)Ms(Xc[n],a);break;case"source":Ms("error",a);break;case"img":case"image":case"link":Ms("error",a),Ms("load",a);break;case"details":Ms("toggle",a);break;case"input":Ms("invalid",a),tn(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ms("invalid",a);break;case"textarea":Ms("invalid",a),ie(a,o.value,o.defaultValue,o.children)}n=o.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||a.textContent===""+n||o.suppressHydrationWarning===!0||Tg(a.textContent,n)?(o.popover!=null&&(Ms("beforetoggle",a),Ms("toggle",a)),o.onScroll!=null&&Ms("scroll",a),o.onScrollEnd!=null&&Ms("scrollend",a),o.onClick!=null&&(a.onclick=Le),a=!0):a=!1,a||Yn(t,!0)}function _c(t){for(Ya=t.return;Ya;)switch(Ya.tag){case 5:case 31:case 13:Wa=!1;return;case 27:case 3:Wa=!0;return;default:Ya=Ya.return}}function ul(t){if(t!==Ya)return!1;if(!Es)return _c(t),Es=!0,!1;var a=t.tag,n;if((n=a!==3&&a!==27)&&((n=a===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||nf(t.type,t.memoizedProps)),n=!n),n&&ua&&Yn(t),_c(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));ua=Lg(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));ua=Lg(t)}else a===27?(a=ua,Cl(t.type)?(t=uf,uf=null,ua=t):ua=a):ua=Ya?Tn(t.stateNode.nextSibling):null;return!0}function Li(){ua=Ya=null,Es=!1}function To(){var t=gi;return t!==null&&(Yr===null?Yr=t:Yr.push.apply(Yr,t),gi=null),t}function ml(t){gi===null?gi=[t]:gi.push(t)}var ko=C(null),bi=null,Nn=null;function Wn(t,a,n){re(ko,a._currentValue),a._currentValue=n}function wn(t){t._currentValue=ko.current,H(ko)}function c(t,a,n){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===n)break;t=t.return}}function b(t,a,n,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var x=h.dependencies;if(x!==null){var A=h.child;x=x.firstContext;e:for(;x!==null;){var $=x;x=h;for(var ae=0;ae<a.length;ae++)if($.context===a[ae]){x.lanes|=n,$=x.alternate,$!==null&&($.lanes|=n),c(x.return,n,t),o||(A=null);break e}x=$.next}}else if(h.tag===18){if(A=h.return,A===null)throw Error(l(341));A.lanes|=n,x=A.alternate,x!==null&&(x.lanes|=n),c(A,n,t),A=null}else A=h.child;if(A!==null)A.return=h;else for(A=h;A!==null;){if(A===t){A=null;break}if(h=A.sibling,h!==null){h.return=A.return,A=h;break}A=A.return}h=A}}function N(t,a,n,o){t=null;for(var h=a,x=!1;h!==null;){if(!x){if((h.flags&524288)!==0)x=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var A=h.alternate;if(A===null)throw Error(l(387));if(A=A.memoizedProps,A!==null){var $=h.type;ja(h.pendingProps.value,A.value)||(t!==null?t.push($):t=[$])}}else if(h===I.current){if(A=h.alternate,A===null)throw Error(l(387));A.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(rd):t=[rd])}h=h.return}t!==null&&b(a,t,n,o),a.flags|=262144}function S(t){for(t=t.firstContext;t!==null;){if(!ja(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function D(t){bi=t,Nn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function U(t){return q(bi,t)}function B(t,a){return bi===null&&D(t),q(t,a)}function q(t,a){var n=a._currentValue;if(a={context:a,memoizedValue:n,next:null},Nn===null){if(t===null)throw Error(l(308));Nn=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Nn=Nn.next=a;return n}var Z=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(n,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(n){return n()})}},te=s.unstable_scheduleCallback,Oe=s.unstable_NormalPriority,We={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nt(){return{controller:new Z,data:new Map,refCount:0}}function Ht(t){t.refCount--,t.refCount===0&&te(Oe,function(){t.controller.abort()})}var Et=null,Ct=0,wt=0,Yt=null;function ct(t,a){if(Et===null){var n=Et=[];Ct=0,wt=Zp(),Yt={status:"pending",value:void 0,then:function(o){n.push(o)}}}return Ct++,a.then(Jt,Jt),a}function Jt(){if(--Ct===0&&Et!==null){Yt!==null&&(Yt.status="fulfilled");var t=Et;Et=null,wt=0,Yt=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function sa(t,a){var n=[],o={status:"pending",value:null,reason:null,then:function(h){n.push(h)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var h=0;h<n.length;h++)(0,n[h])(a)},function(h){for(o.status="rejected",o.reason=h,h=0;h<n.length;h++)(0,n[h])(void 0)}),o}var Vr=_.S;_.S=function(t,a){K0=Vt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&ct(t,a),Vr!==null&&Vr(t,a)};var vt=C(null);function Is(){var t=vt.current;return t!==null?t:ga.pooledCache}function Os(t,a){a===null?re(vt,vt.current):re(vt,a.pool)}function Br(){var t=Is();return t===null?null:{parent:We._currentValue,pool:t}}var hr=Error(l(460)),Za=Error(l(474)),Sn=Error(l(542)),dt={then:function(){}};function mu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Sr(t,a,n){switch(n=t[n],n===void 0?t.push(a):n!==a&&(a.then(Le,Le),a=n),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,fu(t),t;default:if(typeof a.status=="string")a.then(Le,Le);else{if(t=ga,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=o}},function(o){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,fu(t),t}throw $i=a,hr}}function nn(t){try{var a=t._init;return a(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?($i=n,hr):n}}var $i=null;function pu(){if($i===null)throw Error(l(459));var t=$i;return $i=null,t}function fu(t){if(t===hr||t===Sn)throw Error(l(483))}var pl=null,eo=0;function Do(t){var a=eo;return eo+=1,pl===null&&(pl=[]),Sr(pl,t,a)}function Cn(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function to(t,a){throw a.$$typeof===w?Error(l(525)):(t=Object.prototype.toString.call(a),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function ts(t){function a(be,me){if(t){var Se=be.deletions;Se===null?(be.deletions=[me],be.flags|=16):Se.push(me)}}function n(be,me){if(!t)return null;for(;me!==null;)a(be,me),me=me.sibling;return null}function o(be){for(var me=new Map;be!==null;)be.key!==null?me.set(be.key,be):me.set(be.index,be),be=be.sibling;return me}function h(be,me){return be=$r(be,me),be.index=0,be.sibling=null,be}function x(be,me,Se){return be.index=Se,t?(Se=be.alternate,Se!==null?(Se=Se.index,Se<me?(be.flags|=67108866,me):Se):(be.flags|=67108866,me)):(be.flags|=1048576,me)}function A(be){return t&&be.alternate===null&&(be.flags|=67108866),be}function $(be,me,Se,Je){return me===null||me.tag!==6?(me=Pc(Se,be.mode,Je),me.return=be,me):(me=h(me,Se),me.return=be,me)}function ae(be,me,Se,Je){var Zt=Se.type;return Zt===T?Ye(be,me,Se.props.children,Je,Se.key):me!==null&&(me.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===J&&nn(Zt)===me.type)?(me=h(me,Se.props),Cn(me,Se),me.return=be,me):(me=Ao(Se.type,Se.key,Se.props,null,be.mode,Je),Cn(me,Se),me.return=be,me)}function Ee(be,me,Se,Je){return me===null||me.tag!==4||me.stateNode.containerInfo!==Se.containerInfo||me.stateNode.implementation!==Se.implementation?(me=Oc(Se,be.mode,Je),me.return=be,me):(me=h(me,Se.children||[]),me.return=be,me)}function Ye(be,me,Se,Je,Zt){return me===null||me.tag!==7?(me=_i(Se,be.mode,Je,Zt),me.return=be,me):(me=h(me,Se),me.return=be,me)}function Xe(be,me,Se){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=Pc(""+me,be.mode,Se),me.return=be,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case k:return Se=Ao(me.type,me.key,me.props,null,be.mode,Se),Cn(Se,me),Se.return=be,Se;case E:return me=Oc(me,be.mode,Se),me.return=be,me;case J:return me=nn(me),Xe(be,me,Se)}if(Y(me)||pe(me))return me=_i(me,be.mode,Se,null),me.return=be,me;if(typeof me.then=="function")return Xe(be,Do(me),Se);if(me.$$typeof===V)return Xe(be,B(be,me),Se);to(be,me)}return null}function Me(be,me,Se,Je){var Zt=me!==null?me.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Zt!==null?null:$(be,me,""+Se,Je);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case k:return Se.key===Zt?ae(be,me,Se,Je):null;case E:return Se.key===Zt?Ee(be,me,Se,Je):null;case J:return Se=nn(Se),Me(be,me,Se,Je)}if(Y(Se)||pe(Se))return Zt!==null?null:Ye(be,me,Se,Je,null);if(typeof Se.then=="function")return Me(be,me,Do(Se),Je);if(Se.$$typeof===V)return Me(be,me,B(be,Se),Je);to(be,Se)}return null}function Ue(be,me,Se,Je,Zt){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return be=be.get(Se)||null,$(me,be,""+Je,Zt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case k:return be=be.get(Je.key===null?Se:Je.key)||null,ae(me,be,Je,Zt);case E:return be=be.get(Je.key===null?Se:Je.key)||null,Ee(me,be,Je,Zt);case J:return Je=nn(Je),Ue(be,me,Se,Je,Zt)}if(Y(Je)||pe(Je))return be=be.get(Se)||null,Ye(me,be,Je,Zt,null);if(typeof Je.then=="function")return Ue(be,me,Se,Do(Je),Zt);if(Je.$$typeof===V)return Ue(be,me,Se,B(me,Je),Zt);to(me,Je)}return null}function Lt(be,me,Se,Je){for(var Zt=null,Js=null,qt=me,vs=me=0,$s=null;qt!==null&&vs<Se.length;vs++){qt.index>vs?($s=qt,qt=null):$s=qt.sibling;var Ks=Me(be,qt,Se[vs],Je);if(Ks===null){qt===null&&(qt=$s);break}t&&qt&&Ks.alternate===null&&a(be,qt),me=x(Ks,me,vs),Js===null?Zt=Ks:Js.sibling=Ks,Js=Ks,qt=$s}if(vs===Se.length)return n(be,qt),Es&&Qn(be,vs),Zt;if(qt===null){for(;vs<Se.length;vs++)qt=Xe(be,Se[vs],Je),qt!==null&&(me=x(qt,me,vs),Js===null?Zt=qt:Js.sibling=qt,Js=qt);return Es&&Qn(be,vs),Zt}for(qt=o(qt);vs<Se.length;vs++)$s=Ue(qt,be,vs,Se[vs],Je),$s!==null&&(t&&$s.alternate!==null&&qt.delete($s.key===null?vs:$s.key),me=x($s,me,vs),Js===null?Zt=$s:Js.sibling=$s,Js=$s);return t&&qt.forEach(function(Dl){return a(be,Dl)}),Es&&Qn(be,vs),Zt}function ss(be,me,Se,Je){if(Se==null)throw Error(l(151));for(var Zt=null,Js=null,qt=me,vs=me=0,$s=null,Ks=Se.next();qt!==null&&!Ks.done;vs++,Ks=Se.next()){qt.index>vs?($s=qt,qt=null):$s=qt.sibling;var Dl=Me(be,qt,Ks.value,Je);if(Dl===null){qt===null&&(qt=$s);break}t&&qt&&Dl.alternate===null&&a(be,qt),me=x(Dl,me,vs),Js===null?Zt=Dl:Js.sibling=Dl,Js=Dl,qt=$s}if(Ks.done)return n(be,qt),Es&&Qn(be,vs),Zt;if(qt===null){for(;!Ks.done;vs++,Ks=Se.next())Ks=Xe(be,Ks.value,Je),Ks!==null&&(me=x(Ks,me,vs),Js===null?Zt=Ks:Js.sibling=Ks,Js=Ks);return Es&&Qn(be,vs),Zt}for(qt=o(qt);!Ks.done;vs++,Ks=Se.next())Ks=Ue(qt,be,vs,Ks.value,Je),Ks!==null&&(t&&Ks.alternate!==null&&qt.delete(Ks.key===null?vs:Ks.key),me=x(Ks,me,vs),Js===null?Zt=Ks:Js.sibling=Ks,Js=Ks);return t&&qt.forEach(function(lw){return a(be,lw)}),Es&&Qn(be,vs),Zt}function fa(be,me,Se,Je){if(typeof Se=="object"&&Se!==null&&Se.type===T&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case k:e:{for(var Zt=Se.key;me!==null;){if(me.key===Zt){if(Zt=Se.type,Zt===T){if(me.tag===7){n(be,me.sibling),Je=h(me,Se.props.children),Je.return=be,be=Je;break e}}else if(me.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===J&&nn(Zt)===me.type){n(be,me.sibling),Je=h(me,Se.props),Cn(Je,Se),Je.return=be,be=Je;break e}n(be,me);break}else a(be,me);me=me.sibling}Se.type===T?(Je=_i(Se.props.children,be.mode,Je,Se.key),Je.return=be,be=Je):(Je=Ao(Se.type,Se.key,Se.props,null,be.mode,Je),Cn(Je,Se),Je.return=be,be=Je)}return A(be);case E:e:{for(Zt=Se.key;me!==null;){if(me.key===Zt)if(me.tag===4&&me.stateNode.containerInfo===Se.containerInfo&&me.stateNode.implementation===Se.implementation){n(be,me.sibling),Je=h(me,Se.children||[]),Je.return=be,be=Je;break e}else{n(be,me);break}else a(be,me);me=me.sibling}Je=Oc(Se,be.mode,Je),Je.return=be,be=Je}return A(be);case J:return Se=nn(Se),fa(be,me,Se,Je)}if(Y(Se))return Lt(be,me,Se,Je);if(pe(Se)){if(Zt=pe(Se),typeof Zt!="function")throw Error(l(150));return Se=Zt.call(Se),ss(be,me,Se,Je)}if(typeof Se.then=="function")return fa(be,me,Do(Se),Je);if(Se.$$typeof===V)return fa(be,me,B(be,Se),Je);to(be,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint"?(Se=""+Se,me!==null&&me.tag===6?(n(be,me.sibling),Je=h(me,Se),Je.return=be,be=Je):(n(be,me),Je=Pc(Se,be.mode,Je),Je.return=be,be=Je),A(be)):n(be,me)}return function(be,me,Se,Je){try{eo=0;var Zt=fa(be,me,Se,Je);return pl=null,Zt}catch(qt){if(qt===hr||qt===Sn)throw qt;var Js=wr(29,qt,null,be.mode);return Js.lanes=Je,Js.return=be,Js}finally{}}}var js=ts(!0),qr=ts(!1),An=!1;function Zm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jm(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fl(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function hl(t,a,n){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ea&2)!==0){var h=o.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),o.pending=a,a=Co(t),ou(t,null,n),a}return cr(t,o,a,n),Co(t)}function zc(t,a,n){if(a=a.updateQueue,a!==null&&(a=a.shared,(n&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,n|=o,a.lanes=n,ee(t,n)}}function Km(t,a){var n=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var h=null,x=null;if(n=n.firstBaseUpdate,n!==null){do{var A={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};x===null?h=x=A:x=x.next=A,n=n.next}while(n!==null);x===null?h=x=a:x=x.next=a}else h=x=a;n={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:x,shared:o.shared,callbacks:o.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=a:t.next=a,n.lastBaseUpdate=a}var Xm=!1;function Lc(){if(Xm){var t=Yt;if(t!==null)throw t}}function $c(t,a,n,o){Xm=!1;var h=t.updateQueue;An=!1;var x=h.firstBaseUpdate,A=h.lastBaseUpdate,$=h.shared.pending;if($!==null){h.shared.pending=null;var ae=$,Ee=ae.next;ae.next=null,A===null?x=Ee:A.next=Ee,A=ae;var Ye=t.alternate;Ye!==null&&(Ye=Ye.updateQueue,$=Ye.lastBaseUpdate,$!==A&&($===null?Ye.firstBaseUpdate=Ee:$.next=Ee,Ye.lastBaseUpdate=ae))}if(x!==null){var Xe=h.baseState;A=0,Ye=Ee=ae=null,$=x;do{var Me=$.lane&-536870913,Ue=Me!==$.lane;if(Ue?(Ls&Me)===Me:(o&Me)===Me){Me!==0&&Me===wt&&(Xm=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var Lt=t,ss=$;Me=a;var fa=n;switch(ss.tag){case 1:if(Lt=ss.payload,typeof Lt=="function"){Xe=Lt.call(fa,Xe,Me);break e}Xe=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=ss.payload,Me=typeof Lt=="function"?Lt.call(fa,Xe,Me):Lt,Me==null)break e;Xe=v({},Xe,Me);break e;case 2:An=!0}}Me=$.callback,Me!==null&&(t.flags|=64,Ue&&(t.flags|=8192),Ue=h.callbacks,Ue===null?h.callbacks=[Me]:Ue.push(Me))}else Ue={lane:Me,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ye===null?(Ee=Ye=Ue,ae=Xe):Ye=Ye.next=Ue,A|=Me;if($=$.next,$===null){if($=h.shared.pending,$===null)break;Ue=$,$=Ue.next,Ue.next=null,h.lastBaseUpdate=Ue,h.shared.pending=null}}while(!0);Ye===null&&(ae=Xe),h.baseState=ae,h.firstBaseUpdate=Ee,h.lastBaseUpdate=Ye,x===null&&(h.shared.lanes=0),jl|=A,t.lanes=A,t.memoizedState=Xe}}function wx(t,a){if(typeof t!="function")throw Error(l(191,t));t.call(a)}function Sx(t,a){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)wx(n[t],a)}var Po=C(null),hu=C(0);function Cx(t,a){t=Qi,re(hu,t),re(Po,a),Qi=t|a.baseLanes}function ep(){re(hu,Qi),re(Po,Po.current)}function tp(){Qi=hu.current,H(Po),H(hu)}var ln=C(null),En=null;function xl(t){var a=t.alternate;re(La,La.current&1),re(ln,t),En===null&&(a===null||Po.current!==null||a.memoizedState!==null)&&(En=t)}function sp(t){re(La,La.current),re(ln,t),En===null&&(En=t)}function Ax(t){t.tag===22?(re(La,La.current),re(ln,t),En===null&&(En=t)):gl()}function gl(){re(La,La.current),re(ln,ln.current)}function on(t){H(ln),En===t&&(En=null),H(La)}var La=C(0);function xu(t){for(var a=t;a!==null;){if(a.tag===13){var n=a.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||cf(n)||df(n)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Fi=0,bs=null,ma=null,Ua=null,gu=!1,Oo=!1,so=!1,bu=0,Fc=0,Ro=null,JN=0;function ka(){throw Error(l(321))}function ap(t,a){if(a===null)return!1;for(var n=0;n<a.length&&n<t.length;n++)if(!ja(t[n],a[n]))return!1;return!0}function rp(t,a,n,o,h,x){return Fi=x,bs=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,_.H=t===null||t.memoizedState===null?c0:yp,so=!1,x=n(o,h),so=!1,Oo&&(x=Tx(a,n,o,h)),Ex(t),x}function Ex(t){_.H=Vc;var a=ma!==null&&ma.next!==null;if(Fi=0,Ua=ma=bs=null,gu=!1,Fc=0,Ro=null,a)throw Error(l(300));t===null||Ia||(t=t.dependencies,t!==null&&S(t)&&(Ia=!0))}function Tx(t,a,n,o){bs=t;var h=0;do{if(Oo&&(Ro=null),Fc=0,Oo=!1,25<=h)throw Error(l(301));if(h+=1,Ua=ma=null,t.updateQueue!=null){var x=t.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}_.H=d0,x=a(n,o)}while(Oo);return x}function KN(){var t=_.H,a=t.useState()[0];return a=typeof a.then=="function"?Uc(a):a,t=t.useState()[0],(ma!==null?ma.memoizedState:null)!==t&&(bs.flags|=1024),a}function np(){var t=bu!==0;return bu=0,t}function ip(t,a,n){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~n}function lp(t){if(gu){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}gu=!1}Fi=0,Ua=ma=bs=null,Oo=!1,Fc=bu=0,Ro=null}function Cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ua===null?bs.memoizedState=Ua=t:Ua=Ua.next=t,Ua}function $a(){if(ma===null){var t=bs.alternate;t=t!==null?t.memoizedState:null}else t=ma.next;var a=Ua===null?bs.memoizedState:Ua.next;if(a!==null)Ua=a,ma=t;else{if(t===null)throw bs.alternate===null?Error(l(467)):Error(l(310));ma=t,t={memoizedState:ma.memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},Ua===null?bs.memoizedState=Ua=t:Ua=Ua.next=t}return Ua}function yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uc(t){var a=Fc;return Fc+=1,Ro===null&&(Ro=[]),t=Sr(Ro,t,a),a=bs,(Ua===null?a.memoizedState:Ua.next)===null&&(a=a.alternate,_.H=a===null||a.memoizedState===null?c0:yp),t}function ju(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Uc(t);if(t.$$typeof===V)return U(t)}throw Error(l(438,String(t)))}function op(t){var a=null,n=bs.updateQueue;if(n!==null&&(a=n.memoCache),a==null){var o=bs.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),n===null&&(n=yu(),bs.updateQueue=n),n.memoCache=a,n=a.data[a.index],n===void 0)for(n=a.data[a.index]=Array(t),o=0;o<t;o++)n[o]=oe;return a.index++,n}function Ui(t,a){return typeof a=="function"?a(t):a}function vu(t){var a=$a();return cp(a,ma,t)}function cp(t,a,n){var o=t.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=n;var h=t.baseQueue,x=o.pending;if(x!==null){if(h!==null){var A=h.next;h.next=x.next,x.next=A}a.baseQueue=h=x,o.pending=null}if(x=t.baseState,h===null)t.memoizedState=x;else{a=h.next;var $=A=null,ae=null,Ee=a,Ye=!1;do{var Xe=Ee.lane&-536870913;if(Xe!==Ee.lane?(Ls&Xe)===Xe:(Fi&Xe)===Xe){var Me=Ee.revertLane;if(Me===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),Xe===wt&&(Ye=!0);else if((Fi&Me)===Me){Ee=Ee.next,Me===wt&&(Ye=!0);continue}else Xe={lane:0,revertLane:Ee.revertLane,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ae===null?($=ae=Xe,A=x):ae=ae.next=Xe,bs.lanes|=Me,jl|=Me;Xe=Ee.action,so&&n(x,Xe),x=Ee.hasEagerState?Ee.eagerState:n(x,Xe)}else Me={lane:Xe,revertLane:Ee.revertLane,gesture:Ee.gesture,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ae===null?($=ae=Me,A=x):ae=ae.next=Me,bs.lanes|=Xe,jl|=Xe;Ee=Ee.next}while(Ee!==null&&Ee!==a);if(ae===null?A=x:ae.next=$,!ja(x,t.memoizedState)&&(Ia=!0,Ye&&(n=Yt,n!==null)))throw n;t.memoizedState=x,t.baseState=A,t.baseQueue=ae,o.lastRenderedState=x}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function dp(t){var a=$a(),n=a.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=t;var o=n.dispatch,h=n.pending,x=a.memoizedState;if(h!==null){n.pending=null;var A=h=h.next;do x=t(x,A.action),A=A.next;while(A!==h);ja(x,a.memoizedState)||(Ia=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),n.lastRenderedState=x}return[x,o]}function kx(t,a,n){var o=bs,h=$a(),x=Es;if(x){if(n===void 0)throw Error(l(407));n=n()}else n=a();var A=!ja((ma||h).memoizedState,n);if(A&&(h.memoizedState=n,Ia=!0),h=h.queue,pp(Ox.bind(null,o,h,t),[t]),h.getSnapshot!==a||A||Ua!==null&&Ua.memoizedState.tag&1){if(o.flags|=2048,Mo(9,{destroy:void 0},Px.bind(null,o,h,n,a),null),ga===null)throw Error(l(349));x||(Fi&127)!==0||Dx(o,a,n)}return n}function Dx(t,a,n){t.flags|=16384,t={getSnapshot:a,value:n},a=bs.updateQueue,a===null?(a=yu(),bs.updateQueue=a,a.stores=[t]):(n=a.stores,n===null?a.stores=[t]:n.push(t))}function Px(t,a,n,o){a.value=n,a.getSnapshot=o,Rx(a)&&Mx(t)}function Ox(t,a,n){return n(function(){Rx(a)&&Mx(t)})}function Rx(t){var a=t.getSnapshot;t=t.value;try{var n=a();return!ja(t,n)}catch{return!0}}function Mx(t){var a=hi(t,2);a!==null&&Wr(a,t,2)}function up(t){var a=Cr();if(typeof t=="function"){var n=t;if(t=n(),so){Vs(!0);try{n()}finally{Vs(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:t},a}function _x(t,a,n,o){return t.baseState=n,cp(t,ma,typeof o=="function"?o:Ui)}function XN(t,a,n,o,h){if(Su(t))throw Error(l(485));if(t=a.action,t!==null){var x={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){x.listeners.push(A)}};_.T!==null?n(!0):x.isTransition=!1,o(x),n=a.pending,n===null?(x.next=a.pending=x,zx(a,x)):(x.next=n.next,a.pending=n.next=x)}}function zx(t,a){var n=a.action,o=a.payload,h=t.state;if(a.isTransition){var x=_.T,A={};_.T=A;try{var $=n(h,o),ae=_.S;ae!==null&&ae(A,$),Lx(t,a,$)}catch(Ee){mp(t,a,Ee)}finally{x!==null&&A.types!==null&&(x.types=A.types),_.T=x}}else try{x=n(h,o),Lx(t,a,x)}catch(Ee){mp(t,a,Ee)}}function Lx(t,a,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(o){$x(t,a,o)},function(o){return mp(t,a,o)}):$x(t,a,n)}function $x(t,a,n){a.status="fulfilled",a.value=n,Fx(a),t.state=n,a=t.pending,a!==null&&(n=a.next,n===a?t.pending=null:(n=n.next,a.next=n,zx(t,n)))}function mp(t,a,n){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=n,Fx(a),a=a.next;while(a!==o)}t.action=null}function Fx(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Ux(t,a){return a}function Ix(t,a){if(Es){var n=ga.formState;if(n!==null){e:{var o=bs;if(Es){if(ua){t:{for(var h=ua,x=Wa;h.nodeType!==8;){if(!x){h=null;break t}if(h=Tn(h.nextSibling),h===null){h=null;break t}}x=h.data,h=x==="F!"||x==="F"?h:null}if(h){ua=Tn(h.nextSibling),o=h.data==="F!";break e}}Yn(o)}o=!1}o&&(a=n[0])}}return n=Cr(),n.memoizedState=n.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ux,lastRenderedState:a},n.queue=o,n=i0.bind(null,bs,o),o.dispatch=n,o=up(!1),x=bp.bind(null,bs,!1,o.queue),o=Cr(),h={state:a,dispatch:null,action:t,pending:null},o.queue=h,n=XN.bind(null,bs,h,x,n),h.dispatch=n,o.memoizedState=t,[a,n,!1]}function Vx(t){var a=$a();return Bx(a,ma,t)}function Bx(t,a,n){if(a=cp(t,a,Ux)[0],t=vu(Ui)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=Uc(a)}catch(A){throw A===hr?Sn:A}else o=a;a=$a();var h=a.queue,x=h.dispatch;return n!==a.memoizedState&&(bs.flags|=2048,Mo(9,{destroy:void 0},e1.bind(null,h,n),null)),[o,x,t]}function e1(t,a){t.action=a}function qx(t){var a=$a(),n=ma;if(n!==null)return Bx(a,n,t);$a(),a=a.memoizedState,n=$a();var o=n.queue.dispatch;return n.memoizedState=t,[a,o,!1]}function Mo(t,a,n,o){return t={tag:t,create:n,deps:o,inst:a,next:null},a=bs.updateQueue,a===null&&(a=yu(),bs.updateQueue=a),n=a.lastEffect,n===null?a.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,a.lastEffect=t),t}function Hx(){return $a().memoizedState}function Nu(t,a,n,o){var h=Cr();bs.flags|=t,h.memoizedState=Mo(1|a,{destroy:void 0},n,o===void 0?null:o)}function wu(t,a,n,o){var h=$a();o=o===void 0?null:o;var x=h.memoizedState.inst;ma!==null&&o!==null&&ap(o,ma.memoizedState.deps)?h.memoizedState=Mo(a,x,n,o):(bs.flags|=t,h.memoizedState=Mo(1|a,x,n,o))}function Gx(t,a){Nu(8390656,8,t,a)}function pp(t,a){wu(2048,8,t,a)}function t1(t){bs.flags|=4;var a=bs.updateQueue;if(a===null)a=yu(),bs.updateQueue=a,a.events=[t];else{var n=a.events;n===null?a.events=[t]:n.push(t)}}function Qx(t){var a=$a().memoizedState;return t1({ref:a,nextImpl:t}),function(){if((ea&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}function Yx(t,a){return wu(4,2,t,a)}function Wx(t,a){return wu(4,4,t,a)}function Zx(t,a){if(typeof a=="function"){t=t();var n=a(t);return function(){typeof n=="function"?n():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Jx(t,a,n){n=n!=null?n.concat([t]):null,wu(4,4,Zx.bind(null,a,t),n)}function fp(){}function Kx(t,a){var n=$a();a=a===void 0?null:a;var o=n.memoizedState;return a!==null&&ap(a,o[1])?o[0]:(n.memoizedState=[t,a],t)}function Xx(t,a){var n=$a();a=a===void 0?null:a;var o=n.memoizedState;if(a!==null&&ap(a,o[1]))return o[0];if(o=t(),so){Vs(!0);try{t()}finally{Vs(!1)}}return n.memoizedState=[o,a],o}function hp(t,a,n){return n===void 0||(Fi&1073741824)!==0&&(Ls&261930)===0?t.memoizedState=a:(t.memoizedState=n,t=eg(),bs.lanes|=t,jl|=t,n)}function e0(t,a,n,o){return ja(n,a)?n:Po.current!==null?(t=hp(t,n,o),ja(t,a)||(Ia=!0),t):(Fi&42)===0||(Fi&1073741824)!==0&&(Ls&261930)===0?(Ia=!0,t.memoizedState=n):(t=eg(),bs.lanes|=t,jl|=t,a)}function t0(t,a,n,o,h){var x=X.p;X.p=x!==0&&8>x?x:8;var A=_.T,$={};_.T=$,bp(t,!1,a,n);try{var ae=h(),Ee=_.S;if(Ee!==null&&Ee($,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Ye=sa(ae,o);Ic(t,a,Ye,un(t))}else Ic(t,a,o,un(t))}catch(Xe){Ic(t,a,{then:function(){},status:"rejected",reason:Xe},un())}finally{X.p=x,A!==null&&$.types!==null&&(A.types=$.types),_.T=A}}function s1(){}function xp(t,a,n,o){if(t.tag!==5)throw Error(l(476));var h=s0(t).queue;t0(t,h,a,Q,n===null?s1:function(){return a0(t),n(o)})}function s0(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:Q},next:null};var n={};return a.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:n},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function a0(t){var a=s0(t);a.next===null&&(a=t.alternate.memoizedState),Ic(t,a.next.queue,{},un())}function gp(){return U(rd)}function r0(){return $a().memoizedState}function n0(){return $a().memoizedState}function a1(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var n=un();t=fl(n);var o=hl(a,t,n);o!==null&&(Wr(o,a,n),zc(o,a,n)),a={cache:Nt()},t.payload=a;return}a=a.return}}function r1(t,a,n){var o=un();n={lane:o,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Su(t)?l0(a,n):(n=kc(t,a,n,o),n!==null&&(Wr(n,t,o),o0(n,a,o)))}function i0(t,a,n){var o=un();Ic(t,a,n,o)}function Ic(t,a,n,o){var h={lane:o,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Su(t))l0(a,h);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var A=a.lastRenderedState,$=x(A,n);if(h.hasEagerState=!0,h.eagerState=$,ja($,A))return cr(t,a,h,0),ga===null&&So(),!1}catch{}finally{}if(n=kc(t,a,h,o),n!==null)return Wr(n,t,o),o0(n,a,o),!0}return!1}function bp(t,a,n,o){if(o={lane:2,revertLane:Zp(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Su(t)){if(a)throw Error(l(479))}else a=kc(t,n,o,2),a!==null&&Wr(a,t,2)}function Su(t){var a=t.alternate;return t===bs||a!==null&&a===bs}function l0(t,a){Oo=gu=!0;var n=t.pending;n===null?a.next=a:(a.next=n.next,n.next=a),t.pending=a}function o0(t,a,n){if((n&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,n|=o,a.lanes=n,ee(t,n)}}var Vc={readContext:U,use:ju,useCallback:ka,useContext:ka,useEffect:ka,useImperativeHandle:ka,useLayoutEffect:ka,useInsertionEffect:ka,useMemo:ka,useReducer:ka,useRef:ka,useState:ka,useDebugValue:ka,useDeferredValue:ka,useTransition:ka,useSyncExternalStore:ka,useId:ka,useHostTransitionStatus:ka,useFormState:ka,useActionState:ka,useOptimistic:ka,useMemoCache:ka,useCacheRefresh:ka};Vc.useEffectEvent=ka;var c0={readContext:U,use:ju,useCallback:function(t,a){return Cr().memoizedState=[t,a===void 0?null:a],t},useContext:U,useEffect:Gx,useImperativeHandle:function(t,a,n){n=n!=null?n.concat([t]):null,Nu(4194308,4,Zx.bind(null,a,t),n)},useLayoutEffect:function(t,a){return Nu(4194308,4,t,a)},useInsertionEffect:function(t,a){Nu(4,2,t,a)},useMemo:function(t,a){var n=Cr();a=a===void 0?null:a;var o=t();if(so){Vs(!0);try{t()}finally{Vs(!1)}}return n.memoizedState=[o,a],o},useReducer:function(t,a,n){var o=Cr();if(n!==void 0){var h=n(a);if(so){Vs(!0);try{n(a)}finally{Vs(!1)}}}else h=a;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=r1.bind(null,bs,t),[o.memoizedState,t]},useRef:function(t){var a=Cr();return t={current:t},a.memoizedState=t},useState:function(t){t=up(t);var a=t.queue,n=i0.bind(null,bs,a);return a.dispatch=n,[t.memoizedState,n]},useDebugValue:fp,useDeferredValue:function(t,a){var n=Cr();return hp(n,t,a)},useTransition:function(){var t=up(!1);return t=t0.bind(null,bs,t.queue,!0,!1),Cr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,n){var o=bs,h=Cr();if(Es){if(n===void 0)throw Error(l(407));n=n()}else{if(n=a(),ga===null)throw Error(l(349));(Ls&127)!==0||Dx(o,a,n)}h.memoizedState=n;var x={value:n,getSnapshot:a};return h.queue=x,Gx(Ox.bind(null,o,x,t),[t]),o.flags|=2048,Mo(9,{destroy:void 0},Px.bind(null,o,x,n,a),null),n},useId:function(){var t=Cr(),a=ga.identifierPrefix;if(Es){var n=vn,o=rn;n=(o&~(1<<32-rs(o)-1)).toString(32)+n,a="_"+a+"R_"+n,n=bu++,0<n&&(a+="H"+n.toString(32)),a+="_"}else n=JN++,a="_"+a+"r_"+n.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:gp,useFormState:Ix,useActionState:Ix,useOptimistic:function(t){var a=Cr();a.memoizedState=a.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=n,a=bp.bind(null,bs,!0,n),n.dispatch=a,[t,a]},useMemoCache:op,useCacheRefresh:function(){return Cr().memoizedState=a1.bind(null,bs)},useEffectEvent:function(t){var a=Cr(),n={impl:t};return a.memoizedState=n,function(){if((ea&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}},yp={readContext:U,use:ju,useCallback:Kx,useContext:U,useEffect:pp,useImperativeHandle:Jx,useInsertionEffect:Yx,useLayoutEffect:Wx,useMemo:Xx,useReducer:vu,useRef:Hx,useState:function(){return vu(Ui)},useDebugValue:fp,useDeferredValue:function(t,a){var n=$a();return e0(n,ma.memoizedState,t,a)},useTransition:function(){var t=vu(Ui)[0],a=$a().memoizedState;return[typeof t=="boolean"?t:Uc(t),a]},useSyncExternalStore:kx,useId:r0,useHostTransitionStatus:gp,useFormState:Vx,useActionState:Vx,useOptimistic:function(t,a){var n=$a();return _x(n,ma,t,a)},useMemoCache:op,useCacheRefresh:n0};yp.useEffectEvent=Qx;var d0={readContext:U,use:ju,useCallback:Kx,useContext:U,useEffect:pp,useImperativeHandle:Jx,useInsertionEffect:Yx,useLayoutEffect:Wx,useMemo:Xx,useReducer:dp,useRef:Hx,useState:function(){return dp(Ui)},useDebugValue:fp,useDeferredValue:function(t,a){var n=$a();return ma===null?hp(n,t,a):e0(n,ma.memoizedState,t,a)},useTransition:function(){var t=dp(Ui)[0],a=$a().memoizedState;return[typeof t=="boolean"?t:Uc(t),a]},useSyncExternalStore:kx,useId:r0,useHostTransitionStatus:gp,useFormState:qx,useActionState:qx,useOptimistic:function(t,a){var n=$a();return ma!==null?_x(n,ma,t,a):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:op,useCacheRefresh:n0};d0.useEffectEvent=Qx;function jp(t,a,n,o){a=t.memoizedState,n=n(o,a),n=n==null?a:v({},a,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vp={enqueueSetState:function(t,a,n){t=t._reactInternals;var o=un(),h=fl(o);h.payload=a,n!=null&&(h.callback=n),a=hl(t,h,o),a!==null&&(Wr(a,t,o),zc(a,t,o))},enqueueReplaceState:function(t,a,n){t=t._reactInternals;var o=un(),h=fl(o);h.tag=1,h.payload=a,n!=null&&(h.callback=n),a=hl(t,h,o),a!==null&&(Wr(a,t,o),zc(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var n=un(),o=fl(n);o.tag=2,a!=null&&(o.callback=a),a=hl(t,o,n),a!==null&&(Wr(a,t,n),zc(a,t,n))}};function u0(t,a,n,o,h,x,A){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,x,A):a.prototype&&a.prototype.isPureReactComponent?!yn(n,o)||!yn(h,x):!0}function m0(t,a,n,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(n,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(n,o),a.state!==t&&vp.enqueueReplaceState(a,a.state,null)}function ao(t,a){var n=a;if("ref"in a){n={};for(var o in a)o!=="ref"&&(n[o]=a[o])}if(t=t.defaultProps){n===a&&(n=v({},n));for(var h in t)n[h]===void 0&&(n[h]=t[h])}return n}function p0(t){fi(t)}function f0(t){console.error(t)}function h0(t){fi(t)}function Cu(t,a){try{var n=t.onUncaughtError;n(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function x0(t,a,n){try{var o=t.onCaughtError;o(n.value,{componentStack:n.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Np(t,a,n){return n=fl(n),n.tag=3,n.payload={element:null},n.callback=function(){Cu(t,a)},n}function g0(t){return t=fl(t),t.tag=3,t}function b0(t,a,n,o){var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var x=o.value;t.payload=function(){return h(x)},t.callback=function(){x0(a,n,o)}}var A=n.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(t.callback=function(){x0(a,n,o),typeof h!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var $=o.stack;this.componentDidCatch(o.value,{componentStack:$!==null?$:""})})}function n1(t,a,n,o,h){if(n.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=n.alternate,a!==null&&N(a,n,h,!0),n=ln.current,n!==null){switch(n.tag){case 31:case 13:return En===null?Lu():n.alternate===null&&Da===0&&(Da=3),n.flags&=-257,n.flags|=65536,n.lanes=h,o===dt?n.flags|=16384:(a=n.updateQueue,a===null?n.updateQueue=new Set([o]):a.add(o),Qp(t,o,h)),!1;case 22:return n.flags|=65536,o===dt?n.flags|=16384:(a=n.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},n.updateQueue=a):(n=a.retryQueue,n===null?a.retryQueue=new Set([o]):n.add(o)),Qp(t,o,h)),!1}throw Error(l(435,n.tag))}return Qp(t,o,h),Lu(),!1}if(Es)return a=ln.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,o!==Eo&&(t=Error(l(422),{cause:o}),ml(Fr(t,n)))):(o!==Eo&&(a=Error(l(423),{cause:o}),ml(Fr(a,n))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Fr(o,n),h=Np(t.stateNode,o,h),Km(t,h),Da!==4&&(Da=2)),!1;var x=Error(l(520),{cause:o});if(x=Fr(x,n),Zc===null?Zc=[x]:Zc.push(x),Da!==4&&(Da=2),a===null)return!0;o=Fr(o,n),n=a;do{switch(n.tag){case 3:return n.flags|=65536,t=h&-h,n.lanes|=t,t=Np(n.stateNode,o,t),Km(n,t),!1;case 1:if(a=n.type,x=n.stateNode,(n.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(vl===null||!vl.has(x))))return n.flags|=65536,h&=-h,n.lanes|=h,h=g0(h),b0(h,t,n,o),Km(n,h),!1}n=n.return}while(n!==null);return!1}var wp=Error(l(461)),Ia=!1;function dr(t,a,n,o){a.child=t===null?qr(a,null,n,o):js(a,t.child,n,o)}function y0(t,a,n,o,h){n=n.render;var x=a.ref;if("ref"in o){var A={};for(var $ in o)$!=="ref"&&(A[$]=o[$])}else A=o;return D(a),o=rp(t,a,n,A,x,h),$=np(),t!==null&&!Ia?(ip(t,a,h),Ii(t,a,h)):(Es&&$&&Rc(a),a.flags|=1,dr(t,a,o,h),a.child)}function j0(t,a,n,o,h){if(t===null){var x=n.type;return typeof x=="function"&&!Dc(x)&&x.defaultProps===void 0&&n.compare===null?(a.tag=15,a.type=x,v0(t,a,x,o,h)):(t=Ao(n.type,null,o,a,a.mode,h),t.ref=a.ref,t.return=a,a.child=t)}if(x=t.child,!Pp(t,h)){var A=x.memoizedProps;if(n=n.compare,n=n!==null?n:yn,n(A,o)&&t.ref===a.ref)return Ii(t,a,h)}return a.flags|=1,t=$r(x,o),t.ref=a.ref,t.return=a,a.child=t}function v0(t,a,n,o,h){if(t!==null){var x=t.memoizedProps;if(yn(x,o)&&t.ref===a.ref)if(Ia=!1,a.pendingProps=o=x,Pp(t,h))(t.flags&131072)!==0&&(Ia=!0);else return a.lanes=t.lanes,Ii(t,a,h)}return Sp(t,a,n,o,h)}function N0(t,a,n,o){var h=o.children,x=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|n:n,t!==null){for(o=a.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~x}else o=0,a.child=null;return w0(t,a,x,n,o)}if((n&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Os(a,x!==null?x.cachePool:null),x!==null?Cx(a,x):ep(),Ax(a);else return o=a.lanes=536870912,w0(t,a,x!==null?x.baseLanes|n:n,n,o)}else x!==null?(Os(a,x.cachePool),Cx(a,x),gl(),a.memoizedState=null):(t!==null&&Os(a,null),ep(),gl());return dr(t,a,h,n),a.child}function Bc(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function w0(t,a,n,o,h){var x=Is();return x=x===null?null:{parent:We._currentValue,pool:x},a.memoizedState={baseLanes:n,cachePool:x},t!==null&&Os(a,null),ep(),Ax(a),t!==null&&N(t,a,o,!0),a.childLanes=h,null}function Au(t,a){return a=Tu({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function S0(t,a,n){return js(a,t.child,null,n),t=Au(a,a.pendingProps),t.flags|=2,on(a),a.memoizedState=null,t}function i1(t,a,n){var o=a.pendingProps,h=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Es){if(o.mode==="hidden")return t=Au(a,o),a.lanes=536870912,Bc(null,t);if(sp(a),(t=ua)?(t=zg(t,Wa),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Gn!==null?{id:rn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},n=cl(t),n.return=a,a.child=n,Ya=a,ua=null)):t=null,t===null)throw Yn(a);return a.lanes=536870912,null}return Au(a,o)}var x=t.memoizedState;if(x!==null){var A=x.dehydrated;if(sp(a),h)if(a.flags&256)a.flags&=-257,a=S0(t,a,n);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(l(558));else if(Ia||N(t,a,n,!1),h=(n&t.childLanes)!==0,Ia||h){if(o=ga,o!==null&&(A=xe(o,n),A!==0&&A!==x.retryLane))throw x.retryLane=A,hi(t,A),Wr(o,t,A),wp;Lu(),a=S0(t,a,n)}else t=x.treeContext,ua=Tn(A.nextSibling),Ya=a,Es=!0,gi=null,Wa=!1,t!==null&&uu(a,t),a=Au(a,o),a.flags|=4096;return a}return t=$r(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Eu(t,a){var n=a.ref;if(n===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(l(284));(t===null||t.ref!==n)&&(a.flags|=4194816)}}function Sp(t,a,n,o,h){return D(a),n=rp(t,a,n,o,void 0,h),o=np(),t!==null&&!Ia?(ip(t,a,h),Ii(t,a,h)):(Es&&o&&Rc(a),a.flags|=1,dr(t,a,n,h),a.child)}function C0(t,a,n,o,h,x){return D(a),a.updateQueue=null,n=Tx(a,o,n,h),Ex(t),o=np(),t!==null&&!Ia?(ip(t,a,x),Ii(t,a,x)):(Es&&o&&Rc(a),a.flags|=1,dr(t,a,n,x),a.child)}function A0(t,a,n,o,h){if(D(a),a.stateNode===null){var x=Lr,A=n.contextType;typeof A=="object"&&A!==null&&(x=U(A)),x=new n(o,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=vp,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=o,x.state=a.memoizedState,x.refs={},Zm(a),A=n.contextType,x.context=typeof A=="object"&&A!==null?U(A):Lr,x.state=a.memoizedState,A=n.getDerivedStateFromProps,typeof A=="function"&&(jp(a,n,A,o),x.state=a.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(A=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),A!==x.state&&vp.enqueueReplaceState(x,x.state,null),$c(a,o,x,h),Lc(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){x=a.stateNode;var $=a.memoizedProps,ae=ao(n,$);x.props=ae;var Ee=x.context,Ye=n.contextType;A=Lr,typeof Ye=="object"&&Ye!==null&&(A=U(Ye));var Xe=n.getDerivedStateFromProps;Ye=typeof Xe=="function"||typeof x.getSnapshotBeforeUpdate=="function",$=a.pendingProps!==$,Ye||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||($||Ee!==A)&&m0(a,x,o,A),An=!1;var Me=a.memoizedState;x.state=Me,$c(a,o,x,h),Lc(),Ee=a.memoizedState,$||Me!==Ee||An?(typeof Xe=="function"&&(jp(a,n,Xe,o),Ee=a.memoizedState),(ae=An||u0(a,n,ae,o,Me,Ee,A))?(Ye||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=Ee),x.props=o,x.state=Ee,x.context=A,o=ae):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{x=a.stateNode,Jm(t,a),A=a.memoizedProps,Ye=ao(n,A),x.props=Ye,Xe=a.pendingProps,Me=x.context,Ee=n.contextType,ae=Lr,typeof Ee=="object"&&Ee!==null&&(ae=U(Ee)),$=n.getDerivedStateFromProps,(Ee=typeof $=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==Xe||Me!==ae)&&m0(a,x,o,ae),An=!1,Me=a.memoizedState,x.state=Me,$c(a,o,x,h),Lc();var Ue=a.memoizedState;A!==Xe||Me!==Ue||An||t!==null&&t.dependencies!==null&&S(t.dependencies)?(typeof $=="function"&&(jp(a,n,$,o),Ue=a.memoizedState),(Ye=An||u0(a,n,Ye,o,Me,Ue,ae)||t!==null&&t.dependencies!==null&&S(t.dependencies))?(Ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(o,Ue,ae),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(o,Ue,ae)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||A===t.memoizedProps&&Me===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&Me===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=Ue),x.props=o,x.state=Ue,x.context=ae,o=Ye):(typeof x.componentDidUpdate!="function"||A===t.memoizedProps&&Me===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&Me===t.memoizedState||(a.flags|=1024),o=!1)}return x=o,Eu(t,a),o=(a.flags&128)!==0,x||o?(x=a.stateNode,n=o&&typeof n.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,t!==null&&o?(a.child=js(a,t.child,null,h),a.child=js(a,null,n,h)):dr(t,a,n,h),a.memoizedState=x.state,t=a.child):t=Ii(t,a,h),t}function E0(t,a,n,o){return Li(),a.flags|=256,dr(t,a,n,o),a.child}var Cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ap(t){return{baseLanes:t,cachePool:Br()}}function Ep(t,a,n){return t=t!==null?t.childLanes&~n:0,a&&(t|=dn),t}function T0(t,a,n){var o=a.pendingProps,h=!1,x=(a.flags&128)!==0,A;if((A=x)||(A=t!==null&&t.memoizedState===null?!1:(La.current&2)!==0),A&&(h=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,t===null){if(Es){if(h?xl(a):gl(),(t=ua)?(t=zg(t,Wa),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Gn!==null?{id:rn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},n=cl(t),n.return=a,a.child=n,Ya=a,ua=null)):t=null,t===null)throw Yn(a);return df(t)?a.lanes=32:a.lanes=536870912,null}var $=o.children;return o=o.fallback,h?(gl(),h=a.mode,$=Tu({mode:"hidden",children:$},h),o=_i(o,h,n,null),$.return=a,o.return=a,$.sibling=o,a.child=$,o=a.child,o.memoizedState=Ap(n),o.childLanes=Ep(t,A,n),a.memoizedState=Cp,Bc(null,o)):(xl(a),Tp(a,$))}var ae=t.memoizedState;if(ae!==null&&($=ae.dehydrated,$!==null)){if(x)a.flags&256?(xl(a),a.flags&=-257,a=kp(t,a,n)):a.memoizedState!==null?(gl(),a.child=t.child,a.flags|=128,a=null):(gl(),$=o.fallback,h=a.mode,o=Tu({mode:"visible",children:o.children},h),$=_i($,h,n,null),$.flags|=2,o.return=a,$.return=a,o.sibling=$,a.child=o,js(a,t.child,null,n),o=a.child,o.memoizedState=Ap(n),o.childLanes=Ep(t,A,n),a.memoizedState=Cp,a=Bc(null,o));else if(xl(a),df($)){if(A=$.nextSibling&&$.nextSibling.dataset,A)var Ee=A.dgst;A=Ee,o=Error(l(419)),o.stack="",o.digest=A,ml({value:o,source:null,stack:null}),a=kp(t,a,n)}else if(Ia||N(t,a,n,!1),A=(n&t.childLanes)!==0,Ia||A){if(A=ga,A!==null&&(o=xe(A,n),o!==0&&o!==ae.retryLane))throw ae.retryLane=o,hi(t,o),Wr(A,t,o),wp;cf($)||Lu(),a=kp(t,a,n)}else cf($)?(a.flags|=192,a.child=t.child,a=null):(t=ae.treeContext,ua=Tn($.nextSibling),Ya=a,Es=!0,gi=null,Wa=!1,t!==null&&uu(a,t),a=Tp(a,o.children),a.flags|=4096);return a}return h?(gl(),$=o.fallback,h=a.mode,ae=t.child,Ee=ae.sibling,o=$r(ae,{mode:"hidden",children:o.children}),o.subtreeFlags=ae.subtreeFlags&65011712,Ee!==null?$=$r(Ee,$):($=_i($,h,n,null),$.flags|=2),$.return=a,o.return=a,o.sibling=$,a.child=o,Bc(null,o),o=a.child,$=t.child.memoizedState,$===null?$=Ap(n):(h=$.cachePool,h!==null?(ae=We._currentValue,h=h.parent!==ae?{parent:ae,pool:ae}:h):h=Br(),$={baseLanes:$.baseLanes|n,cachePool:h}),o.memoizedState=$,o.childLanes=Ep(t,A,n),a.memoizedState=Cp,Bc(t.child,o)):(xl(a),n=t.child,t=n.sibling,n=$r(n,{mode:"visible",children:o.children}),n.return=a,n.sibling=null,t!==null&&(A=a.deletions,A===null?(a.deletions=[t],a.flags|=16):A.push(t)),a.child=n,a.memoizedState=null,n)}function Tp(t,a){return a=Tu({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Tu(t,a){return t=wr(22,t,null,a),t.lanes=0,t}function kp(t,a,n){return js(a,t.child,null,n),t=Tp(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function k0(t,a,n){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),c(t.return,a,n)}function Dp(t,a,n,o,h,x){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:h,treeForkCount:x}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=o,A.tail=n,A.tailMode=h,A.treeForkCount=x)}function D0(t,a,n){var o=a.pendingProps,h=o.revealOrder,x=o.tail;o=o.children;var A=La.current,$=(A&2)!==0;if($?(A=A&1|2,a.flags|=128):A&=1,re(La,A),dr(t,a,o,n),o=Es?Kl:0,!$&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k0(t,n,a);else if(t.tag===19)k0(t,n,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(n=a.child,h=null;n!==null;)t=n.alternate,t!==null&&xu(t)===null&&(h=n),n=n.sibling;n=h,n===null?(h=a.child,a.child=null):(h=n.sibling,n.sibling=null),Dp(a,!1,h,n,x,o);break;case"backwards":case"unstable_legacy-backwards":for(n=null,h=a.child,a.child=null;h!==null;){if(t=h.alternate,t!==null&&xu(t)===null){a.child=h;break}t=h.sibling,h.sibling=n,n=h,h=t}Dp(a,!0,n,null,x,o);break;case"together":Dp(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function Ii(t,a,n){if(t!==null&&(a.dependencies=t.dependencies),jl|=a.lanes,(n&a.childLanes)===0)if(t!==null){if(N(t,a,n,!1),(n&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(l(153));if(a.child!==null){for(t=a.child,n=$r(t,t.pendingProps),a.child=n,n.return=a;t.sibling!==null;)t=t.sibling,n=n.sibling=$r(t,t.pendingProps),n.return=a;n.sibling=null}return a.child}function Pp(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&S(t)))}function l1(t,a,n){switch(a.tag){case 3:de(a,a.stateNode.containerInfo),Wn(a,We,t.memoizedState.cache),Li();break;case 27:case 5:Ce(a);break;case 4:de(a,a.stateNode.containerInfo);break;case 10:Wn(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,sp(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(xl(a),a.flags|=128,null):(n&a.child.childLanes)!==0?T0(t,a,n):(xl(a),t=Ii(t,a,n),t!==null?t.sibling:null);xl(a);break;case 19:var h=(t.flags&128)!==0;if(o=(n&a.childLanes)!==0,o||(N(t,a,n,!1),o=(n&a.childLanes)!==0),h){if(o)return D0(t,a,n);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(La,La.current),o)break;return null;case 22:return a.lanes=0,N0(t,a,n,a.pendingProps);case 24:Wn(a,We,t.memoizedState.cache)}return Ii(t,a,n)}function P0(t,a,n){if(t!==null)if(t.memoizedProps!==a.pendingProps)Ia=!0;else{if(!Pp(t,n)&&(a.flags&128)===0)return Ia=!1,l1(t,a,n);Ia=(t.flags&131072)!==0}else Ia=!1,Es&&(a.flags&1048576)!==0&&du(a,Kl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=nn(a.elementType),a.type=t,typeof t=="function")Dc(t)?(o=ao(t,o),a.tag=1,a=A0(null,a,t,o,n)):(a.tag=0,a=Sp(null,a,t,o,n));else{if(t!=null){var h=t.$$typeof;if(h===le){a.tag=11,a=y0(null,a,t,o,n);break e}else if(h===P){a.tag=14,a=j0(null,a,t,o,n);break e}}throw a=R(t)||t,Error(l(306,a,""))}}return a;case 0:return Sp(t,a,a.type,a.pendingProps,n);case 1:return o=a.type,h=ao(o,a.pendingProps),A0(t,a,o,h,n);case 3:e:{if(de(a,a.stateNode.containerInfo),t===null)throw Error(l(387));o=a.pendingProps;var x=a.memoizedState;h=x.element,Jm(t,a),$c(a,o,null,n);var A=a.memoizedState;if(o=A.cache,Wn(a,We,o),o!==x.cache&&b(a,[We],n,!0),Lc(),o=A.element,x.isDehydrated)if(x={element:o,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=E0(t,a,o,n);break e}else if(o!==h){h=Fr(Error(l(424)),a),ml(h),a=E0(t,a,o,n);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ua=Tn(t.firstChild),Ya=a,Es=!0,gi=null,Wa=!0,n=qr(a,null,o,n),a.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Li(),o===h){a=Ii(t,a,n);break e}dr(t,a,o,n)}a=a.child}return a;case 26:return Eu(t,a),t===null?(n=Vg(a.type,null,a.pendingProps,null))?a.memoizedState=n:Es||(n=a.type,t=a.pendingProps,o=qu(O.current).createElement(n),o[pt]=a,o[St]=t,ur(o,n,t),na(o),a.stateNode=o):a.memoizedState=Vg(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ce(a),t===null&&Es&&(o=a.stateNode=Fg(a.type,a.pendingProps,O.current),Ya=a,Wa=!0,h=ua,Cl(a.type)?(uf=h,ua=Tn(o.firstChild)):ua=h),dr(t,a,a.pendingProps.children,n),Eu(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Es&&((h=o=ua)&&(o=L1(o,a.type,a.pendingProps,Wa),o!==null?(a.stateNode=o,Ya=a,ua=Tn(o.firstChild),Wa=!1,h=!0):h=!1),h||Yn(a)),Ce(a),h=a.type,x=a.pendingProps,A=t!==null?t.memoizedProps:null,o=x.children,nf(h,x)?o=null:A!==null&&nf(h,A)&&(a.flags|=32),a.memoizedState!==null&&(h=rp(t,a,KN,null,null,n),rd._currentValue=h),Eu(t,a),dr(t,a,o,n),a.child;case 6:return t===null&&Es&&((t=n=ua)&&(n=$1(n,a.pendingProps,Wa),n!==null?(a.stateNode=n,Ya=a,ua=null,t=!0):t=!1),t||Yn(a)),null;case 13:return T0(t,a,n);case 4:return de(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=js(a,null,o,n):dr(t,a,o,n),a.child;case 11:return y0(t,a,a.type,a.pendingProps,n);case 7:return dr(t,a,a.pendingProps,n),a.child;case 8:return dr(t,a,a.pendingProps.children,n),a.child;case 12:return dr(t,a,a.pendingProps.children,n),a.child;case 10:return o=a.pendingProps,Wn(a,a.type,o.value),dr(t,a,o.children,n),a.child;case 9:return h=a.type._context,o=a.pendingProps.children,D(a),h=U(h),o=o(h),a.flags|=1,dr(t,a,o,n),a.child;case 14:return j0(t,a,a.type,a.pendingProps,n);case 15:return v0(t,a,a.type,a.pendingProps,n);case 19:return D0(t,a,n);case 31:return i1(t,a,n);case 22:return N0(t,a,n,a.pendingProps);case 24:return D(a),o=U(We),t===null?(h=Is(),h===null&&(h=ga,x=Nt(),h.pooledCache=x,x.refCount++,x!==null&&(h.pooledCacheLanes|=n),h=x),a.memoizedState={parent:o,cache:h},Zm(a),Wn(a,We,h)):((t.lanes&n)!==0&&(Jm(t,a),$c(a,null,null,n),Lc()),h=t.memoizedState,x=a.memoizedState,h.parent!==o?(h={parent:o,cache:o},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),Wn(a,We,o)):(o=x.cache,Wn(a,We,o),o!==h.cache&&b(a,[We],n,!0))),dr(t,a,a.pendingProps.children,n),a.child;case 29:throw a.pendingProps}throw Error(l(156,a.tag))}function Vi(t){t.flags|=4}function Op(t,a,n,o,h){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(rg())t.flags|=8192;else throw $i=dt,Za}else t.flags&=-16777217}function O0(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Qg(a))if(rg())t.flags|=8192;else throw $i=dt,Za}function ku(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?er():536870912,t.lanes|=a,$o|=a)}function qc(t,a){if(!Es)switch(t.tailMode){case"hidden":a=t.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function va(t){var a=t.alternate!==null&&t.alternate.child===t.child,n=0,o=0;if(a)for(var h=t.child;h!==null;)n|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)n|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=n,a}function o1(t,a,n){var o=a.pendingProps;switch(Mc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return va(a),null;case 1:return va(a),null;case 3:return n=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),wn(We),we(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ul(a)?Vi(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,To())),va(a),null;case 26:var h=a.type,x=a.memoizedState;return t===null?(Vi(a),x!==null?(va(a),O0(a,x)):(va(a),Op(a,h,null,o,n))):x?x!==t.memoizedState?(Vi(a),va(a),O0(a,x)):(va(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&Vi(a),va(a),Op(a,h,t,o,n)),null;case 27:if(Ge(a),n=O.current,h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Vi(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return va(a),null}t=je.current,ul(a)?Xl(a):(t=Fg(h,o,n),a.stateNode=t,Vi(a))}return va(a),null;case 5:if(Ge(a),h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Vi(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return va(a),null}if(x=je.current,ul(a))Xl(a);else{var A=qu(O.current);switch(x){case 1:x=A.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:x=A.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":x=A.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":x=A.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":x=A.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof o.is=="string"?A.createElement("select",{is:o.is}):A.createElement("select"),o.multiple?x.multiple=!0:o.size&&(x.size=o.size);break;default:x=typeof o.is=="string"?A.createElement(h,{is:o.is}):A.createElement(h)}}x[pt]=a,x[St]=o;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)x.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=x;e:switch(ur(x,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Vi(a)}}return va(a),Op(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,n),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Vi(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(l(166));if(t=O.current,ul(a)){if(t=a.stateNode,n=a.memoizedProps,o=null,h=Ya,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[pt]=a,t=!!(t.nodeValue===n||o!==null&&o.suppressHydrationWarning===!0||Tg(t.nodeValue,n)),t||Yn(a,!0)}else t=qu(t).createTextNode(o),t[pt]=a,a.stateNode=t}return va(a),null;case 31:if(n=a.memoizedState,t===null||t.memoizedState!==null){if(o=ul(a),n!==null){if(t===null){if(!o)throw Error(l(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[pt]=a}else Li(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;va(a),t=!1}else n=To(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return a.flags&256?(on(a),a):(on(a),null);if((a.flags&128)!==0)throw Error(l(558))}return va(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ul(a),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(l(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));h[pt]=a}else Li(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;va(a),h=!1}else h=To(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(on(a),a):(on(a),null)}return on(a),(a.flags&128)!==0?(a.lanes=n,a):(n=o!==null,t=t!==null&&t.memoizedState!==null,n&&(o=a.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),x=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(x=o.memoizedState.cachePool.pool),x!==h&&(o.flags|=2048)),n!==t&&n&&(a.child.flags|=8192),ku(a,a.updateQueue),va(a),null);case 4:return we(),t===null&&ef(a.stateNode.containerInfo),va(a),null;case 10:return wn(a.type),va(a),null;case 19:if(H(La),o=a.memoizedState,o===null)return va(a),null;if(h=(a.flags&128)!==0,x=o.rendering,x===null)if(h)qc(o,!1);else{if(Da!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(x=xu(t),x!==null){for(a.flags|=128,qc(o,!1),t=x.updateQueue,a.updateQueue=t,ku(a,t),a.subtreeFlags=0,t=n,n=a.child;n!==null;)cu(n,t),n=n.sibling;return re(La,La.current&1|2),Es&&Qn(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&Vt()>Mu&&(a.flags|=128,h=!0,qc(o,!1),a.lanes=4194304)}else{if(!h)if(t=xu(x),t!==null){if(a.flags|=128,h=!0,t=t.updateQueue,a.updateQueue=t,ku(a,t),qc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!x.alternate&&!Es)return va(a),null}else 2*Vt()-o.renderingStartTime>Mu&&n!==536870912&&(a.flags|=128,h=!0,qc(o,!1),a.lanes=4194304);o.isBackwards?(x.sibling=a.child,a.child=x):(t=o.last,t!==null?t.sibling=x:a.child=x,o.last=x)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Vt(),t.sibling=null,n=La.current,re(La,h?n&1|2:n&1),Es&&Qn(a,o.treeForkCount),t):(va(a),null);case 22:case 23:return on(a),tp(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(n&536870912)!==0&&(a.flags&128)===0&&(va(a),a.subtreeFlags&6&&(a.flags|=8192)):va(a),n=a.updateQueue,n!==null&&ku(a,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==n&&(a.flags|=2048),t!==null&&H(vt),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),wn(We),va(a),null;case 25:return null;case 30:return null}throw Error(l(156,a.tag))}function c1(t,a){switch(Mc(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return wn(We),we(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Ge(a),null;case 31:if(a.memoizedState!==null){if(on(a),a.alternate===null)throw Error(l(340));Li()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(on(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(l(340));Li()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return H(La),null;case 4:return we(),null;case 10:return wn(a.type),null;case 22:case 23:return on(a),tp(),t!==null&&H(vt),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return wn(We),null;case 25:return null;default:return null}}function R0(t,a){switch(Mc(a),a.tag){case 3:wn(We),we();break;case 26:case 27:case 5:Ge(a);break;case 4:we();break;case 31:a.memoizedState!==null&&on(a);break;case 13:on(a);break;case 19:H(La);break;case 10:wn(a.type);break;case 22:case 23:on(a),tp(),t!==null&&H(vt);break;case 24:wn(We)}}function Hc(t,a){try{var n=a.updateQueue,o=n!==null?n.lastEffect:null;if(o!==null){var h=o.next;n=h;do{if((n.tag&t)===t){o=void 0;var x=n.create,A=n.inst;o=x(),A.destroy=o}n=n.next}while(n!==h)}}catch($){ca(a,a.return,$)}}function bl(t,a,n){try{var o=a.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var x=h.next;o=x;do{if((o.tag&t)===t){var A=o.inst,$=A.destroy;if($!==void 0){A.destroy=void 0,h=a;var ae=n,Ee=$;try{Ee()}catch(Ye){ca(h,ae,Ye)}}}o=o.next}while(o!==x)}}catch(Ye){ca(a,a.return,Ye)}}function M0(t){var a=t.updateQueue;if(a!==null){var n=t.stateNode;try{Sx(a,n)}catch(o){ca(t,t.return,o)}}}function _0(t,a,n){n.props=ao(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(o){ca(t,a,o)}}function Gc(t,a){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof n=="function"?t.refCleanup=n(o):n.current=o}}catch(h){ca(t,a,h)}}function yi(t,a){var n=t.ref,o=t.refCleanup;if(n!==null)if(typeof o=="function")try{o()}catch(h){ca(t,a,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(h){ca(t,a,h)}else n.current=null}function z0(t){var a=t.type,n=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":n.autoFocus&&o.focus();break e;case"img":n.src?o.src=n.src:n.srcSet&&(o.srcset=n.srcSet)}}catch(h){ca(t,t.return,h)}}function Rp(t,a,n){try{var o=t.stateNode;P1(o,t.type,n,a),o[St]=a}catch(h){ca(t,t.return,h)}}function L0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Cl(t.type)||t.tag===4}function Mp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Cl(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _p(t,a,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,a):(a=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.appendChild(t),n=n._reactRootContainer,n!=null||a.onclick!==null||(a.onclick=Le));else if(o!==4&&(o===27&&Cl(t.type)&&(n=t.stateNode,a=null),t=t.child,t!==null))for(_p(t,a,n),t=t.sibling;t!==null;)_p(t,a,n),t=t.sibling}function Du(t,a,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?n.insertBefore(t,a):n.appendChild(t);else if(o!==4&&(o===27&&Cl(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Du(t,a,n),t=t.sibling;t!==null;)Du(t,a,n),t=t.sibling}function $0(t){var a=t.stateNode,n=t.memoizedProps;try{for(var o=t.type,h=a.attributes;h.length;)a.removeAttributeNode(h[0]);ur(a,o,n),a[pt]=t,a[St]=n}catch(x){ca(t,t.return,x)}}var Bi=!1,Va=!1,zp=!1,F0=typeof WeakSet=="function"?WeakSet:Set,rr=null;function d1(t,a){if(t=t.containerInfo,af=Ju,t=jn(t),jo(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var h=o.anchorOffset,x=o.focusNode;o=o.focusOffset;try{n.nodeType,x.nodeType}catch{n=null;break e}var A=0,$=-1,ae=-1,Ee=0,Ye=0,Xe=t,Me=null;t:for(;;){for(var Ue;Xe!==n||h!==0&&Xe.nodeType!==3||($=A+h),Xe!==x||o!==0&&Xe.nodeType!==3||(ae=A+o),Xe.nodeType===3&&(A+=Xe.nodeValue.length),(Ue=Xe.firstChild)!==null;)Me=Xe,Xe=Ue;for(;;){if(Xe===t)break t;if(Me===n&&++Ee===h&&($=A),Me===x&&++Ye===o&&(ae=A),(Ue=Xe.nextSibling)!==null)break;Xe=Me,Me=Xe.parentNode}Xe=Ue}n=$===-1||ae===-1?null:{start:$,end:ae}}else n=null}n=n||{start:0,end:0}}else n=null;for(rf={focusedElem:t,selectionRange:n},Ju=!1,rr=a;rr!==null;)if(a=rr,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,rr=t;else for(;rr!==null;){switch(a=rr,x=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)h=t[n],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&x!==null){t=void 0,n=a,h=x.memoizedProps,x=x.memoizedState,o=n.stateNode;try{var Lt=ao(n.type,h);t=o.getSnapshotBeforeUpdate(Lt,x),o.__reactInternalSnapshotBeforeUpdate=t}catch(ss){ca(n,n.return,ss)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,n=t.nodeType,n===9)of(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":of(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=a.sibling,t!==null){t.return=a.return,rr=t;break}rr=a.return}}function U0(t,a,n){var o=n.flags;switch(n.tag){case 0:case 11:case 15:Hi(t,n),o&4&&Hc(5,n);break;case 1:if(Hi(t,n),o&4)if(t=n.stateNode,a===null)try{t.componentDidMount()}catch(A){ca(n,n.return,A)}else{var h=ao(n.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(h,a,t.__reactInternalSnapshotBeforeUpdate)}catch(A){ca(n,n.return,A)}}o&64&&M0(n),o&512&&Gc(n,n.return);break;case 3:if(Hi(t,n),o&64&&(t=n.updateQueue,t!==null)){if(a=null,n.child!==null)switch(n.child.tag){case 27:case 5:a=n.child.stateNode;break;case 1:a=n.child.stateNode}try{Sx(t,a)}catch(A){ca(n,n.return,A)}}break;case 27:a===null&&o&4&&$0(n);case 26:case 5:Hi(t,n),a===null&&o&4&&z0(n),o&512&&Gc(n,n.return);break;case 12:Hi(t,n);break;case 31:Hi(t,n),o&4&&B0(t,n);break;case 13:Hi(t,n),o&4&&q0(t,n),o&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=y1.bind(null,n),F1(t,n))));break;case 22:if(o=n.memoizedState!==null||Bi,!o){a=a!==null&&a.memoizedState!==null||Va,h=Bi;var x=Va;Bi=o,(Va=a)&&!x?Gi(t,n,(n.subtreeFlags&8772)!==0):Hi(t,n),Bi=h,Va=x}break;case 30:break;default:Hi(t,n)}}function I0(t){var a=t.alternate;a!==null&&(t.alternate=null,I0(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&ra(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ca=null,Hr=!1;function qi(t,a,n){for(n=n.child;n!==null;)V0(t,a,n),n=n.sibling}function V0(t,a,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(ht,n)}catch{}switch(n.tag){case 26:Va||yi(n,a),qi(t,a,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Va||yi(n,a);var o=Ca,h=Hr;Cl(n.type)&&(Ca=n.stateNode,Hr=!1),qi(t,a,n),td(n.stateNode),Ca=o,Hr=h;break;case 5:Va||yi(n,a);case 6:if(o=Ca,h=Hr,Ca=null,qi(t,a,n),Ca=o,Hr=h,Ca!==null)if(Hr)try{(Ca.nodeType===9?Ca.body:Ca.nodeName==="HTML"?Ca.ownerDocument.body:Ca).removeChild(n.stateNode)}catch(x){ca(n,a,x)}else try{Ca.removeChild(n.stateNode)}catch(x){ca(n,a,x)}break;case 18:Ca!==null&&(Hr?(t=Ca,Mg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Go(t)):Mg(Ca,n.stateNode));break;case 4:o=Ca,h=Hr,Ca=n.stateNode.containerInfo,Hr=!0,qi(t,a,n),Ca=o,Hr=h;break;case 0:case 11:case 14:case 15:bl(2,n,a),Va||bl(4,n,a),qi(t,a,n);break;case 1:Va||(yi(n,a),o=n.stateNode,typeof o.componentWillUnmount=="function"&&_0(n,a,o)),qi(t,a,n);break;case 21:qi(t,a,n);break;case 22:Va=(o=Va)||n.memoizedState!==null,qi(t,a,n),Va=o;break;default:qi(t,a,n)}}function B0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Go(t)}catch(n){ca(a,a.return,n)}}}function q0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Go(t)}catch(n){ca(a,a.return,n)}}function u1(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new F0),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new F0),a;default:throw Error(l(435,t.tag))}}function Pu(t,a){var n=u1(t);a.forEach(function(o){if(!n.has(o)){n.add(o);var h=j1.bind(null,t,o);o.then(h,h)}})}function Gr(t,a){var n=a.deletions;if(n!==null)for(var o=0;o<n.length;o++){var h=n[o],x=t,A=a,$=A;e:for(;$!==null;){switch($.tag){case 27:if(Cl($.type)){Ca=$.stateNode,Hr=!1;break e}break;case 5:Ca=$.stateNode,Hr=!1;break e;case 3:case 4:Ca=$.stateNode.containerInfo,Hr=!0;break e}$=$.return}if(Ca===null)throw Error(l(160));V0(x,A,h),Ca=null,Hr=!1,x=h.alternate,x!==null&&(x.return=null),h.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)H0(a,t),a=a.sibling}var Zn=null;function H0(t,a){var n=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Gr(a,t),Qr(t),o&4&&(bl(3,t,t.return),Hc(3,t),bl(5,t,t.return));break;case 1:Gr(a,t),Qr(t),o&512&&(Va||n===null||yi(n,n.return)),o&64&&Bi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?o:n.concat(o))));break;case 26:var h=Zn;if(Gr(a,t),Qr(t),o&512&&(Va||n===null||yi(n,n.return)),o&4){var x=n!==null?n.memoizedState:null;if(o=t.memoizedState,n===null)if(o===null)if(t.stateNode===null){e:{o=t.type,n=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":x=h.getElementsByTagName("title")[0],(!x||x[Ss]||x[pt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=h.createElement(o),h.head.insertBefore(x,h.querySelector("head > title"))),ur(x,o,n),x[pt]=t,na(x),o=x;break e;case"link":var A=Hg("link","href",h).get(o+(n.href||""));if(A){for(var $=0;$<A.length;$++)if(x=A[$],x.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&x.getAttribute("rel")===(n.rel==null?null:n.rel)&&x.getAttribute("title")===(n.title==null?null:n.title)&&x.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){A.splice($,1);break t}}x=h.createElement(o),ur(x,o,n),h.head.appendChild(x);break;case"meta":if(A=Hg("meta","content",h).get(o+(n.content||""))){for($=0;$<A.length;$++)if(x=A[$],x.getAttribute("content")===(n.content==null?null:""+n.content)&&x.getAttribute("name")===(n.name==null?null:n.name)&&x.getAttribute("property")===(n.property==null?null:n.property)&&x.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&x.getAttribute("charset")===(n.charSet==null?null:n.charSet)){A.splice($,1);break t}}x=h.createElement(o),ur(x,o,n),h.head.appendChild(x);break;default:throw Error(l(468,o))}x[pt]=t,na(x),o=x}t.stateNode=o}else Gg(h,t.type,t.stateNode);else t.stateNode=qg(h,o,t.memoizedProps);else x!==o?(x===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):x.count--,o===null?Gg(h,t.type,t.stateNode):qg(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Rp(t,t.memoizedProps,n.memoizedProps)}break;case 27:Gr(a,t),Qr(t),o&512&&(Va||n===null||yi(n,n.return)),n!==null&&o&4&&Rp(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Gr(a,t),Qr(t),o&512&&(Va||n===null||yi(n,n.return)),t.flags&32){h=t.stateNode;try{$e(h,"")}catch(Lt){ca(t,t.return,Lt)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Rp(t,h,n!==null?n.memoizedProps:h)),o&1024&&(zp=!0);break;case 6:if(Gr(a,t),Qr(t),o&4){if(t.stateNode===null)throw Error(l(162));o=t.memoizedProps,n=t.stateNode;try{n.nodeValue=o}catch(Lt){ca(t,t.return,Lt)}}break;case 3:if(Qu=null,h=Zn,Zn=Hu(a.containerInfo),Gr(a,t),Zn=h,Qr(t),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Go(a.containerInfo)}catch(Lt){ca(t,t.return,Lt)}zp&&(zp=!1,G0(t));break;case 4:o=Zn,Zn=Hu(t.stateNode.containerInfo),Gr(a,t),Qr(t),Zn=o;break;case 12:Gr(a,t),Qr(t);break;case 31:Gr(a,t),Qr(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Pu(t,o)));break;case 13:Gr(a,t),Qr(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ru=Vt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Pu(t,o)));break;case 22:h=t.memoizedState!==null;var ae=n!==null&&n.memoizedState!==null,Ee=Bi,Ye=Va;if(Bi=Ee||h,Va=Ye||ae,Gr(a,t),Va=Ye,Bi=Ee,Qr(t),o&8192)e:for(a=t.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(n===null||ae||Bi||Va||ro(t)),n=null,a=t;;){if(a.tag===5||a.tag===26){if(n===null){ae=n=a;try{if(x=ae.stateNode,h)A=x.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{$=ae.stateNode;var Xe=ae.memoizedProps.style,Me=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;$.style.display=Me==null||typeof Me=="boolean"?"":(""+Me).trim()}}catch(Lt){ca(ae,ae.return,Lt)}}}else if(a.tag===6){if(n===null){ae=a;try{ae.stateNode.nodeValue=h?"":ae.memoizedProps}catch(Lt){ca(ae,ae.return,Lt)}}}else if(a.tag===18){if(n===null){ae=a;try{var Ue=ae.stateNode;h?_g(Ue,!0):_g(ae.stateNode,!1)}catch(Lt){ca(ae,ae.return,Lt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;n===a&&(n=null),a=a.return}n===a&&(n=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(n=o.retryQueue,n!==null&&(o.retryQueue=null,Pu(t,n))));break;case 19:Gr(a,t),Qr(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Pu(t,o)));break;case 30:break;case 21:break;default:Gr(a,t),Qr(t)}}function Qr(t){var a=t.flags;if(a&2){try{for(var n,o=t.return;o!==null;){if(L0(o)){n=o;break}o=o.return}if(n==null)throw Error(l(160));switch(n.tag){case 27:var h=n.stateNode,x=Mp(t);Du(t,x,h);break;case 5:var A=n.stateNode;n.flags&32&&($e(A,""),n.flags&=-33);var $=Mp(t);Du(t,$,A);break;case 3:case 4:var ae=n.stateNode.containerInfo,Ee=Mp(t);_p(t,Ee,ae);break;default:throw Error(l(161))}}catch(Ye){ca(t,t.return,Ye)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function G0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;G0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Hi(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)U0(t,a.alternate,a),a=a.sibling}function ro(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:bl(4,a,a.return),ro(a);break;case 1:yi(a,a.return);var n=a.stateNode;typeof n.componentWillUnmount=="function"&&_0(a,a.return,n),ro(a);break;case 27:td(a.stateNode);case 26:case 5:yi(a,a.return),ro(a);break;case 22:a.memoizedState===null&&ro(a);break;case 30:ro(a);break;default:ro(a)}t=t.sibling}}function Gi(t,a,n){for(n=n&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,h=t,x=a,A=x.flags;switch(x.tag){case 0:case 11:case 15:Gi(h,x,n),Hc(4,x);break;case 1:if(Gi(h,x,n),o=x,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(Ee){ca(o,o.return,Ee)}if(o=x,h=o.updateQueue,h!==null){var $=o.stateNode;try{var ae=h.shared.hiddenCallbacks;if(ae!==null)for(h.shared.hiddenCallbacks=null,h=0;h<ae.length;h++)wx(ae[h],$)}catch(Ee){ca(o,o.return,Ee)}}n&&A&64&&M0(x),Gc(x,x.return);break;case 27:$0(x);case 26:case 5:Gi(h,x,n),n&&o===null&&A&4&&z0(x),Gc(x,x.return);break;case 12:Gi(h,x,n);break;case 31:Gi(h,x,n),n&&A&4&&B0(h,x);break;case 13:Gi(h,x,n),n&&A&4&&q0(h,x);break;case 22:x.memoizedState===null&&Gi(h,x,n),Gc(x,x.return);break;case 30:break;default:Gi(h,x,n)}a=a.sibling}}function Lp(t,a){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Ht(n))}function $p(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ht(t))}function Jn(t,a,n,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Q0(t,a,n,o),a=a.sibling}function Q0(t,a,n,o){var h=a.flags;switch(a.tag){case 0:case 11:case 15:Jn(t,a,n,o),h&2048&&Hc(9,a);break;case 1:Jn(t,a,n,o);break;case 3:Jn(t,a,n,o),h&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ht(t)));break;case 12:if(h&2048){Jn(t,a,n,o),t=a.stateNode;try{var x=a.memoizedProps,A=x.id,$=x.onPostCommit;typeof $=="function"&&$(A,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(ae){ca(a,a.return,ae)}}else Jn(t,a,n,o);break;case 31:Jn(t,a,n,o);break;case 13:Jn(t,a,n,o);break;case 23:break;case 22:x=a.stateNode,A=a.alternate,a.memoizedState!==null?x._visibility&2?Jn(t,a,n,o):Qc(t,a):x._visibility&2?Jn(t,a,n,o):(x._visibility|=2,_o(t,a,n,o,(a.subtreeFlags&10256)!==0||!1)),h&2048&&Lp(A,a);break;case 24:Jn(t,a,n,o),h&2048&&$p(a.alternate,a);break;default:Jn(t,a,n,o)}}function _o(t,a,n,o,h){for(h=h&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=t,A=a,$=n,ae=o,Ee=A.flags;switch(A.tag){case 0:case 11:case 15:_o(x,A,$,ae,h),Hc(8,A);break;case 23:break;case 22:var Ye=A.stateNode;A.memoizedState!==null?Ye._visibility&2?_o(x,A,$,ae,h):Qc(x,A):(Ye._visibility|=2,_o(x,A,$,ae,h)),h&&Ee&2048&&Lp(A.alternate,A);break;case 24:_o(x,A,$,ae,h),h&&Ee&2048&&$p(A.alternate,A);break;default:_o(x,A,$,ae,h)}a=a.sibling}}function Qc(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var n=t,o=a,h=o.flags;switch(o.tag){case 22:Qc(n,o),h&2048&&Lp(o.alternate,o);break;case 24:Qc(n,o),h&2048&&$p(o.alternate,o);break;default:Qc(n,o)}a=a.sibling}}var Yc=8192;function zo(t,a,n){if(t.subtreeFlags&Yc)for(t=t.child;t!==null;)Y0(t,a,n),t=t.sibling}function Y0(t,a,n){switch(t.tag){case 26:zo(t,a,n),t.flags&Yc&&t.memoizedState!==null&&J1(n,Zn,t.memoizedState,t.memoizedProps);break;case 5:zo(t,a,n);break;case 3:case 4:var o=Zn;Zn=Hu(t.stateNode.containerInfo),zo(t,a,n),Zn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Yc,Yc=16777216,zo(t,a,n),Yc=o):zo(t,a,n));break;default:zo(t,a,n)}}function W0(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Wc(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var n=0;n<a.length;n++){var o=a[n];rr=o,J0(o,t)}W0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Z0(t),t=t.sibling}function Z0(t){switch(t.tag){case 0:case 11:case 15:Wc(t),t.flags&2048&&bl(9,t,t.return);break;case 3:Wc(t);break;case 12:Wc(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Ou(t)):Wc(t);break;default:Wc(t)}}function Ou(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var n=0;n<a.length;n++){var o=a[n];rr=o,J0(o,t)}W0(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:bl(8,a,a.return),Ou(a);break;case 22:n=a.stateNode,n._visibility&2&&(n._visibility&=-3,Ou(a));break;default:Ou(a)}t=t.sibling}}function J0(t,a){for(;rr!==null;){var n=rr;switch(n.tag){case 0:case 11:case 15:bl(8,n,a);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var o=n.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ht(n.memoizedState.cache)}if(o=n.child,o!==null)o.return=n,rr=o;else e:for(n=t;rr!==null;){o=rr;var h=o.sibling,x=o.return;if(I0(o),o===n){rr=null;break e}if(h!==null){h.return=x,rr=h;break e}rr=x}}}var m1={getCacheForType:function(t){var a=U(We),n=a.data.get(t);return n===void 0&&(n=t(),a.data.set(t,n)),n},cacheSignal:function(){return U(We).controller.signal}},p1=typeof WeakMap=="function"?WeakMap:Map,ea=0,ga=null,Rs=null,Ls=0,oa=0,cn=null,yl=!1,Lo=!1,Fp=!1,Qi=0,Da=0,jl=0,no=0,Up=0,dn=0,$o=0,Zc=null,Yr=null,Ip=!1,Ru=0,K0=0,Mu=1/0,_u=null,vl=null,Ja=0,Nl=null,Fo=null,Yi=0,Vp=0,Bp=null,X0=null,Jc=0,qp=null;function un(){return(ea&2)!==0&&Ls!==0?Ls&-Ls:_.T!==null?Zp():nt()}function eg(){if(dn===0)if((Ls&536870912)===0||Es){var t=ws;ws<<=1,(ws&3932160)===0&&(ws=262144),dn=t}else dn=536870912;return t=ln.current,t!==null&&(t.flags|=32),dn}function Wr(t,a,n){(t===ga&&(oa===2||oa===9)||t.cancelPendingCommit!==null)&&(Uo(t,0),wl(t,Ls,dn,!1)),Xr(t,n),((ea&2)===0||t!==ga)&&(t===ga&&((ea&2)===0&&(no|=n),Da===4&&wl(t,Ls,dn,!1)),ji(t))}function tg(t,a,n){if((ea&6)!==0)throw Error(l(327));var o=!n&&(a&127)===0&&(a&t.expiredLanes)===0||da(t,a),h=o?x1(t,a):Gp(t,a,!0),x=o;do{if(h===0){Lo&&!o&&wl(t,a,0,!1);break}else{if(n=t.current.alternate,x&&!f1(n)){h=Gp(t,a,!1),x=!1;continue}if(h===2){if(x=a,t.errorRecoveryDisabledLanes&x)var A=0;else A=t.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var $=t;h=Zc;var ae=$.current.memoizedState.isDehydrated;if(ae&&(Uo($,A).flags|=256),A=Gp($,A,!1),A!==2){if(Fp&&!ae){$.errorRecoveryDisabledLanes|=x,no|=x,h=4;break e}x=Yr,Yr=h,x!==null&&(Yr===null?Yr=x:Yr.push.apply(Yr,x))}h=A}if(x=!1,h!==2)continue}}if(h===1){Uo(t,0),wl(t,a,0,!0);break}e:{switch(o=t,x=h,x){case 0:case 1:throw Error(l(345));case 4:if((a&4194048)!==a)break;case 6:wl(o,a,dn,!yl);break e;case 2:Yr=null;break;case 3:case 5:break;default:throw Error(l(329))}if((a&62914560)===a&&(h=Ru+300-Vt(),10<h)){if(wl(o,a,dn,!yl),qs(o,0,!0)!==0)break e;Yi=a,o.timeoutHandle=Og(sg.bind(null,o,n,Yr,_u,Ip,a,dn,no,$o,yl,x,"Throttled",-0,0),h);break e}sg(o,n,Yr,_u,Ip,a,dn,no,$o,yl,x,null,-0,0)}}break}while(!0);ji(t)}function sg(t,a,n,o,h,x,A,$,ae,Ee,Ye,Xe,Me,Ue){if(t.timeoutHandle=-1,Xe=a.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Le},Y0(a,x,Xe);var Lt=(x&62914560)===x?Ru-Vt():(x&4194048)===x?K0-Vt():0;if(Lt=K1(Xe,Lt),Lt!==null){Yi=x,t.cancelPendingCommit=Lt(dg.bind(null,t,a,x,n,o,h,A,$,ae,Ye,Xe,null,Me,Ue)),wl(t,x,A,!Ee);return}}dg(t,a,x,n,o,h,A,$,ae)}function f1(t){for(var a=t;;){var n=a.tag;if((n===0||n===11||n===15)&&a.flags&16384&&(n=a.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var o=0;o<n.length;o++){var h=n[o],x=h.getSnapshot;h=h.value;try{if(!ja(x(),h))return!1}catch{return!1}}if(n=a.child,a.subtreeFlags&16384&&n!==null)n.return=a,a=n;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function wl(t,a,n,o){a&=~Up,a&=~no,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var h=a;0<h;){var x=31-rs(h),A=1<<x;o[x]=-1,h&=~A}n!==0&&$n(t,n,a)}function zu(){return(ea&6)===0?(Kc(0),!1):!0}function Hp(){if(Rs!==null){if(oa===0)var t=Rs.return;else t=Rs,Nn=bi=null,lp(t),pl=null,eo=0,t=Rs;for(;t!==null;)R0(t.alternate,t),t=t.return;Rs=null}}function Uo(t,a){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,M1(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Yi=0,Hp(),ga=t,Rs=n=$r(t.current,null),Ls=a,oa=0,cn=null,yl=!1,Lo=da(t,a),Fp=!1,$o=dn=Up=no=jl=Da=0,Yr=Zc=null,Ip=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var h=31-rs(o),x=1<<h;a|=t[h],o&=~x}return Qi=a,So(),n}function ag(t,a){bs=null,_.H=Vc,a===hr||a===Sn?(a=pu(),oa=3):a===Za?(a=pu(),oa=4):oa=a===wp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,cn=a,Rs===null&&(Da=1,Cu(t,Fr(a,t.current)))}function rg(){var t=ln.current;return t===null?!0:(Ls&4194048)===Ls?En===null:(Ls&62914560)===Ls||(Ls&536870912)!==0?t===En:!1}function ng(){var t=_.H;return _.H=Vc,t===null?Vc:t}function ig(){var t=_.A;return _.A=m1,t}function Lu(){Da=4,yl||(Ls&4194048)!==Ls&&ln.current!==null||(Lo=!0),(jl&134217727)===0&&(no&134217727)===0||ga===null||wl(ga,Ls,dn,!1)}function Gp(t,a,n){var o=ea;ea|=2;var h=ng(),x=ig();(ga!==t||Ls!==a)&&(_u=null,Uo(t,a)),a=!1;var A=Da;e:do try{if(oa!==0&&Rs!==null){var $=Rs,ae=cn;switch(oa){case 8:Hp(),A=6;break e;case 3:case 2:case 9:case 6:ln.current===null&&(a=!0);var Ee=oa;if(oa=0,cn=null,Io(t,$,ae,Ee),n&&Lo){A=0;break e}break;default:Ee=oa,oa=0,cn=null,Io(t,$,ae,Ee)}}h1(),A=Da;break}catch(Ye){ag(t,Ye)}while(!0);return a&&t.shellSuspendCounter++,Nn=bi=null,ea=o,_.H=h,_.A=x,Rs===null&&(ga=null,Ls=0,So()),A}function h1(){for(;Rs!==null;)lg(Rs)}function x1(t,a){var n=ea;ea|=2;var o=ng(),h=ig();ga!==t||Ls!==a?(_u=null,Mu=Vt()+500,Uo(t,a)):Lo=da(t,a);e:do try{if(oa!==0&&Rs!==null){a=Rs;var x=cn;t:switch(oa){case 1:oa=0,cn=null,Io(t,a,x,1);break;case 2:case 9:if(mu(x)){oa=0,cn=null,og(a);break}a=function(){oa!==2&&oa!==9||ga!==t||(oa=7),ji(t)},x.then(a,a);break e;case 3:oa=7;break e;case 4:oa=5;break e;case 7:mu(x)?(oa=0,cn=null,og(a)):(oa=0,cn=null,Io(t,a,x,7));break;case 5:var A=null;switch(Rs.tag){case 26:A=Rs.memoizedState;case 5:case 27:var $=Rs;if(A?Qg(A):$.stateNode.complete){oa=0,cn=null;var ae=$.sibling;if(ae!==null)Rs=ae;else{var Ee=$.return;Ee!==null?(Rs=Ee,$u(Ee)):Rs=null}break t}}oa=0,cn=null,Io(t,a,x,5);break;case 6:oa=0,cn=null,Io(t,a,x,6);break;case 8:Hp(),Da=6;break e;default:throw Error(l(462))}}g1();break}catch(Ye){ag(t,Ye)}while(!0);return Nn=bi=null,_.H=o,_.A=h,ea=n,Rs!==null?0:(ga=null,Ls=0,So(),Da)}function g1(){for(;Rs!==null&&!us();)lg(Rs)}function lg(t){var a=P0(t.alternate,t,Qi);t.memoizedProps=t.pendingProps,a===null?$u(t):Rs=a}function og(t){var a=t,n=a.alternate;switch(a.tag){case 15:case 0:a=C0(n,a,a.pendingProps,a.type,void 0,Ls);break;case 11:a=C0(n,a,a.pendingProps,a.type.render,a.ref,Ls);break;case 5:lp(a);default:R0(n,a),a=Rs=cu(a,Qi),a=P0(n,a,Qi)}t.memoizedProps=t.pendingProps,a===null?$u(t):Rs=a}function Io(t,a,n,o){Nn=bi=null,lp(a),pl=null,eo=0;var h=a.return;try{if(n1(t,h,a,n,Ls)){Da=1,Cu(t,Fr(n,t.current)),Rs=null;return}}catch(x){if(h!==null)throw Rs=h,x;Da=1,Cu(t,Fr(n,t.current)),Rs=null;return}a.flags&32768?(Es||o===1?t=!0:Lo||(Ls&536870912)!==0?t=!1:(yl=t=!0,(o===2||o===9||o===3||o===6)&&(o=ln.current,o!==null&&o.tag===13&&(o.flags|=16384))),cg(a,t)):$u(a)}function $u(t){var a=t;do{if((a.flags&32768)!==0){cg(a,yl);return}t=a.return;var n=o1(a.alternate,a,Qi);if(n!==null){Rs=n;return}if(a=a.sibling,a!==null){Rs=a;return}Rs=a=t}while(a!==null);Da===0&&(Da=5)}function cg(t,a){do{var n=c1(t.alternate,t);if(n!==null){n.flags&=32767,Rs=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!a&&(t=t.sibling,t!==null)){Rs=t;return}Rs=t=n}while(t!==null);Da=6,Rs=null}function dg(t,a,n,o,h,x,A,$,ae){t.cancelPendingCommit=null;do Fu();while(Ja!==0);if((ea&6)!==0)throw Error(l(327));if(a!==null){if(a===t.current)throw Error(l(177));if(x=a.lanes|a.childLanes,x|=zr,Ei(t,n,x,A,$,ae),t===ga&&(Rs=ga=null,Ls=0),Fo=a,Nl=t,Yi=n,Vp=x,Bp=h,X0=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,v1(fe,function(){return hg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=_.T,_.T=null,h=X.p,X.p=2,A=ea,ea|=4;try{d1(t,a,n)}finally{ea=A,X.p=h,_.T=o}}Ja=1,ug(),mg(),pg()}}function ug(){if(Ja===1){Ja=0;var t=Nl,a=Fo,n=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||n){n=_.T,_.T=null;var o=X.p;X.p=2;var h=ea;ea|=4;try{H0(a,t);var x=rf,A=jn(t.containerInfo),$=x.focusedElem,ae=x.selectionRange;if(A!==$&&$&&$.ownerDocument&&nu($.ownerDocument.documentElement,$)){if(ae!==null&&jo($)){var Ee=ae.start,Ye=ae.end;if(Ye===void 0&&(Ye=Ee),"selectionStart"in $)$.selectionStart=Ee,$.selectionEnd=Math.min(Ye,$.value.length);else{var Xe=$.ownerDocument||document,Me=Xe&&Xe.defaultView||window;if(Me.getSelection){var Ue=Me.getSelection(),Lt=$.textContent.length,ss=Math.min(ae.start,Lt),fa=ae.end===void 0?ss:Math.min(ae.end,Lt);!Ue.extend&&ss>fa&&(A=fa,fa=ss,ss=A);var be=_r($,ss),me=_r($,fa);if(be&&me&&(Ue.rangeCount!==1||Ue.anchorNode!==be.node||Ue.anchorOffset!==be.offset||Ue.focusNode!==me.node||Ue.focusOffset!==me.offset)){var Se=Xe.createRange();Se.setStart(be.node,be.offset),Ue.removeAllRanges(),ss>fa?(Ue.addRange(Se),Ue.extend(me.node,me.offset)):(Se.setEnd(me.node,me.offset),Ue.addRange(Se))}}}}for(Xe=[],Ue=$;Ue=Ue.parentNode;)Ue.nodeType===1&&Xe.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<Xe.length;$++){var Je=Xe[$];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}Ju=!!af,rf=af=null}finally{ea=h,X.p=o,_.T=n}}t.current=a,Ja=2}}function mg(){if(Ja===2){Ja=0;var t=Nl,a=Fo,n=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||n){n=_.T,_.T=null;var o=X.p;X.p=2;var h=ea;ea|=4;try{U0(t,a.alternate,a)}finally{ea=h,X.p=o,_.T=n}}Ja=3}}function pg(){if(Ja===4||Ja===3){Ja=0,Ps();var t=Nl,a=Fo,n=Yi,o=X0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ja=5:(Ja=0,Fo=Nl=null,fg(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(vl=null),st(n),a=a.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(ht,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=_.T,h=X.p,X.p=2,_.T=null;try{for(var x=t.onRecoverableError,A=0;A<o.length;A++){var $=o[A];x($.value,{componentStack:$.stack})}}finally{_.T=a,X.p=h}}(Yi&3)!==0&&Fu(),ji(t),h=t.pendingLanes,(n&261930)!==0&&(h&42)!==0?t===qp?Jc++:(Jc=0,qp=t):Jc=0,Kc(0)}}function fg(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Ht(a)))}function Fu(){return ug(),mg(),pg(),hg()}function hg(){if(Ja!==5)return!1;var t=Nl,a=Vp;Vp=0;var n=st(Yi),o=_.T,h=X.p;try{X.p=32>n?32:n,_.T=null,n=Bp,Bp=null;var x=Nl,A=Yi;if(Ja=0,Fo=Nl=null,Yi=0,(ea&6)!==0)throw Error(l(331));var $=ea;if(ea|=4,Z0(x.current),Q0(x,x.current,A,n),ea=$,Kc(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(ht,x)}catch{}return!0}finally{X.p=h,_.T=o,fg(t,a)}}function xg(t,a,n){a=Fr(n,a),a=Np(t.stateNode,a,2),t=hl(t,a,2),t!==null&&(Xr(t,2),ji(t))}function ca(t,a,n){if(t.tag===3)xg(t,t,n);else for(;a!==null;){if(a.tag===3){xg(a,t,n);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(vl===null||!vl.has(o))){t=Fr(n,t),n=g0(2),o=hl(a,n,2),o!==null&&(b0(n,o,a,t),Xr(o,2),ji(o));break}}a=a.return}}function Qp(t,a,n){var o=t.pingCache;if(o===null){o=t.pingCache=new p1;var h=new Set;o.set(a,h)}else h=o.get(a),h===void 0&&(h=new Set,o.set(a,h));h.has(n)||(Fp=!0,h.add(n),t=b1.bind(null,t,a,n),a.then(t,t))}function b1(t,a,n){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ga===t&&(Ls&n)===n&&(Da===4||Da===3&&(Ls&62914560)===Ls&&300>Vt()-Ru?(ea&2)===0&&Uo(t,0):Up|=n,$o===Ls&&($o=0)),ji(t)}function gg(t,a){a===0&&(a=er()),t=hi(t,a),t!==null&&(Xr(t,a),ji(t))}function y1(t){var a=t.memoizedState,n=0;a!==null&&(n=a.retryLane),gg(t,n)}function j1(t,a){var n=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(n=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(a),gg(t,n)}function v1(t,a){return _t(t,a)}var Uu=null,Vo=null,Yp=!1,Iu=!1,Wp=!1,Sl=0;function ji(t){t!==Vo&&t.next===null&&(Vo===null?Uu=Vo=t:Vo=Vo.next=t),Iu=!0,Yp||(Yp=!0,w1())}function Kc(t,a){if(!Wp&&Iu){Wp=!0;do for(var n=!1,o=Uu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var x=0;else{var A=o.suspendedLanes,$=o.pingedLanes;x=(1<<31-rs(42|t)+1)-1,x&=h&~(A&~$),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(n=!0,vg(o,x))}else x=Ls,x=qs(o,o===ga?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(x&3)===0||da(o,x)||(n=!0,vg(o,x));o=o.next}while(n);Wp=!1}}function N1(){bg()}function bg(){Iu=Yp=!1;var t=0;Sl!==0&&R1()&&(t=Sl);for(var a=Vt(),n=null,o=Uu;o!==null;){var h=o.next,x=yg(o,a);x===0?(o.next=null,n===null?Uu=h:n.next=h,h===null&&(Vo=n)):(n=o,(t!==0||(x&3)!==0)&&(Iu=!0)),o=h}Ja!==0&&Ja!==5||Kc(t),Sl!==0&&(Sl=0)}function yg(t,a){for(var n=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,x=t.pendingLanes&-62914561;0<x;){var A=31-rs(x),$=1<<A,ae=h[A];ae===-1?(($&n)===0||($&o)!==0)&&(h[A]=Ra($,a)):ae<=a&&(t.expiredLanes|=$),x&=~$}if(a=ga,n=Ls,n=qs(t,t===a?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,n===0||t===a&&(oa===2||oa===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Dt(o),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||da(t,n)){if(a=n&-n,a===t.callbackPriority)return a;switch(o!==null&&Dt(o),st(n)){case 2:case 8:n=wa;break;case 32:n=fe;break;case 268435456:n=kt;break;default:n=fe}return o=jg.bind(null,t),n=_t(n,o),t.callbackPriority=a,t.callbackNode=n,a}return o!==null&&o!==null&&Dt(o),t.callbackPriority=2,t.callbackNode=null,2}function jg(t,a){if(Ja!==0&&Ja!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Fu()&&t.callbackNode!==n)return null;var o=Ls;return o=qs(t,t===ga?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(tg(t,o,a),yg(t,Vt()),t.callbackNode!=null&&t.callbackNode===n?jg.bind(null,t):null)}function vg(t,a){if(Fu())return null;tg(t,a,!0)}function w1(){_1(function(){(ea&6)!==0?_t(Ns,N1):bg()})}function Zp(){if(Sl===0){var t=wt;t===0&&(t=bt,bt<<=1,(bt&261888)===0&&(bt=256)),Sl=t}return Sl}function Ng(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:_e(""+t)}function wg(t,a){var n=a.ownerDocument.createElement("input");return n.name=a.name,n.value=a.value,t.id&&n.setAttribute("form",t.id),a.parentNode.insertBefore(n,a),t=new FormData(t),n.parentNode.removeChild(n),t}function S1(t,a,n,o,h){if(a==="submit"&&n&&n.stateNode===h){var x=Ng((h[St]||null).action),A=o.submitter;A&&(a=(a=A[St]||null)?Ng(a.formAction):A.getAttribute("formAction"),a!==null&&(x=a,A=null));var $=new Us("action","action",null,o,h);t.push({event:$,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Sl!==0){var ae=A?wg(h,A):new FormData(h);xp(n,{pending:!0,data:ae,method:h.method,action:x},null,ae)}}else typeof x=="function"&&($.preventDefault(),ae=A?wg(h,A):new FormData(h),xp(n,{pending:!0,data:ae,method:h.method,action:x},x,ae))},currentTarget:h}]})}}for(var Jp=0;Jp<Tc.length;Jp++){var Kp=Tc[Jp],C1=Kp.toLowerCase(),A1=Kp[0].toUpperCase()+Kp.slice(1);an(C1,"on"+A1)}an(ol,"onAnimationEnd"),an(No,"onAnimationIteration"),an(iu,"onAnimationStart"),an("dblclick","onDoubleClick"),an("focusin","onFocus"),an("focusout","onBlur"),an(Qm,"onTransitionRun"),an(wo,"onTransitionStart"),an(Ym,"onTransitionCancel"),an(lu,"onTransitionEnd"),tr("onMouseEnter",["mouseout","mouseover"]),tr("onMouseLeave",["mouseout","mouseover"]),tr("onPointerEnter",["pointerout","pointerover"]),tr("onPointerLeave",["pointerout","pointerover"]),Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xc));function Sg(t,a){a=(a&4)!==0;for(var n=0;n<t.length;n++){var o=t[n],h=o.event;o=o.listeners;e:{var x=void 0;if(a)for(var A=o.length-1;0<=A;A--){var $=o[A],ae=$.instance,Ee=$.currentTarget;if($=$.listener,ae!==x&&h.isPropagationStopped())break e;x=$,h.currentTarget=Ee;try{x(h)}catch(Ye){fi(Ye)}h.currentTarget=null,x=ae}else for(A=0;A<o.length;A++){if($=o[A],ae=$.instance,Ee=$.currentTarget,$=$.listener,ae!==x&&h.isPropagationStopped())break e;x=$,h.currentTarget=Ee;try{x(h)}catch(Ye){fi(Ye)}h.currentTarget=null,x=ae}}}}function Ms(t,a){var n=a[Ft];n===void 0&&(n=a[Ft]=new Set);var o=t+"__bubble";n.has(o)||(Cg(a,t,2,!1),n.add(o))}function Xp(t,a,n){var o=0;a&&(o|=4),Cg(n,t,o,a)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function ef(t){if(!t[Vu]){t[Vu]=!0,fr.forEach(function(n){n!=="selectionchange"&&(E1.has(n)||Xp(n,!1,t),Xp(n,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Vu]||(a[Vu]=!0,Xp("selectionchange",!1,a))}}function Cg(t,a,n,o){switch(eb(a)){case 2:var h=tw;break;case 8:h=sw;break;default:h=xf}n=h.bind(null,a,n,t),h=void 0,!he||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(a,n,{capture:!0,passive:h}):t.addEventListener(a,n,!0):h!==void 0?t.addEventListener(a,n,{passive:h}):t.addEventListener(a,n,!1)}function tf(t,a,n,o,h){var x=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var A=o.tag;if(A===3||A===4){var $=o.stateNode.containerInfo;if($===h)break;if(A===4)for(A=o.return;A!==null;){var ae=A.tag;if((ae===3||ae===4)&&A.stateNode.containerInfo===h)return;A=A.return}for(;$!==null;){if(A=is($),A===null)return;if(ae=A.tag,ae===5||ae===6||ae===26||ae===27){o=x=A;continue e}$=$.parentNode}}o=o.return}ls(function(){var Ee=x,Ye=xt(n),Xe=[];e:{var Me=Zl.get(t);if(Me!==void 0){var Ue=Us,Lt=t;switch(t){case"keypress":if(Ze(n)===0)break e;case"keydown":case"keyup":Ue=za;break;case"focusin":Lt="focus",Ue=Ql;break;case"focusout":Lt="blur",Ue=Ql;break;case"beforeblur":case"afterblur":Ue=Ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=Rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=Un;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=Kd;break;case ol:case No:case iu:Ue=gc;break;case lu:Ue=Xd;break;case"scroll":case"scrollend":Ue=zs;break;case"wheel":Ue=vc;break;case"copy":case"cut":case"paste":Ue=Vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=jc;break;case"toggle":case"beforetoggle":Ue=Vn}var ss=(a&4)!==0,fa=!ss&&(t==="scroll"||t==="scrollend"),be=ss?Me!==null?Me+"Capture":null:Me;ss=[];for(var me=Ee,Se;me!==null;){var Je=me;if(Se=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||Se===null||be===null||(Je=As(me,be),Je!=null&&ss.push(ed(me,Je,Se))),fa)break;me=me.return}0<ss.length&&(Me=new Ue(Me,Lt,null,n,Ye),Xe.push({event:Me,listeners:ss}))}}if((a&7)===0){e:{if(Me=t==="mouseover"||t==="pointerover",Ue=t==="mouseout"||t==="pointerout",Me&&n!==ve&&(Lt=n.relatedTarget||n.fromElement)&&(is(Lt)||Lt[zt]))break e;if((Ue||Me)&&(Me=Ye.window===Ye?Ye:(Me=Ye.ownerDocument)?Me.defaultView||Me.parentWindow:window,Ue?(Lt=n.relatedTarget||n.toElement,Ue=Ee,Lt=Lt?is(Lt):null,Lt!==null&&(fa=m(Lt),ss=Lt.tag,Lt!==fa||ss!==5&&ss!==27&&ss!==6)&&(Lt=null)):(Ue=null,Lt=Ee),Ue!==Lt)){if(ss=Rr,Je="onMouseLeave",be="onMouseEnter",me="mouse",(t==="pointerout"||t==="pointerover")&&(ss=jc,Je="onPointerLeave",be="onPointerEnter",me="pointer"),fa=Ue==null?Me:ds(Ue),Se=Lt==null?Me:ds(Lt),Me=new ss(Je,me+"leave",Ue,n,Ye),Me.target=fa,Me.relatedTarget=Se,Je=null,is(Ye)===Ee&&(ss=new ss(be,me+"enter",Lt,n,Ye),ss.target=Se,ss.relatedTarget=fa,Je=ss),fa=Je,Ue&&Lt)t:{for(ss=T1,be=Ue,me=Lt,Se=0,Je=be;Je;Je=ss(Je))Se++;Je=0;for(var Zt=me;Zt;Zt=ss(Zt))Je++;for(;0<Se-Je;)be=ss(be),Se--;for(;0<Je-Se;)me=ss(me),Je--;for(;Se--;){if(be===me||me!==null&&be===me.alternate){ss=be;break t}be=ss(be),me=ss(me)}ss=null}else ss=null;Ue!==null&&Ag(Xe,Me,Ue,ss,!1),Lt!==null&&fa!==null&&Ag(Xe,fa,Lt,ss,!0)}}e:{if(Me=Ee?ds(Ee):window,Ue=Me.nodeName&&Me.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&Me.type==="file")var Js=nl;else if(su(Me))if(Cc)Js=Pi;else{Js=ru;var qt=Gm}else Ue=Me.nodeName,!Ue||Ue.toLowerCase()!=="input"||Me.type!=="checkbox"&&Me.type!=="radio"?Ee&&rt(Ee.elementType)&&(Js=nl):Js=Tt;if(Js&&(Js=Js(t,Ee))){au(Xe,Js,n,Ye);break e}qt&&qt(t,Me,Ee),t==="focusout"&&Ee&&Me.type==="number"&&Ee.memoizedProps.value!=null&&Gl(Me,"number",Me.value)}switch(qt=Ee?ds(Ee):window,t){case"focusin":(su(qt)||qt.contentEditable==="true")&&(Oi=qt,Wl=Ee,sn=null);break;case"focusout":sn=Wl=Oi=null;break;case"mousedown":Ac=!0;break;case"contextmenu":case"mouseup":case"dragend":Ac=!1,Ec(Xe,n,Ye);break;case"selectionchange":if(ll)break;case"keydown":case"keyup":Ec(Xe,n,Ye)}var vs;if(ci)e:{switch(t){case"compositionstart":var $s="onCompositionStart";break e;case"compositionend":$s="onCompositionEnd";break e;case"compositionupdate":$s="onCompositionUpdate";break e}$s=void 0}else Ti?wc(t,n)&&($s="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($s="onCompositionStart");$s&&(Qa&&n.locale!=="ko"&&(Ti||$s!=="onCompositionStart"?$s==="onCompositionEnd"&&Ti&&(vs=He()):(Ke=Ye,yt="value"in Ke?Ke.value:Ke.textContent,Ti=!0)),qt=Bu(Ee,$s),0<qt.length&&($s=new In($s,t,null,n,Ye),Xe.push({event:$s,listeners:qt}),vs?$s.data=vs:(vs=qn(n),vs!==null&&($s.data=vs)))),(vs=eu?jr(t,n):ki(t,n))&&($s=Bu(Ee,"onBeforeInput"),0<$s.length&&(qt=new In("onBeforeInput","beforeinput",null,n,Ye),Xe.push({event:qt,listeners:$s}),qt.data=vs)),S1(Xe,t,Ee,n,Ye)}Sg(Xe,a)})}function ed(t,a,n){return{instance:t,listener:a,currentTarget:n}}function Bu(t,a){for(var n=a+"Capture",o=[];t!==null;){var h=t,x=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||x===null||(h=As(t,n),h!=null&&o.unshift(ed(t,h,x)),h=As(t,a),h!=null&&o.push(ed(t,h,x))),t.tag===3)return o;t=t.return}return[]}function T1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ag(t,a,n,o,h){for(var x=a._reactName,A=[];n!==null&&n!==o;){var $=n,ae=$.alternate,Ee=$.stateNode;if($=$.tag,ae!==null&&ae===o)break;$!==5&&$!==26&&$!==27||Ee===null||(ae=Ee,h?(Ee=As(n,x),Ee!=null&&A.unshift(ed(n,Ee,ae))):h||(Ee=As(n,x),Ee!=null&&A.push(ed(n,Ee,ae)))),n=n.return}A.length!==0&&t.push({event:a,listeners:A})}var k1=/\r\n?/g,D1=/\u0000|\uFFFD/g;function Eg(t){return(typeof t=="string"?t:""+t).replace(k1,`
`).replace(D1,"")}function Tg(t,a){return a=Eg(a),Eg(t)===a}function pa(t,a,n,o,h,x){switch(n){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||$e(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&$e(t,""+o);break;case"className":ia(t,"class",o);break;case"tabIndex":ia(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ia(t,n,o);break;case"style":Fe(t,o,x);break;case"data":if(a!=="object"){ia(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||n!=="href")){t.removeAttribute(n);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(n);break}o=_e(""+o),t.setAttribute(n,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(n==="formAction"?(a!=="input"&&pa(t,a,"name",h.name,h,null),pa(t,a,"formEncType",h.formEncType,h,null),pa(t,a,"formMethod",h.formMethod,h,null),pa(t,a,"formTarget",h.formTarget,h,null)):(pa(t,a,"encType",h.encType,h,null),pa(t,a,"method",h.method,h,null),pa(t,a,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(n);break}o=_e(""+o),t.setAttribute(n,o);break;case"onClick":o!=null&&(t.onclick=Le);break;case"onScroll":o!=null&&Ms("scroll",t);break;case"onScrollEnd":o!=null&&Ms("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(n=o.__html,n!=null){if(h.children!=null)throw Error(l(60));t.innerHTML=n}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}n=_e(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(n,""+o):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":o===!0?t.setAttribute(n,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(n,o):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(n,o):t.removeAttribute(n);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(n):t.setAttribute(n,o);break;case"popover":Ms("beforetoggle",t),Ms("toggle",t),Ma(t,"popover",o);break;case"xlinkActuate":ys(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ys(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ys(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ys(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ys(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ys(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ys(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ys(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ys(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ma(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=De.get(n)||n,Ma(t,n,o))}}function sf(t,a,n,o,h,x){switch(n){case"style":Fe(t,o,x);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(n=o.__html,n!=null){if(h.children!=null)throw Error(l(60));t.innerHTML=n}}break;case"children":typeof o=="string"?$e(t,o):(typeof o=="number"||typeof o=="bigint")&&$e(t,""+o);break;case"onScroll":o!=null&&Ms("scroll",t);break;case"onScrollEnd":o!=null&&Ms("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Le);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yr.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(h=n.endsWith("Capture"),a=n.slice(2,h?n.length-7:void 0),x=t[St]||null,x=x!=null?x[n]:null,typeof x=="function"&&t.removeEventListener(a,x,h),typeof o=="function")){typeof x!="function"&&x!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(a,o,h);break e}n in t?t[n]=o:o===!0?t.setAttribute(n,""):Ma(t,n,o)}}}function ur(t,a,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ms("error",t),Ms("load",t);var o=!1,h=!1,x;for(x in n)if(n.hasOwnProperty(x)){var A=n[x];if(A!=null)switch(x){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:pa(t,a,x,A,n,null)}}h&&pa(t,a,"srcSet",n.srcSet,n,null),o&&pa(t,a,"src",n.src,n,null);return;case"input":Ms("invalid",t);var $=x=A=h=null,ae=null,Ee=null;for(o in n)if(n.hasOwnProperty(o)){var Ye=n[o];if(Ye!=null)switch(o){case"name":h=Ye;break;case"type":A=Ye;break;case"checked":ae=Ye;break;case"defaultChecked":Ee=Ye;break;case"value":x=Ye;break;case"defaultValue":$=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(l(137,a));break;default:pa(t,a,o,Ye,n,null)}}tn(t,x,$,ae,Ee,A,h,!1);return;case"select":Ms("invalid",t),o=A=x=null;for(h in n)if(n.hasOwnProperty(h)&&($=n[h],$!=null))switch(h){case"value":x=$;break;case"defaultValue":A=$;break;case"multiple":o=$;default:pa(t,a,h,$,n,null)}a=x,n=A,t.multiple=!!o,a!=null?gn(t,!!o,a,!1):n!=null&&gn(t,!!o,n,!0);return;case"textarea":Ms("invalid",t),x=h=o=null;for(A in n)if(n.hasOwnProperty(A)&&($=n[A],$!=null))switch(A){case"value":o=$;break;case"defaultValue":h=$;break;case"children":x=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(l(91));break;default:pa(t,a,A,$,n,null)}ie(t,o,h,x);return;case"option":for(ae in n)if(n.hasOwnProperty(ae)&&(o=n[ae],o!=null))switch(ae){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:pa(t,a,ae,o,n,null)}return;case"dialog":Ms("beforetoggle",t),Ms("toggle",t),Ms("cancel",t),Ms("close",t);break;case"iframe":case"object":Ms("load",t);break;case"video":case"audio":for(o=0;o<Xc.length;o++)Ms(Xc[o],t);break;case"image":Ms("error",t),Ms("load",t);break;case"details":Ms("toggle",t);break;case"embed":case"source":case"link":Ms("error",t),Ms("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in n)if(n.hasOwnProperty(Ee)&&(o=n[Ee],o!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:pa(t,a,Ee,o,n,null)}return;default:if(rt(a)){for(Ye in n)n.hasOwnProperty(Ye)&&(o=n[Ye],o!==void 0&&sf(t,a,Ye,o,n,void 0));return}}for($ in n)n.hasOwnProperty($)&&(o=n[$],o!=null&&pa(t,a,$,o,n,null))}function P1(t,a,n,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,x=null,A=null,$=null,ae=null,Ee=null,Ye=null;for(Ue in n){var Xe=n[Ue];if(n.hasOwnProperty(Ue)&&Xe!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":ae=Xe;default:o.hasOwnProperty(Ue)||pa(t,a,Ue,null,o,Xe)}}for(var Me in o){var Ue=o[Me];if(Xe=n[Me],o.hasOwnProperty(Me)&&(Ue!=null||Xe!=null))switch(Me){case"type":x=Ue;break;case"name":h=Ue;break;case"checked":Ee=Ue;break;case"defaultChecked":Ye=Ue;break;case"value":A=Ue;break;case"defaultValue":$=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(l(137,a));break;default:Ue!==Xe&&pa(t,a,Me,Ue,o,Xe)}}gs(t,A,$,ae,Ee,Ye,x,h);return;case"select":Ue=A=$=Me=null;for(x in n)if(ae=n[x],n.hasOwnProperty(x)&&ae!=null)switch(x){case"value":break;case"multiple":Ue=ae;default:o.hasOwnProperty(x)||pa(t,a,x,null,o,ae)}for(h in o)if(x=o[h],ae=n[h],o.hasOwnProperty(h)&&(x!=null||ae!=null))switch(h){case"value":Me=x;break;case"defaultValue":$=x;break;case"multiple":A=x;default:x!==ae&&pa(t,a,h,x,o,ae)}a=$,n=A,o=Ue,Me!=null?gn(t,!!n,Me,!1):!!o!=!!n&&(a!=null?gn(t,!!n,a,!0):gn(t,!!n,n?[]:"",!1));return;case"textarea":Ue=Me=null;for($ in n)if(h=n[$],n.hasOwnProperty($)&&h!=null&&!o.hasOwnProperty($))switch($){case"value":break;case"children":break;default:pa(t,a,$,null,o,h)}for(A in o)if(h=o[A],x=n[A],o.hasOwnProperty(A)&&(h!=null||x!=null))switch(A){case"value":Me=h;break;case"defaultValue":Ue=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(l(91));break;default:h!==x&&pa(t,a,A,h,o,x)}bn(t,Me,Ue);return;case"option":for(var Lt in n)if(Me=n[Lt],n.hasOwnProperty(Lt)&&Me!=null&&!o.hasOwnProperty(Lt))switch(Lt){case"selected":t.selected=!1;break;default:pa(t,a,Lt,null,o,Me)}for(ae in o)if(Me=o[ae],Ue=n[ae],o.hasOwnProperty(ae)&&Me!==Ue&&(Me!=null||Ue!=null))switch(ae){case"selected":t.selected=Me&&typeof Me!="function"&&typeof Me!="symbol";break;default:pa(t,a,ae,Me,o,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ss in n)Me=n[ss],n.hasOwnProperty(ss)&&Me!=null&&!o.hasOwnProperty(ss)&&pa(t,a,ss,null,o,Me);for(Ee in o)if(Me=o[Ee],Ue=n[Ee],o.hasOwnProperty(Ee)&&Me!==Ue&&(Me!=null||Ue!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(l(137,a));break;default:pa(t,a,Ee,Me,o,Ue)}return;default:if(rt(a)){for(var fa in n)Me=n[fa],n.hasOwnProperty(fa)&&Me!==void 0&&!o.hasOwnProperty(fa)&&sf(t,a,fa,void 0,o,Me);for(Ye in o)Me=o[Ye],Ue=n[Ye],!o.hasOwnProperty(Ye)||Me===Ue||Me===void 0&&Ue===void 0||sf(t,a,Ye,Me,o,Ue);return}}for(var be in n)Me=n[be],n.hasOwnProperty(be)&&Me!=null&&!o.hasOwnProperty(be)&&pa(t,a,be,null,o,Me);for(Xe in o)Me=o[Xe],Ue=n[Xe],!o.hasOwnProperty(Xe)||Me===Ue||Me==null&&Ue==null||pa(t,a,Xe,Me,o,Ue)}function kg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function O1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,n=performance.getEntriesByType("resource"),o=0;o<n.length;o++){var h=n[o],x=h.transferSize,A=h.initiatorType,$=h.duration;if(x&&$&&kg(A)){for(A=0,$=h.responseEnd,o+=1;o<n.length;o++){var ae=n[o],Ee=ae.startTime;if(Ee>$)break;var Ye=ae.transferSize,Xe=ae.initiatorType;Ye&&kg(Xe)&&(ae=ae.responseEnd,A+=Ye*(ae<$?1:($-Ee)/(ae-Ee)))}if(--o,a+=8*(x+A)/(h.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var af=null,rf=null;function qu(t){return t.nodeType===9?t:t.ownerDocument}function Dg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pg(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function nf(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var lf=null;function R1(){var t=window.event;return t&&t.type==="popstate"?t===lf?!1:(lf=t,!0):(lf=null,!1)}var Og=typeof setTimeout=="function"?setTimeout:void 0,M1=typeof clearTimeout=="function"?clearTimeout:void 0,Rg=typeof Promise=="function"?Promise:void 0,_1=typeof queueMicrotask=="function"?queueMicrotask:typeof Rg<"u"?function(t){return Rg.resolve(null).then(t).catch(z1)}:Og;function z1(t){setTimeout(function(){throw t})}function Cl(t){return t==="head"}function Mg(t,a){var n=a,o=0;do{var h=n.nextSibling;if(t.removeChild(n),h&&h.nodeType===8)if(n=h.data,n==="/$"||n==="/&"){if(o===0){t.removeChild(h),Go(a);return}o--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")o++;else if(n==="html")td(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,td(n);for(var x=n.firstChild;x;){var A=x.nextSibling,$=x.nodeName;x[Ss]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&x.rel.toLowerCase()==="stylesheet"||n.removeChild(x),x=A}}else n==="body"&&td(t.ownerDocument.body);n=h}while(n);Go(a)}function _g(t,a){var n=t;t=0;do{var o=n.nextSibling;if(n.nodeType===1?a?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(a?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=o}while(n)}function of(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var n=a;switch(a=a.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":of(n),ra(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function L1(t,a,n,o){for(;t.nodeType===1;){var h=n;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ss])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(x=t.getAttribute("rel"),x==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(x!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(x=t.getAttribute("src"),(x!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&x&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var x=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===x)return t}else return t;if(t=Tn(t.nextSibling),t===null)break}return null}function $1(t,a,n){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Tn(t.nextSibling),t===null))return null;return t}function zg(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Tn(t.nextSibling),t===null))return null;return t}function cf(t){return t.data==="$?"||t.data==="$~"}function df(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function F1(t,a){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||n.readyState!=="loading")a();else{var o=function(){a(),n.removeEventListener("DOMContentLoaded",o)};n.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Tn(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var uf=null;function Lg(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(a===0)return Tn(t.nextSibling);a--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||a++}t=t.nextSibling}return null}function $g(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(a===0)return t;a--}else n!=="/$"&&n!=="/&"||a++}t=t.previousSibling}return null}function Fg(t,a,n){switch(a=qu(n),t){case"html":if(t=a.documentElement,!t)throw Error(l(452));return t;case"head":if(t=a.head,!t)throw Error(l(453));return t;case"body":if(t=a.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function td(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ra(t)}var kn=new Map,Ug=new Set;function Hu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Wi=X.d;X.d={f:U1,r:I1,D:V1,C:B1,L:q1,m:H1,X:Q1,S:G1,M:Y1};function U1(){var t=Wi.f(),a=zu();return t||a}function I1(t){var a=ms(t);a!==null&&a.tag===5&&a.type==="form"?a0(a):Wi.r(t)}var Bo=typeof document>"u"?null:document;function Ig(t,a,n){var o=Bo;if(o&&typeof a=="string"&&a){var h=la(a);h='link[rel="'+t+'"][href="'+h+'"]',typeof n=="string"&&(h+='[crossorigin="'+n+'"]'),Ug.has(h)||(Ug.add(h),t={rel:t,crossOrigin:n,href:a},o.querySelector(h)===null&&(a=o.createElement("link"),ur(a,"link",t),na(a),o.head.appendChild(a)))}}function V1(t){Wi.D(t),Ig("dns-prefetch",t,null)}function B1(t,a){Wi.C(t,a),Ig("preconnect",t,a)}function q1(t,a,n){Wi.L(t,a,n);var o=Bo;if(o&&t&&a){var h='link[rel="preload"][as="'+la(a)+'"]';a==="image"&&n&&n.imageSrcSet?(h+='[imagesrcset="'+la(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(h+='[imagesizes="'+la(n.imageSizes)+'"]')):h+='[href="'+la(t)+'"]';var x=h;switch(a){case"style":x=qo(t);break;case"script":x=Ho(t)}kn.has(x)||(t=v({rel:"preload",href:a==="image"&&n&&n.imageSrcSet?void 0:t,as:a},n),kn.set(x,t),o.querySelector(h)!==null||a==="style"&&o.querySelector(sd(x))||a==="script"&&o.querySelector(ad(x))||(a=o.createElement("link"),ur(a,"link",t),na(a),o.head.appendChild(a)))}}function H1(t,a){Wi.m(t,a);var n=Bo;if(n&&t){var o=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+la(o)+'"][href="'+la(t)+'"]',x=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Ho(t)}if(!kn.has(x)&&(t=v({rel:"modulepreload",href:t},a),kn.set(x,t),n.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ad(x)))return}o=n.createElement("link"),ur(o,"link",t),na(o),n.head.appendChild(o)}}}function G1(t,a,n){Wi.S(t,a,n);var o=Bo;if(o&&t){var h=lr(o).hoistableStyles,x=qo(t);a=a||"default";var A=h.get(x);if(!A){var $={loading:0,preload:null};if(A=o.querySelector(sd(x)))$.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":a},n),(n=kn.get(x))&&mf(t,n);var ae=A=o.createElement("link");na(ae),ur(ae,"link",t),ae._p=new Promise(function(Ee,Ye){ae.onload=Ee,ae.onerror=Ye}),ae.addEventListener("load",function(){$.loading|=1}),ae.addEventListener("error",function(){$.loading|=2}),$.loading|=4,Gu(A,a,o)}A={type:"stylesheet",instance:A,count:1,state:$},h.set(x,A)}}}function Q1(t,a){Wi.X(t,a);var n=Bo;if(n&&t){var o=lr(n).hoistableScripts,h=Ho(t),x=o.get(h);x||(x=n.querySelector(ad(h)),x||(t=v({src:t,async:!0},a),(a=kn.get(h))&&pf(t,a),x=n.createElement("script"),na(x),ur(x,"link",t),n.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},o.set(h,x))}}function Y1(t,a){Wi.M(t,a);var n=Bo;if(n&&t){var o=lr(n).hoistableScripts,h=Ho(t),x=o.get(h);x||(x=n.querySelector(ad(h)),x||(t=v({src:t,async:!0,type:"module"},a),(a=kn.get(h))&&pf(t,a),x=n.createElement("script"),na(x),ur(x,"link",t),n.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},o.set(h,x))}}function Vg(t,a,n,o){var h=(h=O.current)?Hu(h):null;if(!h)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(a=qo(n.href),n=lr(h).hoistableStyles,o=n.get(a),o||(o={type:"style",instance:null,count:0,state:null},n.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=qo(n.href);var x=lr(h).hoistableStyles,A=x.get(t);if(A||(h=h.ownerDocument||h,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(t,A),(x=h.querySelector(sd(t)))&&!x._p&&(A.instance=x,A.state.loading=5),kn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kn.set(t,n),x||W1(h,t,n,A.state))),a&&o===null)throw Error(l(528,""));return A}if(a&&o!==null)throw Error(l(529,""));return null;case"script":return a=n.async,n=n.src,typeof n=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ho(n),n=lr(h).hoistableScripts,o=n.get(a),o||(o={type:"script",instance:null,count:0,state:null},n.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function qo(t){return'href="'+la(t)+'"'}function sd(t){return'link[rel="stylesheet"]['+t+"]"}function Bg(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function W1(t,a,n,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),ur(a,"link",n),na(a),t.head.appendChild(a))}function Ho(t){return'[src="'+la(t)+'"]'}function ad(t){return"script[async]"+t}function qg(t,a,n){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+la(n.href)+'"]');if(o)return a.instance=o,na(o),o;var h=v({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),na(o),ur(o,"style",h),Gu(o,n.precedence,t),a.instance=o;case"stylesheet":h=qo(n.href);var x=t.querySelector(sd(h));if(x)return a.state.loading|=4,a.instance=x,na(x),x;o=Bg(n),(h=kn.get(h))&&mf(o,h),x=(t.ownerDocument||t).createElement("link"),na(x);var A=x;return A._p=new Promise(function($,ae){A.onload=$,A.onerror=ae}),ur(x,"link",o),a.state.loading|=4,Gu(x,n.precedence,t),a.instance=x;case"script":return x=Ho(n.src),(h=t.querySelector(ad(x)))?(a.instance=h,na(h),h):(o=n,(h=kn.get(x))&&(o=v({},n),pf(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),na(h),ur(h,"link",o),t.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(l(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,Gu(o,n.precedence,t));return a.instance}function Gu(t,a,n){for(var o=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,x=h,A=0;A<o.length;A++){var $=o[A];if($.dataset.precedence===a)x=$;else if(x!==h)break}x?x.parentNode.insertBefore(t,x.nextSibling):(a=n.nodeType===9?n.head:n,a.insertBefore(t,a.firstChild))}function mf(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function pf(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Qu=null;function Hg(t,a,n){if(Qu===null){var o=new Map,h=Qu=new Map;h.set(n,o)}else h=Qu,o=h.get(n),o||(o=new Map,h.set(n,o));if(o.has(t))return o;for(o.set(t,null),n=n.getElementsByTagName(t),h=0;h<n.length;h++){var x=n[h];if(!(x[Ss]||x[pt]||t==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var A=x.getAttribute(a)||"";A=t+A;var $=o.get(A);$?$.push(x):o.set(A,[x])}}return o}function Gg(t,a,n){t=t.ownerDocument||t,t.head.insertBefore(n,a==="title"?t.querySelector("head > title"):null)}function Z1(t,a,n){if(n===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Qg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function J1(t,a,n,o){if(n.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=qo(o.href),x=a.querySelector(sd(h));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Yu.bind(t),a.then(t,t)),n.state.loading|=4,n.instance=x,na(x);return}x=a.ownerDocument||a,o=Bg(o),(h=kn.get(h))&&mf(o,h),x=x.createElement("link"),na(x);var A=x;A._p=new Promise(function($,ae){A.onload=$,A.onerror=ae}),ur(x,"link",o),n.instance=x}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,a),(a=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=Yu.bind(t),a.addEventListener("load",n),a.addEventListener("error",n))}}var ff=0;function K1(t,a){return t.stylesheets&&t.count===0&&Zu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var o=setTimeout(function(){if(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend){var x=t.unsuspend;t.unsuspend=null,x()}},6e4+a);0<t.imgBytes&&ff===0&&(ff=62500*O1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend)){var x=t.unsuspend;t.unsuspend=null,x()}},(t.imgBytes>ff?50:800)+a);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Yu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Wu=null;function Zu(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Wu=new Map,a.forEach(X1,t),Wu=null,Yu.call(t))}function X1(t,a){if(!(a.state.loading&4)){var n=Wu.get(t);if(n)var o=n.get(null);else{n=new Map,Wu.set(t,n);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<h.length;x++){var A=h[x];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(n.set(A.dataset.precedence,A),o=A)}o&&n.set(null,o)}h=a.instance,A=h.getAttribute("data-precedence"),x=n.get(A)||o,x===o&&n.set(null,h),n.set(A,h),this.count++,o=Yu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),x?x.parentNode.insertBefore(h,x.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),a.state.loading|=4}}var rd={$$typeof:V,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function ew(t,a,n,o,h,x,A,$,ae){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=x,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ae,this.incompleteTransitions=new Map}function Yg(t,a,n,o,h,x,A,$,ae,Ee,Ye,Xe){return t=new ew(t,a,n,A,ae,Ee,Ye,Xe,$),a=1,x===!0&&(a|=24),x=wr(3,null,null,a),t.current=x,x.stateNode=t,a=Nt(),a.refCount++,t.pooledCache=a,a.refCount++,x.memoizedState={element:o,isDehydrated:n,cache:a},Zm(x),t}function Wg(t){return t?(t=Lr,t):Lr}function Zg(t,a,n,o,h,x){h=Wg(h),o.context===null?o.context=h:o.pendingContext=h,o=fl(a),o.payload={element:n},x=x===void 0?null:x,x!==null&&(o.callback=x),n=hl(t,o,a),n!==null&&(Wr(n,t,a),zc(n,t,a))}function Jg(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<a?n:a}}function hf(t,a){Jg(t,a),(t=t.alternate)&&Jg(t,a)}function Kg(t){if(t.tag===13||t.tag===31){var a=hi(t,67108864);a!==null&&Wr(a,t,67108864),hf(t,67108864)}}function Xg(t){if(t.tag===13||t.tag===31){var a=un();a=ke(a);var n=hi(t,a);n!==null&&Wr(n,t,a),hf(t,a)}}var Ju=!0;function tw(t,a,n,o){var h=_.T;_.T=null;var x=X.p;try{X.p=2,xf(t,a,n,o)}finally{X.p=x,_.T=h}}function sw(t,a,n,o){var h=_.T;_.T=null;var x=X.p;try{X.p=8,xf(t,a,n,o)}finally{X.p=x,_.T=h}}function xf(t,a,n,o){if(Ju){var h=gf(o);if(h===null)tf(t,a,o,Ku,n),tb(t,o);else if(rw(h,t,a,n,o))o.stopPropagation();else if(tb(t,o),a&4&&-1<aw.indexOf(t)){for(;h!==null;){var x=ms(h);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var A=Ws(x.pendingLanes);if(A!==0){var $=x;for($.pendingLanes|=2,$.entangledLanes|=2;A;){var ae=1<<31-rs(A);$.entanglements[1]|=ae,A&=~ae}ji(x),(ea&6)===0&&(Mu=Vt()+500,Kc(0))}}break;case 31:case 13:$=hi(x,2),$!==null&&Wr($,x,2),zu(),hf(x,2)}if(x=gf(o),x===null&&tf(t,a,o,Ku,n),x===h)break;h=x}h!==null&&o.stopPropagation()}else tf(t,a,o,null,n)}}function gf(t){return t=xt(t),bf(t)}var Ku=null;function bf(t){if(Ku=null,t=is(t),t!==null){var a=m(t);if(a===null)t=null;else{var n=a.tag;if(n===13){if(t=u(a),t!==null)return t;t=null}else if(n===31){if(t=f(a),t!==null)return t;t=null}else if(n===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Ku=t,null}function eb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gs()){case Ns:return 2;case wa:return 8;case fe:case gt:return 32;case kt:return 268435456;default:return 32}default:return 32}}var yf=!1,Al=null,El=null,Tl=null,nd=new Map,id=new Map,kl=[],aw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tb(t,a){switch(t){case"focusin":case"focusout":Al=null;break;case"dragenter":case"dragleave":El=null;break;case"mouseover":case"mouseout":Tl=null;break;case"pointerover":case"pointerout":nd.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(a.pointerId)}}function ld(t,a,n,o,h,x){return t===null||t.nativeEvent!==x?(t={blockedOn:a,domEventName:n,eventSystemFlags:o,nativeEvent:x,targetContainers:[h]},a!==null&&(a=ms(a),a!==null&&Kg(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),t)}function rw(t,a,n,o,h){switch(a){case"focusin":return Al=ld(Al,t,a,n,o,h),!0;case"dragenter":return El=ld(El,t,a,n,o,h),!0;case"mouseover":return Tl=ld(Tl,t,a,n,o,h),!0;case"pointerover":var x=h.pointerId;return nd.set(x,ld(nd.get(x)||null,t,a,n,o,h)),!0;case"gotpointercapture":return x=h.pointerId,id.set(x,ld(id.get(x)||null,t,a,n,o,h)),!0}return!1}function sb(t){var a=is(t.target);if(a!==null){var n=m(a);if(n!==null){if(a=n.tag,a===13){if(a=u(n),a!==null){t.blockedOn=a,Mt(t.priority,function(){Xg(n)});return}}else if(a===31){if(a=f(n),a!==null){t.blockedOn=a,Mt(t.priority,function(){Xg(n)});return}}else if(a===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var n=gf(t.nativeEvent);if(n===null){n=t.nativeEvent;var o=new n.constructor(n.type,n);ve=o,n.target.dispatchEvent(o),ve=null}else return a=ms(n),a!==null&&Kg(a),t.blockedOn=n,!1;a.shift()}return!0}function ab(t,a,n){Xu(t)&&n.delete(a)}function nw(){yf=!1,Al!==null&&Xu(Al)&&(Al=null),El!==null&&Xu(El)&&(El=null),Tl!==null&&Xu(Tl)&&(Tl=null),nd.forEach(ab),id.forEach(ab)}function em(t,a){t.blockedOn===a&&(t.blockedOn=null,yf||(yf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nw)))}var tm=null;function rb(t){tm!==t&&(tm=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){tm===t&&(tm=null);for(var a=0;a<t.length;a+=3){var n=t[a],o=t[a+1],h=t[a+2];if(typeof o!="function"){if(bf(o||n)===null)continue;break}var x=ms(n);x!==null&&(t.splice(a,3),a-=3,xp(x,{pending:!0,data:h,method:n.method,action:o},o,h))}}))}function Go(t){function a(ae){return em(ae,t)}Al!==null&&em(Al,t),El!==null&&em(El,t),Tl!==null&&em(Tl,t),nd.forEach(a),id.forEach(a);for(var n=0;n<kl.length;n++){var o=kl[n];o.blockedOn===t&&(o.blockedOn=null)}for(;0<kl.length&&(n=kl[0],n.blockedOn===null);)sb(n),n.blockedOn===null&&kl.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(o=0;o<n.length;o+=3){var h=n[o],x=n[o+1],A=h[St]||null;if(typeof x=="function")A||rb(n);else if(A){var $=null;if(x&&x.hasAttribute("formAction")){if(h=x,A=x[St]||null)$=A.formAction;else if(bf(h)!==null)continue}else $=A.action;typeof $=="function"?n[o+1]=$:(n.splice(o,3),o-=3),rb(n)}}}function nb(){function t(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(A){return h=A})},focusReset:"manual",scroll:"manual"})}function a(){h!==null&&(h(),h=null),o||setTimeout(n,20)}function n(){if(!o&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(n,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),h!==null&&(h(),h=null)}}}function jf(t){this._internalRoot=t}sm.prototype.render=jf.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(l(409));var n=a.current,o=un();Zg(n,o,t,a,null,null)},sm.prototype.unmount=jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Zg(t.current,2,null,t,null,null),zu(),a[zt]=null}};function sm(t){this._internalRoot=t}sm.prototype.unstable_scheduleHydration=function(t){if(t){var a=nt();t={blockedOn:null,target:t,priority:a};for(var n=0;n<kl.length&&a!==0&&a<kl[n].priority;n++);kl.splice(n,0,t),n===0&&sb(t)}};var ib=r.version;if(ib!=="19.2.3")throw Error(l(527,ib,"19.2.3"));X.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=p(a),t=t!==null?j(t):null,t=t===null?null:t.stateNode,t};var iw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var am=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!am.isDisabled&&am.supportsFiber)try{ht=am.inject(iw),Qt=am}catch{}}return cd.createRoot=function(t,a){if(!d(t))throw Error(l(299));var n=!1,o="",h=p0,x=f0,A=h0;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=Yg(t,1,!1,null,null,n,o,null,h,x,A,nb),t[zt]=a.current,ef(t),new jf(a)},cd.hydrateRoot=function(t,a,n){if(!d(t))throw Error(l(299));var o=!1,h="",x=p0,A=f0,$=h0,ae=null;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(x=n.onUncaughtError),n.onCaughtError!==void 0&&(A=n.onCaughtError),n.onRecoverableError!==void 0&&($=n.onRecoverableError),n.formState!==void 0&&(ae=n.formState)),a=Yg(t,1,!0,a,n??null,o,h,ae,x,A,$,nb),a.context=Wg(null),n=a.current,o=un(),o=ke(o),h=fl(o),h.callback=null,hl(n,h,o),n=o,a.current.lanes=n,Xr(a,n),ji(a),t[zt]=a.current,ef(t),new sm(a)},cd.version="19.2.3",cd}var xb;function gw(){if(xb)return Nf.exports;xb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Nf.exports=xw(),Nf.exports}var gb=gw(),y=Th();const Pr=cw(y),bw=ow({__proto__:null,default:Pr},[y]);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wj=s=>{throw TypeError(s)},yw=(s,r,i)=>r.has(s)||wj("Cannot "+i),Ef=(s,r,i)=>(yw(s,r,"read from private field"),i?i.call(s):r.get(s)),jw=(s,r,i)=>r.has(s)?wj("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,i),bb="popstate";function vw(s={}){function r(l,d){let{pathname:m,search:u,hash:f}=l.location;return Cd("",{pathname:m,search:u,hash:f},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function i(l,d){return typeof d=="string"?d:Ai(d)}return ww(r,i,null,s)}function Ds(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function Fa(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Nw(){return Math.random().toString(36).substring(2,10)}function yb(s,r){return{usr:s.state,key:s.key,idx:r}}function Cd(s,r,i=null,l){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof r=="string"?Bl(r):r,state:i,key:r&&r.key||l||Nw()}}function Ai({pathname:s="/",search:r="",hash:i=""}){return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(s+=i.charAt(0)==="#"?i:"#"+i),s}function Bl(s){let r={};if(s){let i=s.indexOf("#");i>=0&&(r.hash=s.substring(i),s=s.substring(0,i));let l=s.indexOf("?");l>=0&&(r.search=s.substring(l),s=s.substring(0,l)),s&&(r.pathname=s)}return r}function ww(s,r,i,l={}){let{window:d=document.defaultView,v5Compat:m=!1}=l,u=d.history,f="POP",g=null,p=j();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function j(){return(u.state||{idx:null}).idx}function v(){f="POP";let F=j(),L=F==null?null:F-p;p=F,g&&g({action:f,location:T.location,delta:L})}function w(F,L){f="PUSH";let M=Cd(T.location,F,L);p=j()+1;let V=yb(M,p),le=T.createHref(M);try{u.pushState(V,"",le)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;d.location.assign(le)}m&&g&&g({action:f,location:T.location,delta:1})}function k(F,L){f="REPLACE";let M=Cd(T.location,F,L);p=j();let V=yb(M,p),le=T.createHref(M);u.replaceState(V,"",le),m&&g&&g({action:f,location:T.location,delta:0})}function E(F){return Sj(F)}let T={get action(){return f},get location(){return s(d,u)},listen(F){if(g)throw new Error("A history only accepts one active listener");return d.addEventListener(bb,v),g=F,()=>{d.removeEventListener(bb,v),g=null}},createHref(F){return r(d,F)},createURL:E,encodeLocation(F){let L=E(F);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:w,replace:k,go(F){return u.go(F)}};return T}function Sj(s,r=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ds(i,"No window.location.(origin|href) available to create URL");let l=typeof s=="string"?s:Ai(s);return l=l.replace(/ $/,"%20"),!r&&l.startsWith("//")&&(l=i+l),new URL(l,i)}var hd,jb=class{constructor(s){if(jw(this,hd,new Map),s)for(let[r,i]of s)this.set(r,i)}get(s){if(Ef(this,hd).has(s))return Ef(this,hd).get(s);if(s.defaultValue!==void 0)return s.defaultValue;throw new Error("No value found for context")}set(s,r){Ef(this,hd).set(s,r)}};hd=new WeakMap;var Sw=new Set(["lazy","caseSensitive","path","id","index","children"]);function Cw(s){return Sw.has(s)}var Aw=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function Ew(s){return Aw.has(s)}function Tw(s){return s.index===!0}function Ad(s,r,i=[],l={},d=!1){return s.map((m,u)=>{let f=[...i,String(u)],g=typeof m.id=="string"?m.id:f.join("-");if(Ds(m.index!==!0||!m.children,"Cannot specify children on an index route"),Ds(d||!l[g],`Found a route id collision on id "${g}".  Route id's must be globally unique within Data Router usages`),Tw(m)){let p={...m,id:g};return l[g]=vb(p,r(p)),p}else{let p={...m,id:g,children:void 0};return l[g]=vb(p,r(p)),m.children&&(p.children=Ad(m.children,r,f,l,d)),p}})}function vb(s,r){return Object.assign(s,{...r,...typeof r.lazy=="object"&&r.lazy!=null?{lazy:{...s.lazy,...r.lazy}}:{}})}function Ml(s,r,i="/"){return xd(s,r,i,!1)}function xd(s,r,i,l){let d=typeof r=="string"?Bl(r):r,m=Ln(d.pathname||"/",i);if(m==null)return null;let u=Cj(s);Dw(u);let f=null;for(let g=0;f==null&&g<u.length;++g){let p=Iw(m);f=Fw(u[g],p,l)}return f}function kw(s,r){let{route:i,pathname:l,params:d}=s;return{id:i.id,pathname:l,params:d,data:r[i.id],loaderData:r[i.id],handle:i.handle}}function Cj(s,r=[],i=[],l="",d=!1){let m=(u,f,g=d,p)=>{let j={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(l)&&g)return;Ds(j.relativePath.startsWith(l),`Absolute route path "${j.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(l.length)}let v=wi([l,j.relativePath]),w=i.concat(j);u.children&&u.children.length>0&&(Ds(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Cj(u.children,r,w,v,g)),!(u.path==null&&!u.index)&&r.push({path:v,score:Lw(v,u.index),routesMeta:w})};return s.forEach((u,f)=>{var g;if(u.path===""||!((g=u.path)!=null&&g.includes("?")))m(u,f);else for(let p of Aj(u.path))m(u,f,!0,p)}),r}function Aj(s){let r=s.split("/");if(r.length===0)return[];let[i,...l]=r,d=i.endsWith("?"),m=i.replace(/\?$/,"");if(l.length===0)return d?[m,""]:[m];let u=Aj(l.join("/")),f=[];return f.push(...u.map(g=>g===""?m:[m,g].join("/"))),d&&f.push(...u),f.map(g=>s.startsWith("/")&&g===""?"/":g)}function Dw(s){s.sort((r,i)=>r.score!==i.score?i.score-r.score:$w(r.routesMeta.map(l=>l.childrenIndex),i.routesMeta.map(l=>l.childrenIndex)))}var Pw=/^:[\w-]+$/,Ow=3,Rw=2,Mw=1,_w=10,zw=-2,Nb=s=>s==="*";function Lw(s,r){let i=s.split("/"),l=i.length;return i.some(Nb)&&(l+=zw),r&&(l+=Rw),i.filter(d=>!Nb(d)).reduce((d,m)=>d+(Pw.test(m)?Ow:m===""?Mw:_w),l)}function $w(s,r){return s.length===r.length&&s.slice(0,-1).every((l,d)=>l===r[d])?s[s.length-1]-r[r.length-1]:0}function Fw(s,r,i=!1){let{routesMeta:l}=s,d={},m="/",u=[];for(let f=0;f<l.length;++f){let g=l[f],p=f===l.length-1,j=m==="/"?r:r.slice(m.length)||"/",v=Nm({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},j),w=g.route;if(!v&&p&&i&&!l[l.length-1].route.index&&(v=Nm({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},j)),!v)return null;Object.assign(d,v.params),u.push({params:d,pathname:wi([m,v.pathname]),pathnameBase:Hw(wi([m,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(m=wi([m,v.pathnameBase]))}return u}function Nm(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[i,l]=Uw(s.path,s.caseSensitive,s.end),d=r.match(i);if(!d)return null;let m=d[0],u=m.replace(/(.)\/+$/,"$1"),f=d.slice(1);return{params:l.reduce((p,{paramName:j,isOptional:v},w)=>{if(j==="*"){let E=f[w]||"";u=m.slice(0,m.length-E.length).replace(/(.)\/+$/,"$1")}const k=f[w];return v&&!k?p[j]=void 0:p[j]=(k||"").replace(/%2F/g,"/"),p},{}),pathname:m,pathnameBase:u,pattern:s}}function Uw(s,r=!1,i=!0){Fa(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let l=[],d="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,g)=>(l.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(l.push({paramName:"*"}),d+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?d+="\\/*$":s!==""&&s!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,r?void 0:"i"),l]}function Iw(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Fa(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),s}}function Ln(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,l=s.charAt(i);return l&&l!=="/"?null:s.slice(i)||"/"}function Vw({basename:s,pathname:r}){return r==="/"?s:wi([s,r])}var Bw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pm=s=>Bw.test(s);function qw(s,r="/"){let{pathname:i,search:l="",hash:d=""}=typeof s=="string"?Bl(s):s,m;if(i)if(Pm(i))m=i;else{if(i.includes("//")){let u=i;i=i.replace(/\/\/+/g,"/"),Fa(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${i}`)}i.startsWith("/")?m=wb(i.substring(1),"/"):m=wb(i,r)}else m=r;return{pathname:m,search:Gw(l),hash:Qw(d)}}function wb(s,r){let i=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(d=>{d===".."?i.length>1&&i.pop():d!=="."&&i.push(d)}),i.length>1?i.join("/"):"/"}function Tf(s,r,i,l){return`Cannot include a '${s}' character in a manually specified \`to.${r}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ej(s){return s.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function kh(s){let r=Ej(s);return r.map((i,l)=>l===r.length-1?i.pathname:i.pathnameBase)}function Dh(s,r,i,l=!1){let d;typeof s=="string"?d=Bl(s):(d={...s},Ds(!d.pathname||!d.pathname.includes("?"),Tf("?","pathname","search",d)),Ds(!d.pathname||!d.pathname.includes("#"),Tf("#","pathname","hash",d)),Ds(!d.search||!d.search.includes("#"),Tf("#","search","hash",d)));let m=s===""||d.pathname==="",u=m?"/":d.pathname,f;if(u==null)f=i;else{let v=r.length-1;if(!l&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),v-=1;d.pathname=w.join("/")}f=v>=0?r[v]:"/"}let g=qw(d,f),p=u&&u!=="/"&&u.endsWith("/"),j=(m||u===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(p||j)&&(g.pathname+="/"),g}var wi=s=>s.join("/").replace(/\/\/+/g,"/"),Hw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Gw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Qw=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Om=class{constructor(s,r,i,l=!1){this.status=s,this.statusText=r||"",this.internal=l,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function Ed(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function $d(s){return s.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Ll=Symbol("Uninstrumented");function Yw(s,r){let i={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};s.forEach(d=>d({id:r.id,index:r.index,path:r.path,instrument(m){let u=Object.keys(i);for(let f of u)m[f]&&i[f].push(m[f])}}));let l={};if(typeof r.lazy=="function"&&i.lazy.length>0){let d=Jo(i.lazy,r.lazy,()=>{});d&&(l.lazy=d)}if(typeof r.lazy=="object"){let d=r.lazy;["middleware","loader","action"].forEach(m=>{let u=d[m],f=i[`lazy.${m}`];if(typeof u=="function"&&f.length>0){let g=Jo(f,u,()=>{});g&&(l.lazy=Object.assign(l.lazy||{},{[m]:g}))}})}return["loader","action"].forEach(d=>{let m=r[d];if(typeof m=="function"&&i[d].length>0){let u=m[Ll]??m,f=Jo(i[d],u,(...g)=>Sb(g[0]));f&&(f[Ll]=u,l[d]=f)}}),r.middleware&&r.middleware.length>0&&i.middleware.length>0&&(l.middleware=r.middleware.map(d=>{let m=d[Ll]??d,u=Jo(i.middleware,m,(...f)=>Sb(f[0]));return u?(u[Ll]=m,u):d})),l}function Ww(s,r){let i={navigate:[],fetch:[]};if(r.forEach(l=>l({instrument(d){let m=Object.keys(d);for(let u of m)d[u]&&i[u].push(d[u])}})),i.navigate.length>0){let l=s.navigate[Ll]??s.navigate,d=Jo(i.navigate,l,(...m)=>{let[u,f]=m;return{to:typeof u=="number"||typeof u=="string"?u:u?Ai(u):".",...Cb(s,f??{})}});d&&(d[Ll]=l,s.navigate=d)}if(i.fetch.length>0){let l=s.fetch[Ll]??s.fetch,d=Jo(i.fetch,l,(...m)=>{let[u,,f,g]=m;return{href:f??".",fetcherKey:u,...Cb(s,g??{})}});d&&(d[Ll]=l,s.fetch=d)}return s}function Jo(s,r,i){return s.length===0?null:async(...l)=>{let d=await Tj(s,i(...l),()=>r(...l),s.length-1);if(d.type==="error")throw d.value;return d.value}}async function Tj(s,r,i,l){let d=s[l],m;if(d){let u,f=async()=>(u?console.error("You cannot call instrumented handlers more than once"):u=Tj(s,r,i,l-1),m=await u,Ds(m,"Expected a result"),m.type==="error"&&m.value instanceof Error?{status:"error",error:m.value}:{status:"success",error:void 0});try{await d(f,r)}catch(g){console.error("An instrumentation function threw an error:",g)}u||await f(),await u}else try{m={type:"success",value:await i()}}catch(u){m={type:"error",value:u}}return m||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Sb(s){let{request:r,context:i,params:l,unstable_pattern:d}=s;return{request:Zw(r),params:{...l},unstable_pattern:d,context:Jw(i)}}function Cb(s,r){return{currentUrl:Ai(s.state.location),..."formMethod"in r?{formMethod:r.formMethod}:{},..."formEncType"in r?{formEncType:r.formEncType}:{},..."formData"in r?{formData:r.formData}:{},..."body"in r?{body:r.body}:{}}}function Zw(s){return{method:s.method,url:s.url,headers:{get:(...r)=>s.headers.get(...r)}}}function Jw(s){if(Xw(s)){let r={...s};return Object.freeze(r),r}else return{get:r=>s.get(r)}}var Kw=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xw(s){if(s===null||typeof s!="object")return!1;const r=Object.getPrototypeOf(s);return r===Object.prototype||r===null||Object.getOwnPropertyNames(r).sort().join("\0")===Kw}var kj=["POST","PUT","PATCH","DELETE"],e2=new Set(kj),t2=["GET",...kj],s2=new Set(t2),a2=new Set([301,302,303,307,308]),r2=new Set([307,308]),kf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},n2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},dd={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},i2=s=>({hasErrorBoundary:!!s.hasErrorBoundary}),Dj="remix-router-transitions",Pj=Symbol("ResetLoaderData");function l2(s){const r=s.window?s.window:typeof window<"u"?window:void 0,i=typeof r<"u"&&typeof r.document<"u"&&typeof r.document.createElement<"u";Ds(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let l=s.hydrationRouteProperties||[],d=s.mapRouteProperties||i2,m=d;if(s.unstable_instrumentations){let ee=s.unstable_instrumentations;m=xe=>({...d(xe),...Yw(ee.map(ke=>ke.route).filter(Boolean),xe)})}let u={},f=Ad(s.routes,m,void 0,u),g,p=s.basename||"/";p.startsWith("/")||(p=`/${p}`);let j=s.dataStrategy||m2,v={...s.future},w=null,k=new Set,E=null,T=null,F=null,L=s.hydrationData!=null,M=Ml(f,s.history.location,p),V=!1,le=null,G;if(M==null&&!s.patchRoutesOnNavigation){let ee=On(404,{pathname:s.history.location.pathname}),{matches:xe,route:ke}=rm(f);G=!0,M=xe,le={[ke.id]:ee}}else if(M&&!s.hydrationData&&er(M,f,s.history.location.pathname).active&&(M=null),M)if(M.some(ee=>ee.route.lazy))G=!1;else if(!M.some(ee=>Ph(ee.route)))G=!0;else{let ee=s.hydrationData?s.hydrationData.loaderData:null,xe=s.hydrationData?s.hydrationData.errors:null;if(xe){let ke=M.findIndex(st=>xe[st.route.id]!==void 0);G=M.slice(0,ke+1).every(st=>!Xf(st.route,ee,xe))}else G=M.every(ke=>!Xf(ke.route,ee,xe))}else{G=!1,M=[];let ee=er(null,f,s.history.location.pathname);ee.active&&ee.matches&&(V=!0,M=ee.matches)}let z,P={historyAction:s.history.action,location:s.history.location,matches:M,initialized:G,navigation:kf,restoreScrollPosition:s.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||le,fetchers:new Map,blockers:new Map},J="POP",W=null,oe=!1,ce,pe=!1,qe=new Map,R=null,Y=!1,_=!1,X=new Set,Q=new Map,ne=0,Ne=-1,C=new Map,H=new Set,re=new Map,je=new Map,ge=new Set,O=new Map,I,de=null;function we(){if(w=s.history.listen(({action:ee,location:xe,delta:ke})=>{if(I){I(),I=void 0;return}Fa(O.size===0||ke!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let st=ws({currentLocation:P.location,nextLocation:xe,historyAction:ee});if(st&&ke!=null){let nt=new Promise(Mt=>{I=Mt});s.history.go(ke*-1),bt(st,{state:"blocked",location:xe,proceed(){bt(st,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),nt.then(()=>s.history.go(ke))},reset(){let Mt=new Map(P.blockers);Mt.set(st,dd),ue({blockers:Mt})}}),W==null||W.resolve(),W=null;return}return tt(ee,xe)}),i){T2(r,qe);let ee=()=>k2(r,qe);r.addEventListener("pagehide",ee),R=()=>r.removeEventListener("pagehide",ee)}return P.initialized||tt("POP",P.location,{initialHydration:!0}),z}function Ce(){w&&w(),R&&R(),k.clear(),ce&&ce.abort(),P.fetchers.forEach((ee,xe)=>hs(xe)),P.blockers.forEach((ee,xe)=>mt(xe))}function Ge(ee){return k.add(ee),()=>k.delete(ee)}function ue(ee,xe={}){ee.matches&&(ee.matches=ee.matches.map(nt=>{let Mt=u[nt.route.id],lt=nt.route;return lt.element!==Mt.element||lt.errorElement!==Mt.errorElement||lt.hydrateFallbackElement!==Mt.hydrateFallbackElement?{...nt,route:Mt}:nt})),P={...P,...ee};let ke=[],st=[];P.fetchers.forEach((nt,Mt)=>{nt.state==="idle"&&(ge.has(Mt)?ke.push(Mt):st.push(Mt))}),ge.forEach(nt=>{!P.fetchers.has(nt)&&!Q.has(nt)&&ke.push(nt)}),[...k].forEach(nt=>nt(P,{deletedFetchers:ke,newErrors:ee.errors??null,viewTransitionOpts:xe.viewTransitionOpts,flushSync:xe.flushSync===!0})),ke.forEach(nt=>hs(nt)),st.forEach(nt=>P.fetchers.delete(nt))}function se(ee,xe,{flushSync:ke}={}){var Ft,Ut;let st=P.actionData!=null&&P.navigation.formMethod!=null&&Tr(P.navigation.formMethod)&&P.navigation.state==="loading"&&((Ft=ee.state)==null?void 0:Ft._isRedirect)!==!0,nt;xe.actionData?Object.keys(xe.actionData).length>0?nt=xe.actionData:nt=null:st?nt=P.actionData:nt=null;let Mt=xe.loaderData?_b(P.loaderData,xe.loaderData,xe.matches||[],xe.errors):P.loaderData,lt=P.blockers;lt.size>0&&(lt=new Map(lt),lt.forEach((as,xs)=>lt.set(xs,dd)));let pt=Y?!1:Ra(ee,xe.matches||P.matches),St=oe===!0||P.navigation.formMethod!=null&&Tr(P.navigation.formMethod)&&((Ut=ee.state)==null?void 0:Ut._isRedirect)!==!0;g&&(f=g,g=void 0),Y||J==="POP"||(J==="PUSH"?s.history.push(ee,ee.state):J==="REPLACE"&&s.history.replace(ee,ee.state));let zt;if(J==="POP"){let as=qe.get(P.location.pathname);as&&as.has(ee.pathname)?zt={currentLocation:P.location,nextLocation:ee}:qe.has(ee.pathname)&&(zt={currentLocation:ee,nextLocation:P.location})}else if(pe){let as=qe.get(P.location.pathname);as?as.add(ee.pathname):(as=new Set([ee.pathname]),qe.set(P.location.pathname,as)),zt={currentLocation:P.location,nextLocation:ee}}ue({...xe,actionData:nt,loaderData:Mt,historyAction:J,location:ee,initialized:!0,navigation:kf,revalidation:"idle",restoreScrollPosition:pt,preventScrollReset:St,blockers:lt},{viewTransitionOpts:zt,flushSync:ke===!0}),J="POP",oe=!1,pe=!1,Y=!1,_=!1,W==null||W.resolve(),W=null,de==null||de.resolve(),de=null}async function Ie(ee,xe){if(W==null||W.resolve(),W=null,typeof ee=="number"){W||(W=Fb());let xs=W.promise;return s.history.go(ee),xs}let ke=Kf(P.location,P.matches,p,ee,xe==null?void 0:xe.fromRouteId,xe==null?void 0:xe.relative),{path:st,submission:nt,error:Mt}=Ab(!1,ke,xe),lt=P.location,pt=Cd(P.location,st,xe&&xe.state);pt={...pt,...s.history.encodeLocation(pt)};let St=xe&&xe.replace!=null?xe.replace:void 0,zt="PUSH";St===!0?zt="REPLACE":St===!1||nt!=null&&Tr(nt.formMethod)&&nt.formAction===P.location.pathname+P.location.search&&(zt="REPLACE");let Ft=xe&&"preventScrollReset"in xe?xe.preventScrollReset===!0:void 0,Ut=(xe&&xe.flushSync)===!0,as=ws({currentLocation:lt,nextLocation:pt,historyAction:zt});if(as){bt(as,{state:"blocked",location:pt,proceed(){bt(as,{state:"proceeding",proceed:void 0,reset:void 0,location:pt}),Ie(ee,xe)},reset(){let xs=new Map(P.blockers);xs.set(as,dd),ue({blockers:xs})}});return}await tt(zt,pt,{submission:nt,pendingError:Mt,preventScrollReset:Ft,replace:xe&&xe.replace,enableViewTransition:xe&&xe.viewTransition,flushSync:Ut})}function Qe(){de||(de=Fb()),wa(),ue({revalidation:"loading"});let ee=de.promise;return P.navigation.state==="submitting"?ee:P.navigation.state==="idle"?(tt(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),ee):(tt(J||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:pe===!0}),ee)}async function tt(ee,xe,ke){ce&&ce.abort(),ce=null,J=ee,Y=(ke&&ke.startUninterruptedRevalidation)===!0,da(P.location,P.matches),oe=(ke&&ke.preventScrollReset)===!0,pe=(ke&&ke.enableViewTransition)===!0;let st=g||f,nt=ke&&ke.overrideNavigation,Mt=ke!=null&&ke.initialHydration&&P.matches&&P.matches.length>0&&!V?P.matches:Ml(st,xe,p),lt=(ke&&ke.flushSync)===!0;if(Mt&&P.initialized&&!_&&j2(P.location,xe)&&!(ke&&ke.submission&&Tr(ke.submission.formMethod))){se(xe,{matches:Mt},{flushSync:lt});return}let pt=er(Mt,st,xe.pathname);if(pt.active&&pt.matches&&(Mt=pt.matches),!Mt){let{error:ra,notFoundMatches:is,route:ms}=Fs(xe.pathname);se(xe,{matches:is,loaderData:{},errors:{[ms.id]:ra}},{flushSync:lt});return}ce=new AbortController;let St=Zo(s.history,xe,ce.signal,ke&&ke.submission),zt=s.getContext?await s.getContext():new jb,Ft;if(ke&&ke.pendingError)Ft=[_l(Mt).route.id,{type:"error",error:ke.pendingError}];else if(ke&&ke.submission&&Tr(ke.submission.formMethod)){let ra=await ot(St,xe,ke.submission,Mt,zt,pt.active,ke&&ke.initialHydration===!0,{replace:ke.replace,flushSync:lt});if(ra.shortCircuited)return;if(ra.pendingActionResult){let[is,ms]=ra.pendingActionResult;if(mn(ms)&&Ed(ms.error)&&ms.error.status===404){ce=null,se(xe,{matches:ra.matches,loaderData:{},errors:{[is]:ms.error}});return}}Mt=ra.matches||Mt,Ft=ra.pendingActionResult,nt=Df(xe,ke.submission),lt=!1,pt.active=!1,St=Zo(s.history,St.url,St.signal)}let{shortCircuited:Ut,matches:as,loaderData:xs,errors:Ss}=await ze(St,xe,Mt,zt,pt.active,nt,ke&&ke.submission,ke&&ke.fetcherSubmission,ke&&ke.replace,ke&&ke.initialHydration===!0,lt,Ft);Ut||(ce=null,se(xe,{matches:as||Mt,...zb(Ft),loaderData:xs,errors:Ss}))}async function ot(ee,xe,ke,st,nt,Mt,lt,pt={}){wa();let St=A2(xe,ke);if(ue({navigation:St},{flushSync:pt.flushSync===!0}),Mt){let Ut=await ir(st,xe.pathname,ee.signal);if(Ut.type==="aborted")return{shortCircuited:!0};if(Ut.type==="error"){if(Ut.partialMatches.length===0){let{matches:xs,route:Ss}=rm(f);return{matches:xs,pendingActionResult:[Ss.id,{type:"error",error:Ut.error}]}}let as=_l(Ut.partialMatches).route.id;return{matches:Ut.partialMatches,pendingActionResult:[as,{type:"error",error:Ut.error}]}}else if(Ut.matches)st=Ut.matches;else{let{notFoundMatches:as,error:xs,route:Ss}=Fs(xe.pathname);return{matches:as,pendingActionResult:[Ss.id,{type:"error",error:xs}]}}}let zt,Ft=pm(st,xe);if(!Ft.route.action&&!Ft.route.lazy)zt={type:"error",error:On(405,{method:ee.method,pathname:xe.pathname,routeId:Ft.route.id})};else{let Ut=nc(m,u,ee,st,Ft,lt?[]:l,nt),as=await Gs(ee,Ut,nt,null);if(zt=as[Ft.route.id],!zt){for(let xs of st)if(as[xs.route.id]){zt=as[xs.route.id];break}}if(ee.signal.aborted)return{shortCircuited:!0}}if(oo(zt)){let Ut;return pt&&pt.replace!=null?Ut=pt.replace:Ut=Ob(zt.response.headers.get("Location"),new URL(ee.url),p)===P.location.pathname+P.location.search,await Vt(ee,zt,!0,{submission:ke,replace:Ut}),{shortCircuited:!0}}if(mn(zt)){let Ut=_l(st,Ft.route.id);return(pt&&pt.replace)!==!0&&(J="PUSH"),{matches:st,pendingActionResult:[Ut.route.id,zt,Ft.route.id]}}return{matches:st,pendingActionResult:[Ft.route.id,zt]}}async function ze(ee,xe,ke,st,nt,Mt,lt,pt,St,zt,Ft,Ut){let as=Mt||Df(xe,lt),xs=lt||pt||$b(as),Ss=!Y&&!zt;if(nt){if(Ss){let Cs=Ot(Ut);ue({navigation:as,...Cs!==void 0?{actionData:Cs}:{}},{flushSync:Ft})}let Xt=await ir(ke,xe.pathname,ee.signal);if(Xt.type==="aborted")return{shortCircuited:!0};if(Xt.type==="error"){if(Xt.partialMatches.length===0){let{matches:Ma,route:ia}=rm(f);return{matches:Ma,loaderData:{},errors:{[ia.id]:Xt.error}}}let Cs=_l(Xt.partialMatches).route.id;return{matches:Xt.partialMatches,loaderData:{},errors:{[Cs]:Xt.error}}}else if(Xt.matches)ke=Xt.matches;else{let{error:Cs,notFoundMatches:Ma,route:ia}=Fs(xe.pathname);return{matches:Ma,loaderData:{},errors:{[ia.id]:Cs}}}}let ra=g||f,{dsMatches:is,revalidatingFetchers:ms}=Eb(ee,st,m,u,s.history,P,ke,xs,xe,zt?[]:l,zt===!0,_,X,ge,re,H,ra,p,s.patchRoutesOnNavigation!=null,Ut);if(Ne=++ne,!s.dataStrategy&&!is.some(Xt=>Xt.shouldLoad)&&!is.some(Xt=>Xt.route.middleware&&Xt.route.middleware.length>0)&&ms.length===0){let Xt=rs();return se(xe,{matches:ke,loaderData:{},errors:Ut&&mn(Ut[1])?{[Ut[0]]:Ut[1].error}:null,...zb(Ut),...Xt?{fetchers:new Map(P.fetchers)}:{}},{flushSync:Ft}),{shortCircuited:!0}}if(Ss){let Xt={};if(!nt){Xt.navigation=as;let Cs=Ot(Ut);Cs!==void 0&&(Xt.actionData=Cs)}ms.length>0&&(Xt.fetchers=_t(ms)),ue(Xt,{flushSync:Ft})}ms.forEach(Xt=>{Qt(Xt.key),Xt.controller&&Q.set(Xt.key,Xt.controller)});let ds=()=>ms.forEach(Xt=>Qt(Xt.key));ce&&ce.signal.addEventListener("abort",ds);let{loaderResults:lr,fetcherResults:na}=await Ns(is,ms,ee,st);if(ee.signal.aborted)return{shortCircuited:!0};ce&&ce.signal.removeEventListener("abort",ds),ms.forEach(Xt=>Q.delete(Xt.key));let fr=nm(lr);if(fr)return await Vt(ee,fr.result,!0,{replace:St}),{shortCircuited:!0};if(fr=nm(na),fr)return H.add(fr.key),await Vt(ee,fr.result,!0,{replace:St}),{shortCircuited:!0};let{loaderData:yr,errors:Xs}=Mb(P,ke,lr,Ut,ms,na);zt&&P.errors&&(Xs={...P.errors,...Xs});let tr=rs(),en=Bs(Ne),Qs=tr||en||ms.length>0;return{matches:ke,loaderData:yr,errors:Xs,...Qs?{fetchers:new Map(P.fetchers)}:{}}}function Ot(ee){if(ee&&!mn(ee[1]))return{[ee[0]]:ee[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function _t(ee){return ee.forEach(xe=>{let ke=P.fetchers.get(xe.key),st=ud(void 0,ke?ke.data:void 0);P.fetchers.set(xe.key,st)}),new Map(P.fetchers)}async function Dt(ee,xe,ke,st){Qt(ee);let nt=(st&&st.flushSync)===!0,Mt=g||f,lt=Kf(P.location,P.matches,p,ke,xe,st==null?void 0:st.relative),pt=Ml(Mt,lt,p),St=er(pt,Mt,lt);if(St.active&&St.matches&&(pt=St.matches),!pt){gt(ee,xe,On(404,{pathname:lt}),{flushSync:nt});return}let{path:zt,submission:Ft,error:Ut}=Ab(!0,lt,st);if(Ut){gt(ee,xe,Ut,{flushSync:nt});return}let as=s.getContext?await s.getContext():new jb,xs=(st&&st.preventScrollReset)===!0;if(Ft&&Tr(Ft.formMethod)){await us(ee,xe,zt,pt,as,St.active,nt,xs,Ft);return}re.set(ee,{routeId:xe,path:zt}),await Ps(ee,xe,zt,pt,as,St.active,nt,xs,Ft)}async function us(ee,xe,ke,st,nt,Mt,lt,pt,St){wa(),re.delete(ee);let zt=P.fetchers.get(ee);fe(ee,E2(St,zt),{flushSync:lt});let Ft=new AbortController,Ut=Zo(s.history,ke,Ft.signal,St);if(Mt){let ys=await ir(st,new URL(Ut.url).pathname,Ut.signal,ee);if(ys.type==="aborted")return;if(ys.type==="error"){gt(ee,xe,ys.error,{flushSync:lt});return}else if(ys.matches)st=ys.matches;else{gt(ee,xe,On(404,{pathname:ke}),{flushSync:lt});return}}let as=pm(st,ke);if(!as.route.action&&!as.route.lazy){let ys=On(405,{method:St.formMethod,pathname:ke,routeId:xe});gt(ee,xe,ys,{flushSync:lt});return}Q.set(ee,Ft);let xs=ne,Ss=nc(m,u,Ut,st,as,l,nt),ra=await Gs(Ut,Ss,nt,ee),is=ra[as.route.id];if(!is){for(let ys of Ss)if(ra[ys.route.id]){is=ra[ys.route.id];break}}if(Ut.signal.aborted){Q.get(ee)===Ft&&Q.delete(ee);return}if(ge.has(ee)){if(oo(is)||mn(is)){fe(ee,Ji(void 0));return}}else{if(oo(is))if(Q.delete(ee),Ne>xs){fe(ee,Ji(void 0));return}else return H.add(ee),fe(ee,ud(St)),Vt(Ut,is,!1,{fetcherSubmission:St,preventScrollReset:pt});if(mn(is)){gt(ee,xe,is.error);return}}let ms=P.navigation.location||P.location,ds=Zo(s.history,ms,Ft.signal),lr=g||f,na=P.navigation.state!=="idle"?Ml(lr,P.navigation.location,p):P.matches;Ds(na,"Didn't find any matches after fetcher action");let fr=++ne;C.set(ee,fr);let yr=ud(St,is.data);P.fetchers.set(ee,yr);let{dsMatches:Xs,revalidatingFetchers:tr}=Eb(ds,nt,m,u,s.history,P,na,St,ms,l,!1,_,X,ge,re,H,lr,p,s.patchRoutesOnNavigation!=null,[as.route.id,is]);tr.filter(ys=>ys.key!==ee).forEach(ys=>{let xa=ys.key,hn=P.fetchers.get(xa),sr=ud(void 0,hn?hn.data:void 0);P.fetchers.set(xa,sr),Qt(xa),ys.controller&&Q.set(xa,ys.controller)}),ue({fetchers:new Map(P.fetchers)});let en=()=>tr.forEach(ys=>Qt(ys.key));Ft.signal.addEventListener("abort",en);let{loaderResults:Qs,fetcherResults:Xt}=await Ns(Xs,tr,ds,nt);if(Ft.signal.aborted)return;if(Ft.signal.removeEventListener("abort",en),C.delete(ee),Q.delete(ee),tr.forEach(ys=>Q.delete(ys.key)),P.fetchers.has(ee)){let ys=Ji(is.data);P.fetchers.set(ee,ys)}let Cs=nm(Qs);if(Cs)return Vt(ds,Cs.result,!1,{preventScrollReset:pt});if(Cs=nm(Xt),Cs)return H.add(Cs.key),Vt(ds,Cs.result,!1,{preventScrollReset:pt});let{loaderData:Ma,errors:ia}=Mb(P,na,Qs,void 0,tr,Xt);Bs(fr),P.navigation.state==="loading"&&fr>Ne?(Ds(J,"Expected pending action"),ce&&ce.abort(),se(P.navigation.location,{matches:na,loaderData:Ma,errors:ia,fetchers:new Map(P.fetchers)})):(ue({errors:ia,loaderData:_b(P.loaderData,Ma,na,ia),fetchers:new Map(P.fetchers)}),_=!1)}async function Ps(ee,xe,ke,st,nt,Mt,lt,pt,St){let zt=P.fetchers.get(ee);fe(ee,ud(St,zt?zt.data:void 0),{flushSync:lt});let Ft=new AbortController,Ut=Zo(s.history,ke,Ft.signal);if(Mt){let ms=await ir(st,new URL(Ut.url).pathname,Ut.signal,ee);if(ms.type==="aborted")return;if(ms.type==="error"){gt(ee,xe,ms.error,{flushSync:lt});return}else if(ms.matches)st=ms.matches;else{gt(ee,xe,On(404,{pathname:ke}),{flushSync:lt});return}}let as=pm(st,ke);Q.set(ee,Ft);let xs=ne,Ss=nc(m,u,Ut,st,as,l,nt),is=(await Gs(Ut,Ss,nt,ee))[as.route.id];if(Q.get(ee)===Ft&&Q.delete(ee),!Ut.signal.aborted){if(ge.has(ee)){fe(ee,Ji(void 0));return}if(oo(is))if(Ne>xs){fe(ee,Ji(void 0));return}else{H.add(ee),await Vt(Ut,is,!1,{preventScrollReset:pt});return}if(mn(is)){gt(ee,xe,is.error);return}fe(ee,Ji(is.data))}}async function Vt(ee,xe,ke,{submission:st,fetcherSubmission:nt,preventScrollReset:Mt,replace:lt}={}){ke||(W==null||W.resolve(),W=null),xe.response.headers.has("X-Remix-Revalidate")&&(_=!0);let pt=xe.response.headers.get("Location");Ds(pt,"Expected a Location header on the redirect Response"),pt=Ob(pt,new URL(ee.url),p);let St=Cd(P.location,pt,{_isRedirect:!0});if(i){let Ss=!1;if(xe.response.headers.has("X-Remix-Reload-Document"))Ss=!0;else if(Pm(pt)){const ra=Sj(pt,!0);Ss=ra.origin!==r.location.origin||Ln(ra.pathname,p)==null}if(Ss){lt?r.location.replace(pt):r.location.assign(pt);return}}ce=null;let zt=lt===!0||xe.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ft,formAction:Ut,formEncType:as}=P.navigation;!st&&!nt&&Ft&&Ut&&as&&(st=$b(P.navigation));let xs=st||nt;if(r2.has(xe.response.status)&&xs&&Tr(xs.formMethod))await tt(zt,St,{submission:{...xs,formAction:pt},preventScrollReset:Mt||oe,enableViewTransition:ke?pe:void 0});else{let Ss=Df(St,st);await tt(zt,St,{overrideNavigation:Ss,fetcherSubmission:nt,preventScrollReset:Mt||oe,enableViewTransition:ke?pe:void 0})}}async function Gs(ee,xe,ke,st){let nt,Mt={};try{nt=await f2(j,ee,xe,st,ke,!1)}catch(lt){return xe.filter(pt=>pt.shouldLoad).forEach(pt=>{Mt[pt.route.id]={type:"error",error:lt}}),Mt}if(ee.signal.aborted)return Mt;for(let[lt,pt]of Object.entries(nt))if(S2(pt)){let St=pt.result;Mt[lt]={type:"redirect",response:b2(St,ee,lt,xe,p)}}else Mt[lt]=await g2(pt);return Mt}async function Ns(ee,xe,ke,st){let nt=Gs(ke,ee,st,null),Mt=Promise.all(xe.map(async St=>{if(St.matches&&St.match&&St.request&&St.controller){let Ft=(await Gs(St.request,St.matches,st,St.key))[St.match.route.id];return{[St.key]:Ft}}else return Promise.resolve({[St.key]:{type:"error",error:On(404,{pathname:St.path})}})})),lt=await nt,pt=(await Mt).reduce((St,zt)=>Object.assign(St,zt),{});return{loaderResults:lt,fetcherResults:pt}}function wa(){_=!0,re.forEach((ee,xe)=>{Q.has(xe)&&X.add(xe),Qt(xe)})}function fe(ee,xe,ke={}){P.fetchers.set(ee,xe),ue({fetchers:new Map(P.fetchers)},{flushSync:(ke&&ke.flushSync)===!0})}function gt(ee,xe,ke,st={}){let nt=_l(P.matches,xe);hs(ee),ue({errors:{[nt.route.id]:ke},fetchers:new Map(P.fetchers)},{flushSync:(st&&st.flushSync)===!0})}function kt(ee){return je.set(ee,(je.get(ee)||0)+1),ge.has(ee)&&ge.delete(ee),P.fetchers.get(ee)||n2}function cs(ee,xe){Qt(ee,xe==null?void 0:xe.reason),fe(ee,Ji(null))}function hs(ee){let xe=P.fetchers.get(ee);Q.has(ee)&&!(xe&&xe.state==="loading"&&C.has(ee))&&Qt(ee),re.delete(ee),C.delete(ee),H.delete(ee),ge.delete(ee),X.delete(ee),P.fetchers.delete(ee)}function ht(ee){let xe=(je.get(ee)||0)-1;xe<=0?(je.delete(ee),ge.add(ee)):je.set(ee,xe),ue({fetchers:new Map(P.fetchers)})}function Qt(ee,xe){let ke=Q.get(ee);ke&&(ke.abort(xe),Q.delete(ee))}function Vs(ee){for(let xe of ee){let ke=kt(xe),st=Ji(ke.data);P.fetchers.set(xe,st)}}function rs(){let ee=[],xe=!1;for(let ke of H){let st=P.fetchers.get(ke);Ds(st,`Expected fetcher: ${ke}`),st.state==="loading"&&(H.delete(ke),ee.push(ke),xe=!0)}return Vs(ee),xe}function Bs(ee){let xe=[];for(let[ke,st]of C)if(st<ee){let nt=P.fetchers.get(ke);Ds(nt,`Expected fetcher: ${ke}`),nt.state==="loading"&&(Qt(ke),C.delete(ke),xe.push(ke))}return Vs(xe),xe.length>0}function Be(ee,xe){let ke=P.blockers.get(ee)||dd;return O.get(ee)!==xe&&O.set(ee,xe),ke}function mt(ee){P.blockers.delete(ee),O.delete(ee)}function bt(ee,xe){let ke=P.blockers.get(ee)||dd;Ds(ke.state==="unblocked"&&xe.state==="blocked"||ke.state==="blocked"&&xe.state==="blocked"||ke.state==="blocked"&&xe.state==="proceeding"||ke.state==="blocked"&&xe.state==="unblocked"||ke.state==="proceeding"&&xe.state==="unblocked",`Invalid blocker state transition: ${ke.state} -> ${xe.state}`);let st=new Map(P.blockers);st.set(ee,xe),ue({blockers:st})}function ws({currentLocation:ee,nextLocation:xe,historyAction:ke}){if(O.size===0)return;O.size>1&&Fa(!1,"A router only supports one blocker at a time");let st=Array.from(O.entries()),[nt,Mt]=st[st.length-1],lt=P.blockers.get(nt);if(!(lt&&lt.state==="proceeding")&&Mt({currentLocation:ee,nextLocation:xe,historyAction:ke}))return nt}function Fs(ee){let xe=On(404,{pathname:ee}),ke=g||f,{matches:st,route:nt}=rm(ke);return{notFoundMatches:st,route:nt,error:xe}}function Ws(ee,xe,ke){if(E=ee,F=xe,T=ke||null,!L&&P.navigation===kf){L=!0;let st=Ra(P.location,P.matches);st!=null&&ue({restoreScrollPosition:st})}return()=>{E=null,F=null,T=null}}function qs(ee,xe){return T&&T(ee,xe.map(st=>kw(st,P.loaderData)))||ee.key}function da(ee,xe){if(E&&F){let ke=qs(ee,xe);E[ke]=F()}}function Ra(ee,xe){if(E){let ke=qs(ee,xe),st=E[ke];if(typeof st=="number")return st}return null}function er(ee,xe,ke){if(s.patchRoutesOnNavigation)if(ee){if(Object.keys(ee[0].params).length>0)return{active:!0,matches:xd(xe,ke,p,!0)}}else return{active:!0,matches:xd(xe,ke,p,!0)||[]};return{active:!1,matches:null}}async function ir(ee,xe,ke,st){if(!s.patchRoutesOnNavigation)return{type:"success",matches:ee};let nt=ee;for(;;){let Mt=g==null,lt=g||f,pt=u;try{await s.patchRoutesOnNavigation({signal:ke,path:xe,matches:nt,fetcherKey:st,patch:(Ft,Ut)=>{ke.aborted||Tb(Ft,Ut,lt,pt,m,!1)}})}catch(Ft){return{type:"error",error:Ft,partialMatches:nt}}finally{Mt&&!ke.aborted&&(f=[...f])}if(ke.aborted)return{type:"aborted"};let St=Ml(lt,xe,p),zt=null;if(St){if(Object.keys(St[0].params).length===0)return{type:"success",matches:St};if(zt=xd(lt,xe,p,!0),!(zt&&nt.length<zt.length&&Xr(nt,zt.slice(0,nt.length))))return{type:"success",matches:St}}if(zt||(zt=xd(lt,xe,p,!0)),!zt||Xr(nt,zt))return{type:"success",matches:null};nt=zt}}function Xr(ee,xe){return ee.length===xe.length&&ee.every((ke,st)=>ke.route.id===xe[st].route.id)}function Ei(ee){u={},g=Ad(ee,m,void 0,u)}function $n(ee,xe,ke=!1){let st=g==null;Tb(ee,xe,g||f,u,m,ke),st&&(f=[...f],ue({}))}return z={get basename(){return p},get future(){return v},get state(){return P},get routes(){return f},get window(){return r},initialize:we,subscribe:Ge,enableScrollRestoration:Ws,navigate:Ie,fetch:Dt,revalidate:Qe,createHref:ee=>s.history.createHref(ee),encodeLocation:ee=>s.history.encodeLocation(ee),getFetcher:kt,resetFetcher:cs,deleteFetcher:ht,dispose:Ce,getBlocker:Be,deleteBlocker:mt,patchRoutes:$n,_internalFetchControllers:Q,_internalSetRoutes:Ei,_internalSetStateDoNotUseOrYouWillBreakYourApp(ee){ue(ee)}},s.unstable_instrumentations&&(z=Ww(z,s.unstable_instrumentations.map(ee=>ee.router).filter(Boolean))),z}function o2(s){return s!=null&&("formData"in s&&s.formData!=null||"body"in s&&s.body!==void 0)}function Kf(s,r,i,l,d,m){let u,f;if(d){u=[];for(let p of r)if(u.push(p),p.route.id===d){f=p;break}}else u=r,f=r[r.length-1];let g=Dh(l||".",kh(u),Ln(s.pathname,i)||s.pathname,m==="path");if(l==null&&(g.search=s.search,g.hash=s.hash),(l==null||l===""||l===".")&&f){let p=Oh(g.search);if(f.route.index&&!p)g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&p){let j=new URLSearchParams(g.search),v=j.getAll("index");j.delete("index"),v.filter(k=>k).forEach(k=>j.append("index",k));let w=j.toString();g.search=w?`?${w}`:""}}return i!=="/"&&(g.pathname=Vw({basename:i,pathname:g.pathname})),Ai(g)}function Ab(s,r,i){if(!i||!o2(i))return{path:r};if(i.formMethod&&!C2(i.formMethod))return{path:r,error:On(405,{method:i.formMethod})};let l=()=>({path:r,error:On(400,{type:"invalid-body"})}),m=(i.formMethod||"get").toUpperCase(),u=Lj(r);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!Tr(m))return l();let v=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((w,[k,E])=>`${w}${k}=${E}
`,""):String(i.body);return{path:r,submission:{formMethod:m,formAction:u,formEncType:i.formEncType,formData:void 0,json:void 0,text:v}}}else if(i.formEncType==="application/json"){if(!Tr(m))return l();try{let v=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:r,submission:{formMethod:m,formAction:u,formEncType:i.formEncType,formData:void 0,json:v,text:void 0}}}catch{return l()}}}Ds(typeof FormData=="function","FormData is not available in this environment");let f,g;if(i.formData)f=th(i.formData),g=i.formData;else if(i.body instanceof FormData)f=th(i.body),g=i.body;else if(i.body instanceof URLSearchParams)f=i.body,g=Rb(f);else if(i.body==null)f=new URLSearchParams,g=new FormData;else try{f=new URLSearchParams(i.body),g=Rb(f)}catch{return l()}let p={formMethod:m,formAction:u,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(Tr(p.formMethod))return{path:r,submission:p};let j=Bl(r);return s&&j.search&&Oh(j.search)&&f.append("index",""),j.search=`?${f}`,{path:Ai(j),submission:p}}function Eb(s,r,i,l,d,m,u,f,g,p,j,v,w,k,E,T,F,L,M,V){var R;let le=V?mn(V[1])?V[1].error:V[1].data:void 0,G=d.createURL(m.location),z=d.createURL(g),P;if(j&&m.errors){let Y=Object.keys(m.errors)[0];P=u.findIndex(_=>_.route.id===Y)}else if(V&&mn(V[1])){let Y=V[0];P=u.findIndex(_=>_.route.id===Y)-1}let J=V?V[1].statusCode:void 0,W=J&&J>=400,oe={currentUrl:G,currentParams:((R=m.matches[0])==null?void 0:R.params)||{},nextUrl:z,nextParams:u[0].params,...f,actionResult:le,actionStatus:J},ce=$d(u),pe=u.map((Y,_)=>{let{route:X}=Y,Q=null;if(P!=null&&_>P?Q=!1:X.lazy?Q=!0:Ph(X)?j?Q=Xf(X,m.loaderData,m.errors):c2(m.loaderData,m.matches[_],Y)&&(Q=!0):Q=!1,Q!==null)return eh(i,l,s,ce,Y,p,r,Q);let ne=W?!1:v||G.pathname+G.search===z.pathname+z.search||G.search!==z.search||d2(m.matches[_],Y),Ne={...oe,defaultShouldRevalidate:ne},C=wm(Y,Ne);return eh(i,l,s,ce,Y,p,r,C,Ne)}),qe=[];return E.forEach((Y,_)=>{if(j||!u.some(je=>je.route.id===Y.routeId)||k.has(_))return;let X=m.fetchers.get(_),Q=X&&X.state!=="idle"&&X.data===void 0,ne=Ml(F,Y.path,L);if(!ne){if(M&&Q)return;qe.push({key:_,routeId:Y.routeId,path:Y.path,matches:null,match:null,request:null,controller:null});return}if(T.has(_))return;let Ne=pm(ne,Y.path),C=new AbortController,H=Zo(d,Y.path,C.signal),re=null;if(w.has(_))w.delete(_),re=nc(i,l,H,ne,Ne,p,r);else if(Q)v&&(re=nc(i,l,H,ne,Ne,p,r));else{let je={...oe,defaultShouldRevalidate:W?!1:v};wm(Ne,je)&&(re=nc(i,l,H,ne,Ne,p,r,je))}re&&qe.push({key:_,routeId:Y.routeId,path:Y.path,matches:re,match:Ne,request:H,controller:C})}),{dsMatches:pe,revalidatingFetchers:qe}}function Ph(s){return s.loader!=null||s.middleware!=null&&s.middleware.length>0}function Xf(s,r,i){if(s.lazy)return!0;if(!Ph(s))return!1;let l=r!=null&&s.id in r,d=i!=null&&i[s.id]!==void 0;return!l&&d?!1:typeof s.loader=="function"&&s.loader.hydrate===!0?!0:!l&&!d}function c2(s,r,i){let l=!r||i.route.id!==r.route.id,d=!s.hasOwnProperty(i.route.id);return l||d}function d2(s,r){let i=s.route.path;return s.pathname!==r.pathname||i!=null&&i.endsWith("*")&&s.params["*"]!==r.params["*"]}function wm(s,r){if(s.route.shouldRevalidate){let i=s.route.shouldRevalidate(r);if(typeof i=="boolean")return i}return r.defaultShouldRevalidate}function Tb(s,r,i,l,d,m){let u;if(s){let p=l[s];Ds(p,`No route found to patch children into: routeId = ${s}`),p.children||(p.children=[]),u=p.children}else u=i;let f=[],g=[];if(r.forEach(p=>{let j=u.find(v=>Oj(p,v));j?g.push({existingRoute:j,newRoute:p}):f.push(p)}),f.length>0){let p=Ad(f,d,[s||"_","patch",String((u==null?void 0:u.length)||"0")],l);u.push(...p)}if(m&&g.length>0)for(let p=0;p<g.length;p++){let{existingRoute:j,newRoute:v}=g[p],w=j,[k]=Ad([v],d,[],{},!0);Object.assign(w,{element:k.element?k.element:w.element,errorElement:k.errorElement?k.errorElement:w.errorElement,hydrateFallbackElement:k.hydrateFallbackElement?k.hydrateFallbackElement:w.hydrateFallbackElement})}}function Oj(s,r){return"id"in s&&"id"in r&&s.id===r.id?!0:s.index===r.index&&s.path===r.path&&s.caseSensitive===r.caseSensitive?(!s.children||s.children.length===0)&&(!r.children||r.children.length===0)?!0:s.children.every((i,l)=>{var d;return(d=r.children)==null?void 0:d.some(m=>Oj(i,m))}):!1}var kb=new WeakMap,Rj=({key:s,route:r,manifest:i,mapRouteProperties:l})=>{let d=i[r.id];if(Ds(d,"No route found in manifest"),!d.lazy||typeof d.lazy!="object")return;let m=d.lazy[s];if(!m)return;let u=kb.get(d);u||(u={},kb.set(d,u));let f=u[s];if(f)return f;let g=(async()=>{let p=Cw(s),v=d[s]!==void 0&&s!=="hasErrorBoundary";if(p)Fa(!p,"Route property "+s+" is not a supported lazy route property. This property will be ignored."),u[s]=Promise.resolve();else if(v)Fa(!1,`Route "${d.id}" has a static property "${s}" defined. The lazy property will be ignored.`);else{let w=await m();w!=null&&(Object.assign(d,{[s]:w}),Object.assign(d,l(d)))}typeof d.lazy=="object"&&(d.lazy[s]=void 0,Object.values(d.lazy).every(w=>w===void 0)&&(d.lazy=void 0))})();return u[s]=g,g},Db=new WeakMap;function u2(s,r,i,l,d){let m=i[s.id];if(Ds(m,"No route found in manifest"),!s.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof s.lazy=="function"){let j=Db.get(m);if(j)return{lazyRoutePromise:j,lazyHandlerPromise:j};let v=(async()=>{Ds(typeof s.lazy=="function","No lazy route function found");let w=await s.lazy(),k={};for(let E in w){let T=w[E];if(T===void 0)continue;let F=Ew(E),M=m[E]!==void 0&&E!=="hasErrorBoundary";F?Fa(!F,"Route property "+E+" is not a supported property to be returned from a lazy route function. This property will be ignored."):M?Fa(!M,`Route "${m.id}" has a static property "${E}" defined but its lazy function is also returning a value for this property. The lazy route property "${E}" will be ignored.`):k[E]=T}Object.assign(m,k),Object.assign(m,{...l(m),lazy:void 0})})();return Db.set(m,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let u=Object.keys(s.lazy),f=[],g;for(let j of u){if(d&&d.includes(j))continue;let v=Rj({key:j,route:s,manifest:i,mapRouteProperties:l});v&&(f.push(v),j===r&&(g=v))}let p=f.length>0?Promise.all(f).then(()=>{}):void 0;return p==null||p.catch(()=>{}),g==null||g.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:g}}async function Pb(s){let r=s.matches.filter(d=>d.shouldLoad),i={};return(await Promise.all(r.map(d=>d.resolve()))).forEach((d,m)=>{i[r[m].route.id]=d}),i}async function m2(s){return s.matches.some(r=>r.route.middleware)?Mj(s,()=>Pb(s)):Pb(s)}function Mj(s,r){return p2(s,r,l=>l,N2,i);function i(l,d,m){if(m)return Promise.resolve(Object.assign(m.value,{[d]:{type:"error",result:l}}));{let{matches:u}=s,f=Math.min(Math.max(u.findIndex(p=>p.route.id===d),0),Math.max(u.findIndex(p=>p.shouldCallHandler()),0)),g=_l(u,u[f].route.id).route.id;return Promise.resolve({[g]:{type:"error",result:l}})}}}async function p2(s,r,i,l,d){let{matches:m,request:u,params:f,context:g,unstable_pattern:p}=s,j=m.flatMap(w=>w.route.middleware?w.route.middleware.map(k=>[w.route.id,k]):[]);return await _j({request:u,params:f,context:g,unstable_pattern:p},j,r,i,l,d)}async function _j(s,r,i,l,d,m,u=0){let{request:f}=s;if(f.signal.aborted)throw f.signal.reason??new Error(`Request aborted: ${f.method} ${f.url}`);let g=r[u];if(!g)return await i();let[p,j]=g,v,w=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await _j(s,r,i,l,d,m,u+1)},v.value}catch(k){return v={value:await m(k,p,v)},v.value}};try{let k=await j(s,w),E=k!=null?l(k):void 0;return d(E)?E:v?E??v.value:(v={value:await w()},v.value)}catch(k){return await m(k,p,v)}}function zj(s,r,i,l,d){let m=Rj({key:"middleware",route:l.route,manifest:r,mapRouteProperties:s}),u=u2(l.route,Tr(i.method)?"action":"loader",r,s,d);return{middleware:m,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function eh(s,r,i,l,d,m,u,f,g=null){let p=!1,j=zj(s,r,i,d,m);return{...d,_lazyPromises:j,shouldLoad:f,shouldRevalidateArgs:g,shouldCallHandler(v){return p=!0,g?typeof v=="boolean"?wm(d,{...g,defaultShouldRevalidate:v}):wm(d,g):f},resolve(v){let{lazy:w,loader:k,middleware:E}=d.route,T=p||f||v&&!Tr(i.method)&&(w||k),F=E&&E.length>0&&!k&&!w;return T&&(Tr(i.method)||!F)?h2({request:i,unstable_pattern:l,match:d,lazyHandlerPromise:j==null?void 0:j.handler,lazyRoutePromise:j==null?void 0:j.route,handlerOverride:v,scopedContext:u}):Promise.resolve({type:"data",result:void 0})}}}function nc(s,r,i,l,d,m,u,f=null){return l.map(g=>g.route.id!==d.route.id?{...g,shouldLoad:!1,shouldRevalidateArgs:f,shouldCallHandler:()=>!1,_lazyPromises:zj(s,r,i,g,m),resolve:()=>Promise.resolve({type:"data",result:void 0})}:eh(s,r,i,$d(l),g,m,u,!0,f))}async function f2(s,r,i,l,d,m){i.some(p=>{var j;return(j=p._lazyPromises)==null?void 0:j.middleware})&&await Promise.all(i.map(p=>{var j;return(j=p._lazyPromises)==null?void 0:j.middleware}));let u={request:r,unstable_pattern:$d(i),params:i[0].params,context:d,matches:i},g=await s({...u,fetcherKey:l,runClientMiddleware:p=>{let j=u;return Mj(j,()=>p({...j,fetcherKey:l,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(i.flatMap(p=>{var j,v;return[(j=p._lazyPromises)==null?void 0:j.handler,(v=p._lazyPromises)==null?void 0:v.route]}))}catch{}return g}async function h2({request:s,unstable_pattern:r,match:i,lazyHandlerPromise:l,lazyRoutePromise:d,handlerOverride:m,scopedContext:u}){let f,g,p=Tr(s.method),j=p?"action":"loader",v=w=>{let k,E=new Promise((L,M)=>k=M);g=()=>k(),s.signal.addEventListener("abort",g);let T=L=>typeof w!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${j}" [routeId: ${i.route.id}]`)):w({request:s,unstable_pattern:r,params:i.params,context:u},...L!==void 0?[L]:[]),F=(async()=>{try{return{type:"data",result:await(m?m(M=>T(M)):T())}}catch(L){return{type:"error",result:L}}})();return Promise.race([F,E])};try{let w=p?i.route.action:i.route.loader;if(l||d)if(w){let k,[E]=await Promise.all([v(w).catch(T=>{k=T}),l,d]);if(k!==void 0)throw k;f=E}else{await l;let k=p?i.route.action:i.route.loader;if(k)[f]=await Promise.all([v(k),d]);else if(j==="action"){let E=new URL(s.url),T=E.pathname+E.search;throw On(405,{method:s.method,pathname:T,routeId:i.route.id})}else return{type:"data",result:void 0}}else if(w)f=await v(w);else{let k=new URL(s.url),E=k.pathname+k.search;throw On(404,{pathname:E})}}catch(w){return{type:"error",result:w}}finally{g&&s.signal.removeEventListener("abort",g)}return f}async function x2(s){let r=s.headers.get("Content-Type");return r&&/\bapplication\/json\b/.test(r)?s.body==null?null:s.json():s.text()}async function g2(s){var l,d,m,u,f;let{result:r,type:i}=s;if($j(r)){let g;try{g=await x2(r)}catch(p){return{type:"error",error:p}}return i==="error"?{type:"error",error:new Om(r.status,r.statusText,g),statusCode:r.status,headers:r.headers}:{type:"data",data:g,statusCode:r.status,headers:r.headers}}return i==="error"?Lb(r)?r.data instanceof Error?{type:"error",error:r.data,statusCode:(l=r.init)==null?void 0:l.status,headers:(d=r.init)!=null&&d.headers?new Headers(r.init.headers):void 0}:{type:"error",error:v2(r),statusCode:Ed(r)?r.status:void 0,headers:(m=r.init)!=null&&m.headers?new Headers(r.init.headers):void 0}:{type:"error",error:r,statusCode:Ed(r)?r.status:void 0}:Lb(r)?{type:"data",data:r.data,statusCode:(u=r.init)==null?void 0:u.status,headers:(f=r.init)!=null&&f.headers?new Headers(r.init.headers):void 0}:{type:"data",data:r}}function b2(s,r,i,l,d){let m=s.headers.get("Location");if(Ds(m,"Redirects returned/thrown from loaders/actions must have a Location header"),!Pm(m)){let u=l.slice(0,l.findIndex(f=>f.route.id===i)+1);m=Kf(new URL(r.url),u,d,m),s.headers.set("Location",m)}return s}function Ob(s,r,i){if(Pm(s)){let l=s,d=l.startsWith("//")?new URL(r.protocol+l):new URL(l),m=Ln(d.pathname,i)!=null;if(d.origin===r.origin&&m)return d.pathname+d.search+d.hash}return s}function Zo(s,r,i,l){let d=s.createURL(Lj(r)).toString(),m={signal:i};if(l&&Tr(l.formMethod)){let{formMethod:u,formEncType:f}=l;m.method=u.toUpperCase(),f==="application/json"?(m.headers=new Headers({"Content-Type":f}),m.body=JSON.stringify(l.json)):f==="text/plain"?m.body=l.text:f==="application/x-www-form-urlencoded"&&l.formData?m.body=th(l.formData):m.body=l.formData}return new Request(d,m)}function th(s){let r=new URLSearchParams;for(let[i,l]of s.entries())r.append(i,typeof l=="string"?l:l.name);return r}function Rb(s){let r=new FormData;for(let[i,l]of s.entries())r.append(i,l);return r}function y2(s,r,i,l=!1,d=!1){let m={},u=null,f,g=!1,p={},j=i&&mn(i[1])?i[1].error:void 0;return s.forEach(v=>{if(!(v.route.id in r))return;let w=v.route.id,k=r[w];if(Ds(!oo(k),"Cannot handle redirect results in processLoaderData"),mn(k)){let E=k.error;if(j!==void 0&&(E=j,j=void 0),u=u||{},d)u[w]=E;else{let T=_l(s,w);u[T.route.id]==null&&(u[T.route.id]=E)}l||(m[w]=Pj),g||(g=!0,f=Ed(k.error)?k.error.status:500),k.headers&&(p[w]=k.headers)}else m[w]=k.data,k.statusCode&&k.statusCode!==200&&!g&&(f=k.statusCode),k.headers&&(p[w]=k.headers)}),j!==void 0&&i&&(u={[i[0]]:j},i[2]&&(m[i[2]]=void 0)),{loaderData:m,errors:u,statusCode:f||200,loaderHeaders:p}}function Mb(s,r,i,l,d,m){let{loaderData:u,errors:f}=y2(r,i,l);return d.filter(g=>!g.matches||g.matches.some(p=>p.shouldLoad)).forEach(g=>{let{key:p,match:j,controller:v}=g;if(v&&v.signal.aborted)return;let w=m[p];if(Ds(w,"Did not find corresponding fetcher result"),mn(w)){let k=_l(s.matches,j==null?void 0:j.route.id);f&&f[k.route.id]||(f={...f,[k.route.id]:w.error}),s.fetchers.delete(p)}else if(oo(w))Ds(!1,"Unhandled fetcher revalidation redirect");else{let k=Ji(w.data);s.fetchers.set(p,k)}}),{loaderData:u,errors:f}}function _b(s,r,i,l){let d=Object.entries(r).filter(([,m])=>m!==Pj).reduce((m,[u,f])=>(m[u]=f,m),{});for(let m of i){let u=m.route.id;if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&m.route.loader&&(d[u]=s[u]),l&&l.hasOwnProperty(u))break}return d}function zb(s){return s?mn(s[1])?{actionData:{}}:{actionData:{[s[0]]:s[1].data}}:{}}function _l(s,r){return(r?s.slice(0,s.findIndex(l=>l.route.id===r)+1):[...s]).reverse().find(l=>l.route.hasErrorBoundary===!0)||s[0]}function rm(s){let r=s.length===1?s[0]:s.find(i=>i.index||!i.path||i.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r}}function On(s,{pathname:r,routeId:i,method:l,type:d,message:m}={}){let u="Unknown Server Error",f="Unknown @remix-run/router error";return s===400?(u="Bad Request",l&&r&&i?f=`You made a ${l} request to "${r}" but did not provide a \`loader\` for route "${i}", so there is no way to handle the request.`:d==="invalid-body"&&(f="Unable to encode submission body")):s===403?(u="Forbidden",f=`Route "${i}" does not match URL "${r}"`):s===404?(u="Not Found",f=`No route matches URL "${r}"`):s===405&&(u="Method Not Allowed",l&&r&&i?f=`You made a ${l.toUpperCase()} request to "${r}" but did not provide an \`action\` for route "${i}", so there is no way to handle the request.`:l&&(f=`Invalid request method "${l.toUpperCase()}"`)),new Om(s||500,u,new Error(f),!0)}function nm(s){let r=Object.entries(s);for(let i=r.length-1;i>=0;i--){let[l,d]=r[i];if(oo(d))return{key:l,result:d}}}function Lj(s){let r=typeof s=="string"?Bl(s):s;return Ai({...r,hash:""})}function j2(s,r){return s.pathname!==r.pathname||s.search!==r.search?!1:s.hash===""?r.hash!=="":s.hash===r.hash?!0:r.hash!==""}function v2(s){var r,i;return new Om(((r=s.init)==null?void 0:r.status)??500,((i=s.init)==null?void 0:i.statusText)??"Internal Server Error",s.data)}function N2(s){return s!=null&&typeof s=="object"&&Object.entries(s).every(([r,i])=>typeof r=="string"&&w2(i))}function w2(s){return s!=null&&typeof s=="object"&&"type"in s&&"result"in s&&(s.type==="data"||s.type==="error")}function S2(s){return $j(s.result)&&a2.has(s.result.status)}function mn(s){return s.type==="error"}function oo(s){return(s&&s.type)==="redirect"}function Lb(s){return typeof s=="object"&&s!=null&&"type"in s&&"data"in s&&"init"in s&&s.type==="DataWithResponseInit"}function $j(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.headers=="object"&&typeof s.body<"u"}function C2(s){return s2.has(s.toUpperCase())}function Tr(s){return e2.has(s.toUpperCase())}function Oh(s){return new URLSearchParams(s).getAll("index").some(r=>r==="")}function pm(s,r){let i=typeof r=="string"?Bl(r).search:r.search;if(s[s.length-1].route.index&&Oh(i||""))return s[s.length-1];let l=Ej(s);return l[l.length-1]}function $b(s){let{formMethod:r,formAction:i,formEncType:l,text:d,formData:m,json:u}=s;if(!(!r||!i||!l)){if(d!=null)return{formMethod:r,formAction:i,formEncType:l,formData:void 0,json:void 0,text:d};if(m!=null)return{formMethod:r,formAction:i,formEncType:l,formData:m,json:void 0,text:void 0};if(u!==void 0)return{formMethod:r,formAction:i,formEncType:l,formData:void 0,json:u,text:void 0}}}function Df(s,r){return r?{state:"loading",location:s,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}:{state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function A2(s,r){return{state:"submitting",location:s,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}}function ud(s,r){return s?{state:"loading",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:r}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function E2(s,r){return{state:"submitting",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:r?r.data:void 0}}function Ji(s){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function T2(s,r){try{let i=s.sessionStorage.getItem(Dj);if(i){let l=JSON.parse(i);for(let[d,m]of Object.entries(l||{}))m&&Array.isArray(m)&&r.set(d,new Set(m||[]))}}catch{}}function k2(s,r){if(r.size>0){let i={};for(let[l,d]of r)i[l]=[...d];try{s.sessionStorage.setItem(Dj,JSON.stringify(i))}catch(l){Fa(!1,`Failed to save applied view transitions in sessionStorage (${l}).`)}}}function Fb(){let s,r,i=new Promise((l,d)=>{s=async m=>{l(m);try{await i}catch{}},r=async m=>{d(m);try{await i}catch{}}});return{promise:i,resolve:s,reject:r}}var go=y.createContext(null);go.displayName="DataRouter";var Fd=y.createContext(null);Fd.displayName="DataRouterState";y.createContext(!1);var Rh=y.createContext({isTransitioning:!1});Rh.displayName="ViewTransition";var Fj=y.createContext(new Map);Fj.displayName="Fetchers";var D2=y.createContext(null);D2.displayName="Await";var ai=y.createContext(null);ai.displayName="Navigation";var Rm=y.createContext(null);Rm.displayName="Location";var ri=y.createContext({outlet:null,matches:[],isDataRoute:!1});ri.displayName="Route";var Mh=y.createContext(null);Mh.displayName="RouteError";function P2(s,{relative:r}={}){Ds(Ud(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:l}=y.useContext(ai),{hash:d,pathname:m,search:u}=Id(s,{relative:r}),f=m;return i!=="/"&&(f=m==="/"?i:wi([i,m])),l.createHref({pathname:f,search:u,hash:d})}function Ud(){return y.useContext(Rm)!=null}function ni(){return Ds(Ud(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Rm).location}var Uj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ij(s){y.useContext(ai).static||y.useLayoutEffect(s)}function nr(){let{isDataRoute:s}=y.useContext(ri);return s?G2():O2()}function O2(){Ds(Ud(),"useNavigate() may be used only in the context of a <Router> component.");let s=y.useContext(go),{basename:r,navigator:i}=y.useContext(ai),{matches:l}=y.useContext(ri),{pathname:d}=ni(),m=JSON.stringify(kh(l)),u=y.useRef(!1);return Ij(()=>{u.current=!0}),y.useCallback((g,p={})=>{if(Fa(u.current,Uj),!u.current)return;if(typeof g=="number"){i.go(g);return}let j=Dh(g,JSON.parse(m),d,p.relative==="path");s==null&&r!=="/"&&(j.pathname=j.pathname==="/"?r:wi([r,j.pathname])),(p.replace?i.replace:i.push)(j,p.state,p)},[r,i,m,d,s])}var R2=y.createContext(null);function M2(s){let r=y.useContext(ri).outlet;return y.useMemo(()=>r&&y.createElement(R2.Provider,{value:s},r),[r,s])}function _h(){let{matches:s}=y.useContext(ri),r=s[s.length-1];return r?r.params:{}}function Id(s,{relative:r}={}){let{matches:i}=y.useContext(ri),{pathname:l}=ni(),d=JSON.stringify(kh(i));return y.useMemo(()=>Dh(s,JSON.parse(d),l,r==="path"),[s,d,l,r])}function _2(s,r,i,l,d){Ds(Ud(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=y.useContext(ai),{matches:u}=y.useContext(ri),f=u[u.length-1],g=f?f.params:{},p=f?f.pathname:"/",j=f?f.pathnameBase:"/",v=f&&f.route;{let M=v&&v.path||"";Vj(p,!v||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let w=ni(),k;k=w;let E=k.pathname||"/",T=E;if(j!=="/"){let M=j.replace(/^\//,"").split("/");T="/"+E.replace(/^\//,"").split("/").slice(M.length).join("/")}let F=Ml(s,{pathname:T});return Fa(v||F!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Fa(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),U2(F&&F.map(M=>Object.assign({},M,{params:Object.assign({},g,M.params),pathname:wi([j,m.encodeLocation?m.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?j:wi([j,m.encodeLocation?m.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),u,i,l,d)}function z2(){let s=H2(),r=Ed(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),i=s instanceof Error?s.stack:null,l="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:l},m={padding:"2px 4px",backgroundColor:l},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:m},"ErrorBoundary")," or"," ",y.createElement("code",{style:m},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},r),i?y.createElement("pre",{style:d},i):null,u)}var L2=y.createElement(z2,null),$2=class extends y.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){this.props.onError?this.props.onError(s,r):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?y.createElement(ri.Provider,{value:this.props.routeContext},y.createElement(Mh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function F2({routeContext:s,match:r,children:i}){let l=y.useContext(go);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(ri.Provider,{value:s},i)}function U2(s,r=[],i=null,l=null,d=null){if(s==null){if(!i)return null;if(i.errors)s=i.matches;else if(r.length===0&&!i.initialized&&i.matches.length>0)s=i.matches;else return null}let m=s,u=i==null?void 0:i.errors;if(u!=null){let j=m.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);Ds(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),m=m.slice(0,Math.min(m.length,j+1))}let f=!1,g=-1;if(i)for(let j=0;j<m.length;j++){let v=m[j];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=j),v.route.id){let{loaderData:w,errors:k}=i,E=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!k||k[v.route.id]===void 0);if(v.route.lazy||E){f=!0,g>=0?m=m.slice(0,g+1):m=[m[0]];break}}}let p=i&&l?(j,v)=>{var w,k;l(j,{location:i.location,params:((k=(w=i.matches)==null?void 0:w[0])==null?void 0:k.params)??{},unstable_pattern:$d(i.matches),errorInfo:v})}:void 0;return m.reduceRight((j,v,w)=>{let k,E=!1,T=null,F=null;i&&(k=u&&v.route.id?u[v.route.id]:void 0,T=v.route.errorElement||L2,f&&(g<0&&w===0?(Vj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,F=null):g===w&&(E=!0,F=v.route.hydrateFallbackElement||null)));let L=r.concat(m.slice(0,w+1)),M=()=>{let V;return k?V=T:E?V=F:v.route.Component?V=y.createElement(v.route.Component,null):v.route.element?V=v.route.element:V=j,y.createElement(F2,{match:v,routeContext:{outlet:j,matches:L,isDataRoute:i!=null},children:V})};return i&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?y.createElement($2,{location:i.location,revalidation:i.revalidation,component:T,error:k,children:M(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:p}):M()},null)}function zh(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function I2(s){let r=y.useContext(go);return Ds(r,zh(s)),r}function V2(s){let r=y.useContext(Fd);return Ds(r,zh(s)),r}function B2(s){let r=y.useContext(ri);return Ds(r,zh(s)),r}function Lh(s){let r=B2(s),i=r.matches[r.matches.length-1];return Ds(i.route.id,`${s} can only be used on routes that contain a unique "id"`),i.route.id}function q2(){return Lh("useRouteId")}function H2(){var l;let s=y.useContext(Mh),r=V2("useRouteError"),i=Lh("useRouteError");return s!==void 0?s:(l=r.errors)==null?void 0:l[i]}function G2(){let{router:s}=I2("useNavigate"),r=Lh("useNavigate"),i=y.useRef(!1);return Ij(()=>{i.current=!0}),y.useCallback(async(d,m={})=>{Fa(i.current,Uj),i.current&&(typeof d=="number"?await s.navigate(d):await s.navigate(d,{fromRouteId:r,...m}))},[s,r])}var Ub={};function Vj(s,r,i){!r&&!Ub[s]&&(Ub[s]=!0,Fa(!1,i))}var Ib={};function Vb(s,r){!s&&!Ib[r]&&(Ib[r]=!0,console.warn(r))}var Q2="useOptimistic",Bb=bw[Q2],Y2=()=>{};function W2(s){return Bb?Bb(s):[s,Y2]}function Z2(s){let r={hasErrorBoundary:s.hasErrorBoundary||s.ErrorBoundary!=null||s.errorElement!=null};return s.Component&&(s.element&&Fa(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(r,{element:y.createElement(s.Component),Component:void 0})),s.HydrateFallback&&(s.hydrateFallbackElement&&Fa(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(r,{hydrateFallbackElement:y.createElement(s.HydrateFallback),HydrateFallback:void 0})),s.ErrorBoundary&&(s.errorElement&&Fa(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(r,{errorElement:y.createElement(s.ErrorBoundary),ErrorBoundary:void 0})),r}var J2=["HydrateFallback","hydrateFallbackElement"],K2=class{constructor(){this.status="pending",this.promise=new Promise((s,r)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",s(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",r(i))}})}};function X2({router:s,flushSync:r,unstable_onError:i,unstable_useTransitions:l}){let[d,m]=y.useState(s.state),[u,f]=W2(d),[g,p]=y.useState(),[j,v]=y.useState({isTransitioning:!1}),[w,k]=y.useState(),[E,T]=y.useState(),[F,L]=y.useState(),M=y.useRef(new Map),V=y.useCallback((P,{deletedFetchers:J,newErrors:W,flushSync:oe,viewTransitionOpts:ce})=>{W&&i&&Object.values(W).forEach(qe=>{var R;return i(qe,{location:P.location,params:((R=P.matches[0])==null?void 0:R.params)??{},unstable_pattern:$d(P.matches)})}),P.fetchers.forEach((qe,R)=>{qe.data!==void 0&&M.current.set(R,qe.data)}),J.forEach(qe=>M.current.delete(qe)),Vb(oe===!1||r!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let pe=s.window!=null&&s.window.document!=null&&typeof s.window.document.startViewTransition=="function";if(Vb(ce==null||pe,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!ce||!pe){r&&oe?r(()=>m(P)):l===!1?m(P):y.startTransition(()=>{l===!0&&f(qe=>qb(qe,P)),m(P)});return}if(r&&oe){r(()=>{E&&(w==null||w.resolve(),E.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:ce.currentLocation,nextLocation:ce.nextLocation})});let qe=s.window.document.startViewTransition(()=>{r(()=>m(P))});qe.finished.finally(()=>{r(()=>{k(void 0),T(void 0),p(void 0),v({isTransitioning:!1})})}),r(()=>T(qe));return}E?(w==null||w.resolve(),E.skipTransition(),L({state:P,currentLocation:ce.currentLocation,nextLocation:ce.nextLocation})):(p(P),v({isTransitioning:!0,flushSync:!1,currentLocation:ce.currentLocation,nextLocation:ce.nextLocation}))},[s.window,r,E,w,l,f,i]);y.useLayoutEffect(()=>s.subscribe(V),[s,V]),y.useEffect(()=>{j.isTransitioning&&!j.flushSync&&k(new K2)},[j]),y.useEffect(()=>{if(w&&g&&s.window){let P=g,J=w.promise,W=s.window.document.startViewTransition(async()=>{l===!1?m(P):y.startTransition(()=>{l===!0&&f(oe=>qb(oe,P)),m(P)}),await J});W.finished.finally(()=>{k(void 0),T(void 0),p(void 0),v({isTransitioning:!1})}),T(W)}},[g,w,s.window,l,f]),y.useEffect(()=>{w&&g&&u.location.key===g.location.key&&w.resolve()},[w,E,u.location,g]),y.useEffect(()=>{!j.isTransitioning&&F&&(p(F.state),v({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}),L(void 0))},[j.isTransitioning,F]);let le=y.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:P=>s.navigate(P),push:(P,J,W)=>s.navigate(P,{state:J,preventScrollReset:W==null?void 0:W.preventScrollReset}),replace:(P,J,W)=>s.navigate(P,{replace:!0,state:J,preventScrollReset:W==null?void 0:W.preventScrollReset})}),[s]),G=s.basename||"/",z=y.useMemo(()=>({router:s,navigator:le,static:!1,basename:G,unstable_onError:i}),[s,le,G,i]);return y.createElement(y.Fragment,null,y.createElement(go.Provider,{value:z},y.createElement(Fd.Provider,{value:u},y.createElement(Fj.Provider,{value:M.current},y.createElement(Rh.Provider,{value:j},y.createElement(aS,{basename:G,location:u.location,navigationType:u.historyAction,navigator:le,unstable_useTransitions:l===!0},y.createElement(eS,{routes:s.routes,future:s.future,state:u,unstable_onError:i})))))),null)}function qb(s,r){return{...s,navigation:r.navigation.state!=="idle"?r.navigation:s.navigation,revalidation:r.revalidation!=="idle"?r.revalidation:s.revalidation,actionData:r.navigation.state!=="submitting"?r.actionData:s.actionData,fetchers:r.fetchers}}var eS=y.memo(tS);function tS({routes:s,future:r,state:i,unstable_onError:l}){return _2(s,void 0,i,l,r)}function sS(s){return M2(s.context)}function aS({basename:s="/",children:r=null,location:i,navigationType:l="POP",navigator:d,static:m=!1,unstable_useTransitions:u}){Ds(!Ud(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=s.replace(/^\/*/,"/"),g=y.useMemo(()=>({basename:f,navigator:d,static:m,unstable_useTransitions:u,future:{}}),[f,d,m,u]);typeof i=="string"&&(i=Bl(i));let{pathname:p="/",search:j="",hash:v="",state:w=null,key:k="default"}=i,E=y.useMemo(()=>{let T=Ln(p,f);return T==null?null:{location:{pathname:T,search:j,hash:v,state:w,key:k},navigationType:l}},[f,p,j,v,w,k,l]);return Fa(E!=null,`<Router basename="${f}"> is not able to match the URL "${p}${j}${v}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:y.createElement(ai.Provider,{value:g},y.createElement(Rm.Provider,{children:r,value:E}))}var fm="get",hm="application/x-www-form-urlencoded";function Mm(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function rS(s){return Mm(s)&&s.tagName.toLowerCase()==="button"}function nS(s){return Mm(s)&&s.tagName.toLowerCase()==="form"}function iS(s){return Mm(s)&&s.tagName.toLowerCase()==="input"}function lS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function oS(s,r){return s.button===0&&(!r||r==="_self")&&!lS(s)}var im=null;function cS(){if(im===null)try{new FormData(document.createElement("form"),0),im=!1}catch{im=!0}return im}var dS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pf(s){return s!=null&&!dS.has(s)?(Fa(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hm}"`),null):s}function uS(s,r){let i,l,d,m,u;if(nS(s)){let f=s.getAttribute("action");l=f?Ln(f,r):null,i=s.getAttribute("method")||fm,d=Pf(s.getAttribute("enctype"))||hm,m=new FormData(s)}else if(rS(s)||iS(s)&&(s.type==="submit"||s.type==="image")){let f=s.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||f.getAttribute("action");if(l=g?Ln(g,r):null,i=s.getAttribute("formmethod")||f.getAttribute("method")||fm,d=Pf(s.getAttribute("formenctype"))||Pf(f.getAttribute("enctype"))||hm,m=new FormData(f,s),!cS()){let{name:p,type:j,value:v}=s;if(j==="image"){let w=p?`${p}.`:"";m.append(`${w}x`,"0"),m.append(`${w}y`,"0")}else p&&m.append(p,v)}}else{if(Mm(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=fm,l=null,d=hm,u=s}return m&&d==="text/plain"&&(u=m,m=void 0),{action:l,method:i.toLowerCase(),encType:d,formData:m,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $h(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function mS(s,r,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return l.pathname==="/"?l.pathname=`_root.${i}`:r&&Ln(l.pathname,r)==="/"?l.pathname=`${r.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function pS(s,r){if(s.id in r)return r[s.id];try{let i=await import(s.module);return r[s.id]=i,i}catch(i){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function hS(s,r,i){let l=await Promise.all(s.map(async d=>{let m=r.routes[d.route.id];if(m){let u=await pS(m,i);return u.links?u.links():[]}return[]}));return yS(l.flat(1).filter(fS).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Hb(s,r,i,l,d,m){let u=(g,p)=>i[p]?g.route.id!==i[p].route.id:!0,f=(g,p)=>{var j;return i[p].pathname!==g.pathname||((j=i[p].route.path)==null?void 0:j.endsWith("*"))&&i[p].params["*"]!==g.params["*"]};return m==="assets"?r.filter((g,p)=>u(g,p)||f(g,p)):m==="data"?r.filter((g,p)=>{var v;let j=l.routes[g.route.id];if(!j||!j.hasLoader)return!1;if(u(g,p)||f(g,p))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:((v=i[0])==null?void 0:v.params)||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function xS(s,r,{includeHydrateFallback:i}={}){return gS(s.map(l=>{let d=r.routes[l.route.id];if(!d)return[];let m=[d.module];return d.clientActionModule&&(m=m.concat(d.clientActionModule)),d.clientLoaderModule&&(m=m.concat(d.clientLoaderModule)),i&&d.hydrateFallbackModule&&(m=m.concat(d.hydrateFallbackModule)),d.imports&&(m=m.concat(d.imports)),m}).flat(1))}function gS(s){return[...new Set(s)]}function bS(s){let r={},i=Object.keys(s).sort();for(let l of i)r[l]=s[l];return r}function yS(s,r){let i=new Set;return new Set(r),s.reduce((l,d)=>{let m=JSON.stringify(bS(d));return i.has(m)||(i.add(m),l.push({key:m,link:d})),l},[])}function Bj(){let s=y.useContext(go);return $h(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function jS(){let s=y.useContext(Fd);return $h(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Fh=y.createContext(void 0);Fh.displayName="FrameworkContext";function qj(){let s=y.useContext(Fh);return $h(s,"You must render this element inside a <HydratedRouter> element"),s}function vS(s,r){let i=y.useContext(Fh),[l,d]=y.useState(!1),[m,u]=y.useState(!1),{onFocus:f,onBlur:g,onMouseEnter:p,onMouseLeave:j,onTouchStart:v}=r,w=y.useRef(null);y.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let T=L=>{L.forEach(M=>{u(M.isIntersecting)})},F=new IntersectionObserver(T,{threshold:.5});return w.current&&F.observe(w.current),()=>{F.disconnect()}}},[s]),y.useEffect(()=>{if(l){let T=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(T)}}},[l]);let k=()=>{d(!0)},E=()=>{d(!1),u(!1)};return i?s!=="intent"?[m,w,{}]:[m,w,{onFocus:md(f,k),onBlur:md(g,E),onMouseEnter:md(p,k),onMouseLeave:md(j,E),onTouchStart:md(v,k)}]:[!1,w,{}]}function md(s,r){return i=>{s&&s(i),i.defaultPrevented||r(i)}}function NS({page:s,...r}){let{router:i}=Bj(),l=y.useMemo(()=>Ml(i.routes,s,i.basename),[i.routes,s,i.basename]);return l?y.createElement(SS,{page:s,matches:l,...r}):null}function wS(s){let{manifest:r,routeModules:i}=qj(),[l,d]=y.useState([]);return y.useEffect(()=>{let m=!1;return hS(s,r,i).then(u=>{m||d(u)}),()=>{m=!0}},[s,r,i]),l}function SS({page:s,matches:r,...i}){let l=ni(),{manifest:d,routeModules:m}=qj(),{basename:u}=Bj(),{loaderData:f,matches:g}=jS(),p=y.useMemo(()=>Hb(s,r,g,d,l,"data"),[s,r,g,d,l]),j=y.useMemo(()=>Hb(s,r,g,d,l,"assets"),[s,r,g,d,l]),v=y.useMemo(()=>{if(s===l.pathname+l.search+l.hash)return[];let E=new Set,T=!1;if(r.forEach(L=>{var V;let M=d.routes[L.route.id];!M||!M.hasLoader||(!p.some(le=>le.route.id===L.route.id)&&L.route.id in f&&((V=m[L.route.id])!=null&&V.shouldRevalidate)||M.hasClientLoader?T=!0:E.add(L.route.id))}),E.size===0)return[];let F=mS(s,u,"data");return T&&E.size>0&&F.searchParams.set("_routes",r.filter(L=>E.has(L.route.id)).map(L=>L.route.id).join(",")),[F.pathname+F.search]},[u,f,l,d,p,r,s,m]),w=y.useMemo(()=>xS(j,d),[j,d]),k=wS(j);return y.createElement(y.Fragment,null,v.map(E=>y.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...i})),w.map(E=>y.createElement("link",{key:E,rel:"modulepreload",href:E,...i})),k.map(({key:E,link:T})=>y.createElement("link",{key:E,nonce:i.nonce,...T})))}function CS(...s){return r=>{s.forEach(i=>{typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var Hj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Hj&&(window.__reactRouterVersion="7.10.1")}catch{}function AS(s,r){return l2({basename:r==null?void 0:r.basename,getContext:r==null?void 0:r.getContext,future:r==null?void 0:r.future,history:vw({window:r==null?void 0:r.window}),hydrationData:ES(),routes:s,mapRouteProperties:Z2,hydrationRouteProperties:J2,dataStrategy:r==null?void 0:r.dataStrategy,patchRoutesOnNavigation:r==null?void 0:r.patchRoutesOnNavigation,window:r==null?void 0:r.window,unstable_instrumentations:r==null?void 0:r.unstable_instrumentations}).initialize()}function ES(){let s=window==null?void 0:window.__staticRouterHydrationData;return s&&s.errors&&(s={...s,errors:TS(s.errors)}),s}function TS(s){if(!s)return null;let r=Object.entries(s),i={};for(let[l,d]of r)if(d&&d.__type==="RouteErrorResponse")i[l]=new Om(d.status,d.statusText,d.data,d.internal===!0);else if(d&&d.__type==="Error"){if(d.__subType){let m=window[d.__subType];if(typeof m=="function")try{let u=new m(d.message);u.stack="",i[l]=u}catch{}}if(i[l]==null){let m=new Error(d.message);m.stack="",i[l]=m}}else i[l]=d;return i}var Gj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ks=y.forwardRef(function({onClick:r,discover:i="render",prefetch:l="none",relative:d,reloadDocument:m,replace:u,state:f,target:g,to:p,preventScrollReset:j,viewTransition:v,...w},k){let{basename:E,unstable_useTransitions:T}=y.useContext(ai),F=typeof p=="string"&&Gj.test(p),L,M=!1;if(typeof p=="string"&&F&&(L=p,Hj))try{let oe=new URL(window.location.href),ce=p.startsWith("//")?new URL(oe.protocol+p):new URL(p),pe=Ln(ce.pathname,E);ce.origin===oe.origin&&pe!=null?p=pe+ce.search+ce.hash:M=!0}catch{Fa(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=P2(p,{relative:d}),[le,G,z]=vS(l,w),P=OS(p,{replace:u,state:f,target:g,preventScrollReset:j,relative:d,viewTransition:v,unstable_useTransitions:T});function J(oe){r&&r(oe),oe.defaultPrevented||P(oe)}let W=y.createElement("a",{...w,...z,href:L||V,onClick:M||m?r:J,ref:CS(k,G),target:g,"data-discover":!F&&i==="render"?"true":void 0});return le&&!F?y.createElement(y.Fragment,null,W,y.createElement(NS,{page:V})):W});ks.displayName="Link";var kS=y.forwardRef(function({"aria-current":r="page",caseSensitive:i=!1,className:l="",end:d=!1,style:m,to:u,viewTransition:f,children:g,...p},j){let v=Id(u,{relative:p.relative}),w=ni(),k=y.useContext(Fd),{navigator:E,basename:T}=y.useContext(ai),F=k!=null&&LS(v)&&f===!0,L=E.encodeLocation?E.encodeLocation(v).pathname:v.pathname,M=w.pathname,V=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;i||(M=M.toLowerCase(),V=V?V.toLowerCase():null,L=L.toLowerCase()),V&&T&&(V=Ln(V,T)||V);const le=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let G=M===L||!d&&M.startsWith(L)&&M.charAt(le)==="/",z=V!=null&&(V===L||!d&&V.startsWith(L)&&V.charAt(L.length)==="/"),P={isActive:G,isPending:z,isTransitioning:F},J=G?r:void 0,W;typeof l=="function"?W=l(P):W=[l,G?"active":null,z?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let oe=typeof m=="function"?m(P):m;return y.createElement(ks,{...p,"aria-current":J,className:W,ref:j,style:oe,to:u,viewTransition:f},typeof g=="function"?g(P):g)});kS.displayName="NavLink";var DS=y.forwardRef(({discover:s="render",fetcherKey:r,navigate:i,reloadDocument:l,replace:d,state:m,method:u=fm,action:f,onSubmit:g,relative:p,preventScrollReset:j,viewTransition:v,...w},k)=>{let{unstable_useTransitions:E}=y.useContext(ai),T=_S(),F=zS(f,{relative:p}),L=u.toLowerCase()==="get"?"get":"post",M=typeof f=="string"&&Gj.test(f),V=le=>{if(g&&g(le),le.defaultPrevented)return;le.preventDefault();let G=le.nativeEvent.submitter,z=(G==null?void 0:G.getAttribute("formmethod"))||u,P=()=>T(G||le.currentTarget,{fetcherKey:r,method:z,navigate:i,replace:d,state:m,relative:p,preventScrollReset:j,viewTransition:v});E&&i!==!1?y.startTransition(()=>P()):P()};return y.createElement("form",{ref:k,method:L,action:F,onSubmit:l?g:V,...w,"data-discover":!M&&s==="render"?"true":void 0})});DS.displayName="Form";function PS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qj(s){let r=y.useContext(go);return Ds(r,PS(s)),r}function OS(s,{target:r,replace:i,state:l,preventScrollReset:d,relative:m,viewTransition:u,unstable_useTransitions:f}={}){let g=nr(),p=ni(),j=Id(s,{relative:m});return y.useCallback(v=>{if(oS(v,r)){v.preventDefault();let w=i!==void 0?i:Ai(p)===Ai(j),k=()=>g(s,{replace:w,state:l,preventScrollReset:d,relative:m,viewTransition:u});f?y.startTransition(()=>k()):k()}},[p,g,j,i,l,r,s,d,m,u,f])}var RS=0,MS=()=>`__${String(++RS)}__`;function _S(){let{router:s}=Qj("useSubmit"),{basename:r}=y.useContext(ai),i=q2(),l=s.fetch,d=s.navigate;return y.useCallback(async(m,u={})=>{let{action:f,method:g,encType:p,formData:j,body:v}=uS(m,r);if(u.navigate===!1){let w=u.fetcherKey||MS();await l(w,i,u.action||f,{preventScrollReset:u.preventScrollReset,formData:j,body:v,formMethod:u.method||g,formEncType:u.encType||p,flushSync:u.flushSync})}else await d(u.action||f,{preventScrollReset:u.preventScrollReset,formData:j,body:v,formMethod:u.method||g,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:i,flushSync:u.flushSync,viewTransition:u.viewTransition})},[l,d,r,i])}function zS(s,{relative:r}={}){let{basename:i}=y.useContext(ai),l=y.useContext(ri);Ds(l,"useFormAction must be used inside a RouteContext");let[d]=l.matches.slice(-1),m={...Id(s||".",{relative:r})},u=ni();if(s==null){m.search=u.search;let f=new URLSearchParams(m.search),g=f.getAll("index");if(g.some(j=>j==="")){f.delete("index"),g.filter(v=>v).forEach(v=>f.append("index",v));let j=f.toString();m.search=j?`?${j}`:""}}return(!s||s===".")&&d.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(m.pathname=m.pathname==="/"?i:wi([i,m.pathname])),Ai(m)}function LS(s,{relative:r}={}){let i=y.useContext(Rh);Ds(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Qj("useViewTransitionState"),d=Id(s,{relative:r});if(!i.isTransitioning)return!1;let m=Ln(i.currentLocation.pathname,l)||i.currentLocation.pathname,u=Ln(i.nextLocation.pathname,l)||i.nextLocation.pathname;return Nm(d.pathname,u)!=null||Nm(d.pathname,m)!=null}var $S=Nj();function Gb(s){return y.createElement(X2,{flushSync:$S.flushSync,...s})}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),US=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,i,l)=>l?l.toUpperCase():i.toLowerCase()),Qb=s=>{const r=US(s);return r.charAt(0).toUpperCase()+r.slice(1)},Yj=(...s)=>s.filter((r,i,l)=>!!r&&r.trim()!==""&&l.indexOf(r)===i).join(" ").trim(),IS=s=>{for(const r in s)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=y.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:m,iconNode:u,...f},g)=>y.createElement("svg",{ref:g,...VS,width:r,height:r,stroke:s,strokeWidth:l?Number(i)*24/Number(r):i,className:Yj("lucide",d),...!m&&!IS(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,j])=>y.createElement(p,j)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(s,r)=>{const i=y.forwardRef(({className:l,...d},m)=>y.createElement(BS,{ref:m,iconNode:r,className:Yj(`lucide-${FS(Qb(s))}`,`lucide-${s}`,l),...d}));return i.displayName=Qb(s),i};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Td=ut("arrow-left",qS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Jr=ut("arrow-right",HS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],QS=ut("badge-check",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yb=ut("ban",YS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ZS=ut("bell",WS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Of=ut("book",JS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Wj=ut("box",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],kd=ut("briefcase",XS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Rn=ut("building-2",e4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Dd=ut("calendar",t4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Xa=ut("check",s4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ic=ut("chevron-down",a4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fl=ut("chevron-left",r4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ha=ut("chevron-right",n4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ts=ut("circle-alert",i4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ya=ut("circle-check-big",l4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_n=ut("circle-check",o4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zj=ut("circle-question-mark",c4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ul=ut("circle-x",d4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],m4=ut("circle",u4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pn=ut("clock",p4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],h4=ut("compass",f4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Uh=ut("copy",x4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],$l=ut("credit-card",g4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ko=ut("dollar-sign",b4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ki=ut("download",y4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],v4=ut("eye-off",j4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kr=ut("eye",N4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],S4=ut("facebook",w4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Jj=ut("file-check",C4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],Wb=ut("file-image",A4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Kr=ut("file-text",E4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],k4=ut("file",T4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],P4=ut("flag",D4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Rf=ut("folder-plus",O4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Kj=ut("funnel",R4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],_4=ut("globe",M4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],L4=ut("heart",z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Xj=ut("house",$4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],vi=ut("image",F4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],gr=ut("info",U4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],V4=ut("instagram",I4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ev=ut("layers",B4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],H4=ut("linkedin",q4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],lm=ut("loader-circle",G4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Kt=ut("loader",Q4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Mf=ut("log-in",Y4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cc=ut("lock",W4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Zb=ut("log-out",Z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],po=ut("mail",J4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ti=ut("map-pin",K4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],e5=ut("menu",X4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Na=ut("package",t5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],a5=ut("palette",s5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],sh=ut("pause",r5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],i5=ut("pen-line",n5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pd=ut("pen",l5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],xm=ut("phone",o5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],co=ut("play",c5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ys=ut("plus",d5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],tv=ut("printer",u5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xi=ut("refresh-cw",m5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Jb=ut("ruler",p5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],dc=ut("save",f5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],x5=ut("scissors",h5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],b5=ut("scroll-text",g5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fn=ut("search",y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],v5=ut("send",j5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Er=ut("settings",N5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],S5=ut("shield-check",w5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],_m=ut("shield",C5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Kb=ut("shopping-bag",A5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Dn=ut("square-pen",E5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],jd=ut("square",T5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],si=ut("star",k5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],P5=ut("sticker",D5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],R5=ut("target",O5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ta=ut("trash-2",M5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],z5=ut("trending-up",_5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uc=ut("triangle-alert",L5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],xo=ut("truck",$5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],U5=ut("twitter",F5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Xo=ut("upload",I5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],gd=ut("user-plus",V5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ei=ut("user",B5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Rl=ut("users",q5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ns=ut("x",H5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Q5=ut("zap",G5);class Y5 extends y.Component{constructor(r){super(r),this.props=r,this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,i){console.error("ErrorBoundary caught an error:",r,i),this.setState({error:r,errorInfo:i})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx(W5,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children||null}}const W5=({error:s,errorInfo:r})=>e.jsx(Z5,{error:s,errorInfo:r}),Z5=({error:s,errorInfo:r})=>{const i=nr(),l=()=>{i("/"),window.location.reload()},d=()=>{window.location.reload()};return e.jsx("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-lg border border-cream-200 p-8",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(uc,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-cream-600 mb-6",children:"We encountered an unexpected error. Please try refreshing the page or return to the home page."}),s&&!1,e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors font-medium",children:[e.jsx(Xi,{className:"w-4 h-4"}),"Refresh Page"]}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-cream-100 text-cream-700 rounded-lg hover:bg-cream-200 transition-colors font-medium",children:[e.jsx(Xj,{className:"w-4 h-4"}),"Go Home"]})]})]})})})},ba=s=>e.jsx(Y5,{...s}),J5="modulepreload",K5=function(s){return"/"+s},Xb={},Vd=function(r,i,l){let d=Promise.resolve();if(i&&i.length>0){let u=function(p){return Promise.all(p.map(j=>Promise.resolve(j).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));d=u(i.map(p=>{if(p=K5(p),p in Xb)return;Xb[p]=!0;const j=p.endsWith(".css"),v=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const w=document.createElement("link");if(w.rel=j?"stylesheet":J5,j||(w.as="script"),w.crossOrigin="",w.href=p,g&&w.setAttribute("nonce",g),document.head.appendChild(w),j)return new Promise((k,E)=>{w.addEventListener("load",k),w.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${p}`)))})}))}function m(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return d.then(u=>{for(const f of u||[])f.status==="rejected"&&m(f.reason);return r().catch(m)})},Ih=y.createContext({});function Vh(s){const r=y.useRef(null);return r.current===null&&(r.current=s()),r.current}const Bh=typeof window<"u",sv=Bh?y.useLayoutEffect:y.useEffect,zm=y.createContext(null);function qh(s,r){s.indexOf(r)===-1&&s.push(r)}function Hh(s,r){const i=s.indexOf(r);i>-1&&s.splice(i,1)}const el=(s,r,i)=>i>r?r:i<s?s:i;let Gh=()=>{};const tl={},av=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function rv(s){return typeof s=="object"&&s!==null}const nv=s=>/^0[^.\s]+$/u.test(s);function Qh(s){let r;return()=>(r===void 0&&(r=s()),r)}const zn=s=>s,X5=(s,r)=>i=>r(s(i)),Bd=(...s)=>s.reduce(X5),Od=(s,r,i)=>{const l=r-s;return l===0?1:(i-s)/l};class Yh{constructor(){this.subscriptions=[]}add(r){return qh(this.subscriptions,r),()=>Hh(this.subscriptions,r)}notify(r,i,l){const d=this.subscriptions.length;if(d)if(d===1)this.subscriptions[0](r,i,l);else for(let m=0;m<d;m++){const u=this.subscriptions[m];u&&u(r,i,l)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Si=s=>s*1e3,Mn=s=>s/1e3;function iv(s,r){return r?s*(1e3/r):0}const lv=(s,r,i)=>(((1-3*i+3*r)*s+(3*i-6*r))*s+3*r)*s,e3=1e-7,t3=12;function s3(s,r,i,l,d){let m,u,f=0;do u=r+(i-r)/2,m=lv(u,l,d)-s,m>0?i=u:r=u;while(Math.abs(m)>e3&&++f<t3);return u}function qd(s,r,i,l){if(s===r&&i===l)return zn;const d=m=>s3(m,0,1,s,i);return m=>m===0||m===1?m:lv(d(m),r,l)}const ov=s=>r=>r<=.5?s(2*r)/2:(2-s(2*(1-r)))/2,cv=s=>r=>1-s(1-r),dv=qd(.33,1.53,.69,.99),Wh=cv(dv),uv=ov(Wh),mv=s=>(s*=2)<1?.5*Wh(s):.5*(2-Math.pow(2,-10*(s-1))),Zh=s=>1-Math.sin(Math.acos(s)),pv=cv(Zh),fv=ov(Zh),a3=qd(.42,0,1,1),r3=qd(0,0,.58,1),hv=qd(.42,0,.58,1),n3=s=>Array.isArray(s)&&typeof s[0]!="number",xv=s=>Array.isArray(s)&&typeof s[0]=="number",i3={linear:zn,easeIn:a3,easeInOut:hv,easeOut:r3,circIn:Zh,circInOut:fv,circOut:pv,backIn:Wh,backInOut:uv,backOut:dv,anticipate:mv},l3=s=>typeof s=="string",ey=s=>{if(xv(s)){Gh(s.length===4);const[r,i,l,d]=s;return qd(r,i,l,d)}else if(l3(s))return i3[s];return s},om=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function o3(s,r){let i=new Set,l=new Set,d=!1,m=!1;const u=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function g(j){u.has(j)&&(p.schedule(j),s()),j(f)}const p={schedule:(j,v=!1,w=!1)=>{const E=w&&d?i:l;return v&&u.add(j),E.has(j)||E.add(j),j},cancel:j=>{l.delete(j),u.delete(j)},process:j=>{if(f=j,d){m=!0;return}d=!0,[i,l]=[l,i],i.forEach(g),i.clear(),d=!1,m&&(m=!1,p.process(j))}};return p}const c3=40;function gv(s,r){let i=!1,l=!0;const d={delta:0,timestamp:0,isProcessing:!1},m=()=>i=!0,u=om.reduce((V,le)=>(V[le]=o3(m),V),{}),{setup:f,read:g,resolveKeyframes:p,preUpdate:j,update:v,preRender:w,render:k,postRender:E}=u,T=()=>{const V=tl.useManualTiming?d.timestamp:performance.now();i=!1,tl.useManualTiming||(d.delta=l?1e3/60:Math.max(Math.min(V-d.timestamp,c3),1)),d.timestamp=V,d.isProcessing=!0,f.process(d),g.process(d),p.process(d),j.process(d),v.process(d),w.process(d),k.process(d),E.process(d),d.isProcessing=!1,i&&r&&(l=!1,s(T))},F=()=>{i=!0,l=!0,d.isProcessing||s(T)};return{schedule:om.reduce((V,le)=>{const G=u[le];return V[le]=(z,P=!1,J=!1)=>(i||F(),G.schedule(z,P,J)),V},{}),cancel:V=>{for(let le=0;le<om.length;le++)u[om[le]].cancel(V)},state:d,steps:u}}const{schedule:Aa,cancel:Il,state:mr,steps:_f}=gv(typeof requestAnimationFrame<"u"?requestAnimationFrame:zn,!0);let gm;function d3(){gm=void 0}const Zr={now:()=>(gm===void 0&&Zr.set(mr.isProcessing||tl.useManualTiming?mr.timestamp:performance.now()),gm),set:s=>{gm=s,queueMicrotask(d3)}},bv=s=>r=>typeof r=="string"&&r.startsWith(s),yv=bv("--"),u3=bv("var(--"),Jh=s=>u3(s)?m3.test(s.split("/*")[0].trim()):!1,m3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fc={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Rd={...fc,transform:s=>el(0,1,s)},cm={...fc,default:1},vd=s=>Math.round(s*1e5)/1e5,Kh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function p3(s){return s==null}const f3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Xh=(s,r)=>i=>!!(typeof i=="string"&&f3.test(i)&&i.startsWith(s)||r&&!p3(i)&&Object.prototype.hasOwnProperty.call(i,r)),jv=(s,r,i)=>l=>{if(typeof l!="string")return l;const[d,m,u,f]=l.match(Kh);return{[s]:parseFloat(d),[r]:parseFloat(m),[i]:parseFloat(u),alpha:f!==void 0?parseFloat(f):1}},h3=s=>el(0,255,s),zf={...fc,transform:s=>Math.round(h3(s))},uo={test:Xh("rgb","red"),parse:jv("red","green","blue"),transform:({red:s,green:r,blue:i,alpha:l=1})=>"rgba("+zf.transform(s)+", "+zf.transform(r)+", "+zf.transform(i)+", "+vd(Rd.transform(l))+")"};function x3(s){let r="",i="",l="",d="";return s.length>5?(r=s.substring(1,3),i=s.substring(3,5),l=s.substring(5,7),d=s.substring(7,9)):(r=s.substring(1,2),i=s.substring(2,3),l=s.substring(3,4),d=s.substring(4,5),r+=r,i+=i,l+=l,d+=d),{red:parseInt(r,16),green:parseInt(i,16),blue:parseInt(l,16),alpha:d?parseInt(d,16)/255:1}}const ah={test:Xh("#"),parse:x3,transform:uo.transform},Hd=s=>({test:r=>typeof r=="string"&&r.endsWith(s)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${s}`}),Ol=Hd("deg"),Ci=Hd("%"),os=Hd("px"),g3=Hd("vh"),b3=Hd("vw"),ty={...Ci,parse:s=>Ci.parse(s)/100,transform:s=>Ci.transform(s*100)},ec={test:Xh("hsl","hue"),parse:jv("hue","saturation","lightness"),transform:({hue:s,saturation:r,lightness:i,alpha:l=1})=>"hsla("+Math.round(s)+", "+Ci.transform(vd(r))+", "+Ci.transform(vd(i))+", "+vd(Rd.transform(l))+")"},Ba={test:s=>uo.test(s)||ah.test(s)||ec.test(s),parse:s=>uo.test(s)?uo.parse(s):ec.test(s)?ec.parse(s):ah.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?uo.transform(s):ec.transform(s),getAnimatableNone:s=>{const r=Ba.parse(s);return r.alpha=0,Ba.transform(r)}},y3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function j3(s){var r,i;return isNaN(s)&&typeof s=="string"&&(((r=s.match(Kh))==null?void 0:r.length)||0)+(((i=s.match(y3))==null?void 0:i.length)||0)>0}const vv="number",Nv="color",v3="var",N3="var(",sy="${}",w3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Md(s){const r=s.toString(),i=[],l={color:[],number:[],var:[]},d=[];let m=0;const f=r.replace(w3,g=>(Ba.test(g)?(l.color.push(m),d.push(Nv),i.push(Ba.parse(g))):g.startsWith(N3)?(l.var.push(m),d.push(v3),i.push(g)):(l.number.push(m),d.push(vv),i.push(parseFloat(g))),++m,sy)).split(sy);return{values:i,split:f,indexes:l,types:d}}function wv(s){return Md(s).values}function Sv(s){const{split:r,types:i}=Md(s),l=r.length;return d=>{let m="";for(let u=0;u<l;u++)if(m+=r[u],d[u]!==void 0){const f=i[u];f===vv?m+=vd(d[u]):f===Nv?m+=Ba.transform(d[u]):m+=d[u]}return m}}const S3=s=>typeof s=="number"?0:Ba.test(s)?Ba.getAnimatableNone(s):s;function C3(s){const r=wv(s);return Sv(s)(r.map(S3))}const Vl={test:j3,parse:wv,createTransformer:Sv,getAnimatableNone:C3};function Lf(s,r,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?s+(r-s)*6*i:i<1/2?r:i<2/3?s+(r-s)*(2/3-i)*6:s}function A3({hue:s,saturation:r,lightness:i,alpha:l}){s/=360,r/=100,i/=100;let d=0,m=0,u=0;if(!r)d=m=u=i;else{const f=i<.5?i*(1+r):i+r-i*r,g=2*i-f;d=Lf(g,f,s+1/3),m=Lf(g,f,s),u=Lf(g,f,s-1/3)}return{red:Math.round(d*255),green:Math.round(m*255),blue:Math.round(u*255),alpha:l}}function Sm(s,r){return i=>i>0?r:s}const Ta=(s,r,i)=>s+(r-s)*i,$f=(s,r,i)=>{const l=s*s,d=i*(r*r-l)+l;return d<0?0:Math.sqrt(d)},E3=[ah,uo,ec],T3=s=>E3.find(r=>r.test(s));function ay(s){const r=T3(s);if(!r)return!1;let i=r.parse(s);return r===ec&&(i=A3(i)),i}const ry=(s,r)=>{const i=ay(s),l=ay(r);if(!i||!l)return Sm(s,r);const d={...i};return m=>(d.red=$f(i.red,l.red,m),d.green=$f(i.green,l.green,m),d.blue=$f(i.blue,l.blue,m),d.alpha=Ta(i.alpha,l.alpha,m),uo.transform(d))},rh=new Set(["none","hidden"]);function k3(s,r){return rh.has(s)?i=>i<=0?s:r:i=>i>=1?r:s}function D3(s,r){return i=>Ta(s,r,i)}function ex(s){return typeof s=="number"?D3:typeof s=="string"?Jh(s)?Sm:Ba.test(s)?ry:R3:Array.isArray(s)?Cv:typeof s=="object"?Ba.test(s)?ry:P3:Sm}function Cv(s,r){const i=[...s],l=i.length,d=s.map((m,u)=>ex(m)(m,r[u]));return m=>{for(let u=0;u<l;u++)i[u]=d[u](m);return i}}function P3(s,r){const i={...s,...r},l={};for(const d in i)s[d]!==void 0&&r[d]!==void 0&&(l[d]=ex(s[d])(s[d],r[d]));return d=>{for(const m in l)i[m]=l[m](d);return i}}function O3(s,r){const i=[],l={color:0,var:0,number:0};for(let d=0;d<r.values.length;d++){const m=r.types[d],u=s.indexes[m][l[m]],f=s.values[u]??0;i[d]=f,l[m]++}return i}const R3=(s,r)=>{const i=Vl.createTransformer(r),l=Md(s),d=Md(r);return l.indexes.var.length===d.indexes.var.length&&l.indexes.color.length===d.indexes.color.length&&l.indexes.number.length>=d.indexes.number.length?rh.has(s)&&!d.values.length||rh.has(r)&&!l.values.length?k3(s,r):Bd(Cv(O3(l,d),d.values),i):Sm(s,r)};function Av(s,r,i){return typeof s=="number"&&typeof r=="number"&&typeof i=="number"?Ta(s,r,i):ex(s)(s,r)}const M3=s=>{const r=({timestamp:i})=>s(i);return{start:(i=!0)=>Aa.update(r,i),stop:()=>Il(r),now:()=>mr.isProcessing?mr.timestamp:Zr.now()}},Ev=(s,r,i=10)=>{let l="";const d=Math.max(Math.round(r/i),2);for(let m=0;m<d;m++)l+=Math.round(s(m/(d-1))*1e4)/1e4+", ";return`linear(${l.substring(0,l.length-2)})`},Cm=2e4;function tx(s){let r=0;const i=50;let l=s.next(r);for(;!l.done&&r<Cm;)r+=i,l=s.next(r);return r>=Cm?1/0:r}function _3(s,r=100,i){const l=i({...s,keyframes:[0,r]}),d=Math.min(tx(l),Cm);return{type:"keyframes",ease:m=>l.next(d*m).value/r,duration:Mn(d)}}const z3=5;function Tv(s,r,i){const l=Math.max(r-z3,0);return iv(i-s(l),r-l)}const Oa={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ff=.001;function L3({duration:s=Oa.duration,bounce:r=Oa.bounce,velocity:i=Oa.velocity,mass:l=Oa.mass}){let d,m,u=1-r;u=el(Oa.minDamping,Oa.maxDamping,u),s=el(Oa.minDuration,Oa.maxDuration,Mn(s)),u<1?(d=p=>{const j=p*u,v=j*s,w=j-i,k=nh(p,u),E=Math.exp(-v);return Ff-w/k*E},m=p=>{const v=p*u*s,w=v*i+i,k=Math.pow(u,2)*Math.pow(p,2)*s,E=Math.exp(-v),T=nh(Math.pow(p,2),u);return(-d(p)+Ff>0?-1:1)*((w-k)*E)/T}):(d=p=>{const j=Math.exp(-p*s),v=(p-i)*s+1;return-Ff+j*v},m=p=>{const j=Math.exp(-p*s),v=(i-p)*(s*s);return j*v});const f=5/s,g=F3(d,m,f);if(s=Si(s),isNaN(g))return{stiffness:Oa.stiffness,damping:Oa.damping,duration:s};{const p=Math.pow(g,2)*l;return{stiffness:p,damping:u*2*Math.sqrt(l*p),duration:s}}}const $3=12;function F3(s,r,i){let l=i;for(let d=1;d<$3;d++)l=l-s(l)/r(l);return l}function nh(s,r){return s*Math.sqrt(1-r*r)}const U3=["duration","bounce"],I3=["stiffness","damping","mass"];function ny(s,r){return r.some(i=>s[i]!==void 0)}function V3(s){let r={velocity:Oa.velocity,stiffness:Oa.stiffness,damping:Oa.damping,mass:Oa.mass,isResolvedFromDuration:!1,...s};if(!ny(s,I3)&&ny(s,U3))if(s.visualDuration){const i=s.visualDuration,l=2*Math.PI/(i*1.2),d=l*l,m=2*el(.05,1,1-(s.bounce||0))*Math.sqrt(d);r={...r,mass:Oa.mass,stiffness:d,damping:m}}else{const i=L3(s);r={...r,...i,mass:Oa.mass},r.isResolvedFromDuration=!0}return r}function Am(s=Oa.visualDuration,r=Oa.bounce){const i=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:r}:s;let{restSpeed:l,restDelta:d}=i;const m=i.keyframes[0],u=i.keyframes[i.keyframes.length-1],f={done:!1,value:m},{stiffness:g,damping:p,mass:j,duration:v,velocity:w,isResolvedFromDuration:k}=V3({...i,velocity:-Mn(i.velocity||0)}),E=w||0,T=p/(2*Math.sqrt(g*j)),F=u-m,L=Mn(Math.sqrt(g/j)),M=Math.abs(F)<5;l||(l=M?Oa.restSpeed.granular:Oa.restSpeed.default),d||(d=M?Oa.restDelta.granular:Oa.restDelta.default);let V;if(T<1){const G=nh(L,T);V=z=>{const P=Math.exp(-T*L*z);return u-P*((E+T*L*F)/G*Math.sin(G*z)+F*Math.cos(G*z))}}else if(T===1)V=G=>u-Math.exp(-L*G)*(F+(E+L*F)*G);else{const G=L*Math.sqrt(T*T-1);V=z=>{const P=Math.exp(-T*L*z),J=Math.min(G*z,300);return u-P*((E+T*L*F)*Math.sinh(J)+G*F*Math.cosh(J))/G}}const le={calculatedDuration:k&&v||null,next:G=>{const z=V(G);if(k)f.done=G>=v;else{let P=G===0?E:0;T<1&&(P=G===0?Si(E):Tv(V,G,z));const J=Math.abs(P)<=l,W=Math.abs(u-z)<=d;f.done=J&&W}return f.value=f.done?u:z,f},toString:()=>{const G=Math.min(tx(le),Cm),z=Ev(P=>le.next(G*P).value,G,30);return G+"ms "+z},toTransition:()=>{}};return le}Am.applyToOptions=s=>{const r=_3(s,100,Am);return s.ease=r.ease,s.duration=Si(r.duration),s.type="keyframes",s};function ih({keyframes:s,velocity:r=0,power:i=.8,timeConstant:l=325,bounceDamping:d=10,bounceStiffness:m=500,modifyTarget:u,min:f,max:g,restDelta:p=.5,restSpeed:j}){const v=s[0],w={done:!1,value:v},k=J=>f!==void 0&&J<f||g!==void 0&&J>g,E=J=>f===void 0?g:g===void 0||Math.abs(f-J)<Math.abs(g-J)?f:g;let T=i*r;const F=v+T,L=u===void 0?F:u(F);L!==F&&(T=L-v);const M=J=>-T*Math.exp(-J/l),V=J=>L+M(J),le=J=>{const W=M(J),oe=V(J);w.done=Math.abs(W)<=p,w.value=w.done?L:oe};let G,z;const P=J=>{k(w.value)&&(G=J,z=Am({keyframes:[w.value,E(w.value)],velocity:Tv(V,J,w.value),damping:d,stiffness:m,restDelta:p,restSpeed:j}))};return P(0),{calculatedDuration:null,next:J=>{let W=!1;return!z&&G===void 0&&(W=!0,le(J),P(J)),G!==void 0&&J>=G?z.next(J-G):(!W&&le(J),w)}}}function B3(s,r,i){const l=[],d=i||tl.mix||Av,m=s.length-1;for(let u=0;u<m;u++){let f=d(s[u],s[u+1]);if(r){const g=Array.isArray(r)?r[u]||zn:r;f=Bd(g,f)}l.push(f)}return l}function q3(s,r,{clamp:i=!0,ease:l,mixer:d}={}){const m=s.length;if(Gh(m===r.length),m===1)return()=>r[0];if(m===2&&r[0]===r[1])return()=>r[1];const u=s[0]===s[1];s[0]>s[m-1]&&(s=[...s].reverse(),r=[...r].reverse());const f=B3(r,l,d),g=f.length,p=j=>{if(u&&j<s[0])return r[0];let v=0;if(g>1)for(;v<s.length-2&&!(j<s[v+1]);v++);const w=Od(s[v],s[v+1],j);return f[v](w)};return i?j=>p(el(s[0],s[m-1],j)):p}function H3(s,r){const i=s[s.length-1];for(let l=1;l<=r;l++){const d=Od(0,r,l);s.push(Ta(i,1,d))}}function G3(s){const r=[0];return H3(r,s.length-1),r}function Q3(s,r){return s.map(i=>i*r)}function Y3(s,r){return s.map(()=>r||hv).splice(0,s.length-1)}function Nd({duration:s=300,keyframes:r,times:i,ease:l="easeInOut"}){const d=n3(l)?l.map(ey):ey(l),m={done:!1,value:r[0]},u=Q3(i&&i.length===r.length?i:G3(r),s),f=q3(u,r,{ease:Array.isArray(d)?d:Y3(r,d)});return{calculatedDuration:s,next:g=>(m.value=f(g),m.done=g>=s,m)}}const W3=s=>s!==null;function sx(s,{repeat:r,repeatType:i="loop"},l,d=1){const m=s.filter(W3),f=d<0||r&&i!=="loop"&&r%2===1?0:m.length-1;return!f||l===void 0?m[f]:l}const Z3={decay:ih,inertia:ih,tween:Nd,keyframes:Nd,spring:Am};function kv(s){typeof s.type=="string"&&(s.type=Z3[s.type])}class ax{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(r=>{this.resolve=r})}notifyFinished(){this.resolve()}then(r,i){return this.finished.then(r,i)}}const J3=s=>s/100;class rx extends ax{constructor(r){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var l,d;const{motionValue:i}=this.options;i&&i.updatedAt!==Zr.now()&&this.tick(Zr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(d=(l=this.options).onStop)==null||d.call(l))},this.options=r,this.initAnimation(),this.play(),r.autoplay===!1&&this.pause()}initAnimation(){const{options:r}=this;kv(r);const{type:i=Nd,repeat:l=0,repeatDelay:d=0,repeatType:m,velocity:u=0}=r;let{keyframes:f}=r;const g=i||Nd;g!==Nd&&typeof f[0]!="number"&&(this.mixKeyframes=Bd(J3,Av(f[0],f[1])),f=[0,100]);const p=g({...r,keyframes:f});m==="mirror"&&(this.mirroredGenerator=g({...r,keyframes:[...f].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=tx(p));const{calculatedDuration:j}=p;this.calculatedDuration=j,this.resolvedDuration=j+d,this.totalDuration=this.resolvedDuration*(l+1)-d,this.generator=p}updateTime(r){const i=Math.round(r-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(r,i=!1){const{generator:l,totalDuration:d,mixKeyframes:m,mirroredGenerator:u,resolvedDuration:f,calculatedDuration:g}=this;if(this.startTime===null)return l.next(0);const{delay:p=0,keyframes:j,repeat:v,repeatType:w,repeatDelay:k,type:E,onUpdate:T,finalKeyframe:F}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,r):this.speed<0&&(this.startTime=Math.min(r-d/this.speed,this.startTime)),i?this.currentTime=r:this.updateTime(r);const L=this.currentTime-p*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?L<0:L>d;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let V=this.currentTime,le=l;if(v){const J=Math.min(this.currentTime,d)/f;let W=Math.floor(J),oe=J%1;!oe&&J>=1&&(oe=1),oe===1&&W--,W=Math.min(W,v+1),!!(W%2)&&(w==="reverse"?(oe=1-oe,k&&(oe-=k/f)):w==="mirror"&&(le=u)),V=el(0,1,oe)*f}const G=M?{done:!1,value:j[0]}:le.next(V);m&&(G.value=m(G.value));let{done:z}=G;!M&&g!==null&&(z=this.playbackSpeed>=0?this.currentTime>=d:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return P&&E!==ih&&(G.value=sx(j,this.options,F,this.speed)),T&&T(G.value),P&&this.finish(),G}then(r,i){return this.finished.then(r,i)}get duration(){return Mn(this.calculatedDuration)}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+Mn(r)}get time(){return Mn(this.currentTime)}set time(r){var i;r=Si(r),this.currentTime=r,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=r:this.driver&&(this.startTime=this.driver.now()-r/this.playbackSpeed),(i=this.driver)==null||i.start(!1)}get speed(){return this.playbackSpeed}set speed(r){this.updateTime(Zr.now());const i=this.playbackSpeed!==r;this.playbackSpeed=r,i&&(this.time=Mn(this.currentTime))}play(){var d,m;if(this.isStopped)return;const{driver:r=M3,startTime:i}=this.options;this.driver||(this.driver=r(u=>this.tick(u))),(m=(d=this.options).onPlay)==null||m.call(d);const l=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=l):this.holdTime!==null?this.startTime=l-this.holdTime:this.startTime||(this.startTime=i??l),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var r,i;this.notifyFinished(),this.teardown(),this.state="finished",(i=(r=this.options).onComplete)==null||i.call(r)}cancel(){var r,i;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(i=(r=this.options).onCancel)==null||i.call(r)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(r){return this.startTime=0,this.tick(r,!0)}attachTimeline(r){var i;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(i=this.driver)==null||i.stop(),r.observe(this)}}function K3(s){for(let r=1;r<s.length;r++)s[r]??(s[r]=s[r-1])}const mo=s=>s*180/Math.PI,lh=s=>{const r=mo(Math.atan2(s[1],s[0]));return oh(r)},X3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:lh,rotateZ:lh,skewX:s=>mo(Math.atan(s[1])),skewY:s=>mo(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},oh=s=>(s=s%360,s<0&&(s+=360),s),iy=lh,ly=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),oy=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),eC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ly,scaleY:oy,scale:s=>(ly(s)+oy(s))/2,rotateX:s=>oh(mo(Math.atan2(s[6],s[5]))),rotateY:s=>oh(mo(Math.atan2(-s[2],s[0]))),rotateZ:iy,rotate:iy,skewX:s=>mo(Math.atan(s[4])),skewY:s=>mo(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function ch(s){return s.includes("scale")?1:0}function dh(s,r){if(!s||s==="none")return ch(r);const i=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let l,d;if(i)l=eC,d=i;else{const f=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);l=X3,d=f}if(!d)return ch(r);const m=l[r],u=d[1].split(",").map(sC);return typeof m=="function"?m(u):u[m]}const tC=(s,r)=>{const{transform:i="none"}=getComputedStyle(s);return dh(i,r)};function sC(s){return parseFloat(s.trim())}const hc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xc=new Set(hc),cy=s=>s===fc||s===os,aC=new Set(["x","y","z"]),rC=hc.filter(s=>!aC.has(s));function nC(s){const r=[];return rC.forEach(i=>{const l=s.getValue(i);l!==void 0&&(r.push([i,l.get()]),l.set(i.startsWith("scale")?1:0))}),r}const fo={width:({x:s},{paddingLeft:r="0",paddingRight:i="0"})=>s.max-s.min-parseFloat(r)-parseFloat(i),height:({y:s},{paddingTop:r="0",paddingBottom:i="0"})=>s.max-s.min-parseFloat(r)-parseFloat(i),top:(s,{top:r})=>parseFloat(r),left:(s,{left:r})=>parseFloat(r),bottom:({y:s},{top:r})=>parseFloat(r)+(s.max-s.min),right:({x:s},{left:r})=>parseFloat(r)+(s.max-s.min),x:(s,{transform:r})=>dh(r,"x"),y:(s,{transform:r})=>dh(r,"y")};fo.translateX=fo.x;fo.translateY=fo.y;const ho=new Set;let uh=!1,mh=!1,ph=!1;function Dv(){if(mh){const s=Array.from(ho).filter(l=>l.needsMeasurement),r=new Set(s.map(l=>l.element)),i=new Map;r.forEach(l=>{const d=nC(l);d.length&&(i.set(l,d),l.render())}),s.forEach(l=>l.measureInitialState()),r.forEach(l=>{l.render();const d=i.get(l);d&&d.forEach(([m,u])=>{var f;(f=l.getValue(m))==null||f.set(u)})}),s.forEach(l=>l.measureEndState()),s.forEach(l=>{l.suspendedScrollY!==void 0&&window.scrollTo(0,l.suspendedScrollY)})}mh=!1,uh=!1,ho.forEach(s=>s.complete(ph)),ho.clear()}function Pv(){ho.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(mh=!0)})}function iC(){ph=!0,Pv(),Dv(),ph=!1}class nx{constructor(r,i,l,d,m,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...r],this.onComplete=i,this.name=l,this.motionValue=d,this.element=m,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(ho.add(this),uh||(uh=!0,Aa.read(Pv),Aa.resolveKeyframes(Dv))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:r,name:i,element:l,motionValue:d}=this;if(r[0]===null){const m=d==null?void 0:d.get(),u=r[r.length-1];if(m!==void 0)r[0]=m;else if(l&&i){const f=l.readValue(i,u);f!=null&&(r[0]=f)}r[0]===void 0&&(r[0]=u),d&&m===void 0&&d.set(r[0])}K3(r)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(r=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,r),ho.delete(this)}cancel(){this.state==="scheduled"&&(ho.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lC=s=>s.startsWith("--");function oC(s,r,i){lC(r)?s.style.setProperty(r,i):s.style[r]=i}const cC=Qh(()=>window.ScrollTimeline!==void 0),dC={};function uC(s,r){const i=Qh(s);return()=>dC[r]??i()}const Ov=uC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bd=([s,r,i,l])=>`cubic-bezier(${s}, ${r}, ${i}, ${l})`,dy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bd([0,.65,.55,1]),circOut:bd([.55,0,1,.45]),backIn:bd([.31,.01,.66,-.59]),backOut:bd([.33,1.53,.69,.99])};function Rv(s,r){if(s)return typeof s=="function"?Ov()?Ev(s,r):"ease-out":xv(s)?bd(s):Array.isArray(s)?s.map(i=>Rv(i,r)||dy.easeOut):dy[s]}function mC(s,r,i,{delay:l=0,duration:d=300,repeat:m=0,repeatType:u="loop",ease:f="easeOut",times:g}={},p=void 0){const j={[r]:i};g&&(j.offset=g);const v=Rv(f,d);Array.isArray(v)&&(j.easing=v);const w={delay:l,duration:d,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:m+1,direction:u==="reverse"?"alternate":"normal"};return p&&(w.pseudoElement=p),s.animate(j,w)}function Mv(s){return typeof s=="function"&&"applyToOptions"in s}function pC({type:s,...r}){return Mv(s)&&Ov()?s.applyToOptions(r):(r.duration??(r.duration=300),r.ease??(r.ease="easeOut"),r)}class fC extends ax{constructor(r){if(super(),this.finishedTime=null,this.isStopped=!1,!r)return;const{element:i,name:l,keyframes:d,pseudoElement:m,allowFlatten:u=!1,finalKeyframe:f,onComplete:g}=r;this.isPseudoElement=!!m,this.allowFlatten=u,this.options=r,Gh(typeof r.type!="string");const p=pC(r);this.animation=mC(i,l,d,p,m),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!m){const j=sx(d,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(j):oC(i,l,j),this.animation.cancel()}g==null||g(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var r,i;(i=(r=this.animation).finish)==null||i.call(r)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:r}=this;r==="idle"||r==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var r,i;this.isPseudoElement||(i=(r=this.animation).commitStyles)==null||i.call(r)}get duration(){var i,l;const r=((l=(i=this.animation.effect)==null?void 0:i.getComputedTiming)==null?void 0:l.call(i).duration)||0;return Mn(Number(r))}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+Mn(r)}get time(){return Mn(Number(this.animation.currentTime)||0)}set time(r){this.finishedTime=null,this.animation.currentTime=Si(r)}get speed(){return this.animation.playbackRate}set speed(r){r<0&&(this.finishedTime=null),this.animation.playbackRate=r}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(r){this.animation.startTime=r}attachTimeline({timeline:r,observe:i}){var l;return this.allowFlatten&&((l=this.animation.effect)==null||l.updateTiming({easing:"linear"})),this.animation.onfinish=null,r&&cC()?(this.animation.timeline=r,zn):i(this)}}const _v={anticipate:mv,backInOut:uv,circInOut:fv};function hC(s){return s in _v}function xC(s){typeof s.ease=="string"&&hC(s.ease)&&(s.ease=_v[s.ease])}const uy=10;class gC extends fC{constructor(r){xC(r),kv(r),super(r),r.startTime&&(this.startTime=r.startTime),this.options=r}updateMotionValue(r){const{motionValue:i,onUpdate:l,onComplete:d,element:m,...u}=this.options;if(!i)return;if(r!==void 0){i.set(r);return}const f=new rx({...u,autoplay:!1}),g=Si(this.finishedTime??this.time);i.setWithVelocity(f.sample(g-uy).value,f.sample(g).value,uy),f.stop()}}const my=(s,r)=>r==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Vl.test(s)||s==="0")&&!s.startsWith("url("));function bC(s){const r=s[0];if(s.length===1)return!0;for(let i=0;i<s.length;i++)if(s[i]!==r)return!0}function yC(s,r,i,l){const d=s[0];if(d===null)return!1;if(r==="display"||r==="visibility")return!0;const m=s[s.length-1],u=my(d,r),f=my(m,r);return!u||!f?!1:bC(s)||(i==="spring"||Mv(i))&&l}function fh(s){s.duration=0,s.type="keyframes"}const jC=new Set(["opacity","clipPath","filter","transform"]),vC=Qh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function NC(s){var j;const{motionValue:r,name:i,repeatDelay:l,repeatType:d,damping:m,type:u}=s;if(!(((j=r==null?void 0:r.owner)==null?void 0:j.current)instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:p}=r.owner.getProps();return vC()&&i&&jC.has(i)&&(i!=="transform"||!p)&&!g&&!l&&d!=="mirror"&&m!==0&&u!=="inertia"}const wC=40;class SC extends ax{constructor({autoplay:r=!0,delay:i=0,type:l="keyframes",repeat:d=0,repeatDelay:m=0,repeatType:u="loop",keyframes:f,name:g,motionValue:p,element:j,...v}){var E;super(),this.stop=()=>{var T,F;this._animation&&(this._animation.stop(),(T=this.stopTimeline)==null||T.call(this)),(F=this.keyframeResolver)==null||F.cancel()},this.createdAt=Zr.now();const w={autoplay:r,delay:i,type:l,repeat:d,repeatDelay:m,repeatType:u,name:g,motionValue:p,element:j,...v},k=(j==null?void 0:j.KeyframeResolver)||nx;this.keyframeResolver=new k(f,(T,F,L)=>this.onKeyframesResolved(T,F,w,!L),g,p,j),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(r,i,l,d){this.keyframeResolver=void 0;const{name:m,type:u,velocity:f,delay:g,isHandoff:p,onUpdate:j}=l;this.resolvedAt=Zr.now(),yC(r,m,u,f)||((tl.instantAnimations||!g)&&(j==null||j(sx(r,l,i))),r[0]=r[r.length-1],fh(l),l.repeat=0);const w={startTime:d?this.resolvedAt?this.resolvedAt-this.createdAt>wC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...l,keyframes:r},k=!p&&NC(w)?new gC({...w,element:w.motionValue.owner.current}):new rx(w);k.finished.then(()=>this.notifyFinished()).catch(zn),this.pendingTimeline&&(this.stopTimeline=k.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=k}get finished(){return this._animation?this.animation.finished:this._finished}then(r,i){return this.finished.finally(r).then(()=>{})}get animation(){var r;return this._animation||((r=this.keyframeResolver)==null||r.resume(),iC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(r){this.animation.time=r}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(r){this.animation.speed=r}get startTime(){return this.animation.startTime}attachTimeline(r){return this._animation?this.stopTimeline=this.animation.attachTimeline(r):this.pendingTimeline=r,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var r;this._animation&&this.animation.cancel(),(r=this.keyframeResolver)==null||r.cancel()}}const CC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function AC(s){const r=CC.exec(s);if(!r)return[,];const[,i,l,d]=r;return[`--${i??l}`,d]}function zv(s,r,i=1){const[l,d]=AC(s);if(!l)return;const m=window.getComputedStyle(r).getPropertyValue(l);if(m){const u=m.trim();return av(u)?parseFloat(u):u}return Jh(d)?zv(d,r,i+1):d}function ix(s,r){return(s==null?void 0:s[r])??(s==null?void 0:s.default)??s}const Lv=new Set(["width","height","top","left","right","bottom",...hc]),EC={test:s=>s==="auto",parse:s=>s},$v=s=>r=>r.test(s),Fv=[fc,os,Ci,Ol,b3,g3,EC],py=s=>Fv.find($v(s));function TC(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||nv(s):!0}const kC=new Set(["brightness","contrast","saturate","opacity"]);function DC(s){const[r,i]=s.slice(0,-1).split("(");if(r==="drop-shadow")return s;const[l]=i.match(Kh)||[];if(!l)return s;const d=i.replace(l,"");let m=kC.has(r)?1:0;return l!==i&&(m*=100),r+"("+m+d+")"}const PC=/\b([a-z-]*)\(.*?\)/gu,hh={...Vl,getAnimatableNone:s=>{const r=s.match(PC);return r?r.map(DC).join(" "):s}},fy={...fc,transform:Math.round},OC={rotate:Ol,rotateX:Ol,rotateY:Ol,rotateZ:Ol,scale:cm,scaleX:cm,scaleY:cm,scaleZ:cm,skew:Ol,skewX:Ol,skewY:Ol,distance:os,translateX:os,translateY:os,translateZ:os,x:os,y:os,z:os,perspective:os,transformPerspective:os,opacity:Rd,originX:ty,originY:ty,originZ:os},lx={borderWidth:os,borderTopWidth:os,borderRightWidth:os,borderBottomWidth:os,borderLeftWidth:os,borderRadius:os,radius:os,borderTopLeftRadius:os,borderTopRightRadius:os,borderBottomRightRadius:os,borderBottomLeftRadius:os,width:os,maxWidth:os,height:os,maxHeight:os,top:os,right:os,bottom:os,left:os,padding:os,paddingTop:os,paddingRight:os,paddingBottom:os,paddingLeft:os,margin:os,marginTop:os,marginRight:os,marginBottom:os,marginLeft:os,backgroundPositionX:os,backgroundPositionY:os,...OC,zIndex:fy,fillOpacity:Rd,strokeOpacity:Rd,numOctaves:fy},RC={...lx,color:Ba,backgroundColor:Ba,outlineColor:Ba,fill:Ba,stroke:Ba,borderColor:Ba,borderTopColor:Ba,borderRightColor:Ba,borderBottomColor:Ba,borderLeftColor:Ba,filter:hh,WebkitFilter:hh},Uv=s=>RC[s];function Iv(s,r){let i=Uv(s);return i!==hh&&(i=Vl),i.getAnimatableNone?i.getAnimatableNone(r):void 0}const MC=new Set(["auto","none","0"]);function _C(s,r,i){let l=0,d;for(;l<s.length&&!d;){const m=s[l];typeof m=="string"&&!MC.has(m)&&Md(m).values.length&&(d=s[l]),l++}if(d&&i)for(const m of r)s[m]=Iv(i,d)}class zC extends nx{constructor(r,i,l,d,m){super(r,i,l,d,m,!0)}readKeyframes(){const{unresolvedKeyframes:r,element:i,name:l}=this;if(!i||!i.current)return;super.readKeyframes();for(let g=0;g<r.length;g++){let p=r[g];if(typeof p=="string"&&(p=p.trim(),Jh(p))){const j=zv(p,i.current);j!==void 0&&(r[g]=j),g===r.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!Lv.has(l)||r.length!==2)return;const[d,m]=r,u=py(d),f=py(m);if(u!==f)if(cy(u)&&cy(f))for(let g=0;g<r.length;g++){const p=r[g];typeof p=="string"&&(r[g]=parseFloat(p))}else fo[l]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:r,name:i}=this,l=[];for(let d=0;d<r.length;d++)(r[d]===null||TC(r[d]))&&l.push(d);l.length&&_C(r,l,i)}measureInitialState(){const{element:r,unresolvedKeyframes:i,name:l}=this;if(!r||!r.current)return;l==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fo[l](r.measureViewportBox(),window.getComputedStyle(r.current)),i[0]=this.measuredOrigin;const d=i[i.length-1];d!==void 0&&r.getValue(l,d).jump(d,!1)}measureEndState(){var f;const{element:r,name:i,unresolvedKeyframes:l}=this;if(!r||!r.current)return;const d=r.getValue(i);d&&d.jump(this.measuredOrigin,!1);const m=l.length-1,u=l[m];l[m]=fo[i](r.measureViewportBox(),window.getComputedStyle(r.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([g,p])=>{r.getValue(g).set(p)}),this.resolveNoneKeyframes()}}function LC(s,r,i){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let l=document;const d=(i==null?void 0:i[s])??l.querySelectorAll(s);return d?Array.from(d):[]}return Array.from(s)}const Vv=(s,r)=>r&&typeof s=="number"?r.transform(s):s;function Bv(s){return rv(s)&&"offsetHeight"in s}const hy=30,$C=s=>!isNaN(parseFloat(s));class FC{constructor(r,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=l=>{var m;const d=Zr.now();if(this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(l),this.current!==this.prev&&((m=this.events.change)==null||m.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(r),this.owner=i.owner}setCurrent(r){this.current=r,this.updatedAt=Zr.now(),this.canTrackVelocity===null&&r!==void 0&&(this.canTrackVelocity=$C(this.current))}setPrevFrameValue(r=this.current){this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt}onChange(r){return this.on("change",r)}on(r,i){this.events[r]||(this.events[r]=new Yh);const l=this.events[r].add(i);return r==="change"?()=>{l(),Aa.read(()=>{this.events.change.getSize()||this.stop()})}:l}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,i){this.passiveEffect=r,this.stopPassiveEffect=i}set(r){this.passiveEffect?this.passiveEffect(r,this.updateAndNotify):this.updateAndNotify(r)}setWithVelocity(r,i,l){this.set(i),this.prev=void 0,this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt-l}jump(r,i=!0){this.updateAndNotify(r),this.prev=r,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var r;(r=this.events.change)==null||r.notify(this.current)}addDependent(r){this.dependents||(this.dependents=new Set),this.dependents.add(r)}removeDependent(r){this.dependents&&this.dependents.delete(r)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const r=Zr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>hy)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,hy);return iv(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(r){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=r(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var r,i;(r=this.dependents)==null||r.clear(),(i=this.events.destroy)==null||i.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mc(s,r){return new FC(s,r)}const{schedule:ox}=gv(queueMicrotask,!1),Xn={x:!1,y:!1};function qv(){return Xn.x||Xn.y}function UC(s){return s==="x"||s==="y"?Xn[s]?null:(Xn[s]=!0,()=>{Xn[s]=!1}):Xn.x||Xn.y?null:(Xn.x=Xn.y=!0,()=>{Xn.x=Xn.y=!1})}function Hv(s,r){const i=LC(s),l=new AbortController,d={passive:!0,...r,signal:l.signal};return[i,d,()=>l.abort()]}function xy(s){return!(s.pointerType==="touch"||qv())}function IC(s,r,i={}){const[l,d,m]=Hv(s,i),u=f=>{if(!xy(f))return;const{target:g}=f,p=r(g,f);if(typeof p!="function"||!g)return;const j=v=>{xy(v)&&(p(v),g.removeEventListener("pointerleave",j))};g.addEventListener("pointerleave",j,d)};return l.forEach(f=>{f.addEventListener("pointerenter",u,d)}),m}const Gv=(s,r)=>r?s===r?!0:Gv(s,r.parentElement):!1,cx=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,VC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function BC(s){return VC.has(s.tagName)||s.tabIndex!==-1}const bm=new WeakSet;function gy(s){return r=>{r.key==="Enter"&&s(r)}}function Uf(s,r){s.dispatchEvent(new PointerEvent("pointer"+r,{isPrimary:!0,bubbles:!0}))}const qC=(s,r)=>{const i=s.currentTarget;if(!i)return;const l=gy(()=>{if(bm.has(i))return;Uf(i,"down");const d=gy(()=>{Uf(i,"up")}),m=()=>Uf(i,"cancel");i.addEventListener("keyup",d,r),i.addEventListener("blur",m,r)});i.addEventListener("keydown",l,r),i.addEventListener("blur",()=>i.removeEventListener("keydown",l),r)};function by(s){return cx(s)&&!qv()}function HC(s,r,i={}){const[l,d,m]=Hv(s,i),u=f=>{const g=f.currentTarget;if(!by(f))return;bm.add(g);const p=r(g,f),j=(k,E)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",w),bm.has(g)&&bm.delete(g),by(k)&&typeof p=="function"&&p(k,{success:E})},v=k=>{j(k,g===window||g===document||i.useGlobalTarget||Gv(g,k.target))},w=k=>{j(k,!1)};window.addEventListener("pointerup",v,d),window.addEventListener("pointercancel",w,d)};return l.forEach(f=>{(i.useGlobalTarget?window:f).addEventListener("pointerdown",u,d),Bv(f)&&(f.addEventListener("focus",p=>qC(p,d)),!BC(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),m}function Qv(s){return rv(s)&&"ownerSVGElement"in s}function GC(s){return Qv(s)&&s.tagName==="svg"}const br=s=>!!(s&&s.getVelocity),QC=[...Fv,Ba,Vl],YC=s=>QC.find($v(s)),dx=y.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function yy(s,r){if(typeof s=="function")return s(r);s!=null&&(s.current=r)}function WC(...s){return r=>{let i=!1;const l=s.map(d=>{const m=yy(d,r);return!i&&typeof m=="function"&&(i=!0),m});if(i)return()=>{for(let d=0;d<l.length;d++){const m=l[d];typeof m=="function"?m():yy(s[d],null)}}}}function ZC(...s){return y.useCallback(WC(...s),s)}class JC extends y.Component{getSnapshotBeforeUpdate(r){const i=this.props.childRef.current;if(i&&r.isPresent&&!this.props.isPresent){const l=i.offsetParent,d=Bv(l)&&l.offsetWidth||0,m=this.props.sizeRef.current;m.height=i.offsetHeight||0,m.width=i.offsetWidth||0,m.top=i.offsetTop,m.left=i.offsetLeft,m.right=d-m.width-m.left}return null}componentDidUpdate(){}render(){return this.props.children}}function KC({children:s,isPresent:r,anchorX:i,root:l}){const d=y.useId(),m=y.useRef(null),u=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=y.useContext(dx),g=ZC(m,s==null?void 0:s.ref);return y.useInsertionEffect(()=>{const{width:p,height:j,top:v,left:w,right:k}=u.current;if(r||!m.current||!p||!j)return;const E=i==="left"?`left: ${w}`:`right: ${k}`;m.current.dataset.motionPopId=d;const T=document.createElement("style");f&&(T.nonce=f);const F=l??document.head;return F.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${j}px !important;
            ${E}px !important;
            top: ${v}px !important;
          }
        `),()=>{F.contains(T)&&F.removeChild(T)}},[r]),e.jsx(JC,{isPresent:r,childRef:m,sizeRef:u,children:y.cloneElement(s,{ref:g})})}const XC=({children:s,initial:r,isPresent:i,onExitComplete:l,custom:d,presenceAffectsLayout:m,mode:u,anchorX:f,root:g})=>{const p=Vh(e6),j=y.useId();let v=!0,w=y.useMemo(()=>(v=!1,{id:j,initial:r,isPresent:i,custom:d,onExitComplete:k=>{p.set(k,!0);for(const E of p.values())if(!E)return;l&&l()},register:k=>(p.set(k,!1),()=>p.delete(k))}),[i,p,l]);return m&&v&&(w={...w}),y.useMemo(()=>{p.forEach((k,E)=>p.set(E,!1))},[i]),y.useEffect(()=>{!i&&!p.size&&l&&l()},[i]),u==="popLayout"&&(s=e.jsx(KC,{isPresent:i,anchorX:f,root:g,children:s})),e.jsx(zm.Provider,{value:w,children:s})};function e6(){return new Map}function Yv(s=!0){const r=y.useContext(zm);if(r===null)return[!0,null];const{isPresent:i,onExitComplete:l,register:d}=r,m=y.useId();y.useEffect(()=>{if(s)return d(m)},[s]);const u=y.useCallback(()=>s&&l&&l(m),[m,l,s]);return!i&&l?[!1,u]:[!0]}const dm=s=>s.key||"";function jy(s){const r=[];return y.Children.forEach(s,i=>{y.isValidElement(i)&&r.push(i)}),r}const ha=({children:s,custom:r,initial:i=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:m="sync",propagate:u=!1,anchorX:f="left",root:g})=>{const[p,j]=Yv(u),v=y.useMemo(()=>jy(s),[s]),w=u&&!p?[]:v.map(dm),k=y.useRef(!0),E=y.useRef(v),T=Vh(()=>new Map),[F,L]=y.useState(v),[M,V]=y.useState(v);sv(()=>{k.current=!1,E.current=v;for(let z=0;z<M.length;z++){const P=dm(M[z]);w.includes(P)?T.delete(P):T.get(P)!==!0&&T.set(P,!1)}},[M,w.length,w.join("-")]);const le=[];if(v!==F){let z=[...v];for(let P=0;P<M.length;P++){const J=M[P],W=dm(J);w.includes(W)||(z.splice(P,0,J),le.push(J))}return m==="wait"&&le.length&&(z=le),V(jy(z)),L(v),null}const{forceRender:G}=y.useContext(Ih);return e.jsx(e.Fragment,{children:M.map(z=>{const P=dm(z),J=u&&!p?!1:v===M||w.includes(P),W=()=>{if(T.has(P))T.set(P,!0);else return;let oe=!0;T.forEach(ce=>{ce||(oe=!1)}),oe&&(G==null||G(),V(E.current),u&&(j==null||j()),l&&l())};return e.jsx(XC,{isPresent:J,initial:!k.current||i?void 0:!1,custom:r,presenceAffectsLayout:d,mode:m,root:g,onExitComplete:J?void 0:W,anchorX:f,children:z},P)})})},Wv=y.createContext({strict:!1}),vy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pc={};for(const s in vy)pc[s]={isEnabled:r=>vy[s].some(i=>!!r[i])};function t6(s){for(const r in s)pc[r]={...pc[r],...s[r]}}const s6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Em(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||s6.has(s)}let Zv=s=>!Em(s);function a6(s){typeof s=="function"&&(Zv=r=>r.startsWith("on")?!Em(r):s(r))}try{a6(require("@emotion/is-prop-valid").default)}catch{}function r6(s,r,i){const l={};for(const d in s)d==="values"&&typeof s.values=="object"||(Zv(d)||i===!0&&Em(d)||!r&&!Em(d)||s.draggable&&d.startsWith("onDrag"))&&(l[d]=s[d]);return l}const Lm=y.createContext({});function $m(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function _d(s){return typeof s=="string"||Array.isArray(s)}const ux=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mx=["initial",...ux];function Fm(s){return $m(s.animate)||mx.some(r=>_d(s[r]))}function Jv(s){return!!(Fm(s)||s.variants)}function n6(s,r){if(Fm(s)){const{initial:i,animate:l}=s;return{initial:i===!1||_d(i)?i:void 0,animate:_d(l)?l:void 0}}return s.inherit!==!1?r:{}}function i6(s){const{initial:r,animate:i}=n6(s,y.useContext(Lm));return y.useMemo(()=>({initial:r,animate:i}),[Ny(r),Ny(i)])}function Ny(s){return Array.isArray(s)?s.join(" "):s}function wy(s,r){return r.max===r.min?0:s/(r.max-r.min)*100}const pd={correct:(s,r)=>{if(!r.target)return s;if(typeof s=="string")if(os.test(s))s=parseFloat(s);else return s;const i=wy(s,r.target.x),l=wy(s,r.target.y);return`${i}% ${l}%`}},l6={correct:(s,{treeScale:r,projectionDelta:i})=>{const l=s,d=Vl.parse(s);if(d.length>5)return l;const m=Vl.createTransformer(s),u=typeof d[0]!="number"?1:0,f=i.x.scale*r.x,g=i.y.scale*r.y;d[0+u]/=f,d[1+u]/=g;const p=Ta(f,g,.5);return typeof d[2+u]=="number"&&(d[2+u]/=p),typeof d[3+u]=="number"&&(d[3+u]/=p),m(d)}},xh={borderRadius:{...pd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pd,borderTopRightRadius:pd,borderBottomLeftRadius:pd,borderBottomRightRadius:pd,boxShadow:l6};function Kv(s,{layout:r,layoutId:i}){return xc.has(s)||s.startsWith("origin")||(r||i!==void 0)&&(!!xh[s]||s==="opacity")}const o6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},c6=hc.length;function d6(s,r,i){let l="",d=!0;for(let m=0;m<c6;m++){const u=hc[m],f=s[u];if(f===void 0)continue;let g=!0;if(typeof f=="number"?g=f===(u.startsWith("scale")?1:0):g=parseFloat(f)===0,!g||i){const p=Vv(f,lx[u]);if(!g){d=!1;const j=o6[u]||u;l+=`${j}(${p}) `}i&&(r[u]=p)}}return l=l.trim(),i?l=i(r,d?"":l):d&&(l="none"),l}function px(s,r,i){const{style:l,vars:d,transformOrigin:m}=s;let u=!1,f=!1;for(const g in r){const p=r[g];if(xc.has(g)){u=!0;continue}else if(yv(g)){d[g]=p;continue}else{const j=Vv(p,lx[g]);g.startsWith("origin")?(f=!0,m[g]=j):l[g]=j}}if(r.transform||(u||i?l.transform=d6(r,s.transform,i):l.transform&&(l.transform="none")),f){const{originX:g="50%",originY:p="50%",originZ:j=0}=m;l.transformOrigin=`${g} ${p} ${j}`}}const fx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Xv(s,r,i){for(const l in r)!br(r[l])&&!Kv(l,i)&&(s[l]=r[l])}function u6({transformTemplate:s},r){return y.useMemo(()=>{const i=fx();return px(i,r,s),Object.assign({},i.vars,i.style)},[r])}function m6(s,r){const i=s.style||{},l={};return Xv(l,i,s),Object.assign(l,u6(s,r)),l}function p6(s,r){const i={},l=m6(s,r);return s.drag&&s.dragListener!==!1&&(i.draggable=!1,l.userSelect=l.WebkitUserSelect=l.WebkitTouchCallout="none",l.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(i.tabIndex=0),i.style=l,i}const f6={offset:"stroke-dashoffset",array:"stroke-dasharray"},h6={offset:"strokeDashoffset",array:"strokeDasharray"};function x6(s,r,i=1,l=0,d=!0){s.pathLength=1;const m=d?f6:h6;s[m.offset]=os.transform(-l);const u=os.transform(r),f=os.transform(i);s[m.array]=`${u} ${f}`}function eN(s,{attrX:r,attrY:i,attrScale:l,pathLength:d,pathSpacing:m=1,pathOffset:u=0,...f},g,p,j){if(px(s,f,p),g){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:v,style:w}=s;v.transform&&(w.transform=v.transform,delete v.transform),(w.transform||v.transformOrigin)&&(w.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),w.transform&&(w.transformBox=(j==null?void 0:j.transformBox)??"fill-box",delete v.transformBox),r!==void 0&&(v.x=r),i!==void 0&&(v.y=i),l!==void 0&&(v.scale=l),d!==void 0&&x6(v,d,m,u,!1)}const tN=()=>({...fx(),attrs:{}}),sN=s=>typeof s=="string"&&s.toLowerCase()==="svg";function g6(s,r,i,l){const d=y.useMemo(()=>{const m=tN();return eN(m,r,sN(l),s.transformTemplate,s.style),{...m.attrs,style:{...m.style}}},[r]);if(s.style){const m={};Xv(m,s.style,s),d.style={...m,...d.style}}return d}const b6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hx(s){return typeof s!="string"||s.includes("-")?!1:!!(b6.indexOf(s)>-1||/[A-Z]/u.test(s))}function y6(s,r,i,{latestValues:l},d,m=!1){const f=(hx(s)?g6:p6)(r,l,d,s),g=r6(r,typeof s=="string",m),p=s!==y.Fragment?{...g,...f,ref:i}:{},{children:j}=r,v=y.useMemo(()=>br(j)?j.get():j,[j]);return y.createElement(s,{...p,children:v})}function Sy(s){const r=[{},{}];return s==null||s.values.forEach((i,l)=>{r[0][l]=i.get(),r[1][l]=i.getVelocity()}),r}function xx(s,r,i,l){if(typeof r=="function"){const[d,m]=Sy(l);r=r(i!==void 0?i:s.custom,d,m)}if(typeof r=="string"&&(r=s.variants&&s.variants[r]),typeof r=="function"){const[d,m]=Sy(l);r=r(i!==void 0?i:s.custom,d,m)}return r}function ym(s){return br(s)?s.get():s}function j6({scrapeMotionValuesFromProps:s,createRenderState:r},i,l,d){return{latestValues:v6(i,l,d,s),renderState:r()}}function v6(s,r,i,l){const d={},m=l(s,{});for(const w in m)d[w]=ym(m[w]);let{initial:u,animate:f}=s;const g=Fm(s),p=Jv(s);r&&p&&!g&&s.inherit!==!1&&(u===void 0&&(u=r.initial),f===void 0&&(f=r.animate));let j=i?i.initial===!1:!1;j=j||u===!1;const v=j?f:u;if(v&&typeof v!="boolean"&&!$m(v)){const w=Array.isArray(v)?v:[v];for(let k=0;k<w.length;k++){const E=xx(s,w[k]);if(E){const{transitionEnd:T,transition:F,...L}=E;for(const M in L){let V=L[M];if(Array.isArray(V)){const le=j?V.length-1:0;V=V[le]}V!==null&&(d[M]=V)}for(const M in T)d[M]=T[M]}}}return d}const aN=s=>(r,i)=>{const l=y.useContext(Lm),d=y.useContext(zm),m=()=>j6(s,r,l,d);return i?m():Vh(m)};function gx(s,r,i){var m;const{style:l}=s,d={};for(const u in l)(br(l[u])||r.style&&br(r.style[u])||Kv(u,s)||((m=i==null?void 0:i.getValue(u))==null?void 0:m.liveStyle)!==void 0)&&(d[u]=l[u]);return d}const N6=aN({scrapeMotionValuesFromProps:gx,createRenderState:fx});function rN(s,r,i){const l=gx(s,r,i);for(const d in s)if(br(s[d])||br(r[d])){const m=hc.indexOf(d)!==-1?"attr"+d.charAt(0).toUpperCase()+d.substring(1):d;l[m]=s[d]}return l}const w6=aN({scrapeMotionValuesFromProps:rN,createRenderState:tN}),S6=Symbol.for("motionComponentSymbol");function tc(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function C6(s,r,i){return y.useCallback(l=>{l&&s.onMount&&s.onMount(l),r&&(l?r.mount(l):r.unmount()),i&&(typeof i=="function"?i(l):tc(i)&&(i.current=l))},[r])}const bx=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),A6="framerAppearId",nN="data-"+bx(A6),iN=y.createContext({});function E6(s,r,i,l,d){var T,F;const{visualElement:m}=y.useContext(Lm),u=y.useContext(Wv),f=y.useContext(zm),g=y.useContext(dx).reducedMotion,p=y.useRef(null);l=l||u.renderer,!p.current&&l&&(p.current=l(s,{visualState:r,parent:m,props:i,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:g}));const j=p.current,v=y.useContext(iN);j&&!j.projection&&d&&(j.type==="html"||j.type==="svg")&&T6(p.current,i,d,v);const w=y.useRef(!1);y.useInsertionEffect(()=>{j&&w.current&&j.update(i,f)});const k=i[nN],E=y.useRef(!!k&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,k))&&((F=window.MotionHasOptimisedAnimation)==null?void 0:F.call(window,k)));return sv(()=>{j&&(w.current=!0,window.MotionIsMounted=!0,j.updateFeatures(),j.scheduleRenderMicrotask(),E.current&&j.animationState&&j.animationState.animateChanges())}),y.useEffect(()=>{j&&(!E.current&&j.animationState&&j.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)==null||L.call(window,k)}),E.current=!1),j.enteringChildren=void 0)}),j}function T6(s,r,i,l){const{layoutId:d,layout:m,drag:u,dragConstraints:f,layoutScroll:g,layoutRoot:p,layoutCrossfade:j}=r;s.projection=new i(s.latestValues,r["data-framer-portal-id"]?void 0:lN(s.parent)),s.projection.setOptions({layoutId:d,layout:m,alwaysMeasureLayout:!!u||f&&tc(f),visualElement:s,animationType:typeof m=="string"?m:"both",initialPromotionConfig:l,crossfade:j,layoutScroll:g,layoutRoot:p})}function lN(s){if(s)return s.options.allowProjection!==!1?s.projection:lN(s.parent)}function If(s,{forwardMotionProps:r=!1}={},i,l){i&&t6(i);const d=hx(s)?w6:N6;function m(f,g){let p;const j={...y.useContext(dx),...f,layoutId:k6(f)},{isStatic:v}=j,w=i6(f),k=d(f,v);if(!v&&Bh){D6();const E=P6(j);p=E.MeasureLayout,w.visualElement=E6(s,k,j,l,E.ProjectionNode)}return e.jsxs(Lm.Provider,{value:w,children:[p&&w.visualElement?e.jsx(p,{visualElement:w.visualElement,...j}):null,y6(s,f,C6(k,w.visualElement,g),k,v,r)]})}m.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const u=y.forwardRef(m);return u[S6]=s,u}function k6({layoutId:s}){const r=y.useContext(Ih).id;return r&&s!==void 0?r+"-"+s:s}function D6(s,r){y.useContext(Wv).strict}function P6(s){const{drag:r,layout:i}=pc;if(!r&&!i)return{};const l={...r,...i};return{MeasureLayout:r!=null&&r.isEnabled(s)||i!=null&&i.isEnabled(s)?l.MeasureLayout:void 0,ProjectionNode:l.ProjectionNode}}function O6(s,r){if(typeof Proxy>"u")return If;const i=new Map,l=(m,u)=>If(m,u,s,r),d=(m,u)=>l(m,u);return new Proxy(d,{get:(m,u)=>u==="create"?l:(i.has(u)||i.set(u,If(u,void 0,s,r)),i.get(u))})}function oN({top:s,left:r,right:i,bottom:l}){return{x:{min:r,max:i},y:{min:s,max:l}}}function R6({x:s,y:r}){return{top:r.min,right:s.max,bottom:r.max,left:s.min}}function M6(s,r){if(!r)return s;const i=r({x:s.left,y:s.top}),l=r({x:s.right,y:s.bottom});return{top:i.y,left:i.x,bottom:l.y,right:l.x}}function Vf(s){return s===void 0||s===1}function gh({scale:s,scaleX:r,scaleY:i}){return!Vf(s)||!Vf(r)||!Vf(i)}function lo(s){return gh(s)||cN(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function cN(s){return Cy(s.x)||Cy(s.y)}function Cy(s){return s&&s!=="0%"}function Tm(s,r,i){const l=s-i,d=r*l;return i+d}function Ay(s,r,i,l,d){return d!==void 0&&(s=Tm(s,d,l)),Tm(s,i,l)+r}function bh(s,r=0,i=1,l,d){s.min=Ay(s.min,r,i,l,d),s.max=Ay(s.max,r,i,l,d)}function dN(s,{x:r,y:i}){bh(s.x,r.translate,r.scale,r.originPoint),bh(s.y,i.translate,i.scale,i.originPoint)}const Ey=.999999999999,Ty=1.0000000000001;function _6(s,r,i,l=!1){const d=i.length;if(!d)return;r.x=r.y=1;let m,u;for(let f=0;f<d;f++){m=i[f],u=m.projectionDelta;const{visualElement:g}=m.options;g&&g.props.style&&g.props.style.display==="contents"||(l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&ac(s,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),u&&(r.x*=u.x.scale,r.y*=u.y.scale,dN(s,u)),l&&lo(m.latestValues)&&ac(s,m.latestValues))}r.x<Ty&&r.x>Ey&&(r.x=1),r.y<Ty&&r.y>Ey&&(r.y=1)}function sc(s,r){s.min=s.min+r,s.max=s.max+r}function ky(s,r,i,l,d=.5){const m=Ta(s.min,s.max,d);bh(s,r,i,m,l)}function ac(s,r){ky(s.x,r.x,r.scaleX,r.scale,r.originX),ky(s.y,r.y,r.scaleY,r.scale,r.originY)}function uN(s,r){return oN(M6(s.getBoundingClientRect(),r))}function z6(s,r,i){const l=uN(s,i),{scroll:d}=r;return d&&(sc(l.x,d.offset.x),sc(l.y,d.offset.y)),l}const Dy=()=>({translate:0,scale:1,origin:0,originPoint:0}),rc=()=>({x:Dy(),y:Dy()}),Py=()=>({min:0,max:0}),Ka=()=>({x:Py(),y:Py()}),yh={current:null},mN={current:!1};function L6(){if(mN.current=!0,!!Bh)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),r=()=>yh.current=s.matches;s.addEventListener("change",r),r()}else yh.current=!1}const $6=new WeakMap;function F6(s,r,i){for(const l in r){const d=r[l],m=i[l];if(br(d))s.addValue(l,d);else if(br(m))s.addValue(l,mc(d,{owner:s}));else if(m!==d)if(s.hasValue(l)){const u=s.getValue(l);u.liveStyle===!0?u.jump(d):u.hasAnimated||u.set(d)}else{const u=s.getStaticValue(l);s.addValue(l,mc(u!==void 0?u:d,{owner:s}))}}for(const l in i)r[l]===void 0&&s.removeValue(l);return r}const Oy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class U6{scrapeMotionValuesFromProps(r,i,l){return{}}constructor({parent:r,props:i,presenceContext:l,reducedMotionConfig:d,blockInitialAnimation:m,visualState:u},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Zr.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,Aa.render(this.render,!1,!0))};const{latestValues:g,renderState:p}=u;this.latestValues=g,this.baseTarget={...g},this.initialValues=i.initial?{...g}:{},this.renderState=p,this.parent=r,this.props=i,this.presenceContext=l,this.depth=r?r.depth+1:0,this.reducedMotionConfig=d,this.options=f,this.blockInitialAnimation=!!m,this.isControllingVariants=Fm(i),this.isVariantNode=Jv(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:j,...v}=this.scrapeMotionValuesFromProps(i,{},this);for(const w in v){const k=v[w];g[w]!==void 0&&br(k)&&k.set(g[w])}}mount(r){var i;this.current=r,$6.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((l,d)=>this.bindToMotionValue(d,l)),mN.current||L6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yh.current,(i=this.parent)==null||i.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var r;this.projection&&this.projection.unmount(),Il(this.notifyUpdate),Il(this.render),this.valueSubscriptions.forEach(i=>i()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(r=this.parent)==null||r.removeChild(this);for(const i in this.events)this.events[i].clear();for(const i in this.features){const l=this.features[i];l&&(l.unmount(),l.isMounted=!1)}this.current=null}addChild(r){this.children.add(r),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(r)}removeChild(r){this.children.delete(r),this.enteringChildren&&this.enteringChildren.delete(r)}bindToMotionValue(r,i){this.valueSubscriptions.has(r)&&this.valueSubscriptions.get(r)();const l=xc.has(r);l&&this.onBindTransform&&this.onBindTransform();const d=i.on("change",u=>{this.latestValues[r]=u,this.props.onUpdate&&Aa.preRender(this.notifyUpdate),l&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let m;window.MotionCheckAppearSync&&(m=window.MotionCheckAppearSync(this,r,i)),this.valueSubscriptions.set(r,()=>{d(),m&&m(),i.owner&&i.stop()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}updateFeatures(){let r="animation";for(r in pc){const i=pc[r];if(!i)continue;const{isEnabled:l,Feature:d}=i;if(!this.features[r]&&d&&l(this.props)&&(this.features[r]=new d(this)),this.features[r]){const m=this.features[r];m.isMounted?m.update():(m.mount(),m.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ka()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,i){this.latestValues[r]=i}update(r,i){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let l=0;l<Oy.length;l++){const d=Oy[l];this.propEventSubscriptions[d]&&(this.propEventSubscriptions[d](),delete this.propEventSubscriptions[d]);const m="on"+d,u=r[m];u&&(this.propEventSubscriptions[d]=this.on(d,u))}this.prevMotionValues=F6(this,this.scrapeMotionValuesFromProps(r,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(r){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(r),()=>i.variantChildren.delete(r)}addValue(r,i){const l=this.values.get(r);i!==l&&(l&&this.removeValue(r),this.bindToMotionValue(r,i),this.values.set(r,i),this.latestValues[r]=i.get())}removeValue(r){this.values.delete(r);const i=this.valueSubscriptions.get(r);i&&(i(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,i){if(this.props.values&&this.props.values[r])return this.props.values[r];let l=this.values.get(r);return l===void 0&&i!==void 0&&(l=mc(i===null?void 0:i,{owner:this}),this.addValue(r,l)),l}readValue(r,i){let l=this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:this.getBaseTargetFromProps(this.props,r)??this.readValueFromInstance(this.current,r,this.options);return l!=null&&(typeof l=="string"&&(av(l)||nv(l))?l=parseFloat(l):!YC(l)&&Vl.test(i)&&(l=Iv(r,i)),this.setBaseTarget(r,br(l)?l.get():l)),br(l)?l.get():l}setBaseTarget(r,i){this.baseTarget[r]=i}getBaseTarget(r){var m;const{initial:i}=this.props;let l;if(typeof i=="string"||typeof i=="object"){const u=xx(this.props,i,(m=this.presenceContext)==null?void 0:m.custom);u&&(l=u[r])}if(i&&l!==void 0)return l;const d=this.getBaseTargetFromProps(this.props,r);return d!==void 0&&!br(d)?d:this.initialValues[r]!==void 0&&l===void 0?void 0:this.baseTarget[r]}on(r,i){return this.events[r]||(this.events[r]=new Yh),this.events[r].add(i)}notify(r,...i){this.events[r]&&this.events[r].notify(...i)}scheduleRenderMicrotask(){ox.render(this.render)}}class pN extends U6{constructor(){super(...arguments),this.KeyframeResolver=zC}sortInstanceNodePosition(r,i){return r.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(r,i){return r.style?r.style[i]:void 0}removeValueFromRenderState(r,{vars:i,style:l}){delete i[r],delete l[r]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;br(r)&&(this.childSubscription=r.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function fN(s,{style:r,vars:i},l,d){const m=s.style;let u;for(u in r)m[u]=r[u];d==null||d.applyProjectionStyles(m,l);for(u in i)m.setProperty(u,i[u])}function I6(s){return window.getComputedStyle(s)}class V6 extends pN{constructor(){super(...arguments),this.type="html",this.renderInstance=fN}readValueFromInstance(r,i){var l;if(xc.has(i))return(l=this.projection)!=null&&l.isProjecting?ch(i):tC(r,i);{const d=I6(r),m=(yv(i)?d.getPropertyValue(i):d[i])||0;return typeof m=="string"?m.trim():m}}measureInstanceViewportBox(r,{transformPagePoint:i}){return uN(r,i)}build(r,i,l){px(r,i,l.transformTemplate)}scrapeMotionValuesFromProps(r,i,l){return gx(r,i,l)}}const hN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function B6(s,r,i,l){fN(s,r,void 0,l);for(const d in r.attrs)s.setAttribute(hN.has(d)?d:bx(d),r.attrs[d])}class q6 extends pN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ka}getBaseTargetFromProps(r,i){return r[i]}readValueFromInstance(r,i){if(xc.has(i)){const l=Uv(i);return l&&l.default||0}return i=hN.has(i)?i:bx(i),r.getAttribute(i)}scrapeMotionValuesFromProps(r,i,l){return rN(r,i,l)}build(r,i,l){eN(r,i,this.isSVGTag,l.transformTemplate,l.style)}renderInstance(r,i,l,d){B6(r,i,l,d)}mount(r){this.isSVGTag=sN(r.tagName),super.mount(r)}}const H6=(s,r)=>hx(s)?new q6(r):new V6(r,{allowProjection:s!==y.Fragment});function lc(s,r,i){const l=s.getProps();return xx(l,r,i!==void 0?i:l.custom,s)}const jh=s=>Array.isArray(s);function G6(s,r,i){s.hasValue(r)?s.getValue(r).set(i):s.addValue(r,mc(i))}function Q6(s){return jh(s)?s[s.length-1]||0:s}function Y6(s,r){const i=lc(s,r);let{transitionEnd:l={},transition:d={},...m}=i||{};m={...m,...l};for(const u in m){const f=Q6(m[u]);G6(s,u,f)}}function W6(s){return!!(br(s)&&s.add)}function vh(s,r){const i=s.getValue("willChange");if(W6(i))return i.add(r);if(!i&&tl.WillChange){const l=new tl.WillChange("auto");s.addValue("willChange",l),l.add(r)}}function xN(s){return s.props[nN]}const Z6=s=>s!==null;function J6(s,{repeat:r,repeatType:i="loop"},l){const d=s.filter(Z6),m=r&&i!=="loop"&&r%2===1?0:d.length-1;return d[m]}const K6={type:"spring",stiffness:500,damping:25,restSpeed:10},X6=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),eA={type:"keyframes",duration:.8},tA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sA=(s,{keyframes:r})=>r.length>2?eA:xc.has(s)?s.startsWith("scale")?X6(r[1]):K6:tA;function aA({when:s,delay:r,delayChildren:i,staggerChildren:l,staggerDirection:d,repeat:m,repeatType:u,repeatDelay:f,from:g,elapsed:p,...j}){return!!Object.keys(j).length}const yx=(s,r,i,l={},d,m)=>u=>{const f=ix(l,s)||{},g=f.delay||l.delay||0;let{elapsed:p=0}=l;p=p-Si(g);const j={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:r.getVelocity(),...f,delay:-p,onUpdate:w=>{r.set(w),f.onUpdate&&f.onUpdate(w)},onComplete:()=>{u(),f.onComplete&&f.onComplete()},name:s,motionValue:r,element:m?void 0:d};aA(f)||Object.assign(j,sA(s,j)),j.duration&&(j.duration=Si(j.duration)),j.repeatDelay&&(j.repeatDelay=Si(j.repeatDelay)),j.from!==void 0&&(j.keyframes[0]=j.from);let v=!1;if((j.type===!1||j.duration===0&&!j.repeatDelay)&&(fh(j),j.delay===0&&(v=!0)),(tl.instantAnimations||tl.skipAnimations)&&(v=!0,fh(j),j.delay=0),j.allowFlatten=!f.type&&!f.ease,v&&!m&&r.get()!==void 0){const w=J6(j.keyframes,f);if(w!==void 0){Aa.update(()=>{j.onUpdate(w),j.onComplete()});return}}return f.isSync?new rx(j):new SC(j)};function rA({protectedKeys:s,needsAnimating:r},i){const l=s.hasOwnProperty(i)&&r[i]!==!0;return r[i]=!1,l}function gN(s,r,{delay:i=0,transitionOverride:l,type:d}={}){let{transition:m=s.getDefaultTransition(),transitionEnd:u,...f}=r;l&&(m=l);const g=[],p=d&&s.animationState&&s.animationState.getState()[d];for(const j in f){const v=s.getValue(j,s.latestValues[j]??null),w=f[j];if(w===void 0||p&&rA(p,j))continue;const k={delay:i,...ix(m||{},j)},E=v.get();if(E!==void 0&&!v.isAnimating&&!Array.isArray(w)&&w===E&&!k.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const L=xN(s);if(L){const M=window.MotionHandoffAnimation(L,j,Aa);M!==null&&(k.startTime=M,T=!0)}}vh(s,j),v.start(yx(j,v,w,s.shouldReduceMotion&&Lv.has(j)?{type:!1}:k,s,T));const F=v.animation;F&&g.push(F)}return u&&Promise.all(g).then(()=>{Aa.update(()=>{u&&Y6(s,u)})}),g}function bN(s,r,i,l=0,d=1){const m=Array.from(s).sort((p,j)=>p.sortNodePosition(j)).indexOf(r),u=s.size,f=(u-1)*l;return typeof i=="function"?i(m,u):d===1?m*l:f-m*l}function Nh(s,r,i={}){var g;const l=lc(s,r,i.type==="exit"?(g=s.presenceContext)==null?void 0:g.custom:void 0);let{transition:d=s.getDefaultTransition()||{}}=l||{};i.transitionOverride&&(d=i.transitionOverride);const m=l?()=>Promise.all(gN(s,l,i)):()=>Promise.resolve(),u=s.variantChildren&&s.variantChildren.size?(p=0)=>{const{delayChildren:j=0,staggerChildren:v,staggerDirection:w}=d;return nA(s,r,p,j,v,w,i)}:()=>Promise.resolve(),{when:f}=d;if(f){const[p,j]=f==="beforeChildren"?[m,u]:[u,m];return p().then(()=>j())}else return Promise.all([m(),u(i.delay)])}function nA(s,r,i=0,l=0,d=0,m=1,u){const f=[];for(const g of s.variantChildren)g.notify("AnimationStart",r),f.push(Nh(g,r,{...u,delay:i+(typeof l=="function"?0:l)+bN(s.variantChildren,g,l,d,m)}).then(()=>g.notify("AnimationComplete",r)));return Promise.all(f)}function iA(s,r,i={}){s.notify("AnimationStart",r);let l;if(Array.isArray(r)){const d=r.map(m=>Nh(s,m,i));l=Promise.all(d)}else if(typeof r=="string")l=Nh(s,r,i);else{const d=typeof r=="function"?lc(s,r,i.custom):r;l=Promise.all(gN(s,d,i))}return l.then(()=>{s.notify("AnimationComplete",r)})}function yN(s,r){if(!Array.isArray(r))return!1;const i=r.length;if(i!==s.length)return!1;for(let l=0;l<i;l++)if(r[l]!==s[l])return!1;return!0}const lA=mx.length;function jN(s){if(!s)return;if(!s.isControllingVariants){const i=s.parent?jN(s.parent)||{}:{};return s.props.initial!==void 0&&(i.initial=s.props.initial),i}const r={};for(let i=0;i<lA;i++){const l=mx[i],d=s.props[l];(_d(d)||d===!1)&&(r[l]=d)}return r}const oA=[...ux].reverse(),cA=ux.length;function dA(s){return r=>Promise.all(r.map(({animation:i,options:l})=>iA(s,i,l)))}function uA(s){let r=dA(s),i=Ry(),l=!0;const d=g=>(p,j)=>{var w;const v=lc(s,j,g==="exit"?(w=s.presenceContext)==null?void 0:w.custom:void 0);if(v){const{transition:k,transitionEnd:E,...T}=v;p={...p,...T,...E}}return p};function m(g){r=g(s)}function u(g){const{props:p}=s,j=jN(s.parent)||{},v=[],w=new Set;let k={},E=1/0;for(let F=0;F<cA;F++){const L=oA[F],M=i[L],V=p[L]!==void 0?p[L]:j[L],le=_d(V),G=L===g?M.isActive:null;G===!1&&(E=F);let z=V===j[L]&&V!==p[L]&&le;if(z&&l&&s.manuallyAnimateOnMount&&(z=!1),M.protectedKeys={...k},!M.isActive&&G===null||!V&&!M.prevProp||$m(V)||typeof V=="boolean")continue;const P=mA(M.prevProp,V);let J=P||L===g&&M.isActive&&!z&&le||F>E&&le,W=!1;const oe=Array.isArray(V)?V:[V];let ce=oe.reduce(d(L),{});G===!1&&(ce={});const{prevResolvedValues:pe={}}=M,qe={...pe,...ce},R=X=>{J=!0,w.has(X)&&(W=!0,w.delete(X)),M.needsAnimating[X]=!0;const Q=s.getValue(X);Q&&(Q.liveStyle=!1)};for(const X in qe){const Q=ce[X],ne=pe[X];if(k.hasOwnProperty(X))continue;let Ne=!1;jh(Q)&&jh(ne)?Ne=!yN(Q,ne):Ne=Q!==ne,Ne?Q!=null?R(X):w.add(X):Q!==void 0&&w.has(X)?R(X):M.protectedKeys[X]=!0}M.prevProp=V,M.prevResolvedValues=ce,M.isActive&&(k={...k,...ce}),l&&s.blockInitialAnimation&&(J=!1);const Y=z&&P;J&&(!Y||W)&&v.push(...oe.map(X=>{const Q={type:L};if(typeof X=="string"&&l&&!Y&&s.manuallyAnimateOnMount&&s.parent){const{parent:ne}=s,Ne=lc(ne,X);if(ne.enteringChildren&&Ne){const{delayChildren:C}=Ne.transition||{};Q.delay=bN(ne.enteringChildren,s,C)}}return{animation:X,options:Q}}))}if(w.size){const F={};if(typeof p.initial!="boolean"){const L=lc(s,Array.isArray(p.initial)?p.initial[0]:p.initial);L&&L.transition&&(F.transition=L.transition)}w.forEach(L=>{const M=s.getBaseTarget(L),V=s.getValue(L);V&&(V.liveStyle=!0),F[L]=M??null}),v.push({animation:F})}let T=!!v.length;return l&&(p.initial===!1||p.initial===p.animate)&&!s.manuallyAnimateOnMount&&(T=!1),l=!1,T?r(v):Promise.resolve()}function f(g,p){var v;if(i[g].isActive===p)return Promise.resolve();(v=s.variantChildren)==null||v.forEach(w=>{var k;return(k=w.animationState)==null?void 0:k.setActive(g,p)}),i[g].isActive=p;const j=u(g);for(const w in i)i[w].protectedKeys={};return j}return{animateChanges:u,setActive:f,setAnimateFunction:m,getState:()=>i,reset:()=>{i=Ry()}}}function mA(s,r){return typeof r=="string"?r!==s:Array.isArray(r)?!yN(r,s):!1}function io(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ry(){return{animate:io(!0),whileInView:io(),whileHover:io(),whileTap:io(),whileDrag:io(),whileFocus:io(),exit:io()}}class ql{constructor(r){this.isMounted=!1,this.node=r}update(){}}class pA extends ql{constructor(r){super(r),r.animationState||(r.animationState=uA(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();$m(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:i}=this.node.prevProps||{};r!==i&&this.updateAnimationControlsSubscription()}unmount(){var r;this.node.animationState.reset(),(r=this.unmountControls)==null||r.call(this)}}let fA=0;class hA extends ql{constructor(){super(...arguments),this.id=fA++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:i}=this.node.presenceContext,{isPresent:l}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===l)return;const d=this.node.animationState.setActive("exit",!r);i&&!r&&d.then(()=>{i(this.id)})}mount(){const{register:r,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),r&&(this.unmount=r(this.id))}unmount(){}}const xA={animation:{Feature:pA},exit:{Feature:hA}};function zd(s,r,i,l={passive:!0}){return s.addEventListener(r,i,l),()=>s.removeEventListener(r,i)}function Gd(s){return{point:{x:s.pageX,y:s.pageY}}}const gA=s=>r=>cx(r)&&s(r,Gd(r));function wd(s,r,i,l){return zd(s,r,gA(i),l)}const vN=1e-4,bA=1-vN,yA=1+vN,NN=.01,jA=0-NN,vA=0+NN;function Dr(s){return s.max-s.min}function NA(s,r,i){return Math.abs(s-r)<=i}function My(s,r,i,l=.5){s.origin=l,s.originPoint=Ta(r.min,r.max,s.origin),s.scale=Dr(i)/Dr(r),s.translate=Ta(i.min,i.max,s.origin)-s.originPoint,(s.scale>=bA&&s.scale<=yA||isNaN(s.scale))&&(s.scale=1),(s.translate>=jA&&s.translate<=vA||isNaN(s.translate))&&(s.translate=0)}function Sd(s,r,i,l){My(s.x,r.x,i.x,l?l.originX:void 0),My(s.y,r.y,i.y,l?l.originY:void 0)}function _y(s,r,i){s.min=i.min+r.min,s.max=s.min+Dr(r)}function wA(s,r,i){_y(s.x,r.x,i.x),_y(s.y,r.y,i.y)}function zy(s,r,i){s.min=r.min-i.min,s.max=s.min+Dr(r)}function km(s,r,i){zy(s.x,r.x,i.x),zy(s.y,r.y,i.y)}function Pn(s){return[s("x"),s("y")]}const wN=({current:s})=>s?s.ownerDocument.defaultView:null,Ly=(s,r)=>Math.abs(s-r);function SA(s,r){const i=Ly(s.x,r.x),l=Ly(s.y,r.y);return Math.sqrt(i**2+l**2)}class SN{constructor(r,i,{transformPagePoint:l,contextWindow:d=window,dragSnapToOrigin:m=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=qf(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,E=SA(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!E)return;const{point:T}=w,{timestamp:F}=mr;this.history.push({...T,timestamp:F});const{onStart:L,onMove:M}=this.handlers;k||(L&&L(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,w)},this.handlePointerMove=(w,k)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=Bf(k,this.transformPagePoint),Aa.update(this.updatePoint,!0)},this.handlePointerUp=(w,k)=>{this.end();const{onEnd:E,onSessionEnd:T,resumeAnimation:F}=this.handlers;if(this.dragSnapToOrigin&&F&&F(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=qf(w.type==="pointercancel"?this.lastMoveEventInfo:Bf(k,this.transformPagePoint),this.history);this.startEvent&&E&&E(w,L),T&&T(w,L)},!cx(r))return;this.dragSnapToOrigin=m,this.handlers=i,this.transformPagePoint=l,this.distanceThreshold=u,this.contextWindow=d||window;const f=Gd(r),g=Bf(f,this.transformPagePoint),{point:p}=g,{timestamp:j}=mr;this.history=[{...p,timestamp:j}];const{onSessionStart:v}=i;v&&v(r,qf(g,this.history)),this.removeListeners=Bd(wd(this.contextWindow,"pointermove",this.handlePointerMove),wd(this.contextWindow,"pointerup",this.handlePointerUp),wd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),Il(this.updatePoint)}}function Bf(s,r){return r?{point:r(s.point)}:s}function $y(s,r){return{x:s.x-r.x,y:s.y-r.y}}function qf({point:s},r){return{point:s,delta:$y(s,CN(r)),offset:$y(s,CA(r)),velocity:AA(r,.1)}}function CA(s){return s[0]}function CN(s){return s[s.length-1]}function AA(s,r){if(s.length<2)return{x:0,y:0};let i=s.length-1,l=null;const d=CN(s);for(;i>=0&&(l=s[i],!(d.timestamp-l.timestamp>Si(r)));)i--;if(!l)return{x:0,y:0};const m=Mn(d.timestamp-l.timestamp);if(m===0)return{x:0,y:0};const u={x:(d.x-l.x)/m,y:(d.y-l.y)/m};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function EA(s,{min:r,max:i},l){return r!==void 0&&s<r?s=l?Ta(r,s,l.min):Math.max(s,r):i!==void 0&&s>i&&(s=l?Ta(i,s,l.max):Math.min(s,i)),s}function Fy(s,r,i){return{min:r!==void 0?s.min+r:void 0,max:i!==void 0?s.max+i-(s.max-s.min):void 0}}function TA(s,{top:r,left:i,bottom:l,right:d}){return{x:Fy(s.x,i,d),y:Fy(s.y,r,l)}}function Uy(s,r){let i=r.min-s.min,l=r.max-s.max;return r.max-r.min<s.max-s.min&&([i,l]=[l,i]),{min:i,max:l}}function kA(s,r){return{x:Uy(s.x,r.x),y:Uy(s.y,r.y)}}function DA(s,r){let i=.5;const l=Dr(s),d=Dr(r);return d>l?i=Od(r.min,r.max-l,s.min):l>d&&(i=Od(s.min,s.max-d,r.min)),el(0,1,i)}function PA(s,r){const i={};return r.min!==void 0&&(i.min=r.min-s.min),r.max!==void 0&&(i.max=r.max-s.min),i}const wh=.35;function OA(s=wh){return s===!1?s=0:s===!0&&(s=wh),{x:Iy(s,"left","right"),y:Iy(s,"top","bottom")}}function Iy(s,r,i){return{min:Vy(s,r),max:Vy(s,i)}}function Vy(s,r){return typeof s=="number"?s:s[r]||0}const RA=new WeakMap;class MA{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ka(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=r}start(r,{snapToCursor:i=!1,distanceThreshold:l}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const m=v=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(Gd(v).point)},u=(v,w)=>{const{drag:k,dragPropagation:E,onDragStart:T}=this.getProps();if(k&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UC(k),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pn(L=>{let M=this.getAxisMotionValue(L).get()||0;if(Ci.test(M)){const{projection:V}=this.visualElement;if(V&&V.layout){const le=V.layout.layoutBox[L];le&&(M=Dr(le)*(parseFloat(M)/100))}}this.originPoint[L]=M}),T&&Aa.postRender(()=>T(v,w)),vh(this.visualElement,"transform");const{animationState:F}=this.visualElement;F&&F.setActive("whileDrag",!0)},f=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w;const{dragPropagation:k,dragDirectionLock:E,onDirectionLock:T,onDrag:F}=this.getProps();if(!k&&!this.openDragLock)return;const{offset:L}=w;if(E&&this.currentDirection===null){this.currentDirection=_A(L),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",w.point,L),this.updateAxis("y",w.point,L),this.visualElement.render(),F&&F(v,w)},g=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w,this.stop(v,w),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Pn(v=>{var w;return this.getAnimationState(v)==="paused"&&((w=this.getAxisMotionValue(v).animation)==null?void 0:w.play())}),{dragSnapToOrigin:j}=this.getProps();this.panSession=new SN(r,{onSessionStart:m,onStart:u,onMove:f,onSessionEnd:g,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:j,distanceThreshold:l,contextWindow:wN(this.visualElement)})}stop(r,i){const l=r||this.latestPointerEvent,d=i||this.latestPanInfo,m=this.isDragging;if(this.cancel(),!m||!d||!l)return;const{velocity:u}=d;this.startAnimation(u);const{onDragEnd:f}=this.getProps();f&&Aa.postRender(()=>f(l,d))}cancel(){this.isDragging=!1;const{projection:r,animationState:i}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:l}=this.getProps();!l&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(r,i,l){const{drag:d}=this.getProps();if(!l||!um(r,d,this.currentDirection))return;const m=this.getAxisMotionValue(r);let u=this.originPoint[r]+l[r];this.constraints&&this.constraints[r]&&(u=EA(u,this.constraints[r],this.elastic[r])),m.set(u)}resolveConstraints(){var m;const{dragConstraints:r,dragElastic:i}=this.getProps(),l=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(m=this.visualElement.projection)==null?void 0:m.layout,d=this.constraints;r&&tc(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&l?this.constraints=TA(l.layoutBox,r):this.constraints=!1,this.elastic=OA(i),d!==this.constraints&&l&&this.constraints&&!this.hasMutatedConstraints&&Pn(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=PA(l.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:i}=this.getProps();if(!r||!tc(r))return!1;const l=r.current,{projection:d}=this.visualElement;if(!d||!d.layout)return!1;const m=z6(l,d.root,this.visualElement.getTransformPagePoint());let u=kA(d.layout.layoutBox,m);if(i){const f=i(R6(u));this.hasMutatedConstraints=!!f,f&&(u=oN(f))}return u}startAnimation(r){const{drag:i,dragMomentum:l,dragElastic:d,dragTransition:m,dragSnapToOrigin:u,onDragTransitionEnd:f}=this.getProps(),g=this.constraints||{},p=Pn(j=>{if(!um(j,i,this.currentDirection))return;let v=g&&g[j]||{};u&&(v={min:0,max:0});const w=d?200:1e6,k=d?40:1e7,E={type:"inertia",velocity:l?r[j]:0,bounceStiffness:w,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...m,...v};return this.startAxisValueAnimation(j,E)});return Promise.all(p).then(f)}startAxisValueAnimation(r,i){const l=this.getAxisMotionValue(r);return vh(this.visualElement,r),l.start(yx(r,l,0,i,this.visualElement,!1))}stopAnimation(){Pn(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){Pn(r=>{var i;return(i=this.getAxisMotionValue(r).animation)==null?void 0:i.pause()})}getAnimationState(r){var i;return(i=this.getAxisMotionValue(r).animation)==null?void 0:i.state}getAxisMotionValue(r){const i=`_drag${r.toUpperCase()}`,l=this.visualElement.getProps(),d=l[i];return d||this.visualElement.getValue(r,(l.initial?l.initial[r]:void 0)||0)}snapToCursor(r){Pn(i=>{const{drag:l}=this.getProps();if(!um(i,l,this.currentDirection))return;const{projection:d}=this.visualElement,m=this.getAxisMotionValue(i);if(d&&d.layout){const{min:u,max:f}=d.layout.layoutBox[i];m.set(r[i]-Ta(u,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:i}=this.getProps(),{projection:l}=this.visualElement;if(!tc(i)||!l||!this.constraints)return;this.stopAnimation();const d={x:0,y:0};Pn(u=>{const f=this.getAxisMotionValue(u);if(f&&this.constraints!==!1){const g=f.get();d[u]=DA({min:g,max:g},this.constraints[u])}});const{transformTemplate:m}=this.visualElement.getProps();this.visualElement.current.style.transform=m?m({},""):"none",l.root&&l.root.updateScroll(),l.updateLayout(),this.resolveConstraints(),Pn(u=>{if(!um(u,r,null))return;const f=this.getAxisMotionValue(u),{min:g,max:p}=this.constraints[u];f.set(Ta(g,p,d[u]))})}addListeners(){if(!this.visualElement.current)return;RA.set(this.visualElement,this);const r=this.visualElement.current,i=wd(r,"pointerdown",g=>{const{drag:p,dragListener:j=!0}=this.getProps();p&&j&&this.start(g)}),l=()=>{const{dragConstraints:g}=this.getProps();tc(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:d}=this.visualElement,m=d.addEventListener("measure",l);d&&!d.layout&&(d.root&&d.root.updateScroll(),d.updateLayout()),Aa.read(l);const u=zd(window,"resize",()=>this.scalePositionWithinConstraints()),f=d.addEventListener("didUpdate",(({delta:g,hasLayoutChanged:p})=>{this.isDragging&&p&&(Pn(j=>{const v=this.getAxisMotionValue(j);v&&(this.originPoint[j]+=g[j].translate,v.set(v.get()+g[j].translate))}),this.visualElement.render())}));return()=>{u(),i(),m(),f&&f()}}getProps(){const r=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:l=!1,dragPropagation:d=!1,dragConstraints:m=!1,dragElastic:u=wh,dragMomentum:f=!0}=r;return{...r,drag:i,dragDirectionLock:l,dragPropagation:d,dragConstraints:m,dragElastic:u,dragMomentum:f}}}function um(s,r,i){return(r===!0||r===s)&&(i===null||i===s)}function _A(s,r=10){let i=null;return Math.abs(s.y)>r?i="y":Math.abs(s.x)>r&&(i="x"),i}class zA extends ql{constructor(r){super(r),this.removeGroupControls=zn,this.removeListeners=zn,this.controls=new MA(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zn}unmount(){this.removeGroupControls(),this.removeListeners()}}const By=s=>(r,i)=>{s&&Aa.postRender(()=>s(r,i))};class LA extends ql{constructor(){super(...arguments),this.removePointerDownListener=zn}onPointerDown(r){this.session=new SN(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wN(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:i,onPan:l,onPanEnd:d}=this.node.getProps();return{onSessionStart:By(r),onStart:By(i),onMove:l,onEnd:(m,u)=>{delete this.session,d&&Aa.postRender(()=>d(m,u))}}}mount(){this.removePointerDownListener=wd(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Hf=!1;class $A extends y.Component{componentDidMount(){const{visualElement:r,layoutGroup:i,switchLayoutGroup:l,layoutId:d}=this.props,{projection:m}=r;m&&(i.group&&i.group.add(m),l&&l.register&&d&&l.register(m),Hf&&m.root.didUpdate(),m.addEventListener("animationComplete",()=>{this.safeToRemove()}),m.setOptions({...m.options,onExitComplete:()=>this.safeToRemove()})),jm.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:i,visualElement:l,drag:d,isPresent:m}=this.props,{projection:u}=l;return u&&(u.isPresent=m,Hf=!0,d||r.layoutDependency!==i||i===void 0||r.isPresent!==m?u.willUpdate():this.safeToRemove(),r.isPresent!==m&&(m?u.promote():u.relegate()||Aa.postRender(()=>{const f=u.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),ox.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:i,switchLayoutGroup:l}=this.props,{projection:d}=r;Hf=!0,d&&(d.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(d),l&&l.deregister&&l.deregister(d))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function AN(s){const[r,i]=Yv(),l=y.useContext(Ih);return e.jsx($A,{...s,layoutGroup:l,switchLayoutGroup:y.useContext(iN),isPresent:r,safeToRemove:i})}function FA(s,r,i){const l=br(s)?s:mc(s);return l.start(yx("",l,r,i)),l.animation}const UA=(s,r)=>s.depth-r.depth;class IA{constructor(){this.children=[],this.isDirty=!1}add(r){qh(this.children,r),this.isDirty=!0}remove(r){Hh(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(UA),this.isDirty=!1,this.children.forEach(r)}}function VA(s,r){const i=Zr.now(),l=({timestamp:d})=>{const m=d-i;m>=r&&(Il(l),s(m-r))};return Aa.setup(l,!0),()=>Il(l)}const EN=["TopLeft","TopRight","BottomLeft","BottomRight"],BA=EN.length,qy=s=>typeof s=="string"?parseFloat(s):s,Hy=s=>typeof s=="number"||os.test(s);function qA(s,r,i,l,d,m){d?(s.opacity=Ta(0,i.opacity??1,HA(l)),s.opacityExit=Ta(r.opacity??1,0,GA(l))):m&&(s.opacity=Ta(r.opacity??1,i.opacity??1,l));for(let u=0;u<BA;u++){const f=`border${EN[u]}Radius`;let g=Gy(r,f),p=Gy(i,f);if(g===void 0&&p===void 0)continue;g||(g=0),p||(p=0),g===0||p===0||Hy(g)===Hy(p)?(s[f]=Math.max(Ta(qy(g),qy(p),l),0),(Ci.test(p)||Ci.test(g))&&(s[f]+="%")):s[f]=p}(r.rotate||i.rotate)&&(s.rotate=Ta(r.rotate||0,i.rotate||0,l))}function Gy(s,r){return s[r]!==void 0?s[r]:s.borderRadius}const HA=TN(0,.5,pv),GA=TN(.5,.95,zn);function TN(s,r,i){return l=>l<s?0:l>r?1:i(Od(s,r,l))}function Qy(s,r){s.min=r.min,s.max=r.max}function Kn(s,r){Qy(s.x,r.x),Qy(s.y,r.y)}function Yy(s,r){s.translate=r.translate,s.scale=r.scale,s.originPoint=r.originPoint,s.origin=r.origin}function Wy(s,r,i,l,d){return s-=r,s=Tm(s,1/i,l),d!==void 0&&(s=Tm(s,1/d,l)),s}function QA(s,r=0,i=1,l=.5,d,m=s,u=s){if(Ci.test(r)&&(r=parseFloat(r),r=Ta(u.min,u.max,r/100)-u.min),typeof r!="number")return;let f=Ta(m.min,m.max,l);s===m&&(f-=r),s.min=Wy(s.min,r,i,f,d),s.max=Wy(s.max,r,i,f,d)}function Zy(s,r,[i,l,d],m,u){QA(s,r[i],r[l],r[d],r.scale,m,u)}const YA=["x","scaleX","originX"],WA=["y","scaleY","originY"];function Jy(s,r,i,l){Zy(s.x,r,YA,i?i.x:void 0,l?l.x:void 0),Zy(s.y,r,WA,i?i.y:void 0,l?l.y:void 0)}function Ky(s){return s.translate===0&&s.scale===1}function kN(s){return Ky(s.x)&&Ky(s.y)}function Xy(s,r){return s.min===r.min&&s.max===r.max}function ZA(s,r){return Xy(s.x,r.x)&&Xy(s.y,r.y)}function ej(s,r){return Math.round(s.min)===Math.round(r.min)&&Math.round(s.max)===Math.round(r.max)}function DN(s,r){return ej(s.x,r.x)&&ej(s.y,r.y)}function tj(s){return Dr(s.x)/Dr(s.y)}function sj(s,r){return s.translate===r.translate&&s.scale===r.scale&&s.originPoint===r.originPoint}class JA{constructor(){this.members=[]}add(r){qh(this.members,r),r.scheduleRender()}remove(r){if(Hh(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(r){const i=this.members.findIndex(d=>r===d);if(i===0)return!1;let l;for(let d=i;d>=0;d--){const m=this.members[d];if(m.isPresent!==!1){l=m;break}}return l?(this.promote(l),!0):!1}promote(r,i){const l=this.lead;if(r!==l&&(this.prevLead=l,this.lead=r,r.show(),l)){l.instance&&l.scheduleRender(),r.scheduleRender(),r.resumeFrom=l,i&&(r.resumeFrom.preserveOpacity=!0),l.snapshot&&(r.snapshot=l.snapshot,r.snapshot.latestValues=l.animationValues||l.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:d}=r.options;d===!1&&l.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:i,resumingFrom:l}=r;i.onExitComplete&&i.onExitComplete(),l&&l.options.onExitComplete&&l.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function KA(s,r,i){let l="";const d=s.x.translate/r.x,m=s.y.translate/r.y,u=(i==null?void 0:i.z)||0;if((d||m||u)&&(l=`translate3d(${d}px, ${m}px, ${u}px) `),(r.x!==1||r.y!==1)&&(l+=`scale(${1/r.x}, ${1/r.y}) `),i){const{transformPerspective:p,rotate:j,rotateX:v,rotateY:w,skewX:k,skewY:E}=i;p&&(l=`perspective(${p}px) ${l}`),j&&(l+=`rotate(${j}deg) `),v&&(l+=`rotateX(${v}deg) `),w&&(l+=`rotateY(${w}deg) `),k&&(l+=`skewX(${k}deg) `),E&&(l+=`skewY(${E}deg) `)}const f=s.x.scale*r.x,g=s.y.scale*r.y;return(f!==1||g!==1)&&(l+=`scale(${f}, ${g})`),l||"none"}const Gf=["","X","Y","Z"],XA=1e3;let eE=0;function Qf(s,r,i,l){const{latestValues:d}=r;d[s]&&(i[s]=d[s],r.setStaticValue(s,0),l&&(l[s]=0))}function PN(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:r}=s.options;if(!r)return;const i=xN(r);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:d,layoutId:m}=s.options;window.MotionCancelOptimisedAnimation(i,"transform",Aa,!(d||m))}const{parent:l}=s;l&&!l.hasCheckedOptimisedAppear&&PN(l)}function ON({attachResizeListener:s,defaultParent:r,measureScroll:i,checkIsScrollRoot:l,resetTransform:d}){return class{constructor(u={},f=r==null?void 0:r()){this.id=eE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(aE),this.nodes.forEach(lE),this.nodes.forEach(oE),this.nodes.forEach(rE)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new IA)}addEventListener(u,f){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Yh),this.eventHandlers.get(u).add(f)}notifyListeners(u,...f){const g=this.eventHandlers.get(u);g&&g.notify(...f)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=Qv(u)&&!GC(u),this.instance=u;const{layoutId:f,layout:g,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||f)&&(this.isLayoutDirty=!0),s){let j,v=0;const w=()=>this.root.updateBlockedByResize=!1;Aa.read(()=>{v=window.innerWidth}),s(u,()=>{const k=window.innerWidth;k!==v&&(v=k,this.root.updateBlockedByResize=!0,j&&j(),j=VA(w,250),jm.hasAnimatedSinceResize&&(jm.hasAnimatedSinceResize=!1,this.nodes.forEach(nj)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&p&&(f||g)&&this.addEventListener("didUpdate",({delta:j,hasLayoutChanged:v,hasRelativeLayoutChanged:w,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||p.getDefaultTransition()||pE,{onLayoutAnimationStart:T,onLayoutAnimationComplete:F}=p.getProps(),L=!this.targetLayout||!DN(this.targetLayout,k),M=!v&&w;if(this.options.layoutRoot||this.resumeFrom||M||v&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...ix(E,"layout"),onPlay:T,onComplete:F};(p.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(j,M)}else v||nj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Il(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cE),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let j=0;j<this.path.length;j++){const v=this.path[j];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:f,layout:g}=this.options;if(f===void 0&&!g)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aj);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(rj);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(iE),this.nodes.forEach(tE),this.nodes.forEach(sE)):this.nodes.forEach(rj),this.clearAllSnapshots();const f=Zr.now();mr.delta=el(0,1e3/60,f-mr.timestamp),mr.timestamp=f,mr.isProcessing=!0,_f.update.process(mr),_f.preRender.process(mr),_f.render.process(mr),mr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ox.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nE),this.sharedNodes.forEach(dE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Aa.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Aa.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dr(this.snapshot.measuredBox.x)&&!Dr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ka(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(f=!1),f&&this.instance){const g=l(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:g,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!d)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!kN(this.projectionDelta),g=this.getTransformTemplate(),p=g?g(this.latestValues,""):void 0,j=p!==this.prevTransformTemplateValue;u&&this.instance&&(f||lo(this.latestValues)||j)&&(d(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const f=this.measurePageBox();let g=this.removeElementScroll(f);return u&&(g=this.removeTransform(g)),fE(g),{animationId:this.root.animationId,measuredBox:f,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:u}=this.options;if(!u)return Ka();const f=u.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(hE))){const{scroll:j}=this.root;j&&(sc(f.x,j.offset.x),sc(f.y,j.offset.y))}return f}removeElementScroll(u){var g;const f=Ka();if(Kn(f,u),(g=this.scroll)!=null&&g.wasRoot)return f;for(let p=0;p<this.path.length;p++){const j=this.path[p],{scroll:v,options:w}=j;j!==this.root&&v&&w.layoutScroll&&(v.wasRoot&&Kn(f,u),sc(f.x,v.offset.x),sc(f.y,v.offset.y))}return f}applyTransform(u,f=!1){const g=Ka();Kn(g,u);for(let p=0;p<this.path.length;p++){const j=this.path[p];!f&&j.options.layoutScroll&&j.scroll&&j!==j.root&&ac(g,{x:-j.scroll.offset.x,y:-j.scroll.offset.y}),lo(j.latestValues)&&ac(g,j.latestValues)}return lo(this.latestValues)&&ac(g,this.latestValues),g}removeTransform(u){const f=Ka();Kn(f,u);for(let g=0;g<this.path.length;g++){const p=this.path[g];if(!p.instance||!lo(p.latestValues))continue;gh(p.latestValues)&&p.updateSnapshot();const j=Ka(),v=p.measurePageBox();Kn(j,v),Jy(f,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,j)}return lo(this.latestValues)&&Jy(f,this.latestValues),f}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var k;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==f;if(!(u||g&&this.isSharedProjectionDirty||this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:j,layoutId:v}=this.options;if(!this.layout||!(j||v))return;this.resolvedRelativeTargetAt=mr.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ka(),this.targetWithTransforms=Ka()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Kn(this.target,this.layout.layoutBox),dN(this.target,this.targetDelta)):Kn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||gh(this.parent.latestValues)||cN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,f,g){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ka(),this.relativeTargetOrigin=Ka(),km(this.relativeTargetOrigin,f,g),Kn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var E;const u=this.getLead(),f=!!this.resumingFrom||this!==u;let g=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(g=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===mr.timestamp&&(g=!1),g)return;const{layout:p,layoutId:j}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||j))return;Kn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,w=this.treeScale.y;_6(this.layoutCorrected,this.treeScale,this.path,f),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Ka());const{target:k}=u;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Yy(this.prevProjectionDelta.x,this.projectionDelta.x),Yy(this.prevProjectionDelta.y,this.projectionDelta.y)),Sd(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==w||!sj(this.projectionDelta.x,this.prevProjectionDelta.x)||!sj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),u){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rc(),this.projectionDelta=rc(),this.projectionDeltaWithTransform=rc()}setAnimationOrigin(u,f=!1){const g=this.snapshot,p=g?g.latestValues:{},j={...this.latestValues},v=rc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const w=Ka(),k=g?g.source:void 0,E=this.layout?this.layout.source:void 0,T=k!==E,F=this.getStack(),L=!F||F.members.length<=1,M=!!(T&&!L&&this.options.crossfade===!0&&!this.path.some(mE));this.animationProgress=0;let V;this.mixTargetDelta=le=>{const G=le/1e3;ij(v.x,u.x,G),ij(v.y,u.y,G),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(km(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),uE(this.relativeTarget,this.relativeTargetOrigin,w,G),V&&ZA(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=Ka()),Kn(V,this.relativeTarget)),T&&(this.animationValues=j,qA(j,p,this.latestValues,G,M,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var f,g,p;this.notifyListeners("animationStart"),(f=this.currentAnimation)==null||f.stop(),(p=(g=this.resumingFrom)==null?void 0:g.currentAnimation)==null||p.stop(),this.pendingAnimation&&(Il(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Aa.update(()=>{jm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=mc(0)),this.currentAnimation=FA(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:j=>{this.mixTargetDelta(j),u.onUpdate&&u.onUpdate(j)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:f,target:g,layout:p,latestValues:j}=u;if(!(!f||!g||!p)){if(this!==u&&this.layout&&p&&RN(this.options.animationType,this.layout.layoutBox,p.layoutBox)){g=this.target||Ka();const v=Dr(this.layout.layoutBox.x);g.x.min=u.target.x.min,g.x.max=g.x.min+v;const w=Dr(this.layout.layoutBox.y);g.y.min=u.target.y.min,g.y.max=g.y.min+w}Kn(f,g),ac(f,j),Sd(this.projectionDeltaWithTransform,this.layoutCorrected,f,j)}}registerSharedNode(u,f){this.sharedNodes.has(u)||this.sharedNodes.set(u,new JA),this.sharedNodes.get(u).add(f);const p=f.options.initialPromotionConfig;f.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(f):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var f;const{layoutId:u}=this.options;return u?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:u}=this.options;return u?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:f,preserveFollowOpacity:g}={}){const p=this.getStack();p&&p.promote(this,g),u&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let f=!1;const{latestValues:g}=u;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(f=!0),!f)return;const p={};g.z&&Qf("z",u,p,this.animationValues);for(let j=0;j<Gf.length;j++)Qf(`rotate${Gf[j]}`,u,p,this.animationValues),Qf(`skew${Gf[j]}`,u,p,this.animationValues);u.render();for(const j in p)u.setStaticValue(j,p[j]),this.animationValues&&(this.animationValues[j]=p[j]);u.scheduleRender()}applyProjectionStyles(u,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=ym(f==null?void 0:f.pointerEvents)||"",u.transform=g?g(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=ym(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!lo(this.latestValues)&&(u.transform=g?g({},""):"none",this.hasProjected=!1);return}u.visibility="";const j=p.animationValues||p.latestValues;this.applyTransformsToTarget();let v=KA(this.projectionDeltaWithTransform,this.treeScale,j);g&&(v=g(j,v)),u.transform=v;const{x:w,y:k}=this.projectionDelta;u.transformOrigin=`${w.origin*100}% ${k.origin*100}% 0`,p.animationValues?u.opacity=p===this?j.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:j.opacityExit:u.opacity=p===this?j.opacity!==void 0?j.opacity:"":j.opacityExit!==void 0?j.opacityExit:0;for(const E in xh){if(j[E]===void 0)continue;const{correct:T,applyTo:F,isCSSVariable:L}=xh[E],M=v==="none"?j[E]:T(j[E],p);if(F){const V=F.length;for(let le=0;le<V;le++)u[F[le]]=M}else L?this.options.visualElement.renderState.vars[E]=M:u[E]=M}this.options.layoutId&&(u.pointerEvents=p===this?ym(f==null?void 0:f.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var f;return(f=u.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(aj),this.root.sharedNodes.clear()}}}function tE(s){s.updateLayout()}function sE(s){var i;const r=((i=s.resumeFrom)==null?void 0:i.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&r&&s.hasListeners("didUpdate")){const{layoutBox:l,measuredBox:d}=s.layout,{animationType:m}=s.options,u=r.source!==s.layout.source;m==="size"?Pn(v=>{const w=u?r.measuredBox[v]:r.layoutBox[v],k=Dr(w);w.min=l[v].min,w.max=w.min+k}):RN(m,r.layoutBox,l)&&Pn(v=>{const w=u?r.measuredBox[v]:r.layoutBox[v],k=Dr(l[v]);w.max=w.min+k,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[v].max=s.relativeTarget[v].min+k)});const f=rc();Sd(f,l,r.layoutBox);const g=rc();u?Sd(g,s.applyTransform(d,!0),r.measuredBox):Sd(g,l,r.layoutBox);const p=!kN(f);let j=!1;if(!s.resumeFrom){const v=s.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:w,layout:k}=v;if(w&&k){const E=Ka();km(E,r.layoutBox,w.layoutBox);const T=Ka();km(T,l,k.layoutBox),DN(E,T)||(j=!0),v.options.layoutRoot&&(s.relativeTarget=T,s.relativeTargetOrigin=E,s.relativeParent=v)}}}s.notifyListeners("didUpdate",{layout:l,snapshot:r,delta:g,layoutDelta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:j})}else if(s.isLead()){const{onExitComplete:l}=s.options;l&&l()}s.options.transition=void 0}function aE(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function rE(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function nE(s){s.clearSnapshot()}function aj(s){s.clearMeasurements()}function rj(s){s.isLayoutDirty=!1}function iE(s){const{visualElement:r}=s.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),s.resetTransform()}function nj(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function lE(s){s.resolveTargetDelta()}function oE(s){s.calcProjection()}function cE(s){s.resetSkewAndRotation()}function dE(s){s.removeLeadSnapshot()}function ij(s,r,i){s.translate=Ta(r.translate,0,i),s.scale=Ta(r.scale,1,i),s.origin=r.origin,s.originPoint=r.originPoint}function lj(s,r,i,l){s.min=Ta(r.min,i.min,l),s.max=Ta(r.max,i.max,l)}function uE(s,r,i,l){lj(s.x,r.x,i.x,l),lj(s.y,r.y,i.y,l)}function mE(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const pE={duration:.45,ease:[.4,0,.1,1]},oj=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),cj=oj("applewebkit/")&&!oj("chrome/")?Math.round:zn;function dj(s){s.min=cj(s.min),s.max=cj(s.max)}function fE(s){dj(s.x),dj(s.y)}function RN(s,r,i){return s==="position"||s==="preserve-aspect"&&!NA(tj(r),tj(i),.2)}function hE(s){var r;return s!==s.root&&((r=s.scroll)==null?void 0:r.wasRoot)}const xE=ON({attachResizeListener:(s,r)=>zd(s,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yf={current:void 0},MN=ON({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Yf.current){const s=new xE({});s.mount(window),s.setOptions({layoutScroll:!0}),Yf.current=s}return Yf.current},resetTransform:(s,r)=>{s.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),gE={pan:{Feature:LA},drag:{Feature:zA,ProjectionNode:MN,MeasureLayout:AN}};function uj(s,r,i){const{props:l}=s;s.animationState&&l.whileHover&&s.animationState.setActive("whileHover",i==="Start");const d="onHover"+i,m=l[d];m&&Aa.postRender(()=>m(r,Gd(r)))}class bE extends ql{mount(){const{current:r}=this.node;r&&(this.unmount=IC(r,(i,l)=>(uj(this.node,l,"Start"),d=>uj(this.node,d,"End"))))}unmount(){}}class yE extends ql{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bd(zd(this.node.current,"focus",()=>this.onFocus()),zd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mj(s,r,i){const{props:l}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&l.whileTap&&s.animationState.setActive("whileTap",i==="Start");const d="onTap"+(i==="End"?"":i),m=l[d];m&&Aa.postRender(()=>m(r,Gd(r)))}class jE extends ql{mount(){const{current:r}=this.node;r&&(this.unmount=HC(r,(i,l)=>(mj(this.node,l,"Start"),(d,{success:m})=>mj(this.node,d,m?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Sh=new WeakMap,Wf=new WeakMap,vE=s=>{const r=Sh.get(s.target);r&&r(s)},NE=s=>{s.forEach(vE)};function wE({root:s,...r}){const i=s||document;Wf.has(i)||Wf.set(i,{});const l=Wf.get(i),d=JSON.stringify(r);return l[d]||(l[d]=new IntersectionObserver(NE,{root:s,...r})),l[d]}function SE(s,r,i){const l=wE(r);return Sh.set(s,i),l.observe(s),()=>{Sh.delete(s),l.unobserve(s)}}const CE={some:0,all:1};class AE extends ql{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:i,margin:l,amount:d="some",once:m}=r,u={root:i?i.current:void 0,rootMargin:l,threshold:typeof d=="number"?d:CE[d]},f=g=>{const{isIntersecting:p}=g;if(this.isInView===p||(this.isInView=p,m&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:j,onViewportLeave:v}=this.node.getProps(),w=p?j:v;w&&w(g)};return SE(this.node.current,u,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:i}=this.node;["amount","margin","root"].some(EE(r,i))&&this.startObserver()}unmount(){}}function EE({viewport:s={}},{viewport:r={}}={}){return i=>s[i]!==r[i]}const TE={inView:{Feature:AE},tap:{Feature:jE},focus:{Feature:yE},hover:{Feature:bE}},kE={layout:{ProjectionNode:MN,MeasureLayout:AN}},DE={...xA,...TE,...gE,...kE},at=O6(DE,H6),PE=()=>{var V,le,G,z,P,J;const[s,r]=y.useState(!1),[i,l]=y.useState(!1),[d,m]=y.useState(!1),[u,f]=y.useState(null),g=ni(),p=nr();y.useEffect(()=>{if(typeof window>"u")return;const W=localStorage.getItem("token"),oe=localStorage.getItem("user");if(W&&oe)try{f(JSON.parse(oe))}catch(ce){console.error("Error parsing user data:",ce),localStorage.removeItem("token"),localStorage.removeItem("user")}else f(null);w(!0)},[g.pathname]),y.useEffect(()=>{const W=()=>{r(window.scrollY>20)};return window.addEventListener("scroll",W),()=>window.removeEventListener("scroll",W)},[]),y.useEffect(()=>{const W=oe=>{oe.target.closest(".profile-dropdown")||m(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const j=[{label:"Home",path:"/"},{label:"Services",path:"/digital-print"},{label:"Upload",path:"/upload"},{label:"About",path:"/about"},{label:"Policy",path:"/policy"},{label:"Reviews",path:"/reviews"}],[v,w]=Pr.useState(!1),k=j,E=W=>W==="/"&&g.pathname!=="/"?!1:g.pathname.startsWith(W),T=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),f(null),m(!1),p("/"),window.location.reload()},F=W=>!W||W.length===0?"??":W.split(" ").map(oe=>oe[0]).join("").toUpperCase().slice(0,2),L=W=>{const oe=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-orange-500","bg-teal-500"];if(!W||W.length===0)return oe[0];const ce=W.length%oe.length;return oe[ce]},M=g.pathname==="/login"||g.pathname==="/signup";return e.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${s?"bg-white/95 backdrop-blur-md shadow-sm py-2":"bg-white py-2"}`,children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center h-16 relative",children:[e.jsx(at.div,{initial:!1,animate:{left:M?"50%":"0px",x:M?"-50%":"0%"},transition:{duration:.6,ease:[.4,0,.2,1]},className:"flex items-center absolute",children:e.jsx(ks,{to:"/",className:"flex items-center gap-2 group cursor-pointer h-full",onClick:W=>{M?(W.preventDefault(),p("/")):g.pathname==="/"&&window.scrollTo({top:0,behavior:"smooth"})},children:e.jsx(at.img,{src:"/logo.svg",alt:"Prints24 Logo",className:`object-contain group-hover:scale-105 transition-all duration-300 cursor-pointer ${M?"h-12 sm:h-14 md:h-16 w-auto":"h-12 w-auto sm:h-14 md:h-16"}`,initial:!1})})}),!M&&e.jsxs("div",{className:"flex-1 flex items-center justify-end",children:[e.jsx("div",{className:"hidden md:flex items-center space-x-6",children:k.map(W=>e.jsxs(ks,{to:W.path,className:`text-sm font-medium transition-colors duration-200 relative group ${E(W.path)?"text-cream-800 font-semibold":"text-cream-600 hover:text-cream-900"}`,children:[W.label,e.jsx("span",{className:`absolute -bottom-1 left-0 w-0 h-0.5 bg-cream-800 transition-all duration-300 group-hover:w-full ${E(W.path)?"w-full":""}`})]},W.path))}),e.jsx("div",{className:"hidden md:flex items-center space-x-3 ml-8",children:!u||!v?e.jsxs(e.Fragment,{children:[e.jsx(ks,{to:"/login",children:e.jsx("button",{className:"text-cream-900 font-medium text-base hover:text-cream-600 transition-colors px-4 py-2",children:"Login"})}),e.jsx(ks,{to:"/signup",children:e.jsx("button",{className:"bg-cream-900 text-cream-50 px-6 py-2.5 rounded-full text-base font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Sign Up"})})]}):e.jsxs("div",{className:"relative profile-dropdown",children:[e.jsxs("button",{onClick:()=>m(!d),className:"flex items-center gap-2 p-2 rounded-lg hover:bg-cream-100 transition-colors",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${L(u.name||u.email||"User")} flex items-center justify-center text-white text-sm font-bold`,children:F(u.name||((V=u.email)==null?void 0:V.split("@")[0])||"User")}),e.jsx("span",{className:"text-cream-700 text-sm font-medium",children:(u.name||((le=u.email)==null?void 0:le.split("@")[0])||"User").split(" ")[0]})]}),e.jsx(ha,{children:d&&e.jsxs(at.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-xl shadow-lg border border-cream-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-cream-100",children:[" ",e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${L(u.name||u.email||"User")} flex items-center justify-center text-white font-bold`,children:F(u.name||((G=u.email)==null?void 0:G.split("@")[0])||"User")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-cream-900 truncate",children:u.name||((z=u.email)==null?void 0:z.split("@")[0])||"User"}),e.jsx("p",{className:"text-xs text-cream-600 truncate",children:u.email}),e.jsxs("span",{className:"inline-block mt-1 px-2 py-1 bg-cream-100 text-cream-700 text-xs rounded-full capitalize",children:[" ",u.role]})]})]})]}),e.jsxs("div",{className:"py-2",children:[" ",e.jsxs("button",{onClick:()=>{p("/profile"),m(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-cream-700 hover:bg-cream-50 transition-colors",children:[e.jsx(ei,{size:16}),"My Profile"]}),u.role==="admin"&&e.jsxs("button",{onClick:()=>{p("/admin/dashboard"),m(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-cream-700 hover:bg-cream-50 transition-colors",children:[e.jsx(Er,{size:16}),"Admin Dashboard"]}),u.role==="emp"&&e.jsxs("button",{onClick:()=>{p("/employee/dashboard"),m(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-cream-700 hover:bg-cream-50 transition-colors",children:[e.jsx(Na,{size:16}),"Employee Dashboard"]})]}),e.jsxs("div",{className:"border-t border-cream-100 pt-2",children:[" ",e.jsxs("button",{onClick:T,className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Zb,{size:16}),"Logout"]})]})]})})]})})]}),!M&&e.jsx("div",{className:"md:hidden",children:e.jsxs("button",{onClick:()=>l(!i),className:"text-cream-900 focus:outline-none p-1",children:[i?e.jsx(ns,{size:28}):e.jsx(e5,{size:28})," "]})})]})}),!M&&e.jsx(ha,{children:i&&e.jsx(at.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-cream-50 border-t border-cream-200",children:e.jsxs("div",{className:"px-4 pt-2 pb-4 space-y-2",children:[" ",k.map(W=>e.jsx(ks,{to:W.path,onClick:()=>l(!1),className:`block px-3 py-2 rounded-md text-base font-medium ${E(W.path)?"bg-cream-100 text-cream-900":"text-cream-600 hover:bg-cream-100 hover:text-cream-900"}`,children:W.label},W.path)),e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200 flex flex-col space-y-3",children:[" ",!u||!v?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{p("/login"),l(!1)},className:"w-full text-center text-cream-900 font-medium text-base py-3",children:"Login"}),e.jsx("button",{onClick:()=>{p("/signup"),l(!1)},className:"w-full bg-cream-900 text-cream-50 py-3 rounded-lg font-medium text-base",children:"Sign Up"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-3 py-2 bg-cream-100 rounded-lg",children:[" ",e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${L(u.name||u.email||"User")} flex items-center justify-center text-white text-sm font-bold`,children:F(u.name||((P=u.email)==null?void 0:P.split("@")[0])||"User")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-cream-900",children:u.name||((J=u.email)==null?void 0:J.split("@")[0])||"User"}),e.jsx("p",{className:"text-xs text-cream-600",children:u.email})]})]})]}),e.jsxs("button",{onClick:()=>{p("/profile"),l(!1)},className:"w-full text-center text-cream-900 font-medium py-2 flex items-center justify-center gap-2",children:[e.jsx(ei,{size:16}),"My Profile"]}),u.role==="admin"&&e.jsxs("button",{onClick:()=>{p("/admin/dashboard"),l(!1)},className:"w-full text-center text-cream-900 font-medium py-2 flex items-center justify-center gap-2",children:[e.jsx(Er,{size:16}),"Admin Dashboard"]}),e.jsxs("button",{onClick:()=>{T(),l(!1)},className:"w-full bg-red-600 text-white py-2.5 rounded-lg font-medium flex items-center justify-center gap-2",children:[e.jsx(Zb,{size:16}),"Logout"]})]})]})]})})})]})},OE=()=>e.jsx("footer",{className:"bg-cream-900 text-cream-100 pt-8 sm:pt-12 md:pt-16 pb-6 sm:pb-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 sm:gap-10 md:gap-12",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("h3",{className:"font-serif text-xl sm:text-2xl font-bold text-cream-50",children:"Prints24"}),e.jsx("p",{className:"text-cream-200 text-xs sm:text-sm leading-relaxed",children:"Modern, fast-growing digital & offset printing company providing creative and high-quality solutions."}),e.jsxs("div",{className:"flex space-x-3 sm:space-x-4 pt-2",children:[e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx(S4,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx(U5,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx(V4,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx(H4,{size:18,className:"sm:w-5 sm:h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-serif text-base sm:text-lg font-semibold text-cream-50 mb-4 sm:mb-6",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[e.jsx("li",{children:e.jsx(ks,{to:"/",className:"hover:text-white transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx(ks,{to:"/digital-print",className:"hover:text-white transition-colors",children:"Digital Print"})}),e.jsx("li",{children:e.jsx(ks,{to:"/upload",className:"hover:text-white transition-colors",children:"Upload Files"})}),e.jsx("li",{children:e.jsx(ks,{to:"/about",className:"hover:text-white transition-colors",children:"About Us"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-serif text-base sm:text-lg font-semibold text-cream-50 mb-4 sm:mb-6",children:"Customer Service"}),e.jsxs("ul",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[e.jsx("li",{children:e.jsx(ks,{to:"/policy",className:"hover:text-white transition-colors",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(ks,{to:"/policy",className:"hover:text-white transition-colors",children:"Terms & Conditions"})}),e.jsx("li",{children:e.jsx(ks,{to:"/policy",className:"hover:text-white transition-colors",children:"Shipping Policy"})}),e.jsx("li",{children:e.jsx(ks,{to:"/login",className:"hover:text-white transition-colors",children:"My Account"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-serif text-base sm:text-lg font-semibold text-cream-50 mb-4 sm:mb-6",children:"Contact"}),e.jsxs("ul",{className:"space-y-3 sm:space-y-4 text-xs sm:text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx(ti,{size:16,className:"sm:w-[18px] sm:h-[18px] mt-0.5 shrink-0"}),e.jsxs("span",{children:["123 Print Street, Creative District,",e.jsx("br",{}),"New York, NY 10001"]})]}),e.jsxs("li",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(xm,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),e.jsx("span",{children:"+1 (555) 123-4567"})]}),e.jsxs("li",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(po,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),e.jsx("span",{children:"support@prints24.com"})]})]})]})]}),e.jsx("div",{className:"border-t border-cream-800 mt-8 sm:mt-12 pt-6 sm:pt-8 text-center text-xs sm:text-sm text-cream-400",children:e.jsx("p",{children:" 2024 Prints24. All rights reserved."})})]})}),RE=()=>{const[s,r]=Pr.useState(null);return Pr.useEffect(()=>{typeof window<"u"&&Vd(()=>Promise.resolve().then(()=>sk),[]).then(i=>{r(()=>i.Toaster)})},[]),s?e.jsx(s,{position:"bottom-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}):null},ME=()=>{const s=ni();Pr.useEffect(()=>{typeof window<"u"&&window.scrollTo(0,0)},[s.pathname]);const[r,i]=Pr.useState(!1);return Pr.useEffect(()=>{const l=setTimeout(()=>{i(!0)},100);return()=>clearTimeout(l)},[]),e.jsxs("div",{className:"min-h-screen flex flex-col font-sans text-cream-900 bg-cream-50",children:[e.jsx(PE,{}),e.jsx("main",{className:"flex-grow pt-16",children:e.jsx("div",{children:e.jsx("div",{children:e.jsx(sS,{})})},s.pathname)}),e.jsx(OE,{}),e.jsx(RE,{})]})},Zf=[{id:1,image:"/banner.jpg",alt:"Prints 24 Banner"}],_E=()=>{const[s,r]=y.useState(0);return y.useEffect(()=>{const i=setInterval(()=>{r(l=>(l+1)%Zf.length)},5e3);return()=>clearInterval(i)},[]),e.jsxs("section",{className:"relative mt-2 mr-4 sm:mt-4 md:mt-6 h-[70vh] sm:h-[50vh] md:h-[55vh] lg:h-[60vh] xl:h-[65vh] min-h-[420px] sm:min-h-[380px] md:min-h-[400px] lg:min-h-[450px] xl:min-h-[500px] max-h-[750px] sm:max-h-[600px] md:max-h-[650px] lg:max-h-[700px] xl:max-h-[750px] w-full overflow-hidden bg-cream-900 rounded-xl sm:rounded-2xl md:rounded-3xl mx-2 sm:mx-4 md:mx-6 lg:mx-8",children:[e.jsx(ha,{mode:"wait",children:e.jsxs(at.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:1.5},className:"absolute inset-0",children:[e.jsx("img",{src:Zf[s].image,alt:Zf[s].alt,className:"w-full h-full object-cover",loading:"eager"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-black/60 backdrop-blur-[1px] sm:backdrop-blur-[2px]"})]},s)}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 z-10",children:e.jsxs(at.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-3xl md:max-w-4xl lg:max-w-5xl xl:max-w-6xl w-full",children:[e.jsx("div",{className:"inline-block py-2 px-4 sm:py-2.5 sm:px-6 md:py-3 md:px-8 lg:py-4 lg:px-10 rounded-full bg-cream-50/95 backdrop-blur-sm sm:backdrop-blur-md border border-white/20 mb-4 sm:mb-6 md:mb-8 lg:mb-10",children:e.jsx("span",{className:"text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl font-bold text-gray-800 uppercase tracking-wider",children:"WELCOME TO PRINTS 24"})}),e.jsxs("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-4 sm:mb-5 md:mb-6 lg:mb-8 leading-tight drop-shadow-lg px-2 sm:px-4",children:["Premium Printing ",e.jsx("br",{className:"hidden sm:block"}),e.jsx("span",{className:"text-cream-300 italic",children:"Simplified"})]}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl text-cream-100 mb-6 sm:mb-8 md:mb-10 lg:mb-12 max-w-xl sm:max-w-2xl md:max-w-3xl mx-auto leading-relaxed drop-shadow-md px-2 sm:px-4",children:"India's easiest and fastest printing platform. Design your personality and receive premium prints delivered right to your desk."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4 md:gap-5 lg:gap-6 px-4 sm:px-6 md:px-8",children:[e.jsxs(ks,{to:"/signup",className:"bg-cream-50 text-cream-900 px-5 py-2.5 sm:px-6 sm:py-3 md:px-7 md:py-3.5 lg:px-8 lg:py-4 rounded-full text-sm sm:text-base md:text-lg lg:text-xl font-bold hover:bg-white transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 sm:hover:-translate-y-1 flex items-center justify-center gap-2 w-full sm:w-auto sm:min-w-[180px] md:min-w-[200px] lg:min-w-[220px]",children:[e.jsx(gd,{size:16,className:"sm:w-4 sm:h-4 md:w-5 md:h-5 lg:w-6 lg:h-6"}),e.jsx("span",{children:"Sign Up Now"})]}),e.jsxs(ks,{to:"/digital-print",className:"bg-cream-50 text-cream-900 px-5 py-2.5 sm:px-6 sm:py-3 md:px-7 md:py-3.5 lg:px-8 lg:py-4 rounded-full text-sm sm:text-base md:text-lg lg:text-xl font-bold hover:bg-white transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 sm:hover:-translate-y-1 flex items-center justify-center gap-2 w-full sm:w-auto sm:min-w-[180px] md:min-w-[200px] lg:min-w-[220px]",children:[e.jsx(h4,{size:16,className:"sm:w-4 sm:h-4 md:w-5 md:h-5 lg:w-6 lg:h-6"}),e.jsx("span",{children:"Explore Products"})]})]})]})})]})},zE=[{id:"cards",title:"Visiting Cards",description:"Premium matte, gloss, and textured business cards.",icon:$l},{id:"flyers",title:"Flyers & Brochures",description:"High-quality marketing materials for your business.",icon:Kr},{id:"idcards",title:"ID Cards",description:"Durable employee and student identification cards.",icon:QS},{id:"letterhead",title:"Letterhead",description:"Professional official stationary.",icon:Kr},{id:"stickers",title:"Stickers",description:"Custom shapes and sizes for branding.",icon:P5},{id:"invites",title:"Invitations",description:"Elegant cards for weddings and events.",icon:po},{id:"banners",title:"Flex & Banners",description:"Large format printing for maximum visibility.",icon:vi},{id:"more",title:"Digital Printing",description:"Custom solutions for all your printing needs.",icon:tv}],LE={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},$E={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},FE=({children:s,categories:r,loadingCategories:i})=>e.jsx("section",{className:"pt-2 sm:pt-4 pb-6 sm:pb-8 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-2 sm:mb-4",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl md:text-4xl font-bold text-cream-900 mb-3 sm:mb-4",children:"Our Products"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600 max-w-xl mx-auto mb-2 sm:mb-3",children:"Select from our wide range of premium printed products specially crafted for you"})]}),!i&&r.length>0&&e.jsxs(e.Fragment,{children:[s,e.jsx("div",{className:"text-center mt-6",children:e.jsxs(ks,{to:"/digital-print",className:"inline-flex items-center gap-2 bg-cream-900 text-cream-50 px-8 py-3 rounded-full font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1",children:["Explore More",e.jsx(Jr,{size:18})]})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h3",{className:"font-serif text-3xl font-bold text-cream-900 mb-2",children:"All Services"})}),e.jsx(at.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",variants:LE,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:zE.map(l=>e.jsx(at.div,{variants:$E,children:e.jsx(ks,{to:"/digital-print",children:e.jsx("div",{className:"group h-full p-8 bg-cream-50 rounded-2xl hover:bg-cream-900 transition-all duration-300 cursor-pointer relative overflow-hidden border border-cream-100 hover:shadow-2xl",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-14 h-14 bg-cream-200 text-cream-900 rounded-xl flex items-center justify-center mb-6 group-hover:bg-cream-800 group-hover:text-cream-50 transition-colors",children:e.jsx(l.icon,{size:28})}),e.jsx("h3",{className:"font-serif text-xl font-semibold mb-3 text-cream-900 group-hover:text-cream-50 transition-colors",children:l.title}),e.jsx("p",{className:"text-cream-600 text-sm group-hover:text-cream-200 transition-colors",children:l.description})]})})})},l.id))})]})]})}),pj=s=>s>=1536?7:s>=1280?6:s>=1024?5:s>=768?4:s>=640?3:2,UE=({categories:s,loadingCategories:r})=>(y.useEffect(()=>{if(r||s.length===0)return;let i=null,l=!1,d=Date.now(),m=!1;const u=()=>{const M=document.getElementById("category-scroll-container");if(!M)return;l=!0;const V=M.scrollWidth-M.clientWidth,le=M.scrollLeft,G=window.innerWidth;let z=G/2;if(G>=1280?z=G*.2:G>=1024?z=G*.25:G>=768?z=G*.333:G>=640&&(z=G/2),le>=V-10)M.scrollTo({left:0,behavior:"smooth"});else{const P=le+z;P>=V?M.scrollTo({left:V,behavior:"smooth"}):(M.style.scrollBehavior="smooth",M.style.transition="scroll-left 0.8s ease-in-out",M.scrollTo({left:P,behavior:"smooth"}))}setTimeout(()=>{l=!1,d=Date.now(),m=!1,f()},1e3)},f=()=>{if(l)return;const M=m?2e4:1e4,V=Date.now()-d,le=Math.max(0,M-V);i=setTimeout(()=>{Date.now()-d>=(m?2e4:1e4)?u():(l=!1,f())},le)},g=()=>{d=Date.now(),m=!1,i&&(clearTimeout(i),i=null),l=!1,f()},p=()=>{d=Date.now(),m=!0,i&&(clearTimeout(i),i=null),l=!1,f()};window.homeCategoryUpdateFromArrow=p;const j=()=>g(),v=()=>g(),w=()=>g(),k=()=>g(),E=()=>g(),T=()=>g(),F=()=>g();window.addEventListener("mousemove",j),window.addEventListener("mousedown",k),window.addEventListener("click",w),window.addEventListener("keydown",E),window.addEventListener("touchstart",T),window.addEventListener("wheel",F);const L=document.getElementById("category-scroll-container");return L&&L.addEventListener("mouseenter",v),d=Date.now(),f(),()=>{i&&clearTimeout(i),window.removeEventListener("mousemove",j),window.removeEventListener("mousedown",k),window.removeEventListener("click",w),window.removeEventListener("keydown",E),window.removeEventListener("touchstart",T),window.removeEventListener("wheel",F),L&&L.removeEventListener("mouseenter",v)}},[r,s.length]),e.jsx("div",{className:"mb-10",children:e.jsxs("div",{className:"relative group/slider overflow-hidden",onMouseEnter:()=>{window.categoryLastInteraction=Date.now()},onMouseLeave:()=>{window.categoryLastInteraction=Date.now()},children:[e.jsx("button",{onClick:()=>{const i=document.getElementById("category-scroll-container");if(i){const l=window.innerWidth,d=pj(l),m=l/d,u=i.scrollLeft;u<=0?i.scrollTo({left:i.scrollWidth-i.clientWidth,behavior:"smooth"}):i.scrollTo({left:u-m,behavior:"smooth"})}window.homeCategoryUpdateFromArrow&&window.homeCategoryUpdateFromArrow()},className:"absolute left-1 sm:left-2 md:left-3 z-10 w-7 h-7 sm:w-8 sm:h-8 md:w-9 md:h-9 bg-white/95 hover:bg-white active:bg-white shadow-sm sm:shadow-md rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 0.875rem)"},children:e.jsx(Fl,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"})}),e.jsx("button",{onClick:()=>{const i=document.getElementById("category-scroll-container");if(i){const l=window.innerWidth,d=pj(l),m=l/d,u=i.scrollLeft,f=i.scrollWidth-i.clientWidth,g=u+m;u>=f-1?i.scrollTo({left:0,behavior:"smooth"}):g>=f?i.scrollTo({left:f,behavior:"smooth"}):i.scrollTo({left:g,behavior:"smooth"})}window.homeCategoryUpdateFromArrow&&window.homeCategoryUpdateFromArrow()},className:"absolute right-1 sm:right-2 md:right-3 z-10 w-7 h-7 sm:w-8 sm:h-8 md:w-9 md:h-9 bg-white/95 hover:bg-white active:bg-white shadow-sm sm:shadow-md rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 0.875rem)"},children:e.jsx(Ha,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"})}),e.jsx("div",{id:"category-scroll-container",className:"flex overflow-x-auto overflow-y-hidden pb-1 sm:pb-2 md:pb-3 snap-x snap-mandatory scroll-smooth touch-pan-x",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth"},children:s.map((i,l)=>e.jsx(at.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:l*.03},className:"flex-shrink-0 snap-start transition-all duration-500 ease-in-out w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 2xl:w-[14.285%] px-0.5 sm:px-0.5 md:px-0.5",children:e.jsx(ks,{to:`/digital-print/${i._id}`,className:"block",children:e.jsxs("div",{className:"group flex flex-col items-center gap-0.5 sm:gap-1 p-1.5 sm:p-2 rounded-lg transition-all duration-300 relative",children:[i.type&&e.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 px-1.5 sm:px-2 md:px-2.5 py-0.5 sm:py-0.5 md:py-1 rounded-full text-[8px] sm:text-[9px] md:text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 whitespace-nowrap shadow-md ${i.type==="digital"?"bg-[#588157] text-white":"bg-[#003049] text-white"}`,children:i.type==="digital"?"Digital Print":"Bulk Print"}),e.jsx("div",{className:`w-18 h-18 sm:w-20 sm:h-20 md:w-24 md:h-24 lg:w-28 lg:h-28 xl:w-32 xl:h-32 rounded-full overflow-hidden bg-white transition-all duration-300 shadow-sm group-hover:shadow-md group-hover:scale-105 flex items-center justify-center relative ${i.type==="digital"?"group-hover:bg-[#f5faf0]":"group-hover:bg-[#f5fbff]"}`,children:e.jsx("img",{src:i.image,alt:i.name,className:`${i.name.toLowerCase().includes("visiting card")?"w-full h-full object-cover":i.name.toLowerCase().includes("card holder")?"w-9 h-9 sm:w-10 sm:h-10 md:w-12 md:h-12 lg:w-14 lg:h-14 xl:w-16 xl:h-16 object-contain":"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-18 lg:h-18 xl:w-20 xl:h-20 object-contain"}`})}),e.jsx("span",{className:"text-xs font-semibold text-cream-900 text-center max-w-[70px] sm:max-w-[80px] md:max-w-[90px] line-clamp-2 leading-tight mt-0.5",children:i.name})]})})},i._id))})]})})),fj=({label:s,value:r,onChange:i,options:l,className:d=""})=>{const[m,u]=y.useState(!1),f=y.useRef(null),g=l.find(j=>j.value===r),p=j=>{i(j),u(!1)};return y.useEffect(()=>{const j=v=>{f.current&&!f.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),e.jsxs("div",{className:`relative ${d}`,ref:f,children:[e.jsxs("button",{type:"button",onClick:()=>u(!m),className:"flex items-center justify-between w-full px-4 py-2.5 text-sm font-medium text-cream-900 bg-white border border-cream-300 rounded-lg hover:bg-cream-50 focus:outline-none focus:ring-2 focus:ring-cream-500 focus:ring-offset-2 transition-colors",children:[e.jsx("span",{className:"truncate",children:g?g.label:s}),e.jsx(ic,{className:`w-4 h-4 ml-2 transition-transform ${m?"rotate-180":""}`})]}),m&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-cream-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:l.map(j=>e.jsx("button",{type:"button",onClick:()=>p(j.value),className:`w-full text-left px-4 py-3 text-sm hover:bg-cream-50 transition-colors ${j.value===r?"bg-cream-100 text-cream-900 font-medium":"text-cream-700"} first:rounded-t-lg last:rounded-b-lg`,children:j.label},j.label))})]})},hj=({review:s,index:r,isExpanded:i,onToggleExpand:l,view:d,isClient:m})=>{const u=d==="grid"?100:200,f=s.comment.length>u,g=i||!f?s.comment:s.comment.substring(0,u)+"...";return d==="list"?e.jsx(at.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:r*.05,ease:"easeOut"},className:"bg-white p-6 rounded-2xl shadow-md border border-cream-100 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-200 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-cream-900 font-bold text-lg",children:s.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-cream-900",children:s.userName}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(p=>e.jsx(si,{size:14,className:p<=s.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"},p))})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-cream-700 leading-relaxed",children:g}),f&&e.jsx("button",{onClick:l,className:"text-cream-900 hover:text-cream-700 text-sm font-medium mt-1 underline",children:i?"Show Less":"Show More"})]}),e.jsx("p",{className:"text-xs text-cream-500",children:m?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading..."})]})]})},s._id):e.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:r*.05,ease:"easeOut"},className:"bg-white p-6 rounded-2xl shadow-md border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-cream-900 font-bold text-lg",children:s.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-cream-900",children:s.userName}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(p=>e.jsx(si,{size:14,className:p<=s.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"},p))})]})]}),e.jsx("p",{className:"text-cream-700 leading-relaxed mb-4",children:g}),e.jsx("p",{className:"text-xs text-cream-500",children:m?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading..."})]},s._id)},IE=({reviews:s})=>{const r=s.length,i=r>0?s.reduce((l,d)=>l+d.rating,0)/r:0;return r===0?null:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 sm:gap-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Total Reviews"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-cream-900",children:r})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Average Rating"}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(l=>e.jsx(si,{size:16,className:`sm:w-5 sm:h-5 ${l<=Math.round(i)?"fill-yellow-400 text-yellow-400":"text-cream-300"}`},l))}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-cream-900",children:i.toFixed(1)})]})]})]})},VE=({reviews:s,loadingReviews:r,isLoggedIn:i,isClient:l})=>{const[d,m]=y.useState(null),[u,f]=y.useState("newest"),[g,p]=y.useState(!1),[j,v]=y.useState(!1),[w,k]=y.useState(new Set),T=[...s.filter(L=>!(d&&L.rating!==d))].sort((L,M)=>{const V=new Date(L.createdAt).getTime(),le=new Date(M.createdAt).getTime();return u==="newest"?le-V:u==="oldest"?V-le:le-V}),F=j||g?T:T.slice(0,6);return e.jsx("section",{className:"pt-8 sm:pt-12 pb-6 sm:pb-8 bg-cream-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl md:text-4xl font-bold text-cream-900 mb-3 sm:mb-4",children:"Customer Reviews"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600 max-w-xl mx-auto mb-4 sm:mb-6",children:"See what our customers have to say about their experience with Prints24."}),e.jsx(IE,{reviews:s})]}),e.jsx("div",{className:"max-w-6xl mx-auto mb-6 sm:mb-8",children:e.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl sm:rounded-2xl shadow-md border border-cream-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-0",children:[e.jsx(Kj,{size:18,className:"sm:w-5 sm:h-5 text-cream-600"}),e.jsx("span",{className:"text-sm sm:text-base font-medium text-cream-900",children:"Filters:"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[e.jsx("label",{className:"text-xs sm:text-sm text-cream-700 sm:whitespace-nowrap",children:"Rating:"}),e.jsx(fj,{label:"All Ratings",value:d,onChange:L=>m(L),options:[{value:null,label:"All Ratings"},{value:5,label:"5 Stars"},{value:4,label:"4 Stars"},{value:3,label:"3 Stars"},{value:2,label:"2 Stars"},{value:1,label:"1 Star"}],className:"w-full sm:w-auto"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[e.jsx("label",{className:"text-xs sm:text-sm text-cream-700 sm:whitespace-nowrap",children:"Sort by:"}),e.jsx(fj,{label:"Newest First",value:u,onChange:L=>f(L),options:[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"}],className:"w-full sm:w-auto"})]}),(d||u!=="newest")&&e.jsxs("button",{onClick:()=>{m(null),f("newest")},className:"flex items-center justify-center gap-2 px-4 py-2 text-xs sm:text-sm text-cream-700 hover:text-cream-900 border border-cream-300 rounded-lg hover:bg-cream-50 transition-colors",children:[e.jsx(ns,{size:14,className:"sm:w-4 sm:h-4"}),"Clear Filters"]}),e.jsxs(ks,{to:"/reviews",className:"flex items-center justify-center gap-2 px-4 sm:px-5 py-2 sm:py-2.5 bg-cream-900 text-cream-50 rounded-lg text-sm sm:text-base font-medium hover:bg-cream-800 transition-all shadow-md hover:shadow-lg sm:ml-auto",children:[e.jsx(i5,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),"Write Review"]})]})})}),r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:"Loading reviews..."})}):T.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:d?`No reviews found with ${d} star rating.`:"No reviews yet. Be the first to review!"})}):e.jsx(ha,{mode:"wait",children:j?e.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,ease:"easeInOut"},className:"max-w-4xl mx-auto space-y-4",children:F.map((L,M)=>e.jsx(hj,{review:L,index:M,isExpanded:w.has(L._id),onToggleExpand:()=>{const V=new Set(w);w.has(L._id)?V.delete(L._id):V.add(L._id),k(V)},view:"list",isClient:l},L._id))},"list-view"):e.jsx(at.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4,ease:"easeInOut"},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:F.map((L,M)=>e.jsx(hj,{review:L,index:M,isExpanded:w.has(L._id),onToggleExpand:()=>{const V=new Set(w);w.has(L._id)?V.delete(L._id):V.add(L._id),k(V)},view:"grid",isClient:l},L._id))},"grid-view")}),T.length>6&&!j&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{onClick:()=>p(!g),className:"inline-flex items-center gap-2 bg-cream-900 text-cream-50 px-6 py-3 rounded-xl font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1",children:[g?"Show Less":`Show More (${T.length-6} more)`,e.jsx(Jr,{size:18,className:`transition-transform ${g?"rotate-90":""}`})]})}),T.length>0&&e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>{v(!j),j||p(!1)},className:"inline-flex items-center gap-2 bg-cream-900 text-cream-50 px-5 py-2.5 rounded-lg font-medium hover:bg-cream-800 transition-all shadow-md hover:shadow-lg",children:j?"Show Less":"View All"})})]})})},BE=()=>e.jsx("section",{className:"pt-8 pb-24 bg-cream-100 relative overflow-hidden",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(at.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"bg-white p-10 md:p-16 rounded-3xl shadow-xl",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900 mb-2",children:"About Prints24"}),e.jsx("div",{className:"w-24 h-1 bg-cream-400 mx-auto rounded-full"})]}),e.jsxs("div",{className:"space-y-8 text-cream-800 leading-relaxed",children:[e.jsxs("p",{className:"text-lg",children:["Prints24 is a modern, fast-growing"," ",e.jsx("span",{className:"font-semibold",children:"Digital & Offset Printing Company"}),", whose aim is to provide Fast, Creative, and High-Quality printing solutions to customers."]}),e.jsx("p",{children:"We started Prints24 with the idea that today's digital generation should get a platform where they can avail all types of printing services, from small quantities (Short Run) to Bulk Printing, in an easy, fast, and reliable manner."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mt-12",children:[e.jsxs("div",{className:"bg-cream-50 p-6 rounded-xl border border-cream-200",children:[e.jsxs("h3",{className:"font-serif text-xl font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-cream-900 text-white rounded-full flex items-center justify-center text-sm",children:"V"})," ","Vision"]}),e.jsx("p",{className:"text-sm",children:"To make Affordable, Stylish, and Premium Quality Printing easily accessible to every individual and every business."})]}),e.jsxs("div",{className:"bg-cream-50 p-6 rounded-xl border border-cream-200",children:[e.jsxs("h3",{className:"font-serif text-xl font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-cream-900 text-white rounded-full flex items-center justify-center text-sm",children:"M"})," ","Mission"]}),e.jsxs("ul",{className:"text-sm space-y-2 list-disc list-inside",children:[e.jsx("li",{children:"To make Modern Printing easy and accessible to everyone."}),e.jsx("li",{children:"To provide smart solutions with Quick Delivery + High Quality."}),e.jsx("li",{children:"To make better options available according to every budget."})]})]})]})]})]})})})}),qE=()=>e.jsx("section",{className:"pt-24 pb-8 bg-cream-900 text-cream-50 text-center",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs(at.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.6},viewport:{once:!0},children:[e.jsx("div",{className:"mb-8 inline-flex items-center justify-center w-16 h-16 bg-cream-800 rounded-full",children:e.jsx(Jr,{size:32,className:"text-amber-300"})}),e.jsx("h2",{className:"font-serif text-4xl font-bold mb-6",children:"Have a Design Ready?"}),e.jsx("p",{className:"text-xl text-cream-200 max-w-2xl mx-auto mb-10",children:"Skip the templates and upload your own artwork. Our automated system checks for errors instantly."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm text-cream-300 mb-10",children:[e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"PDF"}),e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"AI"}),e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"PSD"}),e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"JPG/PNG"})]}),e.jsx(ks,{to:"/upload",className:"bg-cream-50 text-cream-900 px-10 py-4 rounded-full text-lg font-bold hover:bg-cream-200 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1",children:"Upload Now"})]})})});function Qd(){const[s,r]=y.useState(!1);return y.useEffect(()=>{r(!0)},[]),s}const jx="https://print24-pricing-test-680867814154.asia-south1.run.app/",Te=`${jx}/api`,HE=()=>{const[s,r]=y.useState([]),[i,l]=y.useState(!0),[d,m]=y.useState([]),[u,f]=y.useState(!0),[g,p]=y.useState(!1),j=Qd();return y.useEffect(()=>{(async()=>{try{l(!0);const w=Te,k={Accept:"application/json"},E=await fetch(`${w}/categories/digital`,{method:"GET",headers:k}),T=await E.text();if(!E.ok)throw new Error(`HTTP ${E.status}`);const F=JSON.parse(T),L=await fetch(`${w}/categories/bulk`,{method:"GET",headers:k}),M=await L.text();if(!L.ok)throw new Error(`HTTP ${L.status}`);const V=JSON.parse(M),le=F.map(z=>({...z,type:"digital"})),G=V.map(z=>({...z,type:"bulk"}));le.sort((z,P)=>(z.sortOrder||0)-(P.sortOrder||0)),G.sort((z,P)=>(z.sortOrder||0)-(P.sortOrder||0)),r([...le,...G])}catch(w){console.error("Fetch categories error:",w)}finally{l(!1)}})()},[]),y.useEffect(()=>{if(typeof window>"u")return;const v=localStorage.getItem("token");p(!!v)},[]),y.useEffect(()=>{(async()=>{try{f(!0);const w=Te,k={Accept:"application/json"},E=await fetch(`${w}/reviews`,{method:"GET",headers:k});if(!E.ok)throw new Error(`HTTP ${E.status}`);const T=await E.json();m(T)}catch(w){console.error("Fetch reviews error:",w)}finally{f(!1)}})()},[]),e.jsxs("div",{className:"w-full mt-5 overflow-hidden pr-4",children:[e.jsx(_E,{}),e.jsx(FE,{categories:s,loadingCategories:i,children:e.jsx(UE,{categories:s,loadingCategories:i})}),e.jsx(VE,{reviews:d,loadingReviews:u,isLoggedIn:g,isClient:j}),e.jsx(BE,{}),e.jsx(qE,{})]})},xj=({containerId:s,interval:r=5e3,slideInterval:i=3e3,scrollAmount:l=150,onScroll:d})=>{const m=y.useRef(null),u=y.useRef(null),f=y.useRef(!1),g=y.useRef(Date.now()),p=y.useCallback(()=>{m.current&&(clearTimeout(m.current),m.current=null),u.current&&(clearInterval(u.current),u.current=null)},[]),j=y.useCallback(()=>{f.current||!document.getElementById(s)||(u.current=setInterval(()=>{if(f.current){clearInterval(u.current),u.current=null;return}const F=document.getElementById(s);if(F)if(d)d(F);else{const L=F.scrollWidth-F.clientWidth;F.scrollLeft>=L-10?F.scrollTo({left:0,behavior:"smooth"}):F.scrollTo({left:F.scrollLeft+l,behavior:"smooth"})}},i))},[s,i,l,d]),v=y.useCallback(()=>{p(),m.current=setTimeout(()=>{j()},r)},[r,j,p]),w=y.useCallback(()=>{p(),g.current=Date.now(),v()},[v,p]),k=y.useCallback(()=>{f.current=!0,p()},[p]),E=y.useCallback(()=>{f.current=!1,v()},[v]);return y.useEffect(()=>{if(typeof window>"u")return;const T=document.getElementById(s);if(!T)return;const F=()=>w(),L=()=>w(),M=()=>w(),V=()=>w(),le=()=>w(),G=()=>w(),z=()=>w(),P=()=>w(),J=()=>w(),W=()=>w(),oe=()=>{k()},ce=()=>{E()};return document.addEventListener("mousemove",F),document.addEventListener("mousedown",L),document.addEventListener("click",M),document.addEventListener("mouseover",V),document.addEventListener("keydown",le),document.addEventListener("keyup",G),document.addEventListener("keypress",z),document.addEventListener("touchstart",P),document.addEventListener("touchmove",J),document.addEventListener("wheel",W),T&&(T.addEventListener("mouseenter",oe),T.addEventListener("mouseleave",ce)),v(),()=>{p(),document.removeEventListener("mousemove",F),document.removeEventListener("mousedown",L),document.removeEventListener("click",M),document.removeEventListener("mouseover",V),document.removeEventListener("keydown",le),document.removeEventListener("keyup",G),document.removeEventListener("keypress",z),document.removeEventListener("touchstart",P),document.removeEventListener("touchmove",J),document.removeEventListener("wheel",W),T&&(T.removeEventListener("mouseenter",oe),T.removeEventListener("mouseleave",ce))}},[s,w,k,E,v,p]),{pause:k,resume:E,reset:w}},Ea=({label:s,options:r,value:i,onChange:l,className:d="",id:m})=>{const[u,f]=y.useState(!1),g=y.useRef(null);y.useEffect(()=>{const j=v=>{g.current&&!g.current.contains(v.target)&&f(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]);const p=r.find(j=>j.value===i);return e.jsxs("div",{className:`relative ${d}`,ref:g,id:m?`${m}-container`:void 0,children:[e.jsxs("button",{type:"button",id:m,onClick:()=>f(!u),className:"flex items-center gap-2 px-4 py-2.5 border-2 border-cream-300 rounded-lg bg-white text-cream-900 cursor-pointer hover:border-cream-500 transition-all shadow-sm hover:shadow-md min-w-[140px] justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:p?p.label:s}),e.jsx(ic,{size:16,className:`transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
            .filter-dropdown-scroll::-webkit-scrollbar {
              width: 6px;
            }
            .filter-dropdown-scroll::-webkit-scrollbar-track {
              background: #f5f5f0;
              border-radius: 3px;
            }
            .filter-dropdown-scroll::-webkit-scrollbar-thumb {
              background: #d4a574;
              border-radius: 3px;
            }
            .filter-dropdown-scroll::-webkit-scrollbar-thumb:hover {
              background: #c49564;
            }
          `}),e.jsx("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-cream-200 z-50 overflow-hidden",children:e.jsx("div",{className:"p-2 overflow-y-auto filter-dropdown-scroll",style:{maxHeight:"132px",scrollbarWidth:"thin",scrollbarColor:"#d4a574 #f5f5f0"},children:r.map(j=>e.jsxs("button",{type:"button",onClick:()=>{l(j.value),f(!1)},className:"w-full flex items-center justify-between px-3 py-2 text-sm text-cream-900 hover:bg-cream-50 rounded-md transition-colors",children:[e.jsx("span",{children:j.label}),i===j.value&&e.jsx(Xa,{size:16,className:"text-cream-900"})]},j.value===null?"null":j.value))})})]})]})},Qo=s=>s>=1536?7:s>=1280?6:s>=1024?5:s>=768?4:s>=640?3:2,GE=()=>{var _,X;const s=nr(),[r,i]=y.useState([]),[l,d]=y.useState([]),[m,u]=y.useState(!0),[f,g]=y.useState(null),[p,j]=y.useState(null),[v,w]=y.useState(null),[k,E]=y.useState(null),[T,F]=y.useState([]),[L,M]=y.useState(!1),[V,le]=y.useState(""),G=xj({containerId:"digital-scroll-container",interval:6e3,slideInterval:3e3,scrollAmount:150,onScroll:Q=>{const ne=Q.scrollWidth-Q.clientWidth,Ne=Q.scrollLeft,C=window.innerWidth,H=Qo(C),re=C/H;if(Ne>=ne-10)Q.scrollTo({left:0,behavior:"smooth"});else{const je=Ne+re;je>=ne?Q.scrollTo({left:ne,behavior:"smooth"}):Q.scrollTo({left:je,behavior:"smooth"})}}});y.useEffect(()=>{window.digitalUpdateFromArrow=()=>{G.reset()}},[G]);const z=xj({containerId:"bulk-scroll-container",interval:6e3,slideInterval:3e3,scrollAmount:150,onScroll:Q=>{const ne=Q.scrollWidth-Q.clientWidth,Ne=Q.scrollLeft,C=window.innerWidth,H=Qo(C),re=C/H;if(Ne>=ne-10)Q.scrollTo({left:0,behavior:"smooth"});else{const je=Ne+re;je>=ne?Q.scrollTo({left:ne,behavior:"smooth"}):Q.scrollTo({left:je,behavior:"smooth"})}}});if(y.useEffect(()=>{window.bulkUpdateFromArrow=()=>{z.reset()}},[z]),y.useEffect(()=>{(async()=>{try{u(!0),g(null);const ne=Te,Ne={Accept:"application/json"},C=await fetch(`${ne}/categories/digital`,{method:"GET",headers:Ne}),H=await C.text();if(H.trim().startsWith("<!DOCTYPE")||H.trim().startsWith("<html"))throw new Error("Server returned HTML instead of JSON. Please check your server configuration.");if(!C.ok)throw new Error(`HTTP ${C.status} - ${C.statusText}`);const re=JSON.parse(H),je=Array.isArray(re)?re.sort((we,Ce)=>(we.sortOrder||0)-(Ce.sortOrder||0)):re;i(je);const ge=await fetch(`${ne}/categories/bulk`,{method:"GET",headers:Ne}),O=await ge.text();if(O.trim().startsWith("<!DOCTYPE")||O.trim().startsWith("<html"))throw new Error("Server returned HTML instead of JSON. Please check your server configuration.");if(!ge.ok)throw new Error(`HTTP ${ge.status} - ${ge.statusText}`);const I=JSON.parse(O),de=Array.isArray(I)?I.sort((we,Ce)=>(we.sortOrder||0)-(Ce.sortOrder||0)):I;d(de)}catch(ne){g(ne instanceof Error?ne.message:"An unknown error occurred"),console.error("Fetch categories error:",ne)}finally{u(!1)}})()},[]),y.useEffect(()=>{(async()=>{if(!v){F([]),E(null);return}try{M(!0);const ne=Te,Ne={Accept:"application/json"},C=await fetch(`${ne}/subcategories/category/${v}?includeChildren=true`,{method:"GET",headers:Ne});if(C.ok){const H=await C.text();if(!H.trim().startsWith("<!DOCTYPE")&&!H.trim().startsWith("<html")){const re=JSON.parse(H),je=Array.isArray(re)?re:(re==null?void 0:re.data)||[],O=(I=>{let de=[];return I.forEach(we=>{if(de.push({...we,_displayLevel:0}),we.children&&we.children.length>0){const Ce=we.children.map(Ge=>({...Ge,_displayLevel:1,_parentName:we.name}));de=de.concat(Ce)}}),de})(je);O.sort((I,de)=>(I.sortOrder||0)-(de.sortOrder||0)),F(O)}else F([])}else F([])}catch(ne){console.error("Error fetching subcategories:",ne),F([])}finally{M(!1)}})()},[v]),m)return e.jsx("div",{className:"min-h-screen bg-cream-50 py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-cream-900 mb-4",children:"Services"}),e.jsx("p",{className:"text-cream-600",children:"Loading categories..."})]})})});if(f)return e.jsx("div",{className:"min-h-screen bg-cream-50 py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-cream-900 mb-4",children:"Services"}),e.jsxs("p",{className:"text-cream-600",children:["Error: ",f]})]})})});const P=[...r.map(Q=>({...Q,type:"Digital"})),...l.map(Q=>({...Q,type:"Bulk"}))],J=v?P.find(Q=>Q._id===v):null,W=!p||p==="Digital",oe=!p||p==="Bulk",ce=J?J.type==="Digital":W,pe=J?J.type==="Bulk":oe,qe=r.filter(Q=>!(p&&p!=="Digital"||v&&Q._id!==v||V&&!Q.name.toLowerCase().includes(V.toLowerCase()))),R=l.filter(Q=>!(p&&p!=="Bulk"||v&&Q._id!==v||V&&!Q.name.toLowerCase().includes(V.toLowerCase()))),Y=P.map(Q=>({value:Q._id,label:`${Q.name} (${Q.type})`}));return e.jsx("div",{className:"min-h-screen bg-cream-50",children:e.jsxs("div",{className:"container mx-auto px-2 xs:px-3 sm:px-4 md:px-6 lg:px-8 pt-4 xs:pt-5 sm:pt-6 md:pt-8 lg:pt-10 pb-8 xs:pb-10 sm:pb-12 md:pb-16 lg:pb-20",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-4 flex-1",children:[e.jsxs("div",{className:"sm:w-48",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Print Type"}),e.jsx(Ea,{label:"All Types",value:p,onChange:Q=>{j(Q),w(null)},options:[{value:null,label:"All Types"},{value:"Digital",label:"Digital Print"},{value:"Bulk",label:"Bulk Print"}],className:"w-full"})]}),e.jsxs("div",{className:"flex-1 sm:flex-initial sm:w-64",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Category"}),e.jsx(Ea,{label:"All Categories",value:v,onChange:Q=>{if(w(Q),E(null),Q){const ne=P.find(Ne=>Ne._id===Q);ne&&j(ne.type)}else j(null)},options:[{value:null,label:"All Categories"},...Y.filter(Q=>{if(p){const ne=P.find(Ne=>Ne._id===Q.value);return(ne==null?void 0:ne.type)===p}return!0})],className:"w-full"})]}),v&&e.jsxs("div",{className:"flex-1 sm:flex-initial sm:w-64",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Subcategory"}),e.jsx(Ea,{label:L?"Loading...":"All Subcategories",value:k,onChange:Q=>{if(E(Q),Q&&v){const ne=T.find(Ne=>Ne._id===Q);if(ne){const Ne=ne._id;s(`/digital-print/${v}/${Ne}`)}}},options:[{value:null,label:"All Subcategories"},...T.map(Q=>({value:Q._id,label:Q.name}))],className:"w-full"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-4 flex-1 sm:flex-initial sm:justify-end",children:[e.jsxs("div",{className:"relative sm:w-64",children:[e.jsx(fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:V,onChange:Q=>le(Q.target.value),className:"w-full pl-10 pr-10 py-2.5 border-2 border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 text-sm sm:text-base bg-white shadow-sm transition-all"}),V&&e.jsx("button",{onClick:()=>le(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cream-500 hover:text-cream-700 transition-colors",children:e.jsx(ns,{size:18})})]}),(p||v||k||V)&&e.jsxs("button",{onClick:()=>{j(null),w(null),E(null),le("")},className:"flex items-center gap-2 px-4 py-2.5 text-sm text-cream-700 hover:text-cream-900 bg-cream-100 hover:bg-cream-200 rounded-lg transition-colors whitespace-nowrap",children:[e.jsx(ns,{size:16}),"Clear All"]})]})]}),(p||v||k||V)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4 pt-4 border-t border-cream-200",children:[e.jsx("span",{className:"text-xs font-medium text-cream-600",children:"Active filters:"}),p&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-xs font-medium flex items-center gap-2",children:["Type: ",p,e.jsx("button",{onClick:()=>{j(null),w(null),E(null)},className:"hover:text-red-600",children:e.jsx(ns,{size:12})})]}),v&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-xs font-medium flex items-center gap-2",children:["Category: ",(_=P.find(Q=>Q._id===v))==null?void 0:_.name,e.jsx("button",{onClick:()=>{w(null),E(null),j(null)},className:"hover:text-red-600",children:e.jsx(ns,{size:12})})]}),k&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-xs font-medium flex items-center gap-2",children:["Subcategory: ",(X=T.find(Q=>Q._id===k))==null?void 0:X.name,e.jsx("button",{onClick:()=>{E(null)},className:"hover:text-red-600",children:e.jsx(ns,{size:12})})]})]})]}),ce&&e.jsxs("div",{className:"mb-8 xs:mb-10 sm:mb-12 md:mb-16 lg:mb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 xs:gap-2.5 sm:gap-3 mb-4 xs:mb-5 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 xs:w-9 xs:h-9 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-lg sm:rounded-xl",style:{backgroundColor:"#588157"},children:e.jsx(Q5,{className:"text-white w-4 h-4 xs:w-5 xs:h-5 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-lg xs:text-xl sm:text-2xl md:text-3xl font-bold text-cream-900",children:"Digital Print"}),e.jsx("p",{className:"text-cream-600 text-xs xs:text-sm sm:text-base font-medium",children:"Fast & small batches"})]})]}),e.jsxs("div",{className:"relative group/slider overflow-hidden",children:[e.jsx("button",{onClick:()=>{const Q=document.getElementById("digital-scroll-container");if(Q){const ne=window.innerWidth,Ne=Qo(ne),C=ne/Ne,H=Q.scrollLeft;H<=0?Q.scrollTo({left:Q.scrollWidth-Q.clientWidth,behavior:"smooth"}):Q.scrollTo({left:H-C,behavior:"smooth"})}window.digitalUpdateFromArrow&&window.digitalUpdateFromArrow()},className:"absolute left-2 sm:left-3 md:left-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(Fl,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("button",{onClick:()=>{const Q=document.getElementById("digital-scroll-container");if(Q){const ne=window.innerWidth,Ne=Qo(ne),C=ne/Ne,H=Q.scrollLeft,re=Q.scrollWidth-Q.clientWidth,je=H+C;H>=re-1?Q.scrollTo({left:0,behavior:"smooth"}):je>=re?Q.scrollTo({left:re,behavior:"smooth"}):Q.scrollTo({left:je,behavior:"smooth"})}window.digitalUpdateFromArrow&&window.digitalUpdateFromArrow()},className:"absolute right-2 sm:right-3 md:right-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(Ha,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("div",{id:"digital-scroll-container",className:"flex overflow-x-auto overflow-y-hidden pb-2 sm:pb-3 md:pb-4 snap-x snap-mandatory scroll-smooth touch-pan-x",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth"},children:qe.length===0?e.jsx("div",{className:"w-full text-center py-8 text-cream-600",children:"No digital print categories found matching your filters."}):qe.map((Q,ne)=>e.jsx(at.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:ne*.03},className:"flex-shrink-0 snap-start transition-all duration-500 ease-in-out w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 px-1 sm:px-1.5 md:px-2",children:e.jsx(ks,{to:`/digital-print/${Q._id}`,className:"block",children:e.jsxs("div",{className:"group flex flex-col items-center gap-1.5 sm:gap-2 p-2 sm:p-2.5 rounded-lg transition-all duration-300 bg-cream-50",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 lg:w-32 lg:h-32 xl:w-36 xl:h-36 rounded-full overflow-hidden bg-white group-hover:bg-[#f5faf0] transition-all duration-300 shadow-sm sm:shadow-md group-hover:shadow-lg group-hover:scale-105 flex items-center justify-center",children:e.jsx("img",{src:Q.image,alt:Q.name,className:`${Q.name.toLowerCase().includes("visiting card")?"w-full h-full object-cover":Q.name.toLowerCase().includes("card holder")?"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 lg:w-16 lg:h-16 xl:w-18 xl:h-18 object-contain":"w-14 h-14 sm:w-16 sm:h-16 md:w-18 md:h-18 lg:w-20 lg:h-20 xl:w-22 xl:h-22 object-contain"}`})}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-cream-900 text-center max-w-[80px] sm:max-w-[100px] md:max-w-[120px] line-clamp-2 leading-tight mt-0.5",children:Q.name})]})})},Q._id))})]})]}),pe&&e.jsxs("div",{className:"mb-0",children:[e.jsxs("div",{className:"flex items-center gap-2 xs:gap-2.5 sm:gap-3 mb-4 xs:mb-5 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 xs:w-9 xs:h-9 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-lg sm:rounded-xl",style:{backgroundColor:"#003049"},children:e.jsx(_m,{className:"text-white w-4 h-4 xs:w-5 xs:h-5 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-lg xs:text-xl sm:text-2xl md:text-3xl font-bold text-cream-900",children:"Bulk & Offset Print"}),e.jsx("p",{className:"text-cream-600 text-xs xs:text-sm sm:text-base font-medium",children:"Quality & large orders"})]})]}),e.jsxs("div",{className:"relative group/slider overflow-hidden",children:[e.jsx("button",{onClick:()=>{const Q=document.getElementById("bulk-scroll-container");if(Q){const ne=window.innerWidth,Ne=Qo(ne),C=ne/Ne,H=Q.scrollLeft;H<=0?Q.scrollTo({left:Q.scrollWidth-Q.clientWidth,behavior:"smooth"}):Q.scrollTo({left:H-C,behavior:"smooth"})}window.bulkUpdateFromArrow&&window.bulkUpdateFromArrow()},className:"absolute left-2 sm:left-3 md:left-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(Fl,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("button",{onClick:()=>{const Q=document.getElementById("bulk-scroll-container");if(Q){const ne=window.innerWidth,Ne=Qo(ne),C=ne/Ne,H=Q.scrollLeft,re=Q.scrollWidth-Q.clientWidth,je=H+C;H>=re-1?Q.scrollTo({left:0,behavior:"smooth"}):je>=re?Q.scrollTo({left:re,behavior:"smooth"}):Q.scrollTo({left:je,behavior:"smooth"})}window.bulkUpdateFromArrow&&window.bulkUpdateFromArrow()},className:"absolute right-2 sm:right-3 md:right-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(Ha,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("div",{id:"bulk-scroll-container",className:"flex overflow-x-auto overflow-y-hidden pb-2 sm:pb-3 md:pb-4 snap-x snap-mandatory scroll-smooth touch-pan-x",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth"},children:R.length===0?e.jsx("div",{className:"w-full text-center py-8 text-cream-600",children:"No bulk print categories found matching your filters."}):R.map((Q,ne)=>e.jsx(at.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:ne*.03},className:"flex-shrink-0 snap-start transition-all duration-500 ease-in-out w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 px-1 sm:px-1.5 md:px-2",children:e.jsx(ks,{to:`/digital-print/${Q._id}`,className:"block",children:e.jsxs("div",{className:"group flex flex-col items-center gap-1.5 sm:gap-2 p-2 sm:p-2.5 rounded-lg transition-all duration-300 bg-cream-50",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 lg:w-32 lg:h-32 xl:w-36 xl:h-36 rounded-full overflow-hidden bg-white group-hover:bg-[#f5fbff] transition-all duration-300 shadow-sm sm:shadow-md group-hover:shadow-lg group-hover:scale-105 flex items-center justify-center",children:e.jsx("img",{src:Q.image,alt:Q.name,className:`${Q.name.toLowerCase().includes("visiting card")?"w-full h-full object-cover":Q.name.toLowerCase().includes("card holder")?"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 lg:w-16 lg:h-16 xl:w-18 xl:h-18 object-contain":"w-14 h-14 sm:w-16 sm:h-16 md:w-18 md:h-18 lg:w-20 lg:h-20 xl:w-22 xl:h-22 object-contain"}`})}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-cream-900 text-center max-w-[80px] sm:max-w-[100px] md:max-w-[120px] line-clamp-2 leading-tight mt-0.5",children:Q.name})]})})},Q._id))})]})]})]})})};function Yo(...s){return s.filter(Boolean).join(" ")}const Ch=y.forwardRef(({options:s,value:r,onValueChange:i,placeholder:l="Select...",disabled:d,className:m},u)=>{const[f,g]=y.useState(!1),p=y.useRef(null);y.useEffect(()=>{const v=w=>{p.current&&!p.current.contains(w.target)&&g(!1)};if(f)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[f]);const j=s.find(v=>v.value===r);return e.jsxs("div",{className:Yo("relative",m),ref:p,children:[e.jsxs("button",{ref:u,type:"button",disabled:d,onClick:()=>!d&&g(!f),className:Yo("flex h-10 w-full items-center justify-between rounded-md border border-cream-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-cream-500 focus:outline-none focus:ring-2 focus:ring-cream-900 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",f&&"ring-2 ring-cream-900"),children:[e.jsx("span",{className:Yo("block truncate",!j&&"text-cream-500"),children:j?j.label:l}),e.jsx(ic,{className:Yo("h-4 w-4 opacity-50 transition-transform",f&&"rotate-180")})]}),f&&e.jsx("div",{className:"absolute z-50 mt-1 w-full overflow-hidden rounded-md border border-cream-200 bg-white shadow-lg",children:e.jsx("div",{className:"max-h-60 overflow-auto p-1",children:s.length===0?e.jsx("div",{className:"px-2 py-1.5 text-sm text-cream-500",children:"No options available"}):s.map(v=>e.jsxs("button",{type:"button",onClick:()=>{i==null||i(v.value),g(!1)},className:Yo("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none hover:bg-cream-50 focus:bg-cream-50",r===v.value&&"bg-cream-50"),children:[e.jsx("span",{className:Yo("block truncate",r===v.value&&"font-medium"),children:v.label}),r===v.value&&e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Xa,{className:"h-4 w-4 text-cream-900"})})]},v.value))})})]})});Ch.displayName="Select";const Or=({fallbackPath:s="/",label:r="Back",className:i="",onClick:l})=>{const d=nr(),m=ni(),u=y.useRef(null);y.useEffect(()=>{const g=m.pathname;if(u.current===null){u.current=g;return}const p=setTimeout(()=>{u.current=g},0);return()=>clearTimeout(p)},[m.pathname]);const f=()=>{if(l){l(),typeof window<"u"&&setTimeout(()=>{window.scrollTo(0,0)},100);return}const g=m.state!==null&&m.state!==void 0,p=typeof window<"u"&&window.history.length>1,j=m.pathname,v=u.current;d(p||g||v&&v!==j?-1:s),typeof window<"u"&&window.scrollTo(0,0)};return e.jsxs("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),f()},className:`flex items-center text-slate-500 hover:text-slate-700 transition-colors font-medium cursor-pointer ${i}`,type:"button",children:[e.jsx(Td,{className:"w-4 h-4 mr-2"}),r]})},gj=({attributes:s,rules:r,selectedValues:i={}})=>{const l=s.reduce((m,u)=>(m[u._id.toString()]={...u,isVisible:!0,allowedValues:u.attributeValues?u.attributeValues.map(f=>f.value):[],defaultValue:u.defaultValue||null,visibilitySetByRule:!1,valuesRestrictedByRule:!1},m),{}),d=[...r].sort((m,u)=>(u.priority||0)-(m.priority||0));for(const m of d){const u=typeof m.when.attribute=="object"?m.when.attribute._id.toString():m.when.attribute.toString(),f=i[u];if(!(!f||String(f)!==m.when.value))for(const g of m.then){const p=typeof g.targetAttribute=="object"?g.targetAttribute._id.toString():g.targetAttribute.toString();if(!l[p])continue;const j=l[p];switch(g.action){case"SHOW":j.isVisible=!0,j.visibilitySetByRule=!0;break;case"HIDE":j.isVisible=!1,j.visibilitySetByRule=!0;break;case"SHOW_ONLY":if(Array.isArray(g.allowedValues)&&g.allowedValues.length>0){const v=j.attributeValues?j.attributeValues.map(w=>w.value):[];j.allowedValues=g.allowedValues.filter(w=>v.includes(w)),j.valuesRestrictedByRule=!0}break;case"SET_DEFAULT":g.defaultValue&&(j.allowedValues.length===0||j.allowedValues.includes(g.defaultValue))&&(j.defaultValue=g.defaultValue);break}}}return Object.keys(l).forEach(m=>{const u=l[m];!u.isVisible&&i[m]&&delete i[m],u.valuesRestrictedByRule&&i[m]&&!u.allowedValues.includes(String(i[m]))&&delete i[m],!u.valuesRestrictedByRule&&u.attributeValues&&(u.allowedValues=u.attributeValues.map(f=>f.value))}),{attributes:Object.values(l),selectedValues:i}};function QE(){const[s,r]=y.useState(null),[i,l]=y.useState(!0),[d,m]=y.useState(null),u=y.useCallback(async()=>{try{l(!0),m(null);const f=localStorage.getItem("token"),g=localStorage.getItem("userLocation");let p=null;if(g)try{p=JSON.parse(g).pincode,console.log(" Using pincode from LocationDetector:",p)}catch(E){console.warn("Failed to parse stored location:",E)}const j={"Content-Type":"application/json"};f&&(j.Authorization=`Bearer ${f}`);const v={method:p?"POST":"GET",headers:j};p&&(v.body=JSON.stringify({pincode:p}));const w=await fetch(`${jx}/api/user/context`,v);if(!w.ok)throw new Error(`Failed to fetch user context: ${w.status}`);const k=await w.json();if(k.success)r(k),console.log(" User context loaded:",{user:k.user.name,segment:k.segment.name,location:k.location.pincode,detectionMethod:k.location.detectionMethod});else throw new Error(k.message||"Failed to load user context")}catch(f){console.error(" Error fetching user context:",f),m(f.message||"Network error"),r({user:{id:null,name:"Guest",email:null,mobileNumber:null,userType:"guest",role:"guest",isAuthenticated:!1,isGuest:!0},segment:{id:null,code:"RETAIL",name:"Retail Customer",pricingTier:0},location:{pincode:null,geoZone:{id:null,name:null},territoryAccess:[],detectionMethod:"FALLBACK"},pricing:{currency:"INR",creditLimit:null,paymentTerms:null},meta:{timestamp:new Date().toISOString(),source:"FALLBACK"}})}finally{l(!1)}},[]);return y.useEffect(()=>{u()},[u]),y.useEffect(()=>{const f=g=>{g.key==="token"&&(console.log(" Token changed, refetching context..."),u())};return window.addEventListener("storage",f),()=>window.removeEventListener("storage",f)},[u]),{context:s,loading:i,error:d,refetch:u}}const Dm=s=>({USD:"$",EUR:"",GBP:"",INR:"",JPY:"",CNY:"",AUD:"A$",CAD:"C$",AED:".",SAR:"",SGD:"S$",MYR:"RM",THB:"",CHF:"CHF",NZD:"NZ$",ZAR:"R",MXN:"$",BRL:"R$",KRW:"",HKD:"HK$",PLN:"z",TRY:""})[s]||s||"",pr=(s,r="INR",i={})=>{const{decimals:l=2,showSymbol:d=!0,locale:m="en-US"}=i;if(s==null||isNaN(s))return d?`${Dm(r)}0.00`:"0.00";const u=Dm(r),f=Number(s).toLocaleString(m,{minimumFractionDigits:l,maximumFractionDigits:l});return d?`${u}${f}`:f},_N=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"SAR",symbol:"",name:"Saudi Riyal"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"MYR",symbol:"RM",name:"Malaysian Ringgit"},{code:"THB",symbol:"",name:"Thai Baht"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"ZAR",symbol:"R",name:"South African Rand"},{code:"MXN",symbol:"$",name:"Mexican Peso"},{code:"BRL",symbol:"R$",name:"Brazilian Real"}];function YE({productId:s,selectedDynamicAttributes:r=[],quantity:i=1,showBreakdown:l=!1}){var L,M,V,le,G,z,P,J,W,oe;const[d,m]=y.useState(null),[u,f]=y.useState(null),[g,p]=y.useState(!0),[j,v]=y.useState(null),[w,k]=y.useState({isNotAvailable:!1,message:""}),{context:E,loading:T}=QE();y.useEffect(()=>{s&&(async()=>{var pe,qe;if(!(T||!E)){p(!0),v(null),console.log(" Fetching pricing with context:",{segment:E.segment.code,pincode:E.location.pincode,user:E.user.name});try{const R=localStorage.getItem("token"),Y={"Content-Type":"application/json"};R&&(Y.Authorization=`Bearer ${R}`);const X={productId:s,selectedDynamicAttributes:(Ne=>!Array.isArray(Ne)||Ne.length===0?[]:Ne.map(C=>({type:C.attributeType||C.type,value:C.value,attributeType:C.attributeType||C.type,attributeValue:C.value})).filter(C=>C.value!=null))(r),quantity:i};E.location.pincode&&(X.pincode=E.location.pincode),console.log(" ProductPriceBox sending request:",{hasUserContext:!!E,pincode:(pe=E==null?void 0:E.location)==null?void 0:pe.pincode,bodyPincode:X.pincode,fullBody:X});const Q=await fetch(`${jx}/api/pricing/quote`,{method:"POST",headers:Y,body:JSON.stringify(X)});if(!Q.ok){const Ne=await Q.json().catch(()=>({})),C=Ne.message||`Server error: ${Q.status}`;throw console.error(" Server error:",Ne),new Error(C)}const ne=await Q.json();if(ne.success){m(ne.pricing),f(ne.meta),console.log("\\n"+"=".repeat(80)),console.log(" PRICING API RESPONSE"),console.log("=".repeat(80)),console.log("\\n USER & SEGMENT:"),console.log(`   Segment: ${ne.meta.userSegmentName} (${ne.meta.userSegment})`),console.log(`   Guest Mode: ${ne.meta.isGuest?"YES":"NO"}`),console.log(`   Authenticated: ${ne.meta.isAuthenticated?"YES ":"NO "}`),console.log(`   Pricing Tier: ${ne.meta.pricingTier}`),console.log("\\n LOCATION:"),console.log(`   Pincode: ${ne.meta.pincode}`),console.log(`   Geo Zone: ${ne.meta.geoZone||"Not mapped"}`),console.log(`   Detection Method: ${ne.meta.detectedBy}`),ne.meta.detectedBy==="IP_DETECTION"?console.log("     Location detected from IP address (not browser geolocation)"):console.log("    Location provided via request/localStorage"),console.log("\\n PRICING:");const Ne=Dm(ne.pricing.currency||"INR");console.log(`   Base Price: ${Ne}${ne.pricing.basePrice}`),console.log(`   Subtotal: ${Ne}${ne.pricing.subtotal}`),console.log(`   GST (${ne.pricing.gstPercentage}%): ${Ne}${ne.pricing.gstAmount}`),console.log(`   Total Payable: ${Ne}${ne.pricing.totalPayable}`),console.log(`   Modifiers Applied: ${ne.meta.modifiersApplied}`),((qe=ne.pricing.appliedModifiers)==null?void 0:qe.length)>0&&(console.log("\\n MODIFIERS:"),ne.pricing.appliedModifiers.forEach((C,H)=>{const re=C.reason||C.source||C.name||"Modifier",je=C.value!==void 0?C.value:C.applied||0,ge=C.modifierType||C.type||"FIXED";console.log(`   ${H+1}. ${re}: ${je>0?"+":""}${je} (${ge})`)})),console.log("=".repeat(80)+"\\n")}else ne.isAvailable===!1||ne.errorCode==="PRODUCT_NOT_AVAILABLE"?(k({isNotAvailable:!0,message:ne.displayMessage||ne.message||"This product is not available in your region"}),console.log(" Product Not Available:",ne.message)):v(ne.error||ne.message||"Failed to calculate price")}catch(R){console.error(" ProductPriceBox: Error fetching pricing:",R),v(R.message||"Network error")}finally{p(!1)}}})()},[s,JSON.stringify(r),i,E,T]);const F=ce=>{if(ce==null||isNaN(ce)){const qe=(d==null?void 0:d.currency)||"INR";return pr(0,qe)}const pe=(d==null?void 0:d.currency)||"INR";return pr(ce,pe)};return T||g?e.jsxs("div",{className:"price-box loading animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-24"})]}):j?e.jsx("div",{className:"price-box error",children:e.jsxs("div",{className:"text-red-500 text-sm mt-2 flex items-center gap-2 bg-red-50 p-2 rounded",children:[e.jsx("span",{className:"font-bold",children:" Error:"})," ",j,e.jsx("button",{onClick:()=>window.location.reload(),className:"underline ml-2 hover:text-red-700",children:"Retry"})]})}):w.isNotAvailable?e.jsx("div",{className:"price-box not-available",children:e.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),e.jsx("h3",{className:"text-lg font-bold text-amber-800",children:"Product Not Available"}),e.jsx("p",{className:"text-amber-700 text-sm",children:w.message}),((M=(L=E==null?void 0:E.location)==null?void 0:L.geoZone)==null?void 0:M.name)&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" Your region: ",e.jsx("strong",{children:E.location.geoZone.name})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please check other products or contact support for availability"})]})})}):d?e.jsxs("div",{className:"price-box",children:[!l&&e.jsxs("div",{className:"space-y-3",children:[r&&r.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-3 pb-2 border-b border-gray-100",children:"Selected Options:"}),e.jsx("div",{className:"space-y-2",children:r.filter(ce=>{const pe=ce.value||ce.attributeValue;return typeof pe=="string"&&(pe.length>30||/^[0-9a-f]{24}$/i.test(pe))?!1:pe!=null&&pe!==""}).map((ce,pe)=>{const qe=ce.name||ce.attributeName||ce.type||ce.attributeType||"Option",R=ce.label||ce.value||ce.attributeValue;return e.jsxs("div",{className:"flex justify-between items-center text-sm py-1.5 px-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:qe}),e.jsx("span",{className:"font-semibold text-gray-900",children:R})]},pe)})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Unit Price"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:F(d.subtotal/i)})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-0.5",children:[" ",i.toLocaleString()," units"]}),e.jsx("div",{className:"text-base font-bold text-gray-900",children:F(d.subtotal)})]})]})}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["GST (",d.gstPercentage,"%)"]}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:F(d.gstAmount)})]})}),e.jsx("div",{className:"px-5 py-4 bg-gradient-to-br from-green-500 to-emerald-600",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide mb-0.5",children:"Total Amount"}),e.jsx("div",{className:"text-xs text-white/90",children:"Inclusive of all taxes"})]}),e.jsx("div",{className:"text-3xl font-bold text-white",children:F(d.totalPayable)})]})})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center space-y-1",children:[e.jsxs("div",{children:["Price for ",i.toLocaleString()," units"]}),d.calculatedAt&&new Date(d.calculatedAt).toString()!=="Invalid Date"&&e.jsxs("div",{children:["Calculated at ",new Date(d.calculatedAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"price-main flex items-baseline gap-2",children:[d.compareAtPrice&&d.compareAtPrice>d.totalPayable&&e.jsx("span",{className:"text-sm text-gray-500 line-through",children:F(d.compareAtPrice)}),e.jsx("span",{className:"text-3xl font-bold text-blue-900",children:F(d.totalPayable)})]}),E&&e.jsxs("div",{className:"mt-3 p-3 bg-linear-to-r from-blue-50 to-green-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Pricing for:"}),e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded font-semibold",children:[" ",E.segment.name]}),E.location.geoZone.name&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded font-semibold",children:[" ",E.location.geoZone.name]}),E.location.pincode&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",E.location.pincode,")"]})]}),E.location.detectionMethod==="IP_DETECTION"&&e.jsx("div",{className:"mt-2 text-xs text-gray-600 italic flex items-center gap-1",children:e.jsx("span",{children:" Location detected from your IP address"})}),E.user.isGuest&&e.jsx("div",{className:"mt-2 text-xs text-blue-700 font-medium",children:" Login to unlock special pricing for your account"})]})]}),l&&e.jsxs("div",{className:"price-breakdown mt-4 space-y-2 border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"bg-linear-to-br from-blue-50 to-purple-50 rounded-lg p-4 mb-3",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"PRICING WATERFALL"})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-2 py-1 border-b border-blue-100",children:[e.jsxs("span",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx("span",{className:"text-blue-500",children:""})," Master Price:"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:F(d.basePrice)})]}),((V=d.appliedModifiers)==null?void 0:V.some(ce=>ce.type==="ZONE_BOOK"))&&e.jsxs("div",{className:"flex justify-between text-sm mb-2 py-1 border-b border-green-100 bg-green-50/50 px-2 rounded",children:[e.jsxs("span",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx("span",{className:"text-green-600",children:""})," Zone Override:",e.jsxs("span",{className:"text-xs text-green-700 font-medium",children:["(",((le=d.appliedModifiers.find(ce=>ce.type==="ZONE_BOOK"))==null?void 0:le.source)||"Zone Book",")"]})]}),e.jsx("span",{className:"font-semibold text-green-700",children:F(((G=d.appliedModifiers.find(ce=>ce.type==="ZONE_BOOK"))==null?void 0:G.afterPrice)||d.basePrice)})]}),((z=d.appliedModifiers)==null?void 0:z.some(ce=>ce.type==="SEGMENT_BOOK"))&&e.jsxs("div",{className:"flex justify-between text-sm mb-2 py-1 border-b border-purple-100 bg-purple-50/50 px-2 rounded",children:[e.jsxs("span",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx("span",{className:"text-purple-600",children:""})," Segment Override:",e.jsxs("span",{className:"text-xs text-purple-700 font-medium",children:["(",((P=d.appliedModifiers.find(ce=>ce.type==="SEGMENT_BOOK"))==null?void 0:P.source)||"Segment Book",")"]})]}),e.jsx("span",{className:"font-semibold text-purple-700",children:F(((J=d.appliedModifiers.find(ce=>ce.type==="SEGMENT_BOOK"))==null?void 0:J.afterPrice)||d.basePrice)})]}),((W=d.appliedModifiers)==null?void 0:W.filter(ce=>ce.type==="MODIFIER").length)>0&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-blue-200",children:[e.jsxs("div",{className:"text-xs font-semibold text-blue-700 mb-2 flex items-center gap-1",children:[e.jsx("span",{children:""})," Price Modifiers Applied:"]}),(oe=d.appliedModifiers)==null?void 0:oe.filter(ce=>ce.type==="MODIFIER").map((ce,pe)=>{let qe=ce.name||ce.source||ce.modifierName;ce.modifierType==="PERCENT_DEC"&&(qe+=` (${ce.value}% off)`),ce.modifierType==="PERCENT_INC"&&(qe+=` (+${ce.value}%)`);const R=Dm(d.currency||"INR");ce.modifierType==="FLAT_DEC"&&(qe+=` (-${R}${ce.value})`),ce.modifierType==="FLAT_INC"&&(qe+=` (+${R}${ce.value})`);const Y=ce.change||ce.applied||0;return e.jsxs("div",{className:"flex justify-between text-xs mb-1 pl-2 py-1",children:[e.jsxs("span",{className:"text-gray-600",children:[qe,":"]}),e.jsxs("span",{className:Y>=0?"text-red-600 font-medium":"text-green-600 font-medium",children:[Y>=0?"+":"",F(Y)]})]},pe)})]})]}),e.jsxs("div",{className:"flex justify-between font-medium text-gray-800 border-b border-dashed border-gray-200 pb-2",children:[e.jsx("span",{children:"Final Unit Price:"}),e.jsx("span",{children:F(d.subtotal/i)})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 pt-2",children:[e.jsxs("span",{children:["Subtotal (",i," units):"]}),e.jsx("span",{children:F(d.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:["GST (",d.gstPercentage,"%):"]}),e.jsx("span",{children:F(d.gstAmount)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-blue-900 border-t border-gray-300 pt-3 mt-2",children:[e.jsx("span",{children:"Total Payable:"}),e.jsx("span",{children:F(d.totalPayable)})]})]}),i>1&&e.jsxs("div",{className:"price-note mt-2 text-sm text-gray-500",children:["Price for ",i," units"]}),!1]}):null}const WE=({onLocationDetected:s,showUI:r=!0,autoDetect:i=!0})=>{const[l,d]=y.useState(null),[m,u]=y.useState(!1),[f,g]=y.useState(null),[p,j]=y.useState(""),[v,w]=y.useState(!1),[k,E]=y.useState("idle");y.useEffect(()=>{i&&!l&&T()},[i]),y.useEffect(()=>{l&&s&&(s(l),localStorage.setItem("userLocation",JSON.stringify(l)))},[l,s]);const T=async()=>{u(!0),g(null),E("ip"),console.log(" Step 1: Trying IP-based location detection...");try{const L=await fetch(`${Te}/geolocation/from-ip`,{method:"POST",headers:{"Content-Type":"application/json"}}),M=await L.json();if(L.ok&&M.success&&M.data&&M.data.pincode){const V={...M.data,source:"ip"};d(V),E("idle"),u(!1),console.log(" IP location detected:",V);return}L.status===400?console.log(" IP detection unavailable (localhost/private IP) - trying GPS..."):console.log(" IP detection returned no pincode - trying GPS...")}catch{console.log(" IP detection error - trying GPS...")}navigator.geolocation?(E("gps"),console.log(" Step 2: Trying GPS location..."),navigator.geolocation.getCurrentPosition(async L=>{try{const{latitude:M,longitude:V}=L.coords;console.log(` GPS coordinates obtained: ${M}, ${V}`);const le=await fetch(`${Te}/geolocation/from-gps`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:M,lng:V})}),G=await le.json();if(le.ok&&G.success&&G.data&&G.data.pincode){const z={...G.data,source:"gps"};d(z),E("idle"),console.log(" GPS location detected:",z)}else throw new Error(G.error||"GPS reverse geocoding failed")}catch(M){console.error(" GPS reverse geocoding failed:",M.message),g("Unable to detect your location automatically"),w(!0),E("manual")}finally{u(!1)}},L=>{console.log(` GPS denied or unavailable (${L.message})`),g("Unable to detect your location automatically"),w(!0),E("manual"),u(!1)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:0})):(console.log(" GPS not available"),g("Unable to detect your location automatically"),w(!0),E("manual"),u(!1))},F=async L=>{if(L.preventDefault(),!p||p.length!==6){g("Please enter a valid 6-digit pincode");return}u(!0),g(null);try{const M=await fetch(`${Te}/geolocation/detect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pincode:p})}),V=await M.json();if(M.ok&&V.success){const le={...V.data,source:"manual"};d(le),w(!1),console.log(" Manual pincode accepted:",le)}else g(V.error||"Invalid pincode")}catch(M){g(M.message||"Failed to validate pincode")}finally{u(!1)}};return r?e.jsxs("div",{className:"location-detector bg-linear-to-r from-blue-50 to-green-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ti,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:" Your Location"})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 py-2",children:[e.jsx(Kt,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[k==="ip"&&"Detecting from IP address...",k==="gps"&&"Getting GPS location...",k==="manual"&&"Validating pincode...",k==="idle"&&"Detecting location..."]})]}),f&&!l&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded mb-3",children:[e.jsx(Ts,{className:"w-4 h-4 text-yellow-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:f}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Please enter your pincode below"})]})]}),l&&!v&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-white rounded border border-green-200",children:[e.jsx(ya,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[l.city&&`${l.city}, `,l.state&&`${l.state} - `,e.jsx("span",{className:"text-blue-600",children:l.pincode})]}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded font-medium",children:[l.source==="gps"&&" GPS",l.source==="ip"&&" IP",l.source==="manual"&&" Manual"]})]}),l.source==="ip"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Location detected from your IP address"})]})]}),v&&e.jsxs("form",{onSubmit:F,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter Pincode"}),e.jsx("input",{type:"text",id:"pincode",value:p,onChange:L=>j(L.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit pincode",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",maxLength:6,required:!0})]}),e.jsx("button",{type:"submit",disabled:m||p.length!==6,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium text-sm",children:m?"Validating...":"Submit"})]}),!l&&!m&&!f&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded border border-blue-100",children:e.jsx("p",{className:"text-xs text-blue-700",children:" Detecting your location for accurate pricing..."})})]}):null},yd=({forcedProductId:s})=>{var gn,bn;const r=_h(),i=nr(),{categoryId:l,subCategoryId:d,nestedSubCategoryId:m}=r,u=s||r.productId,[f,g]=y.useState([]),[p,j]=y.useState(null),[v,w]=y.useState(null),[k,E]=y.useState([]),[T,F]=y.useState(!0),[L,M]=y.useState(null),[V,le]=y.useState([]),[G,z]=y.useState({}),[P,J]=y.useState([]),[W,oe]=y.useState(null),[ce,pe]=y.useState(!1),[qe,R]=y.useState(null),[Y,_]=y.useState(!1),[X,Q]=y.useState(""),[ne,Ne]=y.useState(""),[C,H]=y.useState(""),[re,je]=y.useState(1e3),[ge,O]=y.useState({}),[I,de]=y.useState(new Set),[we,Ce]=y.useState([]),[Ge,ue]=y.useState(null),[se,Ie]=y.useState(""),[Qe,tt]=y.useState(null),[ot,ze]=y.useState(""),[Ot,_t]=y.useState(""),[Dt,us]=y.useState(""),[Ps,Vt]=y.useState(""),[Gs,Ns]=y.useState(""),[wa,fe]=y.useState(null),[gt,kt]=y.useState(null),[cs,hs]=y.useState(""),[ht,Qt]=y.useState(""),[Vs,rs]=y.useState(""),[Bs,Be]=y.useState(0),[mt,bt]=y.useState(0),[ws,Fs]=y.useState(0),[Ws,qs]=y.useState(0),[da,Ra]=y.useState(null),[er,ir]=y.useState(0),[Xr,Ei]=y.useState(0),[$n,ee]=y.useState(0),[xe,ke]=y.useState(0),[st,nt]=y.useState([]),[Mt,lt]=y.useState(0),[pt,St]=y.useState(0),[zt,Ft]=y.useState(!1),[Ut,as]=y.useState(!1),[xs,Ss]=y.useState(!1),[ra,is]=y.useState(!1),[ms,ds]=y.useState(null),[lr,na]=y.useState([]),[fr,yr]=y.useState(!1),[Xs,tr]=y.useState(null),[en,Qs]=y.useState(!1),[Xt,Cs]=y.useState(null),[Ma,ia]=y.useState(!1);y.useEffect(()=>{const ie=$e=>{$e.key==="Escape"&&zt&&Ft(!1)};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[zt]),y.useEffect(()=>{try{const ie=localStorage.getItem("userLocation");if(ie){const $e=JSON.parse(ie);$e.pincode&&!Dt&&us($e.pincode)}}catch(ie){console.error("Error loading user location:",ie)}},[]),y.useEffect(()=>{var ie,$e,Ae;p&&((ie=p.filters)!=null&&ie.printingOption&&p.filters.printingOption.length===1&&(!X||X!==p.filters.printingOption[0])&&Q(p.filters.printingOption[0]),($e=p.filters)!=null&&$e.deliverySpeed&&p.filters.deliverySpeed.length===1&&(!ne||ne!==p.filters.deliverySpeed[0])&&Ne(p.filters.deliverySpeed[0]),(Ae=p.filters)!=null&&Ae.textureType&&p.filters.textureType.length===1&&(!C||C!==p.filters.textureType[0])&&H(p.filters.textureType[0]),p&&Y&&V.length>0?gj({attributes:V,rules:P,selectedValues:{...ge}}).attributes.forEach(Fe=>{if(!Fe.isVisible)return;const rt=Fe.attributeValues||[];if(rt.length===1){const De=rt[0];(!ge[Fe._id]||ge[Fe._id]!==De.value)&&O(Ve=>({...Ve,[Fe._id]:De.value}))}Fe.defaultValue&&!ge[Fe._id]&&O(De=>({...De,[Fe._id]:Fe.defaultValue}))}):p&&!Y&&p.dynamicAttributes&&p.dynamicAttributes.forEach(ye=>{if(!ye.isEnabled)return;const Fe=typeof ye.attributeType=="object"?ye.attributeType:null;if(!Fe)return;const rt=ye.customValues&&ye.customValues.length>0?ye.customValues:Fe.attributeValues||[];if(rt.length===1){const De=rt[0];(!ge[Fe._id]||ge[Fe._id]!==De.value)&&O({...ge,[Fe._id]:De.value})}}))},[p,Y,V,P,ge]),y.useEffect(()=>{(async()=>{var $e,Ae,ye,Fe,rt,De,Ve,_e;try{F(!0),M(null),j(null),g([]);let Le=null,ve=null;const xt=m||d;if(u)if(!/^[0-9a-fA-F]{24}$/.test(u))console.warn("Invalid productId format:",u),R("Invalid product ID format. Please select a product from the list."),pe(!1);else try{pe(!0),R(null);const As=await fetch(`${Te}/products/${u}/detail`,{method:"GET",headers:{Accept:"application/json"}});if(As.ok){const ps=await As.text();if(!ps.startsWith("<!DOCTYPE")&&!ps.startsWith("<html")){const he=JSON.parse(ps),Re=he.product,Ke=he.attributes||[],yt=he.subAttributes||{},Pt=he.rules||[],He=he.quantityConfig;Re.subcategory&&(typeof Re.subcategory=="object"&&Re.subcategory._id?(Le=Re.subcategory._id,ve=Re.subcategory,w(Re.subcategory)):typeof Re.subcategory=="string"&&(Le=Re.subcategory));const Ze={_id:Re._id,id:Re._id,name:Re.name||"",description:Re.description||"",descriptionArray:Re.descriptionArray||(Re.description?[Re.description]:[]),filters:{printingOption:(($e=Re.filters)==null?void 0:$e.printingOption)||[],orderQuantity:He||((Ae=Re.filters)==null?void 0:Ae.orderQuantity)||{min:1e3,max:72e3,multiples:1e3},deliverySpeed:((ye=Re.filters)==null?void 0:ye.deliverySpeed)||[],textureType:((Fe=Re.filters)==null?void 0:Fe.textureType)||void 0,filterPricesEnabled:((rt=Re.filters)==null?void 0:rt.filterPricesEnabled)||!1,printingOptionPrices:((De=Re.filters)==null?void 0:De.printingOptionPrices)||[],deliverySpeedPrices:((Ve=Re.filters)==null?void 0:Ve.deliverySpeedPrices)||[],textureTypePrices:((_e=Re.filters)==null?void 0:_e.textureTypePrices)||[]},basePrice:Re.basePrice||0,image:Re.image,subcategory:Re.subcategory,options:Re.options||[],dynamicAttributes:Ke.map(et=>({attributeType:{_id:et._id,attributeName:et.attributeName,inputStyle:et.inputStyle,attributeValues:et.attributeValues||[],defaultValue:et.defaultValue},isEnabled:!0,isRequired:et.isRequired||!1,displayOrder:et.displayOrder||0,customValues:et.customValues||[]})),quantityDiscounts:Re.quantityDiscounts||[],maxFileSizeMB:Re.maxFileSizeMB,minFileWidth:Re.minFileWidth,maxFileWidth:Re.maxFileWidth,minFileHeight:Re.minFileHeight,maxFileHeight:Re.maxFileHeight,blockCDRandJPG:Re.blockCDRandJPG||!1,additionalDesignCharge:Re.additionalDesignCharge||0,gstPercentage:Re.gstPercentage||0,showPriceIncludingGst:Re.showPriceIncludingGst||!1,instructions:Re.instructions||""};j(Ze),le(Ke),z(yt),J(Pt),oe(He),_(!0)}}else{const ps=await As.text();let he="Failed to fetch product details";try{he=JSON.parse(ps).error||he}catch{}R(he)}}catch(As){console.error("Error fetching product details:",As),R("Error loading product details")}finally{pe(!1)}if(!Le){const ls=l?`${Te}/subcategories/category/${l}?includeChildren=true`:`${Te}/subcategories`,As=await fetch(ls,{method:"GET",headers:{Accept:"application/json"}});if(As.ok){const ps=await As.text();if(!ps.startsWith("<!DOCTYPE")&&!ps.startsWith("<html")){const he=JSON.parse(ps),Re=Pt=>{let He=[];return Pt.forEach(Ze=>{He.push(Ze),Ze.children&&Ze.children.length>0&&(He=He.concat(Re(Ze.children)))}),He},Ke=Re(Array.isArray(he)?he:[]),yt=xt;if(yt&&(/^[0-9a-fA-F]{24}$/.test(yt)?ve=Ke.find(He=>He._id===yt):ve=Ke.find(He=>{var Ze,et;return He.slug===yt||((Ze=He.name)==null?void 0:Ze.toLowerCase().replace(/\s+/g,"-"))===yt.toLowerCase().replace(/\s+/g,"-")||((et=He.name)==null?void 0:et.toLowerCase())===yt.toLowerCase()})),ve||(ve=he.find(Pt=>{var He,Ze,et;return((He=Pt.slug)==null?void 0:He.toLowerCase())==="gloss-finish"||((Ze=Pt.name)==null?void 0:Ze.toLowerCase().includes("gloss finish"))||((et=Pt.name)==null?void 0:et.toLowerCase().includes("gloss"))})),ve){if(Le=ve._id,w(ve),ve.parent&&(typeof ve.parent=="object"?ve.parent._id:ve.parent)&&!m&&l){const Ze=typeof ve.parent=="object"?ve.parent._id:ve.parent;console.log(`Nested subcategory detected in list, redirecting to include parent: ${Ze}`),i(`/digital-print/${l}/${Ze}/${Le}${u?`/${u}`:""}`,{replace:!0}),F(!1);return}xt&&!/^[0-9a-fA-F]{24}$/.test(xt)&&Le&&Le!==xt&&(m?i(`/digital-print/${l}/${Le}${u?`/${u}`:""}`,{replace:!0}):l?i(`/digital-print/${l}/${Le}${u?`/${u}`:""}`,{replace:!0}):i(`/digital-print/${Le}${u?`/${u}`:""}`,{replace:!0}))}else if(xt)try{const Pt=await fetch(`${Te}/subcategories/${xt}`,{method:"GET",headers:{Accept:"application/json"}});if(Pt.ok){const He=await Pt.text();if(!He.startsWith("<!DOCTYPE")&&!He.startsWith("<html")){const Ze=JSON.parse(He);if(Ze&&Ze._id){if(ve=Ze,Le=Ze._id,w(Ze),console.log("Found subcategory via API lookup, using _id:",Le),Ze.parent&&(typeof Ze.parent=="object"?Ze.parent._id:Ze.parent)&&!m&&l){const Rt=typeof Ze.parent=="object"?Ze.parent._id:Ze.parent;console.log(`Nested subcategory detected, redirecting to include parent: ${Rt}`),i(`/digital-print/${l}/${Rt}/${Le}${u?`/${u}`:""}`,{replace:!0});return}if(xt&&!/^[0-9a-fA-F]{24}$/.test(xt)&&Le&&Le!==xt)if(m&&d){const Rt=(/^[0-9a-fA-F]{24}$/.test(d),d);i(`/digital-print/${l}/${Rt}/${Le}${u?`/${u}`:""}`,{replace:!0})}else l?i(`/digital-print/${l}/${Le}${u?`/${u}`:""}`,{replace:!0}):i(`/digital-print/${Le}${u?`/${u}`:""}`,{replace:!0})}}}}catch(Pt){console.warn("Error fetching subcategory via API:",Pt)}}}}const Pe=(ve==null?void 0:ve._id)||xt;if(Pe)try{console.log(`Checking for nested subcategories of: ${Pe}`);const ls=await fetch(`${Te}/subcategories/parent/${Pe}`,{method:"GET",headers:{Accept:"application/json"}});if(ls.ok){const As=await ls.text();if(!As.startsWith("<!DOCTYPE")&&!As.startsWith("<html"))try{const ps=JSON.parse(As),he=Array.isArray(ps)?ps:[];if(he.sort((Re,Ke)=>(Re.sortOrder||0)-(Ke.sortOrder||0)),he.length>0){if(he.length===1&&!u){const Re=he[0],Ke=Re._id;if(m!==Ke&&d!==Ke){console.log(`Only one nested subcategory found: ${Re.name} (${Ke}). Auto-navigating...`);const yt=l&&d?`/digital-print/${l}/${d}/${Ke}`:`/digital-print/${l}/${Ke}`;i(yt,{replace:!0});return}}console.log(`Found ${he.length} nested subcategories for subcategory ${Pe}`),E(he),g([]),F(!1);return}else console.log(`No nested subcategories found for subcategory ${Pe}, will fetch products`)}catch(ps){console.error("Error parsing nested subcategories response:",ps)}}else console.log(`Nested subcategories check returned ${ls.status}, will fetch products`)}catch(ls){console.error("Error fetching nested subcategories:",ls)}E([]);let it,es;if(!ve||ve===null)if(l&&/^[0-9a-fA-F]{24}$/.test(l))it=`${Te}/products/category/${l}`,es=await fetch(it,{method:"GET",headers:{Accept:"application/json"}});else{g([]);return}else if(ve&&ve._id){const ls=ve._id,As=ve.name||ls;console.log(`Fetching products for subcategory: ${As} (${ls})`),it=`${Te}/products/subcategory/${ls}`,es=await fetch(it,{method:"GET",headers:{Accept:"application/json"}})}else if(l&&/^[0-9a-fA-F]{24}$/.test(l))it=`${Te}/products/category/${l}`,es=await fetch(it,{method:"GET",headers:{Accept:"application/json"}});else{g([]);return}const _s=await es.text();if(_s.startsWith("<!DOCTYPE")||_s.startsWith("<html"))console.error("Server returned HTML instead of JSON for products"),g([]);else if(es.ok)try{const ls=JSON.parse(_s);if(!Array.isArray(ls))console.warn("Products data is not an array:",ls),g([]);else{const As=(ve==null?void 0:ve.name)||(ve==null?void 0:ve._id)||Le||"category "+l;console.log(`Fetched ${ls.length} product(s) for ${As}`);let ps=ls;if(ls.length===0&&ve&&l&&/^[0-9a-fA-F]{24}$/.test(l)){console.log(`No products found for subcategory ${Le}, fetching category products as fallback`);try{const Re=await fetch(`${Te}/products/category/${l}`,{method:"GET",headers:{Accept:"application/json"}});if(Re.ok){const Ke=await Re.text();if(!Ke.startsWith("<!DOCTYPE")&&!Ke.startsWith("<html")){const yt=JSON.parse(Ke);Array.isArray(yt)&&yt.length>0&&(console.log(`Found ${yt.length} product(s) in category as fallback`),ps=yt)}}}catch(Re){console.error("Error fetching category products as fallback:",Re)}}const he=ps.map(Re=>{var Ke,yt,Pt,He,Ze,et,Gt,Rt;return{_id:Re._id,id:Re._id,name:Re.name||"",description:Re.description||"",descriptionArray:Re.descriptionArray||(Re.description?[Re.description]:[]),filters:{printingOption:((Ke=Re.filters)==null?void 0:Ke.printingOption)||[],orderQuantity:((yt=Re.filters)==null?void 0:yt.orderQuantity)||{min:1e3,max:72e3,multiples:1e3},deliverySpeed:((Pt=Re.filters)==null?void 0:Pt.deliverySpeed)||[],textureType:((He=Re.filters)==null?void 0:He.textureType)||void 0,filterPricesEnabled:((Ze=Re.filters)==null?void 0:Ze.filterPricesEnabled)||!1,printingOptionPrices:((et=Re.filters)==null?void 0:et.printingOptionPrices)||[],deliverySpeedPrices:((Gt=Re.filters)==null?void 0:Gt.deliverySpeedPrices)||[],textureTypePrices:((Rt=Re.filters)==null?void 0:Rt.textureTypePrices)||[]},basePrice:Re.basePrice||0,image:Re.image,subcategory:Re.subcategory,options:Re.options||[],dynamicAttributes:Re.dynamicAttributes||[],quantityDiscounts:Re.quantityDiscounts||[],maxFileSizeMB:Re.maxFileSizeMB,minFileWidth:Re.minFileWidth,maxFileWidth:Re.maxFileWidth,minFileHeight:Re.minFileHeight,maxFileHeight:Re.maxFileHeight,blockCDRandJPG:Re.blockCDRandJPG||!1,additionalDesignCharge:Re.additionalDesignCharge||0,gstPercentage:Re.gstPercentage||0,showPriceIncludingGst:Re.showPriceIncludingGst||!1,instructions:Re.instructions||""}});if(g(he),he.length===1&&!u){const Re=he[0];l&&d?i(`/digital-print/${l}/${d}/${Re._id}`,{replace:!0}):l?i(`/digital-print/${l}/${Re._id}`,{replace:!0}):d?i(`/digital-print/${d}/${Re._id}`,{replace:!0}):i(`/digital-print/${Re._id}`,{replace:!0});return}if(u&&he.length>0){const Re=he.find(Ke=>Ke._id===u||Ke.id===u);Re&&j(Re)}}}catch{g([])}else{console.error(`Failed to fetch products: ${es.status} ${es.statusText}`);try{const ls=JSON.parse(_s);console.error("Error details:",ls)}catch{console.error("Error response text:",_s)}g([])}}catch{g([])}finally{F(!1)}})()},[l,d,m,u]);const ys=ie=>{var Fe,rt,De,Ve;j(ie),Q(""),Ne(""),H("");const $e=(Fe=ie.filters)==null?void 0:Fe.orderQuantity;let Ae=1e3;$e&&($e.quantityType==="STEP_WISE"&&$e.stepWiseQuantities&&$e.stepWiseQuantities.length>0?Ae=Math.min(...$e.stepWiseQuantities):$e.quantityType==="RANGE_WISE"&&$e.rangeWiseQuantities&&$e.rangeWiseQuantities.length>0?Ae=Math.min(...$e.rangeWiseQuantities.map(_e=>_e.min||1e3)):Ae=$e.min||1e3),je(Ae),Ra(null);const ye={};ie.dynamicAttributes&&Array.isArray(ie.dynamicAttributes)&&ie.dynamicAttributes.forEach(_e=>{if(_e.isEnabled){const Le=typeof _e.attributeType=="object"?_e.attributeType:null;if(Le){const ve=_e.customValues&&_e.customValues.length>0?_e.customValues:Le.attributeValues||[];Le.defaultValue&&ve.find(xt=>xt.value===Le.defaultValue)?ye[Le._id]=Le.defaultValue:ve.length>0&&(Le.inputStyle==="CHECKBOX"?ye[Le._id]=[]:ye[Le._id]=ve[0].value)}}}),O(ye),de(new Set),Ce([]),(rt=ie.filters)!=null&&rt.printingOption&&ie.filters.printingOption.length>0&&Q(ie.filters.printingOption[0]),(De=ie.filters)!=null&&De.deliverySpeed&&ie.filters.deliverySpeed.length>0&&Ne(ie.filters.deliverySpeed[0]),(Ve=ie.filters)!=null&&Ve.textureType&&ie.filters.textureType.length>0&&H(ie.filters.textureType[0])};y.useEffect(()=>{if(u&&f.length>0&&!p){const ie=f.find($e=>$e._id===u||$e.id===u);ie&&ys(ie)}},[u,f,p]);const xa=ie=>{if(Y&&V.length>0){for(const ye of V)if(!(!ye.isVisible||!ge[ye._id])){if(ye.isStepQuantity&&ye.stepQuantities&&ye.stepQuantities.length>0){const rt=ye.stepQuantities.map(De=>{const Ve=parseFloat(typeof De=="object"?De.quantity:De);return isNaN(Ve)?0:Ve}).filter(De=>De>0).sort((De,Ve)=>De-Ve);if(rt.length>0)return rt}if(ye.isRangeQuantity&&ye.rangeQuantities&&ye.rangeQuantities.length>0){const rt=[];if(ye.rangeQuantities.forEach(De=>{const Ve=typeof De=="object"?parseFloat(De.min):0,_e=typeof De=="object"&&De.max?parseFloat(De.max):null;if(Ve>0&&(rt.includes(Ve)||rt.push(Ve),_e&&_e>Ve)){const Le=Math.max(1,Math.floor((_e-Ve)/5));for(let ve=Ve+Le;ve<_e;ve+=Le)rt.includes(ve)||rt.push(ve);_e<=Ve*10&&(rt.includes(_e)||rt.push(_e))}}),rt.length>0)return rt.sort((De,Ve)=>De-Ve)}}}if(p&&p.dynamicAttributes)for(const ye of p.dynamicAttributes){if(!ye.isEnabled)continue;const Fe=typeof ye.attributeType=="object"?ye.attributeType:null;if(!(!Fe||!ge[Fe._id])){if(Fe.isStepQuantity&&Fe.stepQuantities&&Fe.stepQuantities.length>0){const De=Fe.stepQuantities.map(Ve=>{const _e=parseFloat(typeof Ve=="object"?Ve.quantity:Ve);return isNaN(_e)?0:_e}).filter(Ve=>Ve>0).sort((Ve,_e)=>Ve-_e);if(De.length>0)return De}if(Fe.isRangeQuantity&&Fe.rangeQuantities&&Fe.rangeQuantities.length>0){const De=[];if(Fe.rangeQuantities.forEach(Ve=>{const _e=typeof Ve=="object"?parseFloat(Ve.min):0,Le=typeof Ve=="object"&&Ve.max?parseFloat(Ve.max):null;if(_e>0&&(De.includes(_e)||De.push(_e),Le&&Le>_e)){const ve=Math.max(1,Math.floor((Le-_e)/5));for(let xt=_e+ve;xt<Le;xt+=ve)De.includes(xt)||De.push(xt);Le<=_e*10&&(De.includes(Le)||De.push(Le))}}),De.length>0)return De.sort((Ve,_e)=>Ve-_e)}}}const $e=ie.filters.orderQuantity,Ae=$e.quantityType||"SIMPLE";if(Ae==="STEP_WISE"&&$e.stepWiseQuantities&&$e.stepWiseQuantities.length>0)return $e.stepWiseQuantities.filter(ye=>ye>0).sort((ye,Fe)=>ye-Fe);if(Ae==="RANGE_WISE"&&$e.rangeWiseQuantities&&$e.rangeWiseQuantities.length>0){const ye=[];return $e.rangeWiseQuantities.forEach(Fe=>{if(Fe.min>0&&(ye.includes(Fe.min)||ye.push(Fe.min),Fe.max&&Fe.max>Fe.min)){const rt=Math.max(1,Math.floor((Fe.max-Fe.min)/5));for(let De=Fe.min+rt;De<Fe.max;De+=rt)ye.includes(De)||ye.push(De);Fe.max<=Fe.min*10&&(ye.includes(Fe.max)||ye.push(Fe.max))}}),ye.sort((Fe,rt)=>Fe-rt)}else{const{min:ye,max:Fe,multiples:rt}=$e,De=[];for(let Ve=ye;Ve<=Fe&&Ve<=ye+rt*20;Ve+=rt)De.push(Ve);return De}};Pr.useEffect(()=>{var ie,$e,Ae,ye,Fe,rt;if(p){let De=p.basePrice;if((($e=(ie=p.filters)==null?void 0:ie.orderQuantity)==null?void 0:$e.quantityType)==="RANGE_WISE"&&p.filters.orderQuantity.rangeWiseQuantities&&p.filters.orderQuantity.rangeWiseQuantities.length>0){const He=p.filters.orderQuantity.rangeWiseQuantities.find(Ze=>re>=Ze.min&&(Ze.max===null||Ze.max===void 0||re<=Ze.max));He&&He.priceMultiplier!==void 0&&He.priceMultiplier!==1&&(De=De*He.priceMultiplier)}let Ve=0,_e=0,Le=0;const ve=[],xt=((Ae=p.filters)==null?void 0:Ae.filterPricesEnabled)||!1;if(xt){if(X&&((ye=p.filters)!=null&&ye.printingOptionPrices)){const He=p.filters.printingOptionPrices.find(Ze=>Ze.name===X);if(He&&He.priceAdd!==void 0){const et=(typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0)/1e3;De+=et,Ve=et*re}}if(ne&&((Fe=p.filters)!=null&&Fe.deliverySpeedPrices)){const He=p.filters.deliverySpeedPrices.find(Ze=>Ze.name===ne);if(He&&He.priceAdd!==void 0){const et=(typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0)/1e3;De+=et,_e=et*re}}if(C&&((rt=p.filters)!=null&&rt.textureTypePrices)){const He=p.filters.textureTypePrices.find(Ze=>Ze.name===C);if(He&&He.priceAdd!==void 0){const et=(typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0)/1e3;De+=et,Le=et*re}}}else p.options&&Array.isArray(p.options)&&p.options.forEach(He=>{if(He.name===X){const Ze=typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0;if(Ze>0){const et=Ze/1e3;De+=et,Ve=et*re}else if(Ze<0){const et=1+Math.abs(Ze)/100,Gt=De;De*=et,Ve=(De-Gt)*re}}else if(He.name===ne){const Ze=typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0;if(Ze>0){const et=Ze/1e3;De+=et,_e=et*re}else if(Ze<0){const et=1+Math.abs(Ze)/100,Gt=De;De*=et,_e=(De-Gt)*re}}else if(He.name===C){const Ze=typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0;if(Ze>0){const et=Ze/1e3;De+=et,Le=et*re}else if(Ze<0){const et=1+Math.abs(Ze)/100,Gt=De;De*=et,Le=(De-Gt)*re}}});if(!xt&&(!p.options||p.options.length===0)){if(X==="Both Sides"){const He=De;De*=1.2,Ve=(De-He)*re}if(ne==="Express"){const He=De;De*=1.3,_e=(De-He)*re}if(C){const He=De;De*=1.15,Le=(De-He)*re}}let Pe=0;p.options&&Array.isArray(p.options)&&we.length>0&&we.forEach(He=>{const Ze=p.options.find(et=>et.name===He);if(Ze&&Ze.priceAdd!==void 0){const et=typeof Ze.priceAdd=="number"?Ze.priceAdd:parseFloat(Ze.priceAdd)||0;if(et!==0){const Gt=et/1e3;De+=Gt,Pe+=Gt*re}}}),ke(Pe),p.dynamicAttributes&&Array.isArray(p.dynamicAttributes)&&p.dynamicAttributes.forEach(He=>{if(He.isEnabled){const Ze=typeof He.attributeType=="object"?He.attributeType:null;if(Ze){const et=ge[Ze._id];if(et!=null&&et!==""){const Gt=He.customValues&&He.customValues.length>0?He.customValues:Ze.attributeValues||[];if(Array.isArray(et)){const Rt=[];let Zs=0;et.forEach(Us=>{const Wt=Gt.find(zs=>zs.value===Us);if(Wt){let zs=0;if(Wt.description){const At=Wt.description.match(/Price Impact: ([\d.]+)/);At&&(zs=parseFloat(At[1])||0)}if(zs>0)Zs+=zs*re,Wt.label&&Rt.push(Wt.label);else if(Wt.priceMultiplier&&Wt.priceMultiplier!==1){const At=De;De=De*Wt.priceMultiplier;const _a=(De-At)*re;Zs+=_a,Wt.label&&Rt.push(Wt.label)}}}),Zs!==0&&ve.push({name:Ze.attributeName,label:Rt.join(", ")||"Selected",charge:Zs})}else{const Rt=Gt.find(Zs=>Zs.value===et);if(Rt){let Zs=0;if(Rt.description){const Us=Rt.description.match(/Price Impact: ([\d.]+)/);Us&&(Zs=parseFloat(Us[1])||0)}if(Zs>0){const Us=Zs*re;Us!==0&&ve.push({name:Ze.attributeName,label:Rt.label||String(et||""),charge:Us})}else if(Rt.priceMultiplier&&Rt.priceMultiplier!==1){const Us=De;De=De*Rt.priceMultiplier;const Wt=(De-Us)*re;Wt!==0&&ve.push({name:Ze.attributeName,label:Rt.label||String(et||""),charge:Wt})}}}}}}});const it=De*re;let es=1,_s=null;if(p.quantityDiscounts&&Array.isArray(p.quantityDiscounts)){const He=p.quantityDiscounts.find(Ze=>{const et=Ze.minQuantity||0,Gt=Ze.maxQuantity;return re>=et&&(Gt==null||re<=Gt)});He&&(He.priceMultiplier?es=He.priceMultiplier:He.discountPercentage&&(es=(100-He.discountPercentage)/100),_s=He.discountPercentage||0)}const ls=ve.reduce((He,Ze)=>He+Ze.charge,0);lt(it);const ps=it*es+ls;bt(ps),Ra(_s),ir(Ve),Ei(_e),ee(Le),nt(ve);const he=p.additionalDesignCharge||0;qs(he);const Re=p.gstPercentage||0,Ke=(ps+he)*(Re/100);Fs(Ke);const yt=ps+he;Be(yt);const Pt=re>0?yt/re:De;St(Pt)}},[p,X,ne,C,re,ge,we]),Pr.useEffect(()=>{if(!p)return;const ie=xa(p);ie.length>0&&!ie.includes(re)&&je(ie[0])},[ge,p]);const hn=ie=>{const $e={};if(!ie)return $e;const Ae=ie.match(/max(?:imum)?\s+file\s+size[:\s]+(\d+)\s*mb/i);Ae&&($e.maxSizeMB=parseInt(Ae[1]));const ye=ie.match(/(\d+)\s*[x]\s*(\d+)\s*pixels?/i);ye&&($e.fileWidth=parseInt(ye[1]),$e.fileHeight=parseInt(ye[2])),/cdr|jpg|jpeg.*not\s+(?:accepted|allowed|permitted)/i.test(ie)&&($e.blockCDRandJPG=!0);const Fe=ie.match(/(?:format|file\s+type|extension).*?only[:\s]+([^.]+)/i);if(Fe){const rt=Fe[1].split(/[,\s]+or\s+/i).map(De=>De.trim().toLowerCase());$e.allowedFormats=rt}return $e},sr=(ie,$e)=>{var xt;const Ae=(xt=ie.target.files)==null?void 0:xt[0];if(!Ae)return;if(!Ae.type.startsWith("image/")){alert("Please upload an image file"),ie.target.value="";return}const ye=p!=null&&p.instructions?hn(p.instructions):{},Fe=ye.maxSizeMB||(p==null?void 0:p.maxFileSizeMB)||10,rt=Fe*1024*1024;if(Ae.size>rt){alert(`File size must be less than ${Fe} MB as specified in the instructions`),ie.target.value="";return}if(ye.blockCDRandJPG!==void 0?ye.blockCDRandJPG:(p==null?void 0:p.blockCDRandJPG)||!1){const Pe=Ae.name.toLowerCase(),it=Pe.substring(Pe.lastIndexOf(".")+1);if(it==="cdr"||it==="jpg"||it==="jpeg"){alert("CDR and JPG files are not accepted for this product as per instructions. Please use PNG, PDF, or other formats."),ie.target.value="";return}}if(ye.allowedFormats&&ye.allowedFormats.length>0){const Pe=Ae.name.toLowerCase(),it=Pe.substring(Pe.lastIndexOf(".")+1);if(!ye.allowedFormats.some(_s=>it.includes(_s.toLowerCase()))){alert(`Only ${ye.allowedFormats.join(", ").toUpperCase()} files are accepted as per instructions.`),ie.target.value="";return}}const Ve=p==null?void 0:p.minFileWidth,_e=p==null?void 0:p.maxFileWidth,Le=p==null?void 0:p.minFileHeight,ve=p==null?void 0:p.maxFileHeight;if(Ve||_e||Le||ve){const Pe=new Image,it=URL.createObjectURL(Ae);Pe.onload=()=>{URL.revokeObjectURL(it);let es=[];if(Ve&&Pe.width<Ve&&es.push(`Image width must be at least ${Ve} pixels. Current width: ${Pe.width} pixels.`),_e&&Pe.width>_e&&es.push(`Image width must be at most ${_e} pixels. Current width: ${Pe.width} pixels.`),Le&&Pe.height<Le&&es.push(`Image height must be at least ${Le} pixels. Current height: ${Pe.height} pixels.`),ve&&Pe.height>ve&&es.push(`Image height must be at most ${ve} pixels. Current height: ${Pe.height} pixels.`),es.length>0){alert(es.join(`
`)),ie.target.value="";return}if($e==="front"){fe(Ae);const _s=new FileReader;_s.onloadend=()=>{hs(_s.result)},_s.readAsDataURL(Ae)}else{kt(Ae);const _s=new FileReader;_s.onloadend=()=>{Qt(_s.result)},_s.readAsDataURL(Ae)}},Pe.onerror=()=>{URL.revokeObjectURL(it),alert("Failed to load image. Please check the file format."),ie.target.value=""},Pe.src=it}else if($e==="front"){fe(Ae);const Pe=new FileReader;Pe.onloadend=()=>{hs(Pe.result)},Pe.readAsDataURL(Ae)}else{kt(Ae);const Pe=new FileReader;Pe.onloadend=()=>{Qt(Pe.result)},Pe.readAsDataURL(Ae)}},Fn=()=>{const ie=localStorage.getItem("token");return{"Content-Type":"application/json",...ie&&{Authorization:`Bearer ${ie}`}}},xn=(ie,$e,Ae,ye)=>{const rt=(Ae-ie)*Math.PI/180,De=(ye-$e)*Math.PI/180,Ve=Math.sin(rt/2)*Math.sin(rt/2)+Math.cos(ie*Math.PI/180)*Math.cos(Ae*Math.PI/180)*Math.sin(De/2)*Math.sin(De/2);return 6371*(2*Math.atan2(Math.sqrt(Ve),Math.sqrt(1-Ve)))},ar=async(ie,$e,Ae)=>{const ye=[{name:"Main Branch",address:"1-A, One Colony, One Street, One, India",latitude:28.6139,longitude:77.209,pincode:"110001"},{name:"Branch 2",address:"2-B, Two Colony, Two Street, Two, India",latitude:19.076,longitude:72.8777,pincode:"400001"},{name:"Branch 3",address:"3-C, Three Colony, Three Street, Three, India",latitude:12.9716,longitude:77.5946,pincode:"560001"}];let Fe=ye[0],rt=xn(ie,$e,ye[0].latitude,ye[0].longitude);for(const ve of ye){const xt=xn(ie,$e,ve.latitude,ve.longitude);xt<rt&&(rt=xt,Fe=ve)}const De=2,Ve=Math.max(1,Math.ceil(rt/500)),_e=De+Ve,Le=new Date;return Le.setDate(Le.getDate()+_e),{deliveryDate:Le.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),locationSource:Ae?`[Location: ${Ae}]`:`[Location: ${ie.toFixed(4)}, ${$e.toFixed(4)}]`,nearestBranch:Fe.name}},Sa=async ie=>{try{const Ae=await fetch(`${Te}/geocoding/search?postalcode=${ie}&country=India&limit=1`,{headers:{Accept:"application/json"}});if(Ae.ok){const ye=await Ae.json();if(ye&&ye.length>0){const Fe=ye[0];return{lat:parseFloat(Fe.lat),lon:parseFloat(Fe.lon),address:Fe.display_name||`Pincode: ${ie}`}}}}catch{}return null};y.useEffect(()=>{(async()=>{if(p)try{if(navigator.geolocation)navigator.geolocation.getCurrentPosition(async $e=>{const{latitude:Ae,longitude:ye}=$e.coords;let Fe="";try{const Ve=await fetch(`${Te}/geocoding/reverse?lat=${Ae}&lon=${ye}&addressdetails=1`,{headers:{Accept:"application/json"}});if(Ve.ok){const _e=await Ve.json();if(_e.address){const Le=_e.address,ve=[];Le.house_number&&ve.push(Le.house_number),Le.road&&ve.push(Le.road),(Le.suburb||Le.neighbourhood)&&ve.push(Le.suburb||Le.neighbourhood),(Le.city||Le.town||Le.village)&&ve.push(Le.city||Le.town||Le.village),Le.state&&ve.push(Le.state),Le.country&&ve.push(Le.country),Fe=ve.join(", ")}}}catch{}const rt=await ar(Ae,ye,Fe);ue(rt.deliveryDate),Ie(rt.locationSource)},async()=>{const $e=localStorage.getItem("userPincode");if($e&&$e.length===6){const Ae=await Sa($e);if(Ae){const ye=await ar(Ae.lat,Ae.lon,Ae.address);ue(ye.deliveryDate),Ie(`[Pincode: ${$e}]`)}else{const Fe=new Date;Fe.setDate(Fe.getDate()+5),ue(Fe.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),Ie(`[Pincode: ${$e}]`)}}else{const ye=new Date;ye.setDate(ye.getDate()+5),ue(ye.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),Ie("Default estimate")}});else{const $e=localStorage.getItem("userPincode");if($e&&$e.length===6){const Ae=await Sa($e);if(Ae){const ye=await ar(Ae.lat,Ae.lon,Ae.address);ue(ye.deliveryDate),Ie(`[Pincode: ${$e}]`)}else{const Fe=new Date;Fe.setDate(Fe.getDate()+5),ue(Fe.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),Ie(`[Pincode: ${$e}]`)}}else{const ye=new Date;ye.setDate(ye.getDate()+5),ue(ye.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),Ie("Default estimate")}}}catch{}})()},[p]);const la=async()=>{if(!navigator.geolocation){ds("Geolocation is not supported by your browser.");return}ia(!0),ds(null);try{const ie=await new Promise((ye,Fe)=>{navigator.geolocation.getCurrentPosition(ye,Fe,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:$e,longitude:Ae}=ie.coords;try{const Fe=await fetch(`${Te}/geocoding/reverse?lat=${$e}&lon=${Ae}&zoom=18&addressdetails=1`,{headers:{Accept:"application/json"}});if(!Fe.ok)throw new Error("Failed to fetch address");const De=(await Fe.json()).address||{},Ve=[];De.house_number&&Ve.push(De.house_number),De.road&&Ve.push(De.road),De.neighbourhood&&Ve.push(De.neighbourhood),De.suburb&&Ve.push(De.suburb),(De.city||De.town||De.village)&&Ve.push(De.city||De.town||De.village),De.state&&Ve.push(De.state),De.postcode&&us(De.postcode);const _e=Ve.join(", ");_e?(Vt(_e),Ie("location")):ds("Could not determine address from location. Please enter manually.")}catch{ds("Could not fetch address from location. Please enter manually.")}}catch(ie){ie.code===1?ds("Location access denied. Please enable location permissions or enter address manually."):ie.code===2?ds("Location unavailable. Please enter address manually."):ie.code===3?ds("Location request timeout. Please try again or enter address manually."):ds("Failed to get location. Please enter address manually.")}finally{ia(!1)}},gs=y.useRef(null),tn=async()=>{if(!localStorage.getItem("token")){tt("Please login to place an order. Redirecting to login page..."),setTimeout(()=>{i("/login")},2e3);return}gs.current=null;const $e=[];if(p||($e.push("Please select a product"),gs.current||(gs.current=document.querySelector("[data-product-select]"))),!wa&&($e.push("Please upload a reference image"),!gs.current)){const Ae=document.querySelector('input[type="file"][accept*="image"]');if(Ae)gs.current=Ae;else{const ye=document.querySelector("[data-upload-section]");ye&&(gs.current=ye)}}if(!X&&($e.push("Please select a printing option"),!gs.current)){const Ae=document.querySelector('[data-field="printingOption"]');if(Ae)gs.current=Ae;else{const ye=document.querySelector('[data-section="printingOption"]');ye&&(gs.current=ye)}}if(!ne&&($e.push("Please select a delivery speed"),!gs.current)){const Ae=document.querySelector('[data-field="deliverySpeed"]');if(Ae)gs.current=Ae;else{const ye=document.querySelector('[data-section="deliverySpeed"]');ye&&(gs.current=ye)}}if(p!=null&&p.dynamicAttributes&&p.dynamicAttributes.forEach(Ae=>{if(Ae.isRequired&&Ae.isEnabled){const ye=typeof Ae.attributeType=="object"?Ae.attributeType:null;if(ye){const Fe=ge[ye._id];if((!Fe||Array.isArray(Fe)&&Fe.length===0)&&($e.push(`${ye.attributeName} is required`),!gs.current)){const rt=document.querySelector(`[data-attribute="${ye._id}"]`);if(rt){const De=rt.querySelector("input, select, button");gs.current=De||rt}else{const De=document.querySelector(`[data-attribute-name="${ye.attributeName}"]`);De&&(gs.current=De)}}if(Fe&&(ye.inputStyle==="DROPDOWN"||ye.inputStyle==="RADIO")){const rt=Ae.customValues&&Ae.customValues.length>0?Ae.customValues:ye.attributeValues||[],De=Array.isArray(Fe)?rt.find(Ve=>Fe.includes(Ve.value)):rt.find(Ve=>Ve.value===Fe);if(De&&De.description){const Ve=De.description.match(/Images Required: (\d+)/),_e=Ve?parseInt(Ve[1]):0;if(_e>0){const Le=`${ye._id}_images`;if((Array.isArray(ge[Le])?ge[Le]:[]).length<_e&&($e.push(`${ye.attributeName}: Please upload ${_e} image(s) for ${De.label}`),!gs.current)){const xt=document.querySelector(`[data-attribute="${ye._id}"]`);if(xt){const Pe=xt.querySelector(".bg-cream-50");gs.current=Pe||xt}}}}}}}}),$e.length>0){tt($e.join(`
`)),setTimeout(()=>{if(gs.current){gs.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),setTimeout(()=>{if(gs.current instanceof HTMLInputElement||gs.current instanceof HTMLSelectElement)gs.current.focus();else{const ye=gs.current.querySelector("input, select, button");ye&&(ye instanceof HTMLInputElement||ye instanceof HTMLSelectElement||ye instanceof HTMLButtonElement)&&ye.focus()}},300);const Ae=gs.current instanceof HTMLInputElement||gs.current instanceof HTMLSelectElement?gs.current:gs.current.querySelector("input, select, button")||gs.current;Ae&&(Ae.style.borderColor="#ef4444",Ae.style.borderWidth="2px",Ae.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)",setTimeout(()=>{Ae.style.borderColor="",Ae.style.borderWidth="",Ae.style.boxShadow=""},3e3))}else setTimeout(()=>{const Ae=document.querySelector('[role="alert"]');Ae&&Ae.scrollIntoView({behavior:"smooth",block:"center"})},100)},100);return}tt(null),is(!0),ds(null)},Gl=async()=>{var $e,Ae,ye,Fe,rt,De,Ve,_e,Le;if(!p){ds("Please select a product.");return}if(!wa||!cs){ds("Please upload a reference image.");return}if(!X){ds("Please select a printing option.");return}if(!ne){ds("Please select a delivery speed.");return}if(!re||re<=0){ds("Please enter a valid quantity (must be greater than 0).");return}const ie=Bs+ws;if(!ie||ie<=0){ds("Invalid order total. Please refresh and try again.");return}if(p!=null&&p.dynamicAttributes){for(const ve of p.dynamicAttributes)if(ve.isRequired&&ve.isEnabled){const xt=typeof ve.attributeType=="object"?ve.attributeType:null;if(xt){const Pe=ge[xt._id];if(!Pe||Array.isArray(Pe)&&Pe.length===0){ds(`${xt.attributeName} is required.`);return}}}}if(!ot||ot.trim().length===0){ds("Please enter your full name.");return}if(!Ot||Ot.trim().length===0){ds("Please enter your email address.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ot)){ds("Please enter a valid email address.");return}if(!Dt||Dt.trim().length===0){ds("Please enter your pincode.");return}if(Dt.length!==6||!/^\d+$/.test(Dt)){ds("Please enter a valid 6-digit pincode.");return}if(!Ps||Ps.trim().length===0){ds("Please enter your complete address.");return}if(!Gs||Gs.trim().length===0){ds("Please enter your mobile number.");return}if(Gs.length<10||!/^\d+$/.test(Gs)){ds("Please enter a valid 10-digit mobile number.");return}Ss(!0),ds(null);try{await new Promise(he=>setTimeout(he,300));const ve={};if(!cs||!wa)throw new Error("Front design image is required.");try{let he=cs;if(he.includes(",")&&(he=he.split(",")[1]),!he||he.trim().length===0)throw new Error("Invalid front image data. Please upload the image again.");ve.frontImage={data:he,contentType:wa.type||"image/png",filename:wa.name||"front-design.png"}}catch(he){throw new Error(he instanceof Error?he.message:"Failed to prepare front design image. Please try uploading again.")}if(gt&&ht)try{let he=ht;he.includes(",")&&(he=he.split(",")[1]),he&&he.trim().length>0&&(ve.backImage={data:he,contentType:gt.type||"image/png",filename:gt.name||"back-design.png"})}catch{}const xt=we.map(he=>{const Re=p.options.find(Ke=>Ke.name===he);return{optionId:he,optionName:(Re==null?void 0:Re.name)||he,name:(Re==null?void 0:Re.name)||he,priceAdd:(Re==null?void 0:Re.priceAdd)||0,description:(Re==null?void 0:Re.description)||null,image:(Re==null?void 0:Re.image)||null}}),Pe={},it=[];for(const he of Object.keys(ge)){const Re=ge[he];if(Re!=null&&Re!=="")if(he.includes("__")){const[Ke,yt]=he.split("__"),Pt=`${Ke}:${yt}`,Ze=(G[Pt]||[]).find(et=>et.value===Re);if(Ze){const et=($e=p.dynamicAttributes)==null?void 0:$e.find(Gt=>{const Rt=typeof Gt.attributeType=="object"?Gt.attributeType:null;return(Rt==null?void 0:Rt._id)===Ke});if(et){const Gt=typeof et.attributeType=="object"?et.attributeType:null;Gt&&it.push({attributeTypeId:Ke,attributeName:`${Gt.attributeName}: ${Ze.label}`,attributeValue:Re,label:Ze.label||(Re==null?void 0:Re.toString())||"",priceAdd:Ze.priceAdd||0,description:void 0,image:Ze.image||void 0})}}}else{const Ke=(Ae=p.dynamicAttributes)==null?void 0:Ae.find(yt=>{const Pt=typeof yt.attributeType=="object"?yt.attributeType:null;return(Pt==null?void 0:Pt._id)===he});if(Ke){const yt=typeof Ke.attributeType=="object"?Ke.attributeType:null;if(yt){const Pt=Ke.customValues||[],He=yt.attributeValues||[],Ze=Pt.length>0?Pt:He;let et=null;if(Array.isArray(Re)?et=Ze.filter(Gt=>Re.includes(Gt.value)):et=Ze.find(Gt=>Gt.value===Re||Gt.value===Re.toString()),et)if(Array.isArray(et)){const Gt=et.map(At=>At.label||At.value).join(", ");let Rt=0,Zs=0;et.forEach(At=>{if(At.description){const _a=At.description.match(/Price Impact: ([\d.]+)/);_a&&(Rt+=parseFloat(_a[1])||0)}At.priceMultiplier&&(Zs+=At.priceMultiplier)});const Us=`${he}_images`,Wt=Array.isArray(ge[Us])?ge[Us].filter(At=>At!==null):[],zs=[];if(Wt.length>0){for(const At of Wt)if(At instanceof File)try{const _a=new FileReader,Ga=await new Promise((ii,Rr)=>{_a.onload=()=>{const li=_a.result,Un=li.includes(",")?li.split(",")[1]:li;ii(Un)},_a.onerror=Rr,_a.readAsDataURL(At)});zs.push({data:Ga,contentType:At.type||"image/png",filename:At.name||"attribute-image.png"})}catch(_a){console.error("Error converting image to base64:",_a)}}it.push({attributeTypeId:he,attributeName:yt.attributeName||"Attribute",attributeValue:Re,label:Gt,priceMultiplier:Rt>0?void 0:Zs||void 0,priceAdd:Rt,description:et.map(At=>At.description).filter(Boolean).join("; ")||void 0,image:((ye=et[0])==null?void 0:ye.image)||void 0,uploadedImages:zs.length>0?zs:void 0})}else{let Gt=0,Rt=et.priceMultiplier;if(et.description){const zs=et.description.match(/Price Impact: ([\d.]+)/);zs&&(Gt=parseFloat(zs[1])||0,Gt>0&&(Rt=void 0))}const Zs=`${he}_images`,Us=Array.isArray(ge[Zs])?ge[Zs].filter(zs=>zs!==null):[],Wt=[];if(Us.length>0){for(const zs of Us)if(zs instanceof File)try{const At=new FileReader,_a=await new Promise((Ga,ii)=>{At.onload=()=>{const Rr=At.result,li=Rr.includes(",")?Rr.split(",")[1]:Rr;Ga(li)},At.onerror=ii,At.readAsDataURL(zs)});Wt.push({data:_a,contentType:zs.type||"image/png",filename:zs.name||"attribute-image.png"})}catch(At){console.error("Error converting image to base64:",At)}}it.push({attributeTypeId:he,attributeName:yt.attributeName||"Attribute",attributeValue:Re,label:et.label||(Re==null?void 0:Re.toString())||"",priceMultiplier:Rt||void 0,priceAdd:Gt,description:et.description||void 0,image:et.image||void 0,uploadedImages:Wt.length>0?Wt:void 0})}else it.push({attributeTypeId:he,attributeName:yt.attributeName||"Attribute",attributeValue:Re,label:(Re==null?void 0:Re.toString())||"",priceAdd:0})}}Re instanceof File?Pe[he]=Re.name:Pe[he]=Re}}const es={productId:p._id,quantity:re,finish:X,shape:ne,selectedOptions:xt,selectedDynamicAttributes:it,promoCodes:lr||[],pincode:Dt.trim(),address:Ps.trim(),mobileNumber:Gs.trim(),uploadedDesign:ve,notes:Vs||"",advancePaid:0,paymentStatus:"pending",paymentGatewayInvoiceId:null,paperGSM:Pe.paperGSM||null,paperQuality:Pe.paperQuality||null,laminationType:Pe.laminationType||null,specialEffects:Pe.specialEffects?[Pe.specialEffects]:[]},_s=localStorage.getItem("token");let ls;if(_s)ls=await fetch(`${Te}/orders`,{method:"POST",headers:Fn(),body:JSON.stringify(es)});else{const he={...es,name:ot.trim(),email:Ot.trim(),mobileNumber:Gs.trim()};ls=await fetch(`${Te}/orders/create-with-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)})}if(!ls.ok){let he="Failed to create order. Please try again.",Re=null;try{const Ke=await ls.json();if(he=Ke.error||he,Re=Ke.details,he.includes("No token provided")||he.includes("token")){const yt={...es,name:ot.trim(),email:Ot.trim(),mobileNumber:Gs.trim()},Pt=await fetch(`${Te}/orders/create-with-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(yt)});if(Pt.ok){const He=await Pt.json();He.token&&(localStorage.setItem("token",He.token),He.user&&localStorage.setItem("user",JSON.stringify(He.user)));const Ze=He.order;is(!1),Ss(!1),He.isNewUser&&He.tempPassword?alert(`Account created successfully!

Your temporary password: ${He.tempPassword}

Please save this password. You can change it after logging in.

Order placed successfully! Order Number: ${Ze.orderNumber||((Fe=Ze.order)==null?void 0:Fe.orderNumber)||"N/A"}`):alert(`Order placed successfully! Order Number: ${Ze.orderNumber||((rt=Ze.order)==null?void 0:rt.orderNumber)||"N/A"}`),Ze._id||(De=Ze.order)!=null&&De._id?i(`/order/${Ze._id||Ze.order._id}`):i("/profile");return}}if(Ke.details)if(Array.isArray(Ke.details)){const yt=Ke.details.map(Pt=>`${Pt.field}: ${Pt.message}`).join(`
`);he+=`

`+yt}else he+=`

`+Ke.details}catch{const yt=await ls.text().catch(()=>"");he+=`

Server returned: ${ls.status} ${ls.statusText}`}throw new Error(he)}const As=await ls.json(),ps=As.order||As;As.token&&(localStorage.setItem("token",As.token),As.user&&localStorage.setItem("user",JSON.stringify(As.user))),is(!1),Ss(!1),As.isNewUser&&As.tempPassword?alert(`Account created successfully!

Your temporary password: ${As.tempPassword}

Please save this password. You can change it after logging in.

Order placed successfully! Order Number: ${ps.orderNumber||((Ve=ps.order)==null?void 0:Ve.orderNumber)||"N/A"}`):alert(`Order placed successfully! Order Number: ${ps.orderNumber||((_e=ps.order)==null?void 0:_e.orderNumber)||"N/A"}`),ps._id||(Le=ps.order)!=null&&Le._id?i(`/order/${ps._id||ps.order._id}`):i("/profile")}catch(ve){ds(ve instanceof Error?ve.message:"Failed to process payment and create order. Please try again."),Ss(!1)}};return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-4 sm:py-8",children:[e.jsx("style",{children:`
        .preview-container {
          position: relative;
          width: 100%;
          max-width: 500px;
          height: auto;
          display: inline-block;
          overflow: hidden;
        }
        
        .card-image {
          width: 100%;
          height: 100%;
          object-fit: contain;
          border-radius: 8px;
          transition: filter 0.4s;
          display: block;
          position: relative;
          z-index: 1;
        }
        
        /* GLOSS EFFECT (SHINY OVERLAY) */
        .preview-container.gloss::after {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(
            120deg,
            rgba(255, 255, 255, 0.25),
            rgba(255, 255, 255, 0) 60%
          );
          pointer-events: none;
          border-radius: 8px;
          z-index: 2;
        }
        
        /* UV COATING (DEEP SHINE + BOOST COLOR) */
        .preview-container.uv .card-image {
          filter: saturate(1.15) contrast(1.1) !important;
        }
        
        .preview-container.uv::after {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.35),
            rgba(255, 255, 255, 0) 70%
          );
          mix-blend-mode: screen;
          pointer-events: none;
          border-radius: 8px;
          z-index: 2;
        }
        
        /* LAMINATION (SOFT GLOSS, LOW SHINE) */
        .preview-container.laminated .card-image {
          filter: brightness(1.05) !important;
        }
        
        .preview-container.laminated::after {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(255, 255, 255, 0.08);
          border-radius: 8px;
          pointer-events: none;
          z-index: 2;
        }
        
        /* TEXTURE EFFECTS - Different patterns for each texture number */
        .preview-container.texture::before {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          pointer-events: none;
          border-radius: 8px;
          z-index: 3;
          opacity: 0.35;
          mix-blend-mode: overlay;
        }
        
        /* Texture No.1 - Fine Grid */
        .preview-container.texture-1::before {
          background-image: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.03) 2px,
            rgba(0, 0, 0, 0.03) 4px
          ),
          repeating-linear-gradient(
            90deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.03) 2px,
            rgba(0, 0, 0, 0.03) 4px
          );
        }
        
        /* Texture No.2 - Coarse Grid */
        .preview-container.texture-2::before {
          background-image: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 4px,
            rgba(0, 0, 0, 0.04) 4px,
            rgba(0, 0, 0, 0.04) 8px
          ),
          repeating-linear-gradient(
            90deg,
            transparent,
            transparent 4px,
            rgba(0, 0, 0, 0.04) 4px,
            rgba(0, 0, 0, 0.04) 8px
          );
        }
        
        /* Texture No.3 - Diagonal Lines */
        .preview-container.texture-3::before {
          background-image: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 3px,
            rgba(0, 0, 0, 0.03) 3px,
            rgba(0, 0, 0, 0.03) 6px
          );
        }
        
        /* Texture No.4 - Dots Pattern */
        .preview-container.texture-4::before {
          background-image: radial-gradient(circle, rgba(0, 0, 0, 0.04) 1px, transparent 1px);
          background-size: 6px 6px;
        }
        
        /* Texture No.5 - Horizontal Lines */
        .preview-container.texture-5::before {
          background-image: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 3px,
            rgba(0, 0, 0, 0.03) 3px,
            rgba(0, 0, 0, 0.03) 6px
          );
        }
        
        /* Texture No.6 - Vertical Lines */
        .preview-container.texture-6::before {
          background-image: repeating-linear-gradient(
            90deg,
            transparent,
            transparent 3px,
            rgba(0, 0, 0, 0.03) 3px,
            rgba(0, 0, 0, 0.03) 6px
          );
        }
        
        /* Texture No.7 - Crosshatch */
        .preview-container.texture-7::before {
          background-image: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.02) 2px,
            rgba(0, 0, 0, 0.02) 4px
          ),
          repeating-linear-gradient(
            -45deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.02) 2px,
            rgba(0, 0, 0, 0.02) 4px
          );
        }
        
        /* Texture No.8 - Fine Dots */
        .preview-container.texture-8::before {
          background-image: radial-gradient(circle, rgba(0, 0, 0, 0.03) 0.5px, transparent 0.5px);
          background-size: 4px 4px;
        }
        
        /* NO COATING (MATTE LOOK) */
        .preview-container.none .card-image {
          filter: saturate(0.9) contrast(0.95) !important;
        }
        
        /* SIZE EFFECTS */
        .preview-container.small {
          transform: scale(0.8);
          transition: transform 0.3s ease, max-width 0.3s ease;
        }
        
        .preview-container.small .card-image {
          transform: scale(1);
        }
        
        /* Modal specific styles */
        .preview-container .card-image {
          max-width: 100%;
          max-height: 90vh;
        }
      `}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx(Or,{onClick:()=>{i(u&&m&&d&&l&&!(u===m)?`/digital-print/${l}/${d}/${m}`:u&&d&&l&&!(u===d)?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:u&&m&&d&&l&&u!==m?`/digital-print/${l}/${d}/${m}`:u&&d&&l&&u!==d?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:l?`/digital-print/${l}`:"/digital-print",label:u&&d&&u!==d||u&&m&&u!==m?"Back to products":u&&l||d?"Back to Category":"Back to Categories",className:"text-sm sm:text-base text-cream-600 hover:text-cream-900"})}),T&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(Kt,{className:"animate-spin text-cream-900",size:48})}),L&&!T&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-800",children:L})}),qe&&u&&e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-50",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[e.jsx(Ts,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-2",children:"Error Loading Product"}),e.jsx("p",{className:"text-cream-700 mb-4",children:qe}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800",children:"Retry"})]})}),e.jsx(ha,{children:Qe&&e.jsxs(at.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"sticky top-4 mb-4 p-4 bg-red-50 border-2 border-red-300 rounded-lg flex items-start gap-3 text-red-700 shadow-lg z-50",role:"alert",children:[e.jsx(Ts,{size:20,className:"shrink-0 mt-0.5 text-red-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold mb-1 text-red-900",children:"Please complete the required fields:"}),e.jsx("ul",{className:"text-sm whitespace-pre-wrap font-sans list-disc list-inside space-y-1",children:Qe.split(`
`).filter(ie=>ie.trim()).map((ie,$e)=>e.jsx("li",{className:"text-red-800",children:ie.replace(/^Please fill in all required fields:\n?/,"")},$e))})]}),e.jsx("button",{onClick:()=>tt(null),className:"shrink-0 text-red-500 hover:text-red-700 transition-colors","aria-label":"Close error message",children:e.jsx(ns,{size:18})})]})}),!T&&!L&&!ce&&!qe&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsxs("div",{className:"lg:sticky lg:top-24 space-y-4",children:[e.jsx(at.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[320px] sm:min-h-[420px] md:min-h-[520px] bg-cream-100/50",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:(()=>{let ie=(p==null?void 0:p.image)||(v==null?void 0:v.image)||"/Glossy.png",$e=(p==null?void 0:p.name)||(v==null?void 0:v.name)||"Product Preview";if((!ie||ie.trim()===""||ie==="null"||ie==="undefined")&&(ie=(v==null?void 0:v.image)||"/Glossy.png"),p&&p.dynamicAttributes&&I.size>0){const Ae=[...p.dynamicAttributes].filter(ye=>ye.isEnabled).sort((ye,Fe)=>(ye.displayOrder||0)-(Fe.displayOrder||0));for(const ye of Ae){const Fe=typeof ye.attributeType=="object"?ye.attributeType:null;if(!Fe||!I.has(Fe._id))continue;const rt=ge[Fe._id];if(!rt)continue;const De=Array.isArray(rt)?rt:[rt],Ve=ye.customValues&&ye.customValues.length>0?ye.customValues:Fe.attributeValues||[];let _e=!1;for(const Le of De){const ve=Ve.find(xt=>xt.value===Le||xt.value===String(Le));if(ve&&ve.image&&ve.image.trim()!==""){ie=ve.image,$e=`${Fe.attributeName} - ${ve.label}`,_e=!0;break}}if(_e)break}}return e.jsx("img",{src:ie,alt:$e,className:"w-full h-full object-contain rounded-lg",onError:Ae=>{const ye=Ae.target;ye.src!==(v==null?void 0:v.image)&&ye.src!=="/Glossy.png"&&(ye.src=(v==null?void 0:v.image)||"/Glossy.png")},style:{maxWidth:"100%",maxHeight:"100%"}})})()})}),p&&e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 p-4 sm:p-5 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-sm sm:text-base font-semibold text-cream-900",children:"Order Summary"}),e.jsx("span",{className:"text-xs text-cream-500",children:"Live pricing"})]}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm text-cream-800 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-cream-600",children:"Product"}),e.jsx("span",{className:"font-medium text-right line-clamp-1 ml-2",children:p.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-cream-600",children:"Quantity"}),e.jsx("span",{className:"font-medium",children:re.toLocaleString()})]})]}),e.jsx(WE,{onLocationDetected:ie=>{console.log(" Location detected for pricing:",ie)},showUI:!1,autoDetect:!0}),e.jsx(YE,{productId:p._id,quantity:re,selectedDynamicAttributes:Object.entries(ge).filter(([ie,$e])=>$e!=null&&$e!=="").map(([ie,$e])=>{const Ae=V.find(rt=>rt._id===ie),ye=(Ae==null?void 0:Ae.attributeName)||ie;let Fe=$e;if(Ae!=null&&Ae.attributeValues){const rt=Ae.attributeValues.find(De=>De.value===$e);Fe=(rt==null?void 0:rt.label)||$e}return{attributeType:ie,value:typeof $e=="object"&&!Array.isArray($e)&&!($e instanceof File)?JSON.stringify($e):$e,name:ye,label:Fe}}),showBreakdown:!1})]})]})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"bg-white p-4 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl shadow-lg border border-cream-100 min-h-[600px] lg:min-h-[700px] flex flex-col",children:p?e.jsx(ha,{mode:"wait",children:e.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[e.jsxs("div",{className:"mb-6 sm:mb-8 border-b border-cream-100 pb-4 sm:pb-6 relative",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx(Or,{onClick:()=>{i(u&&m&&d&&l?`/digital-print/${l}/${d}/${m}`:u&&d&&l?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:u&&m&&d&&l?`/digital-print/${l}/${d}/${m}`:u&&d&&l?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:l?`/digital-print/${l}`:"/digital-print",label:u&&d?"Back to Subcategory":u&&l||d?"Back to Category":"Back to Categories",className:"text-sm text-cream-600 hover:text-cream-900 mb-2"})}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"font-serif text-xl sm:text-2xl md:text-3xl font-bold text-cream-900 mb-2",children:p.name}),e.jsxs("button",{onClick:()=>as(!Ut),className:"mt-2 mb-4 px-4 py-2 bg-cream-100 hover:bg-cream-200 text-cream-900 rounded-lg border border-cream-300 text-sm font-medium transition-all flex items-center gap-2",children:[e.jsx(gr,{size:16}),"Instructions"]}),e.jsx(ha,{children:Ut&&e.jsx(at.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4 mb-6 p-4 sm:p-6 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-bold text-yellow-900 mb-3 flex items-center gap-2",children:[e.jsx(gr,{size:16}),"Important Instructions - Please Read Carefully"]}),p.instructions&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border-2 border-red-300 rounded-lg",children:[e.jsxs("p",{className:"text-xs font-bold text-red-900 mb-2 flex items-center gap-2",children:[e.jsx(ns,{size:14,className:"text-red-600"}),"CRITICAL: Company Not Responsible If Instructions Not Followed"]}),e.jsx("div",{className:"text-xs sm:text-sm text-red-800 whitespace-pre-line",children:p.instructions})]}),e.jsxs("div",{className:"space-y-3 text-xs sm:text-sm text-yellow-800",children:[(p.maxFileSizeMB||p.minFileWidth||p.maxFileWidth||p.minFileHeight||p.maxFileHeight||p.blockCDRandJPG)&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-900 mb-2",children:"File Upload Requirements:"}),e.jsxs("div",{className:"space-y-1 ml-4",children:[p.maxFileSizeMB&&e.jsxs("p",{children:[" Maximum file size: ",e.jsxs("strong",{children:[p.maxFileSizeMB," MB"]})]}),(p.minFileWidth||p.maxFileWidth||p.minFileHeight||p.maxFileHeight)&&e.jsxs("div",{children:[e.jsx("p",{children:" File dimensions:"}),e.jsxs("div",{className:"ml-4 space-y-1",children:[(p.minFileWidth||p.maxFileWidth)&&e.jsxs("p",{children:["- Width: ",e.jsx("strong",{children:p.minFileWidth&&p.maxFileWidth?`${p.minFileWidth} - ${p.maxFileWidth} pixels`:p.minFileWidth?`Minimum ${p.minFileWidth} pixels`:p.maxFileWidth?`Maximum ${p.maxFileWidth} pixels`:"Any"})]}),(p.minFileHeight||p.maxFileHeight)&&e.jsxs("p",{children:["- Height: ",e.jsx("strong",{children:p.minFileHeight&&p.maxFileHeight?`${p.minFileHeight} - ${p.maxFileHeight} pixels`:p.minFileHeight?`Minimum ${p.minFileHeight} pixels`:p.maxFileHeight?`Maximum ${p.maxFileHeight} pixels`:"Any"})]})]})]}),p.blockCDRandJPG&&e.jsxs("p",{children:[" ",e.jsx("strong",{children:"CDR and JPG files are not accepted"})," for this product"]})]})]}),(p.additionalDesignCharge||p.gstPercentage)&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-900 mb-2",children:"Additional Charges:"}),e.jsxs("div",{className:"space-y-1 ml-4",children:[p.additionalDesignCharge&&p.additionalDesignCharge>0&&e.jsxs("p",{children:[" Additional Design Charge: ",e.jsx("strong",{children:pr(p.additionalDesignCharge,"INR")})," (applied if design help is needed)"]}),p.gstPercentage&&p.gstPercentage>0&&e.jsxs("p",{children:[" GST: ",e.jsxs("strong",{children:[p.gstPercentage,"%"]})," (applied on subtotal + design charge)"]})]})]}),!p.instructions&&!p.maxFileSizeMB&&!p.minFileWidth&&!p.maxFileWidth&&!p.minFileHeight&&!p.maxFileHeight&&!p.blockCDRandJPG&&!p.additionalDesignCharge&&!p.gstPercentage&&e.jsx("p",{className:"text-yellow-700 italic",children:"No special instructions for this product."})]})]})})}),e.jsx("div",{className:"text-sm sm:text-base text-cream-600 space-y-2",children:(()=>{if(p.description&&/<[a-z][\s\S]*>/i.test(p.description))return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                                        .product-description-html {
                                          color: #92400e;
                                          line-height: 1.6;
                                          white-space: normal;
                                        }
                                        .product-description-html b,
                                        .product-description-html strong {
                                          font-weight: 600;
                                          color: #7c2d12;
                                          display: inline;
                                        }
                                        .product-description-html > b:first-child,
                                        .product-description-html > strong:first-child {
                                          display: block;
                                          font-size: 1.1em;
                                          margin-bottom: 0.75rem;
                                          color: #7c2d12;
                                        }
                                        .product-description-html p,
                                        .product-description-html div {
                                          margin-bottom: 0.5rem;
                                          line-height: 1.6;
                                          color: #92400e;
                                          white-space: normal;
                                          word-wrap: break-word;
                                          overflow-wrap: break-word;
                                        }
                                        .product-description-html div:not(:first-child) {
                                          padding-left: 0;
                                        }
                                        .product-description-html ul,
                                        .product-description-html ol {
                                          margin-left: 1.5rem;
                                          margin-bottom: 0.5rem;
                                        }
                                        .product-description-html li {
                                          margin-bottom: 0.25rem;
                                        }
                                      `}),e.jsx("div",{className:"product-description-html text-cream-600",dangerouslySetInnerHTML:{__html:p.description}})]});if(p.descriptionArray&&Array.isArray(p.descriptionArray)&&p.descriptionArray.length>0){const ie=Ae=>Ae.split(/(\*\*.*?\*\*)/g).map((Fe,rt)=>{if(Fe.startsWith("**")&&Fe.endsWith("**")){const De=Fe.slice(2,-2);return e.jsx("strong",{className:"font-bold text-cream-800",children:De},rt)}return e.jsx("span",{children:Fe},rt)});return[...p.descriptionArray].reverse().map((Ae,ye)=>{if(Ae.includes(":"))return e.jsx("div",{className:"mt-3 first:mt-0",children:e.jsx("p",{className:"font-semibold text-cream-700 mb-1.5",children:ie(Ae)})},ye);if(Ae.startsWith("")||Ae.startsWith("->")||Ae.startsWith("")){const Fe=Ae.replace(/^[\-]+\s*/,"").trim();return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:ie(Fe)})]},ye)}else return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:ie(Ae)})]},ye)})}else if(p.description){const ie=p.description.split(`
`).map(Ae=>Ae.trim()).filter(Ae=>Ae.length>0),$e=Ae=>Ae.split(/(\*\*.*?\*\*)/g).map((Fe,rt)=>{if(Fe.startsWith("**")&&Fe.endsWith("**")){const De=Fe.slice(2,-2);return e.jsx("strong",{className:"font-bold text-cream-800",children:De},rt)}return e.jsx("span",{children:Fe},rt)});return ie.map((Ae,ye)=>{if(Ae.includes(":"))return e.jsx("div",{className:"mt-3 first:mt-0",children:e.jsx("p",{className:"font-semibold text-cream-700 mb-1.5",children:$e(Ae)})},ye);if(Ae.startsWith("")||Ae.startsWith("->")||Ae.startsWith("")){const Fe=Ae.replace(/^[\-]+\s*/,"").trim();return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:$e(Fe)})]},ye)}else return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:$e(Ae)})]},ye)})}else return e.jsx("p",{className:"text-cream-500 italic",children:"No description available"})})()})]})})]}),(()=>{var rt,De,Ve;let ie=1;const $e=p.options&&p.options.length>0,Ae=((rt=p.filters)==null?void 0:rt.printingOption)&&p.filters.printingOption.length>0,ye=((De=p.filters)==null?void 0:De.textureType)&&p.filters.textureType.length>0,Fe=((Ve=p.filters)==null?void 0:Ve.deliverySpeed)&&p.filters.deliverySpeed.length>0;return e.jsxs(e.Fragment,{children:[$e&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[ie++,". Product Options"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:p.options.map((_e,Le)=>{const ve=we.includes(_e.name);return e.jsxs("button",{type:"button",onClick:()=>{Ce(ve?we.filter(xt=>xt!==_e.name):[...we,_e.name])},className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${ve?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[ve&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Xa,{size:18,className:"text-cream-900"})}),e.jsx("div",{className:"font-bold text-sm mb-1",children:_e.name}),_e.description&&e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:_e.description}),_e.priceAdd!==void 0&&_e.priceAdd!==0&&e.jsxs("p",{className:"text-xs text-cream-700 mt-1 font-medium",children:[_e.priceAdd>0?"+":"",pr(typeof _e.priceAdd=="number"?_e.priceAdd:parseFloat(_e.priceAdd),"INR")," per 1000 units"]}),_e.image&&e.jsx("img",{src:_e.image,alt:_e.name,className:"w-full h-24 object-cover rounded-lg mt-2"})]},Le)})})]}),Ae&&p.filters.printingOption.length>1&&e.jsxs("div",{className:"mb-6 sm:mb-8","data-section":"printingOption",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[ie++,". Printing Option"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:p.filters.printingOption.map(_e=>{var xt,Pe;const Le=((xt=p.filters)==null?void 0:xt.filterPricesEnabled)||!1;let ve=null;if(Le&&((Pe=p.filters)!=null&&Pe.printingOptionPrices)){const it=p.filters.printingOptionPrices.find(es=>es.name===_e);it&&it.priceAdd!==void 0&&it.priceAdd!==0&&(ve=it.priceAdd)}return e.jsxs("button",{"data-field":"printingOption",onClick:()=>Q(_e),className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${X===_e?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[X===_e&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Xa,{size:18,className:"text-cream-900"})}),e.jsx("div",{className:"font-bold text-sm",children:_e}),ve!==null&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1",children:[ve>0?"+":"",pr(Math.abs(ve),"INR")," per 1000 units"]})]},_e)})})]}),ye&&p.filters.textureType.length>1&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[ie++,". Texture Type"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:p.filters.textureType.map(_e=>{var xt,Pe;const Le=((xt=p.filters)==null?void 0:xt.filterPricesEnabled)||!1;let ve=null;if(Le&&((Pe=p.filters)!=null&&Pe.textureTypePrices)){const it=p.filters.textureTypePrices.find(es=>es.name===_e);it&&it.priceAdd!==void 0&&it.priceAdd!==0&&(ve=it.priceAdd)}return e.jsxs("button",{onClick:()=>H(_e),className:`p-3 rounded-xl border text-xs sm:text-sm font-medium transition-all duration-200 relative ${C===_e?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[C===_e&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx(Xa,{size:16,className:"text-cream-900"})}),e.jsx("div",{children:_e}),ve!==null&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1",children:[ve>0?"+":"",pr(Math.abs(ve),"INR"),"/1k"]})]},_e)})})]}),Fe&&p.filters.deliverySpeed.length>1&&e.jsxs("div",{className:"mb-6 sm:mb-8","data-section":"deliverySpeed",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[ie++,". Delivery Speed"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:p.filters.deliverySpeed.map(_e=>{var xt,Pe;const Le=((xt=p.filters)==null?void 0:xt.filterPricesEnabled)||!1;let ve=null;if(Le&&((Pe=p.filters)!=null&&Pe.deliverySpeedPrices)){const it=p.filters.deliverySpeedPrices.find(es=>es.name===_e);it&&it.priceAdd!==void 0&&it.priceAdd!==0&&(ve=it.priceAdd)}return e.jsxs("button",{"data-field":"deliverySpeed",onClick:()=>Ne(_e),className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${ne===_e?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[ne===_e&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Xa,{size:18,className:"text-cream-900"})}),e.jsx("div",{className:"font-bold text-sm",children:_e}),ve!==null&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1",children:[ve>0?"+":"",pr(Math.abs(ve),"INR")," per 1000 units"]})]},_e)})})]}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[ie++,". Select Quantity"]}),e.jsx("div",{className:"mb-3",children:e.jsx(Ch,{options:xa(p).map(_e=>({value:_e,label:_e.toLocaleString()})),value:re,onValueChange:_e=>je(Number(_e)),placeholder:"Select quantity",className:"w-full"})}),(()=>{let _e=null,Le="";if(Y&&V.length>0){for(const Pe of V)if(!(!Pe.isVisible||!ge[Pe._id])){if(Pe.isStepQuantity&&Pe.stepQuantities&&Pe.stepQuantities.length>0){_e={type:"STEP_WISE",stepQuantities:Pe.stepQuantities},Le=Pe.attributeName;break}if(Pe.isRangeQuantity&&Pe.rangeQuantities&&Pe.rangeQuantities.length>0){_e={type:"RANGE_WISE",rangeQuantities:Pe.rangeQuantities},Le=Pe.attributeName;break}}}if(!_e&&p&&p.dynamicAttributes)for(const Pe of p.dynamicAttributes){if(!Pe.isEnabled)continue;const it=typeof Pe.attributeType=="object"?Pe.attributeType:null;if(!(!it||!ge[it._id])){if(it.isStepQuantity&&it.stepQuantities&&it.stepQuantities.length>0){_e={type:"STEP_WISE",stepQuantities:it.stepQuantities},Le=it.attributeName;break}if(it.isRangeQuantity&&it.rangeQuantities&&it.rangeQuantities.length>0){_e={type:"RANGE_WISE",rangeQuantities:it.rangeQuantities},Le=it.attributeName;break}}}if(_e){if(_e.type==="STEP_WISE"){const Pe=_e.stepQuantities.map(it=>{const es=parseFloat(typeof it=="object"?it.quantity:it);return isNaN(es)?0:es}).filter(it=>it>0).sort((it,es)=>it-es);return e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2",children:[e.jsxs("span",{className:"font-medium",children:[Le,":"]})," Available quantities: ",Pe.map(it=>it.toLocaleString()).join(", ")]})}else if(_e.type==="RANGE_WISE")return e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2 space-y-1",children:[e.jsxs("div",{className:"font-medium mb-1",children:[Le,":"]}),_e.rangeQuantities.map((Pe,it)=>{const es=typeof Pe=="object"?parseFloat(Pe.min):0,_s=typeof Pe=="object"&&Pe.max?parseFloat(Pe.max):null,ls=typeof Pe=="object"?parseFloat(Pe.price):0;return e.jsxs("div",{children:[Pe.label||`${es.toLocaleString()}${_s?` - ${_s.toLocaleString()}`:"+"} units`,ls>0&&e.jsxs("span",{className:"ml-2 text-green-600",children:["(",pr(ls,"INR"),")"]})]},it)})]})}const ve=p.filters.orderQuantity,xt=ve.quantityType||"SIMPLE";return xt==="STEP_WISE"&&ve.stepWiseQuantities&&ve.stepWiseQuantities.length>0?e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2",children:["Available quantities: ",ve.stepWiseQuantities.sort((Pe,it)=>Pe-it).map(Pe=>Pe.toLocaleString()).join(", ")]}):xt==="RANGE_WISE"&&ve.rangeWiseQuantities&&ve.rangeWiseQuantities.length>0?e.jsx("div",{className:"text-xs sm:text-sm text-cream-600 mb-2 space-y-1",children:ve.rangeWiseQuantities.map((Pe,it)=>e.jsxs("div",{children:[Pe.label||`${Pe.min.toLocaleString()}${Pe.max?` - ${Pe.max.toLocaleString()}`:"+"} units`,Pe.priceMultiplier!==1&&e.jsxs("span",{className:"ml-2 text-green-600",children:["(",Pe.priceMultiplier>1?"+":"",((Pe.priceMultiplier-1)*100).toFixed(0),"% price)"]})]},it))}):e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2",children:["Min: ",ve.min.toLocaleString(),", Max: ",ve.max.toLocaleString(),", Multiples of: ",ve.multiples.toLocaleString()]})})(),da!==null&&da>0&&e.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-xs sm:text-sm text-green-800 font-medium",children:[" You're saving ",da,"% on this order! (Bulk discount applied)"]})}),p.quantityDiscounts&&p.quantityDiscounts.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 mb-2",children:"Available Quantity Discounts:"}),e.jsx("div",{className:"space-y-1",children:p.quantityDiscounts.map((_e,Le)=>{const ve=_e.minQuantity||0,xt=_e.maxQuantity,Pe=_e.discountPercentage||0,it=xt?`${ve.toLocaleString()} - ${xt.toLocaleString()} units`:`${ve.toLocaleString()}+ units`;return e.jsxs("p",{className:"text-xs text-blue-800",children:[" ",it,": ",e.jsxs("strong",{children:[Pe,"% off"]})]},Le)})})]})]}),(()=>{let _e=[];return Y&&V.length>0?_e=gj({attributes:V,rules:P,selectedValues:{...ge}}).attributes.filter(ve=>ve.isVisible).sort((ve,xt)=>(ve.displayOrder||0)-(xt.displayOrder||0)):p.dynamicAttributes&&(_e=p.dynamicAttributes.filter(Le=>Le.isEnabled).sort((Le,ve)=>(Le.displayOrder||0)-(ve.displayOrder||0))),_e.length>0?e.jsx(e.Fragment,{children:_e.map(Le=>{var Re;let ve=null,xt=[],Pe="",it=!1;if(Y&&V.length>0)Pe=Le._id,it=Le.isRequired||!1,Le.displayOrder,xt=Le.allowedValues&&Le.allowedValues.length>0?(Le.attributeValues||[]).filter(Ke=>Le.allowedValues.includes(Ke.value)):Le.attributeValues||[],ve={_id:Le._id,attributeName:Le.attributeName,inputStyle:Le.inputStyle,attributeValues:xt,defaultValue:Le.defaultValue};else{if(typeof Le.attributeType=="object"&&Le.attributeType!==null)ve=Le.attributeType,Pe=ve._id;else if(typeof Le.attributeType=="string"&&Le.attributeType.trim()!=="")return null;if(!ve||!ve._id)return null;Pe=ve._id,it=Le.isRequired||!1,Le.displayOrder,xt=Le.customValues&&Le.customValues.length>0?Le.customValues:ve.attributeValues||[]}if(["DROPDOWN","RADIO","POPUP"].includes(ve.inputStyle)&&xt.length<1)return e.jsxs("div",{className:"mb-6 sm:mb-8 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[ie++,". ",ve.attributeName,it&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("p",{className:"text-sm text-yellow-800",children:"This attribute is not available because it requires at least 2 options. Please contact support."})]},Pe);const _s=ge[Pe],ls=xt.find(Ke=>Ke.value===_s),As=(ls==null?void 0:ls.hasSubAttributes)===!0,ps=`${Pe}:${_s||""}`,he=As&&_s?G[ps]||[]:[];return e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[ie++,". ",ve.attributeName,it&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(ve.inputStyle==="DROPDOWN"||ve.inputStyle==="POPUP")&&e.jsx("div",{"data-attribute":Pe,"data-attribute-name":ve.attributeName,children:xt.length===0?e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No options available for this attribute. Please contact support."})}):e.jsxs(e.Fragment,{children:[e.jsx(Ch,{options:xt.filter(Ke=>Ke&&Ke.value&&Ke.label).map(Ke=>{let yt="";if(Ke.description){const Pt=Ke.description.match(/Price Impact: ([\d.]+)/);if(Pt){const He=parseFloat(Pt[1])||0;He>0&&(yt=` (+${He.toFixed(2)}/unit)`)}}if(!yt&&Ke.priceMultiplier&&Ke.priceMultiplier!==1&&p){const He=(p.basePrice||0)*(Ke.priceMultiplier-1);Math.abs(He)>=.01&&(yt=` (+${He.toFixed(2)}/unit)`)}return{value:Ke.value,label:`${Ke.label}${yt}`}}),value:ge[Pe]||"",onValueChange:Ke=>{O({...ge,[Pe]:Ke}),de(yt=>new Set(yt).add(Pe))},placeholder:`Select ${ve.attributeName}`,className:"w-full"}),he.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-xs font-semibold text-cream-700 mb-2",children:["Select ",(ls==null?void 0:ls.label)||ve.attributeName," Option:"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:he.map(Ke=>{const yt=()=>!Ke.priceAdd||Ke.priceAdd===0?null:`+${Ke.priceAdd.toFixed(2)}/piece`,Pt=`${Pe}__${_s}`,He=ge[Pt]===Ke.value;return e.jsxs("button",{type:"button",onClick:()=>{O(Ze=>({...Ze,[Pt]:Ke.value}))},className:`p-3 rounded-lg border text-left transition-all ${He?"border-cream-900 bg-cream-50 ring-1 ring-cream-900":"border-cream-200 hover:border-cream-400"}`,children:[Ke.image&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:Ke.image,alt:Ke.label,className:"w-full h-24 object-cover rounded"})}),e.jsx("div",{className:"text-sm font-medium",children:Ke.label}),yt()&&e.jsx("div",{className:"text-xs text-cream-600 mt-1",children:yt()})]},Ke._id)})})]}),(()=>{const Ke=ge[Pe];if(!Ke)return null;const yt=xt.find(Gt=>Gt.value===Ke);if(!yt||!yt.description)return null;const Pt=yt.description.match(/Images Required: (\d+)/),He=Pt?parseInt(Pt[1]):0;if(He<=0)return null;const Ze=`${Pe}_images`,et=Array.isArray(ge[Ze])?ge[Ze]:[];return e.jsxs("div",{className:"mt-4 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsxs("label",{className:"block text-sm font-semibold text-cream-900 mb-3",children:["Upload Images for ",yt.label," (",He," required) *"]}),e.jsx("div",{className:"space-y-3",children:Array.from({length:He}).map((Gt,Rt)=>{const Zs=et[Rt]||null;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*","data-image-index":Rt,"data-attr-id":Pe,onChange:Us=>{var zs;const Wt=((zs=Us.target.files)==null?void 0:zs[0])||null;if(Wt){const At=[...et];for(;At.length<=Rt;)At.push(null);At[Rt]=Wt,O({...ge,[Ze]:At})}},className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg text-sm"}),Zs&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-cream-600 max-w-[150px] truncate",children:Zs.name}),e.jsx("button",{type:"button",onClick:()=>{const Us=[...et];Us[Rt]=null,O({...ge,[Ze]:Us});const Wt=document.querySelector(`input[type="file"][data-image-index="${Rt}"][data-attr-id="${Pe}"]`);Wt&&(Wt.value="")},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove image",children:e.jsx(ns,{size:16})})]})]},Rt)})}),et.length<He&&e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Please upload ",He-et.length," more image(s)"]})]})})()]})}),ve.inputStyle==="RADIO"&&e.jsx("div",{"data-attribute":Pe,children:xt.length===0?e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No options available for this attribute. Please contact support."})}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>{const Ke=xt.filter(yt=>yt&&yt.value&&yt.label);tr({attributeId:Pe,attributeName:ve.attributeName,attributeValues:Ke,selectedValue:ge[Pe]||null,isRequired:it}),yr(!0)},className:"w-full px-4 py-3 border-2 border-dashed border-cream-300 rounded-xl hover:border-cream-400 hover:bg-cream-50 transition-all duration-200 text-left flex items-center justify-between group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-cream-700 group-hover:text-cream-900",children:ge[Pe]?((Re=xt.find(Ke=>Ke.value===ge[Pe]))==null?void 0:Re.label)||"Select option":`Select ${ve.attributeName}${it?" *":""}`}),ge[Pe]&&e.jsx("div",{className:"text-xs text-cream-500 mt-1",children:"Click to change selection"})]}),e.jsx(Jr,{size:18,className:"text-cream-400 group-hover:text-cream-600 transition-colors"})]}),(()=>{const Ke=ge[Pe];if(!Ke)return null;const yt=xt.find(Gt=>Gt.value===Ke);if(!yt||!yt.description)return null;const Pt=yt.description.match(/Images Required: (\d+)/),He=Pt?parseInt(Pt[1]):0;if(He<=0)return null;const Ze=`${Pe}_images`,et=Array.isArray(ge[Ze])?ge[Ze]:[];return e.jsxs("div",{className:"mt-4 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsxs("label",{className:"block text-sm font-semibold text-cream-900 mb-3",children:["Upload Images for ",yt.label," (",He," required) *"]}),e.jsx("div",{className:"space-y-3",children:Array.from({length:He}).map((Gt,Rt)=>{const Zs=et[Rt]||null;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*","data-image-index":Rt,"data-attr-id":Pe,onChange:Us=>{var zs;const Wt=((zs=Us.target.files)==null?void 0:zs[0])||null;if(Wt){const At=[...et];for(;At.length<=Rt;)At.push(null);At[Rt]=Wt,O({...ge,[Ze]:At})}},className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg text-sm"}),Zs&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-cream-600 max-w-[150px] truncate",children:Zs.name}),e.jsx("button",{type:"button",onClick:()=>{const Us=[...et];Us[Rt]=null,O({...ge,[Ze]:Us});const Wt=document.querySelector(`input[type="file"][data-image-index="${Rt}"][data-attr-id="${Pe}"]`);Wt&&(Wt.value="")},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove image",children:e.jsx(ns,{size:16})})]})]},Rt)})}),et.length<He&&e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Please upload ",He-et.length," more image(s)"]})]})})()]})}),ve.inputStyle==="CHECKBOX"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3","data-attribute":Pe,children:xt.length===0?e.jsx("div",{className:"col-span-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No options available for this attribute. Please contact support."})}):xt.filter(Ke=>Ke&&Ke.value&&Ke.label).map(Ke=>{const yt=()=>{if(Ke.description){const et=Ke.description.match(/Price Impact: ([\d.]+)/);if(et){const Gt=parseFloat(et[1])||0;if(Gt>0)return`+${Gt.toFixed(2)}/unit`}}if(!Ke.priceMultiplier||Ke.priceMultiplier===1||!p)return null;const Ze=(p.basePrice||0)*(Ke.priceMultiplier-1);return Math.abs(Ze)<.01?null:`+${Ze.toFixed(2)}/unit`},Pt=Array.isArray(ge[Pe])&&ge[Pe].includes(Ke.value);return e.jsxs("button",{type:"button",onClick:()=>{const He=Array.isArray(ge[Pe])?ge[Pe]:[],Ze=Pt?He.filter(et=>et!==Ke.value):[...He,Ke.value];O({...ge,[Pe]:Ze}),de(et=>new Set(et).add(Pe))},className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${Pt?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[Pt&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Xa,{size:18,className:"text-cream-900"})}),Ke.image&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:Ke.image,alt:Ke.label,className:"w-full h-32 object-cover rounded-lg border border-cream-200"})}),e.jsx("div",{className:"font-bold text-sm",children:Ke.label}),yt()&&e.jsx("div",{className:"text-xs text-cream-600 mt-1",children:yt()})]},Ke.value)})}),ve.inputStyle==="TEXT_FIELD"&&e.jsx("div",{"data-attribute":Pe,children:e.jsx("input",{type:"text",value:ge[Pe]||"",onChange:Ke=>{O({...ge,[Pe]:Ke.target.value}),de(yt=>new Set(yt).add(Pe))},placeholder:`Enter ${ve.attributeName}`,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})}),ve.inputStyle==="NUMBER"&&e.jsx("div",{"data-attribute":Pe,children:e.jsx("input",{type:"number",value:ge[Pe]||"",onChange:Ke=>{O({...ge,[Pe]:parseFloat(Ke.target.value)||0}),de(yt=>new Set(yt).add(Pe))},placeholder:`Enter ${ve.attributeName}`,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})}),ve.inputStyle==="FILE_UPLOAD"&&e.jsxs("div",{"data-attribute":Pe,children:[e.jsx("input",{type:"file",onChange:Ke=>{var Pt;const yt=((Pt=Ke.target.files)==null?void 0:Pt[0])||null;O({...ge,[Pe]:yt}),yt&&de(He=>new Set(He).add(Pe))},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",accept:"*/*"}),ve.fileRequirements&&e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:ve.fileRequirements})]})]},Pe)})}):null})()]})})(),e.jsxs("div",{className:"mb-6 sm:mb-8 bg-cream-50 p-4 sm:p-6 rounded-xl border border-cream-200","data-upload-section":!0,children:[e.jsxs("h3",{className:"font-bold text-sm sm:text-base text-cream-900 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Xo,{size:16,className:"sm:w-[18px] sm:h-[18px]"})," Upload Your Design"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-cream-700 mb-2",children:"Upload Reference Image *"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ie=>sr(ie,"front"),className:"hidden","data-required-field":!0}),e.jsx("div",{className:"border-2 border-dashed border-cream-300 rounded-lg p-4 text-center hover:border-cream-900 transition-colors",children:cs?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:cs,alt:"Reference image preview",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:ie=>{ie.preventDefault(),fe(null),hs("")},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(ns,{size:14})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Wb,{size:24,className:"text-cream-600"}),e.jsx("span",{className:"text-sm text-cream-600",children:"Click to upload reference image"})]})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-cream-700 mb-2",children:"Back Design (Optional)"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ie=>sr(ie,"back"),className:"hidden"}),e.jsx("div",{className:"border-2 border-dashed border-cream-300 rounded-lg p-4 text-center hover:border-cream-900 transition-colors",children:ht?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ht,alt:"Back design preview",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:ie=>{ie.preventDefault(),kt(null),Qt("")},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(ns,{size:14})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Wb,{size:24,className:"text-cream-600"}),e.jsx("span",{className:"text-sm text-cream-600",children:"Click to upload back design"})]})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-cream-700 mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:Vs,onChange:ie=>rs(ie.target.value),placeholder:"Any special instructions or notes...",className:"w-full p-3 rounded-lg border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm resize-none",rows:3})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-100",children:[e.jsx("button",{onClick:tn,disabled:xs,className:`w-full py-4 sm:py-5 md:py-6 rounded-xl font-bold text-lg sm:text-xl md:text-2xl transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 flex items-center justify-center gap-3 min-h-[60px] sm:min-h-[70px] ${xs?"bg-cream-400 text-cream-700 cursor-not-allowed opacity-60":"bg-cream-900 text-cream-50 hover:bg-cream-800 active:bg-cream-700 cursor-pointer opacity-100"}`,children:xs?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:24}),e.jsx("span",{children:"Processing Payment..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xa,{size:24}),e.jsx("span",{children:"Place Order"})]})}),e.jsxs("div",{className:"mt-4 text-center text-xs text-cream-500 flex items-center justify-center gap-2",children:[e.jsx($l,{size:14})," Secure Payment & Data Protection"]})]})]},p._id||p.id)}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 sm:mb-8 border-b border-cream-100 pb-4 sm:pb-6",children:[e.jsx("h1",{className:"font-serif text-xl sm:text-2xl md:text-3xl font-bold text-cream-900 mb-2",children:(v==null?void 0:v.name)||"Products"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600",children:k.length>0?"Select a subcategory to view products.":"Select a product to customize and place your order."})]}),k.length>0?e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:k.map(ie=>{const $e=ie._id,Ae=ie.image||"/Glossy.png";return e.jsx(ks,{to:l&&d?`/digital-print/${l}/${d}/${$e}`:l?`/digital-print/${l}/${$e}`:`/digital-print/${$e}`,className:"block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsx("div",{className:"w-full p-4 sm:p-5 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"shrink-0 w-20 sm:w-24 h-20 sm:h-24 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:Ae,alt:ie.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:ie.name}),e.jsx(Jr,{size:18,className:"text-cream-400 group-hover:text-cream-600 group-hover:translate-x-1 transition-all shrink-0"})]}),ie.description&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm mb-2 leading-relaxed",children:e.jsx("p",{className:"line-clamp-2",children:ie.description})}),e.jsx("div",{className:"mt-auto flex items-center text-cream-500 text-xs sm:text-sm font-medium",children:e.jsx("span",{children:"View Products"})})]})]})})},ie._id)})}):e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:f.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:"No products available"})}):f.map(ie=>{const $e=ie.descriptionArray&&ie.descriptionArray.length>0?ie.descriptionArray:ie.description?ie.description.split(`
`).filter(Ve=>Ve.trim()):[],Ae=[];for(const Ve of $e){const _e=Ve.replace(/<[^>]*>/g,"").trim();if(_e&&!_e.includes(":")&&_e.length>10&&(Ae.push(_e),Ae.length>=3))break}if(Ae.length===0&&$e.length>0)for(let Ve=0;Ve<Math.min(3,$e.length);Ve++){const _e=$e[Ve].replace(/<[^>]*>/g,"").trim();_e&&Ae.push(_e)}const ye=Ae.slice(0,3).join("  ")||"",Fe=ie.basePrice||0,rt=Fe<1?(Fe*1e3).toFixed(2):Fe.toFixed(2),De=Fe<1?"per 1000 units":"";return e.jsxs("button",{"data-product-select":!0,onClick:()=>ys(ie),className:"w-full p-3 sm:p-4 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 group",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:ie.name}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:pr(rt,"INR")}),De&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:De})]})]}),ye&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm mb-2 leading-relaxed",children:e.jsx("p",{className:"line-clamp-3",children:ye})}),e.jsxs("div",{className:"mt-2 flex items-center text-cream-500 text-xs sm:text-sm font-medium",children:[e.jsx("span",{children:"View Details & Customize"}),e.jsx(Jr,{size:14,className:"ml-2 group-hover:translate-x-1 transition-transform"})]})]},ie._id||ie.id)})})]})})})]})})]}),e.jsx(ha,{children:ra&&e.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>!xs&&is(!1),children:e.jsxs(at.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:ie=>ie.stopPropagation(),className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-4 sm:p-6 max-h-[90vh] overflow-y-auto","data-payment-modal":!0,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-cream-900 flex items-center gap-2",children:[e.jsx($l,{size:20,className:"sm:w-6 sm:h-6"}),e.jsx("span",{className:"text-base sm:text-xl",children:"Payment Confirmation"})]}),!xs&&e.jsx("button",{onClick:()=>is(!1),className:"text-cream-600 hover:text-cream-900",children:e.jsx(ns,{size:24})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-cream-700 font-medium",children:"Subtotal (Excluding GST):"}),e.jsx("span",{className:"text-lg font-bold text-cream-900",children:pr(Bs,"INR")})]}),ws>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-cream-600",children:["GST (",(p==null?void 0:p.gstPercentage)||18,"%):"]}),e.jsxs("span",{className:"text-cream-700",children:["+",pr(ws,"INR")]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-cream-300",children:[e.jsx("span",{className:"text-cream-700 font-medium",children:"Total Amount (Including GST):"}),e.jsx("span",{className:"text-2xl font-bold text-cream-900",children:pr(Bs+ws,"INR")})]})]})]}),e.jsx("p",{className:"text-xs text-cream-600 mt-2",children:"Your order will be placed and you can pay later."})]}),ms&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4 flex items-start gap-2",children:[e.jsx(Ts,{size:20,className:"text-red-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:ms})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-cream-900 text-sm mb-3 flex items-center gap-2",children:[e.jsx(xo,{size:18}),"Delivery Information"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"customerName",id:"customerName",value:ot,onChange:ie=>{ze(ie.target.value),ms&&ds(null)},placeholder:"Enter your full name",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"customerEmail",id:"customerEmail",value:Ot,onChange:ie=>{_t(ie.target.value),ms&&ds(null)},placeholder:"Enter your email address",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:["Pincode ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"pincode",id:"pincode",value:Dt,onChange:ie=>{const $e=ie.target.value.replace(/\D/g,"").slice(0,6);us($e),ms&&ds(null)},placeholder:"Enter 6-digit pincode",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm",maxLength:6})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:["Complete Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{name:"address",id:"address",value:Ps,onChange:ie=>{Vt(ie.target.value),ms&&ds(null)},placeholder:"Enter your complete delivery address",rows:3,className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm resize-none"}),e.jsx("button",{type:"button",onClick:la,disabled:Ma,className:"px-3 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",title:"Get location automatically",children:Ma?e.jsx(Kt,{className:"animate-spin",size:18}):e.jsx(ti,{size:18})})]}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"You can enter address manually or use location button"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:["Mobile Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"mobileNumber",id:"mobileNumber",value:Gs,onChange:ie=>{const $e=ie.target.value.replace(/\D/g,"").slice(0,10);Ns($e),ms&&ds(null)},placeholder:"Enter 10-digit mobile number",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm",maxLength:10})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-cream-700",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Order Summary:"}),e.jsxs("div",{className:"space-y-1 ml-4",children:[e.jsxs("p",{children:[" Product: ",e.jsx("strong",{children:p==null?void 0:p.name})]}),e.jsxs("p",{children:[" Quantity: ",e.jsx("strong",{children:re.toLocaleString()})]}),e.jsxs("p",{children:[" Printing Option: ",e.jsx("strong",{children:X})]}),e.jsxs("p",{children:[" Delivery Speed: ",e.jsx("strong",{children:ne})]}),C&&e.jsxs("p",{children:[" Texture Type: ",e.jsx("strong",{children:C})]})]})]}),Ge&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsxs("h3",{className:"font-bold text-sm text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(xo,{size:16})," Estimated Delivery"]}),e.jsxs("div",{className:"text-green-700 text-sm",children:[e.jsxs("div",{className:"font-semibold mb-1",children:["Estimated Delivery by ",e.jsx("strong",{children:Ge})]}),se&&e.jsx("div",{className:"text-xs text-green-600 mt-1",children:se})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[!xs&&e.jsx("button",{onClick:()=>is(!1),className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Gl,disabled:xs,className:"flex-1 px-4 py-3 bg-cream-900 text-cream-50 rounded-lg font-semibold hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:xs?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:18}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xa,{size:18}),"Confirm Order ",pr(Bs+ws,"INR")]})})]})]})})}),e.jsx(ha,{children:zt&&e.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",onClick:()=>Ft(!1),children:e.jsxs(at.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center p-4",onClick:ie=>ie.stopPropagation(),children:[e.jsx("div",{style:{maxWidth:"90%",maxHeight:"90%",width:"auto",height:"auto",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("img",{src:(v==null?void 0:v.image)||"/Glossy.png",alt:(v==null?void 0:v.name)||"Product Preview",className:"w-full h-full object-contain",style:{maxWidth:"100%",maxHeight:"90vh",width:"auto",height:"auto"}})}),e.jsx("button",{onClick:()=>Ft(!1),className:"absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white rounded-full p-2 backdrop-blur-sm transition-colors z-50","aria-label":"Close image",children:e.jsx(ns,{size:24})})]})})}),e.jsx(ha,{children:fr&&Xs&&e.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>yr(!1),children:e.jsxs(at.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:ie=>ie.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-4 border-b border-cream-200 bg-linear-to-r from-cream-50 to-cream-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Select ",Xs.attributeName]}),Xs.isRequired&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Required field"})]}),e.jsx("button",{onClick:()=>yr(!1),className:"p-2 hover:bg-cream-200 rounded-full transition-colors","aria-label":"Close modal",children:e.jsx(ns,{size:20,className:"text-cream-700"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 justify-items-center",children:Xs.attributeValues.map(ie=>{const $e=()=>{if(ie.description){const Ve=ie.description.match(/Price Impact: ([\d.]+)/);if(Ve){const _e=parseFloat(Ve[1])||0;if(_e>0)return`+${_e.toFixed(2)}/unit`}}if(!ie.priceMultiplier||ie.priceMultiplier===1||!p)return null;const De=(p.basePrice||0)*(ie.priceMultiplier-1);return Math.abs(De)<.01?null:`+${De.toFixed(2)}/unit`},Ae=Xs.selectedValue===ie.value,ye=`${Xs.attributeId}:${ie.value}`,Fe=G[ye]||[];return e.jsxs(at.button,{type:"button",onClick:()=>{const rt={...ge,[Xs.attributeId]:ie.value};if(O(rt),de(De=>new Set(De).add(Xs.attributeId)),Fe.length>0){const De=`${Xs.attributeId}__${ie.value}`,Ve=rt[De]||null;Cs({attributeId:Xs.attributeId,parentValue:ie.value,parentLabel:ie.label,subAttributes:Fe,selectedValue:Ve}),Qs(!0)}yr(!1)},whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative p-2 rounded-lg border-2 text-left transition-all duration-200 flex flex-col w-[140px] h-[140px] overflow-hidden ${Ae?"border-cream-900 bg-cream-50 text-cream-900 ring-2 ring-cream-900 ring-offset-1":"border-cream-200 text-cream-700 hover:border-cream-400 hover:bg-cream-50 hover:shadow-md"}`,children:[Ae&&e.jsx(at.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-1.5 right-1.5 bg-cream-900 text-white rounded-full p-1 shadow-lg z-10",children:e.jsx(Xa,{size:12})}),ie.image&&e.jsx("div",{className:"mb-1.5 overflow-hidden rounded border border-cream-200 bg-cream-50 shrink-0",children:e.jsx("img",{src:ie.image,alt:ie.label,className:"w-full h-[70px] object-cover transition-transform duration-200 hover:scale-105"})}),e.jsxs("div",{className:"space-y-1 flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"font-semibold text-xs text-cream-900 leading-tight line-clamp-2",children:ie.label}),ie.description&&e.jsx("p",{className:"text-[10px] text-cream-600 line-clamp-2 leading-tight",children:ie.description}),$e()&&e.jsx("div",{className:"mt-auto pt-1 border-t border-cream-200 text-[10px] font-semibold text-cream-700 leading-tight",children:$e()})]})]},ie.value)})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-cream-200 bg-cream-50 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-cream-600",children:Xs.selectedValue?e.jsxs("span",{children:["Selected: ",e.jsx("span",{className:"font-semibold text-cream-900",children:(gn=Xs.attributeValues.find(ie=>ie.value===Xs.selectedValue))==null?void 0:gn.label})]}):e.jsx("span",{children:"Please select an option"})}),e.jsx("button",{onClick:()=>yr(!1),className:"px-6 py-2 bg-cream-900 text-white rounded-lg font-semibold hover:bg-cream-800 transition-colors",children:Xs.selectedValue?"Done":"Cancel"})]})]})})}),e.jsx(ha,{children:en&&Xt&&e.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>Qs(!1),children:e.jsxs(at.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-hidden flex flex-col",onClick:ie=>ie.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-4 border-b border-cream-200 bg-linear-to-r from-cream-50 to-cream-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-cream-900",children:["Select ",Xt.parentLabel," Option"]}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:["Additional options related to ",Xt.parentLabel]})]}),e.jsx("button",{onClick:()=>Qs(!1),className:"p-2 hover:bg-cream-200 rounded-full transition-colors","aria-label":"Close sub-attribute modal",children:e.jsx(ns,{size:18,className:"text-cream-700"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 justify-items-center",children:Xt.subAttributes.map(ie=>{const $e=()=>!ie.priceAdd||ie.priceAdd===0?null:`+${ie.priceAdd.toFixed(2)}/piece`,Ae=`${Xt.attributeId}__${Xt.parentValue}`,ye=ge[Ae]===ie.value;return e.jsxs(at.button,{type:"button",onClick:()=>{O(Fe=>({...Fe,[Ae]:ie.value})),Cs({...Xt,selectedValue:ie.value})},whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative p-2 rounded-lg border-2 text-left transition-all duration-200 flex flex-col w-[140px] h-[140px] overflow-hidden ${ye?"border-cream-900 bg-cream-50 text-cream-900 ring-2 ring-cream-900 ring-offset-1":"border-cream-200 text-cream-700 hover:border-cream-400 hover:bg-cream-50 hover:shadow-md"}`,children:[ye&&e.jsx(at.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-1.5 right-1.5 bg-cream-900 text-white rounded-full p-1 shadow-lg z-10",children:e.jsx(Xa,{size:12})}),ie.image&&e.jsx("div",{className:"mb-1.5 overflow-hidden rounded border border-cream-200 bg-cream-50 shrink-0",children:e.jsx("img",{src:ie.image,alt:ie.label,className:"w-full h-[70px] object-cover transition-transform duration-200 hover:scale-105"})}),e.jsxs("div",{className:"space-y-1 flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"font-semibold text-xs text-cream-900 leading-tight line-clamp-2",children:ie.label}),$e()&&e.jsx("div",{className:"mt-auto pt-1 border-t border-cream-200 text-[10px] font-semibold text-cream-700 leading-tight",children:$e()})]})]},ie._id)})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-cream-200 bg-cream-50 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-cream-600",children:Xt.selectedValue?e.jsxs("span",{children:["Selected:"," ",e.jsx("span",{className:"font-semibold text-cream-900",children:(bn=Xt.subAttributes.find(ie=>ie.value===Xt.selectedValue))==null?void 0:bn.label})]}):e.jsx("span",{children:"Sub-option is optional"})}),e.jsx("button",{onClick:()=>Qs(!1),className:"px-6 py-2 bg-cream-900 text-white rounded-lg font-semibold hover:bg-cream-800 transition-colors",children:"Done"})]})]})})})]})},Jf=()=>{const{categoryId:s,subCategoryId:r,nestedSubCategoryId:i}=_h(),l=nr(),[d,m]=y.useState(""),[u,f]=y.useState(""),[g,p]=y.useState(""),[j,v]=y.useState([]),[w,k]=y.useState([]),[E,T]=y.useState(null),[F,L]=y.useState(!0),[M,V]=y.useState(null),[le,G]=y.useState(!1),[z,P]=y.useState(""),[J,W]=y.useState(null),[oe,ce]=y.useState(null);y.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s,r]);const pe=async Y=>{const X=await Y.clone().text();if(X.trim().startsWith("<!DOCTYPE")||X.trim().startsWith("<html"))throw new Error(`Server returned HTML instead of JSON. Status: ${Y.status} ${Y.statusText}`);try{const Q=JSON.parse(X);if(!Y.ok)throw new Error(Q.error||Q.message||`Request failed: ${Y.status} ${Y.statusText}`);return Q}catch(Q){throw Q instanceof Error?Q:new Error(X||`Invalid response from server. Status: ${Y.status} ${Y.statusText}`)}};y.useEffect(()=>{(async()=>{var _,X,Q,ne,Ne,C,H,re,je,ge;L(!0),V(null),v([]),k([]),G(!1),ce(null);try{if(s&&!r){if(!/^[0-9a-fA-F]{24}$/.test(s)){V("Invalid category ID format"),L(!1);return}let O=[];const I=`${Te}/subcategories/category/${s}`;try{const de=await fetch(I,{method:"GET",headers:{Accept:"application/json"}});if(de.ok){const we=await pe(de);if(O=Array.isArray(we)?we:(we==null?void 0:we.data)||[],O&&O.length>0){if(O.sort((Ce,Ge)=>(Ce.sortOrder||0)-(Ge.sortOrder||0)),O.length===1){const Ce=O[0],Ge=Ce.slug||Ce._id;l(s?`/digital-print/${s}/${Ge}`:`/digital-print/${Ge}`,{replace:!0}),L(!1);return}v(O);try{const Ce=await fetch(`${Te}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(!Ce.ok)throw new Error(`Failed to fetch category: ${Ce.status} ${Ce.statusText}`);const Ge=await pe(Ce);m(Ge.name||""),f(Ge.description||""),p(Ge.image||"/Glossy.png")}catch(Ce){console.error("Error fetching category info:",Ce)}}}else if(de.status===404)console.log("No subcategories found for this category, checking for direct products...");else{const we=await fetch(`${Te}/categories/parent/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(we.ok){const Ce=await pe(we);if(Ce&&Array.isArray(Ce)&&Ce.length>0){if(O=Ce,O.sort((Ge,ue)=>(Ge.sortOrder||0)-(ue.sortOrder||0)),O.length===1){const Ge=O[0],ue=Ge.slug||Ge._id;if(r!==ue){console.log(`Only one subcategory found: ${Ge.name} (${ue}). Auto-navigating...`),l(`/digital-print/${s}/${ue}`,{replace:!0});return}}v(O),L(!1);return}}console.log("No subcategories found, will check for direct products...")}}catch(de){console.error("Error fetching subcategories:",de)}try{if(!s||!/^[0-9a-fA-F]{24}$/.test(s)){console.warn("Invalid categoryId format, skipping product fetch:",s),L(!1);return}const de=`${Te}/products/category/${s}`,we=await fetch(de,{method:"GET",headers:{Accept:"application/json"}});if(!we.ok){if(we.status===400||we.status===404){let se=we.status===404?"Category not found":"Invalid category ID or category not found";try{const Qe=await we.clone().text();if(Qe&&!Qe.trim().startsWith("<!DOCTYPE")&&!Qe.trim().startsWith("<html"))try{const tt=JSON.parse(Qe);se=tt.error||tt.message||se}catch{Qe.trim().length>0&&Qe.trim().length<200&&(se=Qe.trim())}}catch(Ie){console.error("Error reading response:",Ie)}console.warn("Failed to fetch products for category:",s,se),k([]),L(!1);return}console.error("Error fetching products:",we.status,we.statusText),k([]),L(!1);return}const Ce=await pe(we),Ge=Array.isArray(Ce)?Ce.filter(se=>{var tt;const Ie=typeof se.category=="object"?(tt=se.category)!=null&&tt._id?String(se.category._id):null:se.category?String(se.category):null,Qe=String(s);if(!Ie||Ie!==Qe)return!1;if(!se.subcategory||se.subcategory===null||se.subcategory===void 0)return!0;if(typeof se.subcategory=="string"){const ot=se.subcategory.trim();return ot===""||ot==="null"||ot==="undefined"}if(typeof se.subcategory=="object"){if(Object.keys(se.subcategory).length===0)return!0;const ze=se.subcategory._id;return!ze||ze===null||ze===""||ze==="null"||ze===void 0||typeof ze=="string"&&!/^[0-9a-fA-F]{24}$/.test(ze)}return!1}):[];console.log("Category ID:",s),console.log("Total products fetched:",Array.isArray(Ce)?Ce.length:0),console.log("Direct products after filtering:",Ge.length),Ge.length===0&&Array.isArray(Ce)&&Ce.length>0&&(console.log("Sample product category:",(_=Ce[0])==null?void 0:_.category),console.log("Sample product subcategory:",(X=Ce[0])==null?void 0:X.subcategory),console.log("Sample product category ID (string):",typeof((Q=Ce[0])==null?void 0:Q.category)=="object"?String((Ne=(ne=Ce[0])==null?void 0:ne.category)==null?void 0:Ne._id):String((C=Ce[0])==null?void 0:C.category)));const ue=O&&O.length>0;if(ue&&O.length===1){const Ie=O[0]._id;s?l(`/digital-print/${s}/${Ie}`,{replace:!0}):l(`/digital-print/${Ie}`,{replace:!0}),L(!1);return}if(ue?(O.sort((se,Ie)=>(se.sortOrder||0)-(Ie.sortOrder||0)),v(O)):v([]),Ge&&Ge.length>0&&!ue){if(Ge.length===1){const se=Ge[0];s?l(`/digital-print/${s}/${se._id}`,{replace:!0}):l(`/digital-print/${se._id}`,{replace:!0}),L(!1);return}k(Ge);try{const se=await fetch(`${Te}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(!se.ok)throw new Error(`Failed to fetch category: ${se.status} ${se.statusText}`);const Ie=await pe(se);m(Ie.name||""),f(Ie.description||""),p(Ie.image||"/Glossy.png")}catch(se){console.error("Error fetching category info:",se)}L(!1);return}}catch(de){console.error("Error fetching products:",de);const we=de instanceof Error?de.message:"Failed to fetch products";!we.includes("Invalid category")&&!we.includes("400")&&!we.includes("Bad Request")?V(we):console.warn("Category may not have products or category ID is invalid:",s),k([])}try{if(s&&/^[0-9a-fA-F]{24}$/.test(s)){const de=await fetch(`${Te}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(de.ok){const we=await pe(de);m(we.name||""),f(we.description||"")}}}catch(de){console.error("Error fetching category info:",de)}L(!1);return}if(r){k([]),v([]);try{let O=null,I=i||r;if(/^[0-9a-fA-F]{24}$/.test(I||"")){let Ie=[];if(s)try{const Qe=`${Te}/subcategories/category/${s}`,tt=await fetch(Qe,{method:"GET",headers:{Accept:"application/json"}});if(tt.ok){const ot=await pe(tt);Ie=Array.isArray(ot)?ot:(ot==null?void 0:ot.data)||[],O=Ie.find(ze=>ze._id===I||ze.slug===I)||null}}catch{}if(!O&&I&&/^[0-9a-fA-F]{24}$/.test(I)){const Qe=Ie.find(tt=>tt._id===I);if(Qe)O=Qe;else{let tt=!1;try{if((await fetch(`${Te}/products/${I}`,{method:"GET",headers:{Accept:"application/json"}})).ok){tt=!0,G(!0),ce(I),L(!1);return}}catch{console.log("subCategoryId is not a product, continuing...")}if(!tt)try{const ot=await fetch(`${Te}/subcategories/${I}`,{method:"GET",headers:{Accept:"application/json"}});if(ot.ok)try{O=await pe(ot)}catch{}else ot.status}catch{}}}}else{let Ie=[];if(s)try{const Qe=`${Te}/subcategories/category/${s}`,tt=await fetch(Qe,{method:"GET",headers:{Accept:"application/json"}});if(tt.ok){const ot=await pe(tt);Ie=Array.isArray(ot)?ot:(ot==null?void 0:ot.data)||[];const ze=async Ot=>{try{const _t=await fetch(`${Te}/subcategories/parent/${Ot}`,{method:"GET",headers:{Accept:"application/json"}});if(_t.ok){const Dt=await pe(_t),us=Array.isArray(Dt)?Dt:(Dt==null?void 0:Dt.data)||[],Ps=[...us];for(const Vt of us){const Gs=await ze(Vt._id);Ps.push(...Gs)}return Ps}}catch(_t){console.error(`Error fetching nested subcategories for ${Ot}:`,_t)}return[]};for(const Ot of Ie){const _t=await ze(Ot._id);Ie.push(..._t)}}}catch(Qe){console.error("Error fetching subcategories:",Qe)}if(Ie.length===0)try{const Qe=await fetch(`${Te}/subcategories`,{method:"GET",headers:{Accept:"application/json"}});if(Qe.ok){const tt=await pe(Qe);Ie=Array.isArray(tt)?tt:(tt==null?void 0:tt.data)||[]}}catch(Qe){console.error("Error fetching all subcategories:",Qe)}if(O=Ie.find(Qe=>Qe.slug===I||Qe._id===I),O&&O._id)I=O._id,console.log("Found subcategory by slug, using _id:",I);else try{const Qe=await fetch(`${Te}/subcategories/${I}`,{method:"GET",headers:{Accept:"application/json"}});Qe.ok?(O=await pe(Qe),O&&O._id?(I=O._id,console.log("Found subcategory via API lookup, using _id:",I)):(O=null,I=null)):(console.warn(`Subcategory not found with slug/id: ${I}, continuing without subcategory`),O=null,I=null)}catch{console.warn(`Error fetching subcategory with slug/id: ${I}, continuing without subcategory`),O=null,I=null}}if(O){const Ie=((H=O.name)==null?void 0:H.toLowerCase())||"",Qe=((re=O.slug)==null?void 0:re.toLowerCase())||"";if(Ie.includes("gloss")||Qe.includes("gloss")||I!=null&&I.toLowerCase().includes("gloss")){G(!0),T(O),L(!1);return}T(O);try{const tt=await fetch(`${Te}/subcategories/parent/${O._id}`,{method:"GET",headers:{Accept:"application/json"}});if(tt.ok){const ot=await pe(tt),ze=Array.isArray(ot)?ot:(ot==null?void 0:ot.data)||[];if(ze.length>0){if(ze.length===1){const Ot=ze[0],_t=Ot.slug||Ot._id;if(i!==_t&&r!==_t){console.log(`Only one nested subcategory found: ${Ot.name} (${_t}). Auto-navigating...`);const Dt=s&&r?`/digital-print/${s}/${r}/${_t}`:`/digital-print/${s}/${_t}`;l(Dt,{replace:!0});return}}v(ze),console.log(`Found ${ze.length} nested subcategories`)}}}catch(tt){console.error("Error fetching child subcategories:",tt)}}const we=Te.replace(/\/+$/,"");let Ce,Ge;if(!O||O===null)if(s&&/^[0-9a-fA-F]{24}$/.test(s))Ce=`${we}/products/category/${s}`,Ge=await fetch(Ce,{method:"GET",headers:{Accept:"application/json"}});else throw new Error("Valid Category ID is required to fetch products when subcategory is null");else if(I&&/^[0-9a-fA-F]{24}$/.test(I))Ce=`${we}/products/subcategory/${I}`,Ge=await fetch(Ce,{method:"GET",headers:{Accept:"application/json"}});else if(s&&/^[0-9a-fA-F]{24}$/.test(s))Ce=`${we}/products/category/${s}`,Ge=await fetch(Ce,{method:"GET",headers:{Accept:"application/json"}});else throw new Error("Valid Subcategory ID or Category ID is required to fetch products");if(!Ge.ok&&Ge.status===400){const Ie=await Ge.text();let Qe="Invalid subcategory or category ID";try{const tt=JSON.parse(Ie);Qe=tt.error||tt.message||Qe}catch{}throw new Error(Qe)}let ue;if(Ge.ok)ue=await pe(Ge);else if(Ge.status===404)ue=[];else try{const Ie=await pe(Ge);throw new Error(Ie.error||Ie.message||`Failed to fetch products: ${Ge.status} ${Ge.statusText}`)}catch(Ie){throw Ie instanceof Error&&Ie.message.includes("body stream")?new Error(`Failed to fetch products: ${Ge.status} ${Ge.statusText}`):Ie}console.log("=== PRODUCTS FETCHED (VisitingCards) ==="),console.log("Total products:",Array.isArray(ue)?ue.length:0),console.log("Full products data:",JSON.stringify(ue,null,2)),Array.isArray(ue)||(ue=[]);let se=[];if(O&&I)try{se=await(async Qe=>{try{const tt=await fetch(`${Te}/subcategories/parent/${Qe}?includeChildren=true`,{method:"GET",headers:{Accept:"application/json"}});if(tt.ok){const ot=await pe(tt),ze=Array.isArray(ot)?ot:(ot==null?void 0:ot.data)||[];ze.sort((_t,Dt)=>(_t.sortOrder||0)-(Dt.sortOrder||0));const Ot=_t=>{let Dt=[];return _t.forEach(us=>{Dt.push(us),us.children&&us.children.length>0&&(Dt=Dt.concat(Ot(us.children)))}),Dt};return Ot(ze)}}catch(tt){console.error(`Error fetching nested subcategories for ${Qe}:`,tt)}return[]})(I)}catch(Ie){console.error("Error fetching nested subcategories:",Ie)}if(O){if(T(O),m(((je=O.category)==null?void 0:je.name)||O.name||""),f(((ge=O.category)==null?void 0:ge.description)||O.description||""),se.length>0){if(se.length===1){const Qe=se[0]._id;s?l(`/digital-print/${s}/${I}/${Qe}`,{replace:!0}):l(`/digital-print/${I}/${Qe}`,{replace:!0}),L(!1);return}v(se),k([]),L(!1);return}}else if(s&&/^[0-9a-fA-F]{24}$/.test(s))try{const Ie=await fetch(`${Te}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(Ie.ok){const Qe=await pe(Ie);m(Qe.name||""),f(Qe.description||""),p(Qe.image||"/Glossy.png"),Array.isArray(ue)&&ue.length>0&&T({_id:r||s,name:Qe.name||"Products",description:Qe.description||"",image:Qe.image||"/Glossy.png",category:Qe,slug:r||s})}}catch(Ie){console.error("Error fetching category info:",Ie),Array.isArray(ue)&&ue.length>0&&T({_id:r||s||"",name:"Products",description:"",image:"/Glossy.png",slug:r||s||""})}if(Array.isArray(ue)&&ue.length===1){const Ie=ue[0],Qe=typeof Ie.subcategory=="object"?Ie.subcategory:null,tt=(Qe==null?void 0:Qe._id)||(O?O._id:null),ot=tt&&tt!==s&&tt!==Ie._id&&O!==null;s&&ot?l(`/digital-print/${s}/${tt}/${Ie._id}`,{replace:!0}):s?l(`/digital-print/${s}/${Ie._id}`,{replace:!0}):l(`/digital-print/${Ie._id}`,{replace:!0}),L(!1);return}console.log("Final products data to set:",ue),console.log("Products array length:",Array.isArray(ue)?ue.length:0),k(Array.isArray(ue)?ue:[]),Array.isArray(ue)&&ue.length>0&&!O&&s&&console.log("Products found but subcategory data missing - will display products anyway"),L(!1);return}catch(O){console.error("Error fetching products:",O),V(O instanceof Error?O.message:"Failed to fetch products"),L(!1);return}}else{let O=`${Te}/subcategories`;s&&(O=`${Te}/subcategories/category/${s}`);const I=await fetch(O,{method:"GET",headers:{Accept:"application/json"}});if(!I.ok)throw new Error(`Failed to fetch subcategories: ${I.status} ${I.statusText}`);const de=await pe(I),we=Array.isArray(de)?de:(de==null?void 0:de.data)||[];if(we.length>0){if(we.sort((Ce,Ge)=>(Ce.sortOrder||0)-(Ge.sortOrder||0)),v(we),k([]),we[0].category){const Ce=typeof we[0].category=="object"?we[0].category:null;Ce&&(m(Ce.name||""),f(Ce.description||""),p(Ce.image||"/Glossy.png"))}}else if(v([]),s&&/^[0-9a-fA-F]{24}$/.test(s))try{const Ce=`${Te}/products/category/${s}`,Ge=await fetch(Ce,{method:"GET",headers:{Accept:"application/json"}});if(Ge.ok){const ue=await pe(Ge),se=Array.isArray(ue)?ue:[];if(se.length>0){k(se);try{const Ie=await fetch(`${Te}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(Ie.ok){const Qe=await pe(Ie);m(Qe.name||""),f(Qe.description||""),p(Qe.image||"/Glossy.png")}}catch(Ie){console.error("Error fetching category info:",Ie)}}else k([])}else k([])}catch(Ce){console.error("Error fetching products for category:",Ce),k([])}else k([])}}catch(O){console.error("Error fetching data:",O),V(O instanceof Error?O.message:"Failed to load data")}finally{L(!1)}})()},[s,r,i]);const qe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},R={hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,ease:"easeOut"}}};return le&&s?e.jsx(yd,{forcedProductId:oe||void 0}):e.jsxs("div",{className:"min-h-screen bg-cream-50 py-4 sm:py-8",children:[!r&&e.jsx("div",{className:"bg-white border-b border-cream-200 pb-6 sm:pb-10 pt-6 sm:pt-8 mb-6 sm:mb-8 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"flex flex-col gap-2 text-center md:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-xs sm:text-sm font-medium text-cream-500 uppercase tracking-widest",children:[e.jsx(ks,{to:"/digital-print",className:"hover:text-cream-900 transition-colors",children:"Services"}),e.jsx(Jr,{size:12,className:"sm:w-3.5 sm:h-3.5"}),e.jsx("span",{className:"text-cream-900",children:d})]}),e.jsx("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-cream-900",children:d}),u&&e.jsx("p",{className:"text-sm sm:text-base text-cream-600 mt-2 max-w-xl mx-auto md:mx-0",children:"Choose the perfect paper type and finish for your brand identity."})]})})}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 pb-12 sm:pb-16",children:[F?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(Kt,{className:"animate-spin text-cream-900",size:48})}):M?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-800",children:M})}):j.length>0&&!r||w.length>0&&j.length===0&&!r?e.jsxs(e.Fragment,{children:[j.length>0&&e.jsx("div",{className:"mb-6 bg-white rounded-xl shadow-md border border-cream-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-4",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial sm:w-64",children:[e.jsx(fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search subcategories...",value:z,onChange:Y=>P(Y.target.value),className:"w-full pl-10 pr-10 py-2.5 border-2 border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 text-sm sm:text-base bg-white shadow-sm transition-all"}),z&&e.jsx("button",{onClick:()=>P(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cream-500 hover:text-cream-700 transition-colors",children:e.jsx(ns,{size:18})})]}),e.jsxs("div",{className:"flex-1 sm:flex-initial sm:w-64",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Filter Subcategory"}),e.jsx(Ea,{label:"All Subcategories",value:J,onChange:Y=>W(Y),options:[{value:null,label:"All Subcategories"},...j.filter(Y=>!(z&&!Y.name.toLowerCase().includes(z.toLowerCase()))).map(Y=>({value:Y._id,label:Y.name}))],className:"w-full"})]}),(z||J)&&e.jsxs("button",{onClick:()=>{P(""),W(null)},className:"flex items-center gap-2 px-4 py-2.5 text-sm text-cream-700 hover:text-cream-900 bg-cream-100 hover:bg-cream-200 rounded-lg transition-colors whitespace-nowrap",children:[e.jsx(ns,{size:16}),"Clear Filters"]})]})}),e.jsx(at.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-5",variants:qe,initial:"hidden",animate:"visible",children:j.filter(Y=>!(z&&!Y.name.toLowerCase().includes(z.toLowerCase())||J&&Y._id!==J)).map((Y,_)=>{const X=Y._id,Q=Y.image||"/Glossy.png";return e.jsx(at.div,{variants:R,children:e.jsx(ks,{to:s?`/digital-print/${s}/${X}`:`/digital-print/${X}`,className:"group block h-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 border border-cream-100 h-full flex flex-col hover:-translate-y-2",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-cream-100 flex items-center justify-center rounded-2xl sm:rounded-3xl m-3 sm:m-4 mx-2 sm:mx-3",children:[e.jsx("img",{src:Q,alt:Y.name,className:"object-contain h-full w-full transition-transform duration-700 group-hover:scale-110 rounded-2xl sm:rounded-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-cream-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 backdrop-blur-[2px]",children:e.jsx("span",{className:"bg-white text-cream-900 px-6 py-3 rounded-full font-bold text-sm transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 shadow-lg",children:"Customize Now"})})]}),e.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-serif text-lg sm:text-xl md:text-2xl font-bold text-cream-900 mb-2 group-hover:text-cream-600 transition-colors",children:Y.name}),e.jsx("p",{className:"text-cream-600 text-sm sm:text-base mb-4 flex-grow leading-relaxed",children:Y.description||""}),e.jsxs("div",{className:"pt-3 border-t border-cream-100 flex items-center justify-between mt-auto",children:[e.jsx("span",{className:"text-xs sm:text-sm text-cream-500",children:"View Details"}),e.jsx(Jr,{size:18,className:"text-cream-900 group-hover:text-cream-600 group-hover:translate-x-1 transition-all duration-300"})]})]})]})})},Y._id)})}),w.length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Direct Products"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(at.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[400px] sm:min-h-[500px] md:min-h-[600px] bg-cream-100/50",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:g||"/Glossy.png",alt:d||"Category Preview",className:"w-full h-full object-contain cursor-pointer hover:opacity-90 transition-opacity rounded-lg",style:{maxWidth:"100%",maxHeight:"100%"}})})})})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx(at.div,{className:"space-y-3 sm:space-y-4 w-full",variants:qe,initial:"hidden",animate:"visible",children:w.map(Y=>{const _=typeof Y.subcategory=="object"?Y.subcategory:null,X=_==null?void 0:_._id,Q=i&&r,ne=Q?i:null,Ne=Q?r:null,C=X&&X!==s&&X!==Y._id,H=Q&&X&&(X===i||X===ne),re=Y.basePrice||0,je=re<1?(re*1e3).toFixed(2):re.toFixed(2),ge=re<1?"per 1000 units":"",de=(Y.description?Y.description.replace(/<[^>]*>/g,"").trim():"").split(`
`).filter(Ce=>Ce.trim()).slice(0,3).join(" ").trim(),we=de.length>200?de.substring(0,200)+"...":de||"";return e.jsx(at.div,{variants:R,children:e.jsx(ks,{to:s&&H&&Ne&&ne?`/digital-print/${s}/${Ne}/${ne}/${Y._id}`:s&&C?`/digital-print/${s}/${X}/${Y._id}`:s?`/digital-print/${s}/${Y._id}`:`/digital-print/${Y._id}`,className:"group block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"w-full p-4 sm:p-6 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 min-h-[140px] sm:min-h-[160px] flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32 h-24 sm:h-32 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:Y.image||"/Glossy.png",alt:Y.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:Y.name}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:pr(parseFloat(je)||0,"INR")}),ge&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:ge})]}),e.jsx("span",{className:"text-cream-900 group-hover:text-cream-600 text-xl font-bold transition-colors",children:""})]})]}),we&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm leading-relaxed flex-grow",children:e.jsx("p",{className:"line-clamp-2",children:we})})]})]})})},Y._id)})})})]})]})]}):r?e.jsxs("div",{children:[r&&e.jsx("div",{className:"mb-4",children:e.jsx(Or,{onClick:()=>{l(i&&r&&s?`/digital-print/${s}/${r}`:s?`/digital-print/${s}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:i&&r&&s?`/digital-print/${s}/${r}`:s?`/digital-print/${s}`:"/digital-print",label:i?"Back to Subcategory":d?`Back to ${d}`:"Back to Category",className:"inline-flex items-center gap-2 text-sm text-cream-600 hover:text-cream-900"})}),j.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Nested Subcategories"}),e.jsx(at.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-5 mb-12",variants:qe,initial:"hidden",animate:"visible",children:j.map(Y=>{const _=Y._id,X=Y.image||"/Glossy.png",Q=E?E._id:r;return e.jsx(at.div,{variants:R,children:e.jsx(ks,{to:s&&Q?`/digital-print/${s}/${Q}/${_}`:s?`/digital-print/${s}/${_}`:`/digital-print/${_}`,className:"group block h-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 border border-cream-100 h-full flex flex-col hover:-translate-y-2",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-cream-100 flex items-center justify-center rounded-2xl sm:rounded-3xl m-3 sm:m-4 mx-2 sm:mx-3",children:[e.jsx("img",{src:X,alt:Y.name,className:"object-contain h-full w-full transition-transform duration-700 group-hover:scale-110 rounded-2xl sm:rounded-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-cream-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 backdrop-blur-[2px]",children:e.jsx("span",{className:"bg-white text-cream-900 px-6 py-3 rounded-full font-bold text-sm transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 shadow-lg",children:"Customize Now"})})]}),e.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-serif text-lg sm:text-xl md:text-2xl font-bold text-cream-900 mb-2 group-hover:text-cream-600 transition-colors",children:Y.name}),e.jsx("p",{className:"text-cream-600 text-sm sm:text-base mb-4 flex-grow leading-relaxed",children:Y.description||""}),e.jsxs("div",{className:"pt-3 border-t border-cream-100 flex items-center justify-between mt-auto",children:[e.jsx("span",{className:"text-xs sm:text-sm text-cream-500",children:"View Details"}),e.jsx(Jr,{size:18,className:"text-cream-900 group-hover:text-cream-600 group-hover:translate-x-1 transition-all duration-300"})]})]})]})})},Y._id)})})]}),w.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Select Product"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(at.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[400px] sm:min-h-[500px] md:min-h-[600px] bg-cream-100/50",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:g||(E==null?void 0:E.image)||"/Glossy.png",alt:d||(E==null?void 0:E.name)||"Category Preview",className:"w-full h-full object-contain cursor-pointer hover:opacity-90 transition-opacity rounded-lg",style:{maxWidth:"100%",maxHeight:"100%"}})})})})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx(at.div,{className:"space-y-3 sm:space-y-4 w-full",variants:qe,initial:"hidden",animate:"visible",children:w.map(Y=>{const _=typeof Y.subcategory=="object"?Y.subcategory:null,X=(_==null?void 0:_.slug)||(_==null?void 0:_._id),Q=X&&X!==s&&X!==Y._id,ne=Y.basePrice||0,Ne=ne<1?(ne*1e3).toFixed(2):ne.toFixed(2),C=ne<1?"per 1000 units":"",je=(Y.description?Y.description.replace(/<[^>]*>/g,"").trim():"").split(`
`).filter(O=>O.trim()).slice(0,3).join(" ").trim(),ge=je.length>200?je.substring(0,200)+"...":je||"";return e.jsx(at.div,{variants:R,children:e.jsx(ks,{to:s&&Q?`/digital-print/${s}/${X}/${Y._id}`:s?`/digital-print/${s}/${Y._id}`:`/digital-print/${Y._id}`,className:"group block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"w-full p-4 sm:p-6 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 min-h-[140px] sm:min-h-[160px] flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32 h-24 sm:h-32 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:Y.image||"/Glossy.png",alt:Y.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:Y.name}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:pr(parseFloat(Ne)||0,"INR")}),C&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:C})]}),e.jsx("span",{className:"text-cream-900 group-hover:text-cream-600 text-xl font-bold transition-colors",children:""})]})]}),ge&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm leading-relaxed flex-grow",children:e.jsx("p",{className:"line-clamp-2",children:ge})})]})]})})},Y._id)})})})]})]}):j.length===0?e.jsxs("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-cream-700",children:"No products found for this subcategory."}),s&&e.jsx(Or,{onClick:()=>{l(s?`/digital-print/${s}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:s?`/digital-print/${s}`:"/digital-print",label:d?`Back to ${d}`:"Back to Category",className:"text-cream-900 hover:text-cream-600 underline mt-2 inline-block"})]}):null]}):s&&w.length>0?e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Select Product"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(at.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[400px] sm:min-h-[500px] md:min-h-[600px] bg-cream-100/50",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:g||"/Glossy.png",alt:d||"Category Preview",className:"w-full h-full object-contain cursor-pointer hover:opacity-90 transition-opacity rounded-lg",style:{maxWidth:"100%",maxHeight:"100%"}})})})})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx(at.div,{className:"space-y-3 sm:space-y-4 w-full",variants:qe,initial:"hidden",animate:"visible",children:w.map(Y=>{const _=typeof Y.subcategory=="object"?Y.subcategory:null,X=(_==null?void 0:_.slug)||(_==null?void 0:_._id),Q=X&&X!==s&&X!==Y._id,ne=Y.basePrice||0,Ne=ne<1?(ne*1e3).toFixed(2):ne.toFixed(2),C=ne<1?"per 1000 units":"",je=(Y.description?Y.description.replace(/<[^>]*>/g,"").trim():"").split(`
`).filter(O=>O.trim()).slice(0,3).join(" ").trim(),ge=je.length>200?je.substring(0,200)+"...":je||"";return e.jsx(at.div,{variants:R,children:e.jsx(ks,{to:s&&Q?`/digital-print/${s}/${X}/${Y._id}`:s?`/digital-print/${s}/${Y._id}`:`/digital-print/${Y._id}`,className:"group block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"w-full p-4 sm:p-6 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 min-h-[140px] sm:min-h-[160px] flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32 h-24 sm:h-32 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:Y.image||"/Glossy.png",alt:Y.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:Y.name}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:pr(parseFloat(Ne)||0,"INR")}),C&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:C})]}),e.jsx("span",{className:"text-cream-900 group-hover:text-cream-600 text-xl font-bold transition-colors",children:""})]})]}),ge&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm leading-relaxed flex-grow",children:e.jsx("p",{className:"line-clamp-2",children:ge})})]})]})})},Y._id)})})})]})]}):s&&j.length===0&&w.length===0?e.jsxs("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-cream-700",children:r?"No products found for this subcategory.":"No products found for this category."}),s&&r&&e.jsx(Or,{onClick:()=>{l(s?`/digital-print/${s}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:s?`/digital-print/${s}`:"/digital-print",label:d?`Back to ${d}`:"Back to Category",className:"text-cream-900 hover:text-cream-600 underline mt-2 inline-block"})]}):j.length===0&&!s?e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-cream-700",children:"No categories found."})}):null,!r&&d&&e.jsx(at.div,{className:"mt-12 sm:mt-20 bg-white p-8 sm:p-10 rounded-3xl border border-cream-200 shadow-sm",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:e.jsx("div",{className:"flex flex-col md:flex-row gap-10 items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-serif text-2xl font-bold text-cream-900 mb-4",children:["Why Choose Our ",d,"?"]}),u&&e.jsx("p",{className:"text-cream-700 leading-relaxed mb-6",children:u}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-cream-50 rounded-xl border border-cream-100",children:[e.jsx("div",{className:"font-bold text-2xl text-cream-900 mb-1",children:"24h"}),e.jsx("div",{className:"text-xs text-cream-500 uppercase tracking-wider",children:"Production"})]}),e.jsxs("div",{className:"text-center p-4 bg-cream-50 rounded-xl border border-cream-100",children:[e.jsx("div",{className:"font-bold text-2xl text-cream-900 mb-1",children:"300+"}),e.jsx("div",{className:"text-xs text-cream-500 uppercase tracking-wider",children:"GSM Paper"})]}),e.jsxs("div",{className:"text-center p-4 bg-cream-50 rounded-xl border border-cream-100",children:[e.jsx("div",{className:"font-bold text-2xl text-cream-900 mb-1",children:"100%"}),e.jsx("div",{className:"text-xs text-cream-500 uppercase tracking-wider",children:"Satisfaction"})]})]})]})})})]})]})},ZE=({width:s="100%",height:r="100%",safeArea:i={top:10,bottom:10,left:10,right:10},bleedArea:l={top:15,bottom:15,left:15,right:15}})=>{const[d,m]=y.useState(!0);return e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[e.jsx("div",{className:"absolute -top-8 right-0 pointer-events-auto",children:e.jsxs("button",{onClick:()=>m(!d),className:"bg-cream-700 text-white px-3 py-1 rounded-lg text-xs flex items-center gap-1 hover:bg-cream-800 transition-colors",children:[d?e.jsx(v4,{size:12}):e.jsx(kr,{size:12}),d?"Hide Guides":"Show Guides"]})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute border border-red-400 opacity-50",style:{top:`${l.top}%`,bottom:`${l.bottom}%`,left:`${l.left}%`,right:`${l.right}%`},children:e.jsx("div",{className:"absolute -top-3 left-2 bg-red-500 text-white text-[10px] px-1 rounded",children:"Bleed Area"})}),e.jsx("div",{className:"absolute border border-blue-400 opacity-50",style:{top:"5%",bottom:"5%",left:"5%",right:"5%"},children:e.jsx("div",{className:"absolute border-2 border-dashed border-green-500 opacity-70",style:{top:`${i.top}%`,bottom:`${i.bottom}%`,left:`${i.left}%`,right:`${i.right}%`},children:e.jsx("div",{className:"absolute -top-3 left-2 text-green-600 bg-white/80 text-[10px] px-1 rounded font-bold",children:"Safe Area"})})})]})]})},JE=()=>{const s=nr(),[r,i]=y.useState("select"),[l,d]=y.useState(null),[m,u]=y.useState(""),[f,g]=y.useState(!1),[p,j]=y.useState(null),[v,w]=y.useState(null),[k,E]=y.useState("front"),[T,F]=y.useState(!1),[L,M]=y.useState(!1),[V,le]=y.useState(0),[G,z]=y.useState(null),[P,J]=y.useState({height:2,width:3.5,safeTop:10,safeBottom:10,safeLeft:10,safeRight:10,bleedTop:15,bleedBottom:15,bleedLeft:15,bleedRight:15,description:""}),[W,oe]=y.useState(!1);y.useEffect(()=>{(()=>{try{const Ne=localStorage.getItem("user");if(console.log(" Checking localStorage for user data:",{hasUserData:!!Ne}),Ne){const C=JSON.parse(Ne);console.log(" Found user data in localStorage:",C);let H=null,re=null;if(C&&C._id&&typeof C._id=="string"?(H=C._id,re=C.name||C.email||C.username||"User"):C&&C.user&&C.user._id&&typeof C.user._id=="string"?(H=C.user._id,re=C.user.name||C.user.email||C.user.username||"User"):C&&C.id&&typeof C.id=="string"?(H=C.id,re=C.name||C.email||C.username||"User"):C&&C.user&&C.user.id&&typeof C.user.id=="string"&&(H=C.user.id,re=C.user.name||C.user.email||C.user.username||"User"),H){d(H),u(re||"Your Account"),g(!0),console.log(" User is logged in with ID:",H);return}}console.warn(" No valid user ID found - user not logged in"),d(null),g(!1),u("")}catch(Ne){console.error(" Error reading localStorage:",Ne),d(null),g(!1),u("")}})()},[]);const ce=()=>{s("/login")},pe=ne=>new Promise(Ne=>{const C=[];if(["image/jpeg","image/png","image/jpg","application/pdf"].includes(ne.type)||C.push("Invalid file format. Use JPG, PNG, or PDF."),ne.size>10*1024*1024&&C.push("File size exceeds 10MB limit."),ne.type.startsWith("image/")){const re=new Image,je=URL.createObjectURL(ne);re.onload=()=>{const ge=re.width/P.width;ge<300&&C.push(`Low resolution (${Math.round(ge)} DPI). Minimum 300 DPI recommended.`),(re.width<1e3||re.height<600)&&C.push("Low resolution image. Minimum 1000x600px required."),Ne({file:ne,preview:je,isValid:C.length===0,errors:C})},re.onerror=()=>{C.push("Failed to load image data."),Ne({file:ne,preview:"",isValid:!1,errors:C})},re.src=je}else Ne({file:ne,preview:"",isValid:C.length===0,errors:C})}),qe=async(ne,Ne)=>{var C;if(ne.preventDefault(),F(!1),(C=ne.dataTransfer.files)!=null&&C[0]){const H=await pe(ne.dataTransfer.files[0]);Ne==="front"?j(H):w(H),E(Ne)}},R=async(ne,Ne)=>{var C;if((C=ne.target.files)!=null&&C[0]){const H=await pe(ne.target.files[0]);Ne==="front"?j(H):w(H),E(Ne)}},Y=async()=>{if(console.log(" Upload button clicked"),!f||!l){ce();return}if(!(!p||!p.isValid)){M(!0),le(0);try{const ne=new FormData;ne.append("userId",l),ne.append("height",P.height.toString()),ne.append("width",P.width.toString()),ne.append("description",P.description),ne.append("safeTop",P.safeTop.toString()),ne.append("safeBottom",P.safeBottom.toString()),ne.append("safeLeft",P.safeLeft.toString()),ne.append("safeRight",P.safeRight.toString()),ne.append("bleedTop",P.bleedTop.toString()),ne.append("bleedBottom",P.bleedBottom.toString()),ne.append("bleedLeft",P.bleedLeft.toString()),ne.append("bleedRight",P.bleedRight.toString()),ne.append("frontImage",p.file),v&&v.isValid&&ne.append("backImage",v.file);const Ne=localStorage.getItem("token"),C=new XMLHttpRequest;C.upload.onprogress=H=>{if(H.lengthComputable){const re=H.loaded/H.total*100;le(re)}},C.onload=()=>{if(C.status===201){const H=JSON.parse(C.responseText);z(H),M(!1),console.log(" Upload successful!")}else console.error(" Upload failed with status:",C.status,C.responseText),M(!1)},C.onerror=()=>{console.error(" Upload XHR error"),M(!1)},C.open("POST",`${Te}/upload`),Ne&&C.setRequestHeader("Authorization",`Bearer ${Ne}`),console.log(" Sending upload request with userId:",l),C.send(ne)}catch(ne){console.error(" Upload error:",ne),M(!1)}}},_=()=>e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"font-serif text-4xl font-bold text-cream-900 mb-4",children:"Upload Your Design"}),e.jsx("p",{className:"text-cream-600 text-lg",children:"Get professional printing with our automated file preparation"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8 px-4",children:e.jsxs(at.div,{whileHover:{y:-5},className:"bg-white p-6 sm:p-8 rounded-2xl sm:rounded-3xl border border-cream-200 shadow-lg cursor-pointer hover:shadow-xl transition-all group md:col-span-2 max-w-2xl mx-auto",onClick:()=>{if(!f){ce();return}i("upload")},children:[e.jsx("div",{className:"w-16 h-16 bg-cream-100 rounded-2xl flex items-center justify-center mb-6 text-cream-900 group-hover:bg-cream-900 group-hover:text-white transition-colors mx-auto",children:e.jsx(Xo,{size:32})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-3 text-center",children:"Upload Print-Ready Files"}),e.jsx("p",{className:"text-cream-600 mb-6 text-center",children:"Upload your designs with automatic CMYK conversion, bleed area setup, and professional pre-press checks."}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"text-cream-900 font-bold flex items-center group-hover:gap-2 transition-all mx-auto",children:[f?"Start Upload":"Login to Upload"," ",e.jsx(Xo,{size:16,className:"ml-2"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 mt-8 sm:mt-12 px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center p-6 bg-white rounded-xl border border-cream-100",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-green-600",children:e.jsx(ya,{size:24})}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Auto CMYK Conversion"}),e.jsx("p",{className:"text-cream-600 text-sm",children:"Automatic conversion to print-ready CMYK color space"})]}),e.jsxs("div",{className:"text-center p-6 bg-white rounded-xl border border-cream-100",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-blue-600",children:e.jsx(Jb,{size:24})}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Bleed Area Setup"}),e.jsx("p",{className:"text-cream-600 text-sm",children:"Professional bleed and safe area configuration"})]}),e.jsxs("div",{className:"text-center p-6 bg-white rounded-xl border border-cream-100",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-purple-600",children:e.jsx(_m,{size:24})}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Quality Check"}),e.jsx("p",{className:"text-cream-600 text-sm",children:"Automatic resolution and format validation"})]})]})]}),X=()=>e.jsx("div",{className:"max-w-2xl mx-auto text-center",children:e.jsxs("div",{className:"bg-white rounded-3xl p-12 border border-cream-100 shadow-lg",children:[e.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Mf,{size:40,className:"text-yellow-600"})}),e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900 mb-4",children:"Login Required"}),e.jsx("p",{className:"text-cream-600 text-lg mb-6",children:"Please log in to upload your designs and access all features."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:ce,className:"w-full bg-cream-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-cream-800 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 flex items-center justify-center gap-3",children:[e.jsx(Mf,{size:20}),"Go to Login"]}),e.jsxs("button",{onClick:()=>i("select"),className:"w-full bg-cream-100 text-cream-700 py-3 rounded-xl font-bold hover:bg-cream-200 transition-all flex items-center justify-center gap-2",children:[e.jsx(Td,{size:18}),"Back to Options"]})]})]})}),Q=()=>{var ne,Ne;return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("button",{onClick:()=>{i("select"),z(null)},className:"flex items-center text-cream-600 hover:text-cream-900 mb-6 transition-colors",children:[e.jsx(Td,{size:20,className:"mr-2"})," Back to Options"]}),G?e.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl p-8 text-center border border-cream-100 shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ya,{size:32,className:"text-green-600"})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-4",children:"Upload Successful!"}),e.jsxs("p",{className:"text-cream-600 mb-6",children:["Your design has been processed and is ready for printing.",G.design.hasBackImage?" Both front and back images were uploaded.":" Only front image was uploaded."]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-6 text-left",children:[e.jsxs("div",{className:"bg-cream-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-cream-900 mb-2",children:"Design Details"}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Size: ",G.design.width,'" '," ",G.design.height,'"']}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Files: ",G.design.hasBackImage?"2":"1"]})]}),e.jsxs("div",{className:"bg-cream-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-cream-900 mb-2",children:"Processing"}),e.jsx("p",{className:"text-sm text-cream-600",children:" CMYK Conversion"}),e.jsx("p",{className:"text-sm text-cream-600",children:" Bleed Setup"})]})]}),e.jsx("button",{onClick:()=>z(null),className:"bg-cream-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-cream-800 transition-colors",children:"Upload Another Design"})]}):e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"lg:w-2/5 space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl sm:rounded-2xl border border-cream-100 shadow-sm",children:[e.jsxs("h3",{className:"font-serif text-lg sm:text-xl font-bold text-cream-900 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Jb,{size:18,className:"sm:w-5 sm:h-5"}),"Design Specifications"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Width (inches)"}),e.jsx("input",{type:"number",step:"0.1",value:P.width,onChange:C=>J(H=>({...H,width:parseFloat(C.target.value)})),className:"w-full p-3 rounded-xl border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Height (inches)"}),e.jsx("input",{type:"number",step:"0.1",value:P.height,onChange:C=>J(H=>({...H,height:parseFloat(C.target.value)})),className:"w-full p-3 rounded-xl border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Description"}),e.jsx("textarea",{value:P.description,onChange:C=>J(H=>({...H,description:C.target.value})),placeholder:"Add notes about your design...",className:"w-full p-3 rounded-xl border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none resize-none",rows:3})]}),e.jsxs("button",{onClick:()=>oe(!W),className:"flex items-center gap-2 text-cream-700 hover:text-cream-900 transition-colors text-sm font-medium",children:[e.jsx(Er,{size:16}),W?"Hide":"Show"," Advanced Settings"]})]}),W&&e.jsxs(at.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-white p-6 rounded-2xl border border-cream-100 shadow-sm",children:[e.jsx("h4",{className:"font-bold text-cream-900 mb-4",children:"Print Safety Margins (%)"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 text-sm",children:["safeTop","safeBottom","safeLeft","safeRight","bleedTop","bleedBottom","bleedLeft","bleedRight"].map(C=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-cream-600 mb-1 capitalize",children:C.replace(/([A-Z])/g," $1").trim()}),e.jsx("input",{type:"number",step:"1",value:P[C],onChange:H=>J(re=>({...re,[C]:parseFloat(H.target.value)})),className:"w-full p-2 rounded-lg border border-cream-300 focus:ring-1 focus:ring-cream-900 focus:border-transparent outline-none"})]},C))})]}),["front","back"].map(C=>{const H=C==="front",re=H?p:v;return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-cream-900 uppercase mb-2 tracking-wider",children:[C," Side ",H?"*":"(Optional)"]}),re?e.jsxs("div",{className:`border rounded-xl p-4 flex items-start gap-4 relative ${re.isValid?"bg-white border-cream-200":"bg-red-50 border-red-200"}`,onClick:()=>E(C),children:[re.preview?e.jsx("img",{src:re.preview,className:"w-16 h-16 object-cover rounded bg-cream-100",alt:"preview"}):e.jsx("div",{className:"w-16 h-16 bg-cream-100 rounded flex items-center justify-center",children:e.jsx(k4,{className:"text-cream-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-cream-900 truncate",children:re.file.name}),e.jsxs("p",{className:"text-xs text-cream-500 mb-2",children:[(re.file.size/1024/1024).toFixed(2)," MB"]}),re.isValid?e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(ya,{size:12})," Ready for Upload"]}):e.jsx("div",{className:"space-y-1",children:re.errors.map((je,ge)=>e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Ts,{size:12})," ",je]},ge))})]}),e.jsx("button",{onClick:je=>{je.stopPropagation(),H?j(null):w(null)},className:"text-cream-400 hover:text-red-500 p-1 transition-colors",children:e.jsx(ta,{size:16})}),k===C&&e.jsx("div",{className:"absolute -right-3 top-1/2 -translate-y-1/2 w-0 h-0 border-t-8 border-t-transparent border-l-8 border-l-cream-900 border-b-8 border-b-transparent hidden lg:block"})]}):e.jsxs("div",{className:"border-2 border-dashed border-cream-300 rounded-xl p-8 text-center bg-white hover:bg-cream-50 hover:border-cream-400 transition-all cursor-pointer relative",onDragOver:je=>{je.preventDefault(),F(!0)},onDragLeave:()=>F(!1),onDrop:je=>qe(je,C),children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:je=>R(je,C),accept:"image/jpeg,image/png,image/jpg,application/pdf"}),e.jsx(Xo,{className:"mx-auto text-cream-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-cream-700",children:"Drag & Drop or Click"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"JPG, PNG, PDF (Max 10MB)"})]})]},C)}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-blue-900",children:[e.jsxs("h4",{className:"font-bold text-sm mb-2 flex items-center gap-2",children:[e.jsx(gr,{size:16})," Professional Print Requirements"]}),e.jsxs("ul",{className:"text-xs space-y-2 opacity-80",children:[e.jsx("li",{children:" Format: JPG, PNG, PDF"}),e.jsx("li",{children:" Resolution: 300 DPI minimum"}),e.jsx("li",{children:" Color: Auto-converted to CMYK"}),e.jsx("li",{children:" Bleed: 3mm recommended on all sides"}),e.jsx("li",{children:" File Size: Maximum 10MB per file"})]})]}),e.jsx("button",{onClick:Y,disabled:!f||!p||!p.isValid||L,className:"w-full bg-cream-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-cream-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 flex items-center justify-center gap-2",children:f?L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading... ",Math.round(V),"%"]}):e.jsxs(e.Fragment,{children:[e.jsx(Xo,{size:20}),"Process & Upload Design"]}):e.jsxs(e.Fragment,{children:[e.jsx(Mf,{size:20}),"Login to Upload"]})})]}),e.jsxs("div",{className:"lg:w-3/5 bg-cream-100 rounded-2xl p-8 flex flex-col items-center justify-center relative min-h-[600px]",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(#976b4d 1px, transparent 1px), linear-gradient(90deg, #976b4d 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsx("div",{className:"relative z-10 shadow-2xl",children:k==="front"&&p||k==="back"&&v?e.jsxs("div",{className:"relative w-[500px] aspect-[1.75/1] bg-white",children:[((ne=k==="front"?p:v)==null?void 0:ne.preview)&&e.jsx("img",{src:(Ne=k==="front"?p:v)==null?void 0:Ne.preview,className:"w-full h-full object-cover",alt:"preview"}),e.jsx(ZE,{safeArea:{top:P.safeTop,bottom:P.safeBottom,left:P.safeLeft,right:P.safeRight},bleedArea:{top:P.bleedTop,bottom:P.bleedBottom,left:P.bleedLeft,right:P.bleedRight}})]}):e.jsxs("div",{className:"w-[500px] aspect-[1.75/1] bg-white flex flex-col items-center justify-center text-cream-300 border-2 border-dashed border-cream-200",children:[e.jsx(vi,{size:48,className:"mb-4"}),e.jsx("p",{className:"text-cream-400 font-medium",children:"Preview will appear here"})]})}),e.jsxs("div",{className:"mt-8 flex gap-6 flex-wrap justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-cream-700",children:[e.jsx("span",{className:"w-3 h-3 border border-red-400 bg-red-50"}),e.jsx("span",{children:"Bleed Area (Cut Zone)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-cream-700",children:[e.jsx("span",{className:"w-3 h-3 border border-blue-400 bg-blue-50"}),e.jsx("span",{children:"Trim Line (Final Size)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-cream-700",children:[e.jsx("span",{className:"w-3 h-3 border-2 border-dashed border-green-500 bg-green-50"}),e.jsx("span",{children:"Safe Area (Text/Logos)"})]})]})]})]})]})};return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-12",children:[e.jsx("div",{className:"container mx-auto px-4 sm:px-6 mb-6",children:e.jsx(Or,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs(ha,{mode:"wait",children:[r==="select"&&e.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:_()},"select"),r==="upload"&&!f&&e.jsx(at.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:X()},"login-required"),r==="upload"&&f&&e.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Q()},"upload")]})]})},KE=[{role:"Founder & Director",name:"Name Placeholder",desc:"Vision, Business Strategy & Decision Making"},{role:"Chief Executive Officer (CEO)",name:"Kajal Sharma",desc:"Leads the company with strong direction and clarity"},{role:"Chief Operating Officer (COO)",name:"Name Placeholder",desc:"Coordination, Daily Operations & Workflow Management"},{role:"HR",name:"Name Placeholder",desc:"Human Resources & Team Management"},{role:"Marketing Head",name:"Name Placeholder",desc:"Branding, Promotions & Client Acquisition"},{role:"Production Manager",name:"Name Placeholder",desc:"Machine Management, Quality Control & Output"},{role:"Design Head / Creative Lead",name:"Name Placeholder",desc:"Layouts, Templates, Content Designing & Branding"},{role:"Sales Manager",name:"Name Placeholder",desc:"Customer Handling, Order Conversion & Follow-ups"},{role:"Accounts & Billing Manager",name:"Name Placeholder",desc:"Billing, Invoices, Vendor Payments & Records"},{role:"Customer Support Lead",name:"Name Placeholder",desc:"Client Queries, Support & Service Updates"},{role:"Logistics & Dispatch Officer",name:"Name Placeholder",desc:"Packaging, Shipment Tracking & Delivery Coordination"}],XE=[{icon:si,title:"No Minimum Limit",text:"Premium printing available even for low quantity."},{icon:ev,title:"Bulk Production",text:"Advanced production setup for bulk orders."},{icon:a5,title:"Creative Design",text:"Creative and modern design approach."},{icon:pn,title:"Ultra-fast Delivery",text:"We respect deadlines with quick turnaround."},{icon:Ko,title:"Best Pricing",text:"Affordable and transparent pricing structure."}],eT=["Commitment to Quality","Customer First Approach","Innovation & Creativity","Timely Delivery & Transparency"],tT=()=>e.jsxs("div",{className:"min-h-screen bg-cream-50",children:[e.jsx("div",{className:"container mx-auto px-4 pt-4 pb-4",children:e.jsx(Or,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsx("div",{className:"bg-cream-900 text-cream-50 py-20 mt-10",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx(at.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"font-serif text-4xl md:text-6xl font-bold mb-4",children:"About Prints24"}),e.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"w-24 h-1 bg-cream-400 mx-auto rounded-full"})]})}),e.jsx("section",{className:"py-16 container mx-auto px-4 max-w-5xl",children:e.jsxs(at.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center space-y-8 text-lg text-cream-800 leading-relaxed",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-2xl text-cream-900",children:"Prints24"})," is a modern, fast-growing Digital & Offset Printing Company, aiming to deliver",e.jsx("span",{className:"font-semibold italic text-cream-600",children:" Fast, Creative, and High-Quality"})," printing solutions to customers."]}),e.jsx("p",{className:"max-w-3xl mx-auto",children:"We started Prints24 with the belief that todays digital generation should have a platform where they can order any type of printingfrom small quantities (Short Run) to large bulk ordersin a way that is:"}),e.jsx("div",{className:"flex justify-center gap-4 md:gap-12 py-6",children:["Easy","Fast","Reliable"].map((s,r)=>e.jsxs(at.div,{initial:{opacity:0,scale:.5},whileInView:{opacity:1,scale:1},transition:{delay:r*.1},className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-cream-200 flex items-center justify-center text-cream-900 mb-2",children:e.jsx(Xa,{size:24,strokeWidth:3})}),e.jsx("span",{className:"font-serif font-bold text-xl text-cream-900",children:s})]},s))})]})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs(at.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"bg-cream-50 p-10 rounded-3xl border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-cream-900 text-white rounded-xl",children:e.jsx(kr,{size:28})}),e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900",children:"Our Vision"})]}),e.jsx("p",{className:"text-cream-700 text-lg leading-relaxed",children:"To make Affordable, Stylish, and Premium Quality Printing accessible to every individual and every business."})]}),e.jsxs(at.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"bg-cream-50 p-10 rounded-3xl border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-cream-900 text-white rounded-xl",children:e.jsx(R5,{size:28})}),e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900",children:"Our Mission"})]}),e.jsxs("ul",{className:"space-y-4 text-cream-700",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Xa,{size:20,className:"text-cream-500 mt-1 shrink-0"}),e.jsx("span",{children:"Make modern printing easy and accessible for everyone."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Xa,{size:20,className:"text-cream-500 mt-1 shrink-0"}),e.jsx("span",{children:"Provide intelligent solutions with Quick Delivery and High Quality."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Xa,{size:20,className:"text-cream-500 mt-1 shrink-0"}),e.jsx("span",{children:"Offer better printing options for every budget."})]})]})]})]})})}),e.jsx("section",{className:"py-20 bg-cream-900 text-cream-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"font-serif text-4xl font-bold mb-4",children:"What Makes Prints24 Different?"}),e.jsx("p",{className:"text-cream-200 max-w-2xl mx-auto",children:"We combine traditional quality with modern speed and convenience."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6",children:XE.map((s,r)=>e.jsxs(at.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.1},className:"bg-cream-800 p-6 rounded-2xl text-center hover:bg-cream-700 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-600 rounded-full flex items-center justify-center mx-auto mb-4 text-white",children:e.jsx(s.icon,{size:24})}),e.jsx("h3",{className:"font-serif font-bold text-lg mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-cream-200",children:s.text})]},r))})]})}),e.jsx("section",{className:"py-16 bg-cream-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h2",{className:"font-serif text-3xl font-bold text-center text-cream-900 mb-12",children:"Our Core Values"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:eT.map((s,r)=>e.jsxs(at.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"bg-white px-8 py-4 rounded-full shadow-sm border border-cream-200 flex items-center gap-3 font-medium text-cream-800",children:[e.jsx(L4,{size:18,className:"text-cream-500",fill:"currentColor"}),s]},r))})]})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"text-cream-500 font-medium uppercase tracking-widest text-sm",children:"The People Behind Prints24"}),e.jsx("h2",{className:"font-serif text-4xl font-bold text-cream-900 mt-2",children:"Meet Our Core Team"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:KE.map((s,r)=>e.jsxs(at.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.05},className:"group bg-cream-50 p-6 rounded-2xl border border-cream-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"w-16 h-16 bg-cream-200 rounded-full mb-4 flex items-center justify-center text-cream-900 group-hover:bg-cream-900 group-hover:text-cream-50 transition-colors",children:e.jsx(Rl,{size:24})}),e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"text-xs font-bold text-cream-500 uppercase tracking-wider mb-1",children:s.role}),e.jsx("h3",{className:"font-serif text-xl font-bold text-cream-900",children:s.name})]}),e.jsx("div",{className:"w-10 h-1 bg-cream-200 my-4 rounded-full group-hover:bg-cream-400 transition-colors"}),e.jsx("p",{className:"text-sm text-cream-600 leading-relaxed",children:s.desc})]},r))})]})})]}),sT=()=>{const[s,r]=y.useState("terms");y.useEffect(()=>{if(typeof window>"u")return;const l=()=>{const d=["terms","refund","cancellation","privacy"];for(const m of d){const u=document.getElementById(m);if(u){const f=u.getBoundingClientRect();f.top>=0&&f.top<300&&r(m)}}};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const i=l=>{const d=document.getElementById(l);if(d){const m=d.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:m,behavior:"smooth"}),r(l)}};return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-12",children:[e.jsx("div",{className:"container mx-auto px-4 pt-4 pb-4",children:e.jsx(Or,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsx("div",{className:"bg-cream-900 text-cream-50 py-16 mb-12",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold mb-4",children:"Legal Policies"}),e.jsx("p",{className:"text-cream-200 max-w-2xl mx-auto",children:"Transparency is key to our service. Please read our terms and conditions carefully."})]})}),e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-10",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsxs("div",{className:"sticky top-24 bg-white rounded-2xl shadow-sm border border-cream-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-cream-100 border-b border-cream-200 font-bold text-cream-900 flex items-center gap-2",children:[e.jsx(b5,{size:18})," Table of Contents"]}),e.jsxs("nav",{className:"p-2 space-y-1",children:[e.jsxs("button",{onClick:()=>i("terms"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="terms"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Terms of Service ",s==="terms"&&e.jsx(Ha,{size:14})]}),e.jsxs("button",{onClick:()=>i("refund"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="refund"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Refund Policy ",s==="refund"&&e.jsx(Ha,{size:14})]}),e.jsxs("button",{onClick:()=>i("cancellation"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="cancellation"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Cancellation Policy ",s==="cancellation"&&e.jsx(Ha,{size:14})]}),e.jsxs("button",{onClick:()=>i("privacy"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="privacy"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Privacy Policy ",s==="privacy"&&e.jsx(Ha,{size:14})]})]})]})}),e.jsxs("div",{className:"lg:w-3/4 space-y-12",children:[e.jsx("section",{id:"terms",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(Kr,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Terms of Service"})]}),e.jsxs("div",{className:"space-y-6 text-cream-800 leading-relaxed",children:[e.jsx("p",{children:"Prints24 provides digital and offset printing services to B2B, B2C, corporate clients, small businesses, and individuals. By using our services, you agree to the following terms:"}),e.jsxs("div",{className:"bg-cream-50 p-5 rounded-xl border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(_m,{size:16})," Customer Responsibility"]}),e.jsx("p",{className:"text-sm",children:"The customer is fully responsible for the legality, originality, copyright ownership, and authenticity of all submitted designs, documents, and artwork."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2 text-lg",children:"Prohibited Printing"}),e.jsx("p",{className:"text-sm mb-3",children:"We do strictly NOT allow printing of content that is illegal, forged, duplicate, copyrighted without permission, objectionable, religiously sensitive, government ID, currency, or any material restricted under Indian law."}),e.jsxs("div",{className:"flex items-start gap-2 text-red-600 text-xs font-medium bg-red-50 p-3 rounded-lg",children:[e.jsx(Yb,{size:16,className:"shrink-0 mt-0.5"}),"If such files are received, the order may be cancelled and legal action may be taken."]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Color Disclaimer"}),e.jsx("p",{className:"text-sm",children:"100% exact color matching is not guaranteed in digital or offset processes. If future reprints require identical colors, color profiling will be required and extra fees will apply."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Design Approval"}),e.jsx("p",{className:"text-sm",children:"After customer approval, Prints24 is not responsible for spelling mistakes, low-resolution images, incorrect alignment, missing elements, or design issues found later."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-3",children:"Printing Accuracy Policy"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full mt-1.5"}),e.jsx("span",{children:"If printing errors impact 5%50% of the product, we provide a proportional discount."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full mt-1.5"}),e.jsx("span",{children:"If more than 50% is defective due to production errors, we provide a free reprint."})]})]}),e.jsx("p",{className:"text-xs mt-2 text-cream-500 italic",children:"*For approved reprints, printing is free, but courier/delivery charges must be paid by the customer."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Liability & Rights"}),e.jsxs("p",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"Limited Liability:"})," In cases of courier delay, product damage, color mismatch, disputes, or loss, Prints24s maximum liability is limited to the printing value of the order only."]}),e.jsxs("p",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"Right to Refuse:"})," Prints24 reserves the right to cancel, reject, suspend, or modify any order, customer account, pricing, or policies without prior notice."]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Jurisdiction:"})," All legal matters fall under Jaipur, Rajasthan (India) jurisdiction only."]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Payments & Communication"}),e.jsx("p",{className:"text-sm mb-2",children:"Payments must be made only through officially verified Prints24 company banking channels. Payments made to personal accounts are not the responsibility of Prints24."}),e.jsx("p",{className:"text-sm",children:"By ordering, customers agree to receive transactional and promotional communications through SMS, WhatsApp, email, or phone."})]})]})]})}),e.jsx("section",{id:"refund",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(Xi,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Refund Policy"})]}),e.jsxs("div",{className:"space-y-4 text-cream-800",children:[e.jsx("p",{className:"font-medium",children:"All products are custom-made and non-refundable."}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100",children:[e.jsxs("h3",{className:"font-bold text-red-900 mb-2 text-sm flex items-center gap-2",children:[e.jsx(uc,{size:16})," No Refunds Provided For:"]}),e.jsxs("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-red-800",children:[e.jsx("li",{children:" Design dissatisfaction"}),e.jsx("li",{children:" Minor color variations"}),e.jsx("li",{children:" Errors discovered after customer approval"}),e.jsx("li",{children:" Courier delays"}),e.jsx("li",{children:" Expected variation in material/texture"})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100 flex items-start gap-3",children:[e.jsx(Xi,{size:20,className:"text-green-700 mt-0.5 shrink-0"}),e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Reprint Guarantee:"})," If production errors affect more than 50% of the order, we provide a free reprintnot a refund."]})]})]})]})}),e.jsx("section",{id:"cancellation",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(Yb,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Cancellation Policy"})]}),e.jsx("div",{className:"space-y-4 text-cream-800",children:e.jsxs("ul",{className:"space-y-3 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-100 flex items-center justify-center shrink-0 text-cream-900 font-bold text-xs",children:"1"}),e.jsxs("span",{children:["Orders may be cancelled ",e.jsx("strong",{children:"only before printing begins"}),"."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-100 flex items-center justify-center shrink-0 text-cream-900 font-bold text-xs",children:"2"}),e.jsx("span",{children:"Once production has started, modification or cancellation is not allowed."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-100 flex items-center justify-center shrink-0 text-cream-900 font-bold text-xs",children:"3"}),e.jsx("span",{children:"If cancelled before printing, setup, processing, and material costs will be deducted from the refund."})]})]})})]})}),e.jsx("section",{id:"privacy",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(cc,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Privacy Policy"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-cream-800 text-sm",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Information We Collect"}),e.jsx("p",{className:"mb-4 text-cream-600",children:"Customer name, business details, email, phone, delivery address, and printing design files."}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"How Information Is Used"}),e.jsx("p",{className:"mb-4 text-cream-600",children:"For order processing, delivery, updates, support, and service improvement."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Data Security & Sharing"}),e.jsx("p",{className:"mb-4 text-cream-600",children:"All customer files and information remain confidential and shared only with printing partners, couriers, or payment gateways as needed."}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Customer Rights"}),e.jsx("p",{className:"text-cream-600",children:"Customers may receive promotional communications (opt-out available) and may request access/correction of stored information."})]})]})]})})]})]})})]})},Pa=(s,r)=>{if(typeof window>"u")return;let i=null;if(r&&(i=document.getElementById(r)),i||(i=document.querySelector(`[name="${s}"]`)),i||(i=document.querySelector(`[data-field="${s}"]`)),!i){const l=[`#${s}`,`input[name="${s}"]`,`select[name="${s}"]`,`textarea[name="${s}"]`,`[id*="${s}"]`];for(const d of l)if(i=document.querySelector(d),i)break}if(i)i.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{i&&(i.tagName==="BUTTON"?i.click():i.focus(),i.tagName==="SELECT"&&i.click(),i.classList.add("validation-error-highlight"),setTimeout(()=>{i==null||i.classList.remove("validation-error-highlight")},2e3))},300);else if(r){const l=document.getElementById(`${r}-container`);if(l){l.scrollIntoView({behavior:"smooth",block:"center"});const d=l.querySelector("button");d&&setTimeout(()=>{d.click(),d.classList.add("validation-error-highlight"),setTimeout(()=>{d.classList.remove("validation-error-highlight")},2e3)},300)}}},aT=()=>{const[s,r]=y.useState({name:"",email:"",message:""}),[i,l]=y.useState({}),[d,m]=y.useState(!1),[u,f]=y.useState({type:null,text:""}),g=v=>{const{name:w,value:k}=v.target;r(E=>({...E,[w]:k})),i[w]&&l(E=>({...E,[w]:void 0}))},p=()=>{const v={};if(s.name.trim()||(v.name="Name is required"),s.email?/\S+@\S+\.\S+/.test(s.email)||(v.email="Please enter a valid email address"):v.email="Email is required",s.message.trim()?s.message.trim().length<10&&(v.message="Message must be at least 10 characters"):v.message="Message is required",l(v),Object.keys(v).length>0){const w=Object.keys(v)[0];Pa(w,w)}return Object.keys(v).length===0},j=async v=>{if(v.preventDefault(),!!p()){m(!0),f({type:null,text:""});try{await new Promise(w=>setTimeout(w,1e3)),f({type:"success",text:"Thank you! Your message has been sent successfully."}),r({name:"",email:"",message:""}),l({}),setTimeout(()=>{f({type:null,text:""})},5e3)}catch{f({type:"error",text:"Failed to send message. Please try again."}),setTimeout(()=>{f({type:null,text:""})},5e3)}finally{m(!1)}}};return e.jsx("div",{className:"min-h-screen bg-cream-50 py-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-2xl",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Or,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs("div",{className:"bg-white p-10 rounded-2xl shadow-lg border border-cream-100",children:[e.jsx("h1",{className:"font-serif text-3xl font-bold text-cream-900 mb-6 text-center",children:"Contact Us"}),e.jsx(ha,{children:u.type&&e.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`mb-6 p-4 rounded-lg flex items-start gap-3 ${u.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[e.jsx(Ts,{size:20,className:"flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm",children:u.text})}),e.jsx("button",{onClick:()=>f({type:null,text:""}),className:"flex-shrink-0 hover:opacity-70 transition-opacity",children:e.jsx(ns,{size:18})})]})}),e.jsxs("form",{className:"space-y-6",onSubmit:j,children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-cream-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"name",name:"name",type:"text",value:s.name,onChange:g,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-transparent outline-none transition-all ${i.name?"border-red-300 focus:ring-red-500 bg-red-50":"border-cream-200"}`,placeholder:"Your Name"}),i.name&&e.jsxs("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),i.name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-cream-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"email",name:"email",type:"email",value:s.email,onChange:g,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-transparent outline-none transition-all ${i.email?"border-red-300 focus:ring-red-500 bg-red-50":"border-cream-200"}`,placeholder:"your@email.com"}),i.email&&e.jsxs("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),i.email]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"message",className:"block text-sm font-medium text-cream-700 mb-1",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"message",name:"message",rows:4,value:s.message,onChange:g,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-transparent outline-none resize-none transition-all ${i.message?"border-red-300 focus:ring-red-500 bg-red-50":"border-cream-200"}`,placeholder:"How can we help?"}),i.message&&e.jsxs("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),i.message]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-cream-50 py-3 rounded-lg font-bold hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Sending...":"Send Message"})]})]})]})})},rT={"+1":{pattern:/^\d{10}$/,minLength:10,maxLength:10,example:"1234567890"},"+91":{pattern:/^[6-9]\d{9}$/,minLength:10,maxLength:10,example:"9876543210"},"+55":{pattern:/^[1-9]\d{10}$/,minLength:11,maxLength:11,example:"11987654321"},"+44":{pattern:/^[1-9]\d{9,10}$/,minLength:10,maxLength:11,example:"7123456789"},"+61":{pattern:/^[2-9]\d{8}$/,minLength:9,maxLength:9,example:"412345678"},"+971":{pattern:/^[2-9]\d{8}$/,minLength:9,maxLength:9,example:"501234567"},"+86":{pattern:/^1[3-9]\d{9}$/,minLength:11,maxLength:11,example:"13800138000"},"+81":{pattern:/^[789]0\d{8}$|^[789]\d{9}$/,minLength:10,maxLength:11,example:"9012345678"},"+49":{pattern:/^[1-9]\d{10,11}$/,minLength:11,maxLength:12,example:"15123456789"},"+33":{pattern:/^[67]\d{8}$/,minLength:9,maxLength:9,example:"612345678"},"+7":{pattern:/^[3-9]\d{9}$/,minLength:10,maxLength:10,example:"9123456789"},"+65":{pattern:/^[689]\d{7}$/,minLength:8,maxLength:8,example:"91234567"},"+60":{pattern:/^[1-9]\d{8,9}$/,minLength:9,maxLength:10,example:"123456789"},"+66":{pattern:/^[689]\d{8}$/,minLength:9,maxLength:9,example:"812345678"},"+82":{pattern:/^[1-9]\d{9,10}$/,minLength:10,maxLength:11,example:"1012345678"},"+34":{pattern:/^[6-9]\d{8}$/,minLength:9,maxLength:9,example:"612345678"},"+39":{pattern:/^[3]\d{9}$/,minLength:10,maxLength:10,example:"3123456789"},"+31":{pattern:/^[6]\d{8}$/,minLength:9,maxLength:9,example:"612345678"},"+46":{pattern:/^[7]\d{8}$/,minLength:9,maxLength:9,example:"712345678"},"+41":{pattern:/^[7-9]\d{8}$/,minLength:9,maxLength:9,example:"781234567"},"+27":{pattern:/^[6-9]\d{8}$/,minLength:9,maxLength:9,example:"812345678"}},nT=()=>{var O;const s=nr(),r=ni(),[i,l]=y.useState({email:"",password:""}),[d,m]=y.useState({}),[u,f]=y.useState(!1),[g,p]=y.useState(!1),[j,v]=y.useState("email"),[w,k]=y.useState({email:"",otp:"",newPassword:"",confirmPassword:""}),[E,T]=y.useState({}),[F,L]=y.useState(!1),[M,V]=y.useState(!1),[le,G]=y.useState(!1),[z,P]=y.useState(""),[J,W]=y.useState(!1),[oe,ce]=y.useState([]),[pe,qe]=y.useState([]),[R,Y]=y.useState(""),[_,X]=y.useState(!0),Q=y.useRef(null),ne=(O=r.state)==null?void 0:O.message;y.useEffect(()=>{(async()=>{try{X(!0);const Ce=(await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca2,flag,flags,idd")).json()).filter(Ge=>{var ue,se,Ie;return((ue=Ge.idd)==null?void 0:ue.root)&&((Ie=(se=Ge.idd)==null?void 0:se.suffixes)==null?void 0:Ie.length)>0}).map(Ge=>{var Ie;const ue=Ge.idd.root+(Ge.idd.suffixes[0]||""),se=rT[ue]||{pattern:/^\d{8,15}$/,minLength:8,maxLength:15,example:"1234567890"};return{code:ue,country:Ge.cca2,name:Ge.name.common,flag:Ge.flag||"",flagUrl:((Ie=Ge.flags)==null?void 0:Ie.png)||`https://flagcdn.com/w40/${Ge.cca2.toLowerCase()}.png`,pattern:se.pattern,minLength:se.minLength,maxLength:se.maxLength,example:se.example,uniqueId:`${ue}-${Ge.cca2}`}}).sort((Ge,ue)=>Ge.name.localeCompare(ue.name));ce(Ce),qe(Ce)}catch(de){console.error("Error fetching countries:",de);const we=[{code:"+1",country:"US",name:"United States",flag:"",flagUrl:"https://flagcdn.com/w40/us.png",pattern:/^\d{10}$/,minLength:10,maxLength:10,example:"1234567890",uniqueId:"+1-US"},{code:"+91",country:"IN",name:"India",flag:"",flagUrl:"https://flagcdn.com/w40/in.png",pattern:/^[6-9]\d{9}$/,minLength:10,maxLength:10,example:"9876543210",uniqueId:"+91-IN"},{code:"+44",country:"GB",name:"United Kingdom",flag:"",flagUrl:"https://flagcdn.com/w40/gb.png",pattern:/^[1-9]\d{9,10}$/,minLength:10,maxLength:11,example:"7123456789",uniqueId:"+44-GB"}];ce(we),qe(we)}finally{X(!1)}})()},[]),y.useEffect(()=>{if(!oe.length){qe([]);return}if(!R||R.trim()===""){qe(oe);return}const I=R.toLowerCase().trim(),de=oe.filter(we=>we.name.toLowerCase().includes(I)||we.code.toLowerCase().includes(I)||we.country.toLowerCase().includes(I));qe(de)},[R,oe]),y.useEffect(()=>{const I=de=>{Q.current&&!Q.current.contains(de.target)&&W(!1)};return J&&document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[J]);const Ne=I=>{const{name:de,value:we}=I.target;l(Ce=>({...Ce,[de]:we})),d[de]&&m(Ce=>({...Ce,[de]:void 0})),d.general&&m(Ce=>({...Ce,general:void 0}))},C=()=>{const I={};if(i.email?/\S+@\S+\.\S+/.test(i.email)||(I.email="Please enter a valid email address"):I.email="Email is required",i.password||(I.password="Password is required"),m(I),Object.keys(I).length>0){const de=Object.keys(I)[0];Pa(de,de)}return Object.keys(I).length===0},H=async()=>{if(!w.email.trim()){T({email:"Email is required"});return}if(!/\S+@\S+\.\S+/.test(w.email)){T({email:"Please enter a valid email address"});return}L(!0),T({});try{const I=await fetch(`${Te}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.email.trim()})}),de=await I.json();if(!I.ok){L(!1),I.status===404?T({email:de.message||"No account found with this email address. Please check and try again."}):T({general:de.message||"Failed to send OTP. Please try again."});return}P(w.email.trim()),v("otp"),L(!1)}catch(I){console.error("Error sending OTP:",I),L(!1),T({general:"Network error. Please try again."})}},re=async()=>{if(!w.otp||w.otp.length!==6){T({otp:"Please enter a valid 6-digit OTP"});return}V(!0),T({});try{const I=await fetch(`${Te}/auth/verify-otp-password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.email.trim(),otp:w.otp})}),de=await I.json();if(!I.ok){V(!1),T({otp:de.message||"Invalid OTP. Please try again."});return}v("newPassword"),V(!1)}catch(I){console.error("Error verifying OTP:",I),V(!1),T({general:"Network error. Please try again."})}},je=async()=>{const I={};if(w.newPassword?w.newPassword.length<6&&(I.newPassword="Password must be at least 6 characters"):I.newPassword="New password is required",w.confirmPassword?w.newPassword!==w.confirmPassword&&(I.confirmPassword="Passwords do not match"):I.confirmPassword="Please confirm your password",Object.keys(I).length>0){T(I);return}G(!0),T({});try{const de=await fetch(`${Te}/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.email.trim(),otp:w.otp,newPassword:w.newPassword})}),we=await de.json();if(!de.ok){G(!1),T({general:we.message||"Failed to reset password. Please try again."});return}p(!1),v("email"),k({email:"",otp:"",newPassword:"",confirmPassword:""}),T({}),P(""),alert("Password reset successfully! You can now login with your new password.")}catch(de){console.error("Error resetting password:",de),G(!1),T({general:"Network error. Please try again."})}},ge=async I=>{if(I.preventDefault(),!!C()){f(!0);try{const de=await fetch(`${Te}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:i.email,password:i.password})}),we=await de.text();if(we.startsWith("<!DOCTYPE")||we.startsWith("<html"))throw new Error("Server returned HTML instead of JSON. Please check your server configuration.");const Ce=JSON.parse(we);if(!de.ok){m({general:Ce.message||"Login failed. Please check credentials."});return}localStorage.setItem("token",Ce.token),localStorage.setItem("user",JSON.stringify(Ce.user)),Ce.user.role==="admin"?s("/admin/dashboard"):Ce.user.role==="emp"?s("/employee/dashboard"):s("/")}catch(de){console.error("Login error:",de),m({general:"Network error. Please check if the server is running."})}finally{f(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-96 h-96 bg-cream-200 rounded-full blur-3xl opacity-40 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-5%] w-96 h-96 bg-cream-300 rounded-full blur-3xl opacity-40 pointer-events-none"}),e.jsx("div",{className:"absolute top-4 left-4 z-20",children:e.jsx(Or,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl w-full space-y-6 sm:space-y-8 bg-white p-6 sm:p-8 md:p-10 rounded-2xl sm:rounded-3xl shadow-xl border border-cream-100 relative z-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900",children:"Welcome Back"}),e.jsx("p",{className:"mt-2 text-xs sm:text-sm text-cream-600",children:"Sign in to manage your prints and orders"})]}),ne&&e.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Ts,{size:16}),ne]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:ge,children:[d.general&&e.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-100 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Ts,{size:16}),d.general]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-cream-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(po,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",value:i.email,onChange:Ne,className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${d.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter your email address"})]}),d.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-cream-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(cc,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{id:"password",name:"password",type:"password",value:i.password,onChange:Ne,className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${d.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter your password"})]}),d.password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.password})]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("div",{className:"text-xs",children:e.jsx("button",{type:"button",onClick:()=>{p(!0),v("email"),k({email:"",otp:"",newPassword:"",confirmPassword:""}),T({}),P("")},className:"font-medium text-cream-900 hover:text-cream-700 hover:underline",children:"Forgot your password?"})})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed",children:u?e.jsx(Kt,{className:"animate-spin h-5 w-5"}):e.jsxs(e.Fragment,{children:["Sign in",e.jsx(Jr,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]})})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-cream-600",children:["Don't have an account?"," ",e.jsx(ks,{to:"/signup",className:"font-bold text-cream-900 hover:text-cream-700 underline transition-colors",children:"Sign Up"})]})})]}),e.jsx(ha,{children:g&&e.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>{!F&&!M&&!le&&p(!1)},children:e.jsxs(at.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:I=>I.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 sm:p-8 relative",children:[!F&&!M&&!le&&e.jsx("button",{onClick:()=>p(!1),className:"absolute top-4 right-4 text-cream-400 hover:text-cream-900 transition-colors",children:e.jsx(ns,{className:"h-5 w-5"})}),j==="email"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-cream-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(po,{className:"h-8 w-8 text-cream-900"})}),e.jsx("h3",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-sm text-cream-600",children:"Enter your email address to receive a verification code"})]}),E.general&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Ts,{size:16}),E.general]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(po,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"email",value:w.email,onChange:I=>{k({...w,email:I.target.value}),T({...E,email:void 0})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${E.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter your email address"})]}),E.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:E.email})]}),e.jsx("button",{onClick:H,disabled:F||!w.email,className:"w-full bg-cream-900 text-cream-50 py-3 px-4 rounded-xl font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:F?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin h-5 w-5"}),"Sending OTP..."]}):e.jsxs(e.Fragment,{children:["Send OTP",e.jsx(Jr,{className:"h-5 w-5"})]})})]})]}),j==="otp"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ya,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Verify OTP"}),e.jsx("p",{className:"text-sm text-cream-600 mb-2",children:"We've sent a 6-digit code to:"}),e.jsx("p",{className:"text-lg font-semibold text-cream-900 mb-6",children:z})]}),E.otp&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Ts,{size:16}),E.otp]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-2",children:"Enter OTP"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:w.otp,onChange:I=>{const de=I.target.value.replace(/\D/g,"").slice(0,6);k({...w,otp:de}),T({...E,otp:void 0})},className:`w-full px-4 py-3 border-2 ${E.otp?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} rounded-xl focus:outline-none focus:ring-2 text-center text-3xl font-bold tracking-widest bg-cream-50`,placeholder:"------",maxLength:6,autoFocus:!0,autoComplete:"one-time-code"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:re,disabled:M||w.otp.length!==6,className:"flex-1 bg-cream-900 text-cream-50 py-3 px-4 rounded-xl font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin h-5 w-5"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:["Verify OTP",e.jsx(Jr,{className:"h-5 w-5"})]})}),e.jsx("button",{onClick:H,disabled:F||M,className:"px-4 py-3 bg-cream-100 text-cream-900 rounded-xl font-medium hover:bg-cream-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:F?"Sending...":"Resend"})]}),e.jsx("button",{onClick:()=>{v("email"),k({...w,otp:""}),T({})},className:"w-full text-sm text-cream-600 hover:text-cream-900 underline",children:"Change email address"})]})]}),j==="newPassword"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(cc,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-sm text-cream-600",children:"Enter your new password below"})]}),E.general&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Ts,{size:16}),E.general]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:w.newPassword,onChange:I=>{k({...w,newPassword:I.target.value}),T({...E,newPassword:void 0})},className:`w-full px-3 py-2 border ${E.newPassword?"border-red-300 focus:ring-red-500":"border-cream-200 focus:ring-cream-900"} rounded-lg focus:outline-none focus:ring-2 text-sm`,placeholder:"Enter new password (min 6 characters)",autoFocus:!0}),E.newPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:E.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",value:w.confirmPassword,onChange:I=>{k({...w,confirmPassword:I.target.value}),T({...E,confirmPassword:void 0})},className:`w-full px-3 py-2 border ${E.confirmPassword?"border-red-300 focus:ring-red-500":"border-cream-200 focus:ring-cream-900"} rounded-lg focus:outline-none focus:ring-2 text-sm`,placeholder:"Confirm new password"}),E.confirmPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:E.confirmPassword})]}),e.jsx("button",{onClick:je,disabled:le||!w.newPassword||!w.confirmPassword,className:"w-full bg-cream-900 text-cream-50 py-3 px-4 rounded-xl font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:le?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin h-5 w-5"}),"Resetting Password..."]}):e.jsxs(e.Fragment,{children:["Reset Password",e.jsx(ya,{className:"h-5 w-5"})]})})]})]})]})})})]})},iT=y.lazy(()=>Vd(()=>import("./EmailVerification-DJ3AJTpb.js"),[])),lT=y.lazy(()=>Vd(()=>import("./CorporateForm-DqvfT9QC.js"),[])),oT=y.lazy(()=>Vd(()=>import("./PrintPartnerForm-CBSgOD9s.js"),[])),cT=()=>{const s=nr(),[r,i]=y.useState("role-selection"),[l,d]=y.useState(""),[m,u]=y.useState(""),[f,g]=y.useState(""),[p,j]=y.useState(""),[v,w]=y.useState({}),[k,E]=y.useState(!1),T=[{id:"CUSTOMER",title:"Personal / Customer",description:"For individual printing needs",icon:ei,color:"bg-blue-50 hover:bg-blue-100 border-blue-200"},{id:"PRINT_PARTNER",title:"Print Partner",description:"Join as a printing service provider",icon:kd,color:"bg-purple-50 hover:bg-purple-100 border-purple-200"},{id:"CORPORATE",title:"Corporate Member",description:"For businesses and organizations",icon:Rn,color:"bg-green-50 hover:bg-green-100 border-green-200"}],F=z=>{d(z),i("email-entry")},L=async z=>{if(z.preventDefault(),!m.trim()||!/\S+@\S+\.\S+/.test(m)){w({email:"Please enter a valid email address"});return}w({}),i("email-verification")},M=()=>{i(l==="CUSTOMER"?"password-setup":"business-details")},V=async z=>{z.preventDefault();const P={};if((!f||f.length<6)&&(P.password="Password must be at least 6 characters"),f!==p&&(P.confirmPassword="Passwords do not match"),Object.keys(P).length>0){w(P);return}E(!0),w({});try{const J=await fetch("http://localhost:5000/api/auth/complete-customer-signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,password:f})}),W=await J.json();if(!J.ok){w({general:W.message||"Signup failed"}),E(!1);return}W.token&&W.user?(localStorage.setItem("token",W.token),localStorage.setItem("user",JSON.stringify(W.user)),s("/")):i("success"),E(!1)}catch{w({general:"Server error. Please try again."}),E(!1)}},le=()=>{i("success")},G=()=>{r==="email-entry"?(i("role-selection"),d("")):r==="email-verification"?i("email-entry"):(r==="password-setup"||r==="business-details")&&i("email-verification")};return e.jsx("div",{className:"min-h-screen bg-linear-to-br from-cream-50 via-white to-cream-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[r!=="role-selection"&&r!=="success"&&e.jsxs("button",{onClick:G,className:"mb-6 flex items-center gap-2 text-cream-600 hover:text-cream-900 transition-colors",children:[e.jsx(Td,{className:"h-5 w-5"}),"Back"]}),e.jsxs(ha,{mode:"wait",children:[r==="role-selection"&&e.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[e.jsx("h1",{className:"font-serif text-3xl sm:text-4xl font-bold text-cream-900 mb-4",children:"Join Prints24"}),e.jsx("p",{className:"text-cream-600 mb-12",children:"Choose how you'd like to sign up"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:T.map(z=>{const P=z.icon;return e.jsxs(at.button,{onClick:()=>F(z.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-6 rounded-2xl border-2 ${z.color} transition-all text-left`,children:[e.jsx(P,{className:"h-12 w-12 mb-4 text-cream-900"}),e.jsx("h3",{className:"font-semibold text-lg text-cream-900 mb-2",children:z.title}),e.jsx("p",{className:"text-sm text-cream-600",children:z.description})]},z.id)})})]},"role-selection"),r==="email-entry"&&e.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-2",children:"Enter Your Email"}),e.jsx("p",{className:"text-cream-600 mb-6",children:"We'll send you a verification code"}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(po,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"email",value:m,onChange:z=>{u(z.target.value),w({})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${v.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"your@email.com",autoFocus:!0})]}),v.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:v.email})]}),e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:"Continue"})]})]})},"email-entry"),r==="email-verification"&&e.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-2xl shadow-xl p-8",children:e.jsx(y.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin text-cream-900"})}),children:e.jsx(iT,{email:m,onVerified:M,onBack:G})})},"email-verification"),r==="password-setup"&&e.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-2",children:"Create Your Password"}),e.jsx("p",{className:"text-cream-600 mb-6",children:"Secure your account with a strong password"}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(cc,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"password",value:f,onChange:z=>{g(z.target.value),w({})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${v.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter password"})]}),v.password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:v.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(cc,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"password",value:p,onChange:z=>{j(z.target.value),w({})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${v.confirmPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Confirm password"})]}),v.confirmPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:v.confirmPassword})]}),v.general&&e.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Ts,{size:16}),v.general]}),e.jsx("button",{type:"submit",disabled:k,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed",children:k?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin h-5 w-5 mr-2"}),"Creating Account..."]}):"Complete Signup"})]})]})},"password-setup"),r==="business-details"&&e.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-2xl shadow-xl p-8",children:e.jsx(y.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin text-cream-900"})}),children:l==="CORPORATE"?e.jsx(lT,{onBack:G,onSuccess:le}):e.jsx(oT,{onBack:G})})},"business-details"),r==="success"&&e.jsx(at.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md mx-auto text-center",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-2",children:l==="CUSTOMER"?"Welcome to Prints24!":"Application Submitted!"}),e.jsx("p",{className:"text-cream-600 mb-6",children:l==="CUSTOMER"?"Your account has been created successfully. You can now login and start ordering.":"Your application has been submitted for review. We will notify you once approved."}),e.jsx("button",{onClick:()=>s("/login"),className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:l==="CUSTOMER"?"Go to Login":"Return to Home"})]})},"success")]})]})})},dT=()=>{nr();const s=Qd(),[r,i]=y.useState([]),[l,d]=y.useState(!0),[m,u]=y.useState(!1),[f,g]=y.useState({rating:5,comment:"",userName:""}),[p,j]=y.useState(!1),[v,w]=y.useState(null),[k,E]=y.useState("newest"),[T,F]=y.useState({type:null,text:""});y.useEffect(()=>{const z=localStorage.getItem("token"),P=localStorage.getItem("user");if(u(!!z),z&&P)try{const J=JSON.parse(P);g(W=>({...W,userName:J.name||""}))}catch(J){console.error("Error parsing user data:",J)}},[]),y.useEffect(()=>{(async()=>{try{d(!0);const P=Te,J={Accept:"application/json"},W=await fetch(`${P}/reviews`,{method:"GET",headers:J});if(!W.ok)throw new Error(`HTTP ${W.status}`);const oe=await W.json();i(oe)}catch(P){console.error("Fetch reviews error:",P)}finally{d(!1)}})()},[]);const L=async z=>{z.preventDefault();const P=[];if(f.userName.trim()||(P.push("Please enter your name"),Pa("userName","userName")),f.comment.trim()||(P.push("Please enter a comment"),P.length===1&&Pa("comment","comment")),P.length>0){F({type:"error",text:P.join(". ")}),setTimeout(()=>F({type:null,text:""}),5e3);return}try{j(!0),F({type:null,text:""});const J=Te,W=localStorage.getItem("token"),oe={"Content-Type":"application/json"};W&&(oe.Authorization=`Bearer ${W}`);const ce=await fetch(`${J}/reviews`,{method:"POST",headers:oe,body:JSON.stringify({rating:f.rating,comment:f.comment,userName:f.userName.trim()})});if(!ce.ok){const qe=await ce.json();throw new Error(qe.error||"Failed to submit review")}const pe=await ce.json();i([pe.review,...r]),g({rating:5,comment:"",userName:m?f.userName:""}),F({type:"success",text:"Review submitted successfully!"}),setTimeout(()=>F({type:null,text:""}),3e3)}catch(J){console.error("Submit review error:",J),F({type:"error",text:J instanceof Error?J.message:"Failed to submit review"}),setTimeout(()=>F({type:null,text:""}),3e3)}finally{j(!1)}},V=[...r.filter(z=>!(v&&z.rating!==v))].sort((z,P)=>{if(k==="highestRating")return P.rating!==z.rating?P.rating-z.rating:new Date(P.createdAt).getTime()-new Date(z.createdAt).getTime();if(k==="lowestRating")return z.rating!==P.rating?z.rating-P.rating:new Date(P.createdAt).getTime()-new Date(z.createdAt).getTime();{const J=new Date(z.createdAt).getTime(),W=new Date(P.createdAt).getTime();return k==="newest"?W-J:k==="oldest"?J-W:W-J}}),le=r.length,G=le>0?r.reduce((z,P)=>z+P.rating,0)/le:0;return e.jsx("div",{className:"min-h-screen bg-cream-50 py-6 sm:py-12",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Or,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-cream-900 mb-3 sm:mb-4",children:"Customer Reviews"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600 max-w-xl mx-auto mb-4 sm:mb-6",children:"Share your experience and see what others have to say about Prints24."}),le>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 sm:gap-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Total Reviews"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-cream-900",children:le})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Average Rating"}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(z=>e.jsx(si,{size:16,className:`sm:w-5 sm:h-5 ${z<=Math.round(G)?"fill-yellow-400 text-yellow-400":"text-cream-300"}`},z))}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-cream-900",children:G.toFixed(1)})]})]})]})]}),e.jsx("div",{className:"max-w-2xl mx-auto mb-8 sm:mb-12",children:e.jsxs("div",{className:"bg-white p-4 sm:p-6 md:p-8 rounded-xl sm:rounded-2xl shadow-lg border border-cream-200",children:[e.jsx("h2",{className:"font-serif text-xl sm:text-2xl font-bold text-cream-900 mb-4 sm:mb-6",children:"Write a Review"}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Your Name *"}),e.jsx("input",{id:"userName",name:"userName",type:"text",value:f.userName,onChange:z=>g({...f,userName:z.target.value}),className:"w-full p-4 border border-cream-300 rounded-xl focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none",placeholder:"Enter your name",required:!0,disabled:m}),m&&e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"Your name is pre-filled from your account"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(z=>e.jsx("button",{type:"button",onClick:()=>g({...f,rating:z}),className:"focus:outline-none",children:e.jsx(si,{size:24,className:`sm:w-8 sm:h-8 ${z<=f.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"} transition-colors`})},z))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Your Review *"}),e.jsx("textarea",{id:"comment",name:"comment",value:f.comment,onChange:z=>g({...f,comment:z.target.value}),rows:4,className:"w-full p-4 border border-cream-300 rounded-xl focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none resize-none",placeholder:"Share your experience...",required:!0})]}),T.type&&e.jsx("div",{className:`mb-4 p-3 rounded-lg ${T.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:T.text}),e.jsxs("button",{type:"submit",disabled:p,className:"bg-cream-900 text-cream-50 px-8 py-3 rounded-xl font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(v5,{size:18}),p?"Submitting...":"Submit Review"]})]})]})}),e.jsx("div",{className:"max-w-6xl mx-auto mb-8",children:e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-cream-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kj,{size:20,className:"text-cream-600"}),e.jsx("span",{className:"font-medium text-cream-900",children:"Filters:"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-cream-700",children:"Rating:"}),e.jsx(Ea,{label:"All Ratings",value:v,onChange:z=>w(z),options:[{value:null,label:"All Ratings"},{value:5,label:"5 Stars"},{value:4,label:"4 Stars"},{value:3,label:"3 Stars"},{value:2,label:"2 Stars"},{value:1,label:"1 Star"}]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-cream-700",children:"Sort by:"}),e.jsx(Ea,{label:"Newest First",value:k,onChange:z=>E(z),options:[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"highestRating",label:"Highest Rating"},{value:"lowestRating",label:"Lowest Rating"}]})]}),(v||k!=="newest")&&e.jsxs("button",{onClick:()=>{w(null),E("newest")},className:"ml-auto flex items-center gap-2 px-4 py-2 text-sm text-cream-700 hover:text-cream-900 border border-cream-300 rounded-lg hover:bg-cream-50 transition-colors",children:[e.jsx(ns,{size:16}),"Clear Filters"]})]})})}),l?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:"Loading reviews..."})}):V.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:v?`No reviews found with ${v} star rating.`:"No reviews yet. Be the first to review!"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:V.map(z=>e.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-2xl shadow-md border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-cream-900 font-bold text-lg",children:z.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-cream-900",children:z.userName}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(P=>e.jsx(si,{size:14,className:P<=z.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"},P))})]})]}),e.jsx("p",{className:"text-cream-700 leading-relaxed mb-4",children:z.comment}),e.jsx("p",{className:"text-xs text-cream-500",children:s?new Date(z.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading..."})]},z._id))})]})})},aa=s=>`${s.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,vx=s=>{var M,V,le,G,z,P;const r=s.product.basePrice||0,i=s.quantity||0,l=s.product.gstPercentage||18;let d=1;if(((V=(M=s.product.filters)==null?void 0:M.orderQuantity)==null?void 0:V.quantityType)==="RANGE_WISE"&&s.product.filters.orderQuantity.rangeWiseQuantities&&s.product.filters.orderQuantity.rangeWiseQuantities.length>0){const J=s.product.filters.orderQuantity.rangeWiseQuantities.find(W=>i>=W.min&&(W.max===null||W.max===void 0||i<=W.max));J&&(d=J.priceMultiplier||1)}const u=r*d*i,f=[];if(s.selectedOptions&&s.selectedOptions.length>0&&s.selectedOptions.forEach(J=>{if(typeof J=="string")return;const W=J.name||J.optionName||"Option",oe=J.priceAdd||0,ce=oe<10,pe=ce?oe*i:oe;f.push({name:W,priceAdd:oe,cost:pe,isPerUnit:ce})}),s.finish&&((le=s.product.filters)!=null&&le.filterPricesEnabled)){const J=(G=s.product.filters.printingOptionPrices)==null?void 0:G.find(W=>W.name===s.finish);if(J&&J.priceAdd!==0){const W=J.priceAdd/1e3*i;f.push({name:`Printing: ${s.finish}`,priceAdd:J.priceAdd/1e3,cost:W,isPerUnit:!0})}}if(s.shape&&((z=s.product.filters)!=null&&z.filterPricesEnabled)){const J=(P=s.product.filters.deliverySpeedPrices)==null?void 0:P.find(W=>W.name===s.shape);if(J&&J.priceAdd!==0){const W=J.priceAdd/1e3*i;f.push({name:`Delivery: ${s.shape}`,priceAdd:J.priceAdd/1e3,cost:W,isPerUnit:!0})}}s.selectedDynamicAttributes&&s.selectedDynamicAttributes.length>0&&s.selectedDynamicAttributes.forEach(J=>{if(J.priceMultiplier&&J.priceMultiplier!==1){const W=J.priceMultiplier-1,oe=r*W,ce=oe*i;f.push({name:`${J.attributeName}: ${J.label}`,priceAdd:oe,cost:ce,isPerUnit:!0})}else if(J.priceAdd&&J.priceAdd>0){const W=J.priceAdd*i;f.push({name:`${J.attributeName}: ${J.label}`,priceAdd:J.priceAdd,cost:W,isPerUnit:!0})}});const g=f.reduce((J,W)=>J+W.cost,0),p=u+g;let j=0,v=1,w=u;if(s.product.quantityDiscounts&&Array.isArray(s.product.quantityDiscounts)&&s.product.quantityDiscounts.length>0){const J=s.product.quantityDiscounts.find(W=>{const oe=W.minQuantity||0,ce=W.maxQuantity;return i>=oe&&(ce==null||i<=ce)});J&&(J.priceMultiplier?v=J.priceMultiplier:J.discountPercentage&&(v=(100-J.discountPercentage)/100),j=J.discountPercentage||0,w=u*v)}else i>=1e4?(j=70,v=.3,w=u*.3):i>=1e3?(j=50,v=.5,w=u*.5):i>=500&&(j=10,v=.9,w=u*.9);const k=p*v,E=p-k,T=k*l/100,F=k+T,L=k+T;return{rawBaseTotal:u,discountedBaseTotal:w,discountPercentage:j,optionBreakdowns:f,subtotal:k,gstAmount:T,finalTotal:L,subtotalBeforeGst:p,subtotalAfterDiscount:k,totalBeforeDiscount:F,discountAmount:E}},Ar=s=>`${s.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,uT=({subcategory:s})=>{const[r,i]=y.useState(!1),l=typeof s=="object"?s==null?void 0:s.image:null;return l&&!r?e.jsx("img",{src:l,alt:typeof s=="object"?s.name:"Subcategory",className:"w-24 h-24 object-cover rounded-lg group-hover:scale-105 transition-transform duration-300 shadow-sm",onError:()=>i(!0)}):e.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-lg flex items-center justify-center text-slate-300 group-hover:scale-105 transition-transform duration-300",children:e.jsx(Wj,{className:"w-8 h-8"})})},bj=({orders:s,onSelectOrder:r})=>{const i=Qd(),[l,d]=y.useState(new Set),m=(u,f)=>{f.stopPropagation(),d(g=>{const p=new Set(g);return p.has(u)?p.delete(u):p.add(u),p})};return e.jsx("div",{className:"space-y-4",children:s.map(u=>{var W,oe,ce,pe,qe,R,Y,_,X,Q,ne,Ne,C;const f=u.status==="completed",g=u.status==="processing"||u.status==="approved"||u.status==="production_ready",p=u.status==="request",j=u.departmentStatuses||[],v=j.length,w=j.filter(H=>H&&typeof H=="object"&&H.status?H.status==="completed":!1).length;let k=0;v>0?k=Math.round(w/v*100):f?k=100:g&&(k=0);const E=!p,T=l.has(u._id),F={quantity:u.quantity,product:{basePrice:((W=u.product)==null?void 0:W.basePrice)||0,gstPercentage:((oe=u.product)==null?void 0:oe.gstPercentage)||18,options:((ce=u.product)==null?void 0:ce.options)||[],filters:((pe=u.product)==null?void 0:pe.filters)||{},quantityDiscounts:((qe=u.product)==null?void 0:qe.quantityDiscounts)||[]},finish:u.finish,shape:u.shape,selectedOptions:(u.selectedOptions||[]).map(H=>({name:typeof H=="string"?H:H.optionName||H.name||"",optionName:typeof H=="string"?H:H.optionName||H.name||"",priceAdd:typeof H=="string"?0:H.priceAdd||0})),selectedDynamicAttributes:(R=u.selectedDynamicAttributes)==null?void 0:R.map(H=>({attributeName:H.attributeName,label:H.label,priceMultiplier:H.priceMultiplier,priceAdd:H.priceAdd}))},L=vx(F),M=((Y=u.product)==null?void 0:Y.additionalDesignCharge)||0,V=L.subtotalBeforeGst||L.rawBaseTotal+L.optionBreakdowns.reduce((H,re)=>H+re.cost,0),le=L.subtotalAfterDiscount||L.subtotal||V,G=L.discountAmount||V-le,z=le+M,P=z*(((_=u.product)==null?void 0:_.gstPercentage)||18)/100,J=u.totalPrice;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md hover:border-brand-300 transition-all duration-200 overflow-hidden group",children:[e.jsxs("div",{className:"p-6 flex flex-col md:flex-row md:items-center gap-6",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(uT,{subcategory:(X=u.product)==null?void 0:X.subcategory})}),e.jsxs("div",{className:"flex-1 min-w-0 self-start md:self-center",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-mono font-medium text-slate-500 bg-slate-100 px-2 py-0.5 rounded",children:u.orderNumber}),e.jsx("span",{className:"text-xs text-slate-400",children:i?new Date(u.createdAt).toLocaleDateString():"Loading..."})]}),((Q=u.product)==null?void 0:Q.subcategory)&&e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600 mb-0.5",children:typeof u.product.subcategory=="object"?u.product.subcategory.category?`${u.product.subcategory.category.name}  ${u.product.subcategory.name}`:u.product.subcategory.name:u.product.subcategory}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 truncate pr-4",children:((ne=u.product)==null?void 0:ne.name)||"Product"}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[u.quantity.toLocaleString()," units  ",u.finish]})]}),e.jsxs("div",{className:"flex flex-col md:items-end gap-2 md:w-64 pt-4 md:pt-0 border-t md:border-t-0 border-slate-100 mt-4 md:mt-0",children:[e.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 w-full",children:[e.jsx("span",{className:"text-lg font-bold text-slate-900",children:Ar(u.totalPrice)}),e.jsx("div",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${f?"bg-green-50 text-green-700 border-green-200":g?"bg-orange-50 text-orange-700 border-orange-200":"bg-slate-100 text-slate-600 border-slate-200"}`,children:u.status.replace("_"," ").toUpperCase()})]}),p?e.jsxs("div",{className:"flex items-center justify-end text-red-600 text-sm font-medium gap-1.5 animate-pulse w-full",children:[e.jsx(Ts,{className:"w-4 h-4"}),"Payment Required"]}):E?e.jsxs("div",{className:"w-full md:max-w-[200px] group/progress cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1.5",children:[e.jsx("span",{children:"Production Progress"}),e.jsxs("span",{className:"font-semibold text-slate-700",children:[k,"%"]})]}),e.jsx("div",{className:"h-2.5 bg-slate-100 rounded-full overflow-hidden relative group-hover/progress:bg-slate-200 transition-colors",children:e.jsx("div",{className:"h-full bg-green-400 group-hover/progress:bg-green-300 rounded-full transition-all duration-300 ease-out shadow-sm group-hover/progress:shadow-md",style:{width:`${Math.max(0,Math.min(100,k))}%`,minWidth:k>0?"4px":"0px"}})}),v>0?e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1.5",children:[w," of ",v," departments completed"]}):f?e.jsx("p",{className:"text-[10px] text-green-600 mt-1.5 font-medium",children:"Order completed"}):e.jsx("p",{className:"text-[10px] text-slate-400 mt-1.5",children:"Production starting..."})]}):e.jsx("div",{className:"w-full md:max-w-[200px]",children:e.jsx("p",{className:"text-xs text-slate-400",children:"Waiting for production to start"})})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsxs("button",{onClick:H=>m(u._id,H),className:"text-xs text-slate-500 hover:text-brand-600 font-medium px-3 py-1.5 rounded-md hover:bg-slate-50 transition-colors",children:[T?"Hide":"Show"," Breakdown"]}),e.jsx("div",{className:"text-slate-300 group-hover:text-brand-500 transition-colors",children:e.jsx(Jr,{className:"w-6 h-6"})})]})]}),T&&e.jsx("div",{className:"border-t border-slate-200 bg-slate-50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx($l,{size:18}),"Price Breakdown"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-slate-100",children:[e.jsx("div",{className:"text-slate-600",children:e.jsxs("span",{children:["Base Price (",u.quantity.toLocaleString()," "," ",Ar(((Ne=u.product)==null?void 0:Ne.basePrice)||0),")"]})}),e.jsx("span",{className:"font-medium text-slate-900",children:Ar(L.rawBaseTotal)})]}),L.optionBreakdowns.map((H,re)=>e.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[e.jsxs("span",{children:[H.name," ",H.isPerUnit?`(${u.quantity}  ${Ar(H.priceAdd)})`:""]}),e.jsxs("span",{children:["+",Ar(H.cost)]})]},re)),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (Before Discount)"}),e.jsx("span",{children:Ar(V)})]}),L.discountPercentage>0&&G>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-600 bg-green-50 p-2 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold",children:["Bulk Discount (",L.discountPercentage,"%)"]}),e.jsxs("p",{className:"text-xs opacity-80",children:["Applied for ",u.quantity," units"]})]}),e.jsxs("span",{className:"font-bold",children:["-",Ar(G)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (After Discount)"}),e.jsx("span",{children:Ar(le)})]}),M>0&&e.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[e.jsx("span",{children:"Additional Design Charge"}),e.jsxs("span",{children:["+",Ar(M)]})]}),M>0&&e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (Including Design Charge)"}),e.jsx("span",{children:Ar(z)})]}),e.jsxs("div",{className:"flex justify-between items-center text-slate-500 text-xs",children:[e.jsxs("span",{children:["GST (",((C=u.product)==null?void 0:C.gstPercentage)||18,"%)"]}),e.jsxs("span",{children:["+",Ar(P)]})]}),u.advancePaid!==void 0&&u.advancePaid>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-slate-500",children:"Advance Paid"}),e.jsx("span",{className:"font-medium text-green-600",children:Ar(u.advancePaid||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500",children:"Balance Due"}),e.jsx("span",{className:`font-bold ${u.totalPrice-(u.advancePaid||0)>0?"text-red-600":"text-slate-400"}`,children:Ar(u.totalPrice-(u.advancePaid||0))})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t-2 border-slate-300",children:[e.jsx("span",{className:"text-lg font-bold text-slate-900",children:"Total Amount"}),e.jsx("span",{className:"text-xl font-bold text-brand-600",children:Ar(J)})]})]})]})}),e.jsx("div",{onClick:()=>r(u),className:"cursor-pointer",children:e.jsxs("div",{className:"px-6 pb-4 md:pb-6 flex items-center justify-between",children:[e.jsxs("button",{className:"text-sm text-brand-600 hover:text-brand-700 font-medium flex items-center gap-1",children:["View Full Details",e.jsx(Jr,{className:"w-4 h-4"})]}),e.jsx("div",{className:"md:hidden",children:e.jsxs("button",{onClick:H=>m(u._id,H),className:"text-xs text-slate-500 hover:text-brand-600 font-medium px-3 py-1.5 rounded-md hover:bg-slate-50 transition-colors",children:[T?"Hide":"Show"," Breakdown"]})})]})})]},u._id)})})},mT=()=>{var fe,gt,kt,cs,hs,ht,Qt,Vs,rs,Bs;const s=nr(),r=Qd(),[i,l]=y.useState(null),[d,m]=y.useState(!0),[u,f]=y.useState([]),[g,p]=y.useState(!1),[j,v]=y.useState("dashboard"),[w,k]=y.useState({}),[E,T]=y.useState(!1),[F,L]=y.useState(""),[M,V]=y.useState(null),[le,G]=y.useState(null),[z,P]=y.useState(!1),[J,W]=y.useState(!1),[oe,ce]=y.useState({firstName:"",lastName:"",email:"",mobileNumber:"",countryCode:"+91"}),[pe,qe]=y.useState(null),[R,Y]=y.useState(null),[_,X]=y.useState(!1),[Q,ne]=y.useState(!1),[Ne,C]=y.useState(""),[H,re]=y.useState(""),[je,ge]=y.useState(!1),[O,I]=y.useState(!1),[de,we]=y.useState(""),[Ce,Ge]=y.useState(""),[ue,se]=y.useState(""),[Ie,Qe]=y.useState(!1);y.useEffect(()=>{const Be=localStorage.getItem("token"),mt=localStorage.getItem("user");if(!Be||!mt){s("/login");return}try{const bt=JSON.parse(mt);l(bt),m(!1),bt.countryCode&&ot(bt.countryCode),tt(),_t()}catch(bt){console.error("Error parsing user data:",bt),s("/login")}},[s]);const tt=async()=>{var Be;try{const mt=await fetch(`${Te}/auth/profile`,{headers:Ot()});if(mt.ok){const bt=await mt.json();bt.success&&bt.user&&(console.log("Fetched user profile data:",bt.user),console.log("User type:",bt.user.userType),console.log("Profile data:",bt.user.profile),console.log("Approval status:",bt.user.approvalStatus),l(bt.user),localStorage.setItem("user",JSON.stringify(bt.user)),ce({firstName:bt.user.firstName||"",lastName:bt.user.lastName||"",email:bt.user.email||"",mobileNumber:((Be=bt.user.mobileNumber)==null?void 0:Be.replace(bt.user.countryCode||"",""))||"",countryCode:bt.user.countryCode||"+91"}),bt.user.countryCode?(Qe(!1),ot(bt.user.countryCode)):Qe(!0))}}catch(mt){console.error("Error fetching profile:",mt)}},ot=async Be=>{var ws,Fs;if(!Be){Qe(!0);return}const mt={"+1":{name:"United States",code:"us"},"+91":{name:"India",code:"in"},"+44":{name:"United Kingdom",code:"gb"},"+55":{name:"Brazil",code:"br"},"+61":{name:"Australia",code:"au"},"+971":{name:"United Arab Emirates",code:"ae"},"+86":{name:"China",code:"cn"},"+81":{name:"Japan",code:"jp"},"+49":{name:"Germany",code:"de"},"+33":{name:"France",code:"fr"},"+7":{name:"Russia",code:"ru"},"+65":{name:"Singapore",code:"sg"},"+60":{name:"Malaysia",code:"my"},"+66":{name:"Thailand",code:"th"},"+82":{name:"South Korea",code:"kr"},"+39":{name:"Italy",code:"it"},"+34":{name:"Spain",code:"es"},"+31":{name:"Netherlands",code:"nl"},"+32":{name:"Belgium",code:"be"},"+41":{name:"Switzerland",code:"ch"},"+46":{name:"Sweden",code:"se"},"+47":{name:"Norway",code:"no"},"+45":{name:"Denmark",code:"dk"},"+358":{name:"Finland",code:"fi"},"+48":{name:"Poland",code:"pl"},"+351":{name:"Portugal",code:"pt"},"+30":{name:"Greece",code:"gr"},"+27":{name:"South Africa",code:"za"},"+20":{name:"Egypt",code:"eg"},"+52":{name:"Mexico",code:"mx"},"+54":{name:"Argentina",code:"ar"},"+56":{name:"Chile",code:"cl"},"+57":{name:"Colombia",code:"co"},"+51":{name:"Peru",code:"pe"},"+92":{name:"Pakistan",code:"pk"},"+880":{name:"Bangladesh",code:"bd"},"+94":{name:"Sri Lanka",code:"lk"},"+95":{name:"Myanmar",code:"mm"},"+84":{name:"Vietnam",code:"vn"},"+62":{name:"Indonesia",code:"id"},"+63":{name:"Philippines",code:"ph"},"+64":{name:"New Zealand",code:"nz"},"+246":{name:"British Indian Ocean Territory",code:"io"}};if(mt[Be]){Ge(mt[Be].name),se(`https://flagcdn.com/w40/${mt[Be].code}.png`),Qe(!0);return}const bt=new AbortController;try{const Ws=Be.replace("+",""),qs=await fetch(`https://restcountries.com/v3.1/callingcode/${Ws}`,{signal:bt.signal});if(!qs.ok){Ge(""),se(""),Qe(!0);return}const da=await qs.json();if(da&&Array.isArray(da)&&da.length>0){const Ra=da[0];Ge(((ws=Ra.name)==null?void 0:ws.common)||"");const er=((Fs=Ra.cca2)==null?void 0:Fs.toLowerCase())||"";se(er?`https://flagcdn.com/w40/${er}.png`:""),Qe(!0);return}Ge(""),se(""),Qe(!0)}catch(Ws){Ws.name==="AbortError"||Ws instanceof TypeError&&Ws.message.includes("fetch")?(Ge(""),se(""),Qe(!0)):Ws.name!=="AbortError"&&(console.warn("Error fetching country name:",Ws),Ge(""),se(""),Qe(!0));const qs=mt[Be];qs&&(Ge(qs.name),se(`https://flagcdn.com/w40/${qs.code}.png`),Qe(!0))}},ze=(Be,mt)=>{if(!Be)return"";if(!mt)return Be;const bt=mt.replace("+","");let ws=Be;return Be.startsWith(mt)?ws=Be.replace(mt,""):Be.startsWith(bt)&&(ws=Be.replace(bt,"")),`${mt} ${ws}`};y.useEffect(()=>{i!=null&&i.countryCode?(Qe(!1),Ge(""),se(""),ot(i.countryCode)):Qe(!0)},[i==null?void 0:i.countryCode]),y.useEffect(()=>{if(!i)return;const Be=setInterval(()=>{_t()},15e3);return()=>clearInterval(Be)},[i,u.length]);const Ot=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}),_t=async()=>{const Be=u.length===0;Be&&p(!0);try{if(!localStorage.getItem("token")){f([]);return}const bt=await fetch(`${Te}/orders/my-orders?limit=50`,{method:"GET",headers:{...Ot(),"Content-Type":"application/json"}}),ws=await bt.text();if(ws.startsWith("<!DOCTYPE")||ws.startsWith("<html")){console.warn("Server returned HTML instead of JSON"),f([]);return}if(!bt.ok)throw new Error("Failed to fetch orders");const Fs=JSON.parse(ws),Ws=Array.isArray(Fs)?Fs:[],qs={};Ws.forEach(da=>{var Xr,Ei;const Ra=((Xr=da.departmentStatuses)==null?void 0:Xr.length)||0,er=((Ei=da.departmentStatuses)==null?void 0:Ei.filter($n=>(typeof $n=="object"?$n.status:null)==="completed").length)||0,ir=Ra>0?er/Ra*100:0;w[da._id]!==ir&&(qs[da._id]=ir)}),Object.keys(qs).length>0&&k(da=>({...da,...qs})),f(Ws)}catch(mt){console.error("Error fetching orders:",mt),Be&&f([])}finally{Be&&p(!1)}},Dt=Be=>{s(`/order/${Be._id}`),window.scrollTo(0,0)},us=Be=>Be?Be.split(" ").map(mt=>mt[0]).join("").toUpperCase().slice(0,2):"U",Ps=Be=>{const mt=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-orange-500","bg-teal-500"];if(!Be)return mt[0];const bt=Be.length%mt.length;return mt[bt]},Vt=Be=>Be.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Be.trim())?Be.trim()===(i==null?void 0:i.email)?"New email must be different from current email":Be.trim().length>254?"Email is too long (maximum 254 characters)":Be.includes("..")?"Email cannot contain consecutive dots":Be.startsWith(".")||Be.endsWith(".")?"Email cannot start or end with a dot":Be.includes("@.")||Be.includes(".@")?"Invalid email format":null:"Invalid email format. Please enter a valid email address (e.g., user@example.com)":"Email is required",Gs=async()=>{if(!oe.firstName||!oe.lastName){qe("First name and last name are required.");return}if(oe.email&&Vt(oe.email)){qe(Vt(oe.email));return}X(!0),qe(null),Y(null);try{const Be=await fetch(`${Te}/auth/profile`,{method:"PUT",headers:{"Content-Type":"application/json",...Ot()},body:JSON.stringify({firstName:oe.firstName.trim(),lastName:oe.lastName.trim(),email:oe.email.trim()||void 0})}),mt=await Be.json();if(!Be.ok)throw new Error(mt.message||mt.error||"Failed to update profile");Y("Profile updated successfully!");const bt={...i,firstName:mt.user.firstName,lastName:mt.user.lastName,name:mt.user.name,email:mt.user.email,countryCode:mt.user.countryCode};l(bt),localStorage.setItem("user",JSON.stringify(bt)),mt.user.countryCode?ot(mt.user.countryCode):bt.countryCode&&ot(bt.countryCode),setTimeout(()=>{W(!1),Y(null)},2e3)}catch(Be){qe(Be instanceof Error?Be.message:"Failed to update profile")}finally{X(!1)}},Ns=async()=>{const Be=Vt(F);if(Be){V(Be);return}P(!0),V(null),G(null);try{const mt=await fetch(`${Te}/auth/update-email`,{method:"PUT",headers:{"Content-Type":"application/json",...Ot()},body:JSON.stringify({email:F.trim()})}),bt=await mt.json();if(!mt.ok)throw new Error(bt.message||bt.error||"Failed to update email");G("Email updated successfully!");const ws={...i,email:bt.user.email};l(ws),localStorage.setItem("user",JSON.stringify(ws)),setTimeout(()=>{T(!1),L(""),G(null)},2e3)}catch(mt){V(mt instanceof Error?mt.message:"Failed to update email")}finally{P(!1)}};if(d)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading profile..."})]})});if(!i)return null;const wa=()=>{switch(j){case"dashboard":return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Hello, ",(i.name||"User").split(" ")[0],"."]}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Here's what's going on in your account."})]}),e.jsxs("button",{onClick:()=>v("orders"),className:"flex items-center justify-center gap-2 bg-white border border-slate-300 text-slate-700 font-medium px-5 py-2.5 rounded-lg hover:bg-slate-50 hover:border-slate-400 transition-all shadow-sm",children:[e.jsx(Er,{className:"w-4 h-4"}),"View All Orders"]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Account snapshot"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{onClick:()=>v("orders"),className:"bg-slate-100 rounded-xl p-6 min-h-[140px] flex flex-col justify-between hover:bg-slate-200 transition-colors cursor-pointer border border-transparent hover:border-slate-300 group",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 group-hover:text-slate-900",children:"Orders"}),e.jsx("span",{className:"text-4xl font-bold text-slate-900",children:u.length})]}),e.jsxs("div",{className:"bg-slate-100 rounded-xl p-6 min-h-[140px] flex flex-col justify-between hover:bg-slate-200 transition-colors cursor-pointer border border-transparent hover:border-slate-300 group",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 group-hover:text-slate-900",children:"Account Status"}),e.jsxs("span",{className:"text-lg font-bold text-green-600 group-hover:text-green-700 flex items-center gap-1",children:["Active ",e.jsx(ya,{className:"w-5 h-5"})]})]})]}),(()=>{const mt=u.filter(bt=>bt.deliveredAt&&bt.status==="completed").sort((bt,ws)=>new Date(ws.deliveredAt||0).getTime()-new Date(bt.deliveredAt||0).getTime())[0];return mt&&mt.deliveredAt?e.jsxs("div",{className:"mt-6 bg-green-50 rounded-xl p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(xo,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Latest Delivery"})]}),e.jsxs("p",{className:"text-sm text-slate-600 mb-1",children:["Order: ",e.jsx("span",{className:"font-mono font-medium",children:mt.orderNumber})]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Arrived on:"," ",e.jsx("span",{className:"font-semibold text-green-700",children:new Date(mt.deliveredAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})})]})]}):null})()]}),(()=>{var bt,ws;const mt=u.filter(Fs=>Fs.deliveredAt&&Fs.status==="completed").sort((Fs,Ws)=>new Date(Ws.deliveredAt||0).getTime()-new Date(Fs.deliveredAt||0).getTime())[0];return mt?e.jsxs("div",{className:"bg-linear-to-br from-green-50 to-emerald-50 rounded-xl border border-green-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(xo,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Latest Delivery"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Your most recent order delivery"})]})]}),e.jsxs("div",{onClick:()=>Dt(mt),className:"bg-white rounded-lg p-4 border border-green-200 hover:border-green-300 cursor-pointer transition-all group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[((bt=mt.product)==null?void 0:bt.image)&&e.jsx("img",{src:mt.product.image,alt:mt.product.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900",children:((ws=mt.product)==null?void 0:ws.name)||"Product"}),e.jsx("p",{className:"text-xs text-slate-500",children:mt.orderNumber})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Delivered on"}),e.jsx("p",{className:"font-semibold text-green-700",children:new Date(mt.deliveredAt||"").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-green-100",children:[e.jsxs("span",{className:"text-sm text-slate-600",children:[mt.quantity.toLocaleString()," units"]}),e.jsx("span",{className:"text-sm font-bold text-slate-900",children:Ar(mt.totalPrice)})]})]})]}):null})(),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Recent Orders"}),e.jsx("button",{onClick:()=>v("orders"),className:"text-sm font-semibold text-slate-900 underline hover:text-brand-600",children:"View all"})]}),g&&u.length===0?e.jsx("div",{className:"space-y-4",children:[1,2].map(Be=>e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"}),e.jsx("div",{className:"h-5 bg-slate-200 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]}),e.jsxs("div",{className:"w-32 space-y-2",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded"}),e.jsx("div",{className:"h-2 bg-slate-200 rounded"})]})]})},Be))}):u.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(Na,{size:48,className:"mx-auto mb-4 opacity-50 text-slate-400"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"You haven't placed any orders yet."}),e.jsx(ks,{to:"/digital-print",className:"inline-block bg-brand-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-brand-700 transition-colors",children:"Browse Products"})]}):e.jsx(bj,{orders:u.slice(0,2),onSelectOrder:Dt})]})]});case"orders":return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Order History"}),e.jsx("button",{onClick:()=>v("dashboard"),className:"text-sm font-semibold text-slate-600 hover:text-brand-600",children:" Back to Dashboard"})]}),g&&u.length===0?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(Be=>e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"}),e.jsx("div",{className:"h-5 bg-slate-200 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]}),e.jsxs("div",{className:"w-32 space-y-2",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded"}),e.jsx("div",{className:"h-2 bg-slate-200 rounded"})]})]})},Be))}):u.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(Na,{size:48,className:"mx-auto mb-4 opacity-50 text-slate-400"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"You haven't placed any orders yet."}),e.jsx(ks,{to:"/digital-print",className:"inline-block bg-brand-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-brand-700 transition-colors",children:"Browse Products"})]}):e.jsx(bj,{orders:u,onSelectOrder:Dt})]});default:return null}};return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[e.jsx(at.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:200},className:`w-24 h-24 sm:w-28 sm:h-28 rounded-full ${Ps(i.name)} flex items-center justify-center text-white text-3xl sm:text-4xl font-bold shadow-lg ring-4 ring-white`,children:us(i.name)}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap justify-center sm:justify-start",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:i.name}),(i.userType==="print partner"||i.userType==="Print Partner")&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 border border-blue-200",children:"Print Partner"}),i.userType==="corporate"&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800 border border-purple-200",children:"Corporate"}),i.approvalStatus&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${i.approvalStatus==="approved"?"bg-green-50 text-green-700 border border-green-200":i.approvalStatus==="rejected"?"bg-red-50 text-red-700 border border-red-200":"bg-yellow-50 text-yellow-700 border border-yellow-200"}`,children:i.approvalStatus==="approved"?" Verified":i.approvalStatus==="rejected"?"Rejected":"Pending Verification"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[e.jsx(po,{size:16,className:"text-slate-400 shrink-0 mt-1 sm:mt-0"}),E?e.jsxs("div",{className:"flex-1 w-full flex flex-col sm:flex-row items-stretch sm:items-center gap-2 min-w-0",children:[e.jsx("input",{type:"email",value:F,onChange:Be=>{const mt=Be.target.value;if(L(mt),G(null),mt.trim()&&mt.trim()!==(i==null?void 0:i.email)){const bt=Vt(mt);V(bt)}else V(null)},onBlur:Be=>{const mt=Be.target.value;if(mt.trim()){const bt=Vt(mt);V(bt)}else V(null)},onKeyDown:Be=>{if(Be.key==="Enter"){Be.preventDefault();const mt=Vt(F);mt?V(mt):Ns()}else Be.key==="Escape"&&(T(!1),L(""),V(null),G(null))},className:`flex-1 w-full sm:min-w-[200px] px-3 py-1.5 border rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm transition-colors ${M?"border-red-300 bg-red-50 focus:ring-red-500 focus:border-red-500":F.trim()&&F.trim()!==(i==null?void 0:i.email)&&!Vt(F)?"border-green-300 bg-green-50":"border-slate-300"}`,placeholder:"Enter new email",autoFocus:!0}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0 w-full sm:w-auto",children:[e.jsx("button",{type:"button",onClick:()=>{const Be=Vt(F);Be?V(Be):Ns()},disabled:z||!F.trim()||!!Vt(F),className:"flex-1 sm:flex-initial px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1.5 text-sm whitespace-nowrap",children:z?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:14}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ya,{size:14}),"Save"]})}),e.jsxs("button",{type:"button",onClick:()=>{T(!1),L(""),V(null),G(null)},disabled:z,className:"flex-1 sm:flex-initial px-3 py-1.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 flex items-center justify-center gap-1.5 text-sm whitespace-nowrap",children:[e.jsx(ns,{size:14}),"Cancel"]})]})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-slate-600",children:i.email})})]}),E&&e.jsxs("div",{className:"ml-7 mt-1 space-y-1",children:[M&&e.jsxs("p",{className:"text-xs text-red-600 flex items-start gap-1.5",children:[e.jsx(Ts,{size:12,className:"mt-0.5 shrink-0"}),e.jsx("span",{children:M})]}),le&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1.5",children:[e.jsx(ya,{size:12}),le]}),!M&&!le&&F.trim()&&F.trim()!==(i==null?void 0:i.email)&&!Vt(F)&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1.5",children:[e.jsx(ya,{size:12}),"Email is valid. Press Enter to save or Escape to cancel."]}),!M&&!le&&!F.trim()&&e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1.5",children:[e.jsx(gr,{size:12}),"Enter a new email address"]})]})]}),(i.firstName||i.lastName||i.mobileNumber)&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Customer Details"}),!J&&e.jsx("button",{type:"button",onClick:()=>{var Be;W(!0),ce({firstName:i.firstName||"",lastName:i.lastName||"",email:i.email||"",mobileNumber:((Be=i.mobileNumber)==null?void 0:Be.replace(i.countryCode||"",""))||"",countryCode:i.countryCode||"+91"}),qe(null),Y(null)},className:"p-1.5 text-slate-400 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors shrink-0",title:"Edit profile",children:e.jsx(Dn,{size:14})})]}),J?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:oe.firstName,onChange:Be=>ce({...oe,firstName:Be.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm",placeholder:"Enter first name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:oe.lastName,onChange:Be=>ce({...oe,lastName:Be.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm",placeholder:"Enter last name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:oe.email,onChange:Be=>ce({...oe,email:Be.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm",placeholder:"Enter email"})]}),i.mobileNumber&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Mobile Number (Cannot be changed)"}),e.jsx("input",{type:"text",value:ze(i.mobileNumber,i.countryCode),disabled:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-100 text-slate-500 text-sm cursor-not-allowed"})]}),pe&&e.jsxs("p",{className:"text-xs text-red-600 flex items-start gap-1.5",children:[e.jsx(Ts,{size:12,className:"mt-0.5 shrink-0"}),e.jsx("span",{children:pe})]}),R&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1.5",children:[e.jsx(ya,{size:12}),R]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:Gs,disabled:_,className:"flex-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1.5 text-sm",children:_?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:14}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ya,{size:14}),"Save Changes"]})}),e.jsx("button",{type:"button",onClick:()=>{W(!1),qe(null),Y(null)},disabled:_,className:"px-3 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-3",children:[i.firstName&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(ei,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"First Name:"})," ",i.firstName]})]}),i.lastName&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(ei,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Last Name:"})," ",i.lastName]})]}),i.mobileNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(xm,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Mobile:"})," ",ze(i.mobileNumber,i.countryCode)]})]}),i.countryCode&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[ue?e.jsx("img",{src:ue,alt:Ce||"Country flag",className:"w-6 h-4 object-cover rounded shrink-0",onError:Be=>{const mt=Be.target;mt.style.display="none"}}):e.jsx(ti,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Country:"})," ",Ie?Ce||i.countryCode||"Unknown":"Loading..."]})]})]})]}),(i.userType==="print partner"||i.userType==="Print Partner")&&i.profile&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Print Partner Details"}),i.profile.verificationStatus&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${i.profile.verificationStatus==="APPROVED"?"bg-green-100 text-green-800":i.profile.verificationStatus==="REJECTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:i.profile.verificationStatus})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Rn,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Business Name:"})," ",i.profile.businessName||"Not provided"]})]}),i.profile.ownerName&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(ei,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Owner Name:"})," ",i.profile.ownerName]})]}),i.profile.gstNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Kr,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"GST Number:"})," ",i.profile.gstNumber]})]}),i.profile.address&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(ti,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",[(fe=i.profile.address)==null?void 0:fe.fullAddress,(gt=i.profile.address)==null?void 0:gt.city,(kt=i.profile.address)==null?void 0:kt.state,(cs=i.profile.address)==null?void 0:cs.pincode].filter(Boolean).join(", ")||"Not provided"]})]}),i.profile.whatsappNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(xm,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"WhatsApp:"})," ",i.profile.whatsappNumber]})]}),i.profile.proofDocument&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(vi,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-slate-600",children:e.jsx("span",{className:"font-medium",children:"Proof Document:"})}),e.jsxs("a",{href:i.profile.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm flex items-center gap-1",children:[e.jsx(kr,{size:14}),"View Proof Document"]})]})]})]})]}),i.userType==="corporate"&&i.profile&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Corporate Details"}),i.profile.verificationStatus&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${i.profile.verificationStatus==="APPROVED"?"bg-green-100 text-green-800":i.profile.verificationStatus==="REJECTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:i.profile.verificationStatus})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Rn,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Organization:"})," ",i.profile.organizationName||"Not provided"]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Kr,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",((hs=i.profile.organizationType)==null?void 0:hs.replace(/_/g," "))||"Not provided"]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(ei,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Authorized Person:"})," ",i.profile.authorizedPersonName||"Not provided",i.profile.designation&&e.jsxs("span",{className:"text-slate-500",children:[" (",(ht=i.profile.designation)==null?void 0:ht.replace(/_/g," "),")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Kr,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"GST Number:"})," ",i.profile.gstNumber||"Not provided"]})]}),i.profile.address&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(ti,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",[(Qt=i.profile.address)==null?void 0:Qt.fullAddress,(Vs=i.profile.address)==null?void 0:Vs.city,(rs=i.profile.address)==null?void 0:rs.state,(Bs=i.profile.address)==null?void 0:Bs.pincode].filter(Boolean).join(", ")||"Not provided"]})]}),i.profile.whatsappNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(xm,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"WhatsApp:"})," ",i.profile.whatsappNumber]})]}),i.profile.proofDocument&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(vi,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-slate-600",children:e.jsx("span",{className:"font-medium",children:"Proof Document:"})}),e.jsxs("a",{href:i.profile.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm flex items-center gap-1",children:[e.jsx(kr,{size:14}),"View Proof Document"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(_m,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-slate-600 capitalize",children:i.role})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Dd,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:["Member since"," ",r?new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}):"Loading..."]})]})]})]})]})}),wa()]})})},pT=({event:s,isLast:r,isActive:i})=>{const l=s.status==="completed";s.status;const[d,m]=y.useState(!1),u=g=>g?new Date(g).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",f=s.startedAt||s.completedAt||s.timestamp;return e.jsxs("div",{className:`flex-1 relative ${r?"":"mb-8 md:mb-0"}`,children:[!r&&e.jsx("div",{className:`absolute left-3.5 top-8 w-0.5 h-[calc(100%-2rem)] md:w-[calc(100%-2rem)] md:h-0.5 md:left-8 md:top-3.5 ${l?"bg-green-500":"bg-slate-200"}`}),e.jsxs("div",{className:"flex md:flex-col items-center gap-4 md:gap-2",children:[e.jsxs("div",{className:`relative z-10 w-7 h-7 rounded-full flex items-center justify-center border-2 transition-all duration-300 cursor-pointer ${l?"bg-green-500 border-green-500 text-white":i?"bg-white border-orange-500 text-orange-500 shadow-[0_0_0_4px_rgba(249,115,22,0.2)]":"bg-white border-slate-300 text-slate-300"}`,onMouseEnter:()=>f&&m(!0),onMouseLeave:()=>m(!1),children:[l?e.jsx(_n,{className:"w-4 h-4"}):i?e.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-pulse"}):e.jsx(m4,{className:"w-4 h-4"}),d&&f&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-slate-900 text-white text-xs rounded-lg shadow-lg z-50 whitespace-nowrap",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[s.startedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Started:"})," ",e.jsx("span",{children:u(s.startedAt)})]}),s.completedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Completed:"})," ",e.jsx("span",{children:u(s.completedAt)})]}),!s.startedAt&&!s.completedAt&&s.timestamp&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Date:"})," ",e.jsx("span",{children:u(s.timestamp)})]}),i&&!s.completedAt&&e.jsx("div",{className:"text-orange-300 mt-1",children:"In Progress"})]}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:e.jsx("div",{className:"border-4 border-transparent border-t-slate-900"})})]})]}),e.jsxs("div",{className:"md:text-center",children:[e.jsx("p",{className:`text-sm font-semibold ${i?"text-orange-600":l?"text-slate-900":"text-slate-400"}`,children:s.stage}),s.timestamp&&e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:new Date(s.timestamp).toLocaleDateString()}),i&&e.jsx("span",{className:"inline-block mt-1 text-[10px] uppercase tracking-wider font-bold text-orange-600 animate-pulse",children:"In Progress"})]})]})]})},fT=({status:s})=>{const r=d=>d.includes("Prepress")?e.jsx(Jj,{className:"w-3 h-3"}):d.includes("Print")?e.jsx(tv,{className:"w-3 h-3"}):d.includes("Cut")?e.jsx(x5,{className:"w-3 h-3"}):d.includes("Plate")?e.jsx(ev,{className:"w-3 h-3"}):e.jsx(Wj,{className:"w-3 h-3"}),i=s.status==="completed",l=s.status==="in_progress";return e.jsxs("div",{className:`shrink-0 flex items-center gap-2 px-3 py-2 rounded-lg border transition-all duration-300 ${i?"bg-green-50 border-green-200":l?"bg-white border-orange-400 shadow-sm ring-1 ring-orange-100":"bg-slate-50 border-slate-200 opacity-60"}`,children:[e.jsx("div",{className:`p-1.5 rounded-full ${i?"bg-green-100 text-green-700":l?"bg-orange-100 text-orange-700":"bg-slate-200 text-slate-500"}`,children:r(s.departmentName)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`text-xs font-semibold ${i?"text-green-900":l?"text-orange-900":"text-slate-500"}`,children:s.departmentName}),l&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 animate-pulse"})]}),e.jsx("p",{className:"text-[10px] text-slate-500",children:s.completedAt?new Date(s.completedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s.startedAt?"Started "+new Date(s.startedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Pending"})]})]})},hT=({order:s})=>{var f;const[r,i]=y.useState(null),[l,d]=y.useState(null),[m,u]=y.useState(!1);return y.useEffect(()=>{(async()=>{var p;if((p=s==null?void 0:s.product)!=null&&p._id){u(!0);try{const j=localStorage.getItem("token"),v=await fetch(`${Te}/products/${s.product._id}/detail`,{headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});if(v.ok){const w=await v.json();d({subAttributes:w.subAttributes||{}})}}catch(j){console.error("Error fetching product details:",j)}finally{u(!1)}}})()},[(f=s==null?void 0:s.product)==null?void 0:f._id]),s.product?e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>i(null),children:e.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",children:[e.jsx("button",{onClick:()=>i(null),className:"absolute -top-10 right-0 text-white hover:text-slate-300 transition-colors",children:e.jsx("span",{className:"text-2xl font-bold",children:""})}),e.jsx("img",{src:r.src,alt:r.alt,className:"w-full h-full object-contain rounded-lg"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-slate-100 pb-4",children:[e.jsx(Na,{className:"w-5 h-5 text-brand-600"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Product Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-2",children:"Shape"}),e.jsx("p",{className:"text-slate-900 font-semibold text-lg",children:s.shape})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-2",children:"Finish"}),e.jsx("p",{className:"text-slate-900 font-semibold text-lg",children:s.finish})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-base font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(_n,{className:"w-4 h-4 text-brand-600"}),"Selected Options"]}),s.selectedOptions&&s.selectedOptions.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.selectedOptions.map((g,p)=>{var k;const j=g.optionName||g.name||"Option",v=g.priceAdd||0;let w=g.description;if(!w&&((k=s.product)!=null&&k.options)&&g.optionId){const E=s.product.options.find(T=>T._id===g.optionId||T.name===j);w=E==null?void 0:E.description}return e.jsx("div",{className:"group relative bg-gradient-to-br from-white to-slate-50 rounded-xl border border-slate-200 hover:border-brand-300 hover:shadow-md transition-all duration-300 overflow-hidden",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[g.image?e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:g.image,alt:j,className:"w-20 h-20 object-cover rounded-lg border-2 border-slate-200 group-hover:border-brand-400 transition-colors cursor-pointer shadow-sm",onClick:()=>i({src:g.image,alt:j})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors cursor-pointer"})]}):e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gradient-to-br from-brand-100 to-brand-200 text-brand-700 flex items-center justify-center border-2 border-brand-200",children:e.jsx(_n,{className:"w-8 h-8"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:j}),w&&e.jsx("p",{className:"text-xs text-slate-600 leading-relaxed mb-2",children:w}),v>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200",children:e.jsxs("span",{className:"text-sm font-bold text-brand-600",children:["+",aa(v),v<10&&e.jsx("span",{className:"text-xs text-slate-500 font-normal ml-1",children:"/unit"})]})})]})]})})},p)})}):e.jsx("div",{className:"text-sm text-slate-500 italic p-4 bg-slate-50 rounded-lg border border-dashed border-slate-200 text-center",children:"No additional options configured."})]}),s.selectedDynamicAttributes&&s.selectedDynamicAttributes.length>0&&e.jsxs("div",{className:"pt-6 border-t border-slate-200",children:[e.jsxs("h4",{className:"text-base font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(gr,{className:"w-4 h-4 text-brand-600"}),"Selected Attributes"]}),e.jsx("div",{className:"space-y-4",children:s.selectedDynamicAttributes.map((g,p)=>{var w,k;const j=`${g.attributeTypeId}:${g.attributeValue}`,v=((w=l==null?void 0:l.subAttributes)==null?void 0:w[j])||[];return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"group relative bg-gradient-to-br from-white to-slate-50 rounded-xl border border-slate-200 hover:border-brand-300 hover:shadow-md transition-all duration-300 overflow-hidden",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[g.image?e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:g.image,alt:g.attributeName,className:"w-20 h-20 object-cover rounded-lg border-2 border-slate-200 group-hover:border-brand-400 transition-colors cursor-pointer shadow-sm",onClick:()=>i({src:g.image,alt:`${g.attributeName} - ${g.label}`})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors cursor-pointer"})]}):e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gradient-to-br from-slate-100 to-slate-200 text-slate-600 flex items-center justify-center border-2 border-slate-200",children:e.jsx(gr,{className:"w-8 h-8"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-1",children:g.attributeName}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-1",children:g.label}),g.description&&e.jsx("p",{className:"text-xs text-slate-600 leading-relaxed mb-2",children:g.description}),(g.priceAdd>0||g.priceMultiplier)&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200",children:g.priceAdd>0?e.jsxs("span",{className:"text-sm font-bold text-brand-600",children:["+",aa(g.priceAdd),e.jsx("span",{className:"text-xs text-slate-500 font-normal ml-1",children:"/unit"})]}):g.priceMultiplier&&g.priceMultiplier!==1?e.jsxs("span",{className:"text-sm font-bold text-brand-600",children:["+",aa((((k=s.product)==null?void 0:k.basePrice)||0)*(g.priceMultiplier-1)),e.jsx("span",{className:"text-xs text-slate-500 font-normal ml-1",children:"/unit"})]}):null}),g.uploadedImages&&g.uploadedImages.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-2",children:"Uploaded Images"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:g.uploadedImages.map((E,T)=>{let F="";return E.data&&(typeof E.data=="string"?F=`data:${E.contentType||"image/jpeg"};base64,${E.data}`:Buffer.isBuffer(E.data)&&(F=`data:${E.contentType||"image/jpeg"};base64,${E.data.toString("base64")}`)),F?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:F,alt:E.filename||`Image ${T+1}`,className:"w-full h-24 object-cover rounded-lg border border-slate-200 cursor-pointer hover:border-brand-400 transition-colors",onClick:()=>i({src:F,alt:E.filename||`Image ${T+1}`})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 truncate",children:E.filename})]},T):null})})]})]})]})})}),v.length>0&&e.jsxs("div",{className:"ml-6 pl-4 border-l-2 border-brand-200 space-y-2",children:[e.jsxs("p",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-2",children:[g.label," Options"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:v.map(E=>e.jsx("div",{className:"group relative bg-gradient-to-br from-brand-50/50 to-white rounded-lg border border-brand-100 hover:border-brand-300 hover:shadow-sm transition-all duration-200 overflow-hidden",children:e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[E.image?e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:E.image,alt:E.label,className:"w-16 h-16 object-cover rounded-lg border-2 border-brand-200 group-hover:border-brand-400 transition-colors cursor-pointer shadow-sm",onClick:()=>i({src:E.image,alt:`${g.attributeName} - ${E.label}`})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors cursor-pointer"})]}):e.jsx("div",{className:"w-16 h-16 rounded-lg bg-gradient-to-br from-brand-100 to-brand-200 text-brand-600 flex items-center justify-center border-2 border-brand-200",children:e.jsx(gr,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-900 mb-1",children:E.label}),E.priceAdd&&E.priceAdd>0&&e.jsxs("p",{className:"text-xs font-bold text-brand-600",children:["+",aa(E.priceAdd),e.jsx("span",{className:"text-[10px] text-slate-500 font-normal ml-1",children:"/piece"})]})]})]})})},E._id))})]})]},p)})})]})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-slate-100 pb-4",children:[e.jsx(Na,{className:"w-5 h-5 text-brand-600"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Product Configuration"})]}),e.jsx("p",{className:"text-slate-600",children:"Product information not available."})]})},xT=({order:s})=>{var j,v,w,k,E,T,F,L,M,V,le,G;if(!s.product)return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Price Breakdown"}),e.jsx("p",{className:"text-slate-600",children:"Product information not available."})]});const r={quantity:s.quantity,product:{basePrice:((j=s.product)==null?void 0:j.basePrice)||0,gstPercentage:((v=s.product)==null?void 0:v.gstPercentage)||18,options:((w=s.product)==null?void 0:w.options)||[],filters:((k=s.product)==null?void 0:k.filters)||{},quantityDiscounts:((E=s.product)==null?void 0:E.quantityDiscounts)||[]},finish:s.finish,shape:s.shape,selectedOptions:(s.selectedOptions||[]).map(z=>({name:z.optionName||z.name,optionName:z.optionName||z.name,priceAdd:z.priceAdd||0})),selectedDynamicAttributes:(T=s.selectedDynamicAttributes)==null?void 0:T.map(z=>({attributeName:z.attributeName,label:z.label,priceMultiplier:z.priceMultiplier,priceAdd:z.priceAdd}))},i=vx(r),l=((F=s.product)==null?void 0:F.additionalDesignCharge)||0,d=i.subtotalBeforeGst||i.rawBaseTotal+i.optionBreakdowns.reduce((z,P)=>z+P.cost,0),m=i.subtotalAfterDiscount||i.subtotal||d,u=i.discountAmount||d-m,f=m+l,g=f*(((L=s.product)==null?void 0:L.gstPercentage)||18)/100,p=s.totalPrice;return(M=s.product)!=null&&M.subcategory&&typeof s.product.subcategory=="object"?s.product.subcategory.name:(V=s.product)!=null&&V.subcategory,e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Price Breakdown"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-slate-100",children:[e.jsx("div",{className:"text-slate-600",children:e.jsxs("span",{children:["Base Price (",s.quantity.toLocaleString()," "," ",aa(((le=s.product)==null?void 0:le.basePrice)||0),")"]})}),e.jsx("span",{className:"font-medium text-slate-900",children:aa(i.rawBaseTotal)})]}),i.optionBreakdowns.map((z,P)=>e.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[e.jsxs("span",{children:[z.name," ",z.isPerUnit?`(${s.quantity}  ${aa(z.priceAdd)})`:""]}),e.jsxs("span",{children:["+",aa(z.cost)]})]},P)),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (Before Discount)"}),e.jsx("span",{children:aa(d)})]}),i.discountPercentage>0&&u>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-600 bg-green-50 p-2 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold",children:["Bulk Discount (",i.discountPercentage,"%)"]}),e.jsxs("p",{className:"text-xs opacity-80",children:["Applied for ",s.quantity," units"]})]}),e.jsxs("span",{className:"font-bold",children:["-",aa(u)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (After Discount)"}),e.jsx("span",{children:aa(m)})]}),l>0&&e.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[e.jsx("span",{children:"Additional Design Charge"}),e.jsxs("span",{children:["+",aa(l)]})]}),l>0&&e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (Including Design Charge)"}),e.jsx("span",{children:aa(f)})]}),e.jsxs("div",{className:"flex justify-between items-center text-slate-500 text-xs",children:[e.jsxs("span",{children:["GST (",((G=s.product)==null?void 0:G.gstPercentage)||18,"%)"]}),e.jsxs("span",{children:["+",aa(g)]})]}),s.advancePaid!==void 0&&s.advancePaid>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-slate-500",children:"Advance Paid"}),e.jsx("span",{className:"font-medium text-green-600",children:aa(s.advancePaid||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500",children:"Balance Due"}),e.jsx("span",{className:`font-bold ${s.totalPrice-(s.advancePaid||0)>0?"text-red-600":"text-slate-400"}`,children:aa(s.totalPrice-(s.advancePaid||0))})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t-2 border-slate-300",children:[e.jsx("span",{className:"text-lg font-bold text-slate-900",children:"Total Amount"}),e.jsx("span",{className:"text-xl font-bold text-brand-600",children:aa(p)})]})]})]})},gT=({order:s})=>{var i,l,d;const r=[];return(i=s.uploadedDesign)!=null&&i.frontImage&&r.push({type:"front",fileName:s.uploadedDesign.frontImage.filename||"front-design.png",uploadedAt:s.createdAt,sizeMb:0,data:s.uploadedDesign.frontImage.data}),(l=s.uploadedDesign)!=null&&l.backImage&&r.push({type:"back",fileName:s.uploadedDesign.backImage.filename||"back-design.png",uploadedAt:s.createdAt,sizeMb:0,data:s.uploadedDesign.backImage.data}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Design Files (CMYK Format)"}),e.jsxs("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-md",children:["Max ",((d=s.product)==null?void 0:d.maxFileSizeMB)||10,"MB"]})]}),r.length>0?e.jsx("div",{className:"space-y-4 mb-6",children:r.map((m,u)=>e.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50 group hover:border-brand-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded flex items-center justify-center text-slate-400 border border-slate-200",children:e.jsx(Jj,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:m.fileName}),e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:[e.jsx("span",{className:"uppercase bg-slate-200 px-1.5 py-0.5 rounded text-[10px] font-medium",children:m.type}),e.jsx("span",{children:"CMYK JPEG"}),m.sizeMb>0&&`  ${m.sizeMb} MB`,`  ${new Date(m.uploadedAt).toLocaleDateString()}`]})]})]}),m.data&&e.jsx("a",{href:m.data,download:m.fileName,className:"text-slate-400 hover:text-brand-600 p-2 rounded-lg hover:bg-white transition-colors",title:"Download image",children:e.jsx(Ki,{className:"w-4 h-4"})})]}),m.data&&e.jsx("div",{className:"mt-3 border border-slate-200 rounded-lg overflow-hidden bg-white",children:e.jsx("img",{src:m.data,alt:`${m.type} design preview`,className:"w-full h-auto max-h-64 object-contain",onError:f=>{f.currentTarget.style.display="none"}})})]},u))}):e.jsxs("div",{className:"bg-amber-50 text-amber-800 p-3 rounded-lg text-sm mb-4 flex gap-2",children:[e.jsx(uc,{className:"w-4 h-4 shrink-0 mt-0.5"}),e.jsx("p",{children:"No files uploaded yet."})]})]})},yj=()=>{var E;const{orderId:s}=_h(),r=nr(),[i,l]=y.useState(null),[d,m]=y.useState(!0),[u,f]=y.useState(null);y.useEffect(()=>{(async()=>{if(!s){f("Order ID is required"),m(!1);return}try{const F=localStorage.getItem("token");if(!F){r("/login");return}const L=await fetch(`${Te}/orders/${s}`,{headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"}});if(!L.ok)throw new Error("Failed to fetch order details");const M=await L.json();l(M)}catch(F){f(F instanceof Error?F.message:"Failed to load order details")}finally{m(!1)}})()},[s,r]);const g=()=>{var z,P,J,W;if(!i)return[];const T=()=>{var ce;const oe=(ce=i.departmentStatuses)==null?void 0:ce.find(pe=>{const qe=typeof pe=="object"?pe.status:null;return qe==="in_progress"||qe==="completed"});return typeof oe=="object"?oe.startedAt:void 0},F=()=>{var pe;const oe=(pe=i.departmentStatuses)==null?void 0:pe.filter(qe=>(typeof qe=="object"?qe.status:null)==="completed");if(!oe||oe.length===0)return;const ce=oe.reduce((qe,R)=>{const Y=typeof R=="object"?R:null,_=typeof qe=="object"?qe:null;return Y!=null&&Y.completedAt?_!=null&&_.completedAt?new Date(Y.completedAt)>new Date(_.completedAt)?R:qe:R:qe});return typeof ce=="object"?ce.completedAt:void 0},L=[{stage:"Order Placed",status:"completed",timestamp:i.createdAt,startedAt:i.createdAt,completedAt:i.createdAt}],M=(z=i.uploadedDesign)!=null&&z.frontImage||(P=i.uploadedDesign)!=null&&P.backImage?i.createdAt:void 0;if(M?L.push({stage:"Design & File Prep",status:"completed",timestamp:M,startedAt:i.createdAt,completedAt:M}):L.push({stage:"Design & File Prep",status:"pending"}),(J=i.departmentStatuses)==null?void 0:J.some(oe=>{const ce=typeof oe=="object"?oe.status:null;return ce==="in_progress"||ce==="completed"})){const oe=(W=i.departmentStatuses)==null?void 0:W.every(ce=>(typeof ce=="object"?ce.status:null)==="completed");L.push({stage:"Production",status:oe?"completed":"in_progress",timestamp:T(),startedAt:T(),completedAt:oe?F():void 0})}else L.push({stage:"Production",status:"pending"});const le=i.packedAt||(i.status==="completed"?i.updatedAt:void 0);le?L.push({stage:"Packing",status:"completed",timestamp:le,startedAt:i.movedToPackingAt||le,completedAt:le}):L.push({stage:"Packing",status:"pending"});const G=i.dispatchedAt||i.handedOverToCourierAt;return i.courierPartner||i.trackingId||G?L.push({stage:"Courier",status:"completed",timestamp:G||i.updatedAt,startedAt:G||i.handedOverToCourierAt||i.updatedAt,completedAt:i.deliveredAt||void 0}):L.push({stage:"Courier",status:"pending"}),L},p=()=>i!=null&&i.departmentStatuses?i.departmentStatuses.map(T=>{const F=typeof T.department=="object"?T.department:null,L=typeof T=="object"?T.status:"pending";return{departmentName:(F==null?void 0:F.name)||"Unknown",status:L,startedAt:typeof T=="object"&&T.startedAt||void 0,completedAt:typeof T=="object"&&T.completedAt||void 0}}).sort((T,F)=>{var G,z;const L=(G=i.departmentStatuses)==null?void 0:G.find(P=>{const J=typeof P.department=="object"?P.department:null;return(J==null?void 0:J.name)===T.departmentName}),M=(z=i.departmentStatuses)==null?void 0:z.find(P=>{const J=typeof P.department=="object"?P.department:null;return(J==null?void 0:J.name)===F.departmentName}),V=typeof(L==null?void 0:L.department)=="object"?L.department.sequence:0,le=typeof(M==null?void 0:M.department)=="object"?M.department.sequence:0;return V-le}):[];if(d)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading order details..."})]})});if(u||!i)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(uc,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-900 font-semibold mb-2",children:"Error loading order"}),e.jsx("p",{className:"text-slate-600 mb-4",children:u||"Order not found"}),e.jsx("button",{onClick:()=>r("/profile"),className:"px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors",children:"Back to Profile"})]})});if(!i.product)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(uc,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-900 font-semibold mb-2",children:"Product information missing"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"This order is missing product details. Please contact support."}),e.jsx("button",{onClick:()=>r("/profile"),className:"px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors",children:"Back to Profile"})]})});const j=i.paymentStatus!=="completed",v=g(),w=p(),k=typeof i.product.subcategory=="object"&&i.product.subcategory!==null?i.product.subcategory.name:i.product.subcategory||"N/A";return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Or,{fallbackPath:"/profile",label:"Back to Orders"})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6",children:[e.jsxs("div",{className:"flex items-start gap-5",children:[(()=>{var L,M;const T=(L=i.product)==null?void 0:L.subcategory,F=typeof T=="object"?T==null?void 0:T.image:null;return F?e.jsx("img",{src:F,alt:"Subcategory",className:"hidden md:block w-24 h-24 object-cover rounded-lg shadow-sm border border-slate-100"}):(M=i.product)!=null&&M.image?e.jsx("img",{src:i.product.image,alt:i.product.name,className:"hidden md:block w-24 h-24 object-cover rounded-lg shadow-sm border border-slate-100"}):null})(),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:i.orderNumber}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${i.status==="completed"?"bg-green-100 text-green-700":i.status==="processing"?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-600"}`,children:i.status.replace("_"," ")})]}),e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600 mb-1",children:(()=>{var F;const T=(F=i.product)==null?void 0:F.subcategory;return T&&typeof T=="object"&&(T!=null&&T.category)&&typeof T.category=="object"?`${T.category.name}  ${String(T.name||"")}`:String(T&&typeof T=="object"?T.name||"N/A":k||"N/A")})()}),e.jsx("p",{className:"text-slate-600 font-medium",children:((E=i.product)==null?void 0:E.name)||"Product"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pn,{className:"w-4 h-4"})," Est. Delivery:"," ",i.deliveryDate?new Date(i.deliveryDate).toLocaleDateString():"Not set"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Na,{className:"w-4 h-4"})," ",i.quantity.toLocaleString()," units"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 md:self-start",children:[i.paymentGatewayInvoiceId&&e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 transition-colors",children:[e.jsx(Ki,{className:"w-4 h-4"})," Invoice"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-slate-50 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 transition-colors",children:[e.jsx(Zj,{className:"w-4 h-4"})," Support"]})]})]})}),j?e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-2xl p-8 text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx($l,{className:"w-8 h-8"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Payment Required"}),e.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:"Your order has been created but production will not start until payment is confirmed."}),e.jsxs("button",{className:"bg-brand-600 hover:bg-brand-700 border-brown-200 border px-8 py-3 rounded-xl font-semibold shadow-lg shadow-brand-500/20 transition-all",children:["Pay ",aa(i.totalPrice)," Now"]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8 mb-6 overflow-hidden",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-400 mb-8",children:"Order Status"}),e.jsx("div",{className:"flex flex-col md:flex-row justify-between relative",children:v.map((T,F)=>e.jsx(pT,{event:T,isLast:F===v.length-1,isActive:T.status==="in_progress"},F))}),w.length>0&&e.jsxs("div",{className:"mt-10 pt-8 border-t border-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Production Sequence"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Live Updates"})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide",children:w.map((T,F)=>e.jsxs(Pr.Fragment,{children:[e.jsx(fT,{status:T}),F<w.length-1&&e.jsx("div",{className:"w-8 h-0.5 bg-slate-200 shrink-0 self-center"})]},F))})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(hT,{order:i}),e.jsx(gT,{order:i}),i.shippingAddress&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ti,{className:"w-5 h-5 text-brand-600"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delivery Location"})]}),e.jsxs("div",{className:"pl-8",children:[e.jsx("p",{className:"text-slate-900 font-medium",children:i.shippingAddress.street}),e.jsxs("p",{className:"text-slate-600",children:[i.shippingAddress.city,", ",i.shippingAddress.state," ",i.shippingAddress.zipCode]}),e.jsx("p",{className:"text-slate-600",children:i.shippingAddress.country})]})]}),i.status==="completed"&&(i.courierPartner||i.trackingId)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(xo,{className:"w-5 h-5 text-brand-600"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Tracking Information"})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Tracking Number:"," ",e.jsx("span",{className:"font-mono text-slate-900",children:i.trackingId||"TRK-99887766"})]}),i.courierPartner&&e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Courier: ",e.jsx("span",{className:"font-medium",children:i.courierPartner})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(xT,{order:i})})]})]})})},bT=()=>{var L;const s=nr(),[r,i]=y.useState([]),[l,d]=y.useState(null),[m,u]=y.useState(null),[f,g]=y.useState(!0),[p,j]=y.useState(null),[v,w]=y.useState(1);y.useEffect(()=>{k(v)},[v]);const k=async M=>{try{g(!0),j(null);const V=localStorage.getItem("token");if(!V){s("/login");return}const le=await fetch(`${Te}/timeline/my-orders?page=${M}&limit=20`,{headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"}});if(!le.ok){if(le.status===401){localStorage.removeItem("token"),s("/login");return}throw new Error("Failed to fetch orders")}const G=await le.json();i(G.orders||[]),d(G.latestOrder||null),u(G.pagination||null)}catch(V){j(V instanceof Error?V.message:"Failed to load orders")}finally{g(!1)}},E=M=>{switch(M.toLowerCase()){case"completed":return"bg-green-100 text-green-700 border-green-200";case"processing":case"production_ready":case"approved":return"bg-blue-100 text-blue-700 border-blue-200";case"request":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"cancelled":case"rejected":return"bg-red-100 text-red-700 border-red-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},T=M=>{switch(M.toLowerCase()){case"completed":return e.jsx(_n,{className:"w-4 h-4"});case"processing":case"production_ready":case"approved":return e.jsx(Kt,{className:"w-4 h-4 animate-spin"});case"request":return e.jsx(pn,{className:"w-4 h-4"});case"cancelled":case"rejected":return e.jsx(Ts,{className:"w-4 h-4"});default:return e.jsx(Na,{className:"w-4 h-4"})}},F=M=>{try{return new Date(M).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid date"}};return f&&r.length===0?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Kt,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading your orders..."})]})}):p?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(Ts,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Error Loading Orders"}),e.jsx("p",{className:"text-slate-600 mb-4",children:p}),e.jsx("button",{onClick:()=>k(v),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"My Orders"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Track and manage all your orders"})]}),l&&e.jsx(at.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl shadow-lg p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium mb-1",children:"Latest Order"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:l.orderNumber}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Na,{className:"w-4 h-4"}),((L=l.product)==null?void 0:L.name)||"Product"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Dd,{className:"w-4 h-4"}),F(l.createdAt)]})]})]}),e.jsxs("button",{onClick:()=>s(`/orders/${l._id}`),className:"px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition-colors flex items-center gap-2",children:["View Details",e.jsx(Ha,{className:"w-5 h-5"})]})]})}),r.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[e.jsx(Na,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Orders Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Start shopping to see your orders here"}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Products"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4",children:r.map((M,V)=>{var le,G;return e.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:V*.05},onClick:()=>s(`/orders/${M._id}`),className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition-all cursor-pointer group",children:e.jsxs("div",{className:"flex items-center gap-6",children:[(le=M.product)!=null&&le.image?e.jsx("img",{src:M.product.image,alt:M.product.name,className:"w-20 h-20 object-cover rounded-lg border border-slate-200"}):e.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(Na,{className:"w-8 h-8 text-slate-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:M.orderNumber}),e.jsxs("span",{className:`
                          px-3 py-1 rounded-full text-xs font-medium border
                          flex items-center gap-1
                          ${E(M.status)}
                        `,children:[T(M.status),M.status.replace("_"," ")]})]}),e.jsx("p",{className:"text-slate-700 font-medium mb-1",children:((G=M.product)==null?void 0:G.name)||"Product"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[e.jsxs("span",{children:["Quantity: ",M.quantity.toLocaleString()]}),e.jsx("span",{children:""}),e.jsx("span",{children:F(M.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 mb-2",children:pr(M.totalPrice,"INR")}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 group-hover:text-blue-700 font-medium",children:[e.jsx("span",{children:"View Details"}),e.jsx(Ha,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]})},M._id)})}),m&&m.totalPages>1&&e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:v===1,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:m.totalPages},(M,V)=>V+1).map(M=>e.jsx("button",{onClick:()=>w(M),className:`
                        w-10 h-10 rounded-lg font-medium transition-colors
                        ${M===v?"bg-blue-600 text-white":"border border-slate-300 hover:bg-slate-50"}
                      `,children:M},M))}),e.jsx("button",{onClick:()=>w(M=>Math.min(m.totalPages,M+1)),disabled:v===m.totalPages,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),m&&e.jsxs("p",{className:"text-center text-sm text-slate-500 mt-4",children:["Showing ",r.length," of ",m.totalOrders," orders"]})]})]})})},yT=()=>{const s=nr(),[r,i]=y.useState([]),[l,d]=y.useState(null),[m,u]=y.useState([]),[f,g]=y.useState(!1),[p,j]=y.useState(null),[v,w]=y.useState(null),[k,E]=y.useState(""),[T,F]=y.useState("all");y.useEffect(()=>{if(!localStorage.getItem("token")){s("/login");return}M()},[s]),y.useEffect(()=>{l&&V(l._id)},[l,T]);const L=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}),M=async()=>{g(!0);try{const W=await fetch(`${Te}/departments?isEnabled=true`,{headers:L()});if(!W.ok)throw new Error("Failed to fetch departments");const oe=await W.json(),ce=oe.data||oe||[];i(ce.sort((pe,qe)=>(pe.sequence||0)-(qe.sequence||0))),ce.length>0&&!l&&d(ce[0])}catch(W){j(W instanceof Error?W.message:"Failed to fetch departments")}finally{g(!1)}},V=async W=>{g(!0);try{const oe=T!=="all"?`${Te}/departments/${W}/orders?status=${T}`:`${Te}/departments/${W}/orders`,ce=await fetch(oe,{headers:L()});if(!ce.ok)throw new Error("Failed to fetch orders");const pe=await ce.json();u(pe.data||pe||[])}catch(oe){j(oe instanceof Error?oe.message:"Failed to fetch orders")}finally{g(!1)}},le=async(W,oe,ce)=>{if(l){g(!0),j(null),w(null);try{const pe=await fetch(`${Te}/orders/${W}/departments/${l._id}/action`,{method:"POST",headers:L(),body:JSON.stringify({action:oe,notes:ce||""})}),qe=await pe.json();if(!pe.ok)throw new Error(qe.error||"Failed to perform action");w(`Order ${oe}ed successfully`),V(l._id),setTimeout(()=>w(null),3e3)}catch(pe){j(pe instanceof Error?pe.message:"Failed to perform action")}finally{g(!1)}}},G=W=>!W.departmentStatuses||!l?null:W.departmentStatuses.find(oe=>(typeof oe.department=="object"?oe.department._id:oe.department)===l._id),z=W=>{switch(W){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"paused":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"stopped":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},P=W=>{const oe=G(W);if(!oe)return null;const ce=oe.status,pe=[];return ce==="pending"&&pe.push(e.jsxs("button",{onClick:()=>le(W._id,"start"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(co,{size:16}),"Start"]},"start")),ce==="in_progress"&&pe.push(e.jsxs("button",{onClick:()=>le(W._id,"pause"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors flex items-center gap-2",children:[e.jsx(sh,{size:16}),"Pause"]},"pause"),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job? This may require reprint.")&&le(W._id,"stop")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(jd,{size:16}),"Stop"]},"stop"),e.jsxs("button",{onClick:()=>le(W._id,"complete"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(_n,{size:16}),"Complete"]},"complete")),ce==="paused"&&pe.push(e.jsxs("button",{onClick:()=>le(W._id,"resume"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(co,{size:16}),"Resume"]},"resume"),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&le(W._id,"stop")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(jd,{size:16}),"Stop"]},"stop")),pe.length>0?e.jsx("div",{className:"flex gap-2",children:pe}):null},J=m.filter(W=>W.orderNumber.toLowerCase().includes(k.toLowerCase())||W.product.name.toLowerCase().includes(k.toLowerCase()));return e.jsx("div",{className:"min-h-screen bg-cream-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(Or,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900 mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-cream-900 mb-2",children:"Department Portal"}),e.jsx("p",{className:"text-cream-600",children:"Manage production workflow for your department"})]}),p&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(Ts,{size:20}),p]}),v&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-700",children:[e.jsx(_n,{size:20}),v]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-cream-200 p-6 mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(Rn,{size:24}),"Select Department"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:r.map(W=>e.jsxs("button",{onClick:()=>d(W),className:`p-4 rounded-lg border-2 transition-all ${(l==null?void 0:l._id)===W._id?"border-cream-900 bg-cream-50 ring-2 ring-cream-900":"border-cream-200 hover:border-cream-400"}`,children:[e.jsx("div",{className:"font-semibold text-cream-900",children:W.name}),W.description&&e.jsx("div",{className:"text-xs text-cream-600 mt-1",children:W.description}),e.jsxs("div",{className:"text-xs text-cream-500 mt-2",children:["Sequence: ",W.sequence]})]},W._id))})]}),l&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-cream-200 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900 mb-2",children:["Orders - ",l.name]}),e.jsxs("p",{className:"text-sm text-cream-600",children:[J.length," order(s) found"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:T,onChange:W=>F(W.target.value),className:"px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"stopped",children:"Stopped"})]}),e.jsxs("button",{onClick:()=>V(l._id),className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2",children:[e.jsx(Xi,{size:16}),"Refresh"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by order number or product name...",value:k,onChange:W=>E(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]})}),f?e.jsx("div",{className:"text-center py-12",children:e.jsx(Kt,{className:"animate-spin text-cream-900 mx-auto",size:32})}):J.length===0?e.jsxs("div",{className:"text-center py-12 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx(Na,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-cream-600",children:"No orders found"})]}):e.jsx("div",{className:"space-y-4",children:J.map(W=>{var ce;const oe=G(W);return e.jsx(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border border-cream-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"font-bold text-cream-900",children:["Order #",W.orderNumber]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border-2 ${z((oe==null?void 0:oe.status)||"pending")}`,children:((ce=oe==null?void 0:oe.status)==null?void 0:ce.replace("_"," ").toUpperCase())||"PENDING"})]}),e.jsxs("div",{className:"text-sm text-cream-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",W.product.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Quantity:"})," ",W.quantity.toLocaleString()," units"]}),(oe==null?void 0:oe.operator)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Operator:"})," ",oe.operator.name]}),(oe==null?void 0:oe.startedAt)&&e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(pn,{size:14}),"Started: ",new Date(oe.startedAt).toLocaleString()]}),(oe==null?void 0:oe.notes)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",oe.notes]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:P(W)})]})},W._id)})})]})]})})},jT=()=>{var ge;const s=nr(),[r,i]=y.useState(null),[l,d]=y.useState([]),[m,u]=y.useState(null),[f,g]=y.useState([]),[p,j]=y.useState(!1),[v,w]=y.useState(null),[k,E]=y.useState(null),[T,F]=y.useState(""),[L,M]=y.useState("all"),[V,le]=y.useState(null),[G,z]=y.useState(null),[P,J]=y.useState(!1),[W,oe]=y.useState(!0),[ce,pe]=y.useState("dashboard");y.useEffect(()=>{const O=localStorage.getItem("token"),I=localStorage.getItem("user");if(!O||!I){s("/login");return}try{const de=JSON.parse(I);if(i(de),de.role!=="emp"&&de.role!=="admin"){s("/");return}}catch(de){console.error("Error parsing user data:",de),s("/login")}},[s]),y.useEffect(()=>{r&&(r.role==="emp"||r.role==="admin")&&R()},[r]),y.useEffect(()=>{m&&r&&Y(m._id)},[m,L,r]);const qe=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json",Accept:"application/json"}),R=async()=>{if(r){j(!0);try{const O=await fetch(`${Te}/departments?isEnabled=true`,{headers:qe()});if(!O.ok)throw new Error("Failed to fetch departments");const I=await O.json(),de=I.data||I||[],we=r.id||r._id;if(!we){console.error("User ID not found in userData:",r),w("User ID not found. Please log in again."),j(!1);return}const Ce="69327f9850162220fa7bff29",Ge=de.filter(ue=>ue._id===Ce||!ue.operators||ue.operators.length===0?!0:ue.operators.some(Ie=>{const Qe=typeof Ie=="object"&&(Ie._id||Ie.id)||String(Ie);return String(Qe)===String(we)}));d(Ge.sort((ue,se)=>(ue.sequence||0)-(se.sequence||0))),Ge.length>0&&!m&&u(Ge[0])}catch(O){w(O instanceof Error?O.message:"Failed to fetch departments")}finally{j(!1)}}},Y=async O=>{j(!0),w(null);try{const I=L!=="all"?`${Te}/departments/${O}/orders?status=${L}`:`${Te}/departments/${O}/orders`,de=await fetch(I,{headers:qe()});if(!de.ok){const Ge=await de.json().catch(()=>({}));throw new Error(Ge.error||"Failed to fetch orders")}const we=await de.json(),Ce=we.data||we||[];g(Array.isArray(Ce)?Ce:[])}catch(I){const de=I instanceof Error?I.message:"Failed to fetch orders";w(de),g([]),console.error("Error fetching department orders:",I)}finally{j(!1)}},_=async O=>{try{const I=await fetch(`${Te}/orders/${O}`,{headers:qe()});if(!I.ok)throw new Error("Failed to fetch order details");const de=await I.json();z(de)}catch(I){console.error("Error fetching full order details:",I),z(null)}},X=O=>{le(O),z(null),J(!0),_(O._id)},Q=async(O,I,de)=>{if(m){j(!0),w(null),E(null);try{const we=await fetch(`${Te}/orders/${O}/departments/${m._id}/action`,{method:"POST",headers:qe(),body:JSON.stringify({action:I,notes:de||""})}),Ce=await we.json();if(!we.ok)throw new Error(Ce.error||"Failed to perform action");E(`Order ${I==="complete"?"completed":I==="start"?"started":I==="resume"?"resumed":`${I}ed`} successfully`),Y(m._id),setTimeout(()=>E(null),3e3)}catch(we){w(we instanceof Error?we.message:"Failed to perform action")}finally{j(!1)}}},ne=O=>!O.departmentStatuses||!m?null:O.departmentStatuses.find(I=>(typeof I.department=="object"?I.department._id:I.department)===m._id),Ne=O=>{switch(O){case"completed":return"bg-green-50 text-green-700 border-green-200";case"in_progress":return"bg-blue-50 text-blue-700 border-blue-200";case"paused":return"bg-orange-50 text-orange-700 border-orange-200";case"stopped":return"bg-red-50 text-red-700 border-red-200";default:return"bg-yellow-50 text-yellow-700 border-yellow-200"}},C=O=>{switch(O){case"completed":return"bg-green-500";case"in_progress":return"bg-blue-500";case"paused":return"bg-orange-500";case"stopped":return"bg-red-500";default:return"bg-yellow-500"}},H={pending:f.filter(O=>{const I=ne(O);return(I==null?void 0:I.status)==="pending"}).length,inProgress:f.filter(O=>{const I=ne(O);return(I==null?void 0:I.status)==="in_progress"}).length,urgent:f.filter(O=>{const I=ne(O);return(I==null?void 0:I.status)==="paused"||(I==null?void 0:I.status)==="stopped"}).length,completed:f.filter(O=>{const I=ne(O);return(I==null?void 0:I.status)==="completed"}).length},re=f.filter(O=>O.orderNumber.toLowerCase().includes(T.toLowerCase())||O.product.name.toLowerCase().includes(T.toLowerCase())||O.user.name.toLowerCase().includes(T.toLowerCase())),je=O=>O.split(" ").map(I=>I[0]).join("").toUpperCase().slice(0,2);return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[e.jsx("div",{className:"fixed top-4 left-4 z-50",children:e.jsx(Or,{fallbackPath:"/",label:"Back to Home",className:"bg-white shadow-md px-4 py-2 rounded-lg text-slate-600 hover:text-slate-900"})}),e.jsxs("aside",{className:`${W?"w-64":"w-20"} bg-white border-r border-slate-200 transition-all duration-300 flex flex-col`,children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Na,{className:"w-6 h-6 text-white"})}),W&&e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"NexusOrder"})]})}),e.jsxs("nav",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-700 font-medium",children:[e.jsx(Na,{className:"w-5 h-5"}),W&&e.jsx("span",{children:"Dashboard"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(pn,{className:"w-5 h-5"}),W&&e.jsxs("span",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:"My Orders"}),e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:f.length})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(ei,{className:"w-5 h-5"}),W&&e.jsx("span",{children:"Team"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(z5,{className:"w-5 h-5"}),W&&e.jsx("span",{children:"Reports"})]})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200",children:[e.jsx("p",{className:`text-xs font-semibold text-slate-400 uppercase mb-2 ${!W&&"hidden"}`,children:"System"}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(Er,{className:"w-5 h-5"}),W&&e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(Zj,{className:"w-5 h-5"}),W&&e.jsx("span",{children:"Support"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:r?je(r.name):"U"}),W&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:(r==null?void 0:r.name)||"User"}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:(r==null?void 0:r.role)==="emp"?"Employee":"Admin"})]})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx("header",{className:"bg-white border-b border-slate-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 max-w-2xl",children:e.jsxs("div",{className:"relative",children:[e.jsx(fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search orders, customers, or SKUs...",value:T,onChange:O=>F(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-4 ml-6",children:[e.jsxs("button",{className:"relative p-2 hover:bg-slate-50 rounded-lg",children:[e.jsx(ZS,{className:"w-5 h-5 text-slate-600"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:r?je(r.name):"U"})]})]})}),e.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:["Welcome back, ",((ge=r==null?void 0:r.name)==null?void 0:ge.split(" ")[0])||"Employee","."]}),e.jsxs("p",{className:"text-slate-600",children:["You have ",H.pending+H.inProgress," active tasks requiring attention."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(pn,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full font-medium",children:["+",H.pending," new"]})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:H.pending}),e.jsx("p",{className:"text-sm text-slate-600",children:"Pending Orders"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Na,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"On track"})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:H.inProgress}),e.jsx("p",{className:"text-sm text-slate-600",children:"In Progress"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(uc,{className:"w-6 h-6 text-red-600"})}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium",children:"-1 from yesterday"})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:H.urgent}),e.jsx("p",{className:"text-sm text-slate-600",children:"Urgent Attention"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(_n,{className:"w-6 h-6 text-green-600"})}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"+15%"})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:H.completed}),e.jsx("p",{className:"text-sm text-slate-600",children:"Completed Today"})]})]}),l.length>0&&e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Department:"}),l.map(O=>e.jsx("button",{onClick:()=>u(O),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${(m==null?void 0:m._id)===O._id?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:O.name},O._id))]})}),m&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Assigned Orders"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2 bg-white border border-slate-200 rounded-lg",children:["all","pending","in_progress","paused","completed"].map(O=>e.jsx("button",{onClick:()=>M(O),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${L===O?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-50"}`,children:O==="all"?"All":O.replace("_"," ").toUpperCase()},O))}),e.jsx("button",{onClick:()=>Y(m._id),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50",children:e.jsx(Xi,{className:"w-5 h-5 text-slate-600"})})]})]}),e.jsxs(ha,{children:[v&&e.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(Ts,{size:20}),v]}),k&&e.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-700",children:[e.jsx(_n,{size:20}),k]})]}),p?e.jsx("div",{className:"text-center py-12",children:e.jsx(Kt,{className:"animate-spin text-blue-600 mx-auto",size:32})}):re.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(Na,{size:48,className:"mx-auto mb-4 opacity-50 text-slate-400"}),e.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"No orders found"}),e.jsx("p",{className:"text-sm text-slate-500",children:L!=="all"?`No orders with status "${L}" for this department.`:"No orders are currently assigned to this department."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:re.map(O=>{const I=ne(O),de=(I==null?void 0:I.status)||"pending",we=C(de);return e.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>X(O),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-1",children:O.orderNumber}),e.jsx("p",{className:"text-xs text-slate-500",children:O.product.name})]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${we}`})]}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${Ne(de)}`,children:de.replace("_"," ").toUpperCase()})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(ei,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:O.user.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Na,{className:"w-4 h-4"}),e.jsxs("span",{children:[O.quantity.toLocaleString()," units"]})]}),O.deliveryDate&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Dd,{className:"w-4 h-4"}),e.jsxs("span",{children:["Due: ",new Date(O.deliveryDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-100",onClick:Ce=>Ce.stopPropagation(),children:[de==="pending"&&e.jsxs("button",{onClick:()=>Q(O._id,"start"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(co,{className:"w-4 h-4"}),"Start"]}),de==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>Q(O._id,"pause"),className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(sh,{className:"w-4 h-4"}),"Pause"]}),e.jsxs("button",{onClick:()=>Q(O._id,"complete"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(_n,{className:"w-4 h-4"}),"Complete"]})]}),de==="paused"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>Q(O._id,"resume"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(co,{className:"w-4 h-4"}),"Resume"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&Q(O._id,"stop")},className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(jd,{className:"w-4 h-4"}),"Stop"]})]}),de==="completed"&&e.jsx("div",{className:"w-full px-4 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-medium text-center",children:"Completed"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("button",{onClick:Ce=>{Ce.stopPropagation(),X(O)},className:"w-full flex items-center justify-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx("span",{children:"View Details"}),e.jsx(Ha,{className:"w-4 h-4"})]})})]},O._id)})})]})]})]}),e.jsx(ha,{children:P&&(G||V)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>{J(!1),le(null),z(null)},children:e.jsxs(at.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:(G||V).orderNumber}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Created: ",new Date((G||V).createdAt).toLocaleString()]})]}),e.jsx("div",{className:"flex items-center gap-3",children:(()=>{const I=ne(G||V),de=(I==null?void 0:I.status)||"pending";return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${Ne(de)}`,children:de.replace("_"," ").toUpperCase()}),e.jsx("button",{onClick:()=>{J(!1),le(null),z(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(ns,{className:"w-5 h-5 text-slate-600"})})]})})()})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[(()=>{const O=G||V,I=ne(O),de=(I==null?void 0:I.status)||"pending";return e.jsxs("div",{className:"flex gap-3",children:[de==="pending"&&e.jsxs("button",{onClick:()=>{Q(O._id,"start"),J(!1)},className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(co,{className:"w-5 h-5"}),"Start"]}),de==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{Q(O._id,"pause"),J(!1)},className:"flex-1 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(sh,{className:"w-5 h-5"}),"Pause"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&(Q(O._id,"stop"),J(!1))},className:"flex-1 px-6 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(jd,{className:"w-5 h-5"}),"Stop / Finish"]})]}),de==="paused"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{Q(O._id,"resume"),J(!1)},className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(co,{className:"w-5 h-5"}),"Resume"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&(Q(O._id,"stop"),J(!1))},className:"flex-1 px-6 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(jd,{className:"w-5 h-5"}),"Stop / Finish"]})]})]})})(),(()=>{var I,de,we,Ce,Ge,ue;const O=G||V;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Customer"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Name"}),e.jsx("p",{className:"font-semibold text-slate-900",children:O.user.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Email"}),e.jsx("p",{className:"font-semibold text-slate-900",children:O.user.email})]}),O.mobileNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Mobile"}),e.jsx("p",{className:"font-semibold text-slate-900",children:O.mobileNumber})]}),O.deliveryDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Due Date"}),e.jsx("p",{className:"font-semibold text-slate-900",children:new Date(O.deliveryDate).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Product Info"}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[((I=O.product)==null?void 0:I.image)&&e.jsx("img",{src:O.product.image,alt:O.product.name,className:"w-24 h-24 object-cover rounded-lg border border-slate-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-slate-900 text-lg mb-2",children:((de=O.product)==null?void 0:de.name)||"Product"}),((we=O.product)==null?void 0:we.subcategory)&&e.jsx("div",{className:"mb-2",children:e.jsx("p",{className:"text-sm text-slate-600",children:typeof O.product.subcategory=="object"&&O.product.subcategory.category?`${O.product.subcategory.category.name}  ${O.product.subcategory.name}`:typeof O.product.subcategory=="object"?O.product.subcategory.name:O.product.subcategory})}),e.jsxs("div",{className:"space-y-1 text-sm text-slate-600",children:[e.jsxs("p",{children:["Quantity: ",O.quantity.toLocaleString()," units"]}),O.finish&&e.jsxs("p",{children:["Finish: ",O.finish]}),O.shape&&e.jsxs("p",{children:["Shape: ",O.shape]}),((Ce=O.product)==null?void 0:Ce.basePrice)&&e.jsxs("p",{children:["Base Price: ",O.product.basePrice.toFixed(2)]}),e.jsxs("p",{className:"font-semibold text-slate-900 mt-2",children:["Total: ",O.totalPrice.toFixed(2)]})]})]})]}),((Ge=O.product)==null?void 0:Ge.description)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Description:"}),e.jsx("p",{className:"text-sm text-slate-600",children:O.product.description})]}),((ue=O.product)==null?void 0:ue.instructions)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Instructions:"}),e.jsx("p",{className:"text-sm text-slate-600",children:O.product.instructions})]})]}),O.selectedOptions&&Array.isArray(O.selectedOptions)&&O.selectedOptions.length>0?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Selected Options"}),e.jsx("div",{className:"space-y-3",children:O.selectedOptions.map((se,Ie)=>{const Qe=(se==null?void 0:se.optionName)||(se==null?void 0:se.name)||"Option",tt=typeof(se==null?void 0:se.priceAdd)=="number"?se.priceAdd:typeof(se==null?void 0:se.priceAdd)=="string"&&parseFloat(se.priceAdd)||0;return Qe==="Option"&&tt===0?null:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(se==null?void 0:se.image)&&e.jsx("img",{src:se.image,alt:Qe,className:"w-12 h-12 object-cover rounded-lg",onError:ot=>{ot.currentTarget.style.display="none"}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:Qe}),(se==null?void 0:se.description)&&e.jsx("p",{className:"text-xs text-slate-500",children:se.description})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-slate-900",children:["+",tt.toFixed(2)]})})]},Ie)}).filter(Boolean)}),O.selectedOptions.filter(se=>{const Ie=(se==null?void 0:se.optionName)||(se==null?void 0:se.name)||"Option",Qe=typeof(se==null?void 0:se.priceAdd)=="number"?se.priceAdd:typeof(se==null?void 0:se.priceAdd)=="string"&&parseFloat(se.priceAdd)||0;return!(Ie==="Option"&&Qe===0)}).length===0&&e.jsx("p",{className:"text-sm text-slate-500 italic text-center py-4",children:"No valid options found"})]}):null,O.selectedDynamicAttributes&&O.selectedDynamicAttributes.length>0&&e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Selected Attributes"}),e.jsx("div",{className:"space-y-3",children:O.selectedDynamicAttributes.map((se,Ie)=>e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900",children:se.attributeName}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Value: ",e.jsx("span",{className:"font-semibold",children:se.label||String(se.attributeValue)})]}),se.description&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:se.description})]}),se.image&&e.jsx("img",{src:se.image,alt:se.attributeName,className:"w-16 h-16 object-cover rounded-lg ml-3"})]}),(se.priceMultiplier!==1||se.priceAdd>0)&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-100",children:e.jsxs("p",{className:"text-xs text-slate-500",children:[se.priceMultiplier!==1&&`Multiplier: ${se.priceMultiplier}x`,se.priceMultiplier!==1&&se.priceAdd>0&&"  ",se.priceAdd>0&&`Additional: +${se.priceAdd.toFixed(2)}`]})})]},Ie))})]}),O.uploadedDesign&&(O.uploadedDesign.frontImage||O.uploadedDesign.backImage)&&e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"User Uploaded Designs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.uploadedDesign.frontImage&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 mb-2",children:"Front Image"}),O.uploadedDesign.frontImage.data&&e.jsx("img",{src:O.uploadedDesign.frontImage.data,alt:"Front design",className:"w-full h-48 object-contain rounded-lg border border-slate-200 bg-slate-50"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:O.uploadedDesign.frontImage.filename})]}),O.uploadedDesign.backImage&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 mb-2",children:"Back Image"}),O.uploadedDesign.backImage.data&&e.jsx("img",{src:O.uploadedDesign.backImage.data,alt:"Back design",className:"w-full h-48 object-contain rounded-lg border border-slate-200 bg-slate-50"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:O.uploadedDesign.backImage.filename})]})]})]})]})})(),(()=>{const O=G||V;return O.notes?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Customer Instructions"}),e.jsx("div",{className:"space-y-2",children:O.notes.split(`
`).map((I,de)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:""}),e.jsx("p",{className:"text-slate-700",children:I})]},de))})]}):null})(),(()=>{const O=G||V;return O.departmentStatuses&&O.departmentStatuses.length>0?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Production Timeline"}),e.jsx("div",{className:"space-y-4",children:O.departmentStatuses.sort((I,de)=>{const we=typeof I.department=="object"?I.department.sequence:0,Ce=typeof de.department=="object"?de.department.sequence:0;return we-Ce}).map((I,de)=>{const we=typeof I.department=="object"?I.department.name:"Department",Ce=I.status,Ge=Ce==="completed",ue=Ce==="in_progress",se=Ce==="pending";return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Ge?"bg-green-500":ue?"bg-blue-500 animate-pulse":se?"bg-yellow-500":"bg-slate-300"}`}),de<O.departmentStatuses.length-1&&e.jsx("div",{className:`w-0.5 h-12 ${Ge?"bg-green-500":"bg-slate-200"}`})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium text-slate-900",children:we}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Ne(Ce)}`,children:Ce.replace("_"," ").toUpperCase()})]}),I.startedAt&&e.jsxs("p",{className:"text-xs text-slate-500",children:["Started: ",new Date(I.startedAt).toLocaleString()]}),I.completedAt&&e.jsxs("p",{className:"text-xs text-green-600",children:["Completed: ",new Date(I.completedAt).toLocaleString()]})]})]},de)})})]}):null})(),(()=>{var de,we,Ce,Ge;const O=G||V;return((de=O.uploadedDesign)==null?void 0:de.frontImage)||((we=O.uploadedDesign)==null?void 0:we.backImage)?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"User Uploaded Designs (CMYK Format)"}),e.jsxs("div",{className:"space-y-4",children:[((Ce=O.uploadedDesign)==null?void 0:Ce.frontImage)&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vi,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:O.uploadedDesign.frontImage.filename||"Front Image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Front design file (CMYK JPEG)"})]})]}),O.uploadedDesign.frontImage.data&&e.jsx("a",{href:O.uploadedDesign.frontImage.data,download:O.uploadedDesign.frontImage.filename,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Download image",children:e.jsx(Ki,{className:"w-4 h-4 text-slate-600"})})]}),O.uploadedDesign.frontImage.data&&e.jsx("div",{className:"mt-3 border border-slate-200 rounded-lg overflow-hidden bg-slate-50",children:e.jsx("img",{src:O.uploadedDesign.frontImage.data,alt:"Front design preview",className:"w-full h-auto max-h-64 object-contain",onError:ue=>{ue.currentTarget.style.display="none"}})})]}),((Ge=O.uploadedDesign)==null?void 0:Ge.backImage)&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vi,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:O.uploadedDesign.backImage.filename||"Back Image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Back design file (CMYK JPEG)"})]})]}),O.uploadedDesign.backImage.data&&e.jsx("a",{href:O.uploadedDesign.backImage.data,download:O.uploadedDesign.backImage.filename,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Download image",children:e.jsx(Ki,{className:"w-4 h-4 text-slate-600"})})]}),O.uploadedDesign.backImage.data&&e.jsx("div",{className:"mt-3 border border-slate-200 rounded-lg overflow-hidden bg-slate-50",children:e.jsx("img",{src:O.uploadedDesign.backImage.data,alt:"Back design preview",className:"w-full h-auto max-h-64 object-contain",onError:ue=>{ue.currentTarget.style.display="none"}})})]})]})]}):null})()]})]})})})]})};let vT={data:""},NT=s=>{if(typeof window=="object"){let r=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(s||document.head).appendChild(r),r.firstChild}return s||vT},wT=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ST=/\/\*[^]*?\*\/|  +/g,jj=/\n+/g,zl=(s,r)=>{let i="",l="",d="";for(let m in s){let u=s[m];m[0]=="@"?m[1]=="i"?i=m+" "+u+";":l+=m[1]=="f"?zl(u,m):m+"{"+zl(u,m[1]=="k"?"":r)+"}":typeof u=="object"?l+=zl(u,r?r.replace(/([^,])+/g,f=>m.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,f):f?f+" "+g:g)):m):u!=null&&(m=/^--/.test(m)?m:m.replace(/[A-Z]/g,"-$&").toLowerCase(),d+=zl.p?zl.p(m,u):m+":"+u+";")}return i+(r&&d?r+"{"+d+"}":d)+l},Zi={},zN=s=>{if(typeof s=="object"){let r="";for(let i in s)r+=i+zN(s[i]);return r}return s},CT=(s,r,i,l,d)=>{let m=zN(s),u=Zi[m]||(Zi[m]=(g=>{let p=0,j=11;for(;p<g.length;)j=101*j+g.charCodeAt(p++)>>>0;return"go"+j})(m));if(!Zi[u]){let g=m!==s?s:(p=>{let j,v,w=[{}];for(;j=wT.exec(p.replace(ST,""));)j[4]?w.shift():j[3]?(v=j[3].replace(jj," ").trim(),w.unshift(w[0][v]=w[0][v]||{})):w[0][j[1]]=j[2].replace(jj," ").trim();return w[0]})(s);Zi[u]=zl(d?{["@keyframes "+u]:g}:g,i?"":"."+u)}let f=i&&Zi.g?Zi.g:null;return i&&(Zi.g=Zi[u]),((g,p,j,v)=>{v?p.data=p.data.replace(v,g):p.data.indexOf(g)===-1&&(p.data=j?g+p.data:p.data+g)})(Zi[u],r,l,f),u},AT=(s,r,i)=>s.reduce((l,d,m)=>{let u=r[m];if(u&&u.call){let f=u(i),g=f&&f.props&&f.props.className||/^go/.test(f)&&f;u=g?"."+g:f&&typeof f=="object"?f.props?"":zl(f,""):f===!1?"":f}return l+d+(u??"")},"");function Um(s){let r=this||{},i=s.call?s(r.p):s;return CT(i.unshift?i.raw?AT(i,[].slice.call(arguments,1),r.p):i.reduce((l,d)=>Object.assign(l,d&&d.call?d(r.p):d),{}):i,NT(r.target),r.g,r.o,r.k)}let LN,Ah,Eh;Um.bind({g:1});let sl=Um.bind({k:1});function ET(s,r,i,l){zl.p=r,LN=s,Ah=i,Eh=l}function Hl(s,r){let i=this||{};return function(){let l=arguments;function d(m,u){let f=Object.assign({},m),g=f.className||d.className;i.p=Object.assign({theme:Ah&&Ah()},f),i.o=/ *go\d+/.test(g),f.className=Um.apply(i,l)+(g?" "+g:"");let p=s;return s[0]&&(p=f.as||s,delete f.as),Eh&&p[0]&&Eh(f),LN(p,f)}return d}}var TT=s=>typeof s=="function",Ld=(s,r)=>TT(s)?s(r):s,kT=(()=>{let s=0;return()=>(++s).toString()})(),$N=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");s=!r||r.matches}return s}})(),DT=20,Nx="default",FN=(s,r)=>{let{toastLimit:i}=s.settings;switch(r.type){case 0:return{...s,toasts:[r.toast,...s.toasts].slice(0,i)};case 1:return{...s,toasts:s.toasts.map(u=>u.id===r.toast.id?{...u,...r.toast}:u)};case 2:let{toast:l}=r;return FN(s,{type:s.toasts.find(u=>u.id===l.id)?1:0,toast:l});case 3:let{toastId:d}=r;return{...s,toasts:s.toasts.map(u=>u.id===d||d===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return r.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(u=>u.id!==r.toastId)};case 5:return{...s,pausedAt:r.time};case 6:let m=r.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+m}))}}},vm=[],UN={toasts:[],pausedAt:void 0,settings:{toastLimit:DT}},Ni={},IN=(s,r=Nx)=>{Ni[r]=FN(Ni[r]||UN,s),vm.forEach(([i,l])=>{i===r&&l(Ni[r])})},VN=s=>Object.keys(Ni).forEach(r=>IN(s,r)),PT=s=>Object.keys(Ni).find(r=>Ni[r].toasts.some(i=>i.id===s)),Im=(s=Nx)=>r=>{IN(r,s)},OT={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},BN=(s={},r=Nx)=>{let[i,l]=y.useState(Ni[r]||UN),d=y.useRef(Ni[r]);y.useEffect(()=>(d.current!==Ni[r]&&l(Ni[r]),vm.push([r,l]),()=>{let u=vm.findIndex(([f])=>f===r);u>-1&&vm.splice(u,1)}),[r]);let m=i.toasts.map(u=>{var f,g,p;return{...s,...s[u.type],...u,removeDelay:u.removeDelay||((f=s[u.type])==null?void 0:f.removeDelay)||(s==null?void 0:s.removeDelay),duration:u.duration||((g=s[u.type])==null?void 0:g.duration)||(s==null?void 0:s.duration)||OT[u.type],style:{...s.style,...(p=s[u.type])==null?void 0:p.style,...u.style}}});return{...i,toasts:m}},RT=(s,r="blank",i)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...i,id:(i==null?void 0:i.id)||kT()}),Yd=s=>(r,i)=>{let l=RT(r,s,i);return Im(l.toasterId||PT(l.id))({type:2,toast:l}),l.id},qa=(s,r)=>Yd("blank")(s,r);qa.error=Yd("error");qa.success=Yd("success");qa.loading=Yd("loading");qa.custom=Yd("custom");qa.dismiss=(s,r)=>{let i={type:3,toastId:s};r?Im(r)(i):VN(i)};qa.dismissAll=s=>qa.dismiss(void 0,s);qa.remove=(s,r)=>{let i={type:4,toastId:s};r?Im(r)(i):VN(i)};qa.removeAll=s=>qa.remove(void 0,s);qa.promise=(s,r,i)=>{let l=qa.loading(r.loading,{...i,...i==null?void 0:i.loading});return typeof s=="function"&&(s=s()),s.then(d=>{let m=r.success?Ld(r.success,d):void 0;return m?qa.success(m,{id:l,...i,...i==null?void 0:i.success}):qa.dismiss(l),d}).catch(d=>{let m=r.error?Ld(r.error,d):void 0;m?qa.error(m,{id:l,...i,...i==null?void 0:i.error}):qa.dismiss(l)}),s};var MT=1e3,qN=(s,r="default")=>{let{toasts:i,pausedAt:l}=BN(s,r),d=y.useRef(new Map).current,m=y.useCallback((v,w=MT)=>{if(d.has(v))return;let k=setTimeout(()=>{d.delete(v),u({type:4,toastId:v})},w);d.set(v,k)},[]);y.useEffect(()=>{if(l)return;let v=Date.now(),w=i.map(k=>{if(k.duration===1/0)return;let E=(k.duration||0)+k.pauseDuration-(v-k.createdAt);if(E<0){k.visible&&qa.dismiss(k.id);return}return setTimeout(()=>qa.dismiss(k.id,r),E)});return()=>{w.forEach(k=>k&&clearTimeout(k))}},[i,l,r]);let u=y.useCallback(Im(r),[r]),f=y.useCallback(()=>{u({type:5,time:Date.now()})},[u]),g=y.useCallback((v,w)=>{u({type:1,toast:{id:v,height:w}})},[u]),p=y.useCallback(()=>{l&&u({type:6,time:Date.now()})},[l,u]),j=y.useCallback((v,w)=>{let{reverseOrder:k=!1,gutter:E=8,defaultPosition:T}=w||{},F=i.filter(V=>(V.position||T)===(v.position||T)&&V.height),L=F.findIndex(V=>V.id===v.id),M=F.filter((V,le)=>le<L&&V.visible).length;return F.filter(V=>V.visible).slice(...k?[M+1]:[0,M]).reduce((V,le)=>V+(le.height||0)+E,0)},[i]);return y.useEffect(()=>{i.forEach(v=>{if(v.dismissed)m(v.id,v.removeDelay);else{let w=d.get(v.id);w&&(clearTimeout(w),d.delete(v.id))}})},[i,m]),{toasts:i,handlers:{updateHeight:g,startPause:f,endPause:p,calculateOffset:j}}},_T=sl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,zT=sl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,LT=sl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,HN=Hl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_T} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${zT} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${LT} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$T=sl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,GN=Hl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${$T} 1s linear infinite;
`,FT=sl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,UT=sl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,QN=Hl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${FT} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${UT} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,IT=Hl("div")`
  position: absolute;
`,VT=Hl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,BT=sl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qT=Hl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${BT} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,YN=({toast:s})=>{let{icon:r,type:i,iconTheme:l}=s;return r!==void 0?typeof r=="string"?y.createElement(qT,null,r):r:i==="blank"?null:y.createElement(VT,null,y.createElement(GN,{...l}),i!=="loading"&&y.createElement(IT,null,i==="error"?y.createElement(HN,{...l}):y.createElement(QN,{...l})))},HT=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,GT=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,QT="0%{opacity:0;} 100%{opacity:1;}",YT="0%{opacity:1;} 100%{opacity:0;}",WT=Hl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ZT=Hl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,JT=(s,r)=>{let i=s.includes("top")?1:-1,[l,d]=$N()?[QT,YT]:[HT(i),GT(i)];return{animation:r?`${sl(l)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sl(d)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},WN=y.memo(({toast:s,position:r,style:i,children:l})=>{let d=s.height?JT(s.position||r||"top-center",s.visible):{opacity:0},m=y.createElement(YN,{toast:s}),u=y.createElement(ZT,{...s.ariaProps},Ld(s.message,s));return y.createElement(WT,{className:s.className,style:{...d,...i,...s.style}},typeof l=="function"?l({icon:m,message:u}):y.createElement(y.Fragment,null,m,u))});ET(y.createElement);var KT=({id:s,className:r,style:i,onHeightUpdate:l,children:d})=>{let m=y.useCallback(u=>{if(u){let f=()=>{let g=u.getBoundingClientRect().height;l(s,g)};f(),new MutationObserver(f).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[s,l]);return y.createElement("div",{ref:m,className:r,style:i},d)},XT=(s,r)=>{let i=s.includes("top"),l=i?{top:0}:{bottom:0},d=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:$N()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(i?1:-1)}px)`,...l,...d}},ek=Um`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,mm=16,tk=({reverseOrder:s,position:r="top-center",toastOptions:i,gutter:l,children:d,toasterId:m,containerStyle:u,containerClassName:f})=>{let{toasts:g,handlers:p}=qN(i,m);return y.createElement("div",{"data-rht-toaster":m||"",style:{position:"fixed",zIndex:9999,top:mm,left:mm,right:mm,bottom:mm,pointerEvents:"none",...u},className:f,onMouseEnter:p.startPause,onMouseLeave:p.endPause},g.map(j=>{let v=j.position||r,w=p.calculateOffset(j,{reverseOrder:s,gutter:l,defaultPosition:r}),k=XT(v,w);return y.createElement(KT,{id:j.id,key:j.id,onHeightUpdate:p.updateHeight,className:j.visible?ek:"",style:k},j.type==="custom"?Ld(j.message,j):d?d(j):y.createElement(WN,{toast:j,position:v}))}))},It=qa;const sk=Object.freeze(Object.defineProperty({__proto__:null,CheckmarkIcon:QN,ErrorIcon:HN,LoaderIcon:GN,ToastBar:WN,ToastIcon:YN,Toaster:tk,default:It,resolveValue:Ld,toast:qa,useToaster:qN,useToasterStore:BN},Symbol.toStringTag,{value:"Module"})),ak=({onSuccess:s,onError:r})=>{var pe,qe,R,Y;const[i,l]=y.useState([]),[d,m]=y.useState(!1),[u,f]=y.useState("all"),[g,p]=y.useState(""),[j,v]=y.useState(null),[w,k]=y.useState(1),[E]=y.useState(10),[T,F]=y.useState(null),L=()=>{const _=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:_?`Bearer ${_}`:""}},M=async()=>{m(!0);try{const _=u!=="all"?`?status=${u}`:"",X=await fetch(`${Te}/auth/print-partner-requests${_}`,{headers:L()});if(!X.ok)throw new Error(`Failed to fetch: ${X.status}`);const Q=await X.json();if(Q.success)l(Q.requests||[]),k(1);else throw new Error(Q.message||"Failed to fetch requests")}catch(_){console.error("Fetch print partner requests error:",_),r==null||r(_.message||"Failed to fetch print partner requests")}finally{m(!1)}};y.useEffect(()=>{M()},[u]);const V=async _=>{if(window.confirm("Are you sure you want to approve this request?")){v(_);try{const Q=await(await fetch(`${Te}/auth/print-partner-requests/${_}/approve`,{method:"POST",headers:L()})).json();if(Q.success)s==null||s("Print partner request approved successfully!"),M(),(T==null?void 0:T._id)===_&&F(null);else throw new Error(Q.message||"Failed to approve")}catch(X){r==null||r(X.message||"Failed to approve request")}finally{v(null)}}},le=async _=>{if(window.confirm("Are you sure you want to reject this request?")){v(_);try{const Q=await(await fetch(`${Te}/auth/print-partner-requests/${_}/reject`,{method:"POST",headers:L(),body:JSON.stringify({rejectionReason:"Rejected by admin"})})).json();if(Q.success)s==null||s("Print partner request rejected successfully!"),M(),(T==null?void 0:T._id)===_&&F(null);else throw new Error(Q.message||"Failed to reject")}catch(X){r==null||r(X.message||"Failed to reject request")}finally{v(null)}}},G=i.filter(_=>{if(!g)return!0;const X=g.toLowerCase();return _.businessName.toLowerCase().includes(X)||_.ownerName.toLowerCase().includes(X)||_.email.toLowerCase().includes(X)||_.mobileNumber.includes(X)}),z=G.length,P=Math.ceil(z/E),J=w*E,W=J-E,oe=G.slice(W,J),ce=_=>k(_);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass-panel p-4 rounded-2xl bg-white shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-600",children:e.jsx(kd,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Print Partners"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage partnership requests"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(fn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search partners...",value:g,onChange:_=>p(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsxs("select",{value:u,onChange:_=>f(_.target.value),className:"w-full sm:w-auto px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]}),e.jsx("button",{onClick:M,disabled:d,className:"p-2 border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 text-gray-600",children:e.jsx(Xi,{size:18,className:d?"animate-spin":""})})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100 text-xs uppercase tracking-wider text-gray-500 font-medium",children:[e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Business Name"}),e.jsx("th",{className:"px-6 py-4",children:"Owner"}),e.jsx("th",{className:"px-6 py-4",children:"Contact"}),e.jsx("th",{className:"px-6 py-4",children:"Submitted"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:d?Array(5).fill(0).map((_,X)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-16"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-32"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-24"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-28"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-20"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-12 ml-auto"})})]},X)):oe.length>0?oe.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors cursor-pointer",onClick:()=>F(_),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold
                                                ${_.verificationStatus==="APPROVED"?"bg-green-100 text-green-700":_.verificationStatus==="REJECTED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${_.verificationStatus==="APPROVED"?"bg-green-500":_.verificationStatus==="REJECTED"?"bg-red-500":"bg-yellow-500"}`}),_.verificationStatus]})}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:_.businessName}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:_.ownerName}),e.jsxs("td",{className:"px-6 py-4 text-gray-500 text-sm",children:[e.jsx("div",{children:_.mobileNumber}),e.jsx("div",{className:"text-xs text-gray-400",children:_.email})]}),e.jsx("td",{className:"px-6 py-4 text-gray-500 text-sm",children:new Date(_.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:X=>X.stopPropagation(),children:[e.jsx("button",{onClick:()=>F(_),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(kr,{size:18})}),_.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>V(_._id),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve",disabled:j===_._id,children:e.jsx(ya,{size:18})}),e.jsx("button",{onClick:()=>le(_._id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject",disabled:j===_._id,children:e.jsx(Ul,{size:18})})]})]})})]},_._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(fn,{size:32,className:"opacity-20"}),e.jsx("p",{children:"No requests found"})]})})})})]})}),z>0&&e.jsxs("div",{className:"border-t border-gray-100 bg-gray-50 px-6 py-4 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",e.jsxs("span",{className:"font-medium text-gray-900",children:[W+1,"-",Math.min(J,z)]})," of ",e.jsx("span",{className:"font-medium text-gray-900",children:z})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w>1&&ce(w-1),disabled:w===1,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(Fl,{size:16})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 px-2",children:["Page ",w," of ",Math.max(1,P)]}),e.jsx("button",{onClick:()=>w<P&&ce(w+1),disabled:w===P,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(Ha,{size:16})})]})]})]}),T&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Full information for ",T.businessName]})]}),e.jsx("button",{onClick:()=>F(null),className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",children:e.jsx(ns,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(kd,{size:16,className:"text-blue-600"}),"Business Information"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Business Name"}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:T.businessName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"GST Number"}),e.jsx("span",{className:"font-mono text-gray-700",children:T.gstNumber||"N/A"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Address"}),e.jsx("span",{className:"text-gray-700",children:[(pe=T.address)==null?void 0:pe.fullAddress,(qe=T.address)==null?void 0:qe.city,(R=T.address)==null?void 0:R.state,(Y=T.address)==null?void 0:Y.pincode].filter(Boolean).join(", ")||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ei,{size:16,className:"text-purple-600"}),"Owner Contact"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Owner Name"}),e.jsx("span",{className:"font-medium text-gray-900",children:T.ownerName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Mobile"}),e.jsx("span",{className:"text-gray-700 font-medium",children:T.mobileNumber})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Email"}),e.jsx("span",{className:"text-gray-700 break-all",children:T.email})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Kr,{size:16,className:"text-orange-600"}),"Verification Document"]}),T.proofDocument?e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:e.jsx(kr,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Proof Document"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Visiting Card / Shop Photo"})]})]}),e.jsx("a",{href:T.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-semibold text-gray-700 hover:text-blue-600 hover:border-blue-200 transition-colors shadow-sm",children:"View Original"})]}):e.jsx("div",{className:"p-4 rounded-xl bg-red-50 text-red-600 text-sm",children:"No document uploaded"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-50/50 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pn,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-blue-800",children:"Request Timeline"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submitted on:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(T.createdAt).toLocaleString()})]}),T.verifiedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[T.verificationStatus==="APPROVED"?"Approved":"Rejected"," on:"]}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(T.verifiedAt).toLocaleString()})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50 rounded-b-2xl flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>F(null),className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors shadow-sm",children:"Close"}),T.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>le(T._id),disabled:j===T._id,className:"px-5 py-2.5 bg-white border border-red-200 text-red-600 rounded-xl font-medium hover:bg-red-50 hover:border-red-300 transition-colors shadow-sm flex items-center gap-2",children:[e.jsx(Ul,{size:18}),"Reject"]}),e.jsxs("button",{onClick:()=>V(T._id),disabled:j===T._id,className:"px-5 py-2.5 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors shadow-sm flex items-center gap-2",children:[j===T._id?e.jsx(Xi,{className:"animate-spin",size:18}):e.jsx(ya,{size:18}),"Approve"]})]})]})]})})]})},rk=({onSuccess:s,onError:r})=>{var pe,qe,R,Y;const[i,l]=y.useState([]),[d,m]=y.useState(!1),[u,f]=y.useState("all"),[g,p]=y.useState(""),[j,v]=y.useState(null),[w,k]=y.useState(1),[E]=y.useState(10),[T,F]=y.useState(null),L=()=>{const _=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:_?`Bearer ${_}`:""}},M=async()=>{m(!0);try{const _=u!=="all"?`?status=${u}`:"",X=await fetch(`${Te}/auth/corporate-requests${_}`,{headers:L()});if(!X.ok)throw new Error(`Failed to fetch: ${X.status}`);const Q=await X.json();if(Q.success)l(Q.requests||[]),k(1);else throw new Error(Q.message||"Failed to fetch requests")}catch(_){console.error("Fetch corporate requests error:",_),r==null||r(_.message||"Failed to fetch corporate requests")}finally{m(!1)}};y.useEffect(()=>{M()},[u]);const V=async _=>{if(window.confirm("Are you sure you want to approve this request?")){v(_);try{const Q=await(await fetch(`${Te}/auth/corporate-requests/${_}/approve`,{method:"POST",headers:L()})).json();if(Q.success)s==null||s("Corporate request approved successfully!"),M(),(T==null?void 0:T._id)===_&&F(null);else throw new Error(Q.message||"Failed to approve")}catch(X){r==null||r(X.message||"Failed to approve request")}finally{v(null)}}},le=async _=>{if(window.confirm("Are you sure you want to reject this request?")){v(_);try{const Q=await(await fetch(`${Te}/auth/corporate-requests/${_}/reject`,{method:"POST",headers:L(),body:JSON.stringify({rejectionReason:"Rejected by admin"})})).json();if(Q.success)s==null||s("Corporate request rejected successfully!"),M(),(T==null?void 0:T._id)===_&&F(null);else throw new Error(Q.message||"Failed to reject")}catch(X){r==null||r(X.message||"Failed to reject request")}finally{v(null)}}},G=i.filter(_=>{if(!g)return!0;const X=g.toLowerCase();return _.organizationName.toLowerCase().includes(X)||_.authorizedPersonName.toLowerCase().includes(X)||_.officialEmail.toLowerCase().includes(X)||_.mobileNumber.includes(X)}),z=G.length,P=Math.ceil(z/E),J=w*E,W=J-E,oe=G.slice(W,J),ce=_=>k(_);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass-panel p-4 rounded-2xl bg-white shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg text-purple-600",children:e.jsx(Rn,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Corporate Requests"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage corporate partnerships"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(fn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search organization...",value:g,onChange:_=>p(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),e.jsxs("select",{value:u,onChange:_=>f(_.target.value),className:"w-full sm:w-auto px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm bg-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]}),e.jsx("button",{onClick:M,disabled:d,className:"p-2 border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 text-gray-600",children:e.jsx(Xi,{size:18,className:d?"animate-spin":""})})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100 text-xs uppercase tracking-wider text-gray-500 font-medium",children:[e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Organization"}),e.jsx("th",{className:"px-6 py-4",children:"Authorized Person"}),e.jsx("th",{className:"px-6 py-4",children:"Contact"}),e.jsx("th",{className:"px-6 py-4",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:d?Array(5).fill(0).map((_,X)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-16"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-32"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-24"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-28"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-20"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-12 ml-auto"})})]},X)):oe.length>0?oe.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors cursor-pointer",onClick:()=>F(_),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold
                                                ${_.verificationStatus==="APPROVED"?"bg-green-100 text-green-700":_.verificationStatus==="REJECTED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${_.verificationStatus==="APPROVED"?"bg-green-500":_.verificationStatus==="REJECTED"?"bg-red-500":"bg-yellow-500"}`}),_.verificationStatus]})}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:_.organizationName}),e.jsxs("td",{className:"px-6 py-4 text-gray-600",children:[_.authorizedPersonName,e.jsx("div",{className:"text-xs text-gray-400",children:_.designation})]}),e.jsxs("td",{className:"px-6 py-4 text-gray-500 text-sm",children:[e.jsx("div",{children:_.mobileNumber}),e.jsx("div",{className:"text-xs text-gray-400",children:_.officialEmail})]}),e.jsx("td",{className:"px-6 py-4 text-gray-500 text-sm",children:_.organizationType}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:X=>X.stopPropagation(),children:[e.jsx("button",{onClick:()=>F(_),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(kr,{size:18})}),_.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>V(_._id),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve",disabled:j===_._id,children:e.jsx(ya,{size:18})}),e.jsx("button",{onClick:()=>le(_._id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject",disabled:j===_._id,children:e.jsx(Ul,{size:18})})]})]})})]},_._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(fn,{size:32,className:"opacity-20"}),e.jsx("p",{children:"No requests found"})]})})})})]})}),z>0&&e.jsxs("div",{className:"border-t border-gray-100 bg-gray-50 px-6 py-4 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",e.jsxs("span",{className:"font-medium text-gray-900",children:[W+1,"-",Math.min(J,z)]})," of ",e.jsx("span",{className:"font-medium text-gray-900",children:z})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w>1&&ce(w-1),disabled:w===1,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(Fl,{size:16})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 px-2",children:["Page ",w," of ",Math.max(1,P)]}),e.jsx("button",{onClick:()=>w<P&&ce(w+1),disabled:w===P,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(Ha,{size:16})})]})]})]}),T&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Full information for ",T.organizationName]})]}),e.jsx("button",{onClick:()=>F(null),className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",children:e.jsx(ns,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(kd,{size:16,className:"text-purple-600"}),"Organization Information"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Organization Name"}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:T.organizationName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Type"}),e.jsx("span",{className:"font-medium text-gray-900",children:T.organizationType})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"GST Number"}),e.jsx("span",{className:"font-mono text-gray-700",children:T.gstNumber||"N/A"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Address"}),e.jsx("span",{className:"text-gray-700",children:[(pe=T.address)==null?void 0:pe.fullAddress,(qe=T.address)==null?void 0:qe.city,(R=T.address)==null?void 0:R.state,(Y=T.address)==null?void 0:Y.pincode].filter(Boolean).join(", ")||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ei,{size:16,className:"text-blue-600"}),"Authorized Person"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Name"}),e.jsx("span",{className:"font-medium text-gray-900",children:T.authorizedPersonName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Designation"}),e.jsx("span",{className:"font-medium text-gray-900",children:T.designation})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Mobile"}),e.jsx("span",{className:"text-gray-700 font-medium",children:T.mobileNumber})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Official Email"}),e.jsx("span",{className:"text-gray-700 break-all",children:T.officialEmail})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Kr,{size:16,className:"text-orange-600"}),"Verification Document"]}),T.proofDocument?e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:e.jsx(kr,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Proof Document"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Business Registration / ID Proof"})]})]}),e.jsx("a",{href:T.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-semibold text-gray-700 hover:text-blue-600 hover:border-blue-200 transition-colors shadow-sm",children:"View Original"})]}):e.jsx("div",{className:"p-4 rounded-xl bg-red-50 text-red-600 text-sm",children:"No document uploaded"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-50/50 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pn,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-blue-800",children:"Request Timeline"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submitted on:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(T.createdAt).toLocaleString()})]}),T.verifiedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[T.verificationStatus==="APPROVED"?"Approved":"Rejected"," on:"]}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(T.verifiedAt).toLocaleString()})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50 rounded-b-2xl flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>F(null),className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors shadow-sm",children:"Close"}),T.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>le(T._id),disabled:j===T._id,className:"px-5 py-2.5 bg-white border border-red-200 text-red-600 rounded-xl font-medium hover:bg-red-50 hover:border-red-300 transition-colors shadow-sm flex items-center gap-2",children:[e.jsx(Ul,{size:18}),"Reject"]}),e.jsxs("button",{onClick:()=>V(T._id),disabled:j===T._id,className:"px-5 py-2.5 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors shadow-sm flex items-center gap-2",children:[j===T._id?e.jsx(Xi,{className:"animate-spin",size:18}):e.jsx(ya,{size:18}),"Approve"]})]})]})]})})]})},ZN=({conflict:s,onResolve:r,onCancel:i})=>{var T,F,L,M,V,le,G,z,P,J,W,oe,ce,pe,qe;const[l,d]=y.useState(null),[m,u]=y.useState(!1);console.log(" ConflictDetectionModal received data:",{conflict:s,hasConflicts:s==null?void 0:s.hasConflicts,hasConflict:s==null?void 0:s.hasConflict,conflictsArray:s==null?void 0:s.conflicts,payload:s==null?void 0:s.payload});const f=(s==null?void 0:s.hasConflict)||(s==null?void 0:s.hasConflicts);if(!s||!f)return null;const g=s.conflicts&&!s.affectedItems;console.log(" Using format:",g?"OLD":"NEW");let p=s.affectedItems||[],j=s.impactSummary;if(g&&s.conflicts){p=s.conflicts.map(Y=>({priceBook:{name:Y.priceBookName||"Unknown"},zone:Y.zone?{name:Y.zoneName||"Zone"}:null,segment:Y.segment?{name:Y.segmentName||"Segment"}:null,pricing:{currentPrice:Y.existingPrice,newZonePrice:Y.newPrice,priceDifference:Y.priceDifference,percentageDifference:String(Y.percentageDifference).includes("%")?Y.percentageDifference:Y.percentageDifference+"%",direction:Y.priceDifference>0?"increase":"decrease"}}));const R=s.product||((T=s.payload)==null?void 0:T.product);j={product:{_id:(R==null?void 0:R._id)||((F=s.payload)==null?void 0:F.productId)||"unknown",name:(R==null?void 0:R.name)||"Product",sku:(R==null?void 0:R.sku)||""},updateLevel:"ZONE",currentMasterPrice:((L=s.conflicts[0])==null?void 0:L.existingPrice)||0,newPrice:((M=s.conflicts[0])==null?void 0:M.newPrice)||0,totalAffectedItems:s.conflicts.length,affectedSegments:[]},console.log(" Transformed data:",{affectedItems:p,impactSummary:j})}const v=s.resolutionOptions||[];if(!j){console.warn(" impactSummary is undefined! Creating default...");const R=s.product||((V=s.payload)==null?void 0:V.product);j={product:{_id:(R==null?void 0:R._id)||((le=s.payload)==null?void 0:le.productId)||"unknown",name:(R==null?void 0:R.name)||"Product",sku:(R==null?void 0:R.sku)||""},updateLevel:"ZONE",currentMasterPrice:((z=(G=s.conflicts)==null?void 0:G[0])==null?void 0:z.existingPrice)||0,newPrice:((J=(P=s.conflicts)==null?void 0:P[0])==null?void 0:J.newPrice)||((W=s.payload)==null?void 0:W.newPrice)||0,totalAffectedItems:((oe=s.conflicts)==null?void 0:oe.length)||0,affectedSegments:[]}}console.log(" Final render data:",{productName:(ce=j==null?void 0:j.product)==null?void 0:ce.name,currentPrice:j==null?void 0:j.currentMasterPrice,newPrice:j==null?void 0:j.newPrice,affectedItemsCount:p==null?void 0:p.length});const w=async()=>{if(l){u(!0);try{await r(l)}catch(R){console.error("Resolution error:",R)}finally{u(!1)}}},k=R=>({OVERWRITE:"",PRESERVE:"",RELATIVE:""})[R]||"",E=R=>({OVERWRITE:"#dc2626",PRESERVE:"#10b981",RELATIVE:"#4f46e5"})[R]||"#666";return e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:"modal-content",onClick:R=>R.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:" Pricing Conflicts Detected"}),e.jsxs("p",{className:"modal-subtitle",children:[((pe=j==null?void 0:j.product)==null?void 0:pe.name)||"Product"," ",(qe=j==null?void 0:j.product)!=null&&qe.sku?`(${j.product.sku})`:""]})]}),e.jsx("button",{className:"btn-close",onClick:i,children:""})]}),e.jsxs("div",{className:"impact-summary-section",children:[e.jsxs("div",{className:"summary-card",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("label",{children:"Master Price:"}),e.jsxs("strong",{children:["",((j==null?void 0:j.currentMasterPrice)||0).toFixed(2)]})]}),e.jsx("div",{className:"summary-arrow",children:""}),e.jsxs("div",{className:"summary-item",children:[e.jsx("label",{children:"New Price:"}),e.jsxs("strong",{className:"text-primary",children:["",((j==null?void 0:j.newPrice)||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"affected-count-badge",children:[(j==null?void 0:j.totalAffectedItems)||0," segment",((j==null?void 0:j.totalAffectedItems)||0)!==1?"s":""," with custom pricing"]})]}),e.jsxs("div",{className:"affected-items-section",children:[e.jsx("h4",{children:" Impact on Existing Prices:"}),e.jsx("div",{className:"affected-table-wrapper",children:e.jsxs("table",{className:"affected-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Segment"}),e.jsx("th",{children:"Current Price"}),e.jsx("th",{children:"New Zone Price"}),e.jsx("th",{children:"Difference"})]})}),e.jsx("tbody",{children:p.map((R,Y)=>{var Q,ne,Ne,C,H,re;const _=((Q=R.pricing)==null?void 0:Q.currentPrice)||((ne=R.pricing)==null?void 0:ne.currentEffectivePrice)||0,X=((Ne=R.pricing)==null?void 0:Ne.direction)==="increase";return e.jsxs("tr",{children:[e.jsx("td",{className:"segment-name",children:R.priceBook?e.jsxs("div",{children:[e.jsxs("strong",{children:[" ",R.priceBook.name]}),R.zone&&e.jsxs("div",{style:{fontSize:"0.85em",color:"#666"},children:["Zone: ",R.zone.name]}),R.segment&&e.jsxs("div",{style:{fontSize:"0.85em",color:"#666"},children:["Segment: ",R.segment.name]})]}):R.segment?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:R.segment.name}),R.segment.code&&e.jsx("small",{className:"segment-code",children:R.segment.code})]}):e.jsx("strong",{children:"Unknown"})}),e.jsxs("td",{className:"price-current",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"price-new",children:["",(((C=R.pricing)==null?void 0:C.newZonePrice)||0).toFixed(2)]}),e.jsxs("td",{className:`price-diff ${X?"increase":"decrease"}`,children:[e.jsxs("span",{className:"diff-amount",children:[X?"+":"","",(((H=R.pricing)==null?void 0:H.priceDifference)||0).toFixed(2)]}),e.jsxs("span",{className:"diff-percent",children:["(",X?"+":"",((re=R.pricing)==null?void 0:re.percentageDifference)||"0%",")"]})]})]},Y)})})]})})]}),e.jsxs("div",{className:"resolution-options",children:[e.jsx("h4",{children:" Choose Resolution Strategy:"}),e.jsx("div",{className:"options-grid",children:v.map(R=>{var Y;return e.jsxs("div",{className:`option-card ${l===R.id?"selected":""}`,onClick:()=>d(R.id),style:{borderColor:l===R.id?E(R.id):"#e0e0e0"},children:[e.jsx("div",{className:"option-icon",style:{background:E(R.id)},children:k(R.id)}),e.jsxs("div",{className:"option-content",children:[e.jsx("h5",{children:R.label}),e.jsx("p",{className:"option-description",children:R.description}),R.id==="RELATIVE"&&((Y=R.impact)==null?void 0:Y.preview)&&R.impact.preview.length>0&&e.jsxs("div",{className:"option-preview",children:[e.jsx("strong",{children:"Preview:"}),e.jsx("ul",{children:R.impact.preview.map((_,X)=>e.jsxs("li",{children:[e.jsxs("span",{className:"preview-segment",children:[_.segment,":"]}),e.jsxs("span",{className:"preview-prices",children:["",_.currentPrice.toFixed(2),"  ",_.newPrice.toFixed(2)]}),e.jsxs("span",{className:"preview-diff",children:["(",_.difference>0?"+":"","",_.difference.toFixed(2),")"]})]},X))})]})]}),l===R.id&&e.jsx("div",{className:"option-checkmark",children:""})]},R.id)})})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-cancel",onClick:i,disabled:m,children:"Cancel"}),e.jsx("button",{className:"btn-confirm",onClick:w,disabled:!l||m,style:{background:l?E(l):"#ccc"},children:m?"Applying...":"Apply Resolution"})]})]})})},nk=()=>{const[s,r]=y.useState([]),[i,l]=y.useState(!1),[d,m]=y.useState(!1),[u,f]=y.useState(null),[g,p]=y.useState(!1),[j,v]=y.useState(null),[w,k]=y.useState([]),[E,T]=y.useState(!1),[F,L]=y.useState(!1),[M,V]=y.useState(null),[le,G]=y.useState([]),[z,P]=y.useState({product:"",basePrice:"",compareAtPrice:""}),[J,W]=y.useState({name:"",currency:"INR",zone:"",segment:"",isMaster:!1,parentBook:"",isOverride:!1,overridePriority:0,description:""}),[oe,ce]=y.useState(null),[pe,qe]=y.useState(!1),[R,Y]=y.useState(!1),[_,X]=y.useState([]),[Q,ne]=y.useState([]),[Ne,C]=y.useState(""),[H,re]=y.useState(""),[je,ge]=y.useState(""),[O,I]=y.useState(1),[de,we]=y.useState(5),Ce=Pr.useMemo(()=>s.filter(fe=>{var hs,ht,Qt;const gt=Ne===""||fe.name.toLowerCase().includes(Ne.toLowerCase())||((hs=fe.description)==null?void 0:hs.toLowerCase().includes(Ne.toLowerCase())),kt=H===""||((ht=fe.zone)==null?void 0:ht._id)===H,cs=je===""||((Qt=fe.segment)==null?void 0:Qt._id)===je;return gt&&kt&&cs}),[s,Ne,H,je]),Ge=Math.ceil(Ce.length/de),ue=Pr.useMemo(()=>{const fe=(O-1)*de;return Ce.slice(fe,fe+de)},[Ce,O,de]);Pr.useEffect(()=>{I(1)},[Ne,H,je]),y.useEffect(()=>{Ie(),se()},[]);const se=async()=>{try{const gt={Authorization:`Bearer ${localStorage.getItem("token")}`},[kt,cs]=await Promise.all([fetch("/api/admin/pricing/geo-zones",{headers:gt}),fetch("/api/admin/pricing/user-segments",{headers:gt})]);if(kt.ok){const hs=await kt.json();X(hs.zones||[])}if(cs.ok){const hs=await cs.json();ne(hs.segments||[])}}catch(fe){console.error("Failed to fetch lookup data:",fe)}},Ie=async()=>{l(!0);try{const fe=localStorage.getItem("token"),gt=await fetch("/api/admin/price-books",{headers:{Authorization:`Bearer ${fe}`}});if(gt.ok){const kt=await gt.json();r(kt.priceBooks||[])}}catch(fe){console.error("Failed to fetch price books:",fe)}finally{l(!1)}},Qe=async fe=>{T(!0);try{const gt=localStorage.getItem("token"),kt=await fetch(`/api/admin/price-book-entries?priceBook=${fe}`,{headers:{Authorization:`Bearer ${gt}`}});if(kt.ok){const cs=await kt.json();k(cs.entries||[])}}catch(gt){console.error("Failed to fetch price book entries:",gt)}finally{T(!1)}},tt=async()=>{try{const fe=await fetch("/api/products");if(fe.ok){const gt=await fe.json();G(gt.products||gt||[])}}catch(fe){console.error("Failed to fetch products:",fe)}},ot=async fe=>{fe.preventDefault(),l(!0);try{const gt=localStorage.getItem("token"),kt=u?`/api/admin/price-books/${u._id}`:"/api/admin/price-books",cs=await fetch(kt,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${gt}`},body:JSON.stringify(J)});if(cs.ok)It.success(u?"Price book updated!":"Price book created!"),m(!1),Gs(),Ie();else{const hs=await cs.json();It.error(hs.message||"Failed to save price book")}}catch(gt){console.error("Error saving price book:",gt),It.error("Failed to save price book")}finally{l(!1)}},ze=async fe=>{var kt,cs;if(fe.preventDefault(),!j)return;T(!0);const gt=localStorage.getItem("token");try{if(!M&&parseFloat(z.basePrice)>0){const Vs={zoneId:((kt=j.zone)==null?void 0:kt._id)||null,segmentId:((cs=j.segment)==null?void 0:cs._id)||null,productId:z.product,newPrice:parseFloat(z.basePrice)},rs=await fetch("/api/admin/pricing/detect-conflicts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${gt}`},body:JSON.stringify(Vs)});if(rs.ok){const Bs=await rs.json();if(console.log(" Conflict Check Response:",Bs),Bs.success&&Bs.data&&(Bs.data.hasConflict||Bs.data.hasConflicts)){console.log(" CONFLICTS DETECTED! Showing modal with data:",Bs.data),ce({...Bs.data,payload:Vs}),qe(!0),T(!1);return}else console.log(" No conflicts detected, proceeding with save")}}const hs=M?`/api/admin/price-book-entries/${M._id}`:"/api/admin/price-book-entries",ht={priceBook:j._id,product:z.product,basePrice:parseFloat(z.basePrice),compareAtPrice:z.compareAtPrice?parseFloat(z.compareAtPrice):void 0},Qt=await fetch(hs,{method:M?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${gt}`},body:JSON.stringify(ht)});if(Qt.ok)It.success(M?"Price updated!":"Product price added!"),L(!1),Ns(),Qe(j._id);else{const Vs=await Qt.json();It.error(Vs.message||"Failed to save price")}}catch(hs){console.error("Error saving price entry:",hs),It.error("Failed to save price")}finally{T(!1)}},Ot=async fe=>{var gt,kt,cs,hs,ht;if(oe){Y(!0);try{const Qt=localStorage.getItem("token"),Vs=(gt=oe.payload)==null?void 0:gt.productId,rs=(kt=oe.payload)==null?void 0:kt.newPrice,Bs=((cs=oe.impactSummary)==null?void 0:cs.currentMasterPrice)||0,Be=(hs=oe.payload)==null?void 0:hs.zoneId,mt=(ht=oe.payload)==null?void 0:ht.segmentId,bt=oe.conflicts||[],ws={resolutionId:fe,productId:Vs,newPrice:rs,oldPrice:Bs,zoneId:Be,segmentId:mt,conflicts:bt,updateLevel:"ZONE"};console.log(" Sending conflict resolution request:",ws);const Fs=await fetch("/api/admin/pricing/resolve-conflict",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Qt}`},body:JSON.stringify(ws)});if(Fs.ok)It.success("Conflict resolved and price saved successfully!"),qe(!1),L(!1),Ns(),ce(null),j&&Qe(j._id);else{const Ws=await Fs.json();console.error(" Conflict resolution failed:",{status:Fs.status,statusText:Fs.statusText,error:Ws,sentRequest:ws}),It.error(Ws.message||"Failed to resolve conflict")}}catch(Qt){console.error("Error resolving conflict:",Qt),It.error("Failed to resolve conflict")}finally{Y(!1)}}},_t=async fe=>{if(confirm("Are you sure you want to delete this price entry?")&&j)try{const gt=localStorage.getItem("token"),kt=await fetch(`/api/admin/price-book-entries/${fe}`,{method:"DELETE",headers:{Authorization:`Bearer ${gt}`}});if(kt.ok)It.success("Price entry deleted!"),Qe(j._id);else{const cs=await kt.json();It.error(cs.message||"Failed to delete price entry")}}catch(gt){console.error("Error deleting entry:",gt),It.error("Failed to delete price entry")}},Dt=async fe=>{if(confirm("Are you sure you want to delete this price book? All associated price entries will also be deleted."))try{const gt=localStorage.getItem("token"),kt=await fetch(`/api/admin/price-books/${fe}`,{method:"DELETE",headers:{Authorization:`Bearer ${gt}`}});if(kt.ok)It.success("Price book deleted!"),Ie();else{const cs=await kt.json();It.error(cs.message||"Failed to delete price book")}}catch(gt){console.error("Error deleting price book:",gt),It.error("Failed to delete price book")}},us=fe=>{var gt,kt;f(fe),W({name:fe.name,currency:fe.currency,zone:((gt=fe.zone)==null?void 0:gt._id)||"",segment:((kt=fe.segment)==null?void 0:kt._id)||"",isMaster:fe.isMaster||!1,parentBook:fe.parentBook||"",isOverride:fe.isOverride||!1,overridePriority:fe.overridePriority||0,description:fe.description||""}),m(!0)},Ps=fe=>{v(fe),p(!0),Qe(fe._id),tt()},Vt=fe=>{var gt;if(!fe.product){It.success("Cannot edit this entry: Product data is missing. Please delete and recreate this entry.");return}V(fe),P({product:fe.product._id,basePrice:fe.basePrice.toString(),compareAtPrice:((gt=fe.compareAtPrice)==null?void 0:gt.toString())||""}),L(!0)},Gs=()=>{W({name:"",currency:"INR",zone:"",segment:"",isMaster:!1,parentBook:"",isOverride:!1,overridePriority:0,description:""}),f(null)},Ns=()=>{P({product:"",basePrice:"",compareAtPrice:""}),V(null)},wa=async fe=>{const gt=prompt("Enter name for the copied price book:",`${fe.name} (Copy)`);if(!gt||gt.trim()==="")return;l(!0);const kt=It.loading("Copying price book...");try{const cs=localStorage.getItem("token"),hs=await fetch(`/api/admin/price-books/${fe._id}/copy`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${cs}`},body:JSON.stringify({name:gt.trim()})});if(hs.ok){const ht=await hs.json();It.dismiss(kt),It.success(`Price book copied! ${ht.entriesCopied||0} product prices duplicated.`),Ie()}else{const ht=await hs.json();It.dismiss(kt),It.error(ht.message||"Failed to copy price book")}}catch(cs){console.error("Error copying price book:",cs),It.dismiss(kt),It.error("Failed to copy price book")}finally{l(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Of,{className:"text-indigo-600"}),"Price Book Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage price books and assign product prices for different pricing strategies"})]}),e.jsxs("div",{className:"mb-6 bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search price books...",value:Ne,onChange:fe=>C(fe.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),e.jsxs("select",{value:H,onChange:fe=>re(fe.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Zones"}),_.map(fe=>e.jsx("option",{value:fe._id,children:fe.name},fe._id))]}),e.jsxs("select",{value:je,onChange:fe=>ge(fe.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Segments"}),Q.map(fe=>e.jsx("option",{value:fe._id,children:fe.name},fe._id))]}),e.jsxs("button",{onClick:()=>{Gs(),m(!0)},className:"bg-indigo-600 text-white px-5 py-2.5 rounded-lg hover:bg-indigo-700 flex items-center gap-2 font-medium shadow-sm",children:[e.jsx(Ys,{size:20}),"New Price Book"]})]}),e.jsxs("div",{className:"flex gap-6 mt-4 pt-4 border-t border-gray-100 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),e.jsxs("span",{children:[s.filter(fe=>fe.isMaster).length," Master"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsxs("span",{children:[s.filter(fe=>fe.zone).length," Zone-Specific"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{children:[s.filter(fe=>fe.segment).length," Segment-Specific"]})]}),e.jsxs("div",{className:"ml-auto font-medium text-gray-800",children:[Ce.length," of ",s.length," price books"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i&&s.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-16",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"}),"Loading price books..."]}):Ce.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Of,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:s.length===0?"No price books found. Create one to get started.":"No price books match your search criteria."}),s.length>0&&e.jsx("button",{onClick:()=>{C(""),re(""),ge("")},className:"mt-4 text-indigo-600 hover:underline",children:"Clear filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Price Book"}),e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Scope"}),e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Currency"}),e.jsx("th",{className:"text-left px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"text-center px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:ue.map(fe=>e.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${fe.isMaster?"bg-indigo-50/30":""}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${fe.isMaster?"bg-indigo-100 text-indigo-600":fe.zone&&fe.segment?"bg-emerald-100 text-emerald-600":fe.zone?"bg-purple-100 text-purple-600":fe.segment?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(Of,{size:20})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[fe.name,fe.isMaster&&e.jsx(si,{size:14,className:"text-amber-500 fill-amber-500"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:fe.description||(fe.isMaster?"Base prices for all products":"Custom pricing rules")})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[fe.isMaster&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:"Master"}),fe.zone&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[" ",fe.zone.name]}),fe.segment&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[" ",fe.segment.name]}),!fe.zone&&!fe.segment&&!fe.isMaster&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Global"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-lg bg-gray-100 text-gray-800 font-mono text-sm font-medium",children:fe.currency})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:fe.createdAt?new Date(fe.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>Ps(fe),className:"p-2 rounded-lg bg-green-50 text-green-600 hover:bg-green-100 transition-colors",title:"View Prices",children:e.jsx(kr,{size:18})}),e.jsx("button",{onClick:()=>wa(fe),className:"p-2 rounded-lg bg-purple-50 text-purple-600 hover:bg-purple-100 transition-colors",title:"Copy Price Book",children:e.jsx(Uh,{size:18})}),e.jsx("button",{onClick:()=>us(fe),className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors",title:"Edit",children:e.jsx(Pd,{size:18})}),e.jsx("button",{onClick:()=>Dt(fe._id),className:`p-2 rounded-lg transition-colors ${fe.isMaster?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100"}`,title:fe.isMaster?"Cannot delete Master":"Delete",disabled:fe.isMaster,children:e.jsx(ta,{size:18})})]})})]},fe._id))})]})}),Ce.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",(O-1)*de+1," to ",Math.min(O*de,Ce.length)," of ",Ce.length]}),e.jsxs("select",{value:de,onChange:fe=>{we(Number(fe.target.value)),I(1)},className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:5,children:"5 per page"}),e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:20,children:"20 per page"}),e.jsx("option",{value:50,children:"50 per page"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>I(1),disabled:O===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),e.jsx("button",{onClick:()=>I(fe=>Math.max(1,fe-1)),disabled:O===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),Array.from({length:Math.min(5,Ge)},(fe,gt)=>{let kt;return Ge<=5||O<=3?kt=gt+1:O>=Ge-2?kt=Ge-4+gt:kt=O-2+gt,e.jsx("button",{onClick:()=>I(kt),className:`px-3 py-1.5 text-sm rounded-lg ${O===kt?"bg-indigo-600 text-white":"border border-gray-300 hover:bg-gray-100"}`,children:kt},kt)}),e.jsx("button",{onClick:()=>I(fe=>Math.min(Ge,fe+1)),disabled:O===Ge,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),e.jsx("button",{onClick:()=>I(Ge),disabled:O===Ge,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:u?"Edit Price Book":"Create Price Book"}),e.jsxs("form",{onSubmit:ot,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price Book Name *"}),e.jsx("input",{type:"text",value:J.name,onChange:fe=>W({...J,name:fe.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Standard Pricing, Seasonal Sale",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Currency *",J.zone&&e.jsx("span",{className:"ml-2 text-xs text-indigo-600 font-normal",children:"(Auto-set from GeoZone)"})]}),e.jsx("select",{value:J.currency,onChange:fe=>W({...J,currency:fe.target.value}),className:`w-full border rounded-lg px-3 py-2 ${J.zone?"bg-gray-100 cursor-not-allowed":""}`,disabled:!!J.zone,required:!0,children:_N.map(fe=>e.jsxs("option",{value:fe.code,children:[fe.code," (",fe.symbol,") - ",fe.name]},fe.code))}),J.zone?e.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:" Currency automatically set from selected GeoZone"}):e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a GeoZone to auto-set currency, or choose manually"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Geo Zone (Optional)"}),e.jsxs("select",{value:J.zone,onChange:fe=>{const gt=fe.target.value,kt=_.find(cs=>cs._id===gt);W({...J,zone:gt,currency:(kt==null?void 0:kt.currency_code)||J.currency})},className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"-- No Zone (Global) --"}),_.map(fe=>e.jsxs("option",{value:fe._id,children:[fe.name," (",fe.currency_code||"INR",")"]},fe._id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Limit these prices to a specific geographic area. Currency will be auto-set."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"User Segment (Optional)"}),e.jsxs("select",{value:J.segment,onChange:fe=>W({...J,segment:fe.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"-- No Segment (All Users) --"}),Q.map(fe=>e.jsxs("option",{value:fe._id,children:[fe.name," (",fe.code,")"]},fe._id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Limit these prices to a specific group of customers"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:J.isMaster,onChange:fe=>W({...J,isMaster:fe.target.checked}),className:"rounded text-indigo-600"}),e.jsx("span",{className:"text-sm font-bold text-indigo-900",children:" Master Price Book"})]}),e.jsx("p",{className:"text-xs text-indigo-700 mb-1",children:" Contains base prices for ALL products (foundation layer)"}),e.jsx("p",{className:"text-xs text-indigo-600",children:" Only ONE master book should exist. Zone/Segment books override these prices."})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),Gs()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(dc,{size:18}),i?"Saving...":"Save"]})]})]})]})}),g&&j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[j.name," - Product Prices"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage product prices for this price book"})]}),e.jsx("button",{onClick:()=>{p(!1),v(null),k([])},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ns,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{Ns(),L(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Ys,{size:20}),"Add Product Price"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Base Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Compare At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:E?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:'No products added yet. Click "Add Product Price" to get started.'})}):w.map(fe=>{var gt,kt,cs,hs;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[((gt=fe.product)==null?void 0:gt.image)&&e.jsx("img",{src:fe.product.image,alt:fe.product.name,className:"w-10 h-10 rounded object-cover"}),e.jsx("span",{className:"font-medium",children:((kt=fe.product)==null?void 0:kt.name)||"Unknown Product"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:((hs=(cs=fe.product)==null?void 0:cs.category)==null?void 0:hs.name)||"-"}),e.jsxs("td",{className:"px-6 py-4 font-semibold text-green-600",children:[j.currency," ",fe.basePrice.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:fe.compareAtPrice?`${j.currency} ${fe.compareAtPrice.toFixed(2)}`:"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Vt(fe),className:"text-blue-600 hover:text-blue-800",children:e.jsx(Pd,{size:18})}),e.jsx("button",{onClick:()=>_t(fe._id),className:"text-red-600 hover:text-red-800",children:e.jsx(ta,{size:18})})]})})]},fe._id)})})]})})]})]})}),F&&j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999]",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:M?"Edit Product Price":"Add Product Price"}),e.jsxs("form",{onSubmit:ze,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product *"}),e.jsxs("select",{value:z.product,onChange:fe=>P({...z,product:fe.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,disabled:!!M,children:[e.jsx("option",{value:"",children:"Select Product"}),le.map(fe=>e.jsx("option",{value:fe._id,children:fe.name},fe._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Base Price (",j.currency,") *"]}),e.jsx("input",{type:"number",step:"0.01",value:z.basePrice,onChange:fe=>P({...z,basePrice:fe.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"0.00",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Compare At Price (",j.currency,")"]}),e.jsx("input",{type:"number",step:"0.01",value:z.compareAtPrice,onChange:fe=>P({...z,compareAtPrice:fe.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"0.00 (optional)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Original price before discount (for showing savings)"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{L(!1),Ns()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(dc,{size:18}),E?"Saving...":"Save"]})]})]})]})}),(console.log(" Modal Render Check:",{showConflictModal:pe,hasConflictData:!!oe,conflictData:oe}),null),pe&&oe&&e.jsx(ZN,{conflict:oe,onResolve:Ot,onCancel:()=>{qe(!1),ce(null),T(!1)}})]})},fd=[{value:"geo_zone",label:"Geo Zone",type:"select",optionsSrc:"zones"},{value:"user_segment",label:"User Segment",type:"select",optionsSrc:"segments"},{value:"category",label:"Product Category",type:"select",optionsSrc:"categories"},{value:"product_id",label:"Specific Product",type:"select",optionsSrc:"products"},{value:"quantity",label:"Cart Quantity",type:"number"},{value:"order_value",label:"Order Value",type:"number"},{value:"day_of_week",label:"Day of Week (0-6)",type:"select",options:[{value:"0",label:"Sunday"},{value:"1",label:"Monday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"}]}],ik=[{value:"EQUALS",label:"Equals (=)"},{value:"NOT_EQUALS",label:"Not Equals (!=)"},{value:"GT",label:"Greater Than (>)"},{value:"LT",label:"Less Than (<)"},{value:"GTE",label:"Greater/Equal (>=)"},{value:"LTE",label:"Less/Equal (<=)"},{value:"IN",label:"In List (comma separated)"},{value:"CONTAINS",label:"Contains Text"}],lk=()=>{var ne,Ne;const[s,r]=y.useState([]),[i,l]=y.useState(!1),[d,m]=y.useState(null),[u,f]=y.useState(!1),[g,p]=y.useState([]),[j,v]=y.useState([]),[w,k]=y.useState([]),[E,T]=y.useState([]),[F,L]=y.useState([]),[M,V]=y.useState([]),[le,G]=y.useState("AND"),[z,P]=y.useState({appliesTo:"GLOBAL",modifierType:"PERCENT_DEC",value:0,priority:0,isActive:!0,isStackable:!0,reason:""});y.useEffect(()=>{J(),W()},[]);const J=async()=>{f(!0);try{const H=await(await fetch("/api/admin/price-modifiers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();r(H.modifiers||[])}catch(C){console.error("Failed to fetch modifiers:",C)}finally{f(!1)}},W=async()=>{try{const[C,H,re,je,ge]=await Promise.all([fetch("/api/admin/pricing/geo-zones",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/user-segments",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/products",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/attribute-types",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]),[O,I,de,we,Ce]=await Promise.all([C.json(),H.json(),re.json(),je.json(),ge.json()]);p(O.zones||[]),v(I.segments||[]),k(de.products||[]),T(we.attributeTypes||[]),L(Ce.categories||[])}catch(C){console.error("Failed to fetch lookup data:",C)}},oe=async()=>{try{const C=d?`/api/admin/price-modifiers/${d._id}`:"/api/admin/price-modifiers";(await fetch(C,{method:d?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(z)})).ok&&(J(),l(!1),m(null),P({appliesTo:"GLOBAL",modifierType:"PERCENT_DEC",value:0,priority:0,isActive:!0,isStackable:!0,reason:"",conditions:null}),V([]))}catch(C){console.error("Failed to save modifier:",C)}},ce=async C=>{if(confirm("Delete this modifier?"))try{(await fetch(`/api/admin/price-modifiers/${C}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok&&J()}catch(H){console.error("Failed to delete modifier:",H)}},pe=C=>{if(m(C),P({...C,validFrom:C.validFrom?new Date(C.validFrom).toISOString().split("T")[0]:void 0,validTo:C.validTo?new Date(C.validTo).toISOString().split("T")[0]:void 0}),C.appliesTo==="COMBINATION"&&C.conditions){const H=[],re=C.conditions.OR?"OR":"AND";G(re);const je=ge=>{ge.AND?ge.AND.forEach(O=>je(O)):ge.OR?ge.OR.forEach(O=>je(O)):ge.field&&H.push({id:Math.random().toString(36).substr(2,9),field:ge.field,operator:ge.operator,value:Array.isArray(ge.value)?ge.value.join(","):String(ge.value)})};je(C.conditions),H.length===0&&H.push({id:"1",field:"geo_zone",operator:"EQUALS",value:""}),V(H)}else V([]),G("AND");l(!0)},qe=()=>{V([...M,{id:Math.random().toString(36).substr(2,9),field:"geo_zone",operator:"EQUALS",value:""}])},R=C=>{V(M.filter(H=>H.id!==C))},Y=(C,H,re)=>{const je=M.map(ge=>ge.id===C?{...ge,[H]:re}:ge);V(je),_(je)},_=C=>{if(C.length===0){P(re=>({...re,conditions:null}));return}const H=C.map(re=>{let je=re.value;return re.operator==="IN"?je=re.value.split(",").map(ge=>ge.trim()):!isNaN(Number(re.value))&&re.value!==""&&(je=Number(re.value)),{field:re.field,operator:re.operator,value:je}});P(re=>({...re,conditions:{[le]:H}}))},X=C=>({GLOBAL:"bg-purple-100 text-purple-800",ZONE:"bg-blue-100 text-blue-800",SEGMENT:"bg-green-100 text-green-800",PRODUCT:"bg-orange-100 text-orange-800",ATTRIBUTE:"bg-pink-100 text-pink-800"})[C]||"bg-gray-100 text-gray-800",Q=C=>C.includes("INC")?"":C.includes("DEC")?"":"";return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Price Modifier Rules"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Create dynamic pricing rules for different scopes"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{m(null),P({appliesTo:"GLOBAL",modifierType:"PERCENT_DEC",value:0,priority:0,isActive:!0,isStackable:!0,reason:"",conditions:null}),V([{id:"1",field:"geo_zone",operator:"EQUALS",value:""}]),l(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(Ys,{className:"w-4 h-4"}),"Create New Modifier"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Active Modifiers"}),u?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading modifiers..."}):s.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No modifiers yet. Create one to get started!"}):e.jsx("div",{className:"space-y-4",children:s.map(C=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${X(C.appliesTo)}`,children:C.appliesTo}),e.jsx("span",{className:"text-2xl",children:Q(C.modifierType)}),e.jsx("span",{className:"font-semibold text-lg",children:C.modifierType.includes("PERCENT")?`${C.value}%`:`${C.value}`}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(Priority: ",C.priority,")"]}),!C.isActive&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:"Inactive"})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:C.reason||"No description"}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600",children:[C.geoZone&&e.jsxs("span",{children:["Zone: ",C.geoZone.name||C.geoZone]}),C.userSegment&&e.jsxs("span",{children:["Segment: ",C.userSegment.name||C.userSegment]}),C.product&&e.jsxs("span",{children:["Product: ",C.product.name||C.product]}),C.attributeType&&e.jsxs("span",{children:["Attribute: ",C.attributeType.attributeName||C.attributeType]}),C.minQuantity&&e.jsxs("span",{children:["Min Qty: ",C.minQuantity]}),C.maxQuantity&&e.jsxs("span",{children:["Max Qty: ",C.maxQuantity]}),C.validFrom&&e.jsxs("span",{children:["From: ",new Date(C.validFrom).toLocaleDateString()]}),C.validTo&&e.jsxs("span",{children:["To: ",new Date(C.validTo).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>pe(C),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>C._id&&ce(C._id),className:"px-3 py-1 text-red-600 hover:bg-red-50 rounded",children:"Delete"})]})]})},C._id))})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-semibold",children:[d?"Edit":"Create"," Price Modifier"]}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ns,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Applies To (Scope) *"}),e.jsxs("select",{value:z.appliesTo,onChange:C=>P({...z,appliesTo:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"GLOBAL",children:"Global (All Products)"}),e.jsx("option",{value:"ZONE",children:"Geo Zone"}),e.jsx("option",{value:"SEGMENT",children:"User Segment"}),e.jsx("option",{value:"PRODUCT",children:"Specific Product"}),e.jsx("option",{value:"ATTRIBUTE",children:"Product Attribute"}),e.jsx("option",{value:"COMBINATION",children:"Combination Rule (Advanced)"})]})]}),z.appliesTo==="ZONE"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Geo Zone *"}),e.jsxs("select",{value:z.geoZone||"",onChange:C=>P({...z,geoZone:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a zone..."}),g.map(C=>e.jsx("option",{value:C._id,children:C.name},C._id))]})]}),z.appliesTo==="SEGMENT"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Segment *"}),e.jsxs("select",{value:z.userSegment||"",onChange:C=>P({...z,userSegment:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a segment..."}),j.map(C=>e.jsxs("option",{value:C._id,children:[C.name," (",C.code,")"]},C._id))]})]}),z.appliesTo==="PRODUCT"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),e.jsxs("select",{value:z.product||"",onChange:C=>P({...z,product:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a product..."}),w.map(C=>e.jsx("option",{value:C._id,children:C.name},C._id))]})]}),z.appliesTo==="ATTRIBUTE"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attribute Type *"}),e.jsxs("select",{value:z.attributeType||"",onChange:C=>P({...z,attributeType:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select an attribute..."}),E.map(C=>e.jsx("option",{value:C._id,children:C.attributeName},C._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attribute Value"}),e.jsx("input",{type:"text",value:z.attributeValue||"",onChange:C=>P({...z,attributeValue:C.target.value}),placeholder:"e.g., GLOSSY, A4, etc.",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to apply to all values of this attribute"})]})]}),z.appliesTo==="COMBINATION"&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logic Operator"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{G("AND"),_(M)},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${le==="AND"?"bg-blue-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"AND (All must match)"}),e.jsx("button",{type:"button",onClick:()=>{G("OR"),_(M)},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${le==="OR"?"bg-green-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"OR (Any can match)"})]})]}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rule Conditions (",le==="AND"?"ALL must match":"ANY can match",")"]}),e.jsx("div",{className:"space-y-3",children:M.map(C=>{var H,re,je,ge;return e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("select",{value:C.field,onChange:O=>Y(C.id,"field",O.target.value),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-sm",children:fd.map(O=>e.jsx("option",{value:O.value,children:O.label},O.value))}),e.jsx("select",{value:C.operator,onChange:O=>Y(C.id,"operator",O.target.value),className:"w-32 px-2 py-1.5 border border-gray-300 rounded text-sm",children:ik.map(O=>e.jsx("option",{value:O.value,children:O.label},O.value))}),e.jsx("div",{className:"flex-1",children:((H=fd.find(O=>O.value===C.field))==null?void 0:H.optionsSrc)==="zones"?e.jsxs("select",{value:C.value,onChange:O=>Y(C.id,"value",O.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Zone"}),g.map(O=>e.jsx("option",{value:O._id,children:O.name},O._id))]}):((re=fd.find(O=>O.value===C.field))==null?void 0:re.optionsSrc)==="segments"?e.jsxs("select",{value:C.value,onChange:O=>Y(C.id,"value",O.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Segment"}),j.map(O=>e.jsx("option",{value:O._id,children:O.name},O._id))]}):((je=fd.find(O=>O.value===C.field))==null?void 0:je.optionsSrc)==="categories"?e.jsxs("select",{value:C.value,onChange:O=>Y(C.id,"value",O.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Category"}),F.map(O=>e.jsx("option",{value:O._id,children:O.name},O._id))]}):((ge=fd.find(O=>O.value===C.field))==null?void 0:ge.optionsSrc)==="products"?e.jsxs("select",{value:C.value,onChange:O=>Y(C.id,"value",O.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Product"}),w.map(O=>e.jsx("option",{value:O._id,children:O.name},O._id))]}):e.jsx("input",{type:"text",value:C.value,onChange:O=>Y(C.id,"value",O.target.value),placeholder:"Value",className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm"})}),e.jsx("button",{onClick:()=>R(C.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded",title:"Remove Condition",children:e.jsx(ns,{className:"w-4 h-4"})})]},C.id)})}),e.jsxs("button",{onClick:qe,className:"mt-3 text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(Ys,{className:"w-3 h-3"})," Add Condition"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modifier Type *"}),e.jsxs("select",{value:z.modifierType,onChange:C=>P({...z,modifierType:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"PERCENT_INC",children:"Percentage Increase (+%)"}),e.jsx("option",{value:"PERCENT_DEC",children:"Percentage Decrease (-%)"}),e.jsx("option",{value:"FLAT_INC",children:"Flat Amount Increase (+)"}),e.jsx("option",{value:"FLAT_DEC",children:"Flat Amount Decrease (-)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value *"}),e.jsx("input",{type:"number",value:z.value||"",onChange:C=>P({...z,value:parseFloat(C.target.value)}),placeholder:(ne=z.modifierType)!=null&&ne.includes("PERCENT")?"10":"500",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(Ne=z.modifierType)!=null&&Ne.includes("PERCENT")?"Enter percentage (e.g., 10 for 10%)":"Enter flat amount (e.g., 500 for 500)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("input",{type:"number",value:z.priority||0,onChange:C=>P({...z,priority:parseInt(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher priority modifiers are applied first"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Quantity"}),e.jsx("input",{type:"number",value:z.minQuantity||"",onChange:C=>P({...z,minQuantity:parseInt(C.target.value)||void 0}),placeholder:"No minimum",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Quantity"}),e.jsx("input",{type:"number",value:z.maxQuantity||"",onChange:C=>P({...z,maxQuantity:parseInt(C.target.value)||void 0}),placeholder:"No maximum",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),e.jsx("input",{type:"date",value:z.validFrom||"",onChange:C=>P({...z,validFrom:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid To"}),e.jsx("input",{type:"date",value:z.validTo||"",onChange:C=>P({...z,validTo:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason / Description *"}),e.jsx("textarea",{value:z.reason||"",onChange:C=>P({...z,reason:C.target.value}),placeholder:"e.g., Summer Sale 2024, Corporate Bulk Discount, etc.",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"stacking-controls space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Modifier Behavior"}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-3 bg-white rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:z.isActive,onChange:C=>P({...z,isActive:C.target.checked}),className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Active"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Modifier is currently enabled and will be applied"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-3 bg-white rounded-lg border-2 border-gray-200 hover:border-green-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:z.isStackable,onChange:C=>{const H=C.target.checked;P({...z,isStackable:H})},className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Allow Stacking"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Can combine with other modifiers (e.g., 5% + 10% = 15%)"})]})]}),z.isStackable&&e.jsx("div",{className:"info-badge bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-800 flex items-start gap-2",children:[e.jsx("span",{className:"text-base",children:""}),e.jsx("span",{children:"Stackable modifiers can be combined. If a user qualifies for multiple stackable modifiers, all will be applied sequentially."})]})}),!z.isStackable&&e.jsx("div",{className:"warning-badge bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-yellow-800 flex items-start gap-2",children:[e.jsx("span",{className:"text-base",children:""}),e.jsx("span",{children:"Non-stackable modifiers will be applied based on priority. Only the highest priority modifier will be used."})]})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:oe,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[e.jsx(dc,{className:"w-4 h-4"}),d?"Update":"Create"," Modifier"]})]})]})})]})},ok=()=>{var J,W,oe,ce;const[s,r]=y.useState([]),[i,l]=y.useState(!1),[d,m]=y.useState(null),[u,f]=y.useState(null),[g,p]=y.useState(!1),[j,v]=y.useState(""),[w,k]=y.useState(""),[E,T]=y.useState(""),[F,L]=y.useState(1),[M,V]=y.useState({currentPage:1,totalPages:1,totalLogs:0,limit:20});y.useEffect(()=>{le()},[F,j,w,E]);const le=async()=>{l(!0),m(null);try{const pe=new URLSearchParams({page:F.toString(),limit:"20"});j&&pe.append("search",j),w&&pe.append("startDate",w),E&&pe.append("endDate",E);const R=await(await fetch(`${Te}/admin/pricing-logs?${pe}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();R.success?(r(R.logs||[]),V(R.pagination)):m(R.message||"Failed to fetch logs")}catch(pe){console.error("Failed to fetch pricing logs:",pe),m("Failed to fetch pricing logs. Please try again.")}finally{l(!1)}},G=pe=>{f(pe),p(!0)},z=pe=>new Date(pe).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=pe=>`${pe.toFixed(2)}`;return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Kr,{className:"w-7 h-7 md:w-8 md:h-8"}),"Pricing Audit Logs"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"View all pricing calculations and applied modifiers"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:j,onChange:pe=>{v(pe.target.value),L(1)},placeholder:"Order, product, user...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"date",value:w,onChange:pe=>{k(pe.target.value),L(1)},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"date",value:E,onChange:pe=>{T(pe.target.value),L(1)},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})}),d&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start gap-2",children:[e.jsx(Ts,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:d})]}),i?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[e.jsx(Kt,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading pricing logs..."})]}):s.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[e.jsx(Kr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No pricing logs found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Logs will appear here when orders are created"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:s.map(pe=>{var qe,R,Y,_,X;return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[((qe=pe.product)==null?void 0:qe.image)&&e.jsx("img",{src:pe.product.image,alt:pe.product.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 text-lg",children:["Order #",pe.orderNumber]}),e.jsx("p",{className:"text-gray-700 mt-1",children:((R=pe.product)==null?void 0:R.name)||"Unknown Product"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(Y=pe.user)==null?void 0:Y.name," (",(_=pe.user)==null?void 0:_.email,")"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["Qty: ",pe.quantity]}),e.jsx("span",{children:""}),e.jsx("span",{className:"font-semibold text-green-600",children:P(pe.totalPrice)}),e.jsx("span",{children:""}),e.jsxs("span",{children:[((X=pe.modifiers)==null?void 0:X.length)||0," modifiers"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:z(pe.createdAt)})]})]})}),e.jsxs("button",{onClick:()=>G(pe),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx(kr,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"View Details"}),e.jsx("span",{className:"sm:hidden",children:"Details"})]})]})},pe.orderId)})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing page ",M.currentPage," of ",M.totalPages," (",M.totalLogs," total logs)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>L(pe=>Math.max(1,pe-1)),disabled:F===1,className:"flex items-center gap-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Fl,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),e.jsx("span",{className:"px-4 py-2 text-sm font-medium",children:F}),e.jsxs("button",{onClick:()=>L(pe=>Math.min(M.totalPages,pe+1)),disabled:F===M.totalPages,className:"flex items-center gap-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(Ha,{className:"w-4 h-4"})]})]})]})})]}),g&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 md:p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Pricing Details"}),e.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ns,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Order Information"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Order Number:"}),e.jsxs("span",{className:"font-semibold",children:["#",u.orderNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Product:"}),e.jsx("span",{className:"font-semibold",children:(J=u.product)==null?void 0:J.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"font-semibold",children:(W=u.user)==null?void 0:W.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"font-semibold",children:(oe=u.user)==null?void 0:oe.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"font-semibold",children:z(u.createdAt)})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3",children:["Applied Modifiers (",((ce=u.modifiers)==null?void 0:ce.length)||0,")"]}),u.modifiers&&u.modifiers.length>0?e.jsx("div",{className:"space-y-3",children:u.modifiers.map((pe,qe)=>e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:[pe.scope," Modifier"]}),e.jsxs("span",{className:`text-sm font-bold ${pe.afterAmount>pe.beforeAmount?"text-red-600":"text-green-600"}`,children:[pe.afterAmount>pe.beforeAmount?"+":"",P(pe.afterAmount-pe.beforeAmount)]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:pe.reason||"No reason provided"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsxs("span",{children:["Before: ",P(pe.beforeAmount)]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["After: ",P(pe.afterAmount)]})]})]},pe._id))}):e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 rounded-lg p-4",children:"No modifiers were applied to this order"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Price Summary"}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total Payable"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:P(u.totalPrice)})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Quantity: ",u.quantity," units"]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 p-4 md:p-6",children:e.jsx("button",{onClick:()=>p(!1),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})},ck=({value:s,onChange:r,onCurrencyChange:i,required:l=!0,disabled:d=!1,showCurrency:m=!0,showZipCode:u=!0,showCityDropdown:f=!0,placeholder:g={},className:p=""})=>{const[j,v]=y.useState([]),[w,k]=y.useState([]),[E,T]=y.useState([]),[F,L]=y.useState(""),[M,V]=y.useState({countries:!1,states:!1,cities:!1,currency:!1}),[le,G]=y.useState({countries:"",states:"",cities:""});y.useEffect(()=>{z()},[]),y.useEffect(()=>{s.country?(P(s.country),W(s.country)):(k([]),L(""))},[s.country]),y.useEffect(()=>{s.country&&s.state&&f?J(s.country,s.state):T([])},[s.state,f]);const z=async()=>{V(R=>({...R,countries:!0})),G(R=>({...R,countries:""}));try{const R=localStorage.getItem("token"),_=await(await fetch("/api/admin/locations/countries",{headers:{Authorization:`Bearer ${R}`}})).json();_.success?v(_.data):G(X=>({...X,countries:"Failed to load countries"}))}catch(R){console.error("Error fetching countries:",R),G(Y=>({...Y,countries:"Network error"}))}finally{V(R=>({...R,countries:!1}))}},P=async R=>{V(Y=>({...Y,states:!0})),G(Y=>({...Y,states:""}));try{const Y=localStorage.getItem("token"),X=await(await fetch(`/api/admin/locations/states?country=${R}`,{headers:{Authorization:`Bearer ${Y}`}})).json();X.success?k(X.data):G(Q=>({...Q,states:"Failed to load states"}))}catch(Y){console.error("Error fetching states:",Y),G(_=>({..._,states:"Network error"}))}finally{V(Y=>({...Y,states:!1}))}},J=async(R,Y)=>{V(_=>({..._,cities:!0})),G(_=>({..._,cities:""}));try{const _=localStorage.getItem("token"),Q=await(await fetch(`/api/admin/locations/cities?country=${R}&state=${Y}`,{headers:{Authorization:`Bearer ${_}`}})).json();Q.success?T(Q.data):G(ne=>({...ne,cities:"Failed to load cities"}))}catch(_){console.error("Error fetching cities:",_),G(X=>({...X,cities:"Network error"}))}finally{V(_=>({..._,cities:!1}))}},W=async R=>{V(Y=>({...Y,currency:!0}));try{const Y=localStorage.getItem("token"),X=await(await fetch(`/api/admin/locations/currency?country=${R}`,{headers:{Authorization:`Bearer ${Y}`}})).json();X.success&&X.data.currency&&(L(X.data.currency),i&&i(X.data.currency))}catch(Y){console.error("Error fetching currency:",Y)}finally{V(Y=>({...Y,currency:!1}))}},oe=R=>{const Y=j.find(_=>_.code===R.target.value);r({country:R.target.value,countryName:(Y==null?void 0:Y.name)||"",state:void 0,stateName:void 0,city:void 0,cityName:void 0,zipCode:void 0})},ce=R=>{const Y=w.find(_=>_.stateCode===R.target.value);r({...s,state:R.target.value,stateName:(Y==null?void 0:Y.name)||"",city:void 0,cityName:void 0,zipCode:void 0})},pe=R=>{const Y=E.find(_=>_.name===R.target.value);r({...s,city:R.target.value,cityName:(Y==null?void 0:Y.name)||""})},qe=R=>{r({...s,zipCode:R.target.value})};return e.jsxs("div",{className:`space-y-4 ${p}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_4,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Location Selection"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(P4,{className:"inline w-4 h-4 mr-1"}),"Country ",l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:s.country||"",onChange:oe,disabled:d||M.countries,required:l,className:`w-full px-4 py-3 pl-4 pr-10 text-sm border-2 border-gray-300 rounded-lg \r
                                 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all\r
                                 disabled:bg-gray-100 disabled:cursor-not-allowed\r
                                 hover:border-gray-400 appearance-none cursor-pointer`,children:[e.jsx("option",{value:"",children:g.country||" Select a country..."}),j.map(R=>e.jsxs("option",{value:R.code,children:[R.flag," ",R.name]},R.code))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:M.countries?e.jsx(lm,{className:"w-5 h-5 text-blue-500 animate-spin"}):s.country?e.jsx(_n,{className:"w-5 h-5 text-green-500"}):e.jsx(ic,{className:"w-5 h-5 text-gray-400"})})]}),le.countries&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:le.countries})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ti,{className:"inline w-4 h-4 mr-1"}),"State/Province ",l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:s.state||"",onChange:ce,disabled:d||!s.country||M.states||w.length===0,required:l,className:`w-full px-4 py-3 pl-4 pr-10 text-sm border-2 border-gray-300 rounded-lg \r
                                 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all\r
                                 disabled:bg-gray-100 disabled:cursor-not-allowed\r
                                 hover:border-gray-400 appearance-none cursor-pointer`,children:[e.jsx("option",{value:"",children:s.country?M.states?"Loading states...":w.length===0?"No states available":g.state||" Select a state/province...":" Select country first"}),w.map(R=>e.jsx("option",{value:R.stateCode,children:R.name},R.stateCode))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:M.states?e.jsx(lm,{className:"w-5 h-5 text-blue-500 animate-spin"}):s.state?e.jsx(_n,{className:"w-5 h-5 text-green-500"}):e.jsx(ic,{className:"w-5 h-5 text-gray-400"})})]}),le.states&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:le.states})]}),f&&e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ti,{className:"inline w-4 h-4 mr-1"}),"City ",l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:s.city||"",onChange:pe,disabled:d||!s.state||M.cities||E.length===0,required:l,className:`w-full px-4 py-3 pl-4 pr-10 text-sm border-2 border-gray-300 rounded-lg \r
                                     focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all\r
                                     disabled:bg-gray-100 disabled:cursor-not-allowed\r
                                     hover:border-gray-400 appearance-none cursor-pointer`,children:[e.jsx("option",{value:"",children:s.state?M.cities?"Loading cities...":E.length===0?"No cities available":g.city||" Select a city...":" Select state first"}),E.map((R,Y)=>e.jsx("option",{value:R.name,children:R.name},`${R.name}-${Y}`))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:M.cities?e.jsx(lm,{className:"w-5 h-5 text-blue-500 animate-spin"}):s.city?e.jsx(_n,{className:"w-5 h-5 text-green-500"}):e.jsx(ic,{className:"w-5 h-5 text-gray-400"})})]}),le.cities&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:le.cities})]}),u&&e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Zip/Pin Code"}),e.jsx("input",{type:"text",value:s.zipCode||"",onChange:qe,disabled:d||!s.state,placeholder:g.zipCode||"Enter zip/pin code...",className:`w-full px-4 py-3 text-sm border-2 border-gray-300 rounded-lg \r
                                 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all\r
                                 disabled:bg-gray-100 disabled:cursor-not-allowed\r
                                 hover:border-gray-400`})]}),m&&s.country&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ko,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Auto-Detected Currency:"})]}),e.jsx("div",{className:"flex items-center gap-2",children:M.currency?e.jsx(lm,{className:"w-4 h-4 text-green-600 animate-spin"}):e.jsx("span",{className:"text-lg font-bold text-green-700",children:F||"USD"})})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Currency is automatically set based on the selected country"})]}),(s.country||s.state||s.city)&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border-l-4 border-blue-500 rounded",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-1",children:"Selected Location:"}),e.jsx("p",{className:"text-sm text-gray-700",children:[s.cityName,s.stateName,s.countryName].filter(Boolean).join("  ")||"No location selected"})]})]})},dk=(s=[])=>{const[r,i]=y.useState(""),[l,d]=y.useState([]),[m,u]=y.useState(!1),[f,g]=y.useState(!1),p=y.useCallback(async E=>{if(!E||E.length<2){d([]),u(!1);return}g(!0);try{const F={Authorization:`Bearer ${localStorage.getItem("token")}`},L=fetch(`/api/admin/pricing/locations/suggest-region?query=${encodeURIComponent(E)}`,{headers:F}).then(J=>J.json()),M=fetch(`/api/admin/pricing/locations/search?query=${encodeURIComponent(E)}`,{headers:F}).then(J=>J.json()),[V,le]=await Promise.all([L,M]),G=E.toLowerCase(),z=s.filter(J=>{var W;return J.name.toLowerCase().includes(G)||((W=J.code)==null?void 0:W.toLowerCase().includes(G))}).map(J=>({...J,source:"existing",pincodeRanges:J.pincodeRanges||[]})),P=[...V.suggestion?[V.suggestion]:[],...z,...le.locations||[]];d(P),u(!0)}catch(T){console.error("Location search failed:",T),d([])}finally{g(!1)}},[s]),j=y.useCallback(E=>{i(E),p(E)},[p]),v=y.useCallback(()=>{i(""),d([]),u(!1)},[]),w=y.useCallback(()=>{u(!1)},[]),k=y.useCallback(()=>{l.length>0&&u(!0)},[l]);return{locationSearch:r,locationSuggestions:l,showSuggestions:m,isLoading:f,handleSearchChange:j,clearSearch:v,closeSuggestions:w,openSuggestions:k,setLocationSearch:i}},uk=({locationSearch:s,locationSuggestions:r,showSuggestions:i,isLoading:l,onSearchChange:d,onSelectLocation:m,onFocus:u,onClose:f})=>(y.useEffect(()=>{const g=p=>{const j=p.target;i&&!j.closest(".location-autocomplete-container")&&f()};return document.addEventListener("click",g),()=>document.removeEventListener("click",g)},[i,f]),e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 location-autocomplete-container",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Quick Search (Optional)"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:'Search for states, union territories, districts, or type "West India", "North India" for smart suggestions'}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s,onChange:g=>d(g.target.value),onFocus:u,placeholder:"Type state name, code, or region (e.g., Maharashtra, MH, West India)...",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10"}),l&&e.jsx("div",{className:"absolute right-3 top-2.5",children:e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 border-t-transparent rounded-full"})}),i&&r.length>0&&e.jsx("div",{className:"absolute z-50 mt-2 w-full border border-gray-200 rounded-lg bg-white shadow-xl max-h-96 overflow-y-auto",children:r.map((g,p)=>e.jsx(mk,{location:g,onClick:()=>m(g)},p))}),i&&r.length===0&&!l&&s.length>=2&&e.jsxs("div",{className:"absolute z-50 mt-2 w-full border border-gray-200 rounded-lg bg-white shadow-xl p-4 text-center text-gray-500",children:['No locations found for "',s,'"']})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Or fill the form manually below"})]})),mk=({location:s,onClick:r})=>{const i=()=>{switch(s.source){case"smart-suggestion":return"hover:bg-purple-50 bg-purple-25 border-l-4 border-purple-500";case"existing":return"hover:bg-green-50 bg-green-25";default:return"hover:bg-blue-50"}},l=()=>{switch(s.source){case"smart-suggestion":return"bg-purple-100 text-purple-700";case"existing":return"bg-green-100 text-green-700";default:return"bg-blue-100 text-blue-700"}},d=()=>{switch(s.source){case"smart-suggestion":return" Smart";case"existing":return"Existing";default:return"Database"}},m=()=>{switch(s.source){case"smart-suggestion":return"";case"existing":return"";default:return""}};return e.jsx("div",{onClick:r,className:`px-4 py-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ${i()}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[m()," ",s.displayName||s.name]}),s.description&&e.jsx("div",{className:"text-xs text-purple-600 mt-1 font-medium",children:s.description}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.level,"  Code: ",s.code,s.stateName&&`  State: ${s.stateName}`,s.districtCount&&`  Districts: ${s.districtCount}`]}),s.pincodeRanges&&s.pincodeRanges.length>0&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[s.pincodeRanges.length," pincode range(s) ",s.pincodeRanges[0].start," - ",s.pincodeRanges[s.pincodeRanges.length-1].end]}),s.statesIncluded&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Includes: ",s.statesIncluded.slice(0,3).join(", "),s.statesIncluded.length>3&&` +${s.statesIncluded.length-3} more`]})]}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded font-semibold ${l()}`,children:d()})]})})},pk=(s,r)=>r.find(i=>i.name.toUpperCase()===s.toUpperCase()),fk=(s,r,i)=>{if(s.source==="existing")return i&&s._id?(i(s),{action:"edit",data:s}):{action:"cancel"};const l=pk(s.name,r);return l?confirm(`A zone named "${s.name}" already exists.

Click OK to create "${s.name} - Custom"
Click Cancel to edit the existing zone`)?{action:"create-custom",data:{name:`${s.name} - Custom`,code:s.code,level:s.level,currency_code:s.currency||"INR",pincodeRanges:s.pincodeRanges||[]}}:(i&&i(l),{action:"edit",data:l}):{action:"create",data:{name:s.name,code:s.code,level:s.level,currency_code:s.currency||"INR",pincodeRanges:s.pincodeRanges||[]}}},hk=()=>{const[s,r]=y.useState([]),[i,l]=y.useState(!1),[d,m]=y.useState(!1),[u,f]=y.useState(null),[g,p]=y.useState({name:"",code:"",currency_code:"INR",level:"COUNTRY",pincodeRanges:[{start:0,end:0}],isActive:!0}),[j,v]=y.useState(1),w=8,[k,E]=y.useState(1),[T,F]=y.useState({country:"",countryName:"",state:"",stateName:"",city:"",cityName:""}),{locationSearch:L,locationSuggestions:M,showSuggestions:V,isLoading:le,handleSearchChange:G,clearSearch:z,closeSuggestions:P,openSuggestions:J}=dk(s);y.useEffect(()=>{W()},[]);const W=async()=>{l(!0);try{const I=localStorage.getItem("token"),de=await fetch("/api/admin/pricing/geo-zones",{headers:{Authorization:`Bearer ${I}`}});if(de.ok){const we=await de.json();r(we.zones||[])}}catch(I){console.error("Failed to fetch geo zones:",I)}finally{l(!1)}},oe=async I=>{I.preventDefault(),l(!0);try{const de=localStorage.getItem("token"),we=u?`/api/admin/pricing/geo-zones/${u._id}`:"/api/admin/pricing/geo-zones",Ce=await fetch(we,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${de}`},body:JSON.stringify(g)});if(Ce.ok)It.success(u?"Geo zone updated successfully!":"Geo zone created successfully!"),m(!1),_(),W();else{const Ge=Ce.headers.get("content-type");let ue="Failed to save geo zone";if(Ge&&Ge.includes("application/json"))try{ue=(await Ce.json()).message||ue}catch(se){console.error("Failed to parse error response:",se)}else try{const se=await Ce.text();se&&(ue=se)}catch(se){console.error("Failed to parse text response:",se)}It.error(ue)}}catch(de){console.error("Error saving geo zone:",de),It.error("Failed to save geo zone")}finally{l(!1)}},ce=async(I,de=!1)=>{if(!(!de&&!confirm("Are you sure you want to delete this geo zone?")))try{const we=localStorage.getItem("token"),Ce=de?`/api/admin/pricing/geo-zones/${I}?force=true`:`/api/admin/pricing/geo-zones/${I}`,Ge=await fetch(Ce,{method:"DELETE",headers:{Authorization:`Bearer ${we}`}});if(Ge.ok)It.dismiss(),It.success("Geo zone deleted successfully"),W();else{const ue=await Ge.json();if(Ge.status===400&&ue.requiresConfirmation){if(confirm(`${ue.message}

Do you want to FORCE DELETE? This action cannot be undone.`)){await ce(I,!0);return}}else It.error(ue.message||"Failed to delete geo zone")}}catch(we){console.error("Error deleting geo zone:",we),alert("Failed to delete geo zone")}},pe=I=>{f(I),p({name:I.name,code:I.code,currency_code:I.currency_code||I.currency||"INR",level:I.level||"COUNTRY",pincodeRanges:I.pincodeRanges&&I.pincodeRanges.length>0?I.pincodeRanges.map(de=>({...de})):[{start:0,end:0}],isActive:I.isActive}),E(3),m(!0)},qe=I=>{f(null),p({name:`${I.name} (Copy)`,code:`${I.code}_COPY`,currency_code:I.currency_code||I.currency||"INR",level:I.level||"COUNTRY",pincodeRanges:I.pincodeRanges.map(de=>({...de})),isActive:!0}),m(!0)},R=async I=>{var Ce;const de=(Ce=I.target.files)==null?void 0:Ce[0];if(!de)return;const we=new FileReader;we.onload=async Ge=>{var ue;try{const se=(ue=Ge.target)==null?void 0:ue.result;if(!se)return;const Ie=se.split(`
`),Qe=Ie[0].split(",").map(_t=>_t.trim()),tt=Ie.slice(1).filter(_t=>_t.trim()).map(_t=>{const Dt=_t.split(",").map(Ps=>Ps.trim()),us={};return Qe.forEach((Ps,Vt)=>{us[Ps]=Dt[Vt]}),us.pincodeStart&&(us.pincodeStart=parseInt(us.pincodeStart)),us.pincodeEnd&&(us.pincodeEnd=parseInt(us.pincodeEnd)),us});if(tt.length===0){It.error("No valid data found in CSV");return}l(!0);const ot=localStorage.getItem("token"),Ot=await(await fetch("/api/admin/pricing/geo-zones/bulk-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ot}`},body:JSON.stringify({zones:tt})})).json();Ot.success?(It.success(`Import successful! Created: ${Ot.results.created}, Updated: ${Ot.results.updated}`),W()):It.error("Import failed: "+Ot.message)}catch(se){console.error("Import error:",se),It.error("Error processing file")}finally{l(!1),I.target.value=""}},we.readAsText(de)},Y=()=>{const I=["name,code,level,currency_code,pincodeStart,pincodeEnd"],de="South Zone,SZ,DISTRICT,INR,500000,509999",we=new Blob([[I,de].join(`
`)],{type:"text/csv"}),Ce=window.URL.createObjectURL(we),Ge=document.createElement("a");Ge.href=Ce,Ge.download="geo_zones_template.csv",Ge.click()},_=()=>{p({name:"",code:"",currency_code:"INR",level:"COUNTRY",pincodeRanges:[{start:0,end:0}],isActive:!0}),F({country:"",countryName:"",state:"",stateName:"",city:"",cityName:""}),f(null),z(),E(1)},X=I=>{const de=fk(I,s,pe);(de.action==="create"||de.action==="create-custom")&&(p({...g,...de.data}),E(3),It.success("Location details loaded. Please verify.")),z()},Q=()=>{p({...g,pincodeRanges:[...g.pincodeRanges,{start:0,end:0}]})},ne=I=>{p({...g,pincodeRanges:g.pincodeRanges.filter((de,we)=>we!==I)})},Ne=(I,de,we)=>{const Ce=[...g.pincodeRanges];Ce[I][de]=we,p({...g,pincodeRanges:Ce})},C=j*w,H=C-w,re=s.slice(H,C),je=Math.ceil(s.length/w),ge=()=>{if(k===2&&(!g.name||!g.code||!g.currency_code)){It.error("Please fill in all required fields (Name, Code, Currency)");return}E(I=>I+1)},O=()=>E(I=>I-1);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ti,{className:"text-blue-600"}),"Geo Zone Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage geographical zones for location-based pricing"})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 justify-between items-center",children:[e.jsxs("button",{onClick:()=>{_(),m(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Ys,{size:20}),"Create Geo Zone"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Y,className:"text-gray-600 hover:text-gray-800 px-3 py-2 border rounded-lg flex items-center gap-2",title:"Download CSV Template",children:[e.jsx(Kr,{size:18}),"Template"]}),e.jsxs("label",{className:"cursor-pointer bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Xo,{size:20}),"Import CSV",e.jsx("input",{type:"file",accept:".csv",onChange:R,className:"hidden"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow flex flex-col ",children:[e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full relative",children:[e.jsx("thead",{className:"bg-gray-50 border-b sticky top-0 z-10 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Currency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Pincode Ranges"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No geo zones found. Create one to get started."})}):re.map(I=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:I.name}),e.jsx("td",{className:"px-6 py-4",children:I.code}),e.jsx("td",{className:"px-6 py-4",children:I.currency_code||I.currency}),e.jsx("td",{className:"px-6 py-4",children:I.pincodeRanges&&I.pincodeRanges.length>0?I.pincodeRanges.map((de,we)=>e.jsxs("div",{className:"text-sm",children:[de.start," - ",de.end]},we)):e.jsx("span",{className:"text-gray-400 text-sm",children:"No ranges"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${I.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:I.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>pe(I),className:"text-blue-600 hover:text-blue-800",children:e.jsx(Pd,{size:18})}),e.jsx("button",{onClick:()=>qe(I),className:"text-green-600 hover:text-green-800",title:"Duplicate Zone",children:e.jsx(Uh,{size:18})}),e.jsx("button",{onClick:()=>ce(I._id),className:"text-red-600 hover:text-red-800",title:"Delete Zone",children:e.jsx(ta,{size:18})})]})})]},I._id))})]})}),s.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t flex flex-col sm:flex-row gap-4 sm:gap-0 items-center justify-between bg-gray-50",children:[e.jsxs("span",{className:"text-sm text-gray-700 order-2 sm:order-1",children:["Showing ",e.jsx("span",{className:"font-medium",children:H+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(C,s.length)})," of ",e.jsx("span",{className:"font-medium",children:s.length})," results"]}),e.jsxs("div",{className:"flex gap-2 order-1 sm:order-2 w-full sm:w-auto justify-between sm:justify-start",children:[e.jsxs("button",{onClick:()=>v(I=>Math.max(I-1,1)),disabled:j===1,className:"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e.jsx(Fl,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsxs("span",{className:"px-3 py-1 border rounded bg-white text-gray-700 whitespace-nowrap",children:["Page ",j," of ",je]}),e.jsxs("button",{onClick:()=>v(I=>Math.min(I+1,je)),disabled:j===je,className:"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"}),e.jsx(Ha,{size:16})]})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between bg-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:u?"Edit Geo Zone":"Create Geo Zone"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Step ",k," of 3"]})]}),e.jsx("button",{type:"button",onClick:()=>{m(!1),_()},className:"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-full",children:e.jsx(ns,{size:24})})]}),e.jsx("div",{className:"px-12 py-6 bg-gray-50 border-b",children:e.jsxs("div",{className:"relative flex justify-between items-center",children:[e.jsx("div",{className:"absolute top-5 left-0 right-0 h-1 -translate-y-1/2 bg-gray-200 rounded-full"}),e.jsx("div",{className:"absolute top-5 left-0 h-1 -translate-y-1/2 bg-blue-600 rounded-full transition-all duration-300",style:{width:`${(k-1)/2*100}%`}}),e.jsxs("div",{className:`relative z-10 flex flex-col items-center gap-2 ${k>=1?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg border-4 transition-all duration-300 bg-white ${k>=1?"border-blue-600 text-blue-600 scale-110":"border-gray-300 text-gray-400"}`,children:"1"}),e.jsx("span",{className:"text-sm font-semibold",children:"Location"})]}),e.jsxs("div",{className:`relative z-10 flex flex-col items-center gap-2 ${k>=2?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg border-4 transition-all duration-300 bg-white ${k>=2?"border-blue-600 text-blue-600 scale-110":"border-gray-300 text-gray-400"}`,children:"2"}),e.jsx("span",{className:"text-sm font-semibold",children:"Details"})]}),e.jsxs("div",{className:`relative z-10 flex flex-col items-center gap-2 ${k>=3?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg border-4 transition-all duration-300 bg-white ${k>=3?"border-blue-600 text-blue-600 scale-110":"border-gray-300 text-gray-400"}`,children:"3"}),e.jsx("span",{className:"text-sm font-semibold",children:"Validation"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-8 py-8",children:e.jsxs("form",{onSubmit:oe,id:"geoZoneForm",className:"max-w-3xl mx-auto",children:[k===1&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Where is this zone located?"}),e.jsx("p",{className:"text-gray-500",children:"Quickly search for a location in India or manually select using dropdowns."})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[" Quick Search (India Only)",e.jsx("span",{className:"text-xs font-normal text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full",children:"Recommended"})]})}),e.jsx(uk,{locationSearch:L,locationSuggestions:M,showSuggestions:V,isLoading:le,onSearchChange:G,onSelectLocation:X,onFocus:J,onClose:P}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Search by City, State, or Pincode (e.g., "Mumbai", "Maharashtra", "400001")'})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-3 bg-white text-gray-500 font-medium",children:"OR Select Manually"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"International / Manual Selection"}),e.jsx(ck,{value:T,onChange:async I=>{if(F(I),p({...g,name:I.stateName||I.countryName||"",code:I.state||I.country||"",level:I.city?"CITY":I.state?"STATE":"COUNTRY"}),I.country==="IN"&&I.state)try{const de=localStorage.getItem("token"),Ce=await(await fetch(`/api/admin/locations/pincode-ranges?country=IN&region=${I.state}`,{headers:{Authorization:`Bearer ${de}`}})).json();Ce.success&&Ce.data.available&&p(Ge=>({...Ge,pincodeRanges:[{start:parseInt(Ce.data.start),end:parseInt(Ce.data.end)}]}))}catch(de){console.error("Failed to fetch pincode ranges:",de)}},onCurrencyChange:I=>p({...g,currency_code:I}),required:!1,showCurrency:!1,showZipCode:!1,showCityDropdown:!0})]})]})]}),k===2&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Zone Configuration"}),e.jsx("p",{className:"text-gray-500",children:"Review and customize the zone details."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Zone Name *"}),e.jsx("input",{type:"text",value:g.name,onChange:I=>p({...g,name:I.target.value}),className:"w-full border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",placeholder:"e.g., Maharashtra",required:!0})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Zone Code *"}),e.jsx("input",{type:"text",value:g.code,onChange:I=>p({...g,code:I.target.value.toUpperCase()}),className:"w-full border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",placeholder:"e.g., MH",required:!0})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Currency *"}),e.jsx("select",{value:g.currency_code,onChange:I=>p({...g,currency_code:I.target.value}),className:"w-full border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",required:!0,children:_N.map(I=>e.jsxs("option",{value:I.code,children:[I.code," (",I.symbol,") - ",I.name]},I.code))})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Level *"}),e.jsxs("select",{value:g.level,onChange:I=>p({...g,level:I.target.value}),className:"w-full border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",required:!0,children:[e.jsx("option",{value:"COUNTRY",children:"Country"}),e.jsx("option",{value:"STATE",children:"State"}),e.jsx("option",{value:"UT",children:"Union Territory"}),e.jsx("option",{value:"DISTRICT",children:"District"}),e.jsx("option",{value:"CITY",children:"City"})]})]})]})]}),k===3&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Final Validation"}),e.jsx("p",{className:"text-gray-500",children:"Define coverage ranges and activate the zone."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[" Pincode Ranges",e.jsx("span",{className:"text-xs font-normal text-gray-500 px-2 py-1 bg-white rounded border",children:"Optional"})]}),e.jsx("div",{className:"space-y-3",children:g.pincodeRanges.map((I,de)=>e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",value:I.start||"",onChange:we=>Ne(de,"start",parseInt(we.target.value)),className:"w-full border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:"Start"})}),e.jsx("span",{className:"text-gray-400 font-bold",children:"-"}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",value:I.end||"",onChange:we=>Ne(de,"end",parseInt(we.target.value)),className:"w-full border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:"End"})}),g.pincodeRanges.length>1&&e.jsx("button",{type:"button",onClick:()=>ne(de),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg",children:e.jsx(ns,{size:18})})]},de))}),e.jsxs("button",{type:"button",onClick:Q,className:"mt-4 text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:[e.jsx(Ys,{size:16})," Add another range"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 flex items-center justify-between cursor-pointer",onClick:()=>p({...g,isActive:!g.isActive}),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${g.isActive?"bg-green-100 text-green-600":"bg-gray-200 text-gray-500"}`,children:g.isActive?"":""}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Zone Status"}),e.jsx("div",{className:"text-sm text-gray-600",children:g.isActive?"Zone will be active immediately":"Zone is currently inactive"})]})]}),e.jsx("div",{className:`w-14 h-8 rounded-full p-1 transition-colors ${g.isActive?"bg-green-500":"bg-gray-300"}`,children:e.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-sm transition-transform ${g.isActive?"translate-x-6":""}`})})]})]})]})]})}),e.jsxs("div",{className:"px-8 py-5 border-t bg-gray-50 flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:()=>{k>1?O():(m(!1),_(),E(1))},className:"px-6 py-2.5 text-gray-600 font-medium hover:text-gray-900 transition-colors",children:k===1?"Cancel":"Back"}),e.jsx("div",{className:"flex gap-3",children:k<3?e.jsxs("button",{type:"button",onClick:ge,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium shadow-sm hover:shadow transition-all flex items-center gap-2",children:["Next Step ",e.jsx(Ha,{size:18})]}):e.jsx("button",{type:"submit",form:"geoZoneForm",disabled:i,className:"px-8 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium shadow-sm hover:shadow transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(dc,{size:18})," Complete Setup"]})})})]})]})})]})},xk=()=>{const[s,r]=y.useState([]),[i,l]=y.useState(!1),[d,m]=y.useState(!1),[u,f]=y.useState(null),[g,p]=y.useState({name:"",code:"",description:"",isDefault:!1,isActive:!0});y.useEffect(()=>{j()},[]);const j=async()=>{l(!0);try{const T=localStorage.getItem("token"),F=await fetch("/api/admin/pricing/user-segments",{headers:{Authorization:`Bearer ${T}`}});if(F.ok){const L=await F.json();r(L.segments||[])}}catch(T){console.error("Failed to fetch user segments:",T)}finally{l(!1)}},v=async T=>{T.preventDefault(),l(!0);try{const F=localStorage.getItem("token"),L=u?`/api/admin/pricing/user-segments/${u._id}`:"/api/admin/pricing/user-segments",M=await fetch(L,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`},body:JSON.stringify(g)});if(M.ok)alert(u?"User segment updated!":"User segment created!"),m(!1),E(),j();else{const V=await M.json();alert(V.message||"Failed to save user segment")}}catch(F){console.error("Error saving user segment:",F),alert("Failed to save user segment")}finally{l(!1)}},w=async T=>{if(confirm("Are you sure you want to delete this user segment?"))try{const F=localStorage.getItem("token");(await fetch(`/api/admin/pricing/user-segments/${T}`,{method:"DELETE",headers:{Authorization:`Bearer ${F}`}})).ok&&(alert("User segment deleted!"),j())}catch(F){console.error("Error deleting user segment:",F),alert("Failed to delete user segment")}},k=T=>{f(T),p({name:T.name,code:T.code,description:T.description||"",isDefault:T.isDefault,isActive:T.isActive}),m(!0)},E=()=>{p({name:"",code:"",description:"",isDefault:!1,isActive:!0}),f(null)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Rl,{className:"text-purple-600"}),"User Segment Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage user segments for segment-based pricing (Retail, Corporate, VIP, etc.)"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{E(),m(!0)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[e.jsx(Ys,{size:20}),"Create User Segment"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i?e.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"Loading..."}):s.length===0?e.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"No user segments found. Create one to get started."}):s.map(T=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-2 border-gray-200 hover:border-purple-300 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[T.name,T.isDefault&&e.jsx(si,{size:16,className:"text-yellow-500 fill-yellow-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 font-mono",children:T.code})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${T.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:T.isActive?"Active":"Inactive"})]}),T.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:T.description}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[T.isDefault&&e.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs font-medium flex items-center gap-1",children:[e.jsx(si,{size:12})," Default"]}),T.isSystem&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium flex items-center gap-1",children:[e.jsx(S5,{size:12})," System Protected"]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs("button",{onClick:()=>k(T),className:"flex-1 bg-blue-50 text-blue-600 px-3 py-2 rounded hover:bg-blue-100 flex items-center justify-center gap-2",children:[e.jsx(Pd,{size:16}),"Edit"]}),T.isSystem?e.jsxs("button",{disabled:!0,className:"flex-1 bg-gray-100 text-gray-400 px-3 py-2 rounded cursor-not-allowed flex items-center justify-center gap-2",title:"System segments cannot be deleted",children:[e.jsx(cc,{size:16}),"Locked"]}):e.jsxs("button",{onClick:()=>w(T._id),className:"flex-1 bg-red-50 text-red-600 px-3 py-2 rounded hover:bg-red-100 flex items-center justify-center gap-2",children:[e.jsx(ta,{size:16}),"Delete"]})]})]},T._id))}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:u?"Edit User Segment":"Create User Segment"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Segment Name *"}),e.jsx("input",{type:"text",value:g.name,onChange:T=>p({...g,name:T.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Retail, Corporate, VIP",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Segment Code *"}),e.jsx("input",{type:"text",value:g.code,onChange:T=>p({...g,code:T.target.value.toUpperCase()}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., RETAIL, CORPORATE, VIP",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier for this segment (uppercase)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:g.description,onChange:T=>p({...g,description:T.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Optional description",rows:3})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g.isDefault,onChange:T=>p({...g,isDefault:T.target.checked}),className:"rounded"}),e.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[e.jsx(si,{size:16,className:"text-yellow-500"}),"Set as default segment"]})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6 mt-1",children:"New users will be assigned to this segment by default"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g.isActive,onChange:T=>p({...g,isActive:T.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm font-medium",children:"Active"})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),E()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[e.jsx(dc,{size:18}),i?"Saving...":"Save"]})]})]})]})})]})},gk=()=>{const[s,r]=y.useState([]),[i,l]=y.useState([]),[d,m]=y.useState([]),[u,f]=y.useState(!1),[g,p]=y.useState(!1),[j,v]=y.useState(null),[w,k]=y.useState({product:"",geoZone:"",isSellable:!0,reason:""});y.useEffect(()=>{E(),T(),F()},[]);const E=async()=>{f(!0);try{const G=localStorage.getItem("token"),z=await fetch("/api/admin/pricing/product-availability",{headers:{Authorization:`Bearer ${G}`}});if(z.ok){const P=await z.json();r(P.availability||[])}}catch(G){console.error("Failed to fetch product availabilities:",G)}finally{f(!1)}},T=async()=>{try{const G=await fetch("/api/products");if(G.ok){const z=await G.json();l(z.products||z)}}catch(G){console.error("Failed to fetch products:",G)}},F=async()=>{try{const G=localStorage.getItem("token"),z=await fetch("/api/admin/pricing/geo-zones",{headers:{Authorization:`Bearer ${G}`}});if(z.ok){const P=await z.json();m(P.zones||[])}}catch(G){console.error("Failed to fetch geo zones:",G)}},L=async G=>{G.preventDefault(),f(!0);try{const z=localStorage.getItem("token"),P=j?`/api/admin/pricing/product-availability/${j._id}`:"/api/admin/pricing/product-availability",J=await fetch(P,{method:j?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify(w)});if(J.ok)alert(j?"Availability updated!":"Availability rule created!"),p(!1),le(),E();else{const W=await J.json();alert(W.message||"Failed to save availability rule")}}catch(z){console.error("Error saving availability:",z),alert("Failed to save availability rule")}finally{f(!1)}},M=async G=>{if(confirm("Are you sure you want to delete this availability rule?"))try{const z=localStorage.getItem("token");(await fetch(`/api/admin/pricing/product-availability/${G}`,{method:"DELETE",headers:{Authorization:`Bearer ${z}`}})).ok&&(alert("Availability rule deleted!"),E())}catch(z){console.error("Error deleting availability:",z),alert("Failed to delete availability rule")}},V=G=>{v(G),k({product:G.product._id,geoZone:G.geoZone._id,isSellable:G.isSellable,reason:G.reason||""}),p(!0)},le=()=>{k({product:"",geoZone:"",isSellable:!0,reason:""}),v(null)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Na,{className:"text-green-600"}),"Product Availability Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Control which products are available in different geographical zones"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{le(),p(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Ys,{size:20}),"Create Availability Rule"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Geo Zone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reason"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No availability rules found. Create one to restrict product availability by region."})}):s.map(G=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:G.product.name}),e.jsx("td",{className:"px-6 py-4",children:G.geoZone.name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 w-fit ${G.isSellable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:G.isSellable?e.jsxs(e.Fragment,{children:[e.jsx(ya,{size:16}),"Available"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ul,{size:16}),"Blocked"]})})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:G.reason||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>V(G),className:"text-blue-600 hover:text-blue-800",children:e.jsx(Pd,{size:18})}),e.jsx("button",{onClick:()=>M(G._id),className:"text-red-600 hover:text-red-800",children:e.jsx(ta,{size:18})})]})})]},G._id))})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:j?"Edit Availability Rule":"Create Availability Rule"}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product *"}),e.jsxs("select",{value:w.product,onChange:G=>k({...w,product:G.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Product"}),i.map(G=>e.jsx("option",{value:G._id,children:G.name},G._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Geo Zone *"}),e.jsxs("select",{value:w.geoZone,onChange:G=>k({...w,geoZone:G.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Geo Zone"}),d.map(G=>e.jsx("option",{value:G._id,children:G.name},G._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Availability Status *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"isSellable",checked:w.isSellable===!0,onChange:()=>k({...w,isSellable:!0,reason:""}),className:"text-green-600"}),e.jsx(ya,{size:20,className:"text-green-600"}),e.jsx("span",{className:"font-medium",children:"Available (Sellable)"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"isSellable",checked:w.isSellable===!1,onChange:()=>k({...w,isSellable:!1}),className:"text-red-600"}),e.jsx(Ul,{size:20,className:"text-red-600"}),e.jsx("span",{className:"font-medium",children:"Blocked (Not Sellable)"})]})]})]}),!w.isSellable&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason for Blocking"}),e.jsx("textarea",{value:w.reason,onChange:G=>k({...w,reason:G.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Not available in your region, Out of stock in this area",rows:3}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This message will be shown to customers in this region"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),le()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(dc,{size:18}),u?"Saving...":"Save"]})]})]})]})})]})},bk=()=>{var Ce,Ge,ue;const[s,r]=y.useState({zone:null,segment:null,product:null}),[i,l]=y.useState(null),[d,m]=y.useState("MASTER"),[u,f]=y.useState(!1),[g,p]=y.useState(null),[j,v]=y.useState([]),[w,k]=y.useState([]),[E,T]=y.useState([]),[F,L]=y.useState([]),[M,V]=y.useState(null),[le,G]=y.useState(""),[z,P]=y.useState(!1),[J,W]=y.useState(!1),[oe,ce]=y.useState(!1),[pe,qe]=y.useState(null);y.useEffect(()=>{Y()},[]),y.useEffect(()=>{_(),L([]),V(null)},[s]);const R=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}),Y=async()=>{try{if(!localStorage.getItem("token")){p("Please login to access pricing administration");return}const[Ie,Qe,tt]=await Promise.all([fetch("/api/admin/pricing/geo-zones",{headers:R()}),fetch("/api/admin/pricing/user-segments",{headers:R()}),fetch("/api/admin/pricing/products",{headers:R()})]);if(Ie.status===401||Ie.status===403){p("Authentication failed. Please login as an admin.");return}if(!Ie.ok||!Qe.ok||!tt.ok){p("Server error. Please check your connection.");return}const[ot,ze,Ot]=await Promise.all([Ie.json(),Qe.json(),tt.json()]);v(ot.zones||ot.data||[]),k(ze.segments||ze.data||[]),T(Ot.products||Ot.data||[])}catch(se){console.error("Error loading dropdown options:",se),p("Failed to load pricing data.")}},_=async()=>{f(!0),p(null);try{const se=new URLSearchParams;s.zone&&se.append("zone",s.zone),s.segment&&se.append("segment",s.segment),s.product&&se.append("product",s.product);const Qe=await(await fetch(`/api/admin/pricing/smart-view?${se}`,{headers:R()})).json();Qe.success?(l(Qe.data),m(Qe.data.viewType)):p(Qe.error||"Failed to load data")}catch(se){p(se.message)}finally{f(!1)}},X=(se,Ie)=>{r(Qe=>({...Qe,[se]:Ie||null}))},Q=()=>{r({zone:null,segment:null,product:null})},ne=(se,Ie)=>{V(se),G(Ie.toString())},Ne=()=>{V(null),G(""),P(!1)},C=(se,Ie,Qe)=>{const tt=parseFloat(le);if(isNaN(tt)||tt<0){Ne();return}let ot=0;if(i!=null&&i.entries){const _t=i.entries.find(Dt=>Dt.productId===se);ot=(_t==null?void 0:_t.basePrice)||0}else if(i!=null&&i.matrix){const _t=i.matrix.find(Dt=>Dt.productId===se);if(_t&&Qe&&_t.segments){const Dt=Object.values(_t.segments)[0];ot=typeof Dt=="object"?Dt.finalPrice:Dt}}else if(i!=null&&i.prices){const _t=i.prices.find(Dt=>Dt.productId===se||Dt.segmentId===Qe);ot=(_t==null?void 0:_t.finalPrice)||(_t==null?void 0:_t.masterPrice)||0}if(tt===ot){Ne();return}const ze={productId:se,productName:Ie,segmentId:z?void 0:Qe||s.segment||void 0,zoneId:s.zone||void 0,originalPrice:ot,newPrice:tt,applyToAllSegments:z};L(_t=>{const Dt=_t.findIndex(us=>us.productId===ze.productId&&us.zoneId===ze.zoneId&&us.applyToAllSegments===ze.applyToAllSegments&&(ze.applyToAllSegments||us.segmentId===ze.segmentId));if(Dt>=0){const us=[..._t];return us[Dt]=ze,us}return[..._t,ze]}),Ne();const Ot=z?" (all segments)":"";It.success(`Price updated to ${tt.toFixed(2)}${Ot} (pending save)`)},H=async()=>{if(F.length===0){It("No changes to save",{icon:""});return}W(!0);const se=It.loading(`Saving ${F.length} price changes...`);try{const Ie=F.map(ot=>({productId:ot.productId,newPrice:ot.newPrice,segmentId:ot.applyToAllSegments?void 0:ot.segmentId,zoneId:ot.zoneId,applyToAllSegments:ot.applyToAllSegments||!1})),tt=await(await fetch("/api/admin/pricing/smart-view/update",{method:"POST",headers:R(),body:JSON.stringify({filters:{zoneId:s.zone,segmentId:s.segment,productId:s.product},priceUpdates:Ie,resolutionStrategy:"ASK"})})).json();It.dismiss(se),tt.success?tt.requiresResolution?(qe({hasConflict:!0,affectedCount:tt.data.conflictsDetected||0,conflicts:tt.data.conflicts||[],resolutionOptions:tt.data.resolutionOptions||[{id:"OVERWRITE",label:"Force Overwrite",description:"Delete all child overrides",impact:{warning:"All child prices will be deleted"}},{id:"PRESERVE",label:"Preserve Children",description:"Keep existing child prices",impact:{warning:"Child prices remain unchanged"}},{id:"RELATIVE",label:"Relative Adjust",description:"Apply proportional adjustment",impact:{warning:"Child prices will be scaled"}}]}),ce(!0)):(It.success(` Successfully updated ${tt.data.updatedCount} price(s)!`),L([]),_()):It.error(tt.error||"Failed to save changes")}catch(Ie){It.dismiss(se),It.error(Ie.message||"Failed to save changes")}finally{W(!1)}},re=async se=>{W(!0);const Ie=It.loading(`Applying ${se} resolution...`);try{const Qe=F.map(ze=>({productId:ze.productId,newPrice:ze.newPrice,segmentId:ze.segmentId,zoneId:ze.zoneId})),ot=await(await fetch("/api/admin/pricing/smart-view/update",{method:"POST",headers:R(),body:JSON.stringify({filters:{zoneId:s.zone,segmentId:s.segment,productId:s.product},priceUpdates:Qe,resolutionStrategy:se})})).json();It.dismiss(Ie),ot.success?(It.success(` ${ot.data.updatedCount} prices updated with ${se} strategy!`),L([]),_()):It.error(ot.error||"Failed to apply resolution")}catch(Qe){It.dismiss(Ie),It.error(Qe.message||"Failed to apply resolution")}finally{W(!1),ce(!1),qe(null)}},je=()=>{L([]),It("Changes discarded",{icon:""})},ge=(se,Ie)=>{L(Qe=>Qe.filter(tt=>!(tt.productId===se&&tt.segmentId===Ie))),It("Change removed",{icon:""})},O=F.length>0,I=(se,Ie,Qe,tt,ot)=>{const ze=ot||`${se}-${tt||"default"}`,Ot=M===ze,_t=F.find(Ps=>Ps.productId===se&&Ps.segmentId===tt),Dt=_t?_t.newPrice:Qe,us=!!_t;return Ot?e.jsx("td",{className:"p-2 bg-blue-50",colSpan:z&&tt?5:1,children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:le,onChange:Ps=>G(Ps.target.value),onKeyDown:Ps=>{Ps.key==="Enter"&&C(se,Ie,tt),Ps.key==="Escape"&&Ne()},autoFocus:!0,min:"0",step:"0.01",className:"w-20 px-2 py-1 border-2 border-indigo-500 rounded text-right font-mono text-sm focus:outline-none focus:ring-2 focus:ring-indigo-300"}),e.jsx("button",{onClick:()=>C(se,Ie,tt),className:"w-7 h-7 bg-green-500 text-white rounded flex items-center justify-center hover:bg-green-600",children:""}),e.jsx("button",{onClick:Ne,className:"w-7 h-7 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600",children:""})]}),tt&&s.zone&&e.jsxs("label",{className:"flex items-center gap-1 text-xs text-gray-600 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:z,onChange:Ps=>P(Ps.target.checked),className:"w-3 h-3 text-indigo-600 rounded cursor-pointer"}),e.jsx("span",{className:z?"text-indigo-600 font-medium":"",children:"Apply to all segments"})]})]})},ze):Dt==null?e.jsx("td",{className:"p-3 text-center text-gray-400",title:"Price not available",children:"N/A"},ze):e.jsxs("td",{className:`p-3 text-center font-mono cursor-pointer transition-colors hover:bg-indigo-50 ${us?"bg-amber-100 border-l-4 border-amber-500":""}`,onClick:()=>ne(ze,Dt),title:"Click to edit",children:["",Dt.toFixed(2),us&&e.jsx("span",{className:"text-amber-500 font-bold ml-1",children:"*"})]},ze)},de=se=>({MASTER:" Master Price Book",ZONE:" Zone View (All Products  All Segments)",GROUP_ZONE:" Group Zone View (All Products)",PRODUCT_ZONE:" Product Zone View (All Segments)",SINGLE_CELL:" Single Cell View (Detailed Breakdown)"})[se]||se,we=()=>{var se,Ie,Qe,tt,ot,ze,Ot,_t,Dt,us,Ps,Vt,Gs,Ns,wa,fe,gt,kt,cs,hs;if(u)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-gray-500",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-indigo-500 rounded-full animate-spin mb-4"}),e.jsx("p",{children:"Loading price data..."})]});if(g)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsxs("p",{className:"text-red-500 mb-4",children:[" Error: ",g]}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-indigo-500 text-white rounded-lg font-semibold hover:bg-indigo-600",children:"Retry"})]});if(!i)return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-gray-500",children:e.jsx("p",{children:"Select filters to view pricing data"})});switch(d){case"MASTER":return e.jsxs("div",{children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-5 rounded-xl mb-6 border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500 rounded-lg flex items-center justify-center text-white text-xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:i.masterBookName||"Master Price Book"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[((se=i.entries)==null?void 0:se.length)||0," products"]})]})]})}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-5 py-4 text-right text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Base Price"}),e.jsx("th",{className:"px-5 py-4 text-right text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Compare At"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:(Ie=i.entries)==null?void 0:Ie.map((ht,Qt)=>e.jsxs("tr",{className:`${Qt%2===0?"bg-white":"bg-gray-50/50"} hover:bg-indigo-50/50 transition-colors`,children:[e.jsx("td",{className:"px-5 py-4 font-medium text-gray-800",children:ht.productName}),I(ht.productId,ht.productName,ht.basePrice,void 0,`master-${ht.productId}`),e.jsx("td",{className:"px-5 py-4 text-right font-mono text-gray-600",children:ht.compareAtPrice?`${ht.compareAtPrice}`:e.jsx("span",{className:"text-gray-300",children:""})})]},ht.productId))})]})})]});case"ZONE":return e.jsxs("div",{children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 p-5 rounded-xl mb-6 border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center text-white text-xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:i.zoneName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[((Qe=i.matrix)==null?void 0:Qe.length)||0," products  ",Object.keys(((ot=(tt=i.matrix)==null?void 0:tt[0])==null?void 0:ot.segments)||{}).length||0," segments"]})]})]})}),e.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider sticky left-0 bg-gray-50 border-r border-gray-200",children:"Product"}),Object.keys(((Ot=(ze=i.matrix)==null?void 0:ze[0])==null?void 0:Ot.segments)||{}).map(ht=>e.jsx("th",{className:"px-5 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider",children:ht},ht))]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:(_t=i.matrix)==null?void 0:_t.map((ht,Qt)=>e.jsxs("tr",{className:`${ht.isAvailable===!1?"bg-red-50 opacity-70":Qt%2===0?"bg-white":"bg-gray-50/30"} hover:bg-indigo-50/50 transition-colors`,children:[e.jsx("td",{className:"px-5 py-4 font-medium text-gray-800 sticky left-0 bg-white border-r border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[ht.productName,ht.isAvailable===!1&&e.jsx("span",{className:"text-red-500",children:""})]})}),Object.entries(ht.segments).map(([Vs,rs])=>{var mt;const Bs=typeof rs=="object"?rs==null?void 0:rs.finalPrice:rs;return!(typeof rs=="object"?(rs==null?void 0:rs.isAvailable)!==!1:!0)||Bs==null?e.jsx("td",{className:"px-5 py-4 text-center text-gray-300",title:ht.availabilityReason||"Not available",children:""},Vs):I(ht.productId,ht.productName,Bs,(mt=ht.segmentIds)==null?void 0:mt[Vs],`zone-${ht.productId}-${Vs}`)})]},ht.productId))})]})})]});case"GROUP_ZONE":return e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",i.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Segment:"})," ",i.segmentName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Products:"})," ",((Dt=i.prices)==null?void 0:Dt.length)||0]})]}),e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Product"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Master Price"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Final Price"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Adjustments"})]})}),e.jsx("tbody",{children:(us=i.prices)==null?void 0:us.map(ht=>{var Qt;return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:ht.productName}),e.jsxs("td",{className:"p-3 font-mono",children:["",ht.masterPrice]}),I(ht.productId,ht.productName,ht.finalPrice,i.segmentId,`group-${ht.productId}`),e.jsxs("td",{className:"p-3 text-gray-500 text-xs",children:[((Qt=ht.adjustments)==null?void 0:Qt.length)||0," adjustment(s)"]})]},ht.productId)})})]})]});case"PRODUCT_ZONE":return e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",i.productName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",i.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Segments:"})," ",((Ps=i.prices)==null?void 0:Ps.length)||0]})]}),e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Segment"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Master Price"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Final Price"}),e.jsx("th",{className:"p-3 text-left font-semibold text-gray-600 uppercase text-xs border-b-2",children:"Discount"})]})}),e.jsx("tbody",{children:(Vt=i.prices)==null?void 0:Vt.map(ht=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:ht.segmentName}),e.jsxs("td",{className:"p-3 font-mono",children:["",ht.masterPrice]}),I(i.productId,i.productName,ht.finalPrice,ht.segmentId,`prod-${ht.segmentId}`),e.jsx("td",{className:"p-3 text-green-600 font-semibold",children:ht.masterPrice>ht.finalPrice?`${((1-ht.finalPrice/ht.masterPrice)*100).toFixed(1)}%`:"-"})]},ht.segmentId))})]})]});case"SINGLE_CELL":return((Gs=i.price)==null?void 0:Gs.isAvailable)===!1?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Product Not Available"}),e.jsx("p",{className:"text-gray-500",children:((Ns=i.price)==null?void 0:Ns.availabilityReason)||"This product is not available in the selected zone"})]}):e.jsxs("div",{className:"max-w-xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",i.productName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",i.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Segment:"})," ",i.segmentName]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 pb-3 border-b",children:" Price Breakdown"}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Master Price:"}),e.jsxs("strong",{className:"font-mono",children:["",(fe=(wa=i.price)==null?void 0:wa.masterPrice)==null?void 0:fe.toFixed(2)]})]}),(kt=(gt=i.price)==null?void 0:gt.adjustments)==null?void 0:kt.map((ht,Qt)=>{const Vs=ht.type==="MODIFIER",rs=ht.modifierType==="PERCENT_INC"||ht.modifierType==="FLAT_INC"||ht.change>0,Bs=Math.abs(Vs?ht.change:ht.value);return e.jsxs("div",{className:`flex justify-between items-center py-3 border-b ${rs?"text-green-600":"text-red-600"}`,children:[e.jsx("span",{children:ht.modifierName||ht.type}),e.jsxs("strong",{className:"font-mono",children:[rs?"+":"-","",Bs==null?void 0:Bs.toFixed(2)]})]},Qt)}),e.jsxs("div",{className:"flex justify-between items-center py-4 mt-2 border-t-2 border-indigo-500",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Final Price:"}),e.jsxs("strong",{className:"text-xl font-mono text-indigo-600",children:["",(hs=(cs=i.price)==null?void 0:cs.finalPrice)==null?void 0:hs.toFixed(2)]})]})]})]});default:return e.jsxs("div",{children:["Unknown view type: ",d]})}};return e.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-2xl shadow-lg",children:""}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Smart View Matrix"}),e.jsx("p",{className:"text-gray-500",children:"Manage virtual price books with hierarchical pricing"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden h-fit lg:sticky lg:top-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 px-5 py-4 border-b border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select filters to load pricing data"})]}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-600 uppercase tracking-wider mb-2",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Geo Zone"]}),e.jsxs("select",{value:s.zone||"",onChange:se=>X("zone",se.target.value),className:"w-full p-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:bg-white focus:outline-none transition-all text-gray-700",children:[e.jsx("option",{value:"",children:"All Zones"}),j.map(se=>e.jsxs("option",{value:se._id,children:[se.name," (",se.level,")"]},se._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-600 uppercase tracking-wider mb-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"User Segment"]}),e.jsxs("select",{value:s.segment||"",onChange:se=>X("segment",se.target.value),className:"w-full p-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:bg-white focus:outline-none transition-all text-gray-700",children:[e.jsx("option",{value:"",children:"All Segments"}),w.map(se=>e.jsx("option",{value:se._id,children:se.name||se.code},se._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-600 uppercase tracking-wider mb-2",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"Product"]}),e.jsxs("select",{value:s.product||"",onChange:se=>X("product",se.target.value),className:"w-full p-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:bg-white focus:outline-none transition-all text-gray-700",children:[e.jsx("option",{value:"",children:"All Products"}),E.map(se=>e.jsx("option",{value:se._id,children:se.name},se._id))]})]}),e.jsxs("button",{onClick:Q,className:"w-full py-3 bg-gray-100 text-gray-600 rounded-xl font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Clear Filters"]})]}),O&&e.jsxs("div",{className:"border-t-2 border-amber-200 bg-amber-50/50 p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-500 text-white rounded-lg flex items-center justify-center text-lg",children:""}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-amber-800",children:[F.length," Unsaved Change",F.length>1?"s":""]}),e.jsx("p",{className:"text-xs text-amber-600",children:"Click save to apply"})]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto mb-4 space-y-2",children:F.map((se,Ie)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-amber-200 shadow-sm",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm truncate",children:se.productName||se.productId}),se.applyToAllSegments&&e.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full",children:"All Segments"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono text-amber-700 font-semibold",children:["",se.newPrice.toFixed(2)]}),e.jsx("button",{onClick:()=>ge(se.productId,se.segmentId),className:"w-6 h-6 rounded-full bg-red-100 text-red-600 hover:bg-red-200 flex items-center justify-center text-sm",children:""})]})]},Ie))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:H,disabled:J,className:"w-full py-3.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold hover:from-green-600 hover:to-emerald-700 disabled:opacity-60 transition-all flex items-center justify-center gap-2 shadow-lg shadow-green-500/20",children:J?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsx(e.Fragment,{children:" Save All Changes"})}),e.jsx("button",{onClick:je,disabled:J,className:"w-full py-3 border-2 border-red-400 text-red-600 rounded-xl font-semibold hover:bg-red-50 disabled:opacity-60 transition-colors",children:" Discard All"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:de(d)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[((Ce=i==null?void 0:i.matrix)==null?void 0:Ce.length)||((Ge=i==null?void 0:i.entries)==null?void 0:Ge.length)||((ue=i==null?void 0:i.prices)==null?void 0:ue.length)||0," items"]})]}),e.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg text-xs font-bold uppercase tracking-wider shadow-sm",children:d})]}),e.jsx("div",{className:"p-6",children:we()})]})]}),oe&&pe&&e.jsx(ZN,{conflict:pe,onResolve:re,onCancel:()=>{ce(!1),qe(null)}})]})},yk=()=>e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Pricing Preview"}),e.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded text-center text-gray-500",children:"Pricing Preview Module Coming Soon"})]}),jk=({value:s,onChange:r,placeholder:i="Enter description...",className:l="",style:d,height:m="300px"})=>{const[u,f]=y.useState(null),[g,p]=y.useState(!1);return y.useEffect(()=>{typeof window<"u"&&Vd(()=>import("./editor.esm-CD9e8Pnd.js"),[]).then(j=>{f(()=>j.Editor),p(!0)}).catch(j=>{console.error("Failed to load PrimeReact Editor:",j),p(!0)})},[]),!g||!u?e.jsx("div",{className:`rich-text-editor-wrapper ${l}`,style:{height:m,...d},children:e.jsx("textarea",{value:s||"",onChange:j=>r(j.target.value),placeholder:i,className:"w-full p-3 border border-gray-300 rounded-lg resize-none",style:{height:m,minHeight:"200px"}})}):e.jsx(vk,{Editor:u,value:s,onChange:r,placeholder:i,className:l,style:d,height:m})},vk=({Editor:s,value:r,onChange:i,placeholder:l,className:d,style:m,height:u})=>{const f=y.useRef(null),g=y.useMemo(()=>({toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["image"],["clean"]],clipboard:{matchVisual:!1}}),[]),p=y.useMemo(()=>["header","font","size","bold","italic","underline","strike","color","background","list","indent","align","image"],[]),j=y.useMemo(()=>w=>{w.htmlValue!==void 0?i(w.htmlValue||""):w.textValue!==void 0?i(w.textValue||""):w.value!==void 0&&i(w.value||"")},[i]),v=y.useMemo(()=>({height:u,...m}),[u,m]);return e.jsxs("div",{className:`rich-text-editor-wrapper ${d}`,children:[e.jsx(s,{ref:f,value:r||"",onTextChange:j,placeholder:l,modules:g,formats:p,style:v}),e.jsx("style",{children:`
        .rich-text-editor-wrapper {
          width: 100%;
        }
        .rich-text-editor-wrapper .p-editor-container {
          border: 1px solid #d1d5db;
          border-radius: 0.5rem;
          overflow: hidden;
        }
        .rich-text-editor-wrapper .p-editor-toolbar {
          border-bottom: 1px solid #d1d5db;
          background: #f9fafb;
          padding: 0.5rem;
        }
        .rich-text-editor-wrapper .ql-editor {
          min-height: 200px;
        }
        .rich-text-editor-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: italic;
        }
      `})]})},Wo="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23f5f5f5'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-family='sans-serif' font-size='14'%3ENo Image%3C/text%3E%3C/svg%3E",Pl="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Crect width='400' height='400' fill='%23f5f5f5'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-family='sans-serif' font-size='18'%3EImage Not Available%3C/text%3E%3C/svg%3E",Nk=()=>{var To,ml,ko,bi,Nn,Wn,wn;const s=nr(),r=Qd(),[i,l]=y.useState("products"),[d,m]=y.useState(!1),[u,f]=y.useState(null),[g,p]=y.useState(null),[j,v]=y.useState(null),[w,k]=y.useState({}),[E,T]=y.useState(null),[F,L]=y.useState(null),[M,V]=y.useState({}),[le,G]=y.useState({}),[z,P]=y.useState({}),[J,W]=y.useState({}),[oe,ce]=y.useState({}),[pe,qe]=y.useState({}),[R,Y]=y.useState({name:"",description:"",descriptionArray:[],category:"",subcategory:"",image:null,options:"",filters:{printingOption:[],orderQuantity:{min:1e3,max:72e3,multiples:1e3,quantityType:"SIMPLE",stepWiseQuantities:[],rangeWiseQuantities:[]},deliverySpeed:[],textureType:[]},quantityDiscounts:[],maxFileSizeMB:"",minFileWidth:"",maxFileWidth:"",minFileHeight:"",maxFileHeight:"",blockCDRandJPG:!1,additionalDesignCharge:"",gstPercentage:"",showPriceIncludingGst:!1,instructions:"",productionSequence:[],variants:[]}),[_,X]=y.useState([]),[Q,ne]=y.useState({}),[Ne,C]=y.useState(!0),[H,re]=y.useState(!1),[je,ge]=y.useState([]),[O,I]=y.useState([]),[de,we]=y.useState([]),[Ce,Ge]=y.useState([]),[ue,se]=y.useState({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),[Ie,Qe]=y.useState(!1),[tt,ot]=y.useState(!1),[ze,Ot]=y.useState({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),[_t,Dt]=y.useState([]),[us,Ps]=y.useState(!1),[Vt,Gs]=y.useState(!1),[Ns,wa]=y.useState(null),[fe,gt]=y.useState(null),[kt,cs]=y.useState([]),[hs,ht]=y.useState([]),[Qt,Vs]=y.useState({username:"",role:"user"}),[rs,Bs]=y.useState({name:"",email:"",password:""}),[Be,mt]=y.useState([]),[bt,ws]=y.useState([]),[Fs,Ws]=y.useState(""),[qs,da]=y.useState("all"),[Ra,er]=y.useState("all"),[ir,Xr]=y.useState(""),[Ei,$n]=y.useState([]),[ee,xe]=y.useState(null),[ke,st]=y.useState(null),nt=Pr.useRef(null),Mt=Pr.useRef(null),[lt,pt]=y.useState({isOpen:!1,type:"category",id:"",name:"",productCount:0,subcategoryCount:0,deleteText:""}),[St,zt]=y.useState([]),[Ft,Ut]=y.useState([]),[as,xs]=y.useState([]),[Ss,ra]=y.useState(""),[is,ms]=y.useState(""),[ds,lr]=y.useState([]),[na,fr]=y.useState(!1),[yr,Xs]=y.useState(!1),[tr,en]=y.useState(!1),[Qs,Xt]=y.useState(null),[Cs,Ma]=y.useState(null),[ia,ys]=y.useState([]),[xa,hn]=y.useState({isOpen:!1,type:"category",name:"",description:""}),[sr,Fn]=y.useState(""),[xn,ar]=y.useState([]),[Sa,la]=y.useState([]),[gs,tn]=y.useState({}),[Gl,gn]=y.useState({}),[bn,ie]=y.useState([]),[$e,Ae]=y.useState(!1),[ye,Fe]=y.useState([]),[rt,De]=y.useState([]),[Ve,_e]=y.useState(null),[Le,ve]=y.useState(!1),[xt,Pe]=y.useState(!1),[it,es]=y.useState({}),[_s,ls]=y.useState([]),[As,ps]=y.useState(!1),[he,Re]=y.useState(null),[Ke,yt]=y.useState(!1),[Pt,He]=y.useState({status:"",deliveryDate:"",adminNotes:""}),[Ze,et]=y.useState(!1),[Gt,Rt]=y.useState({name:"",email:"",password:""}),[Zs,Us]=y.useState(!1),[Wt,zs]=y.useState({name:"",description:"",isEnabled:!0,operators:[]}),[At,_a]=y.useState([]),[Ga,ii]=y.useState(""),[Rr,li]=y.useState(!1),[Un,al]=y.useState(null),[Ql,Yl]=y.useState(!1),[gc,Wd]=y.useState([]),[Vm,Zd]=y.useState(!1),[In,bc]=y.useState(null),[Bm,bo]=y.useState(!1),[Jd,yc]=y.useState({page:1,limit:10,total:0,totalPages:0}),[$t,za]=y.useState({name:"",scope:"GLOBAL",scopeRefId:"",when:{attribute:"",value:""},then:[],priority:0,isActive:!0}),[yo,jc]=y.useState([]),[qm,Kd]=y.useState(!1),[oi,Xd]=y.useState(null),[Hm,vc]=y.useState(!1),[Hs,Vn]=y.useState({parentAttribute:"",parentValue:"",value:"",label:"",image:null,priceAdd:0,isEnabled:!0}),[Mr,ci]=y.useState([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}]),[Bn,eu]=y.useState({attributeId:"",parentValue:""}),[Qa,Nc]=y.useState([]),[tu,wc]=y.useState(!1),[qn,Ti]=y.useState(null),[jr,ki]=y.useState({name:"",description:"",isEnabled:!0,operators:[]}),[di,su]=y.useState([]),[au,rl]=y.useState(!1),[vr,Sc]=y.useState(null),[Di,nl]=y.useState(null),[Cc,il]=y.useState(!1),[Bt,or]=y.useState({name:"",printType:"",category:"",subcategory:"",selectedDepartments:[],selectedAttributes:[]}),[K,ft]=y.useState({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]});y.useEffect(()=>{const c=localStorage.getItem("user");if(!c){s("/login");return}if(JSON.parse(c).role!=="admin"){s("/");return}ja(),_r(),ui(),pi(),Hn(),ol()},[s]),y.useEffect(()=>{i==="products"&&(cr(),$r(),Lr()),i==="departments"&&(Lr(),vo()),i==="sequences"&&($r(),Lr(),ja(),ui()),i==="categories"&&yn(),i==="manage-products"&&(ui(),ja())},[i]),y.useEffect(()=>{u&&window.scrollTo({top:0,behavior:"smooth"})},[u]),y.useEffect(()=>{(Object.keys(M).length>0||Object.keys(le).length>0||Object.keys(J).length>0||Object.keys(oe).length>0||Object.keys(pe).length>0||Object.keys(z).length>0)&&window.scrollTo({top:0,behavior:"smooth"})},[M,le,J,oe,pe,z]),y.useEffect(()=>{if(ue.parent&&ue.type){const c=St.find(b=>b._id===ue.parent);c&&c.type!==ue.type&&se({...ue,parent:""})}},[ue.type,St]);const Gm=async c=>{const b=new Map;c.forEach(U=>{b.set(U._id,{...U,children:[]})});const N=(U,B,q)=>U.map(Z=>({_id:Z._id,name:Z.name,description:Z.description,image:Z.image,slug:Z.slug,type:Z.category&&typeof Z.category=="object"?Z.category.type:q,parent:B,sortOrder:Z.sortOrder||0,category:Z.category,isSubcategory:!0,createdAt:Z.createdAt,updatedAt:Z.updatedAt,children:Z.children?N(Z.children,Z._id,q):[]})),S=[];for(const U of c){const B=b.get(U._id);try{const q=await fetch(`${Te}/subcategories/category/${U._id}?includeChildren=true`,{headers:Tt()});if(q.ok){const Z=await jt(q),te=Array.isArray(Z)?Z:[];B.children=N(te,U._id,U.type)}}catch(q){console.error(`Error fetching subcategories for category ${U._id}:`,q),B.children=[]}S.push(B)}const D=U=>Array.isArray(U)?[...U].sort((B,q)=>(B.sortOrder||0)-(q.sortOrder||0)).map(B=>({...B,children:B.children?D(B.children):[]})):[];return D(S)},ru=(c,b=0,N=[])=>{let S=[];return c.forEach(D=>{const U=[...N,D._id];S.push({...D,displayLevel:b,path:U}),D.children&&D.children.length>0&&(S=S.concat(ru(D.children,b+1,U)))}),S};y.useEffect(()=>{let c=[...Be];if(qs!=="all"&&(c=c.filter(N=>N.type===qs)),Fs.trim()!==""){const N=Fs.toLowerCase().trim();c=c.filter(S=>S.name.toLowerCase().includes(N)||S.description&&S.description.toLowerCase().includes(N)||S.type&&S.type.toLowerCase().includes(N))}c.sort((N,S)=>(N.sortOrder||0)-(S.sortOrder||0)),(async()=>{let N=await Gm(c);if(Ra==="top-level")N=N.map(D=>({...D,children:[]}));else if(Ra==="subcategories"){const D=[];N.forEach(U=>{U.children&&U.children.length>0&&D.push(...U.children)}),N=D}const S=ru(N);ws(S)})()},[Be,Fs,qs,Ra]),y.useEffect(()=>{let c=[...kt];if(ir.trim()!==""){const b=ir.toLowerCase().trim();c=c.filter(N=>N.name.toLowerCase().includes(b)||N.description&&N.description.toLowerCase().includes(b)||N.slug&&N.slug.toLowerCase().includes(b)||N.category&&typeof N.category=="object"&&N.category.name&&N.category.name.toLowerCase().includes(b))}c.sort((b,N)=>{const S=b.sortOrder||0,D=N.sortOrder||0;return S!==D?S-D:new Date(N.createdAt||0).getTime()-new Date(b.createdAt||0).getTime()}),$n(c)},[kt,ir]),y.useEffect(()=>{if(sr&&xn.length===1&&!R.category){const c=xn[0];c&&c._id&&(Y({...R,category:c._id}),la([c._id]),jn(c._id))}},[sr,xn,R.category]),y.useEffect(()=>{var c;if(R.category&&((c=gs[R.category])==null?void 0:c.length)===1&&!R.subcategory){const b=gs[R.category][0];b&&b._id&&Y({...R,subcategory:b._id})}},[R.category,gs,R.subcategory]),y.useEffect(()=>{if(i==="products"&&(R.category||R.subcategory)){const c=R.category||null,b=R.subcategory||null;cr(c,b)}},[R.category,R.subcategory,i]),y.useEffect(()=>{const c=Qa.filter(b=>b.isEnabled);if(c.length===1&&Bt.selectedDepartments.length===0){const b=c[0];b&&b._id&&or({...Bt,selectedDepartments:[b._id]})}},[Qa,Bt.selectedDepartments.length]),y.useEffect(()=>{if(Bt.printType){const c=Be.filter(b=>Bt.printType==="digital"?b.type==="Digital"||b.type==="digital":Bt.printType==="bulk"?b.type==="Bulk"||b.type==="bulk":!1).filter(b=>!b.parent);if(c.length===1&&!Bt.category){const b=c[0];b&&b._id&&or({...Bt,category:b._id})}}},[Bt.printType,Be,Bt.category]);const Tt=(c=!1)=>{const N={Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"};return c&&(N["Content-Type"]="application/json"),N},Pi=(c,b,N)=>{if(!c)return"";let S=c.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),D=S,U=2,B=Be.some(Z=>Z.slug===D&&(!b||Z._id!==b)),q=kt.some(Z=>Z.slug===D&&(!N||Z._id!==N));for(;B||q;)D=`${S}-${U}`,U++,B=Be.some(Z=>Z.slug===D&&(!b||Z._id!==b)),q=kt.some(Z=>Z.slug===D&&(!N||Z._id!==N));return D},jt=async c=>{const b=await c.text();if(b.trim().startsWith("<!DOCTYPE")||b.trim().startsWith("<html"))throw new Error(`Server returned HTML instead of JSON. Status: ${c.status} ${c.statusText}`);try{const N=JSON.parse(b);if(!c.ok)throw new Error(N.error||N.message||`Request failed: ${c.status} ${c.statusText}`);return N}catch(N){throw N instanceof Error?N:new Error(b||`Invalid response from server. Status: ${c.status} ${c.statusText}`)}},ja=async()=>{try{const c=await fetch(`${Te}/categories`,{method:"GET",headers:Tt()});if(!c.ok)throw new Error(`Failed to fetch categories: ${c.status} ${c.statusText}`);const b=await jt(c),N=Array.isArray(b)?b.filter(S=>!S.parent||S.parent===null||typeof S.parent=="object"&&!S.parent._id):[];N.sort((S,D)=>(S.sortOrder||0)-(D.sortOrder||0)),mt(N),ws(N)}catch(c){console.error("Error fetching categories:",c),f(c instanceof Error?c.message:"Failed to fetch categories")}},yn=async c=>{try{const b=c?`${Te}/categories/available-parents?excludeId=${c}`:`${Te}/categories/available-parents`,N=await fetch(b,{method:"GET",headers:Tt()});if(!N.ok)throw new Error(`Failed to fetch available parent categories: ${N.status} ${N.statusText}`);const S=await jt(N),D=Array.isArray(S)?S.sort((U,B)=>{const q=U.sortOrder||0,Z=B.sortOrder||0;return q!==Z?q-Z:(U.name||"").localeCompare(B.name||"")}):[];zt(D)}catch(b){console.error("Error fetching available parent categories:",b)}},ui=async()=>{try{const c=await fetch(`${Te}/subcategories`,{method:"GET",headers:Tt()});if(!c.ok)throw new Error(`Failed to fetch subcategories: ${c.status} ${c.statusText}`);const b=await jt(c),N=b.filter(S=>!S.category||S._warning);N.length>0&&f(`Warning: ${N.length} subcategor${N.length===1?"y":"ies"} have deleted parent categories. Please reassign them to valid categories.`),cs(b)}catch(c){console.error("Error fetching subcategories:",c),f(c instanceof Error?c.message:"Failed to fetch subcategories")}},_r=async c=>{try{Xs(!0);let b=`${Te}/products`;c&&(b=`${Te}/products/category/${c}`);const N=await fetch(b,{headers:Tt()});if(!N.ok)throw new Error(`Failed to fetch products: ${N.status} ${N.statusText}`);const S=await jt(N);console.log("=== PRODUCTS FETCHED (AdminDashboard) ==="),console.log("Total products:",Array.isArray(S)?S.length:0),console.log("Full products data:",JSON.stringify(S,null,2)),Ut(S),xs(S)}catch(b){console.error("Error fetching products:",b),f(b instanceof Error?b.message:"Failed to fetch products")}finally{Xs(!1)}};y.useEffect(()=>{if((Ss||is.trim())&&Ft.length>0){en(!0);const N=setTimeout(()=>{en(!1)},100);return()=>clearTimeout(N)}else en(!1);let b=Ft;if(Ss&&(b=b.filter(N=>{const S=N.category&&typeof N.category=="object"?N.category._id:N.category,D=N.subcategory&&typeof N.subcategory=="object"?N.subcategory._id:N.subcategory;return S===Ss||D===Ss})),is.trim()){const N=is.toLowerCase().trim();b=b.filter(S=>{var Z,te,Oe,We;const D=(Z=S.name)==null?void 0:Z.toLowerCase().includes(N),U=(te=S.description)==null?void 0:te.toLowerCase().includes(N),B=S.category&&typeof S.category=="object"?(Oe=S.category.name)==null?void 0:Oe.toLowerCase().includes(N):!1,q=S.subcategory&&typeof S.subcategory=="object"?(We=S.subcategory.name)==null?void 0:We.toLowerCase().includes(N):!1;return D||U||B||q})}xs(b),en(!1)},[Ft,Ss,is]);const nu=async c=>{ra(c),c?await _r(c):await _r()},jn=async c=>{if(!c){tn(b=>{const N={...b};return delete N[c],N});return}try{gn(B=>({...B,[c]:!0}));const b=await fetch(`${Te}/subcategories/category/${c}?includeChildren=true`,{headers:Tt()});if(!b.ok){const B=await fetch(`${Te}/categories/parent/${c}`,{headers:Tt()});if(B.ok){const q=await jt(B),Z=Array.isArray(q)?q:(q==null?void 0:q.data)||[];tn(te=>({...te,[c]:Z}));return}throw new Error(`Failed to fetch child categories: ${b.status} ${b.statusText}`)}const N=await jt(b),S=Array.isArray(N)?N:(N==null?void 0:N.data)||[],D=B=>{let q=[];return B.forEach(Z=>{q.push(Z),Z.children&&Z.children.length>0&&(q=q.concat(D(Z.children)))}),q},U=D(S);tn(B=>({...B,[c]:U}))}catch(b){console.error("Error fetching child categories:",b),tn(N=>({...N,[c]:[]}))}finally{gn(b=>{const N={...b};return delete N[c],N})}},jo=(c,b)=>{if(!c)return[];const N=[c];if(!b||b===c)return N;const S=(B,q,Z)=>{if(B===q)return Z;const te=gs[B]||[];for(const Oe of te){const We=[...Z,Oe._id],Nt=S(Oe._id,q,We);if(Nt)return Nt}return null},D=S(c,b,N);if(D)return D;if(Be.find(B=>B._id===b)){const B=[];let q=b;for(;q&&(B.unshift(q),q!==c);){const Z=Be.find(te=>te._id===q);if(!Z||!Z.parent||(q=typeof Z.parent=="object"?Z.parent._id:Z.parent,B.includes(q)))break}return B}return N};y.useEffect(()=>{if(sr){const c=Be.filter(b=>b.type===sr&&(!b.parent||b.parent===null||typeof b.parent=="object"&&!b.parent._id));ar(c)}else ar([]);sr&&(Y(c=>({...c,category:"",subcategory:""})),la([]),tn({}))},[sr,Be]),y.useEffect(()=>{const c=Sa[Sa.length-1];c&&!gs[c]&&jn(c),Sa.forEach(b=>{gs[b]||jn(b)})},[Sa]);const ll=async c=>{if(Qs===c)Xt(null),ys([]),Ma(null),ie([]);else{Xt(c),Ma(null),ie([]);try{Ae(!0);const b=await fetch(`${Te}/products/category/${c}`,{headers:Tt()});let N=[];if(b.ok){const D=await jt(b);console.log("=== CATEGORY PRODUCTS (handleCategoryClick) ==="),console.log(`Category ID: ${c}`),console.log(`Products fetched: ${Array.isArray(D)?D.length:0}`),console.log("Full products data:",JSON.stringify(D,null,2)),Array.isArray(D)&&(N=D.filter(U=>!U.subcategory||U.subcategory===null||typeof U.subcategory=="string"&&U.subcategory===""))}let S=[];try{const D=await fetch(`${Te}/subcategories/category/${c}?includeChildren=true`,{headers:Tt()});if(D.ok){const U=await jt(D);S=Array.isArray(U)?U:(U==null?void 0:U.data)||[],S.sort((B,q)=>{const Z=B.sortOrder||0,te=q.sortOrder||0;return Z!==te?Z-te:new Date(q.createdAt||0).getTime()-new Date(B.createdAt||0).getTime()}),ys(S)}}catch(D){console.error("Error fetching subcategories:",D),ys([])}if(S.length>0){const D=[];for(const U of S)try{let B=[];const q=await fetch(`${Te}/products/subcategory/${U._id}`,{headers:Tt()});if(q.ok){const Oe=await jt(q);console.log("=== SUBCATEGORY PRODUCTS (handleCategoryClick) ==="),console.log(`Subcategory ID: ${U._id}`),console.log(`Products fetched: ${Array.isArray(Oe)?Oe.length:0}`),console.log("Full products data:",JSON.stringify(Oe,null,2)),Array.isArray(Oe)&&(B=Oe)}if(B.length===0){const Oe=await fetch(`${Te}/products/category/${c}`,{headers:Tt()});if(Oe.ok){const We=await jt(Oe);Array.isArray(We)&&(B=We.filter(Ht=>!Ht.subcategory||Ht.subcategory===null||typeof Ht.subcategory=="string"&&Ht.subcategory===""))}}const Z=new Set(D.map(Oe=>Oe._id)),te=B.filter(Oe=>!Z.has(Oe._id));D.push(...te)}catch(B){console.error(`Error fetching products from subcategory ${U._id}:`,B)}ie([...N,...D])}else ie(N)}catch(b){console.error("Error fetching category products:",b),f(b instanceof Error?b.message:"Failed to fetch category products"),ie([])}finally{Ae(!1)}}},Oi=async(c,b)=>{if(b&&b.stopPropagation(),Cs===c)Ma(null),ie([]);else{Ma(c);try{Ae(!0);let N=[];try{const S=await fetch(`${Te}/products/subcategory/${c}`,{headers:Tt()});if(S.ok){const D=await jt(S);console.log("=== SUBCATEGORY PRODUCTS (handleSubCategoryClick) ==="),console.log(`Subcategory ID: ${c}`),console.log(`Products fetched: ${Array.isArray(D)?D.length:0}`),console.log("Full products data:",JSON.stringify(D,null,2)),N=Array.isArray(D)?D:[]}}catch(S){console.error("Error fetching subcategory products:",S)}if(N.length===0&&Qs){console.log("No products found with subcategory, trying parent category products...");try{const S=await fetch(`${Te}/products/category/${Qs}`,{headers:Tt()});if(S.ok){const D=await jt(S);Array.isArray(D)&&(N=D.filter(B=>!B.subcategory||B.subcategory===null||typeof B.subcategory=="string"&&B.subcategory===""),console.log(`Found ${N.length} product(s) in parent category ${Qs}`))}}catch(S){console.error("Error fetching category products as fallback:",S)}}ie(N)}catch(N){console.error("Error fetching subcategory products:",N),f(N instanceof Error?N.message:"Failed to fetch subcategory products"),ie([])}finally{Ae(!1)}}},Wl=(c,b)=>{if(!b||!ee){sn();return}const N=b.getBoundingClientRect(),S=c.clientY,D=80,U=20,B=5,q=S-N.top,Z=N.bottom-S;let te=!1,Oe=null,We=0;if(q<D&&b.scrollTop>0){te=!0,Oe="up";const Nt=Math.max(0,D-q);We=B+Nt/D*(U-B)}else if(Z<D){const Nt=b.scrollHeight-b.clientHeight;if(b.scrollTop<Nt){te=!0,Oe="down";const Ht=Math.max(0,D-Z);We=B+Ht/D*(U-B)}}if(nt.current&&(clearTimeout(nt.current),nt.current=null),te&&Oe){const Nt=()=>{if(!b){sn();return}if(Oe==="up")b.scrollTop>0?(b.scrollTop=Math.max(0,b.scrollTop-We),nt.current=setTimeout(Nt,16)):sn();else if(Oe==="down"){const Ht=b.scrollHeight-b.clientHeight;b.scrollTop<Ht?(b.scrollTop=Math.min(Ht,b.scrollTop+We),nt.current=setTimeout(Nt,16)):sn()}};Nt()}else sn()},sn=()=>{nt.current&&(clearTimeout(nt.current),nt.current=null)},Ac=async(c,b,N)=>{if(window.confirm("Are you sure you want to reorder these categories? This will update the sort order for all affected categories."))try{m(!0),f(null),p(null);let D=bt.find(vt=>vt._id===c);if(D||(D=Be.find(vt=>vt._id===c)),!D)try{const vt=await fetch(`${Te}/categories/${c}`,{method:"GET",headers:Tt()});if(vt.ok)D=await jt(vt);else try{const Is=await fetch(`${Te}/subcategories/${c}`,{method:"GET",headers:Tt()});if(Is.ok){const Os=await jt(Is);D={...Os,parent:Os.category,type:Os.category&&typeof Os.category=="object"?Os.category.type:"Digital"}}}catch(Is){console.error("Error fetching dragged subcategory:",Is)}}catch(vt){console.error("Error fetching dragged category:",vt)}if(!D){f(`Dragged category not found (ID: ${c}). Please refresh the page and try again.`),m(!1);return}if(D.isSubcategory||D.displayLevel&&D.displayLevel>0){f("Subcategories should be reordered in their own section. Please use the subcategory drag and drop."),m(!1);return}let B=bt.find(vt=>vt._id===b);if(B||(B=Be.find(vt=>vt._id===b)),!B)try{const vt=await fetch(`${Te}/categories/${b}`,{method:"GET",headers:Tt()});if(vt.ok)B=await jt(vt);else try{const Is=await fetch(`${Te}/subcategories/${b}`,{method:"GET",headers:Tt()});if(Is.ok){const Os=await jt(Is);B={...Os,parent:Os.category,type:Os.category&&typeof Os.category=="object"?Os.category.type:"Digital"}}}catch(Is){console.error("Error fetching target subcategory:",Is)}}catch(vt){console.error("Error fetching target category:",vt)}if(!B){f(`Target category not found (ID: ${b}). Please refresh the page and try again.`),m(!1);return}if(B.isSubcategory||B.displayLevel&&B.displayLevel>0){f("Subcategories should be reordered in their own section. Please use the subcategory drag and drop."),m(!1);return}const Z=D.parent?typeof D.parent=="object"?D.parent._id:D.parent:null,te=B.parent?typeof B.parent=="object"?B.parent._id:B.parent:null;if(Z!==te){f("Cannot reorder categories across different levels. Categories must have the same parent."),m(!1);return}const We=[...Be,...bt.filter(vt=>!Be.find(Is=>Is._id===vt._id))].filter(vt=>(vt.parent?typeof vt.parent=="object"?vt.parent._id:vt.parent:null)===Z).sort((vt,Is)=>(vt.sortOrder||0)-(Is.sortOrder||0)),Nt=bt.filter(vt=>(vt.parent?typeof vt.parent=="object"?vt.parent._id:vt.parent:null)===Z).sort((vt,Is)=>(vt.sortOrder||0)-(Is.sortOrder||0)),Ht=Nt.findIndex(vt=>vt._id===c),Et=Nt.findIndex(vt=>vt._id===b);if(Ht===-1||Et===-1){f("Category not found in filtered view"),m(!1);return}const Ct=We.find(vt=>vt._id===b);if(!Ct){f("Target category not found in siblings"),m(!1);return}const wt=D.sortOrder??0,Yt=Ct.sortOrder??0;if(wt===Yt){p("Categories are already in the same position"),m(!1);return}const ct=We.findIndex(vt=>vt._id===c),Jt=We.findIndex(vt=>vt._id===b);if(ct===-1||Jt===-1){f("Could not find categories in siblings list"),m(!1);return}const sa=[];if(sa.push({id:c,sortOrder:Yt}),ct<Jt)for(let vt=ct+1;vt<=Jt;vt++){const Is=We[vt],Os=Is.sortOrder??vt;vt===Jt?sa.push({id:Is._id,sortOrder:Os+1}):sa.push({id:Is._id,sortOrder:Os-1})}else for(let vt=Jt;vt<ct;vt++){const Is=We[vt],Os=Is.sortOrder??vt;sa.push({id:Is._id,sortOrder:Os+1})}const Vr=sa.map(async({id:vt,sortOrder:Is})=>{let Os=Be.find(Za=>Za._id===vt)||bt.find(Za=>Za._id===vt);if(!Os)try{const Za=await fetch(`${Te}/categories/${vt}`,{method:"GET",headers:Tt()});Za.ok&&(Os=await jt(Za))}catch(Za){console.error(`Error fetching category ${vt}:`,Za)}const Br=new FormData;if(Br.append("sortOrder",Is.toString()),Os){if(Br.append("name",Os.name),Br.append("description",Os.description||""),Br.append("type",Os.type),Os.parent){const Za=typeof Os.parent=="object"?Os.parent._id:Os.parent;Br.append("parent",Za)}else Br.append("parent","");Os.slug&&Br.append("slug",Os.slug)}else console.warn(`Category ${vt} not found in local state, updating with sortOrder only`);const hr=await fetch(`${Te}/categories/${vt}`,{method:"PUT",headers:{...Tt()},body:Br});if(!hr.ok){const Za=await hr.json().catch(()=>({error:`HTTP ${hr.status}: ${hr.statusText}`}));throw new Error(`Failed to update category ${vt}: ${Za.error||hr.statusText}`)}return hr});await Promise.all(Vr),p(`Category moved successfully! Category moved from position ${wt+1} to ${Yt+1}.`),await ja()}catch(D){f(D instanceof Error?D.message:"Failed to reorder categories")}finally{m(!1)}},Ec=async(c,b)=>{if(window.confirm("Are you sure you want to reorder these subcategories? This will update the sort order for all affected subcategories."))try{m(!0),f(null),p(null);let S=ia.find(wt=>wt._id===c);if(!S){const wt=bt.find(Yt=>Yt._id===c&&Yt.isSubcategory);wt&&(S=wt)}if(!S){f("Dragged subcategory not found"),m(!1);return}let D=ia.find(wt=>wt._id===b);if(!D){const wt=bt.find(Yt=>Yt._id===b&&Yt.isSubcategory);wt&&(D=wt)}if(!D){f("Target subcategory not found"),m(!1);return}const U=S.category?typeof S.category=="object"?S.category._id:S.category:null,B=D.category?typeof D.category=="object"?D.category._id:D.category:null;if(U!==B){f("Cannot reorder subcategories across different categories."),m(!1);return}let q=[...ia];if(q.length===0||!q.some(wt=>(wt.category?typeof wt.category=="object"?wt.category._id:wt.category:null)===U)){const wt=bt.filter(Yt=>Yt.isSubcategory||Yt.displayLevel>0?(Yt.category?typeof Yt.category=="object"?Yt.category._id:Yt.category:Yt.parent?typeof Yt.parent=="object"?Yt.parent._id:Yt.parent:null)===U:!1);if(wt.length>0)q=wt;else try{const Yt=await fetch(`${Te}/subcategories/category/${U}`,{headers:Tt()});if(Yt.ok){const ct=await jt(Yt);q=Array.isArray(ct)?ct:(ct==null?void 0:ct.data)||[]}}catch(Yt){console.error("Error fetching subcategories:",Yt)}}const Z=q.filter(wt=>(wt.category?typeof wt.category=="object"?wt.category._id:wt.category:wt.parent?typeof wt.parent=="object"?wt.parent._id:wt.parent:null)===U).sort((wt,Yt)=>(wt.sortOrder||0)-(Yt.sortOrder||0)),te=Z.findIndex(wt=>wt._id===c),Oe=Z.findIndex(wt=>wt._id===b);if(te===-1||Oe===-1){f("Could not find subcategories in sorted list"),m(!1);return}if(te===Oe){p("Subcategories are already in the same position"),m(!1);return}const We=[],Nt=[...Z],[Ht]=Nt.splice(te,1);Nt.splice(Oe,0,Ht),Nt.forEach((wt,Yt)=>{We.push({id:wt._id,sortOrder:Yt})});const Et=We.map(({id:wt,sortOrder:Yt})=>{const ct=new FormData;ct.append("sortOrder",Yt.toString());const Jt=ia.find(sa=>sa._id===wt);return Jt&&(ct.append("name",Jt.name),ct.append("description",Jt.description||""),ct.append("category",U||""),Jt.slug&&ct.append("slug",Jt.slug)),fetch(`${Te}/subcategories/${wt}`,{method:"PUT",headers:{...Tt()},body:ct})});await Promise.all(Et),p(`Subcategory "${S.name}" moved successfully!`);const Ct=ia.map(wt=>{const Yt=We.find(ct=>ct.id===wt._id);return Yt?{...wt,sortOrder:Yt.sortOrder}:wt});ys(Ct),Qs&&await ll(Qs),await ja()}catch(S){f(S instanceof Error?S.message:"Failed to reorder subcategories")}finally{m(!1)}},Ri=c=>{const b=Be.find(N=>N._id===c);b&&(Ot({name:"",description:"",category:c,parent:"",type:b.type||"",slug:"",sortOrder:0,image:null}),wa(null),gt(null),l("categories"),f(null),p(null))},mi=(c,b)=>{const N=Be.find(S=>S._id===c);if(N){Fn(N.type||"");let S=[c];if(b&&(S=jo(c,b)),la(S),Y({...R,category:c,subcategory:b||""}),N.type){const D=Be.filter(U=>U.type===N.type);ar(D)}b&&jn(b),S.forEach(D=>{jn(D)}),l("products"),f(null),p(null)}},pi=async()=>{try{const c=await fetch(`${Te}/admin/users`,{headers:Tt()});if(!c.ok)throw new Error(`Failed to fetch users: ${c.status} ${c.statusText}`);const b=await jt(c);Fe(b)}catch(c){console.error("Error fetching users:",c),f(c instanceof Error?c.message:"Failed to fetch users")}},vo=async()=>{try{const c=await fetch(`${Te}/admin/employees`,{headers:Tt()});if(!c.ok)throw new Error(`Failed to fetch employees: ${c.status} ${c.statusText}`);const b=await jt(c);ht(b)}catch(c){console.error("Error fetching employees:",c),f(c instanceof Error?c.message:"Failed to fetch employees")}},Hn=async(c=!1)=>{Pe(!0);try{const b=`${Te}/admin/uploads${c?"?includeImages=true":""}`,N=await fetch(b,{headers:Tt()}),S=await jt(N);if(N.status===503)throw new Error(S.error||"Database connection timeout. Try again without images.");const D=Array.isArray(S)?S:S.uploads||[];De(D)}catch(b){console.error("Error fetching uploads:",b),f(b instanceof Error?b.message:"Failed to fetch uploaded images")}finally{Pe(!1)}},ol=async()=>{ps(!0);try{const c=await fetch(`${Te}/admin/orders`,{headers:Tt()});if(!c.ok)throw new Error(`Failed to fetch orders: ${c.status} ${c.statusText}`);const b=await jt(c);ls(b||[])}catch(c){console.error("Error fetching orders:",c),f(c instanceof Error?c.message:"Failed to fetch orders")}finally{ps(!1)}},No=async()=>{Zd(!0);try{const c=`${Te}/admin/attribute-rules?page=${Jd.page}&limit=${Jd.limit}`,b=await fetch(c,{method:"GET",headers:Tt()});if(!b.ok)throw new Error(`Failed to fetch attribute rules: ${b.status} ${b.statusText}`);const N=await jt(b),S=N.success?N.data:Array.isArray(N)?N:[];console.log(" Fetched attribute rules:",S),Wd(S),N.pagination&&yc(N.pagination)}catch(c){console.error("Error fetching attribute rules:",c),f(c instanceof Error?c.message:"Failed to fetch attribute rules"),Wd([])}finally{Zd(!1)}},iu=async c=>{c.preventDefault(),m(!0),f(null),p(null);try{if(!$t.name.trim()){f("Rule name is required"),m(!1);return}if(!$t.when.attribute||!$t.when.value){f("WHEN condition (attribute and value) is required"),m(!1);return}if($t.then.length===0){f("At least one THEN action is required"),m(!1);return}for(const B of $t.then){if(!B.targetAttribute){f(`Action "${B.action}" requires a target attribute`),m(!1);return}if(B.targetAttribute===$t.when.attribute){f("Target attribute cannot be the same as WHEN attribute"),m(!1);return}if(B.action==="SHOW_ONLY"&&(!B.allowedValues||B.allowedValues.length===0)){f("SHOW_ONLY action requires at least one allowed value"),m(!1);return}if(B.action==="SET_DEFAULT"&&!B.defaultValue){f("SET_DEFAULT action requires a default value"),m(!1);return}}if($t.scope==="CATEGORY"&&!$t.scopeRefId){f("Category scope requires a category selection"),m(!1);return}if($t.scope==="PRODUCT"&&!$t.scopeRefId){f("Product scope requires a product selection"),m(!1);return}const b=At.find(B=>B.attributeName===$t.when.attribute);if(!b){f("WHEN attribute not found"),m(!1);return}const N={name:$t.name,when:{attribute:b._id,value:$t.when.value},then:$t.then.map(B=>{if(B.action==="TRIGGER_PRICING")return{action:B.action,pricingSignal:B.pricingSignal||{pricingKey:"",scope:"PRODUCT",priority:0}};const q=At.find(Z=>Z.attributeName===B.targetAttribute);if(!q&&B.targetAttribute)throw new Error(`Target attribute "${B.targetAttribute}" not found`);return{action:B.action,targetAttribute:q==null?void 0:q._id,allowedValues:B.allowedValues||[],defaultValue:B.defaultValue||null}}),priority:$t.priority||0,isActive:$t.isActive};$t.scope==="CATEGORY"?N.applicableCategory=$t.scopeRefId:$t.scope==="PRODUCT"&&(N.applicableProduct=$t.scopeRefId);const S=In?`${Te}/admin/attribute-rules/${In}`:`${Te}/admin/attribute-rules`,U=await fetch(S,{method:In?"PUT":"POST",headers:{...Tt(!0)},body:JSON.stringify(N)});if(!U.ok){const B=await jt(U);throw new Error(B.error||`Failed to ${In?"update":"create"} rule`)}p(`Rule ${In?"updated":"created"} successfully`),await No(),wo()}catch(b){console.error("Error saving attribute rule:",b),f(b instanceof Error?b.message:`Failed to ${In?"update":"create"} rule`)}finally{m(!1)}},Qm=async c=>{if(window.confirm("Are you sure you want to delete this rule?")){m(!0),f(null);try{if(!(await fetch(`${Te}/admin/attribute-rules/${c}`,{method:"DELETE",headers:Tt()})).ok)throw new Error("Failed to delete rule");p("Rule deleted successfully"),await No()}catch(b){console.error("Error deleting rule:",b),f(b instanceof Error?b.message:"Failed to delete rule")}finally{m(!1)}}},wo=()=>{bc(null),bo(!1),za({name:"",scope:"GLOBAL",scopeRefId:"",when:{attribute:"",value:""},then:[],priority:0,isActive:!0})},Ym=c=>{var D;const b=typeof c.when.attribute=="object"&&c.when.attribute!==null?c.when.attribute.attributeName:((D=At.find(U=>U._id===c.when.attribute))==null?void 0:D.attributeName)||"";let N="";c.applicableProduct?N=typeof c.applicableProduct=="object"&&c.applicableProduct!==null?c.applicableProduct._id:c.applicableProduct:c.applicableCategory&&(N=typeof c.applicableCategory=="object"&&c.applicableCategory!==null?c.applicableCategory._id:c.applicableCategory);const S=(c.then||[]).filter(U=>U&&U.targetAttribute).map(U=>{var q;const B=typeof U.targetAttribute=="object"&&U.targetAttribute!==null?U.targetAttribute.attributeName:U.targetAttribute&&((q=At.find(Z=>Z._id===U.targetAttribute))==null?void 0:q.attributeName)||"";return{action:U.action,targetAttribute:B,allowedValues:U.allowedValues||[],defaultValue:U.defaultValue||null}});za({name:`${c.name||"Untitled Rule"} (Copy)`,scope:c.applicableProduct?"PRODUCT":c.applicableCategory?"CATEGORY":"GLOBAL",scopeRefId:N,when:{attribute:b,value:c.when.value||""},then:S,priority:c.priority||0,isActive:c.isActive!==void 0?c.isActive:!0}),bc(null),bo(!0)},lu=c=>{var S;const b=typeof c.when.attribute=="object"&&c.when.attribute!==null?c.when.attribute.attributeName:((S=At.find(D=>D._id===c.when.attribute))==null?void 0:S.attributeName)||"";let N="";c.applicableProduct?N=typeof c.applicableProduct=="object"&&c.applicableProduct!==null?c.applicableProduct._id:c.applicableProduct:c.applicableCategory&&(N=typeof c.applicableCategory=="object"&&c.applicableCategory!==null?c.applicableCategory._id:c.applicableCategory),za({name:c.name||"",scope:c.applicableProduct?"PRODUCT":c.applicableCategory?"CATEGORY":"GLOBAL",scopeRefId:N,when:{attribute:b,value:c.when.value||""},then:(c.then||[]).filter(D=>D&&D.targetAttribute).map(D=>{var B;const U=typeof D.targetAttribute=="object"&&D.targetAttribute!==null?D.targetAttribute.attributeName:D.targetAttribute&&((B=At.find(q=>q._id===D.targetAttribute))==null?void 0:B.attributeName)||"";return{action:D.action,targetAttribute:U,allowedValues:D.allowedValues||[],defaultValue:D.defaultValue||null}}),priority:c.priority||0,isActive:c.isActive!==void 0?c.isActive:!0}),bc(c._id),bo(!0)},Zl=async c=>{Kd(!0);try{const b=c||Bn,N=new URLSearchParams;b.attributeId&&N.append("attributeId",b.attributeId),b.parentValue&&N.append("parentValue",b.parentValue);const S=`${Te}/admin/sub-attributes${N.toString()?`?${N.toString()}`:""}`,D=await fetch(S,{method:"GET",headers:Tt()});if(!D.ok)throw new Error(`Failed to fetch sub-attributes: ${D.status} ${D.statusText}`);const U=await jt(D);jc(Array.isArray(U)?U:[])}catch(b){console.error("Error fetching sub-attributes:",b),f(b instanceof Error?b.message:"Failed to fetch sub-attributes"),jc([])}finally{Kd(!1)}},Tc=async c=>{c.preventDefault(),m(!0),f(null),p(null);try{if(!Hs.parentAttribute){f("Parent attribute is required"),m(!1);return}if(!Hs.parentValue){f("Parent value is required"),m(!1);return}const b=At.find(N=>N.attributeName===Hs.parentAttribute);if(!b){f("Parent attribute not found"),m(!1);return}if(oi){if(!Hs.value||!Hs.label){f("Value and label are required for the sub-attribute being edited"),m(!1);return}const N=new FormData;N.append("parentAttribute",b._id),N.append("parentValue",Hs.parentValue),N.append("value",Hs.value),N.append("label",Hs.label),N.append("priceAdd",Hs.priceAdd.toString()),N.append("isEnabled",Hs.isEnabled.toString()),Hs.image&&N.append("image",Hs.image);const S=await fetch(`${Te}/admin/sub-attributes/${oi}`,{method:"PUT",headers:{Authorization:Tt().Authorization,Accept:"application/json"},body:N});if(!S.ok){const te=await jt(S);throw new Error(te.error||"Failed to update sub-attribute")}const D=Mr.filter(te=>te.value.trim()&&te.label.trim());let U=!0,B=0,q=0;const Z=[];if(D.length>0)for(const te of D)try{const Oe=new FormData;Oe.append("parentAttribute",b._id),Oe.append("parentValue",Hs.parentValue),Oe.append("value",te.value.trim()),Oe.append("label",te.label.trim()),Oe.append("priceAdd",te.priceAdd.toString()),Oe.append("isEnabled",te.isEnabled.toString()),te.image&&Oe.append("image",te.image);const We=await fetch(`${Te}/admin/sub-attributes`,{method:"POST",headers:{Authorization:Tt().Authorization,Accept:"application/json"},body:Oe});if(!We.ok){const Nt=await jt(We);throw new Error(Nt.error||"Failed to create sub-attribute")}B++}catch(Oe){q++,Z.push(`${te.label}: ${Oe instanceof Error?Oe.message:"Unknown error"}`)}q>0?f(`Updated 1 sub-attribute. Created ${B} new sub-attribute(s), but ${q} failed: ${Z.join("; ")}`):B>0?p(`Successfully updated 1 sub-attribute and created ${B} new sub-attribute(s)`):p("Sub-attribute updated successfully"),await Zl(),await cr(),fi()}else{const N=Mr.filter(B=>B.value.trim()&&B.label.trim());if(N.length===0){f("At least one sub-attribute with value and label is required"),m(!1);return}let S=0,D=0;const U=[];for(const B of N)try{const q=new FormData;q.append("parentAttribute",b._id),q.append("parentValue",Hs.parentValue),q.append("value",B.value.trim()),q.append("label",B.label.trim()),q.append("priceAdd",B.priceAdd.toString()),q.append("isEnabled",B.isEnabled.toString()),B.image&&q.append("image",B.image);const Z=await fetch(`${Te}/admin/sub-attributes`,{method:"POST",headers:{Authorization:Tt().Authorization,Accept:"application/json"},body:q});if(!Z.ok){const te=await jt(Z);throw new Error(te.error||"Failed to create sub-attribute")}S++}catch(q){D++,U.push(`${B.label}: ${q instanceof Error?q.message:"Unknown error"}`)}D>0?f(`Created ${S} sub-attribute(s), but ${D} failed: ${U.join("; ")}`):p(`Successfully created ${S} sub-attribute(s)`),await Zl(),await cr(),fi()}}catch(b){console.error("Error saving sub-attribute:",b),f(b instanceof Error?b.message:"Failed to save sub-attribute")}finally{m(!1)}},an=async c=>{if(window.confirm("Are you sure you want to delete this sub-attribute?")){m(!0),f(null);try{if(!(await fetch(`${Te}/admin/sub-attributes/${c}`,{method:"DELETE",headers:Tt()})).ok)throw new Error("Failed to delete sub-attribute");p("Sub-attribute deleted successfully"),await Zl(),await cr()}catch(b){console.error("Error deleting sub-attribute:",b),f(b instanceof Error?b.message:"Failed to delete sub-attribute")}finally{m(!1)}}},fi=()=>{Xd(null),vc(!1),Vn({parentAttribute:"",parentValue:"",value:"",label:"",image:null,priceAdd:0,isEnabled:!0}),ci([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}])},Nr=()=>{ci([...Mr,{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}])},Mi=c=>{Mr.length>1&&ci(Mr.filter((b,N)=>N!==c))},zr=(c,b,N)=>{const S=[...Mr];S[c]={...S[c],[b]:N},ci(S)},So=c=>{var N;const b=typeof c.parentAttribute=="object"&&c.parentAttribute!==null?c.parentAttribute.attributeName:((N=At.find(S=>S._id===c.parentAttribute))==null?void 0:N.attributeName)||"";Vn({parentAttribute:b,parentValue:c.parentValue||"",value:c.value||"",label:c.label||"",image:null,priceAdd:c.priceAdd||0,isEnabled:c.isEnabled!==void 0?c.isEnabled:!0}),ci([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}]),Xd(c._id),vc(!0)},cr=async(c,b)=>{li(!0);try{let N=`${Te}/attribute-types`;const S=new URLSearchParams;c&&S.append("categoryId",c),b&&S.append("subCategoryId",b),S.toString()&&(N+=`?${S.toString()}`),console.log("Fetching attribute types from:",N);const D=await fetch(N,{method:"GET",headers:Tt()});if(console.log("Attribute types response status:",D.status,D.statusText),!D.ok){if(D.status===404){console.warn("Attribute types endpoint not found (404). The server may need to be restarted. Returning empty array."),_a([]);return}throw new Error(`Failed to fetch attribute types: ${D.status} ${D.statusText}`)}const U=await jt(D),q=(U.data||U||[]).filter(Z=>{if(Z.isCommonAttribute||!c&&!b)return!0;const te=Z.applicableCategories||[],Oe=Z.applicableSubCategories||[];return!!(te.length===0&&Oe.length===0||c&&te.some(We=>(typeof We=="object"&&We!==null?We._id:We)===c)||b&&Oe.some(We=>(typeof We=="object"&&We!==null?We._id:We)===b))});_a(q)}catch(N){console.error("Error fetching attribute types:",N),N instanceof Error&&(N.message.includes("404")||N.message.includes("Not Found"))?(console.warn("Attribute types endpoint returned 404. Please restart the server to register the route."),_a([])):f(N instanceof Error?N.message:"Failed to fetch attribute types")}finally{li(!1)}},kc=()=>{let c=[];if(K.attributeOptionsTable&&K.attributeOptionsTable.length>0)c=K.attributeOptionsTable.filter(U=>U.name.trim()!=="").map(U=>{var Oe,We,Nt,Ht;let B=0;(Oe=U.optionUsage)!=null&&Oe.price&&U.priceImpact?B=parseFloat(U.priceImpact)||0:U.priceImpactPer1000&&(B=parseFloat(U.priceImpactPer1000)||0);const q=B>0?1+B/1e3:1,Z=[];(We=U.optionUsage)!=null&&We.price&&Z.push(`Price Impact: ${U.priceImpact||0}`),(Nt=U.optionUsage)!=null&&Nt.image&&Z.push(`Images Required: ${U.numberOfImagesRequired||0}`),(Ht=U.optionUsage)!=null&&Ht.listing&&Z.push(`Filters: ${U.listingFilters||"None"}`);const te=Z.length>0?Z.join(" | "):"";return{value:U.name.toLowerCase().replace(/\s+/g,"-"),label:U.name,priceMultiplier:q,description:te,image:U.image||""}});else if(K.simpleOptions)c=K.simpleOptions.split(",").map(B=>B.trim()).filter(B=>B!=="").map(B=>({value:B.toLowerCase().replace(/\s+/g,"-"),label:B,priceMultiplier:1,description:"",image:""}));else if(K.primaryEffectType==="PRICE"&&K.priceImpactPer1000){const U=parseFloat(K.priceImpactPer1000)||0,B=U>0?1+U/1e3:1;c=[{value:K.attributeName.toLowerCase().replace(/\s+/g,"-"),label:K.attributeName,priceMultiplier:B,description:"",image:""}]}const b=K.isPriceEffect||K.effectDescription&&K.effectDescription.toLowerCase().includes("price");if(K.isPriceEffect&&K.priceEffectAmount&&c.length===0){const U=parseFloat(K.priceEffectAmount)||0,B=U>0?1+U/1e3:1;c=[{value:K.attributeName.toLowerCase().replace(/\s+/g,"-"),label:K.attributeName,priceMultiplier:B,description:"",image:""}]}let N=K.primaryEffectType;if(K.effectDescription){const U=K.effectDescription.toLowerCase();U.includes("price")||U.includes("cost")?N="PRICE":U.includes("file")||U.includes("upload")||U.includes("image")?N="FILE":U.includes("variant")||U.includes("version")||U.includes("type")?N="VARIANT":N="INFORMATIONAL"}const S=K.primaryEffectType==="FILE"?K.inputStyle==="FILE_UPLOAD"?"PRINTING_IMAGE":"GENERAL":K.primaryEffectType==="PRICE"&&K.inputStyle==="NUMBER"?"QUANTITY_PRICING":"GENERAL";if(K.isFixedQuantity&&K.fixedQuantityMin&&K.fixedQuantityMax){const U=parseInt(K.fixedQuantityMin)||0,B=parseInt(K.fixedQuantityMax)||0;c.length>0?c[0].description=JSON.stringify({fixedQuantityMin:U,fixedQuantityMax:B}):c.push({value:"fixed-quantity",label:"Fixed Quantity",priceMultiplier:1,description:JSON.stringify({fixedQuantityMin:U,fixedQuantityMax:B}),image:""})}const D=N||K.primaryEffectType||"INFORMATIONAL";return{attributeName:K.attributeName||"",functionType:S||"GENERAL",isPricingAttribute:b||!1,inputStyle:K.inputStyle||"DROPDOWN",isFixedQuantityNeeded:K.isFixedQuantity||K.inputStyle==="NUMBER"&&D==="PRICE",primaryEffectType:D,effectDescription:K.effectDescription||"",isFilterable:K.isFilterable!==void 0?K.isFilterable:D==="INFORMATIONAL"||D==="VARIANT",attributeValues:c,defaultValue:c.length>0?c[0].value:"",isRequired:K.isRequired!==void 0?K.isRequired:D==="FILE"||D==="PRICE"||K.isPriceEffect,displayOrder:0,isCommonAttribute:K.isCommonAttribute!==void 0?K.isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[],parentAttribute:K.parentAttribute||null,showWhenParentValue:K.showWhenParentValue||[],hideWhenParentValue:K.hideWhenParentValue||[],fixedQuantityMin:K.isFixedQuantity?parseInt(K.fixedQuantityMin)||0:void 0,fixedQuantityMax:K.isFixedQuantity?parseInt(K.fixedQuantityMax)||0:void 0,isStepQuantity:K.isStepQuantity||!1,isRangeQuantity:K.isRangeQuantity||!1,stepQuantities:K.isStepQuantity&&K.stepQuantities.length>0?K.stepQuantities.map(U=>({quantity:parseFloat(U.quantity)||0,price:parseFloat(U.price)||0})).filter(U=>U.quantity>0):[],rangeQuantities:K.isRangeQuantity&&K.rangeQuantities.length>0?K.rangeQuantities.map(U=>({min:parseFloat(U.min)||0,max:U.max?parseFloat(U.max):null,price:parseFloat(U.price)||0})).filter(U=>U.min>0):[]}},hi=async c=>{var b,N;c.preventDefault(),c.stopPropagation(),m(!0),f(null),p(null);try{const S=kc();P({});let D=!1;const U={};if(S.attributeName||(U.attributeName="Attribute name is required",D=!0),S.functionType,S.inputStyle,(!S.primaryEffectType||S.primaryEffectType.trim()==="")&&(U.primaryEffectType="Primary effect type is required. Please describe what this attribute affects in the 'What This Affects' field.",D=!0),(!K.effectDescription||K.effectDescription.trim()==="")&&(U.primaryEffectType="Please describe what this attribute affects in the 'What This Affects' field.",D=!0),["DROPDOWN","RADIO","POPUP"].includes(S.inputStyle)&&(!S.attributeValues||S.attributeValues.length<2)&&(U.attributeValues=`${S.inputStyle} requires at least 2 options. Please add options in the table above.`,D=!0),K.attributeOptionsTable&&K.attributeOptionsTable.length>0&&K.attributeOptionsTable.filter((Et,Ct)=>{if(!Et.name||Et.name.trim()==="")return!1;const wt=Et.optionUsage||{price:!1,image:!1,listing:!1};return!wt.price&&!wt.image&&!wt.listing}).length>0&&(U.attributeValues="Each option must have at least one usage selected (Price, Image, or Listing).",D=!0),D){P(U),f("Please fix the errors below"),m(!1);const Ht=Object.keys(U)[0];if(Ht==="attributeName")Pa("attributeName","attribute-name");else if(Ht==="functionType")Pa("functionType","attribute-functionType");else if(Ht==="inputStyle")Pa("inputStyle","attribute-inputStyle");else if(Ht==="primaryEffectType")Pa("primaryEffectType","attribute-primaryEffectType");else if(Ht==="attributeValues"){const Et=document.querySelector("[data-attribute-options-table]");Et&&Et.scrollIntoView({behavior:"smooth",block:"center"})}return}const B={attributeName:S.attributeName||"",functionType:S.functionType||"GENERAL",isPricingAttribute:S.isPricingAttribute||!1,inputStyle:S.inputStyle||"DROPDOWN",isFixedQuantityNeeded:S.isFixedQuantityNeeded||!1,primaryEffectType:S.primaryEffectType||"INFORMATIONAL",effectDescription:K.effectDescription||S.effectDescription||"",isFilterable:S.isFilterable||!1,attributeValues:JSON.stringify(S.attributeValues),defaultValue:S.defaultValue||"",isRequired:S.isRequired||!1,displayOrder:S.displayOrder||0,isCommonAttribute:S.isCommonAttribute!==void 0?S.isCommonAttribute:!0,applicableCategories:JSON.stringify(S.applicableCategories),applicableSubCategories:JSON.stringify(S.applicableSubCategories),parentAttribute:S.parentAttribute||null,showWhenParentValue:JSON.stringify(S.showWhenParentValue||[]),hideWhenParentValue:JSON.stringify(S.hideWhenParentValue||[])};console.log("=== ATTRIBUTE TYPE PAYLOAD ==="),console.log("Form effectDescription:",K.effectDescription),console.log("FullAttributeType effectDescription:",S.effectDescription),console.log("Payload effectDescription:",B.effectDescription),console.log("==============================");const q=Un?`${Te}/attribute-types/${Un}`:`${Te}/attribute-types`,Z=Un?"PUT":"POST";console.log("Sending attribute type request:",{url:q,method:Z,payload:{...B,attributeValues:"[stringified]",effectDescription:B.effectDescription}});const te=await fetch(q,{method:Z,headers:{...Tt(),"Content-Type":"application/json"},body:JSON.stringify(B)});if(console.log("Attribute type response status:",te.status,te.statusText),te.status===404)throw new Error("Attribute types API endpoint not found (404). Please ensure the server is running and the route is registered. Try restarting the server.");const Oe=await jt(te);if(console.log("Attribute type response data:",{success:Oe.success,effectDescription:(b=Oe.data)==null?void 0:b.effectDescription,fullData:Oe.data}),!te.ok)throw new Error(Oe.error||Oe.message||`Failed to save attribute type: ${te.status} ${te.statusText}`);p(Un?"Attribute type updated successfully":"Attribute type created successfully"),ft({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]});const We=Ql,Nt=(Oe==null?void 0:Oe._id)||((N=Oe==null?void 0:Oe.attributeType)==null?void 0:N._id);al(null),Ql&&Yl(!1),await cr(),We&&Nt&&Ge([...Ce||[],{attributeTypeId:Nt,isEnabled:!0,isRequired:!1,displayOrder:(Ce||[]).length}])}catch(S){console.error("Error saving attribute type:",S),f(S instanceof Error?S.message:"Failed to save attribute type")}finally{m(!1)}},ou=async c=>{var b,N,S,D;try{const U=await fetch(`${Te}/attribute-types/${c}`,{method:"GET",headers:Tt()});if(!U.ok)throw new Error(`Failed to fetch attribute type: ${U.status}`);const B=await jt(U),q=B.data||B;if(console.log("EDIT AttributeType - Fetched attributeType:",{_id:q==null?void 0:q._id,attributeName:q==null?void 0:q.attributeName,isStepQuantity:q==null?void 0:q.isStepQuantity,isRangeQuantity:q==null?void 0:q.isRangeQuantity,stepQuantities:q==null?void 0:q.stepQuantities,rangeQuantities:q==null?void 0:q.rangeQuantities}),q){window.scrollTo({top:0,behavior:"smooth"});const Z=(q.attributeValues||[]).filter(Ct=>(Ct.label||Ct.value)&&Ct.value!=="fixed-quantity").map(Ct=>{const wt=Ct.priceMultiplier?((Ct.priceMultiplier-1)*1e3).toFixed(2):"0",Yt=parseFloat(wt)>0;return{name:Ct.label||Ct.value||"",priceImpactPer1000:wt,image:Ct.image||void 0,optionUsage:{price:Yt,image:!!Ct.image,listing:!1},priceImpact:Yt?wt:"",numberOfImagesRequired:Ct.image?1:0,listingFilters:""}})||[],te=(Z||[]).map(Ct=>Ct.name).join(", ");let Oe="",We="",Nt=!1;if(q.fixedQuantityMin!==void 0&&q.fixedQuantityMax!==void 0)Oe=String(q.fixedQuantityMin),We=String(q.fixedQuantityMax),Nt=!0;else if(q.attributeValues&&q.attributeValues.length>0)try{const Ct=q.attributeValues[0];if(Ct.description){const wt=JSON.parse(Ct.description);wt.fixedQuantityMin&&wt.fixedQuantityMax&&(Oe=String(wt.fixedQuantityMin),We=String(wt.fixedQuantityMax),Nt=!0)}}catch{}const Ht=q.isPricingAttribute||!1;let Et="";if(Ht&&q.attributeValues&&q.attributeValues.length>0){const Ct=q.attributeValues[0];Ct.priceMultiplier&&(Et=((Ct.priceMultiplier-1)*1e3).toFixed(2))}ft({attributeName:q.attributeName||"",inputStyle:q.inputStyle||"DROPDOWN",attributeImage:null,effectDescription:q.effectDescription||"",simpleOptions:te,isPriceEffect:Ht,isStepQuantity:q.isStepQuantity||!1,isRangeQuantity:q.isRangeQuantity||!1,priceEffectAmount:Et,stepQuantities:(q.stepQuantities||[]).map(Ct=>({quantity:Ct.quantity?String(Ct.quantity):"",price:Ct.price?String(Ct.price):""})),rangeQuantities:(q.rangeQuantities||[]).map(Ct=>({min:Ct.min?String(Ct.min):"",max:Ct.max?String(Ct.max):"",price:Ct.price?String(Ct.price):""})),isFixedQuantity:Nt,fixedQuantityMin:Oe,fixedQuantityMax:We,primaryEffectType:q.primaryEffectType||"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:Z,functionType:q.functionType||"GENERAL",isPricingAttribute:q.isPricingAttribute||!1,isFixedQuantityNeeded:q.isFixedQuantityNeeded||!1,isFilterable:q.isFilterable||!1,attributeValues:q.attributeValues||[],defaultValue:q.defaultValue||"",isRequired:q.isRequired||!1,displayOrder:q.displayOrder||0,isCommonAttribute:q.isCommonAttribute!==void 0?q.isCommonAttribute:!0,applicableCategories:((b=q.applicableCategories)==null?void 0:b.map(Ct=>Ct._id||Ct))||[],applicableSubCategories:((N=q.applicableSubCategories)==null?void 0:N.map(Ct=>Ct._id||Ct))||[],parentAttribute:q.parentAttribute&&typeof q.parentAttribute=="object"?q.parentAttribute._id:q.parentAttribute||"",showWhenParentValue:q.showWhenParentValue||[],hideWhenParentValue:q.hideWhenParentValue||[]}),al(c)}else f("Attribute type not found")}catch(U){console.error("Error fetching attribute type for editing:",U),f(U instanceof Error?U.message:"Failed to load attribute type");const B=At.find(q=>q._id===c);if(B){const q=(B.attributeValues||[]).filter(Et=>(Et.label||Et.value)&&Et.value!=="fixed-quantity").map(Et=>{const Ct=Et.priceMultiplier?((Et.priceMultiplier-1)*1e3).toFixed(2):"0",wt=parseFloat(Ct)>0;return{name:Et.label||Et.value||"",priceImpactPer1000:Ct,image:Et.image||void 0,optionUsage:{price:wt,image:!!Et.image,listing:!1},priceImpact:wt?Ct:"",numberOfImagesRequired:Et.image?1:0,listingFilters:""}})||[],Z=(q||[]).map(Et=>Et.name).join(", ");let te="",Oe="",We=!1;B.fixedQuantityMin!==void 0&&B.fixedQuantityMax!==void 0&&(te=String(B.fixedQuantityMin),Oe=String(B.fixedQuantityMax),We=!0);const Nt=B.isPricingAttribute||!1;let Ht="";if(Nt&&B.attributeValues&&B.attributeValues.length>0){const Et=B.attributeValues[0];Et.priceMultiplier&&(Ht=((Et.priceMultiplier-1)*1e3).toFixed(2))}ft({attributeName:B.attributeName||"",inputStyle:B.inputStyle||"DROPDOWN",attributeImage:null,effectDescription:B.effectDescription||"",simpleOptions:Z,isPriceEffect:Nt,isStepQuantity:B.isStepQuantity||!1,isRangeQuantity:B.isRangeQuantity||!1,priceEffectAmount:Ht,stepQuantities:(B.stepQuantities||[]).map(Et=>({quantity:Et.quantity?String(Et.quantity):"",price:Et.price?String(Et.price):""})),rangeQuantities:(B.rangeQuantities||[]).map(Et=>({min:Et.min?String(Et.min):"",max:Et.max?String(Et.max):"",price:Et.price?String(Et.price):""})),isFixedQuantity:We,fixedQuantityMin:te,fixedQuantityMax:Oe,primaryEffectType:B.primaryEffectType||"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:q,functionType:B.functionType||"GENERAL",isPricingAttribute:B.isPricingAttribute||!1,isFixedQuantityNeeded:B.isFixedQuantityNeeded||!1,isFilterable:B.isFilterable||!1,attributeValues:B.attributeValues||[],defaultValue:B.defaultValue||"",isRequired:B.isRequired||!1,displayOrder:B.displayOrder||0,isCommonAttribute:B.isCommonAttribute!==void 0?B.isCommonAttribute:!0,applicableCategories:((S=B.applicableCategories)==null?void 0:S.map(Et=>Et._id||Et))||[],applicableSubCategories:((D=B.applicableSubCategories)==null?void 0:D.map(Et=>Et._id||Et))||[],parentAttribute:B.parentAttribute&&typeof B.parentAttribute=="object"?B.parentAttribute._id:B.parentAttribute||"",showWhenParentValue:B.showWhenParentValue||[],hideWhenParentValue:B.hideWhenParentValue||[]}),al(c)}}},Co=async c=>{const b=At.find(N=>N._id===c);if(b&&window.confirm(`Are you sure you want to delete the attribute type "${b.attributeName}"?

Note: This action cannot be undone. If this attribute is being used in any products, the deletion will be prevented.`))try{m(!0),f(null),p(null);const N=await fetch(`${Te}/attribute-types/${c}`,{method:"DELETE",headers:Tt()});if(!N.ok){const D=N.clone();let U="Failed to delete attribute type";try{const q=await D.json();U=q.error||q.message||U,console.log("Error data received:",q)}catch{try{U=await N.text()||N.statusText||U}catch{U=N.statusText||U}}console.log("Error message:",U),U.toLowerCase().includes("used")||U.toLowerCase().includes("in use")||U.toLowerCase().includes("product")||U.toLowerCase().includes("cannot delete")?It.error(e.jsx("div",{children:e.jsx("div",{className:"font-semibold",children:"Attribute is in use"})}),{duration:5e3,position:"bottom-right"}):It.error(U,{duration:4e3,position:"bottom-right"}),f(U),m(!1);return}const S=await jt(N);It.success("Attribute deleted successfully",{duration:3e3,position:"bottom-right"}),cr()}catch(N){console.error("Error deleting attribute type:",N);const S=N instanceof Error?N.message:"Failed to delete attribute type";S.toLowerCase().includes("used")||S.toLowerCase().includes("in use")||S.toLowerCase().includes("product")?It.error(e.jsx("div",{children:e.jsx("div",{className:"font-semibold",children:"Attribute is in use"})}),{duration:5e3,position:"bottom-right"}):It.error(S,{duration:4e3,position:"bottom-right"}),f(S)}finally{m(!1)}},Lr=async()=>{wc(!0);try{const c=await fetch(`${Te}/departments`,{method:"GET",headers:Tt()});if(!c.ok)throw new Error(`Failed to fetch departments: ${c.status} ${c.statusText}`);const b=await jt(c);Nc(b.data||b||[])}catch(c){console.error("Error fetching departments:",c),f(c instanceof Error?c.message:"Failed to fetch departments"),Nc([])}finally{wc(!1)}},Wm=async c=>{c.preventDefault(),m(!0),f(null),p(null);try{if(W({}),!jr.name.trim()){W({name:"Department name is required"}),f("Department name is required"),m(!1),Pa("name","department-name");return}const b=qn?`${Te}/departments/${qn}`:`${Te}/departments`,S=await fetch(b,{method:qn?"PUT":"POST",headers:{...Tt(),"Content-Type":"application/json"},body:JSON.stringify(jr)}),D=await jt(S);if(!S.ok)throw new Error(D.error||`Failed to ${qn?"update":"create"} department`);p(qn?"Department updated successfully":"Department created successfully"),ki({name:"",description:"",isEnabled:!0,operators:[]}),Ti(null),Lr()}catch(b){console.error("Error saving department:",b),f(b instanceof Error?b.message:"Failed to save department")}finally{m(!1)}},wr=c=>{var N;const b=Qa.find(S=>S._id===c);if(b){window.scrollTo({top:0,behavior:"smooth"});const S=((N=b.operators)==null?void 0:N.map(D=>typeof D=="object"&&D!==null&&(D._id||D.id)||String(D)))||[];ki({name:b.name||"",description:b.description||"",isEnabled:b.isEnabled!==void 0?b.isEnabled:!0,operators:S}),Ti(c)}},Dc=async c=>{if(window.confirm("Are you sure you want to delete this department? This action cannot be undone if there are active orders.")){m(!0);try{const b=await fetch(`${Te}/departments/${c}`,{method:"DELETE",headers:Tt()}),N=await jt(b);if(!b.ok)throw new Error(N.error||"Failed to delete department");p("Department deleted successfully"),Lr()}catch(b){console.error("Error deleting department:",b),f(b instanceof Error?b.message:"Failed to delete department")}finally{m(!1)}}},$r=async()=>{rl(!0);try{const c=await fetch(`${Te}/sequences`,{headers:Tt()});if(!c.ok)throw new Error("Failed to fetch sequences");const b=await jt(c);su(b.data||b||[])}catch(c){console.error("Error fetching sequences:",c),f(c instanceof Error?c.message:"Failed to fetch sequences")}finally{rl(!1)}},cu=async c=>{c.preventDefault(),m(!0),f(null),p(null);try{ce({});let b=!1;const N={};if(Bt.name.trim()||(N.name="Sequence name is required",b=!0),Bt.printType||(N.printType="Print type is required",b=!0),Bt.category||(N.category="Category is required",b=!0),(!Bt.selectedDepartments||Bt.selectedDepartments.length===0)&&(N.selectedDepartments="At least one department must be selected",b=!0),b){ce(N),f("Please fix the errors below"),m(!1);const q=Object.keys(N)[0];q==="name"?Pa("name","sequence-name"):q==="printType"?Pa("printType","sequence-printType"):q==="category"?Pa("category","sequence-category"):q==="selectedDepartments"&&Pa("selectedDepartments","sequence-departments");return}const S=vr?`${Te}/sequences/${vr}`:`${Te}/sequences`,U=await fetch(S,{method:vr?"PUT":"POST",headers:{...Tt(),"Content-Type":"application/json"},body:JSON.stringify({name:Bt.name,printType:Bt.printType,category:Bt.category||null,subcategory:Bt.subcategory||null,departments:Bt.selectedDepartments,attributes:Bt.selectedAttributes||[]})}),B=await jt(U);if(!U.ok)throw new Error(B.error||`Failed to ${vr?"update":"create"} sequence`);p(vr?"Sequence updated successfully":"Sequence created successfully"),or({name:"",printType:"",category:"",subcategory:"",selectedDepartments:[],selectedAttributes:[]}),Sc(null),$r()}catch(b){console.error("Error saving sequence:",b),f(b instanceof Error?b.message:"Failed to save sequence")}finally{m(!1)}},Ao=c=>{const b=(di||[]).find(N=>N._id===c);if(b){window.scrollTo({top:0,behavior:"smooth"});let N="";if(b.category){const S=typeof b.category=="object"?b.category:Be.find(D=>D._id===b.category);S&&(S.type==="Digital"||S.type==="digital")?N="digital":N="bulk"}else N="bulk";or({name:b.name||"",printType:N,category:b.category&&typeof b.category=="object"&&b.category!==null?b.category._id:b.category||"",subcategory:b.subcategory&&typeof b.subcategory=="object"&&b.subcategory!==null?b.subcategory._id:b.subcategory||"",selectedDepartments:(b.departments||[]).map(S=>!S||!S.department?null:typeof S.department=="object"&&S.department!==null?S.department._id:S.department).filter(S=>S!==null)||[],selectedAttributes:(b.attributes||[]).map(S=>S?typeof S=="object"&&S!==null?S._id:S:null).filter(S=>S!==null)||[]}),Sc(c)}},_i=async c=>{if(window.confirm("Are you sure you want to delete this sequence? This action cannot be undone.")){m(!0);try{if(!(await fetch(`${Te}/sequences/${c}`,{method:"DELETE",headers:Tt()})).ok)throw new Error("Failed to delete sequence");p("Sequence deleted successfully"),$r()}catch(b){console.error("Error deleting sequence:",b),f(b instanceof Error?b.message:"Failed to delete sequence")}finally{m(!1)}}},Pc=c=>{const b=Bt.selectedDepartments.indexOf(c);or(b===-1?{...Bt,selectedDepartments:[...Bt.selectedDepartments,c]}:{...Bt,selectedDepartments:Bt.selectedDepartments.filter(N=>N!==c)})},cl=async(c,b,N,S)=>{try{const D={};N&&(D.action=N),b?D.status=b:(Pt.status&&(D.status=Pt.status),Pt.deliveryDate&&(D.deliveryDate=Pt.deliveryDate),Pt.adminNotes!==void 0&&(D.adminNotes=Pt.adminNotes)),S&&(D.deliveryDate=S);const U=await fetch(`${Te}/admin/orders/${c}`,{method:"PUT",headers:{...Tt(),"Content-Type":"application/json"},body:JSON.stringify(D)});if(!U.ok){const B=await jt(U);throw new Error(B.error||`Failed to update order: ${U.status} ${U.statusText}`)}await jt(U),p("Order updated successfully"),yt(!1),Re(null),He({status:"",deliveryDate:"",adminNotes:""}),ol()}catch(D){console.error("Error updating order:",D),f(D instanceof Error?D.message:"Failed to update order")}},Oc=async c=>{if(window.confirm("Are you sure you want to reject this order?"))try{const b=await fetch(`${Te}/admin/orders/${c}`,{method:"PUT",headers:{...Tt(),"Content-Type":"application/json"},body:JSON.stringify({status:"rejected"})});if(!b.ok){const N=await jt(b);throw new Error(N.error||`Failed to reject order: ${b.status} ${b.statusText}`)}await jt(b),p("Order rejected successfully"),ol()}catch(b){console.error("Error rejecting order:",b),f(b instanceof Error?b.message:"Failed to reject order")}},Jl=(c,b="image/png")=>!c||c.trim()===""?null:c.startsWith("data:")?c:c.startsWith("/9j/")||c.startsWith("iVBORw0KGgo")?`data:${b};base64,${c}`:c,Fr=async c=>{c.preventDefault(),c.stopPropagation(),m(!0),f(null),p(null),V({});try{let b=null,N=null;const S={};(!R.name||!R.name.trim())&&(S.name="Product name is required",b||(b="name",N="product-name")),R.category||(S.category="Please select a category",b||(b="category",N="product-category"));const D=Be.find(ct=>ct._id===R.category);!D&&R.category&&(S.category="Selected category not found. Please select a valid category.",b||(b="category",N="product-category"));const U=D==null?void 0:D.type,B=R.category;if((!R.gstPercentage||!R.gstPercentage.toString().trim())&&(S.gstPercentage="GST % is required for invoice calculation",b||(b="gstPercentage",N="product-gstPercentage")),(!R.instructions||!R.instructions.trim())&&(S.instructions="Instructions are required",b||(b="instructions",N="product-instructions")),Object.keys(S).length>0){V(S),f("Please fix the errors below"),m(!1);const ct=Object.values(S).filter(Jt=>!!Jt);It.error(e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Please fix the following errors:"}),e.jsx("ul",{className:"list-disc list-inside mt-1 text-sm",children:ct.map((Jt,sa)=>e.jsx("li",{children:Jt},sa))})]}),{duration:5e3,position:"bottom-right"}),b&&N&&Pa(b,N);return}let q;if(R.subcategory&&R.subcategory.trim()!==""){const ct=kt.find(Jt=>Jt._id===R.subcategory);if(ct){if((ct.category?typeof ct.category=="object"?ct.category._id:ct.category:null)!==B){f("Selected subcategory does not belong to the selected category. Please select a valid subcategory."),m(!1);return}q=ct._id}else{const Jt=[];Object.values(gs).forEach(vt=>{Array.isArray(vt)&&Jt.push(...vt)});const sa=Jt.find(vt=>vt._id===R.subcategory);if(!sa){f("Selected subcategory not found. Please select a valid subcategory."),m(!1);return}if((sa.category?typeof sa.category=="object"?sa.category._id:sa.category:null)!==B){f("Selected subcategory does not belong to the selected category. Please select a valid subcategory."),m(!1);return}q=sa._id}}const Z=new FormData;Z.append("name",R.name),Z.append("description",R.description||""),R.image&&Z.append("image",R.image),Z.append("category",B),j?Z.append("subcategory",q&&q.trim()!==""&&q!=="null"?q:""):q&&q.trim()!==""&&q!=="null"&&Z.append("subcategory",q);const te=R.description.split(`
`).map(ct=>ct.trim()).filter(ct=>ct.length>0);te.length>0&&Z.append("descriptionArray",JSON.stringify(te));const Oe={printingOption:[],orderQuantity:R.filters.orderQuantity,deliverySpeed:O.map(ct=>typeof ct=="string"?ct:ct.name).filter(ct=>ct.trim()),textureType:de.map(ct=>typeof ct=="string"?ct:ct.name).filter(ct=>ct.trim()),filterPricesEnabled:H};H?(Oe.printingOptionPrices=[],Oe.deliverySpeedPrices=O.filter(ct=>typeof ct=="object"&&ct.name&&ct.name.trim()).map(ct=>({name:ct.name.trim(),priceAdd:typeof ct.priceAdd=="number"?ct.priceAdd:ct.priceAdd&&parseFloat(ct.priceAdd)||0})),Oe.textureTypePrices=de.filter(ct=>typeof ct=="object"&&ct.name&&ct.name.trim()).map(ct=>({name:ct.name.trim(),priceAdd:typeof ct.priceAdd=="number"?ct.priceAdd:ct.priceAdd&&parseFloat(ct.priceAdd)||0}))):(Oe.printingOptionPrices=[],Oe.deliverySpeedPrices=[],Oe.textureTypePrices=[]),console.log("Filters being sent:",JSON.stringify(Oe,null,2)),Z.append("filters",JSON.stringify(Oe));const We=_.length>0?JSON.stringify(_):R.options;We&&Z.append("options",We);const Nt=Ce&&Ce.length>0?Ce.filter(ct=>ct&&ct.attributeTypeId).map(ct=>({attributeType:ct.attributeTypeId,isEnabled:ct.isEnabled!==void 0?ct.isEnabled:!0,isRequired:ct.isRequired!==void 0?ct.isRequired:!1,displayOrder:ct.displayOrder!==void 0?ct.displayOrder:0,customValues:[]})):[];if(Z.append("dynamicAttributes",JSON.stringify(Nt)),R.variants&&R.variants.length>0&&Z.append("variants",JSON.stringify(R.variants)),R.quantityDiscounts&&R.quantityDiscounts.length>0){const ct=R.quantityDiscounts.filter(Jt=>Jt.minQuantity>0&&Jt.discountPercentage>0).map(Jt=>({minQuantity:Jt.minQuantity,maxQuantity:Jt.maxQuantity,discountPercentage:Jt.discountPercentage,priceMultiplier:(100-Jt.discountPercentage)/100}));ct.length>0&&Z.append("quantityDiscounts",JSON.stringify(ct))}R.maxFileSizeMB&&Z.append("maxFileSizeMB",R.maxFileSizeMB),R.minFileWidth&&Z.append("minFileWidth",R.minFileWidth),R.maxFileWidth&&Z.append("maxFileWidth",R.maxFileWidth),R.minFileHeight&&Z.append("minFileHeight",R.minFileHeight),R.maxFileHeight&&Z.append("maxFileHeight",R.maxFileHeight),Z.append("blockCDRandJPG",R.blockCDRandJPG?"true":"false"),R.additionalDesignCharge&&Z.append("additionalDesignCharge",R.additionalDesignCharge),R.gstPercentage&&Z.append("gstPercentage",R.gstPercentage),Z.append("showPriceIncludingGst",R.showPriceIncludingGst?"true":"false"),R.instructions&&Z.append("instructions",R.instructions),R.productionSequence&&R.productionSequence.length>0&&Z.append("productionSequence",JSON.stringify(R.productionSequence));const Ht=j?`${Te}/products/${j}`:`${Te}/products`,Ct=await fetch(Ht,{method:j?"PUT":"POST",headers:{...Tt()},body:Z});if(!Ct.ok){const ct=Ct.clone();let Jt="Failed to save product";const sa={};try{const Vr=await ct.json();Jt=Vr.error||Vr.message||Jt,Jt.toLowerCase().includes("name")?sa.name=Jt:Jt.toLowerCase().includes("price")||Jt.toLowerCase().includes("baseprice")?sa.basePrice=Jt:Jt.toLowerCase().includes("category")?sa.category=Jt:Jt.toLowerCase().includes("gst")?sa.gstPercentage=Jt:Jt.toLowerCase().includes("instruction")&&(sa.instructions=Jt)}catch{Jt=Ct.statusText||Jt}if(Object.keys(sa).length>0){k(sa);const Vr=Object.keys(sa)[0];Pa(Vr,`product-${Vr}`)}It.error(Jt,{duration:5e3,position:"bottom-right"}),f(Jt),m(!1);return}const wt=await jt(Ct),Yt=B;It.success(`Product ${j?"updated":"created"} successfully!`,{duration:3e3,position:"bottom-right"}),p(`Product ${j?"updated":"created"} successfully!`),Fn(""),ar([]),la([]),tn({}),Y({name:"",description:"",descriptionArray:[],category:"",subcategory:"",image:null,options:"",filters:{printingOption:[],orderQuantity:{min:1e3,max:72e3,multiples:1e3,quantityType:"SIMPLE",stepWiseQuantities:[],rangeWiseQuantities:[]},deliverySpeed:[],textureType:[]},quantityDiscounts:[],maxFileSizeMB:"",minFileWidth:"",maxFileWidth:"",minFileHeight:"",variants:[],maxFileHeight:"",blockCDRandJPG:!1,additionalDesignCharge:"",gstPercentage:"",showPriceIncludingGst:!1,instructions:"",productionSequence:[]}),X([]),re(!1),ge([]),I([]),we([]),Ge([]),lr([]),v(null),k({}),Yt?_r(Yt):_r(),D&&ll(typeof D=="string"?D:D._id),Cs&&Oi(Cs)}catch(b){f(b instanceof Error?b.message:`Failed to ${j?"update":"create"} product`)}finally{m(!1)}},xi=async c=>{var b,N,S,D,U,B,q,Z,te,Oe,We,Nt,Ht,Et,Ct,wt,Yt,ct,Jt,sa,Vr,vt,Is,Os,Br,hr,Za;try{m(!0);const Sn=await fetch(`${Te}/products/${c}`,{method:"GET",headers:Tt()});if(!Sn.ok)throw new Error(`Failed to fetch product: ${Sn.status} ${Sn.statusText}`);const dt=await jt(Sn);console.log("=== SINGLE PRODUCT FETCHED (AdminDashboard - Edit) ==="),console.log("Product ID:",c),console.log("Full product data:",JSON.stringify(dt,null,2));const mu=dt.descriptionArray&&Array.isArray(dt.descriptionArray)?dt.descriptionArray.join(`
`):dt.description||"";let Sr="",nn="";if(dt.subcategory){const ts=typeof dt.subcategory=="object"&&dt.subcategory!==null?dt.subcategory:null;if(ts&&ts.category){const js=typeof ts.category=="object"&&ts.category!==null?ts.category:null;Sr=js?js._id:ts.category||"",nn=js?js.type:""}}if(!Sr){const ts=typeof dt.category=="object"&&dt.category!==null?dt.category:null;Sr=ts?ts._id:dt.category||"",nn=ts?ts.type:""}if(Fn(nn),nn){const ts=Be.filter(js=>js.type===nn&&!js.parent);ar(ts)}else ar([]);Y({name:dt.name||"",description:mu,descriptionArray:dt.descriptionArray||[],category:Sr||"",subcategory:dt.subcategory&&typeof dt.subcategory=="object"&&dt.subcategory._id?dt.subcategory._id:dt.subcategory&&dt.subcategory!==null&&dt.subcategory!=="null"&&dt.subcategory!==""?String(dt.subcategory):"",image:null,options:"",filters:{...dt.filters||{},printingOption:((b=dt.filters)==null?void 0:b.printingOption)||[],orderQuantity:{min:((S=(N=dt.filters)==null?void 0:N.orderQuantity)==null?void 0:S.min)||1e3,max:((U=(D=dt.filters)==null?void 0:D.orderQuantity)==null?void 0:U.max)||72e3,multiples:((q=(B=dt.filters)==null?void 0:B.orderQuantity)==null?void 0:q.multiples)||1e3,quantityType:((te=(Z=dt.filters)==null?void 0:Z.orderQuantity)==null?void 0:te.quantityType)||"SIMPLE",stepWiseQuantities:((We=(Oe=dt.filters)==null?void 0:Oe.orderQuantity)==null?void 0:We.stepWiseQuantities)||[],rangeWiseQuantities:((Ht=(Nt=dt.filters)==null?void 0:Nt.orderQuantity)==null?void 0:Ht.rangeWiseQuantities)||[]},deliverySpeed:((Et=dt.filters)==null?void 0:Et.deliverySpeed)||[],textureType:((Ct=dt.filters)==null?void 0:Ct.textureType)||[]},quantityDiscounts:dt.quantityDiscounts&&Array.isArray(dt.quantityDiscounts)?dt.quantityDiscounts.map(ts=>({minQuantity:ts.minQuantity||0,maxQuantity:ts.maxQuantity||null,discountPercentage:ts.discountPercentage||0})):[],maxFileSizeMB:((wt=dt.maxFileSizeMB)==null?void 0:wt.toString())||"",minFileWidth:((Yt=dt.minFileWidth)==null?void 0:Yt.toString())||"",maxFileWidth:((ct=dt.maxFileWidth)==null?void 0:ct.toString())||"",minFileHeight:((Jt=dt.minFileHeight)==null?void 0:Jt.toString())||"",maxFileHeight:((sa=dt.maxFileHeight)==null?void 0:sa.toString())||"",blockCDRandJPG:dt.blockCDRandJPG||!1,additionalDesignCharge:((Vr=dt.additionalDesignCharge)==null?void 0:Vr.toString())||"",gstPercentage:((vt=dt.gstPercentage)==null?void 0:vt.toString())||"",showPriceIncludingGst:dt.showPriceIncludingGst||!1,instructions:dt.instructions||"",variants:dt.variants&&Array.isArray(dt.variants)?dt.variants:[],productionSequence:dt.productionSequence&&Array.isArray(dt.productionSequence)?dt.productionSequence.filter(ts=>ts!=null).map(ts=>typeof ts=="object"&&ts!==null?ts._id||"":ts||"").filter(ts=>ts):[]}),dt.options&&Array.isArray(dt.options)&&dt.options.length>0?X(dt.options):X([]),re(((Is=dt.filters)==null?void 0:Is.filterPricesEnabled)||!1),ge([]);const $i=((Os=dt.filters)==null?void 0:Os.deliverySpeed)||[],pu=((Br=dt.filters)==null?void 0:Br.deliverySpeedPrices)||[];I($i.map((ts,js)=>{if(typeof ts=="string"){const qr=pu.find(An=>An.name===ts);return{name:ts,priceAdd:qr==null?void 0:qr.priceAdd}}return ts}));const fu=((hr=dt.filters)==null?void 0:hr.textureType)||[],pl=((Za=dt.filters)==null?void 0:Za.textureTypePrices)||[];if(we(fu.map((ts,js)=>{if(typeof ts=="string"){const qr=pl.find(An=>An.name===ts);return{name:ts,priceAdd:qr==null?void 0:qr.priceAdd}}return ts})),dt.dynamicAttributes&&Array.isArray(dt.dynamicAttributes)&&dt.dynamicAttributes.length>0){const ts=dt.dynamicAttributes.filter(js=>js&&js.attributeType).map(js=>{let qr="";return typeof js.attributeType=="object"&&js.attributeType!==null?qr=js.attributeType._id||js.attributeType.id||"":typeof js.attributeType=="string"&&(qr=js.attributeType),{attributeTypeId:qr,isEnabled:js.isEnabled!==void 0?js.isEnabled:!0,isRequired:js.isRequired!==void 0?js.isRequired:!1,displayOrder:js.displayOrder!==void 0?js.displayOrder:0}}).filter(js=>js.attributeTypeId&&js.attributeTypeId.trim()!=="");console.log("Loaded attributes for editing:",ts),Ge(ts)}else console.log("No dynamic attributes found in product"),Ge([]);const eo=Sr||null,Do=dt.subcategory&&typeof dt.subcategory=="object"&&dt.subcategory._id?dt.subcategory._id:dt.subcategory&&dt.subcategory!==null&&dt.subcategory!=="null"&&dt.subcategory!==""?String(dt.subcategory):null;await cr(eo,Do);const Cn=dt.subcategory&&typeof dt.subcategory=="object"&&dt.subcategory!==null?dt.subcategory._id||"":dt.subcategory&&dt.subcategory!==null&&dt.subcategory!=="null"?String(dt.subcategory):"";Sr?(await jn(Sr),Cn&&Cn.trim()!==""&&Cn!==Sr&&Cn!=="null"?setTimeout(()=>{const ts=jo(Sr,Cn);la(ts),ts.forEach(js=>{js!==Sr&&jn(js)})},100):la([Sr])):la([]);const to=Cn||Sr;if(to)try{Ae(!0);const ts=await fetch(`${Te}/products/category/${to}`,{headers:Tt()});if(ts.ok){const js=await jt(ts);ie(js||[])}}catch(ts){console.error("Error fetching category products:",ts),ie([])}finally{Ae(!1)}v(c),nl(null),il(!1),l("products"),f(null)}catch(Sn){f(Sn instanceof Error?Sn.message:"Failed to load product")}finally{m(!1)}},dl=async c=>{try{m(!0);let b=null,N=!1;try{const U=await fetch(`${Te}/categories/${c}`,{method:"GET",headers:Tt()});if(U.ok&&(b=await jt(U),b&&b.parent))try{const B=await fetch(`${Te}/subcategories/${c}`,{method:"GET",headers:Tt()});B.ok&&(b=await jt(B),N=!0)}catch{}}catch{try{const B=await fetch(`${Te}/subcategories/${c}`,{method:"GET",headers:Tt()});if(B.ok)b=await jt(B),N=!0;else throw new Error(`Failed to fetch category: ${B.status} ${B.statusText}`)}catch{throw new Error("Failed to fetch category or subcategory")}}if(!b)throw new Error("Category not found");const S=b.slug||(b.name?b.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),D=N?b.category&&typeof b.category=="object"&&b.category!==null?b.category._id:b.category||"":b.parent&&typeof b.parent=="object"&&b.parent!==null?b.parent._id:b.parent||"";se({name:b.name||"",description:b.description||"",type:N?b.category&&typeof b.category=="object"&&b.category!==null?b.category.type:"Digital":b.type||"Digital",parent:D,sortOrder:b.sortOrder||0,slug:S,image:null}),Qe(!!b.slug),T(c),L(b.image||null),l("categories"),f(null),yn(c)}catch(b){f(b instanceof Error?b.message:"Failed to load category")}finally{m(!1)}},zi=()=>{v(null),T(null),L(null),wa(null),Fn(""),ar([]),$n([]),Y({name:"",description:"",descriptionArray:[],category:"",subcategory:"",image:null,options:"",filters:{printingOption:[],orderQuantity:{min:1e3,max:72e3,multiples:1e3,quantityType:"SIMPLE",stepWiseQuantities:[],rangeWiseQuantities:[]},deliverySpeed:[],textureType:[]},maxFileSizeMB:"",blockCDRandJPG:!1,additionalDesignCharge:"",gstPercentage:"",instructions:"",quantityDiscounts:[],minFileWidth:"",maxFileWidth:"",minFileHeight:"",maxFileHeight:"",productionSequence:[],showPriceIncludingGst:!1,variants:[]}),X([]),ge([]),I([]),we([]),lr([]),se({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),Qe(!1),Ot({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),ot(!1),gt(null)},Kl=async c=>{if(window.confirm("Are you sure you want to delete this product?")){m(!0),f(null),p(null);try{const b=await fetch(`${Te}/products/${c}`,{method:"DELETE",headers:Tt()});if(!b.ok){const N=await jt(b);throw new Error(N.error||`Failed to delete product: ${b.status} ${b.statusText}`)}await jt(b),p("Product deleted successfully!"),_r()}catch(b){f(b instanceof Error?b.message:"Failed to delete product")}finally{m(!1)}}},Ur=async c=>{c.preventDefault(),m(!0),f(null),p(null);try{G({});let b=!1;const N={};if((!ue.name||ue.name.trim()==="")&&(N.name="Category name is required",b=!0),b){G(N),f("Please fix the errors below"),m(!1),Object.keys(N)[0]==="name"&&Pa("name","category-name");return}if(ue.parent){if(!ue.parent){f("Parent category is required for subcategory."),m(!1);return}if(!E&&!ue.image&&(N.image="Subcategory image is required. Please upload an image",b=!0),ue.parent&&kt.find(We=>{const Ht=(typeof We.category=="object"&&We.category!==null?We.category._id:We.category)===ue.parent,Et=(We.sortOrder||0)===ue.sortOrder,Ct=We._id!==E;return Ht&&Et&&Ct})){const We=Be.find(Ht=>Ht._id===ue.parent),Nt=We?We.name:"this category";N.sortOrder=`Sort order ${ue.sortOrder} is already used by another subcategory in ${Nt}. Please use a different sort order.`,b=!0}if(b){G(N),f("Please fix the errors below"),m(!1);const Oe=Object.keys(N)[0];if(Oe==="image")Pa("image","category-image");else if(Oe==="sortOrder"){const We=document.querySelector('input[type="number"]');We&&We.scrollIntoView({behavior:"smooth",block:"center"})}return}if(ue.image){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(ue.image.type)){f("Invalid image format. Please upload JPG, PNG, or WebP image."),m(!1);return}const We=5*1024*1024;if(ue.image.size>We){f("Image size must be less than 5MB. Please compress the image and try again."),m(!1);return}}const S=new FormData;S.append("name",ue.name.trim()),S.append("description",ue.description||""),S.append("category",ue.parent),S.append("sortOrder",ue.sortOrder.toString());const D=ue.slug||(ue.name?ue.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),U=D?Pi(D,E,null):"";U&&S.append("slug",U.trim()),ue.image&&S.append("image",ue.image);const B=E?`${Te}/subcategories/${E}`:`${Te}/subcategories`,Z=await fetch(B,{method:E?"PUT":"POST",headers:{...Tt()},body:S}),te=await jt(Z);p(`Subcategory ${E?"updated":"created"} successfully!`),se({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),Qe(!1),T(null),L(null),ja(),ui(),yn()}else{if(ue.type||(N.type="Category type is required",b=!0),!E&&!ue.image&&(N.image="Category image is required. Please upload an image",b=!0),ue.type){const Oe=Be.find(We=>{const Nt=!We.parent||typeof We.parent=="object"&&We.parent!==null&&!We.parent._id,Ht=We.type===ue.type,Et=(We.sortOrder||0)===ue.sortOrder,Ct=We._id!==E;return Nt&&Ht&&Et&&Ct});Oe&&(N.sortOrder=`Sort order ${ue.sortOrder} is already used by another ${ue.type} category (${Oe.name}). Please use a different sort order.`,b=!0)}if(b){G(N),f("Please fix the errors below"),m(!1);const Oe=Object.keys(N)[0];if(Oe==="type")Pa("type","category-type");else if(Oe==="image")Pa("image","category-image");else if(Oe==="sortOrder"){const We=document.querySelector('input[type="number"][value="'+ue.sortOrder+'"]');We&&We.scrollIntoView({behavior:"smooth",block:"center"})}return}if(ue.image){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(ue.image.type)){f("Invalid image format. Please upload JPG, PNG, or WebP image."),m(!1);return}const We=5*1024*1024;if(ue.image.size>We){f("Image size must be less than 5MB. Please compress the image and try again."),m(!1);return}}const S=new FormData;S.append("name",ue.name.trim()),S.append("description",ue.description||""),S.append("type",ue.type),S.append("parent",""),S.append("sortOrder",ue.sortOrder.toString());const D=ue.slug||(ue.name?ue.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),U=D?Pi(D,E,null):"";U&&S.append("slug",U.trim()),ue.image&&S.append("image",ue.image);const B=E?`${Te}/categories/${E}`:`${Te}/categories`,Z=await fetch(B,{method:E?"PUT":"POST",headers:{...Tt()},body:S}),te=await jt(Z);p(`Category ${E?"updated":"created"} successfully!`),se({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),Qe(!1),T(null),L(null),ja(),yn()}}catch(b){f(b instanceof Error?b.message:`Failed to ${E?"update":"create"} ${ue.parent?"subcategory":"category"}`)}finally{m(!1)}},Ir=async c=>{c.preventDefault(),m(!0),f(null),p(null);try{qe({});let b=!1;const N={};if((!ze.name||ze.name.trim()==="")&&(N.name="Subcategory name is required",b=!0),(!ze.category||ze.category==="pending")&&(N.category="Parent category is required",b=!0),!Ns&&!ze.image&&(N.image="Subcategory image is required. Please upload an image",b=!0),ze.category&&ze.category!=="pending"&&kt.find(Oe=>{const Nt=(typeof Oe.category=="object"&&Oe.category!==null?Oe.category._id:Oe.category)===ze.category,Ht=(Oe.sortOrder||0)===ze.sortOrder,Et=Oe._id!==Ns;return Nt&&Ht&&Et})){const Oe=Be.find(Nt=>Nt._id===ze.category),We=Oe?Oe.name:"this category";N.sortOrder=`Sort order ${ze.sortOrder} is already used by another subcategory in ${We}. Please use a different sort order.`,b=!0}if(b){qe(N),f("Please fix the errors below"),m(!1);const te=Object.keys(N)[0];if(te==="name")Pa("name","subcategory-name");else if(te==="category")Pa("category","subcategory-category");else if(te==="image")Pa("image","subcategory-image");else if(te==="sortOrder"){const Oe=document.querySelector('input[type="number"]');Oe&&Oe.scrollIntoView({behavior:"smooth",block:"center"})}return}if(ze.image){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(ze.image.type)){f("Invalid image format. Please upload JPG, PNG, or WebP image."),m(!1);return}const Oe=5*1024*1024;if(ze.image.size>Oe){f("Image size must be less than 5MB. Please compress the image and try again."),m(!1);return}}const S=new FormData;S.append("name",ze.name.trim()),S.append("description",ze.description||""),S.append("category",ze.category),ze.parent&&ze.parent!==""&&S.append("parent",ze.parent),S.append("sortOrder",ze.sortOrder.toString());const D=ze.slug||(ze.name?ze.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),U=D?Pi(D,null,Ns):"";U&&S.append("slug",U.trim()),ze.image&&S.append("image",ze.image);const B=Ns?`${Te}/subcategories/${Ns}`:`${Te}/subcategories`,Z=await fetch(B,{method:Ns?"PUT":"POST",headers:{...Tt()},body:S});if(!Z.ok){const te=await jt(Z);throw new Error(te.error||`Failed to ${Ns?"update":"create"} subcategory: ${Z.status} ${Z.statusText}`)}await jt(Z),p(`Subcategory ${Ns?"updated":"created"} successfully!`),Qs&&await ll(Qs),Ot({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),ot(!1),wa(null),gt(null),ui()}catch(b){f(b instanceof Error?b.message:`Failed to ${Ns?"update":"create"} subcategory`)}finally{m(!1)}},Gn=async c=>{try{m(!0);const b=await fetch(`${Te}/subcategories/${c}`,{method:"GET",headers:Tt()});if(!b.ok)throw new Error(`Failed to fetch subcategory: ${b.status} ${b.statusText}`);const N=await jt(b),S=typeof N.category=="object"&&N.category!==null?N.category:Be.find(Z=>Z._id===N.category),D=(S==null?void 0:S.type)||"",U=N.slug||(N.name?N.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),B=typeof N.category=="object"&&N.category!==null?N.category._id:N.category||"",q=typeof N.parent=="object"&&N.parent!==null?N.parent._id:N.parent||"";if(Ot({name:N.name||"",description:N.description||"",category:B,parent:q,type:D,slug:U,sortOrder:N.sortOrder||0,image:null}),ot(!!N.slug),Gs(!!q),B){Ps(!0);try{const Z=await fetch(`${Te}/subcategories/category/${B}?includeChildren=true`);if(Z.ok){const te=await Z.json(),Oe=(Nt,Ht=0)=>{let Et=[];return Nt.forEach(Ct=>{Ct._id!==c&&(Et.push({...Ct,_displayLevel:Ht}),Ct.children&&Ct.children.length>0&&(Et=Et.concat(Oe(Ct.children,Ht+1))))}),Et},We=Oe(Array.isArray(te)?te:(te==null?void 0:te.data)||[]);Dt(We||[])}else Dt([])}catch(Z){console.error("Error fetching parent subcategories:",Z),Dt([])}finally{Ps(!1)}}else Dt([]);wa(c),gt(N.image||null),l("categories"),f(null)}catch(b){f(b instanceof Error?b.message:"Failed to load subcategory")}finally{m(!1)}},rn=async c=>{const b=kt.find(N=>N._id===c);if(b)try{const N=await fetch(`${Te}/products/subcategory/${c}`,{headers:Tt()});let S=0;if(N.ok){const D=await jt(N);S=Array.isArray(D)?D.length:0}pt({isOpen:!0,type:"subcategory",id:c,name:b.name,productCount:S,subcategoryCount:0,deleteText:""})}catch(N){console.error("Error checking products:",N),pt({isOpen:!0,type:"subcategory",id:c,name:b.name,productCount:0,subcategoryCount:0,deleteText:""})}},vn=async()=>{if(lt.deleteText.toLowerCase()!=="delete"){f('Please type "delete" to confirm');return}m(!0),f(null),p(null),pt({...lt,isOpen:!1});try{const c=await fetch(`${Te}/subcategories/${lt.id}`,{method:"DELETE",headers:Tt()});if(!c.ok){const N=(await jt(c)).error||`Failed to delete subcategory: ${c.status} ${c.statusText}`;f(N),m(!1);return}await jt(c),p("Subcategory deleted successfully!"),ui(),Qs&&ll(Qs),Cs===lt.id&&(Ma(null),ie([]))}catch(c){f(c instanceof Error?c.message:"Failed to delete subcategory")}finally{m(!1)}},Qn=async c=>{const b=Be.find(N=>N._id===c);if(b)try{const N=await fetch(`${Te}/subcategories/category/${c}`,{headers:Tt()});let S=0,D=[];if(N.ok){const q=await jt(N);D=Array.isArray(q)?q:(q==null?void 0:q.data)||[],S=D.length}else try{const q=await fetch(`${Te}/categories/parent/${c}`,{headers:Tt()});if(q.ok){const Z=await jt(q);D=Array.isArray(Z)?Z:(Z==null?void 0:Z.data)||[],S=D.length}}catch{}if(S>0){f(`Cannot delete category "${b.name}". It has ${S} child categor${S===1?"y":"ies"}. Please delete or reassign all child categories first.`);return}const U=await fetch(`${Te}/products/category/${c}`,{headers:Tt()});let B=0;if(U.ok){const q=await jt(U);B=Array.isArray(q)?q.length:0}pt({isOpen:!0,type:"category",id:c,name:b.name,productCount:B,subcategoryCount:S,deleteText:""})}catch(N){console.error("Error checking category dependencies:",N),f("Failed to check category dependencies. Please try again.")}},du=async()=>{if(lt.deleteText.toLowerCase()!=="delete"){f('Please type "delete" to confirm');return}m(!0),f(null),p(null),pt({...lt,isOpen:!1});try{const c=await fetch(`${Te}/categories/${lt.id}`,{method:"DELETE",headers:Tt()});if(!c.ok){const N=(await jt(c)).error||`Failed to delete category: ${c.status} ${c.statusText}`;f(N),m(!1);return}await jt(c),p("Category deleted successfully!"),ja(),Qs===lt.id&&(Xt(null),ys([]))}catch(c){f(c instanceof Error?c.message:"Failed to delete category")}finally{m(!1)}},Rc=async c=>{c.preventDefault(),m(!0),f(null),p(null);try{const b=await fetch(`${Te}/admin/update-user-role`,{method:"PUT",headers:{"Content-Type":"application/json",...Tt()},body:JSON.stringify({username:Qt.username,role:Qt.role})});if(!b.ok){const N=await jt(b);throw new Error(N.message||N.error||`Failed to update user role: ${b.status} ${b.statusText}`)}await jt(b),p(`User role updated to ${Qt.role} successfully!`),Vs({username:"",role:"user"}),pi()}catch(b){f(b instanceof Error?b.message:"Failed to update user role")}finally{m(!1)}},Mc=async c=>{c.preventDefault(),m(!0),f(null),p(null);try{const b=await fetch(`${Te}/admin/create-employee`,{method:"POST",headers:{"Content-Type":"application/json",...Tt()},body:JSON.stringify({name:rs.name,email:rs.email,password:rs.password})});if(!b.ok){const N=await jt(b);throw new Error(N.message||N.error||`Failed to create employee: ${b.status} ${b.statusText}`)}await jt(b),p("Employee created successfully!"),Bs({name:"",email:"",password:""}),pi()}catch(b){f(b instanceof Error?b.message:"Failed to create employee")}finally{m(!1)}},uu=async c=>{c.preventDefault(),m(!0),f(null),p(null);try{const b=await fetch(`${Te}/admin/create-employee`,{method:"POST",headers:{"Content-Type":"application/json",...Tt()},body:JSON.stringify({name:Gt.name,email:Gt.email,password:Gt.password})});if(!b.ok){const N=await jt(b);throw new Error(N.message||N.error||`Failed to create employee: ${b.status} ${b.statusText}`)}await jt(b),p("Employee created successfully!"),Rt({name:"",email:"",password:""}),et(!1),vo(),pi()}catch(b){f(b instanceof Error?b.message:"Failed to create employee")}finally{m(!1)}},Ya=async c=>{var b,N;c.preventDefault(),m(!0),f(null),p(null);try{if(!Wt.name.trim()){f("Department name is required"),m(!1);return}const S=await fetch(`${Te}/departments`,{method:"POST",headers:{"Content-Type":"application/json",...Tt()},body:JSON.stringify({name:Wt.name,description:Wt.description||"",isEnabled:Wt.isEnabled,operators:Wt.operators})});if(!S.ok){const B=await jt(S);throw new Error(B.error||B.message||`Failed to create department: ${S.status} ${S.statusText}`)}const D=await jt(S),U=((b=D.data)==null?void 0:b._id)||((N=D.data)==null?void 0:N.id)||D._id||D.id;p("Department created successfully!"),zs({name:"",description:"",isEnabled:!0,operators:[]}),Us(!1),await Lr(),await vo(),U&&Bt.selectedDepartments&&or({...Bt,selectedDepartments:[...Bt.selectedDepartments,U]})}catch(S){f(S instanceof Error?S.message:"Failed to create department")}finally{m(!1)}},ua=async c=>{if(window.confirm("Are you sure you want to delete this uploaded image?")){m(!0),f(null),p(null);try{const b=await fetch(`${Te}/admin/uploads/${c}`,{method:"DELETE",headers:Tt()});if(!b.ok){const N=await jt(b);throw new Error(N.error||`Failed to delete upload: ${b.status} ${b.statusText}`)}await jt(b),p("Uploaded image deleted successfully!"),Hn()}catch(b){f(b instanceof Error?b.message:"Failed to delete upload")}finally{m(!1)}}},Es=(c,b)=>{try{const N=atob(c.split(",")[1]),S=new Array(N.length);for(let Z=0;Z<N.length;Z++)S[Z]=N.charCodeAt(Z);const D=new Uint8Array(S),U=new Blob([D],{type:"image/jpeg"}),B=URL.createObjectURL(U),q=document.createElement("a");q.href=B,q.download=b||"image.jpg",document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(B)}catch{f("Failed to download image")}},gi=()=>{_.length,X([..._,{name:"",priceAdd:"",description:"",image:""}])},Wa=(c,b,N)=>{const S=[..._];S[c]={...S[c],[b]:N},X(S)},Eo=c=>{X(_.filter((b,N)=>N!==c))},Yn=c=>{const b={name:"",priceAdd:H?0:void 0};c==="printingOption"?ge([...je,b]):c==="deliverySpeed"?I([...O,b]):c==="textureType"&&we([...de,b])},Xl=(c,b,N,S)=>{if(c==="printingOption"){const D=[...je];D[b]={...D[b],[N]:N==="priceAdd"?S===""?void 0:parseFloat(S)||0:S},ge(D)}else if(c==="deliverySpeed"){const D=[...O];D[b]={...D[b],[N]:N==="priceAdd"?S===""?void 0:parseFloat(S)||0:S},I(D)}else if(c==="textureType"){const D=[...de];D[b]={...D[b],[N]:N==="priceAdd"?S===""?void 0:parseFloat(S)||0:S},we(D)}},_c=(c,b)=>{c==="printingOption"?ge(je.filter((N,S)=>S!==b)):c==="deliverySpeed"?I(O.filter((N,S)=>S!==b)):c==="textureType"&&we(de.filter((N,S)=>S!==b))},ul=()=>{try{if(R.options){const c=JSON.parse(R.options);Array.isArray(c)?(X(c),C(!0)):f("Options must be an array")}}catch{f("Invalid JSON format")}},Li=[{id:"products",label:"Add Product",icon:Na},{id:"manage-products",label:"Manage Products",icon:Na},{id:"attribute-types",label:"Attribute Types",icon:Er},{id:"attribute-rules",label:"Attribute Rules",icon:Er},{id:"departments",label:"Departments",icon:Rn},{id:"sequences",label:"Sequences",icon:Er},{id:"categories",label:"Add Category",icon:Rf},{id:"manage-categories",label:"Manage Categories",icon:Rf},{id:"pricing-books",label:"Price Books",icon:Ko},{id:"pricing-modifiers",label:"Pricing Modifiers",icon:Ko},{id:"geo-zones",label:"Geo Zones",icon:ti},{id:"user-segments",label:"User Segments",icon:Rl},{id:"product-availability",label:"Product Availability",icon:Na},{id:"pricing-logs",label:"Audit Logs",icon:Kr},{id:"virtual-pricing",label:" Virtual Pricing (Smart View)",icon:Ko},{id:"orders",label:"Orders",icon:Kb},{id:"uploads",label:"Uploaded Images",icon:vi},{id:"users",label:"Manage Users",icon:Rl},{id:"print-partner-requests",label:"Print Partners",icon:kd},{id:"corporate-requests",label:"Corporate Requests",icon:Rn}];return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Or,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900 mb-4"})}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl font-bold text-cream-900 mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600",children:"Manage products, categories, uploads, and admin users"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-cream-200 p-3 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2 overflow-x-auto scrollbar-hide",children:Li.map(c=>{const b=c.icon;return e.jsxs("button",{onClick:()=>{l(c.id),f(null),p(null),c.id!=="products"&&c.id!=="categories"&&zi(),c.id==="manage-products"?(ra(""),_r()):c.id==="manage-categories"?(ja(),ui()):c.id==="users"?pi():c.id==="print-partner-requests"||(c.id==="orders"?ol():c.id==="attribute-types"?cr():c.id==="attribute-rules"?(No(),cr(),ja(),_r()):c.id==="products"&&(cr(),_r()))},className:`flex items-center gap-2.5 px-5 py-3 text-sm sm:text-base font-semibold transition-all duration-200 whitespace-nowrap rounded-lg border-2 ${i===c.id?"bg-cream-900 text-white border-cream-900 shadow-lg transform scale-105":"text-cream-700 bg-white border-cream-200 hover:bg-cream-50 hover:border-cream-300 hover:text-cream-900 hover:shadow-sm"}`,children:[e.jsx(b,{size:18,className:`sm:w-5 sm:h-5 ${i===c.id?"text-white":"text-cream-600"}`}),e.jsx("span",{className:"hidden sm:inline",children:c.label}),e.jsx("span",{className:"sm:hidden",children:c.label.split(" ")[0]})]},c.id)})})}),e.jsxs(ha,{children:[u&&e.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(Ts,{size:20}),u]}),g&&e.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-700",children:[e.jsx(ya,{size:20}),g]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i==="products"&&e.jsxs("form",{onSubmit:c=>{c.preventDefault(),Fr(c)},onClick:c=>{const b=c.target;(b.closest(".ckeditor-container")||b.closest("[data-ckeditor-button]"))&&(c.preventDefault(),c.stopPropagation())},className:"space-y-6",children:[j&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Product: ",R.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:zi,className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Required Fields"}),e.jsx("span",{className:"text-sm text-blue-700",children:(()=>{var N,S;const c=[{value:(N=R.name)==null?void 0:N.trim(),label:"Product Name"},{value:R.category||R.subcategory,label:"Category/Subcategory"},{value:R.gstPercentage,label:"GST %"},{value:(S=R.instructions)==null?void 0:S.trim(),label:"Instructions"}];return`${c.filter(D=>D.value).length}/${c.length} completed`})()})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(()=>{var b,N;const c=[(b=R.name)==null?void 0:b.trim(),R.category||R.subcategory,R.gstPercentage,(N=R.instructions)==null?void 0:N.trim()];return c.filter(Boolean).length/c.length*100})()}%`}})})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-6 bg-white",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(Na,{size:20}),"Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-cream-900 mb-2 flex items-center gap-2",children:["Product Name *",e.jsxs("div",{className:"group relative",children:[e.jsx(gr,{size:14,className:"text-cream-500 cursor-help"}),e.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-cream-900 text-white text-xs rounded-lg shadow-lg",children:"Enter a clear, descriptive name that customers will see. This should be unique and searchable."})]})]}),e.jsx("input",{id:"product-name",name:"name",type:"text",required:!0,value:R.name,onChange:c=>{Y({...R,name:c.target.value}),M.name&&V({...M,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${M.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Glossy Business Cards - Premium",maxLength:100}),M.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),M.name]}),R.name&&R.name.length>80&&e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:[100-R.name.length," characters remaining"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-cream-900 mb-2 flex items-center gap-2",children:["Description",e.jsxs("div",{className:"group relative",children:[e.jsx(gr,{size:14,className:"text-cream-500 cursor-help"}),e.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-cream-900 text-white text-xs rounded-lg shadow-lg",children:"Detailed product description that customers will see. Use formatting to make it readable and professional. You can insert images using the toolbar buttons."})]})]}),e.jsx(jk,{value:R.description,onChange:c=>Y({...R,description:c}),placeholder:"Enter product description. Use the toolbar to format text, insert images, and more."}),e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:" Rich Text Editor Features:"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:["Format text with ",e.jsx("strong",{children:"bold"}),", ",e.jsx("em",{children:"italic"}),", underline, strikethrough"]}),e.jsx("li",{children:"Change font family, font size, and text colors"}),e.jsx("li",{children:"Insert images using the toolbar button"}),e.jsx("li",{children:"Create ordered and bullet lists with indentation"}),e.jsx("li",{children:"Align text (left, center, right, justify)"}),e.jsx("li",{children:"All formatting is preserved when saved"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-cream-900 mb-2 flex items-center gap-2",children:["Product Image",e.jsxs("div",{className:"group relative",children:[e.jsx(gr,{size:14,className:"text-cream-500 cursor-help"}),e.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-cream-900 text-white text-xs rounded-lg shadow-lg",children:"Upload a product image that will be displayed to customers. Supported formats: JPG, PNG, WebP. Max size: 5MB."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:c=>{var N;const b=(N=c.target.files)==null?void 0:N[0];if(b){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(b.type)){f("Invalid image format. Please upload JPG, PNG, or WebP image.");return}if(b.size>5*1024*1024){f("Image size must be less than 5MB.");return}Y({...R,image:b}),f(null)}},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-cream-900 file:text-white hover:file:bg-cream-800"}),R.image&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-xs text-cream-600 mb-1",children:["Selected: ",R.image.name]}),e.jsx("div",{className:"relative w-32 h-32 border border-cream-300 rounded-lg overflow-hidden",children:e.jsx("img",{src:URL.createObjectURL(R.image),alt:"Product preview",className:"w-full h-full object-cover"})})]}),j&&!R.image&&e.jsx("p",{className:"text-xs text-cream-600",children:"Leave empty to keep existing image"})]})]})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-cream-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Product Filters"}),e.jsxs("div",{className:"text-sm text-cream-600",children:[e.jsx(gr,{size:14,className:"inline mr-1"}),"Printing options should be configured as attributes in the Product Attributes section below"]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg border border-cream-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Quantity Configuration *"}),e.jsxs("div",{className:"text-xs text-cream-600",children:[e.jsx(gr,{size:14,className:"inline mr-1"}),"Configure quantity options based on production capabilities and raw material batching"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Min Quantity"}),e.jsx("input",{type:"number",value:R.filters.orderQuantity.min,onChange:c=>Y({...R,filters:{...R.filters,orderQuantity:{...R.filters.orderQuantity,min:parseInt(c.target.value)||0}}}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Max Quantity"}),e.jsx("input",{type:"number",value:R.filters.orderQuantity.max,onChange:c=>Y({...R,filters:{...R.filters,orderQuantity:{...R.filters.orderQuantity,max:parseInt(c.target.value)||0}}}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Multiples Of"}),e.jsx("input",{type:"number",value:R.filters.orderQuantity.multiples,onChange:c=>Y({...R,filters:{...R.filters,orderQuantity:{...R.filters.orderQuantity,multiples:parseInt(c.target.value)||0}}}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Delivery Speed Options"}),e.jsxs("button",{type:"button",onClick:()=>Yn("deliverySpeed"),className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:16}),"Add Option"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:O.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No delivery speed options added. Click "Add Option" to start.'}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Delivery Speed"}),H&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Add (per 1000 units)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:O.map((c,b)=>{const N=typeof c=="string"?c:c.name,S=typeof c=="object"?c.priceAdd??0:0;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:N,onChange:D=>Xl("deliverySpeed",b,"name",D.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Standard"})}),H&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",step:"0.00001",value:S,onChange:D=>Xl("deliverySpeed",b,"priceAdd",D.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"0.00"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>_c("deliverySpeed",b),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})})]},b)})})]})})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Texture Type Options (optional)"}),e.jsxs("button",{type:"button",onClick:()=>Yn("textureType"),className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:16}),"Add Texture"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:de.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No texture types added. Click "Add Texture" to start.'}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Texture Type"}),H&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Add (per 1000 units)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:de.map((c,b)=>{const N=typeof c=="string"?c:c.name,S=typeof c=="object"?c.priceAdd??0:0;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:N,onChange:D=>Xl("textureType",b,"name",D.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Texture No.1"})}),H&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",step:"0.00001",value:S,onChange:D=>Xl("textureType",b,"priceAdd",D.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"0.00"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>_c("textureType",b),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})})]},b)})})]})})})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Quantity-Based Discounts"}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:"Set discounts based on order quantity. Customers get better prices when ordering in bulk."})]}),e.jsxs("button",{type:"button",onClick:()=>{Y({...R,quantityDiscounts:[...R.quantityDiscounts||[],{minQuantity:0,maxQuantity:null,discountPercentage:0}]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:16}),"Add Discount Tier"]})]}),!R.quantityDiscounts||R.quantityDiscounts.length===0?e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:'No discount tiers added. Click "Add Discount Tier" to set quantity-based discounts.'})}):e.jsxs("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Min Quantity"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Max Quantity"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Discount (%)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:(R.quantityDiscounts||[]).map((c,b)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",value:c.minQuantity,onChange:N=>{const S=[...R.quantityDiscounts||[]];S[b].minQuantity=parseInt(N.target.value)||0,Y({...R,quantityDiscounts:S})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., 1000",min:"0"})}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsx("input",{type:"number",value:c.maxQuantity||"",onChange:N=>{const S=[...R.quantityDiscounts||[]];S[b].maxQuantity=N.target.value?parseInt(N.target.value):null,Y({...R,quantityDiscounts:S})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Leave empty for no limit",min:"0"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"Leave empty for unlimited"})]}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:c.discountPercentage,onChange:N=>{const S=[...R.quantityDiscounts||[]];S[b].discountPercentage=parseFloat(N.target.value)||0,Y({...R,quantityDiscounts:S})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., 5",min:"0",max:"100",step:"0.1"}),e.jsx("span",{className:"text-sm text-cream-600",children:"%"})]}),c.discountPercentage>0&&e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:["Price: ",((100-c.discountPercentage)/100).toFixed(2),"x base price"]})]}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>{const N=(R.quantityDiscounts||[]).filter((S,D)=>D!==b);Y({...R,quantityDiscounts:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})})]},b))})]})}),e.jsx("div",{className:"p-3 bg-blue-50 border-t border-cream-300",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Example:"})," Min: 1000, Max: 5000, Discount: 5%  Customers ordering 1000-5000 units get 5% off. Min: 5000, Max: (empty), Discount: 10%  Customers ordering 5000+ units get 10% off."]})})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-6 bg-white",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx($l,{size:20}),"Pricing & Category"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsx("div",{className:"col-span-2",children:e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ko,{className:"w-6 h-6 text-blue-600 mt-0.5 shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1 flex items-center gap-2",children:" Dynamic Pricing Enabled"}),e.jsxs("p",{className:"text-sm text-blue-700 mb-3",children:["Prices for this product are managed through ",e.jsx("strong",{children:"Price Books"})," and ",e.jsx("strong",{children:"Modifiers"}),". After creating the product, set up different prices for different user segments (Retail, VIP, Corporate) and locations."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{l("price-books"),It.success("Navigate to Price Books after saving this product")},className:"text-sm bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Price Books "}),e.jsx("button",{type:"button",onClick:()=>{l("modifiers"),It.success("Navigate to Modifiers after saving this product")},className:"text-sm bg-white text-blue-600 border border-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:"View Modifiers"})]})]})]})})})})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-6 bg-white",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx($l,{size:20}),"Category & Subcategory"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Main Type * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Select first to filter categories)"})]}),e.jsx(Ea,{label:"Select Type",value:sr||"",onChange:async c=>{const b=c;if(Fn(b),la([]),tn({}),Y({...R,category:"",subcategory:""}),ie([]),b){const N=Be.filter(S=>S.type===b&&!S.parent);ar(N)}else ar([])},options:[{value:"",label:"Select Type"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"}),!sr&&e.jsxs("p",{className:"mt-1 text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),"Please select a type first to see available categories"]})]}),sr&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Category * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Select based on type)"})]}),e.jsx(Ea,{id:"product-category",label:"Select Category",value:String(R.category||Sa[0]||""),onChange:async c=>{c?(la([String(c)]),Y({...R,category:String(c),subcategory:""}),M.category&&V({...M,category:void 0}),await jn(String(c)),ie([])):(la([]),tn({}),Y({...R,category:"",subcategory:""}),ie([]))},options:[{value:"",label:"Select Category"},...xn.filter(c=>!c.parent).map(c=>({value:c._id,label:c.name}))],className:`w-full ${M.category?"border-red-300":""}`}),M.category&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),M.category]}),!R.category&&sr&&!M.category&&e.jsxs("p",{className:"mt-1 text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),"Please select a category to continue"]})]})]}),R.category&&Sa.length>0&&(()=>{const c=gs[String(Sa[0]||"")]||[],b=Gl[String(Sa[0]||"")]||!1,N=String(Sa[1]||"");return e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Optional - Leave empty to create product directly in category)"})]}),b&&c.length===0?e.jsxs("div",{className:"w-full py-2 border border-cream-300 rounded-lg flex items-center justify-center",children:[e.jsx(Kt,{className:"animate-spin text-cream-600",size:16}),e.jsx("span",{className:"ml-2 text-sm text-cream-600",children:"Loading..."})]}):c.length>0?e.jsx(Ea,{label:"Select Subcategory",value:String(N||R.subcategory||""),onChange:async S=>{if(S){la([String(Sa[0]),String(S)]),Y({...R,category:String(Sa[0]),subcategory:String(S)});try{Ae(!0);const D=await fetch(`${Te}/products/category/${S}`,{headers:Tt()});if(D.ok){const U=await jt(D);ie(U||[])}}catch(D){console.error("Error fetching category products:",D),ie([])}finally{Ae(!1)}}else{la([Sa[0]]),Y({...R,category:Sa[0],subcategory:""});try{Ae(!0);const D=await fetch(`${Te}/products/category/${Sa[0]}`,{headers:Tt()});if(D.ok){const U=await jt(D);ie(U||[])}}catch(D){console.error("Error fetching category products:",D),ie([])}finally{Ae(!1)}}},options:[{value:"",label:"None (Use Category Directly)"},...c.sort((S,D)=>(S.sortOrder||0)-(D.sortOrder||0)).map(S=>({value:S._id,label:S.name}))],className:"w-full"}):null]})})(),sr&&e.jsxs("div",{className:"mt-4 p-4 bg-cream-50 border border-cream-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-cream-900",children:"Existing Products in this Category"}),$e&&e.jsx(Kt,{className:"animate-spin text-cream-600",size:16})]}),$e?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"Loading..."})}):R.category?R.subcategory?bn.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"No products found in this subcategory. This will be the first product."})}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:bn.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-cream-200 rounded-lg hover:border-cream-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"font-medium text-cream-900 text-sm truncate",children:c.name})})]}),e.jsxs("button",{type:"button",onClick:()=>xi(c._id),className:"px-3 py-1.5 text-xs bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-1 whitespace-nowrap",children:[e.jsx(kr,{size:14}),"View"]})]},c._id))}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(gs[R.category]||[]).length>0?(gs[R.category]||[]).sort((c,b)=>(c.sortOrder||0)-(b.sortOrder||0)).map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-cream-200 rounded-lg hover:border-cream-300 transition-colors cursor-pointer",onClick:async()=>{Y({...R,subcategory:c._id});const b=[R.category];if(c.parent){const N=typeof c.parent=="object"&&c.parent!==null?c.parent._id:String(c.parent);N&&b.push(N)}b.push(c._id),la(b);try{Ae(!0);const N=await fetch(`${Te}/products/subcategory/${c._id}`,{headers:Tt()});if(N.ok){const S=await jt(N);ie(S||[])}else ie([])}catch(N){console.error("Error fetching products:",N),ie([])}finally{Ae(!1)}},children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-cream-900 text-sm truncate",children:c.name}),e.jsx("p",{className:"text-xs text-cream-600",children:c.parent?"Nested Subcategory":"Subcategory"})]})]}),e.jsx(Ha,{className:"text-cream-600",size:16})]},c._id)):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"No subcategories found. Product will be created directly under this category."})})}):e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[xn.filter(c=>!c.parent).map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-cream-200 rounded-lg hover:border-cream-300 transition-colors cursor-pointer",onClick:async()=>{Y({...R,category:c._id,subcategory:""}),la([c._id]),ie([]),await jn(c._id)},children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-cream-900 text-sm truncate",children:c.name}),e.jsxs("p",{className:"text-xs text-cream-600",children:[c.type," Category"]})]})]}),e.jsx(Ha,{className:"text-cream-600",size:16})]},c._id)),xn.filter(c=>!c.parent).length===0&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"No categories found for this type."})})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Options"}),R.options&&e.jsx("button",{type:"button",onClick:ul,className:"px-3 py-1 text-xs bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Load from JSON"})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{type:"button",onClick:gi,className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:16}),"Add Option"]})}),_.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No options added. Click "Add Option" to start.'}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto -mx-4 sm:mx-0",children:e.jsx("div",{className:"inline-block min-w-full align-middle px-4 sm:px-0",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900 min-w-[150px]",children:"Name"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900 min-w-[150px]",children:"Price (INR per unit)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900 min-w-[200px]",children:"Description"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:_.map((c,b)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:c.name,onChange:N=>Wa(b,"name",N.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Option name"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",step:"0.00001",min:"0",value:c.priceAdd,onChange:N=>Wa(b,"priceAdd",N.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm font-medium",placeholder:"0.00 (INR per unit)"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("textarea",{value:c.description,onChange:N=>Wa(b,"description",N.target.value),rows:2,className:"w-full px-2 py-1 border border-cream-200 rounded text-sm resize-y",placeholder:"Description"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>Eo(b),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})})]},b))})]})})}),e.jsx("div",{className:"md:hidden space-y-4",children:_.map((c,b)=>e.jsxs("div",{className:"bg-white border border-cream-300 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-semibold text-cream-900",children:["Option ",b+1]}),e.jsx("button",{type:"button",onClick:()=>Eo(b),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:18})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:N=>Wa(b,"name",N.target.value),className:"w-full px-3 py-2 border border-cream-200 rounded text-sm",placeholder:"Option name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Price (INR per unit)"}),e.jsx("input",{type:"text",value:c.priceAdd,onChange:N=>Wa(b,"priceAdd",N.target.value),className:"w-full px-3 py-2 border border-cream-200 rounded text-sm font-medium",placeholder:"0.00 (INR per unit)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:N=>Wa(b,"description",N.target.value),rows:2,className:"w-full px-3 py-2 border border-cream-200 rounded text-sm resize-y",placeholder:"Description"})]})]},b))})]})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-purple-50",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"File Upload Constraints & Additional Settings"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Maximum File Size (MB)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",value:R.maxFileSizeMB,onChange:c=>Y({...R,maxFileSizeMB:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 10"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Enforces technical constraints for Staff uploads"})]}),e.jsxs("div",{className:"flex items-end",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-cream-900 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R.blockCDRandJPG,onChange:c=>Y({...R,blockCDRandJPG:c.target.checked}),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{children:"Block CDR and JPG Files"})]}),e.jsx("p",{className:"text-xs text-cream-600 ml-2",children:"Restricts accepted file formats for production"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Min File Width (pixels)"}),e.jsx("input",{type:"number",min:"0",value:R.minFileWidth,onChange:c=>Y({...R,minFileWidth:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 2000"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Minimum width for user artwork files"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Max File Width (pixels)"}),e.jsx("input",{type:"number",min:"0",value:R.maxFileWidth,onChange:c=>Y({...R,maxFileWidth:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 5000"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Maximum width for user artwork files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Min File Height (pixels)"}),e.jsx("input",{type:"number",min:"0",value:R.minFileHeight,onChange:c=>Y({...R,minFileHeight:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 1500"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Minimum height for user artwork files"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Max File Height (pixels)"}),e.jsx("input",{type:"number",min:"0",value:R.maxFileHeight,onChange:c=>Y({...R,maxFileHeight:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 4000"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Maximum height for user artwork files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Additional Design Charge (INR)"}),e.jsx("input",{type:"number",step:"0.00001",min:"0",value:R.additionalDesignCharge,onChange:c=>Y({...R,additionalDesignCharge:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 500"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Fixed fee if Staff requires design help"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"GST % *"}),e.jsx("input",{id:"product-gstPercentage",name:"gstPercentage",type:"number",required:!0,step:"0.01",min:"0",max:"100",value:R.gstPercentage,onChange:c=>{Y({...R,gstPercentage:c.target.value}),M.gstPercentage&&V({...M,gstPercentage:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${M.gstPercentage?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., 18"}),M.gstPercentage&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),M.gstPercentage]}),!M.gstPercentage&&e.jsx("p",{className:"text-xs text-red-600 mt-1 font-medium",children:"CRITICAL: Required for invoice calculation"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R.showPriceIncludingGst,onChange:c=>Y({...R,showPriceIncludingGst:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-cream-900 block",children:"Show Prices Including GST"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:R.showPriceIncludingGst?"Prices will be displayed including GST on the product page. (Not recommended - industry standard is to show excluding GST)":"Prices will be displayed excluding GST on the product page. GST will be added at checkout. (Recommended - industry standard)"})]})]})}),e.jsxs("div",{className:"mt-6 border border-cream-300 rounded-lg p-6 bg-yellow-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(gr,{size:20}),"Custom Instructions for Customers"]}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Add specific instructions that customers must follow. If instructions are not followed, the company is not responsible. These instructions will be displayed prominently to customers."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Instructions *"}),e.jsx("textarea",{id:"product-instructions",name:"instructions",value:R.instructions,onChange:c=>{Y({...R,instructions:c.target.value}),M.instructions&&V({...M,instructions:void 0})},rows:6,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${M.instructions?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Example: Maximum file size: 10 MB. Files must be in PNG or PDF format only. CDR and JPG files are not accepted. Required dimensions: 3000  2000 pixels. Please ensure all text is converted to outlines before uploading."}),M.instructions&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),M.instructions]}),!M.instructions&&e.jsx("p",{className:"text-xs text-yellow-700 mt-2 font-medium",children:" These instructions will be displayed to customers with a disclaimer that the company is not responsible if instructions are not followed."})]})]}),e.jsxs("div",{className:"mt-6 border border-cream-300 rounded-lg p-6 bg-blue-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(gr,{size:20}),"Production Sequence (Department Order)"]}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Select a sequence or customize it for this specific product. If not set, the default department sequence will be used."}),(()=>{const c=Qa.length>0,b=R.productionSequence&&R.productionSequence.length>0,N=Di!==null,S=di.length>0,D=N?di.find(B=>B._id===Di):null;return D&&D.departments&&D.departments.length>0,!c&&!b&&!N&&!S?e.jsx("div",{className:"p-4 bg-cream-50 border border-cream-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:"No departments available. Please create departments first."})}):e.jsxs("div",{className:"space-y-4",children:[di.length>0&&e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900 mb-3",children:"Available Sequences:"}),e.jsx("div",{className:"space-y-2",children:di.map(B=>{const q=Di===B._id,Z=(B.departments||[]).map(te=>!te||!te.department?null:typeof te.department=="object"&&te.department!==null?te.department._id:te.department).filter(te=>te!==null);return e.jsxs("div",{className:"border border-cream-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{onClick:()=>{if(Di===B._id)nl(null),Y({...R,productionSequence:[]});else if(nl(B._id),Y({...R,productionSequence:Z}),B.attributes&&Array.isArray(B.attributes)&&B.attributes.length>0){const te=B.attributes.map((Oe,We)=>{if(!Oe)return null;const Nt=typeof Oe=="object"&&Oe!==null?Oe._id:Oe;return Nt?{attributeTypeId:Nt,isEnabled:!0,isRequired:!1,displayOrder:We}:null}).filter(Oe=>Oe!==null);Ge(te)}},className:`p-3 cursor-pointer transition-colors flex items-center justify-between ${q?"bg-cream-100 border-cream-900":"bg-cream-50 hover:bg-cream-100"}`,children:[e.jsx("p",{className:"font-medium text-cream-900",children:B.name}),e.jsx(Ha,{size:18,className:`text-cream-600 transition-transform ${q?"rotate-90":""}`})]}),e.jsx(ha,{children:q&&e.jsx(at.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"border-t border-cream-200 bg-white",children:e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-cream-700 mb-2",children:"Sequence Departments:"}),e.jsx(ha,{children:R.productionSequence.map((te,Oe)=>{const We=Qa.find(Nt=>Nt._id===te);return We?e.jsxs(at.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.4,delay:Oe*.1,ease:"easeOut"},className:"flex items-center gap-3 p-3 bg-cream-50 border border-cream-200 rounded-lg",children:[e.jsx(at.span,{initial:{scale:0},animate:{scale:1},transition:{duration:.3,delay:Oe*.1+.2,type:"spring",stiffness:200},className:"flex items-center justify-center w-8 h-8 bg-cream-900 text-white rounded-full text-sm font-medium",children:Oe+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:We.name}),e.jsx(ha,{children:We.description&&e.jsx(at.p,{initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.5,delay:Oe*.1+.3,ease:"easeOut"},className:"text-xs text-cream-600 mt-1 overflow-hidden",children:We.description})})]})]},te):null})})]})})})]},B._id)})})]}),!Cc&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{type:"button",onClick:()=>{il(!0),nl(null)},className:"px-4 py-2 text-sm font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Er,{size:16}),"Create Custom Sequence"]})}),Cc&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t-2 border-cream-300 pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900",children:"Create Custom Sequence"}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:"Select departments in order to create a custom sequence for this product"})]}),e.jsxs("button",{type:"button",onClick:()=>{il(!1),Y({...R,productionSequence:[]})},className:"px-3 py-1 text-sm bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(Fl,{size:14}),"Back"]})]}),e.jsx(ha,{children:R.productionSequence&&R.productionSequence.length>0&&e.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"border border-cream-300 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900 mb-3",children:"Custom Production Sequence:"}),e.jsx("div",{className:"space-y-2",children:e.jsx(ha,{children:(R.productionSequence||[]).map((B,q)=>{const Z=Qa.find(te=>te._id===B);return Z?e.jsxs(at.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20,scale:.9},transition:{duration:.4,delay:q*.1,ease:"easeOut"},className:"flex items-center justify-between p-3 bg-cream-50 border border-cream-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(at.span,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.4,delay:q*.1+.2,type:"spring",stiffness:200},className:"flex items-center justify-center w-8 h-8 bg-cream-900 text-white rounded-full text-sm font-medium",children:q+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:Z.name}),e.jsx(ha,{children:Z.description&&e.jsx(at.p,{initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.5,delay:q*.1+.3,ease:"easeOut"},className:"text-xs text-cream-600 mt-1 overflow-hidden",children:Z.description})})]})]}),e.jsx(at.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>{const te=(R.productionSequence||[]).filter(Oe=>Oe!==B);Y({...R,productionSequence:te})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})]},B):null})})})]})}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900 mb-3",children:"Available Departments:"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Qa.filter(B=>B.isEnabled&&!(R.productionSequence||[]).includes(B._id)).sort((B,q)=>(B.sequence||0)-(q.sequence||0)).map(B=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-cream-50 border border-cream-200 rounded-lg hover:bg-cream-100 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-cream-900",children:B.name}),B.description&&e.jsx("p",{className:"text-xs text-cream-600",children:B.description})]}),e.jsxs("button",{type:"button",onClick:()=>{Y({...R,productionSequence:[...R.productionSequence||[],B._id]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:14}),"Add"]})]},B._id))}),Qa.filter(B=>B.isEnabled&&!(R.productionSequence||[]).includes(B._id)).length===0&&e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:"All available departments have been added to the sequence."})]}),e.jsx("div",{className:"mt-4 flex items-center justify-end gap-3",children:e.jsxs("button",{type:"button",onClick:()=>{il(!1),nl(null),p("Custom sequence saved for this product. The original sequence template remains unchanged."),setTimeout(()=>p(null),3e3)},disabled:!R.productionSequence||R.productionSequence.length===0,className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-2 ${R.productionSequence&&R.productionSequence.length>0?"bg-green-600 text-white hover:bg-green-700 cursor-pointer":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(ya,{size:16}),"Save Custom Sequence"]})})]})}),(!R.productionSequence||R.productionSequence.length===0)&&e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," If no custom sequence is set, the default department sequence will be used when orders are created for this product."]})})]})})()]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-green-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Product Attributes (Advanced)"}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:"Assign reusable attribute types to this product. These are more flexible than the legacy options above."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>Yl(!0),className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Create new attribute type",children:[e.jsx(Ys,{size:14}),"Create Attribute"]}),e.jsxs("button",{type:"button",onClick:()=>{const c=R.category||(Sa.length>0?Sa[0]:null),b=R.subcategory||(Sa.length>1?Sa[Sa.length-1]:null);cr(c,b)},disabled:Rr,className:"px-3 py-1.5 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center gap-2",title:"Refresh attribute types list",children:[Rr?e.jsx(Kt,{className:"animate-spin",size:14}):e.jsx(Er,{size:14}),"Refresh"]})]})]}),Rr?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Kt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-3 text-sm text-cream-600",children:"Loading attribute types..."})]}):!At||At.length===0?e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-cream-700",children:[e.jsx("strong",{children:"No attribute types found."}),' Click "Create Attribute" to create a new attribute type, or create attribute types in the "Attribute Types" tab.']})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Select Attribute Types to Use with This Product"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(At||[]).map(c=>{const b=(Ce||[]).some(S=>S.attributeTypeId===c._id),N=(Ce||[]).find(S=>S.attributeTypeId===c._id);return e.jsx("div",{className:`border rounded-lg p-3 ${b?"border-green-500 bg-green-50":"border-cream-300 bg-white"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:S=>{S.target.checked?Ge([...Ce||[],{attributeTypeId:c._id,isEnabled:!0,isRequired:c.isRequired||!1,displayOrder:(Ce||[]).length}]):Ge((Ce||[]).filter(D=>D.attributeTypeId!==c._id))},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-cream-900",children:c.attributeName}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[c.inputStyle||"N/A","  ",c.primaryEffectType||"N/A"," "," ",c.isPricingAttribute?"Affects Price":"No Price Impact"]})]})}),b&&e.jsx("div",{className:"mt-3 space-y-2 pl-7",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm text-cream-700",children:[e.jsx("input",{type:"checkbox",checked:(N==null?void 0:N.isRequired)||!1,onChange:S=>{Ge((Ce||[]).map(D=>D.attributeTypeId===c._id?{...D,isRequired:S.target.checked}:D))},className:"w-4 h-4 text-cream-900 border-cream-300 rounded"}),"Required for this product"]})})})]})]})},c._id)})}),Ce&&Ce.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:Ce.length})," attribute type(s) selected. These will be available when customers customize this product."]})})]})]}),Ql&&e.jsx("div",{"data-modal":"true",className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-100 p-4",onClick:c=>{c.target===c.currentTarget&&Yl(!1)},onMouseDown:c=>{c.target===c.currentTarget&&c.stopPropagation()},children:e.jsxs("div",{"data-modal":"true",className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:c=>{c.stopPropagation(),c.preventDefault()},onMouseDown:c=>{c.stopPropagation(),c.preventDefault()},onSubmit:c=>{c.stopPropagation(),c.preventDefault()},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-cream-900",children:"Create New Attribute Type"}),e.jsx("button",{type:"button",onClick:()=>{Yl(!1),al(null),ft({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]})},className:"text-cream-600 hover:text-cream-900 p-1",children:e.jsx(ns,{size:24})})]}),e.jsxs("form",{onSubmit:c=>{c.preventDefault(),c.stopPropagation(),hi(c)},className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Name * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(What customers will see)"})]}),e.jsx("input",{id:"attribute-name",name:"attributeName",type:"text",value:K.attributeName,onChange:c=>{ft({...K,attributeName:c.target.value}),z.attributeName&&P({...z,attributeName:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${z.attributeName?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Printing Option, Paper Type",required:!0}),z.attributeName&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),z.attributeName]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["How Customers Select This * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Input method)"})]}),e.jsxs("select",{id:"attribute-inputStyle",name:"inputStyle",value:K.inputStyle,onChange:c=>ft({...K,inputStyle:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"DROPDOWN",children:"Dropdown Menu"}),e.jsx("option",{value:"POPUP",children:"Pop-Up"}),e.jsx("option",{value:"RADIO",children:"Radio Buttons"}),e.jsx("option",{value:"CHECKBOX",children:"Checkbox"}),e.jsx("option",{value:"TEXT_FIELD",children:"Text Field"}),e.jsx("option",{value:"NUMBER",children:"Number Input"}),e.jsx("option",{value:"FILE_UPLOAD",children:"File Upload"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Image ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(to be shown when selecting this attribute)"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:c=>{var N;const b=((N=c.target.files)==null?void 0:N[0])||null;if(b){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(b.type)){f("Invalid image format. Please upload JPG, PNG, or WebP image."),c.target.value="",ft({...K,attributeImage:null});return}const D=5*1024*1024;if(b.size>D){f("Image size must be less than 5MB. Please compress the image and try again."),c.target.value="",ft({...K,attributeImage:null});return}f(null)}ft({...K,attributeImage:b})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent"}),K.attributeImage&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:URL.createObjectURL(K.attributeImage),alt:"Attribute preview",className:"w-32 h-32 object-cover rounded-lg border border-cream-300"}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[K.attributeImage.name," (",(K.attributeImage.size/1024).toFixed(2)," KB)"]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["What This Affects * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Description of impact on product)"})]}),e.jsx("textarea",{value:K.effectDescription,onChange:c=>ft({...K,effectDescription:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent",rows:3,placeholder:"e.g., Changes the product price, Requires customer to upload a file, Creates different product versions, Just displays information",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Describe how this attribute affects the product or customer experience"})]}),e.jsxs("div",{className:"mt-6 border-t border-cream-200 pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Cascading Attributes (Optional)"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:'Make this attribute appear only when a parent attribute has specific values. For example, show "Material" options only when "Card Type" is "Glossy".'}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Parent Attribute ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Optional - if this depends on another attribute)"})]}),e.jsxs("select",{value:K.parentAttribute,onChange:c=>{ft({...K,parentAttribute:c.target.value,showWhenParentValue:[],hideWhenParentValue:[]})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent",children:[e.jsx("option",{value:"",children:"None (Independent Attribute)"}),At.filter(c=>!c.parentAttribute).map(c=>e.jsx("option",{value:c._id,children:c.attributeName},c._id))]}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Select a parent attribute if this attribute should only appear when the parent has certain values"})]}),K.parentAttribute&&(()=>{const c=At.find(N=>N._id===K.parentAttribute),b=(c==null?void 0:c.attributeValues)||[];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Show When Parent Value Is ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Leave empty to show for all values)"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-300 rounded-lg p-3",children:b.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:"Parent attribute has no values defined yet"}):b.map((N,S)=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:K.showWhenParentValue.includes(N.value),onChange:D=>{const U=K.showWhenParentValue||[];D.target.checked?ft({...K,showWhenParentValue:[...U,N.value],hideWhenParentValue:(K.hideWhenParentValue||[]).filter(B=>B!==N.value)}):ft({...K,showWhenParentValue:U.filter(B=>B!==N.value)})},className:"rounded border-cream-300 text-cream-900 focus:ring-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:N.label||N.value})]},S))}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Check values to show this attribute only when parent has those values. Leave all unchecked to show for all parent values."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Hide When Parent Value Is ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Optional)"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-300 rounded-lg p-3",children:b.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:"Parent attribute has no values defined yet"}):b.map((N,S)=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:K.hideWhenParentValue.includes(N.value),onChange:D=>{const U=K.hideWhenParentValue||[];D.target.checked?ft({...K,hideWhenParentValue:[...U,N.value],showWhenParentValue:(K.showWhenParentValue||[]).filter(B=>B!==N.value)}):ft({...K,hideWhenParentValue:U.filter(B=>B!==N.value)})},className:"rounded border-cream-300 text-cream-900 focus:ring-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:N.label||N.value})]},S))}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:'Check values to hide this attribute when parent has those values. This overrides "Show When" settings.'})]})]})})()]})]})]}),K.inputStyle==="DROPDOWN"||K.inputStyle==="RADIO"||K.isPriceEffect?e.jsxs("div",{className:"border-b border-cream-200 pb-4","data-attribute-options-table":!0,children:[z.attributeValues&&e.jsx("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:z.attributeValues})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Options"}),e.jsxs("button",{type:"button",onClick:()=>{ft({...K,attributeOptionsTable:[...K.attributeOptionsTable,{name:"",priceImpactPer1000:"",image:void 0,optionUsage:{price:!1,image:!1,listing:!1},priceImpact:"",numberOfImagesRequired:0,listingFilters:""}]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:16}),"Add Option"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:K.attributeOptionsTable.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No options added. Click "Add Option" to start.'}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Name *"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Usage *"}),K.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.price})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Impact"}),K.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.image})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Number of Images Required"}),K.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.listing})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Listing Filters"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Image (Optional)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:(K.attributeOptionsTable||[]).map((c,b)=>{var N,S,D,U,B,q;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:c.name,onChange:Z=>{const te=[...K.attributeOptionsTable];te[b].name=Z.target.value,ft({...K,attributeOptionsTable:te})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Both Sides, Express Delivery",required:!0})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((N=c.optionUsage)==null?void 0:N.price)||!1,onChange:Z=>{const te=[...K.attributeOptionsTable];if(te[b].optionUsage||(te[b].optionUsage={price:!1,image:!1,listing:!1}),te[b].optionUsage.price=Z.target.checked,!Z.target.checked&&!te[b].optionUsage.image&&!te[b].optionUsage.listing){f("At least one option usage must be selected (Price, Image, or Listing)");return}ft({...K,attributeOptionsTable:te}),f(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Price"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((S=c.optionUsage)==null?void 0:S.image)||!1,onChange:Z=>{const te=[...K.attributeOptionsTable];if(te[b].optionUsage||(te[b].optionUsage={price:!1,image:!1,listing:!1}),te[b].optionUsage.image=Z.target.checked,!Z.target.checked&&!te[b].optionUsage.price&&!te[b].optionUsage.listing){f("At least one option usage must be selected (Price, Image, or Listing)");return}ft({...K,attributeOptionsTable:te}),f(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Image"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((D=c.optionUsage)==null?void 0:D.listing)||!1,onChange:Z=>{const te=[...K.attributeOptionsTable];if(te[b].optionUsage||(te[b].optionUsage={price:!1,image:!1,listing:!1}),te[b].optionUsage.listing=Z.target.checked,!Z.target.checked&&!te[b].optionUsage.price&&!te[b].optionUsage.image){f("At least one option usage must be selected (Price, Image, or Listing)");return}ft({...K,attributeOptionsTable:te}),f(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Listing"})]})]})}),K.attributeOptionsTable.some(Z=>{var te;return(te=Z.optionUsage)==null?void 0:te.price})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(U=c.optionUsage)!=null&&U.price?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-cream-700",children:""}),e.jsx("input",{type:"number",value:c.priceImpact||"",onChange:Z=>{const te=[...K.attributeOptionsTable];te[b].priceImpact=Z.target.value,ft({...K,attributeOptionsTable:te})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter amount",step:"0.01",min:"0"})]}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),K.attributeOptionsTable.some(Z=>{var te;return(te=Z.optionUsage)==null?void 0:te.image})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(B=c.optionUsage)!=null&&B.image?e.jsx("input",{type:"number",value:c.numberOfImagesRequired||0,onChange:Z=>{const te=[...K.attributeOptionsTable];te[b].numberOfImagesRequired=parseInt(Z.target.value)||0,ft({...K,attributeOptionsTable:te})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Number of images",min:"0"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),K.attributeOptionsTable.some(Z=>{var te;return(te=Z.optionUsage)==null?void 0:te.listing})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(q=c.optionUsage)!=null&&q.listing?e.jsx("input",{type:"text",value:c.listingFilters||"",onChange:Z=>{const te=[...K.attributeOptionsTable];te[b].listingFilters=Z.target.value,ft({...K,attributeOptionsTable:te})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter filters (comma-separated)"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:async Z=>{var Oe;const te=(Oe=Z.target.files)==null?void 0:Oe[0];if(te){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(te.type)){f("Invalid image format. Please upload JPG, PNG, or WebP image.");return}if(te.size>5*1024*1024){f("Image size must be less than 5MB.");return}try{m(!0);const Nt=new FormData;Nt.append("image",te);const Ht=await fetch(`${Te}/upload-image`,{method:"POST",headers:Tt(),body:Nt});if(!Ht.ok){const Yt=await Ht.json().catch(()=>({}));throw new Error(Yt.error||"Failed to upload image")}const Et=await Ht.json(),Ct=Et.url||Et.secure_url;if(!Ct)throw new Error("No image URL returned from server");const wt=[...K.attributeOptionsTable];wt[b].image=Ct,ft({...K,attributeOptionsTable:wt}),f(null)}catch(Nt){console.error("Error uploading image:",Nt),f(Nt instanceof Error?Nt.message:"Failed to upload image. Please try again.")}finally{m(!1)}}},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm"}),c.image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded border border-cream-200"}),e.jsx("button",{type:"button",onClick:()=>{const Z=[...K.attributeOptionsTable];Z[b].image=void 0,ft({...K,attributeOptionsTable:Z})},className:"mt-1 text-xs text-red-600 hover:text-red-800",children:"Remove"})]})]}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>{const Z=K.attributeOptionsTable.filter((te,Oe)=>Oe!==b);ft({...K,attributeOptionsTable:Z})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})})]},b)})})]})})}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Add all options customers can choose from. If "Is Price Effect" is checked, enter the price impact per 1000 units for each option.'})]}):null,e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Additional Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isPriceEffect,onChange:c=>ft({...K,isPriceEffect:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Price Effect?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if selecting this attribute changes the product price"}),K.isPriceEffect&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Price Effect Amount ( per 1000 units) *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg text-cream-700",children:""}),e.jsx("input",{type:"number",value:K.priceEffectAmount,onChange:c=>ft({...K,priceEffectAmount:c.target.value}),className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg",placeholder:"e.g., 20 (means +20 per 1000 units)",step:"0.00001",min:"0",required:K.isPriceEffect}),e.jsx("span",{className:"text-sm text-cream-600",children:"per 1000 units"})]}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Enter how much the price changes per 1000 units. Example: "20" means +20 for every 1000 units.'})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isStepQuantity,onChange:c=>ft({...K,isStepQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Step Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific steps (e.g., 1000, 2000, 3000 only)"}),K.isStepQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Steps:"}),e.jsxs("button",{type:"button",onClick:()=>{ft({...K,stepQuantities:[...K.stepQuantities,{quantity:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Ys,{size:14}),"Add Step"]})]}),K.stepQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No steps added. Click "Add Step" to start.'}):e.jsx("div",{className:"space-y-2",children:K.stepQuantities.map((c,b)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Step - ",b+1,":"]}),e.jsx("input",{type:"number",value:c.quantity,onChange:N=>{const S=[...K.stepQuantities];S[b].quantity=N.target.value,ft({...K,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"quantity of step",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...K.stepQuantities];S[b].price=N.target.value,ft({...K,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of step",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=K.stepQuantities.filter((S,D)=>D!==b);ft({...K,stepQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})]},b))})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isRangeQuantity,onChange:c=>ft({...K,isRangeQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Range Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific Range (e.g., 1000-2000, 2000-5000)"}),K.isRangeQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Ranges:"}),e.jsxs("button",{type:"button",onClick:()=>{ft({...K,rangeQuantities:[...K.rangeQuantities,{min:"",max:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Ys,{size:14}),"Add Range"]})]}),K.rangeQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No ranges added. Click "Add Range" to start.'}):e.jsx("div",{className:"space-y-2",children:K.rangeQuantities.map((c,b)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Range - ",b+1,":"]}),e.jsx("input",{type:"number",value:c.min,onChange:N=>{const S=[...K.rangeQuantities];S[b].min=N.target.value,ft({...K,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"min quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700",children:"-"}),e.jsx("input",{type:"number",value:c.max,onChange:N=>{const S=[...K.rangeQuantities];S[b].max=N.target.value,ft({...K,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"max quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...K.rangeQuantities];S[b].price=N.target.value,ft({...K,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of range",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=K.rangeQuantities.filter((S,D)=>D!==b);ft({...K,rangeQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})]},b))})]})]})]})]})]}),K.primaryEffectType==="FILE"&&e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"File Requirements"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"File Requirements Description"}),e.jsx("textarea",{value:K.fileRequirements,onChange:c=>ft({...K,fileRequirements:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg",rows:3,placeholder:"e.g., Upload your design file (JPG, PNG, PDF). Minimum 300 DPI recommended."}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:"Describe what type of file customers need to upload and any requirements (format, size, resolution, etc.)"})]})]}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isFilterable,onChange:c=>ft({...K,isFilterable:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Allow Filtering"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers can filter products by this attribute (e.g., filter by color, size, etc.)"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isRequired,onChange:c=>ft({...K,isRequired:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Required Selection"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers must select an option before they can place an order"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isCommonAttribute,onChange:c=>ft({...K,isCommonAttribute:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Available for All Products"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute can be used with any product. Uncheck to restrict to specific categories/subcategories."})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Creating...":"Create Attribute"}),e.jsx("button",{type:"button",onClick:()=>{Yl(!1),al(null),ft({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]})},className:"flex-1 px-6 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"})]})]})]})}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:20}),j?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ys,{size:20}),j?"Update Product":"Create Product"]})})]}),i==="categories"&&!E&&!Ns&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Category Level *"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border-2 cursor-pointer hover:border-cream-400 transition-all hover:shadow-sm",style:{borderColor:!ue.parent&&!Vt?"#d97706":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"categoryLevel",checked:!ue.parent&&!Vt,onChange:()=>{se({...ue,parent:"",sortOrder:0}),Gs(!1),Ot({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),Dt([]),f(null)},className:"w-4 h-4 text-cream-600 focus:ring-cream-500",value:"toplevel"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-cream-900",children:"Main Category"}),e.jsx("p",{className:"text-xs text-cream-600 mt-0.5",children:"Create a top-level category"})]}),!ue.parent&&!Vt&&e.jsx(ya,{className:"text-cream-600",size:20})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border-2 cursor-pointer hover:border-cream-400 transition-all hover:shadow-sm",style:{borderColor:ue.parent&&!Vt?"#d97706":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"categoryLevel",checked:!!ue.parent&&!Vt,onChange:()=>{Gs(!1),Ot({name:"",description:"",category:"pending",parent:"",type:ue.type||"",slug:"",sortOrder:0,image:null}),se({...ue,parent:"pending"}),Dt([]),f(null)},className:"w-4 h-4 text-cream-600 focus:ring-cream-500",value:"subcategory"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-cream-900",children:"Subcategory"}),e.jsx("p",{className:"text-xs text-cream-600 mt-0.5",children:"Create under an existing category"})]}),ue.parent&&!Vt&&e.jsx(ya,{className:"text-cream-600",size:20})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border-2 cursor-pointer hover:border-cream-400 transition-all hover:shadow-sm",style:{borderColor:Vt?"#d97706":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"categoryLevel",checked:Vt,onChange:()=>{Gs(!0),se({...ue,parent:""}),Ot({name:"",description:"",category:"",parent:"pending",type:ue.type||"",slug:"",sortOrder:0,image:null}),Dt([]),f(null)},className:"w-4 h-4 text-cream-600 focus:ring-cream-500",value:"nestedSubcategory"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-cream-900",children:"Nested Subcategory"}),e.jsx("p",{className:"text-xs text-cream-600 mt-0.5",children:"Create under an existing subcategory"})]}),Vt&&e.jsx(ya,{className:"text-cream-600",size:20})]})]})]}),i==="categories"&&!Ns&&!ze.category&&!Vt&&e.jsxs("form",{onSubmit:Ur,className:"space-y-6",children:[E&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Category: ",ue.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:zi,className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),!ue.parent&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Category Name *"}),e.jsx("input",{id:"category-name",name:"name",type:"text",required:!0,value:ue.name,onChange:c=>{const b=c.target.value;let N=ue.slug;if(!Ie){const S=b.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");S&&!b.endsWith(" ")?N=Pi(S,E,null):N=S}se({...ue,name:b,slug:N}),f(null)},onBlur:()=>{if(!ue.name.trim())f("Category name is required.");else if(!Ie){const c=ue.name.trim();if(c){const b=c.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");if(b){const N=Pi(b,E,null);se({...ue,slug:N})}}}},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${u&&!ue.name.trim()||!ue.name.trim()&&ue.name!==""?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Enter category name"}),(u&&!ue.name.trim()||!ue.name.trim()&&ue.name!=="")&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Category name is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description"}),e.jsx("textarea",{value:ue.description,onChange:c=>se({...ue,description:c.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Slug (URL-friendly identifier)"}),e.jsx("input",{type:"text",value:ue.slug,onChange:c=>{Qe(!0),se({...ue,slug:c.target.value})},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., visiting-cards (auto-generated from name)"}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Auto-generated from category name. You can customize it if needed."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Type *"}),e.jsx(Ea,{id:"category-type",label:"Select Type",value:ue.type,onChange:c=>{se({...ue,type:c,parent:""}),f(null),setTimeout(()=>{E?yn(E):yn()},0)},options:[{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"}),u&&!ue.type&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Category type is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",min:"0",value:ue.sortOrder,onChange:c=>{se({...ue,sortOrder:parseInt(c.target.value)||0}),le.sortOrder&&G({...le,sortOrder:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${le.sortOrder?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Enter sort order (0 = first)"}),le.sortOrder?e.jsx("p",{className:"mt-1 text-xs text-red-600",children:le.sortOrder}):e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Lower numbers appear first. Sort order must be unique within the same type (Digital or Bulk)."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Category Image *",E&&e.jsx("span",{className:"text-xs text-cream-500 font-normal ml-2",children:"(Leave empty to keep current)"}),!E&&e.jsx("span",{className:"text-xs text-red-600 font-normal ml-2",children:"(Required - JPG, PNG, WebP, max 5MB)"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",required:!E,onChange:c=>{var N;const b=((N=c.target.files)==null?void 0:N[0])||null;if(b){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(b.type)){f("Invalid image format. Please upload JPG, PNG, or WebP image."),c.target.value="",se({...ue,image:null});return}const D=5*1024*1024;if(b.size>D){f("Image size must be less than 5MB. Please compress the image and try again."),c.target.value="",se({...ue,image:null});return}f(null)}else E||f("Category image is required. Please upload an image.");se({...ue,image:b})},onBlur:()=>{!E&&!ue.image&&f("Category image is required. Please upload an image.")},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${u&&!E&&!ue.image?"border-red-300 bg-red-50":"border-cream-300"}`}),E&&F&&!ue.image&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-cream-700 mb-2",children:"Current Image:"}),e.jsx("img",{src:F,alt:"Current category",className:"w-32 h-32 object-cover rounded-lg border border-cream-300",onError:c=>{const b=c.target;b.src="/Glossy.png"}})]}),ue.image&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm text-green-700 mb-2 font-medium flex items-center gap-1",children:[e.jsx(ya,{size:14}),"New Image Preview:"]}),e.jsx("img",{src:URL.createObjectURL(ue.image),alt:"New category preview",className:"w-32 h-32 object-cover rounded-lg border-2 border-green-400",onError:c=>{const b=c.target;b.src="/Glossy.png"}}),e.jsxs("p",{className:"mt-2 text-xs text-green-600",children:[ue.image.name," (",(ue.image.size/1024).toFixed(2)," KB)"]})]}),u&&!E&&!ue.image&&e.jsxs("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),"Category image is required"]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ys,{size:20}),E?"Update Category":"Create Category"]})})]})]}),i==="categories"&&(Ns||ze.category&&ze.category!==""&&!Vt||Vt)&&e.jsxs("form",{onSubmit:Ir,className:"space-y-6 mt-8 border-t border-cream-200 pt-8",children:[Ns&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Subcategory: ",ze.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:zi,className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),!Ns&&ze.category&&ze.category!=="pending"&&!Vt&&e.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-green-800 font-medium",children:["Adding Subcategory to: ",((To=Be.find(c=>c._id===ze.category))==null?void 0:To.name)||"Category"]}),e.jsx("button",{type:"button",onClick:()=>{Ot({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),ot(!1),se({...ue,parent:""}),Dt([]),f(null)},className:"px-3 py-1 text-sm bg-green-100 text-green-800 rounded-lg hover:bg-green-200 transition-colors",children:"Cancel"})]}),Vt&&(!ze.parent||ze.parent==="pending")&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Step 1: Select Parent Subcategory"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ea,{label:"Select Type",value:ze.type||"",onChange:c=>{Ot({...ze,type:c,category:"",parent:"pending"}),Dt([]),f(null)},options:[{value:"",label:"Select Type"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"})]}),ze.type&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ea,{id:"nested-subcategory-category",label:"Select Category",value:ze.category||"",onChange:async c=>{const b=c||"";if(Ot({...ze,category:b,parent:"pending"}),b){Ps(!0);try{const N=await fetch(`${Te}/subcategories/category/${b}?includeChildren=true`);if(N.ok){const S=await N.json(),D=(B,q=0)=>{let Z=[];return B.forEach(te=>{Z.push({...te,_displayLevel:q}),te.children&&te.children.length>0&&(Z=Z.concat(D(te.children,q+1)))}),Z},U=D(Array.isArray(S)?S:(S==null?void 0:S.data)||[]);Dt(U||[])}else Dt([])}catch(N){console.error("Error fetching parent subcategories:",N),Dt([])}finally{Ps(!1)}}else Dt([])},options:[{value:"",label:"Select Category"},...Be.filter(c=>c.type===ze.type).sort((c,b)=>(c.sortOrder||0)-(b.sortOrder||0)).map(c=>{const b=c.type==="Digital"?"Digital Print":"Bulk Print";return{value:c._id,label:`${c.name} (${b})`}})],className:"w-full"})]}),ze.category&&ze.category!==""&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory ",e.jsx("span",{className:"text-red-500",children:"*"})]}),us?e.jsxs("div",{className:"w-full px-4 py-2 border border-cream-300 rounded-lg bg-cream-50 flex items-center gap-2",children:[e.jsx(Kt,{className:"animate-spin",size:16}),e.jsx("span",{className:"text-sm text-cream-600",children:"Loading subcategories..."})]}):e.jsx(Ea,{id:"nested-subcategory-parent",label:"Select Subcategory (Parent for nested subcategory)",value:ze.parent==="pending"?"":ze.parent||"",onChange:async c=>{const b=c||"";if(b){const N=_t.find(D=>D._id===b),S=N!=null&&N.category?typeof N.category=="object"&&N.category!==null?N.category._id:N.category:ze.category;Ot({...ze,parent:b,category:S||ze.category})}},options:[{value:"",label:"Select Subcategory"},..._t.sort((c,b)=>(c.sortOrder||0)-(b.sortOrder||0)).map(c=>({value:c._id,label:`${"  ".repeat(c._displayLevel||0)}${c.name}${c._displayLevel>0?" (nested)":""}`}))],className:"w-full"}),_t.length===0&&ze.category&&!us&&e.jsx("p",{className:"mt-2 text-xs text-red-600",children:"No subcategories found for this category. Please create a subcategory first."})]}),e.jsx("div",{className:"flex items-center justify-end gap-3 pt-2",children:e.jsx("button",{type:"button",onClick:()=>{Gs(!1),Ot({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),Dt([]),f(null)},className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"})})]})]}),Vt&&ze.parent&&ze.parent!=="pending"&&e.jsxs("div",{className:"mb-4 p-3 bg-purple-50 border border-purple-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-purple-800 font-medium",children:["Adding Nested Subcategory under: ",((ml=_t.find(c=>c._id===ze.parent))==null?void 0:ml.name)||"Subcategory"]}),e.jsx("button",{type:"button",onClick:()=>{Ot({...ze,parent:"pending"})},className:"px-3 py-1 text-sm bg-purple-100 text-purple-800 rounded-lg hover:bg-purple-200 transition-colors",children:"Change Parent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"subcategory-name",name:"name",type:"text",required:!0,value:ze.name,onChange:c=>{const b=c.target.value;let N=ze.slug;if(!tt){const S=b.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");S&&!b.endsWith(" ")?N=Pi(S,null,Ns):N=S}Ot({...ze,name:b,slug:N}),f(null),pe.name&&qe({...pe,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${pe.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Enter subcategory name",onBlur:()=>{if(!ze.name.trim())qe({...pe,name:"Subcategory name is required"});else if(!tt){const c=ze.name.trim();if(c){const b=c.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");if(b){const N=Pi(b,null,Ns);Ot({...ze,slug:N})}}}}}),pe.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),pe.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description"}),e.jsx("textarea",{value:ze.description,onChange:c=>Ot({...ze,description:c.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),!Vt&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ea,{label:"Select Type",value:ze.type||"",onChange:c=>{Ot({...ze,type:c,category:ze.category==="pending"?"pending":""}),f(null)},options:[{value:"",label:"Select Type"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"}),u&&!ze.type&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Type is required to select parent category"})]}),ze.type&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Parent Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ea,{id:"subcategory-category",label:"Select Category",value:ze.category==="pending"?"":ze.category||"",onChange:c=>{Ot({...ze,category:c||""}),f(null),pe.category&&qe({...pe,category:void 0})},options:[{value:"",label:"Select Category"},...Be.filter(c=>c.type===ze.type).sort((c,b)=>(c.sortOrder||0)-(b.sortOrder||0)).map(c=>{const b=c.type==="Digital"?"Digital Print":"Bulk Print";return{value:c._id,label:`${c.name} (${b})`}})],className:"w-full"}),u&&(!ze.category||ze.category==="pending")&&ze.type&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Parent category is required"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Slug (URL-friendly identifier)"}),e.jsx("input",{type:"text",value:ze.slug,onChange:c=>{ot(!0),Ot({...ze,slug:c.target.value})},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., gloss-finish (auto-generated from name)"}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Auto-generated from subcategory name. You can customize it if needed."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",min:"0",value:ze.sortOrder,onChange:c=>{const b=parseInt(c.target.value,10)||0;Ot({...ze,sortOrder:b}),pe.sortOrder&&qe({...pe,sortOrder:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${pe.sortOrder?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"0"}),pe.sortOrder?e.jsx("p",{className:"mt-1 text-xs text-red-600",children:pe.sortOrder}):e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Lower numbers appear first. Sort order must be unique within the same parent category."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory Image ",Ns&&e.jsx("span",{className:"text-xs text-cream-500",children:"(Leave empty to keep current image)"})]}),Ns&&fe&&!ze.image&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-cream-700 mb-2",children:"Current Image:"}),e.jsx("img",{src:Jl(fe),alt:"Current subcategory",className:"w-32 h-32 object-cover rounded-lg border border-cream-300",onError:c=>{const b=c.target;b.src="/Glossy.png"}})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:c=>{var b;Ot({...ze,image:((b=c.target.files)==null?void 0:b[0])||null}),f(null)},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"}),ze.image&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm text-green-700 mb-2 font-medium flex items-center gap-1",children:[e.jsx(ya,{size:14}),"New Image Preview:"]}),e.jsx("img",{src:URL.createObjectURL(ze.image),alt:"New subcategory preview",className:"w-32 h-32 object-cover rounded-lg border-2 border-green-400",onError:c=>{const b=c.target;b.src="/Glossy.png"}}),e.jsxs("p",{className:"mt-2 text-xs text-green-600",children:[ze.image.name," (",(ze.image.size/1024).toFixed(2)," KB)"]})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:20}),Ns?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[Ns?e.jsx(Dn,{size:20}):e.jsx(Ys,{size:20}),Ns?"Update Subcategory":"Create Subcategory"]})})]}),i==="orders"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Orders (",_s.length,")"]}),e.jsx("button",{onClick:ol,disabled:As,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:As?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:16}),"Loading..."]}):"Refresh"})]}),As?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Kt,{className:"animate-spin text-cream-600 mx-auto mb-4",size:48}),e.jsx("p",{className:"text-cream-600",children:"Loading orders..."})]}):_s.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-cream-200",children:[e.jsx(Kb,{size:48,className:"mx-auto mb-4 opacity-50 text-cream-400"}),e.jsx("p",{className:"text-cream-600",children:"No orders found."})]}):e.jsx("div",{className:"space-y-4",children:_s.map(c=>{var b,N,S,D,U,B,q,Z;return c.product?e.jsxs("div",{className:"bg-white rounded-lg border border-cream-200 p-4 sm:p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4 pb-4 border-b border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:((S=c.product)==null?void 0:S.image)||Wo,alt:((D=c.product)==null?void 0:D.name)||"Product",className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-lg border border-cream-200",onError:te=>{const Oe=te.target;Oe.src=Wo}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 text-lg",children:((U=c.product)==null?void 0:U.name)||"Unknown Product"}),e.jsxs("p",{className:"text-sm text-cream-600 font-semibold",children:["Order #",c.orderNumber]}),e.jsxs("p",{className:"text-xs text-cream-500 mt-1",children:[((B=c.user)==null?void 0:B.name)||"Unknown"," (",((q=c.user)==null?void 0:q.email)||"Unknown",")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`px-4 py-2 rounded-full border-2 flex items-center gap-2 ${c.status==="completed"?"bg-green-100 text-green-800 border-green-200":c.status==="processing"?"bg-blue-100 text-blue-800 border-blue-200":c.status==="approved"?"bg-purple-100 text-purple-800 border-purple-200":c.status==="production_ready"?"bg-orange-100 text-orange-800 border-orange-200":c.status==="request"?"bg-yellow-100 text-yellow-800 border-yellow-200":c.status==="rejected"?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:e.jsx("span",{className:"text-sm font-semibold capitalize",children:c.status})}),c.currentDepartment&&typeof c.currentDepartment=="object"&&e.jsxs("div",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg border border-indigo-200 flex items-center gap-2",children:[e.jsx(Rn,{size:14}),e.jsxs("span",{className:"text-xs font-medium",children:["Current: ",c.currentDepartment.name,c.currentDepartmentIndex!==null&&c.currentDepartmentIndex!==void 0&&e.jsxs("span",{className:"ml-1 text-indigo-500",children:["(#",c.currentDepartmentIndex+1,")"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Quantity"}),e.jsxs("p",{className:"font-bold text-cream-900",children:[c.quantity," units"]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Finish"}),e.jsx("p",{className:"font-bold text-cream-900",children:c.finish})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Shape"}),e.jsx("p",{className:"font-bold text-cream-900",children:c.shape})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Total Price"}),e.jsxs("p",{className:"font-bold text-cream-900",children:["",c.totalPrice.toFixed(2)]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Mobile"}),e.jsx("p",{className:"font-bold text-cream-900 text-xs",children:c.mobileNumber||"N/A"})]})]}),c.selectedOptions&&c.selectedOptions.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-cream-600 mb-2",children:"Selected Options"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.selectedOptions.map((te,Oe)=>e.jsx("span",{className:"px-2 py-1 bg-cream-100 text-cream-800 rounded text-xs",children:typeof te=="string"?te:te.optionName},Oe))})]}),((Z=c.uploadedDesign)==null?void 0:Z.frontImage)&&e.jsxs("div",{className:"mb-4 p-3 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsxs("p",{className:"text-xs font-medium text-cream-700 mb-2 flex items-center gap-2",children:[e.jsx(vi,{size:14}),"Uploaded Front Design"]}),e.jsx("img",{src:c.uploadedDesign.frontImage.data||Wo,alt:"Front design",className:"w-full max-h-48 object-contain rounded border border-cream-300 bg-white",onError:te=>{var Nt;const Oe=te.target;Oe.style.display="none";const We=document.createElement("div");We.className="w-full h-48 flex items-center justify-center bg-red-50 text-red-600 rounded border border-red-200 text-sm",We.textContent="Failed to load image",(Nt=Oe.parentElement)==null||Nt.appendChild(We)}})]}),c.notes&&e.jsxs("div",{className:"mb-4 p-2 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-1",children:"Customer Notes:"}),e.jsx("p",{className:"text-xs text-blue-900 line-clamp-2",children:c.notes})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>{Re(c),He({status:c.status,deliveryDate:c.deliveryDate?new Date(c.deliveryDate).toISOString().split("T")[0]:"",adminNotes:c.adminNotes||""}),yt(!0)},className:"flex-1 px-4 py-2.5 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2 font-medium",children:[e.jsx(kr,{size:16}),c.status!=="cancelled"?"View & Manage":"View Details"]}),c.status==="request"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>cl(c._id,"production_ready"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Xa,{size:16}),"Production Ready"]}),e.jsxs("button",{onClick:()=>Oc(c._id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ul,{size:16}),"Reject"]})]}),c.status==="production_ready"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{type:"date",value:c.deliveryDate?new Date(c.deliveryDate).toISOString().split("T")[0]:"",onChange:te=>{const Oe=te.target.value;Oe&&cl(c._id,void 0,void 0,Oe)},className:"px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 text-sm",placeholder:"Delivery Date"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>cl(c._id,void 0,"start_production"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(co,{size:16}),"Start"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to cancel this order?")&&cl(c._id,"cancelled")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ul,{size:16}),"Cancel"]})]})]})})]}),e.jsxs("div",{className:"text-xs text-cream-500 pt-2 border-t border-cream-100",children:["Ordered: ",r?new Date(c.createdAt).toLocaleString():"Loading...",c.deliveryDate&&e.jsxs("span",{className:"ml-4",children:["Delivery: ",r?new Date(c.deliveryDate).toLocaleDateString():"Loading..."]})]})]},c._id):e.jsx("div",{className:"bg-white rounded-lg border border-cream-200 p-4 sm:p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-200 rounded-lg border border-cream-200 flex items-center justify-center",children:e.jsx(Na,{size:24,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 text-lg",children:"Product Not Found"}),e.jsxs("p",{className:"text-sm text-cream-600 font-semibold",children:["Order #",c.orderNumber]}),e.jsxs("p",{className:"text-xs text-cream-500 mt-1",children:[((b=c.user)==null?void 0:b.name)||"Unknown"," (",((N=c.user)==null?void 0:N.email)||"Unknown",")"]})]})]})},c._id)})})]}),i==="uploads"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Uploaded Images (",rt.length,")"]}),e.jsx("button",{onClick:()=>Hn(!1),disabled:xt,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:xt?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:16}),"Loading..."]}):"Refresh"})]}),xt?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Kt,{className:"animate-spin text-cream-600 mx-auto mb-4",size:48}),e.jsx("p",{className:"text-cream-600",children:"Loading uploaded images..."})]}):rt.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(vi,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No uploaded images yet"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:rt.map(c=>e.jsxs("div",{className:"border border-cream-300 rounded-lg overflow-hidden hover:shadow-lg transition-shadow relative bg-white",children:[e.jsxs("div",{className:"cursor-pointer",onClick:()=>{_e(c),ve(!0)},children:[c.frontImage?e.jsxs("div",{className:"aspect-video bg-cream-100 relative group",children:[it[`front-${c._id}`]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cream-100 z-10",children:e.jsx(Kt,{className:"animate-spin text-cream-600",size:24})}),e.jsx("img",{src:Jl(c.frontImage.data,c.frontImage.contentType)||Wo,alt:c.frontImage.filename,className:`w-full h-full object-cover ${it[`front-${c._id}`]?"opacity-0":"opacity-100"} transition-opacity`,onLoad:()=>es(b=>({...b,[`front-${c._id}`]:!1})),onError:b=>{var D;es(U=>({...U,[`front-${c._id}`]:!1}));const N=b.target;N.style.display="none";const S=document.createElement("div");S.className="absolute inset-0 flex items-center justify-center bg-red-50 text-red-600 text-xs p-2",S.textContent="Failed to load image",(D=N.parentElement)==null||D.appendChild(S)},onLoadStart:()=>es(b=>({...b,[`front-${c._id}`]:!0}))}),e.jsx("button",{onClick:b=>{b.stopPropagation(),Es(c.frontImage.data,c.frontImage.filename||"image.jpg")},className:"absolute top-2 left-2 p-2 bg-cream-900/80 text-white rounded-lg hover:bg-cream-900 transition-colors opacity-0 group-hover:opacity-100 flex items-center gap-1 shadow-md z-20",title:"Download image",children:e.jsx(Ki,{size:14})})]}):e.jsx("div",{className:"aspect-video bg-cream-100 flex items-center justify-center",children:e.jsx("p",{className:"text-cream-400 text-sm",children:"No image"})}),e.jsxs("div",{className:"p-3 sm:p-4",children:[e.jsx("p",{className:"font-semibold text-sm sm:text-base text-cream-900 truncate",children:c.user.name}),e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 truncate",children:c.user.email}),e.jsxs("p",{className:"text-xs text-cream-500 mt-2",children:[c.width,"  ",c.height,"px"]}),e.jsx("p",{className:"text-xs text-cream-500",children:r?new Date(c.createdAt).toLocaleDateString():"Loading..."})]})]}),e.jsx("button",{onClick:b=>{b.stopPropagation(),ua(c._id)},disabled:d,className:"absolute top-2 right-2 p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-1 shadow-md z-20",title:"Delete upload",children:d?e.jsx(Kt,{className:"animate-spin",size:14}):e.jsx(ta,{size:16})})]},c._id))})]}),i==="manage-products"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900 mb-2",children:["Products (",as.length,")"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1 sm:max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(fn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-cream-500",size:18}),e.jsx("input",{type:"text",placeholder:"Search products by name, description, or subcategory...",value:is,onChange:c=>ms(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 text-sm"}),is&&e.jsx("button",{onClick:()=>ms(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-cream-500 hover:text-cream-700",children:e.jsx(ns,{size:16})})]})}),e.jsx("div",{className:"flex-1 sm:max-w-xs",children:e.jsx(Ea,{label:"Filter by Category",value:Ss||"",onChange:c=>nu(c),options:[{value:"",label:"All Products"},...Be.map(c=>{const b=(D,U=[])=>{if(!D.parent)return[D.name,...U];const B=Be.find(q=>q._id===(typeof D.parent=="object"&&D.parent!==null?D.parent._id:D.parent));return B?b(B,[D.name,...U]):[D.name,...U]},S=b(c).join(" > ");return{value:c._id,label:`${S} (${c.type})`}})],className:"w-full"})}),(Ss||is)&&e.jsxs("button",{onClick:async()=>{ra(""),ms(""),await _r()},className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2 whitespace-nowrap",children:[e.jsx(ns,{size:16}),"Clear Filters"]})]})]}),e.jsxs("button",{onClick:async()=>{ra(""),ms(""),await _r()},className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors whitespace-nowrap flex items-center gap-2",children:[e.jsx(Na,{size:16}),"Refresh"]})]}),yr||tr?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Kt,{className:"animate-spin text-cream-600 mb-4",size:32}),e.jsx("p",{className:"text-cream-600",children:yr?"Loading products...":"Filtering products..."})]}):as.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(Na,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:Ss||is?"No products found matching your filters":"No products yet"})]}):e.jsx("div",{className:"space-y-4",children:as.map(c=>{let b="No Category",N="",S="";if(c.subcategory){const U=c.subcategory&&typeof c.subcategory=="object"?c.subcategory._id:c.subcategory,B=kt.find(q=>q._id===U);if(B){N=B.name||"";const q=typeof B.category=="object"&&B.category!==null?B.category._id:B.category;if(q){const Z=Be.find(te=>{const Oe=typeof q=="string"?q:typeof q=="object"&&(q!=null&&q._id)?q._id:"";return te._id===Oe});Z&&(b=Z.name||"No Category",S=Z.type||"")}}else if(c.subcategory&&typeof c.subcategory=="object"&&c.subcategory.name&&(N=c.subcategory.name,c.subcategory&&typeof c.subcategory=="object"&&c.subcategory.category)){const q=c.subcategory.category,Z=q&&typeof q=="object"&&"_id"in q?q:typeof q=="string"?Be.find(te=>te._id===q):null;Z&&typeof Z=="object"&&"_id"in Z&&(b=Z.name||"No Category",S=("type"in Z&&typeof Z.type=="string"?Z.type:"")||"")}}else if(c.category){const U=c.category&&typeof c.category=="object"?c.category._id:typeof c.category=="string"?c.category:"",B=Be.find(q=>q._id===String(U));B?(b=B.name||"No Category",S=B.type||""):c.category&&typeof c.category=="object"&&"_id"in c.category&&"name"in c.category&&(b=c.category.name||"No Category",S=("type"in c.category&&typeof c.category.type=="string"?c.category.type:"")||"")}const D=N?`${b} > ${N}`:`${b} (Direct)`;return e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 flex items-center justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-cream-900",children:c.name}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Category: ",D]}),S&&e.jsxs("p",{className:"text-xs text-cream-500",children:["Type: ",S]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>xi(c._id),disabled:d,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Dn,{size:18}),"Edit"]}),e.jsxs("button",{onClick:()=>Kl(c._id),disabled:d,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(ta,{size:18}),"Delete"]})]})]},c._id)})})]}),i==="manage-categories"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Categories (",bt.length," of ",Be.length,")"]}),e.jsx("button",{onClick:ja,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Refresh"})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search categories by name, description, or type...",value:Fs,onChange:c=>Ws(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"}),Fs&&e.jsx("button",{onClick:()=>Ws(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cream-500 hover:text-cream-700",children:e.jsx(ns,{size:18})})]}),e.jsx("div",{className:"sm:w-48",children:e.jsx(Ea,{label:"Filter by Type",value:qs,onChange:c=>da(c),options:[{value:"all",label:"All Types"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"})}),e.jsx("div",{className:"sm:w-48",children:e.jsx(Ea,{label:"Filter by Level",value:Ra,onChange:c=>er(c),options:[{value:"all",label:qs!=="all"?`All ${qs} Categories`:"All Categories"},{value:"top-level",label:qs!=="all"?`Top-Level ${qs}`:"Top-Level Only"},{value:"subcategories",label:qs!=="all"?`${qs} Subcategories`:"Subcategories Only"}],className:"w-full"})})]}),(Fs||qs!=="all"||Ra!=="all")&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-cream-600",children:"Active filters:"}),Fs&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-sm flex items-center gap-2",children:['Search: "',Fs,'"',e.jsx("button",{onClick:()=>Ws(""),className:"hover:text-red-600",children:e.jsx(ns,{size:14})})]}),qs!=="all"&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-sm flex items-center gap-2",children:["Type: ",qs,e.jsx("button",{onClick:()=>da("all"),className:"hover:text-red-600",children:e.jsx(ns,{size:14})})]}),Ra!=="all"&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-sm flex items-center gap-2",children:["Level: ",Ra==="top-level"?"Top-Level":"Subcategories",e.jsx("button",{onClick:()=>er("all"),className:"hover:text-red-600",children:e.jsx(ns,{size:14})})]}),e.jsx("button",{onClick:()=>{Ws(""),da("all"),er("all")},className:"text-sm text-cream-600 hover:text-cream-900 underline",children:"Clear all filters"})]})]}),Be.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(Rf,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No categories yet"})]}):bt.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(fn,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No categories match your search criteria"}),e.jsx("button",{onClick:()=>{Ws(""),da("all"),er("all")},className:"mt-4 text-cream-900 hover:underline",children:"Clear filters"})]}):e.jsxs("div",{ref:Mt,className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 scroll-smooth",style:{scrollBehavior:"auto"},onDragOver:c=>{c.preventDefault(),ee&&Wl(c,Mt.current)},onDragEnter:c=>{c.preventDefault(),ee&&Wl(c,Mt.current)},onDragLeave:c=>{var N;const b=c.relatedTarget;!((N=Mt.current)!=null&&N.contains(b))&&b!==Mt.current&&sn()},children:[e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 font-medium flex items-center gap-2",children:[e.jsx(gr,{size:16})," Drag and drop categories to reorder them. Changes will be saved after confirmation."]})}),bt.map((c,b)=>{const N=c.displayLevel||0,S=c.isSubcategory||N>0;let D="";if(S){const U=c.parent||(c.category&&typeof c.category=="object"?c.category._id:c.category);if(U){const B=Be.find(q=>q._id===U);D=B?B.name:"Unknown"}}return e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{draggable:!0,onDragStart:U=>{xe(c._id),U.dataTransfer.effectAllowed="move",U.dataTransfer.setData("text/plain",c._id)},onDragOver:U=>{U.preventDefault(),U.stopPropagation(),U.dataTransfer.dropEffect="move";const B=U.currentTarget;ee!==c._id&&(B.style.opacity="0.5"),ee&&Wl(U,Mt.current)},onDragLeave:U=>{U.currentTarget.style.opacity="1"},onDrop:U=>{U.preventDefault(),U.currentTarget.style.opacity="1";const B=U.dataTransfer.getData("text/plain");if(B&&B!==c._id){const q=bt.find(We=>We._id===B),Z=c,te=q&&(q.isSubcategory||q.displayLevel>0),Oe=Z.isSubcategory||Z.displayLevel>0;if(te||Oe){Ec(B,c._id);return}Ac(B,c._id)}},onDragEnd:U=>{U.currentTarget.style.opacity="1",sn(),setTimeout(()=>{xe(null)},100)},className:`border border-cream-300 rounded-lg p-4 flex items-center justify-between hover:shadow-md transition-shadow cursor-move ${ee===c._id?"opacity-50":""} ${N>0?"bg-cream-50":"bg-white"}`,style:{marginLeft:`${N*24}px`},onClick:U=>{ee||ll(c._id)},children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[N>0&&e.jsx("div",{className:"flex items-center",children:e.jsx(Ha,{size:16,className:"text-cream-400"})}),e.jsx("div",{className:"cursor-move text-cream-400 hover:text-cream-600",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M7 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 2zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 14zm6-8a2 2 0 1 1-.001-4.001A2 2 0 0 1 13 6zm0 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 14z"})})}),e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-cream-900",children:c.name}),S&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Subcategory"}),!S&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Top-level"}),Qs===c._id&&e.jsxs("span",{className:"text-xs bg-cream-200 text-cream-900 px-2 py-1 rounded-full",children:[ia.length," child categor",ia.length===1?"y":"ies"]})]}),S&&D&&e.jsxs("p",{className:"text-xs text-cream-500 mt-1",children:["Parent: ",D]}),e.jsxs("p",{className:"text-xs text-cream-500",children:["Type: ",c.type," | Sort Order: ",c.sortOrder||0]}),c.slug&&e.jsxs("p",{className:"text-xs text-cream-500",children:["Slug: ",c.slug]}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Click to view products | Drag handle to reorder"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:U=>{U.stopPropagation(),hn({isOpen:!0,type:"category",name:c.name,description:c.description||"No description available."})},disabled:d,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(kr,{size:18}),"View"]}),S?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:U=>{U.stopPropagation(),Gn(c._id)},disabled:d,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Dn,{size:18}),"Edit"]}),e.jsxs("button",{onClick:U=>{U.stopPropagation(),rn(c._id)},disabled:d,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(ta,{size:18}),"Delete"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:U=>{U.stopPropagation(),dl(c._id)},disabled:d,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Dn,{size:18}),"Edit"]}),e.jsxs("button",{onClick:U=>{U.stopPropagation(),Qn(c._id)},disabled:d,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(ta,{size:18}),"Delete"]})]})]})]})},c._id)}),Qs&&(()=>{var b,N;const c=Be.find(S=>S._id===Qs);return c?e.jsxs("div",{className:"mt-6 space-y-3 border-t-2 border-cream-300 pt-6 bg-cream-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900",children:["Products in: ",c.name]}),e.jsx("button",{onClick:()=>Xt(null),className:"text-cream-600 hover:text-cream-900",children:e.jsx(ns,{size:20})})]}),e.jsxs("div",{className:"mb-4 flex gap-3",children:[e.jsxs("button",{onClick:S=>{S.stopPropagation(),Cs?mi(Qs,Cs):mi(Qs)},className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:18}),Cs?`Add Product to ${((b=ia.find(S=>S._id===Cs))==null?void 0:b.name)||"Subcategory"}`:"Add Product to this Category"]}),!Cs&&e.jsxs("button",{onClick:S=>{S.stopPropagation(),Ri(Qs||"")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:18}),"Add Subcategory to this Category"]})]}),Cs&&e.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-blue-800 font-medium",children:["Showing products from: ",((N=ia.find(S=>S._id===Cs))==null?void 0:N.name)||"Subcategory"]}),e.jsx("button",{onClick:S=>{S.stopPropagation(),Ma(null),ll(Qs||"")},className:"mt-1 text-xs text-blue-600 hover:text-blue-800 underline",children:"Show all products from category and subcategories"})]}),e.jsxs("button",{onClick:S=>{S.stopPropagation(),Qs&&Cs&&mi(Qs,Cs)},className:"px-3 py-1.5 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1",children:[e.jsx(Ys,{size:14}),"Add Product to this Subcategory"]})]})}),$e?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Kt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-2 text-cream-600",children:"Loading products..."})]}):bn.length===0?e.jsx("div",{className:"text-center py-4 text-cream-600 text-sm bg-white rounded-lg",children:ia.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No products found directly in this category"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:Cs?"No products found in this subcategory. Click 'Add Product to this Category' to create one.":"Click on a subcategory above to view its products, or click 'Add Product to this Category' to add products directly to this category."})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No products found in this category"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:'Click "Add Product to this Category" to create one'})]})}):e.jsx("div",{className:"space-y-2",children:bn.map(S=>e.jsxs("div",{className:"border border-cream-200 rounded-lg p-3 bg-white hover:shadow-sm transition-shadow flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[S.image&&S.image.trim()!==""&&e.jsx("img",{src:S.image,alt:S.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-cream-900 text-sm",children:S.name}),e.jsx("p",{className:"text-xs text-cream-600 line-clamp-1",children:S.description||"No description"})]})]}),e.jsxs("button",{onClick:D=>{D.stopPropagation(),xi(S._id)},className:"px-3 py-1.5 text-xs bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-1",children:[e.jsx(Dn,{size:14}),"Edit"]})]},S._id))}),ia.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200",children:[e.jsxs("p",{className:"text-xs text-cream-500 mb-2 font-medium",children:["Subcategories (",ia.length,") - Drag to reorder, click to view products:"]}),e.jsxs("div",{className:"space-y-2",children:[(()=>{const S=(D,U=0)=>{const B=D.children&&D.children.length>0;return e.jsxs("div",{children:[e.jsx("div",{draggable:!0,onDragStart:q=>{st(D._id),q.dataTransfer.effectAllowed="move",q.dataTransfer.setData("text/plain",D._id)},onDragOver:q=>{q.preventDefault(),q.stopPropagation(),q.dataTransfer.dropEffect="move";const Z=q.currentTarget;ke&&ke!==D._id&&(Z.style.opacity="0.5",Z.style.borderColor="#d97706")},onDragEnter:q=>{q.preventDefault(),q.stopPropagation(),ke&&ke!==D._id&&(q.currentTarget.style.borderColor="#d97706")},onDragLeave:q=>{q.currentTarget.style.opacity="1",q.currentTarget.style.borderColor=""},onDrop:q=>{q.preventDefault(),q.stopPropagation(),q.currentTarget.style.opacity="1",q.currentTarget.style.borderColor="";const Z=q.dataTransfer.getData("text/plain");Z&&Z!==D._id&&Ec(Z,D._id)},onDragEnd:q=>{q.currentTarget.style.opacity="1",st(null)},className:`text-sm pl-3 py-2 rounded-lg border transition-colors cursor-move ${Cs===D._id?"bg-cream-200 border-cream-400 text-cream-900 font-medium":"bg-white border-cream-200 text-cream-700 hover:bg-cream-100 hover:border-cream-300"} ${ke===D._id?"opacity-50":""}`,style:{marginLeft:`${U*20}px`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"cursor-move text-cream-400 hover:text-cream-600",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M7 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 2zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 14zm6-8a2 2 0 1 1-.001-4.001A2 2 0 0 1 13 6zm0 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 14z"})})}),e.jsxs("div",{onClick:q=>Oi(D._id,q),className:"flex items-center gap-2 flex-1 cursor-pointer",children:[e.jsx(Ha,{size:14,className:`transition-transform ${Cs===D._id?"rotate-90":""}`}),e.jsx("span",{children:D.name}),U>0&&e.jsx("span",{className:"text-xs text-purple-600 font-medium",children:"(nested)"}),D.sortOrder!==void 0&&D.sortOrder!==null&&e.jsxs("span",{className:"text-xs text-cream-500",children:["(Order: ",D.sortOrder,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Cs===D._id&&e.jsxs("span",{className:"text-xs text-cream-600 mr-2",children:[bn.length," product",bn.length!==1?"s":""]}),e.jsx("button",{onClick:q=>{q.stopPropagation(),hn({isOpen:!0,type:"subcategory",name:D.name,description:D.description||"No description available."})},disabled:d,className:"px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors disabled:opacity-50 flex items-center gap-1",title:"View Description",children:e.jsx(kr,{size:14})}),e.jsx("button",{onClick:async q=>{q.stopPropagation(),q.preventDefault();try{await Gn(D._id)}catch(Z){console.error("Error editing subcategory:",Z),f("Failed to load subcategory for editing")}},disabled:d,className:"px-2 py-1 bg-cream-200 text-cream-900 rounded hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-1",title:"Edit Subcategory",children:e.jsx(Dn,{size:14})}),e.jsx("button",{onClick:q=>{q.stopPropagation(),rn(D._id)},disabled:d,className:"px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-1",title:"Delete Subcategory",children:e.jsx(ta,{size:14})})]})]})}),B&&e.jsx("div",{className:"mt-1",children:D.children.sort((q,Z)=>(q.sortOrder||0)-(Z.sortOrder||0)).map(q=>S(q,U+1))})]},D._id)};return ia.sort((D,U)=>(D.sortOrder||0)-(U.sortOrder||0)).map(D=>S(D,0))})(),!1]})]})]}):null})()]})]}),i==="attribute-types"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:Un?"Edit Attribute Type":"Create Attribute Type"}),e.jsxs("form",{onSubmit:hi,className:"space-y-6 bg-white p-6 rounded-lg border border-cream-200",children:[u&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:u})}),g&&e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 font-medium",children:g})}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Name * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(What customers will see)"})]}),e.jsx("input",{type:"text",id:"attribute-name",value:K.attributeName,onChange:c=>{ft({...K,attributeName:c.target.value}),z.attributeName&&P({...z,attributeName:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${z.attributeName?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Printing Option, Paper Type",required:!0}),z.attributeName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.attributeName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["How Customers Select This * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Input method)"})]}),e.jsxs("select",{id:"attribute-inputStyle",value:K.inputStyle,onChange:c=>{ft({...K,inputStyle:c.target.value}),z.inputStyle&&P({...z,inputStyle:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${z.inputStyle?"border-red-300 bg-red-50":"border-cream-300"}`,required:!0,children:[e.jsx("option",{value:"DROPDOWN",children:"Dropdown Menu"}),e.jsx("option",{value:"POPUP",children:"Pop-Up"}),e.jsx("option",{value:"RADIO",children:"Radio Buttons"}),e.jsx("option",{value:"CHECKBOX",children:"Checkbox"}),e.jsx("option",{value:"TEXT_FIELD",children:"Text Field"}),e.jsx("option",{value:"NUMBER",children:"Number Input"}),e.jsx("option",{value:"FILE_UPLOAD",children:"File Upload"})]}),z.inputStyle&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.inputStyle})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Image ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(to be shown when selecting this attribute)"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:c=>{var N;const b=((N=c.target.files)==null?void 0:N[0])||null;if(b){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(b.type)){f("Invalid image format. Please upload JPG, PNG, or WebP image."),c.target.value="",ft({...K,attributeImage:null});return}const D=5*1024*1024;if(b.size>D){f("Image size must be less than 5MB. Please compress the image and try again."),c.target.value="",ft({...K,attributeImage:null});return}f(null)}ft({...K,attributeImage:b})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent"}),K.attributeImage&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:URL.createObjectURL(K.attributeImage),alt:"Attribute preview",className:"w-32 h-32 object-cover rounded-lg border border-cream-300"}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[K.attributeImage.name," (",(K.attributeImage.size/1024).toFixed(2)," KB)"]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["What This Affects * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Description of impact on product)"})]}),e.jsx("textarea",{id:"attribute-primaryEffectType",value:K.effectDescription,onChange:c=>{ft({...K,effectDescription:c.target.value}),z.primaryEffectType&&P({...z,primaryEffectType:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${z.primaryEffectType?"border-red-300 bg-red-50":"border-cream-300"}`,rows:3,placeholder:"e.g., Changes the product price, Requires customer to upload a file, Creates different product versions, Just displays information",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Describe how this attribute affects the product or customer experience"}),z.primaryEffectType&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.primaryEffectType})]})]}),K.inputStyle==="DROPDOWN"||K.inputStyle==="RADIO"||K.isPriceEffect?e.jsxs("div",{className:"border-b border-cream-200 pb-4","data-attribute-options-table":!0,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Options"}),e.jsxs("button",{type:"button",onClick:()=>{ft({...K,attributeOptionsTable:[...K.attributeOptionsTable,{name:"",priceImpactPer1000:"",image:void 0,optionUsage:{price:!1,image:!1,listing:!1},priceImpact:"",numberOfImagesRequired:0,listingFilters:""}]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:16}),"Add Option"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:K.attributeOptionsTable.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No options added. Click "Add Option" to start.'}):e.jsxs("div",{className:"overflow-x-auto",children:[z.attributeValues&&e.jsx("div",{className:"mb-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:z.attributeValues})}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Name *"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Usage *"}),K.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.price})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Impact"}),K.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.image})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Number of Images Required"}),K.attributeOptionsTable.some(c=>{var b;return(b=c.optionUsage)==null?void 0:b.listing})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Listing Filters"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Image (Optional)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:(K.attributeOptionsTable||[]).map((c,b)=>{var N,S,D,U,B,q;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:c.name,onChange:Z=>{const te=[...K.attributeOptionsTable];te[b].name=Z.target.value,ft({...K,attributeOptionsTable:te})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Both Sides, Express Delivery",required:!0})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((N=c.optionUsage)==null?void 0:N.price)||!1,onChange:Z=>{const te=[...K.attributeOptionsTable];if(te[b].optionUsage||(te[b].optionUsage={price:!1,image:!1,listing:!1}),te[b].optionUsage.price=Z.target.checked,!Z.target.checked&&!te[b].optionUsage.image&&!te[b].optionUsage.listing){f("At least one option usage must be selected (Price, Image, or Listing)");return}ft({...K,attributeOptionsTable:te}),f(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Price"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((S=c.optionUsage)==null?void 0:S.image)||!1,onChange:Z=>{const te=[...K.attributeOptionsTable];if(te[b].optionUsage||(te[b].optionUsage={price:!1,image:!1,listing:!1}),te[b].optionUsage.image=Z.target.checked,!Z.target.checked&&!te[b].optionUsage.price&&!te[b].optionUsage.listing){f("At least one option usage must be selected (Price, Image, or Listing)");return}ft({...K,attributeOptionsTable:te}),f(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Image"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((D=c.optionUsage)==null?void 0:D.listing)||!1,onChange:Z=>{const te=[...K.attributeOptionsTable];if(te[b].optionUsage||(te[b].optionUsage={price:!1,image:!1,listing:!1}),te[b].optionUsage.listing=Z.target.checked,!Z.target.checked&&!te[b].optionUsage.price&&!te[b].optionUsage.image){f("At least one option usage must be selected (Price, Image, or Listing)");return}ft({...K,attributeOptionsTable:te}),f(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Listing"})]})]})}),K.attributeOptionsTable.some(Z=>{var te;return(te=Z.optionUsage)==null?void 0:te.price})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(U=c.optionUsage)!=null&&U.price?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-cream-700",children:""}),e.jsx("input",{type:"number",value:c.priceImpact||"",onChange:Z=>{const te=[...K.attributeOptionsTable];te[b].priceImpact=Z.target.value,ft({...K,attributeOptionsTable:te})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter amount",step:"0.01",min:"0"})]}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),K.attributeOptionsTable.some(Z=>{var te;return(te=Z.optionUsage)==null?void 0:te.image})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(B=c.optionUsage)!=null&&B.image?e.jsx("input",{type:"number",value:c.numberOfImagesRequired||0,onChange:Z=>{const te=[...K.attributeOptionsTable];te[b].numberOfImagesRequired=parseInt(Z.target.value)||0,ft({...K,attributeOptionsTable:te})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Number of images",min:"0"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),K.attributeOptionsTable.some(Z=>{var te;return(te=Z.optionUsage)==null?void 0:te.listing})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(q=c.optionUsage)!=null&&q.listing?e.jsx("input",{type:"text",value:c.listingFilters||"",onChange:Z=>{const te=[...K.attributeOptionsTable];te[b].listingFilters=Z.target.value,ft({...K,attributeOptionsTable:te})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter filters (comma-separated)"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:async Z=>{var Oe;const te=(Oe=Z.target.files)==null?void 0:Oe[0];if(te){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(te.type)){f("Invalid image format. Please upload JPG, PNG, or WebP image.");return}if(te.size>5*1024*1024){f("Image size must be less than 5MB.");return}try{m(!0);const Nt=new FormData;Nt.append("image",te);const Ht=await fetch(`${Te}/upload-image`,{method:"POST",headers:Tt(),body:Nt});if(!Ht.ok){const Yt=await Ht.json().catch(()=>({}));throw new Error(Yt.error||"Failed to upload image")}const Et=await Ht.json(),Ct=Et.url||Et.secure_url;if(!Ct)throw new Error("No image URL returned from server");const wt=[...K.attributeOptionsTable];wt[b].image=Ct,ft({...K,attributeOptionsTable:wt}),f(null)}catch(Nt){console.error("Error uploading image:",Nt),f(Nt instanceof Error?Nt.message:"Failed to upload image. Please try again.")}finally{m(!1)}}},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm"}),c.image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded border border-cream-200"}),e.jsx("button",{type:"button",onClick:()=>{const Z=[...K.attributeOptionsTable];Z[b].image=void 0,ft({...K,attributeOptionsTable:Z})},className:"mt-1 text-xs text-red-600 hover:text-red-800",children:"Remove"})]})]}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>{const Z=K.attributeOptionsTable.filter((te,Oe)=>Oe!==b);ft({...K,attributeOptionsTable:Z})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})})]},b)})})]})]})}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Add all options customers can choose from. If "Is Price Effect" is checked, enter the price impact per 1000 units for each option.'})]}):null,e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Additional Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isPriceEffect,onChange:c=>ft({...K,isPriceEffect:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Price Effect?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if selecting this attribute changes the product price"}),K.isPriceEffect&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Price Effect Amount ( per 1000 units) *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg text-cream-700",children:""}),e.jsx("input",{type:"number",value:K.priceEffectAmount,onChange:c=>ft({...K,priceEffectAmount:c.target.value}),className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg",placeholder:"e.g., 20 (means +20 per 1000 units)",step:"0.00001",min:"0",required:K.isPriceEffect}),e.jsx("span",{className:"text-sm text-cream-600",children:"per 1000 units"})]}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Enter how much the price changes per 1000 units. Example: "20" means +20 for every 1000 units.'})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isStepQuantity,onChange:c=>ft({...K,isStepQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Step Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific steps (e.g., 1000, 2000, 3000 only)"}),K.isStepQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Steps:"}),e.jsxs("button",{type:"button",onClick:()=>{ft({...K,stepQuantities:[...K.stepQuantities,{quantity:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Ys,{size:14}),"Add Step"]})]}),K.stepQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No steps added. Click "Add Step" to start.'}):e.jsx("div",{className:"space-y-2",children:K.stepQuantities.map((c,b)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Step - ",b+1,":"]}),e.jsx("input",{type:"number",value:c.quantity,onChange:N=>{const S=[...K.stepQuantities];S[b].quantity=N.target.value,ft({...K,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"quantity of step",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...K.stepQuantities];S[b].price=N.target.value,ft({...K,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of step",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=K.stepQuantities.filter((S,D)=>D!==b);ft({...K,stepQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})]},b))})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isRangeQuantity,onChange:c=>ft({...K,isRangeQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Range Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific Range (e.g., 1000-2000, 2000-5000)"}),K.isRangeQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Ranges:"}),e.jsxs("button",{type:"button",onClick:()=>{ft({...K,rangeQuantities:[...K.rangeQuantities,{min:"",max:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Ys,{size:14}),"Add Range"]})]}),K.rangeQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No ranges added. Click "Add Range" to start.'}):e.jsx("div",{className:"space-y-2",children:K.rangeQuantities.map((c,b)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Range - ",b+1,":"]}),e.jsx("input",{type:"number",value:c.min,onChange:N=>{const S=[...K.rangeQuantities];S[b].min=N.target.value,ft({...K,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"min quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700",children:"-"}),e.jsx("input",{type:"number",value:c.max,onChange:N=>{const S=[...K.rangeQuantities];S[b].max=N.target.value,ft({...K,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"max quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...K.rangeQuantities];S[b].price=N.target.value,ft({...K,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of range",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=K.rangeQuantities.filter((S,D)=>D!==b);ft({...K,rangeQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})]},b))})]})]})]})]})]}),K.primaryEffectType==="FILE"&&e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"File Requirements"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"File Requirements Description"}),e.jsx("textarea",{value:K.fileRequirements,onChange:c=>ft({...K,fileRequirements:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg",rows:3,placeholder:"e.g., Upload your design file (JPG, PNG, PDF). Minimum 300 DPI recommended."}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:"Describe what type of file customers need to upload and any requirements (format, size, resolution, etc.)"})]})]}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isFilterable,onChange:c=>ft({...K,isFilterable:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Allow Filtering"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers can filter products by this attribute (e.g., filter by color, size, etc.)"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isRequired,onChange:c=>ft({...K,isRequired:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Required Selection"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers must select an option before they can place an order"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:K.isCommonAttribute,onChange:c=>ft({...K,isCommonAttribute:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Available for All Products"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute can be used with any product. Uncheck to restrict to specific categories/subcategories."})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Saving...":Un?"Update Attribute Type":"Create Attribute Type"}),Un&&e.jsx("button",{type:"button",onClick:()=>{al(null),ft({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,isFixedQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[]})},className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-cream-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900",children:"All Attribute Types"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:Ga,onChange:c=>ii(c.target.value),placeholder:"Search attribute types...",className:"pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 w-64"}),e.jsx(fn,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500"})]}),e.jsx("div",{className:"text-sm text-cream-600",children:`${At.filter(b=>{var N,S,D;return!Ga||((N=b.attributeName)==null?void 0:N.toLowerCase().includes(Ga.toLowerCase()))||((S=b.inputStyle)==null?void 0:S.toLowerCase().includes(Ga.toLowerCase()))||((D=b.primaryEffectType)==null?void 0:D.toLowerCase().includes(Ga.toLowerCase()))}).length} of ${At.length}`})]})]}),Rr?e.jsx("div",{className:"text-center py-8",children:e.jsx(Kt,{className:"animate-spin text-cream-900 mx-auto",size:32})}):At.length===0?e.jsx("div",{className:"text-center py-8 bg-cream-50 rounded-lg border border-cream-200",children:e.jsx("p",{className:"text-cream-600",children:"No attribute types found. Create one above."})}):e.jsx("div",{className:"bg-white rounded-lg border border-cream-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-cream-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Input Style"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Effect Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Pricing"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Common"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-cream-200",children:At.filter(c=>{var b,N,S;return!Ga||((b=c.attributeName)==null?void 0:b.toLowerCase().includes(Ga.toLowerCase()))||((N=c.inputStyle)==null?void 0:N.toLowerCase().includes(Ga.toLowerCase()))||((S=c.primaryEffectType)==null?void 0:S.toLowerCase().includes(Ga.toLowerCase()))}).map(c=>e.jsxs("tr",{className:"hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900",children:c.attributeName}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.inputStyle}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.primaryEffectType}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.isPricingAttribute?"Yes":"No"}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.isCommonAttribute?"Yes":"No"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>ou(c._id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:e.jsx(Dn,{size:16})}),e.jsx("button",{onClick:()=>Co(c._id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})]})})]},c._id))})]})})})]})]}),i==="departments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:qn?"Edit Department":"Create Department"}),e.jsxs("form",{onSubmit:Wm,className:"space-y-6 bg-white p-6 rounded-lg border border-cream-200",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Department Name *"}),e.jsx("input",{id:"department-name",name:"name",type:"text",required:!0,value:jr.name,onChange:c=>{ki({...jr,name:c.target.value}),J.name&&W({...J,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${J.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Prepress, Digital Printing"}),J.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),J.name]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description"}),e.jsx("textarea",{value:jr.description,onChange:c=>ki({...jr,description:c.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"Brief description of department responsibilities"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:jr.isEnabled,onChange:c=>ki({...jr,isEnabled:c.target.checked}),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm font-medium text-cream-900",children:"Enabled"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Assign Operators (Optional)"}),e.jsxs("button",{type:"button",onClick:()=>et(!0),className:"px-3 py-1.5 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1.5",children:[e.jsx(gd,{size:14}),"Create Employee"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-2",children:"Select employees who can perform actions for this department. Only employees can be assigned. Leave empty to allow all authenticated users."}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-200 rounded-lg p-3",children:hs.length===0?e.jsx("p",{className:"text-sm text-cream-600",children:"No employees available. Create users and mark them as employees first."}):hs.map(c=>{const b=jr.operators.some(S=>String(S)===String(c._id)),N=Qa.filter(S=>!S.operators||S.operators.length===0?!1:S.operators.some(D=>{const U=typeof D=="object"&&(D._id||D.id)||String(D);return String(U)===String(c._id)})).map(S=>S.name);return e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-cream-50 border border-cream-200 rounded-lg hover:bg-cream-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:S=>{S.target.checked?ki({...jr,operators:[...jr.operators,c._id]}):ki({...jr,operators:jr.operators.filter(D=>String(D)!==String(c._id))})},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:c.name}),e.jsxs("p",{className:"text-xs text-cream-600",children:[c.email,N.length>0&&e.jsxs("span",{className:"ml-1 text-cream-500",children:["(",N.join(", "),")"]})]})]}),b&&e.jsx(Xa,{className:"text-cream-900",size:20})]},c._id)})})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:20}),qn?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ys,{size:20}),qn?"Update Department":"Create Department"]})})]})]}),e.jsxs("div",{className:"border-t border-cream-300 pt-6",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["All Departments (",Qa.length,")"]}),e.jsx("button",{onClick:Lr,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Refresh"})]}),tu?e.jsx("div",{className:"text-center py-8",children:e.jsx(Kt,{className:"animate-spin text-cream-900 mx-auto",size:32})}):Qa.length===0?e.jsxs("div",{className:"text-center py-8 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx(Rn,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-cream-600",children:"No departments found. Create one above."})]}):e.jsx("div",{className:"bg-white rounded-lg border border-cream-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-cream-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Operators"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-cream-200",children:Qa.sort((c,b)=>(c.name||"").localeCompare(b.name||"")).map(c=>e.jsxs("tr",{className:"hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900 font-semibold",children:c.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.description||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${c.isEnabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.isEnabled?"Enabled":"Disabled"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.operators&&c.operators.length>0?`${c.operators.length} operator(s)`:"All users"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>wr(c._id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:e.jsx(Dn,{size:16})}),e.jsx("button",{onClick:()=>Dc(c._id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ta,{size:16})})]})})]},c._id))})]})})})]})]}),i==="sequences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:vr?"Edit Sequence":"Create Sequence"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Create production sequences for categories/subcategories. Select departments in order - first selected gets sequence 1, second gets 2, etc."}),vr&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Sequence: ",Bt.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:()=>{Sc(null),or({name:"",printType:"",category:"",subcategory:"",selectedDepartments:[],selectedAttributes:[]})},className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),e.jsxs("form",{onSubmit:cu,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Sequence Name *"}),e.jsx("input",{id:"sequence-name",name:"name",type:"text",required:!0,value:Bt.name,onChange:c=>{or({...Bt,name:c.target.value}),oe.name&&ce({...oe,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${oe.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Standard Printing Sequence"}),oe.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),oe.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Print Type *"}),e.jsx(Ea,{id:"sequence-printType",label:"Select Print Type",value:Bt.printType,onChange:c=>{or({...Bt,printType:String(c),category:"",subcategory:""}),oe.printType&&ce({...oe,printType:void 0})},options:[{value:"",label:"Select Print Type"},{value:"digital",label:"Digital Print"},{value:"bulk",label:"Bulk Print"}],className:"w-full"}),oe.printType&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Ts,{size:12}),oe.printType]})]}),(Bt.printType==="digital"||Bt.printType==="bulk")&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Category *"}),e.jsx(Ea,{id:"sequence-category",label:"Select Category",value:String(Bt.category||""),onChange:c=>{or({...Bt,category:String(c),subcategory:""})},options:[{value:"",label:"Select Category"},...Be.filter(c=>!c.parent||c.parent===null||typeof c.parent=="object"&&!c.parent._id?Bt.printType==="digital"?c.type==="Digital"||c.type==="digital":Bt.printType==="bulk"?c.type==="Bulk"||c.type==="bulk":!1:!1).map(c=>({value:c._id,label:c.name}))],className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory ",Bt.category?"*":"(Optional)"]}),e.jsx(Ea,{label:"Select Subcategory",value:Bt.subcategory,onChange:c=>or({...Bt,subcategory:String(c)}),options:[{value:"",label:"Select Subcategory (Optional)"},...kt.filter(c=>{if(!Bt.category)return!1;const b=c.category?typeof c.category=="object"&&c.category!==null?c.category._id:c.category:null;return String(b)===String(Bt.category)}).sort((c,b)=>(c.sortOrder||0)-(b.sortOrder||0)).map(c=>({value:c._id,label:c.name}))],className:"w-full"})]})]})}),e.jsxs("div",{id:"sequence-departments",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Select Departments (in order) *"}),e.jsxs("button",{type:"button",onClick:()=>Us(!0),className:"px-3 py-1.5 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1.5",children:[e.jsx(Rn,{size:14}),"Create Department"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-3",children:"Check departments in the order they should process. First checked = Sequence 1, second = Sequence 2, etc."}),Qa.length===0?e.jsx("div",{className:"p-4 bg-cream-50 border border-cream-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:"No departments available. Please create departments first."})}):e.jsx("div",{className:"border border-cream-300 rounded-lg p-4 bg-white max-h-96 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:(Qa||[]).filter(c=>c.isEnabled).map(c=>{const b=Bt.selectedDepartments||[],N=b.includes(c._id),S=b.indexOf(c._id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg transition-colors ${N?"border-green-500 bg-green-50":"border-cream-200 bg-white hover:bg-cream-50"}`,children:[e.jsx("input",{type:"checkbox",checked:N,onChange:()=>Pc(c._id),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-green-500 text-white rounded-full text-xs font-bold",children:S+1}),e.jsx("span",{className:"font-medium text-cream-900",children:c.name})]}),c.operators&&c.operators.length>0&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xs font-medium text-cream-700",children:"Operators:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-0.5",children:c.operators.map(D=>e.jsx("span",{className:"text-xs text-cream-600 bg-cream-100 px-2 py-0.5 rounded",children:D&&typeof D=="object"?D.name:"N/A"},D&&typeof D=="object"?D._id:D))})]}),(!c.operators||c.operators.length===0)&&e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"No operators assigned"})]})]},c._id)})})}),Bt.selectedDepartments&&Bt.selectedDepartments.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Selected Sequence:"}),e.jsx("div",{className:"space-y-1",children:Bt.selectedDepartments.map((c,b)=>{const N=Qa.find(S=>S._id===c);return N?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-800",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-blue-500 text-white rounded-full text-xs font-bold",children:b+1}),e.jsx("span",{children:N.name})]},c):null})})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Select Attributes (Optional)"}),e.jsx("p",{className:"text-xs text-cream-600 mb-3",children:"Select attribute types that should be automatically assigned when this sequence is used for a product."}),Rr?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Kt,{className:"animate-spin text-cream-600",size:20}),e.jsx("span",{className:"ml-2 text-sm text-cream-600",children:"Loading attributes..."})]}):!At||At.length===0?e.jsx("div",{className:"p-4 bg-cream-50 border border-cream-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:'No attribute types available. Create attribute types first in the "Attribute Types" tab.'})}):e.jsx("div",{className:"border border-cream-300 rounded-lg p-4 bg-white max-h-96 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:At.map(c=>{const b=(Bt.selectedAttributes||[]).includes(c._id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg transition-colors ${b?"border-green-500 bg-green-50":"border-cream-200 bg-white hover:bg-cream-50"}`,children:[e.jsx("input",{type:"checkbox",checked:b,onChange:N=>{N.target.checked?or({...Bt,selectedAttributes:[...Bt.selectedAttributes||[],c._id]}):or({...Bt,selectedAttributes:(Bt.selectedAttributes||[]).filter(S=>S!==c._id)})},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-cream-900",children:c.attributeName}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[c.inputStyle||"N/A","  ",c.primaryEffectType||"N/A"," "," ",c.isPricingAttribute?"Affects Price":"No Price Impact"]})]})})})]},c._id)})})}),Bt.selectedAttributes&&Bt.selectedAttributes.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Selected Attributes:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Bt.selectedAttributes.map(c=>{const b=At.find(N=>N._id===c);return b?e.jsx("span",{className:"text-xs text-blue-800 bg-blue-100 px-2 py-1 rounded",children:b.attributeName},c):null})})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:20}),vr?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ys,{size:20}),vr?"Update Sequence":"Create Sequence"]})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:"All Sequences"}),au?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Kt,{className:"animate-spin mx-auto mb-4 text-cream-900",size:32}),e.jsx("p",{className:"text-cream-600",children:"Loading sequences..."})]}):!di||di.length===0?e.jsxs("div",{className:"text-center py-12 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx(Er,{size:48,className:"mx-auto mb-4 text-cream-400"}),e.jsx("p",{className:"text-cream-600",children:"No sequences found. Create one to get started!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(di||[]).map(c=>e.jsxs("div",{className:"bg-white border border-cream-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-cream-900 mb-1",children:c.name}),e.jsxs("p",{className:"text-xs text-cream-600 mb-1",children:["Category: ",c.category&&typeof c.category=="object"&&c.category!==null?c.category.name:"N/A"]}),e.jsxs("p",{className:"text-xs text-cream-600 mb-2",children:["Subcategory: ",c.subcategory&&typeof c.subcategory=="object"&&c.subcategory!==null?c.subcategory.name:"N/A"]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-medium text-cream-700 mb-1",children:"Department Order:"}),e.jsx("div",{className:"space-y-1",children:(c.departments||[]).sort((b,N)=>(b.order||0)-(N.order||0)).map((b,N)=>{const S=typeof b.department=="object"?b.department:Qa.find(D=>D._id===b.department);return S?e.jsxs("div",{className:"text-xs mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-cream-600 mb-1",children:[e.jsx("span",{className:"flex items-center justify-center w-5 h-5 bg-cream-900 text-white rounded-full text-xs font-bold",children:b.order||N+1}),e.jsx("span",{className:"font-medium",children:S.name})]}),S.operators&&S.operators.length>0?e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-xs font-medium text-cream-700 mb-0.5",children:"Operators:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:S.operators.map(D=>e.jsx("span",{className:"text-xs text-cream-600 bg-cream-100 px-2 py-0.5 rounded",children:D&&typeof D=="object"?D.name:"N/A"},D&&typeof D=="object"?D._id:D))})]}):e.jsx("div",{className:"ml-7",children:e.jsx("p",{className:"text-xs text-cream-500",children:"No operators assigned"})})]},N):null})})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>Ao(c._id),disabled:d,className:"px-3 py-1.5 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2 text-sm",children:[e.jsx(Dn,{size:16}),"Edit"]}),e.jsxs("button",{onClick:()=>_i(c._id),disabled:d,className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2 text-sm",children:[e.jsx(ta,{size:16}),"Delete"]})]})]},c._id))})]})]}),i==="attribute-rules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Attribute Rules (",gc.length,")"]}),e.jsxs("button",{onClick:()=>{wo(),bo(!0)},className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:18}),"Create Rule"]})]}),Vm?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Kt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-3 text-sm text-cream-600",children:"Loading rules..."})]}):gc.length===0?e.jsx("div",{className:"text-center py-8 text-cream-600",children:e.jsx("p",{children:"No attribute rules found. Create your first rule to get started."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100 border-b border-cream-300",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Rule Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Scope"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Condition"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Actions"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Priority"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{children:gc.sort((c,b)=>(b.priority||0)-(c.priority||0)).map(c=>{var D,U,B,q,Z;const b=(c.then||[]).filter(te=>te&&te.targetAttribute),N=typeof((D=c.when)==null?void 0:D.attribute)=="object"&&c.when.attribute!==null?c.when.attribute.attributeName:((U=At.find(te=>{var Oe;return te._id===((Oe=c.when)==null?void 0:Oe.attribute)}))==null?void 0:U.attributeName)||"Unknown",S=c.applicableProduct?`Product: ${typeof c.applicableProduct=="object"&&c.applicableProduct!==null&&c.applicableProduct.name?c.applicableProduct.name:((B=Ft.find(te=>te._id===(typeof c.applicableProduct=="object"&&c.applicableProduct!==null?c.applicableProduct._id:c.applicableProduct)))==null?void 0:B.name)||"N/A"}`:c.applicableCategory?`Category: ${typeof c.applicableCategory=="object"&&c.applicableCategory!==null&&c.applicableCategory.name?c.applicableCategory.name:((q=Be.find(te=>te._id===(typeof c.applicableCategory=="object"&&c.applicableCategory!==null?c.applicableCategory._id:c.applicableCategory)))==null?void 0:q.name)||"N/A"}`:"Global";return e.jsxs("tr",{className:"border-b border-cream-200 hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900 font-medium",children:c.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:S}),e.jsxs("td",{className:"px-4 py-3 text-sm text-cream-700",children:["IF ",N," = ",((Z=c.when)==null?void 0:Z.value)||""]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-cream-700",children:[b.length," action",b.length!==1?"s":""]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.isActive?"Active":"Disabled"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.priority||0}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>lu(c),className:"px-2 py-1 text-sm bg-cream-200 text-cream-900 rounded hover:bg-cream-300 transition-colors",children:e.jsx(Dn,{size:14})}),e.jsx("button",{onClick:()=>Ym(c),className:"px-2 py-1 text-sm bg-cream-100 text-cream-900 rounded hover:bg-cream-200 transition-colors",title:"Duplicate rule",children:e.jsx(Uh,{size:14})}),e.jsx("button",{onClick:()=>Qm(c._id),className:"px-2 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:e.jsx(ta,{size:14})})]})})]},c._id)})})]})}),Bm&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-cream-200 p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-cream-900",children:In?"Edit Rule":"Create Rule"}),e.jsx("button",{onClick:wo,className:"text-cream-600 hover:text-cream-900",children:e.jsx(ns,{size:24})})]}),e.jsxs("form",{onSubmit:iu,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Rule Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Rule Name *"}),e.jsx("input",{type:"text",value:$t.name,onChange:c=>za({...$t,name:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"e.g., 350 GSM Rule",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Priority *"}),e.jsx("input",{type:"number",value:$t.priority,onChange:c=>za({...$t,priority:parseInt(c.target.value)||0}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"0",required:!0}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Higher priority rules are evaluated first"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Scope *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"GLOBAL",checked:$t.scope==="GLOBAL",onChange:c=>za({...$t,scope:"GLOBAL",scopeRefId:""}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Global (applies to all products)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"CATEGORY",checked:$t.scope==="CATEGORY",onChange:c=>za({...$t,scope:"CATEGORY",scopeRefId:""}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Category"})]}),$t.scope==="CATEGORY"&&e.jsxs("select",{value:$t.scopeRefId,onChange:c=>za({...$t,scopeRefId:c.target.value}),className:"ml-6 w-full max-w-md px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),Be.map(c=>e.jsx("option",{value:c._id,children:c.name},c._id))]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"PRODUCT",checked:$t.scope==="PRODUCT",onChange:c=>za({...$t,scope:"PRODUCT",scopeRefId:""}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Product"})]}),$t.scope==="PRODUCT"&&e.jsxs("select",{value:$t.scopeRefId,onChange:c=>za({...$t,scopeRefId:c.target.value}),className:"ml-6 w-full max-w-md px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Product"}),Ft.map(c=>e.jsx("option",{value:c._id,children:c.name},c._id))]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:$t.isActive,onChange:c=>za({...$t,isActive:c.target.checked}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Active"})]})})]}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900 mb-4",children:"IF Condition (WHEN)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Attribute *"}),e.jsxs("select",{value:$t.when.attribute,onChange:c=>{za({...$t,when:{...$t.when,attribute:c.target.value,value:""}})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Attribute"}),At.map(c=>e.jsx("option",{value:c.attributeName,children:c.attributeName},c._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Value *"}),e.jsxs("select",{value:$t.when.value,onChange:c=>za({...$t,when:{...$t.when,value:c.target.value}}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!$t.when.attribute,children:[e.jsx("option",{value:"",children:"Select Value"}),(()=>{var b;const c=At.find(N=>N.attributeName===$t.when.attribute);return((b=c==null?void 0:c.attributeValues)==null?void 0:b.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value)))||[]})()]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900",children:"THEN Actions"}),e.jsxs("button",{type:"button",onClick:()=>{za({...$t,then:[...$t.then,{action:"SHOW",targetAttribute:""}]})},className:"px-3 py-1.5 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2 text-sm",children:[e.jsx(Ys,{size:16}),"Add Action"]})]}),$t.then.length===0?e.jsx("p",{className:"text-sm text-cream-600 italic",children:"No actions defined. Add at least one action."}):e.jsx("div",{className:"space-y-4",children:$t.then.map((c,b)=>{const N=At.find(D=>D.attributeName===c.targetAttribute),S=(N==null?void 0:N.attributeValues)||[];return e.jsxs("div",{className:"border border-cream-200 rounded-lg p-4 bg-cream-50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("span",{className:"text-sm font-medium text-cream-900",children:["Action ",b+1]}),e.jsx("button",{type:"button",onClick:()=>{za({...$t,then:$t.then.filter((D,U)=>U!==b)})},className:"text-red-600 hover:text-red-800",children:e.jsx(ns,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Action Type *"}),e.jsxs("select",{value:c.action,onChange:D=>{const U=[...$t.then];U[b]={...c,action:D.target.value,allowedValues:D.target.value==="SHOW_ONLY"?[]:c.allowedValues,defaultValue:D.target.value==="SET_DEFAULT"?"":c.defaultValue},za({...$t,then:U})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"SHOW",children:"SHOW"}),e.jsx("option",{value:"HIDE",children:"HIDE"}),e.jsx("option",{value:"SHOW_ONLY",children:"SHOW_ONLY"}),e.jsx("option",{value:"SET_DEFAULT",children:"SET_DEFAULT"}),e.jsx("option",{value:"TRIGGER_PRICING",children:"TRIGGER_PRICING"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Target Attribute *"}),e.jsxs("select",{value:c.targetAttribute,onChange:D=>{const U=[...$t.then];U[b]={...c,targetAttribute:D.target.value},za({...$t,then:U})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Attribute"}),At.filter(D=>D.attributeName!==$t.when.attribute).map(D=>e.jsx("option",{value:D.attributeName,children:D.attributeName},D._id))]})]})]}),c.action==="SHOW_ONLY"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Allowed Values * (Select multiple)"}),e.jsx("div",{className:"border border-cream-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:S.length===0?e.jsx("p",{className:"text-sm text-cream-600 italic",children:"No values available for this attribute"}):e.jsx("div",{className:"space-y-2",children:S.map(D=>{var U;return e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:((U=c.allowedValues)==null?void 0:U.includes(D.value))||!1,onChange:B=>{const q=[...$t.then],Z=c.allowedValues||[];B.target.checked?q[b]={...c,allowedValues:[...Z,D.value]}:q[b]={...c,allowedValues:Z.filter(te=>te!==D.value)},za({...$t,then:q})},className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:D.label})]},D.value)})})})]}),c.action==="SET_DEFAULT"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Default Value *"}),e.jsxs("select",{value:c.defaultValue||"",onChange:D=>{const U=[...$t.then];U[b]={...c,defaultValue:D.target.value},za({...$t,then:U})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!c.targetAttribute,children:[e.jsx("option",{value:"",children:"Select Default Value"}),S.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))]})]})]},b)})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-cream-200",children:[e.jsx("button",{type:"button",onClick:wo,className:"px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center gap-2",children:[d&&e.jsx(Kt,{className:"animate-spin",size:16}),In?"Update Rule":"Create Rule"]})]})]})]})}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-cream-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-cream-900",children:["Sub-Attributes (",yo.length,")"]}),e.jsxs("button",{onClick:()=>{fi(),ci([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}]),vc(!0)},className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:18}),"Create Sub-Attributes"]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Filter by Attribute"}),e.jsxs("select",{value:Bn.attributeId,onChange:c=>{eu({...Bn,attributeId:c.target.value})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",children:[e.jsx("option",{value:"",children:"All Attributes"}),At.map(c=>e.jsx("option",{value:c._id,children:c.attributeName},c._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Filter by Parent Value"}),e.jsx("input",{type:"text",value:Bn.parentValue,onChange:c=>{eu({...Bn,parentValue:c.target.value})},placeholder:"e.g., custom-shape-",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("button",{onClick:()=>Zl(),className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors text-sm",children:"Apply Filters"})}),qm?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Kt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-3 text-sm text-cream-600",children:"Loading sub-attributes..."})]}):yo.length===0?e.jsx("div",{className:"text-center py-8 text-cream-600",children:e.jsx("p",{children:"No sub-attributes found. Create your first sub-attribute to get started."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100 border-b border-cream-300",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Parent Attribute"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Parent Value"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Value"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Label"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Image"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Price Addition"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{children:yo.map(c=>{var N;const b=typeof c.parentAttribute=="object"&&c.parentAttribute!==null?c.parentAttribute.attributeName:((N=At.find(S=>S._id===c.parentAttribute))==null?void 0:N.attributeName)||"Unknown";return e.jsxs("tr",{className:"border-b border-cream-200 hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900",children:b}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.parentValue}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.value}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.label}),e.jsx("td",{className:"px-4 py-3",children:c.image?e.jsx("img",{src:c.image,alt:c.label,className:"w-16 h-16 object-cover rounded"}):e.jsx("span",{className:"text-xs text-cream-500",children:"No image"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-cream-700",children:["",c.priceAdd||0,"/piece"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.isEnabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.isEnabled?"Enabled":"Disabled"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>So(c),className:"px-2 py-1 text-sm bg-cream-200 text-cream-900 rounded hover:bg-cream-300 transition-colors",children:e.jsx(Dn,{size:14})}),e.jsx("button",{onClick:()=>an(c._id),className:"px-2 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:e.jsx(ta,{size:14})})]})})]},c._id)})})]})}),Hm&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-cream-200 p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-cream-900",children:oi?"Edit Sub-Attribute & Add More":"Create Sub-Attributes"}),e.jsx("button",{onClick:fi,className:"text-cream-600 hover:text-cream-900",children:e.jsx(ns,{size:24})})]}),e.jsxs("form",{onSubmit:Tc,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Parent Attribute *"}),e.jsxs("select",{value:Hs.parentAttribute,onChange:c=>{Vn({...Hs,parentAttribute:c.target.value,parentValue:""})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!!oi,children:[e.jsx("option",{value:"",children:"Select Attribute"}),At.map(c=>e.jsx("option",{value:c.attributeName,children:c.attributeName},c._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Parent Value *"}),e.jsxs("select",{value:Hs.parentValue,onChange:c=>Vn({...Hs,parentValue:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!Hs.parentAttribute||!!oi,children:[e.jsx("option",{value:"",children:"Select Parent Value"}),(()=>{var b;const c=At.find(N=>N.attributeName===Hs.parentAttribute);return((b=c==null?void 0:c.attributeValues)==null?void 0:b.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value)))||[]})()]}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"The attribute value that triggers these sub-attributes"})]}),oi?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-cream-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-cream-900 mb-3",children:"Edit Sub-Attribute"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Value *"}),e.jsx("input",{type:"text",value:Hs.value,onChange:c=>Vn({...Hs,value:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"e.g., shape-1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Label *"}),e.jsx("input",{type:"text",value:Hs.label,onChange:c=>Vn({...Hs,label:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"e.g., Round Shape",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Image"}),(()=>{const c=yo.find(b=>b._id===oi);return c!=null&&c.image&&!Hs.image?e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Current image:"}),e.jsx("img",{src:c.image,alt:"Current",className:"w-32 h-32 object-cover rounded border border-cream-300"})]}):null})(),e.jsx("input",{type:"file",accept:"image/*",onChange:c=>{var N;const b=((N=c.target.files)==null?void 0:N[0])||null;Vn({...Hs,image:b})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900"}),Hs.image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"New image preview:"}),e.jsx("img",{src:URL.createObjectURL(Hs.image),alt:"Preview",className:"w-32 h-32 object-cover rounded border border-cream-300"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Price Addition (/piece)"}),e.jsx("input",{type:"number",step:"0.01",value:Hs.priceAdd,onChange:c=>Vn({...Hs,priceAdd:parseFloat(c.target.value)||0}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Fixed price addition per piece (e.g., 20 = +20/piece)"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:Hs.isEnabled,onChange:c=>Vn({...Hs,isEnabled:c.target.checked}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Enabled"})]})})]})]}),e.jsxs("div",{className:"border-t border-cream-200 pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-cream-900",children:"Add New Sub-Attributes (Optional)"}),e.jsxs("button",{type:"button",onClick:Nr,className:"px-3 py-1.5 text-sm bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:16}),"Add Row"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-4",children:"You can add additional sub-attributes with the same parent attribute and value"}),Mr.map((c,b)=>e.jsxs("div",{className:"border border-cream-200 rounded-lg p-4 bg-cream-50/50 mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h5",{className:"text-xs font-semibold text-cream-800",children:["New Sub-Attribute #",b+1]}),Mr.length>1&&e.jsx("button",{type:"button",onClick:()=>Mi(b),className:"text-red-600 hover:text-red-800 p-1",title:"Remove this row",children:e.jsx(ta,{size:14})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Value *"}),e.jsx("input",{type:"text",value:c.value,onChange:N=>zr(b,"value",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., shape-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Label *"}),e.jsx("input",{type:"text",value:c.label,onChange:N=>zr(b,"label",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., Square Shape"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N=>{var D;const S=((D=N.target.files)==null?void 0:D[0])||null;zr(b,"image",S)},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm"}),c.image&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:URL.createObjectURL(c.image),alt:"Preview",className:"w-24 h-24 object-cover rounded border border-cream-300"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Price Addition (/piece)"}),e.jsx("input",{type:"number",step:"0.01",value:c.priceAdd,onChange:N=>zr(b,"priceAdd",parseFloat(N.target.value)||0),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"0.00"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.isEnabled,onChange:N=>zr(b,"isEnabled",N.target.checked),className:"text-cream-900"}),e.jsx("span",{className:"text-xs text-cream-700",children:"Enabled"})]})})]})]})]},b))]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900",children:["Sub-Attributes (",Mr.length,")"]}),e.jsxs("button",{type:"button",onClick:Nr,className:"px-3 py-1.5 text-sm bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2",children:[e.jsx(Ys,{size:16}),"Add Row"]})]}),Mr.map((c,b)=>e.jsxs("div",{className:"border border-cream-200 rounded-lg p-4 bg-cream-50/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"text-sm font-semibold text-cream-900",children:["Sub-Attribute #",b+1]}),Mr.length>1&&e.jsx("button",{type:"button",onClick:()=>Mi(b),className:"text-red-600 hover:text-red-800 p-1",title:"Remove this row",children:e.jsx(ta,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Value *"}),e.jsx("input",{type:"text",value:c.value,onChange:N=>zr(b,"value",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., shape-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Label *"}),e.jsx("input",{type:"text",value:c.label,onChange:N=>zr(b,"label",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., Round Shape"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N=>{var D;const S=((D=N.target.files)==null?void 0:D[0])||null;zr(b,"image",S)},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm"}),c.image&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:URL.createObjectURL(c.image),alt:"Preview",className:"w-24 h-24 object-cover rounded border border-cream-300"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Price Addition (/piece)"}),e.jsx("input",{type:"number",step:"0.01",value:c.priceAdd,onChange:N=>zr(b,"priceAdd",parseFloat(N.target.value)||0),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"0.00"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.isEnabled,onChange:N=>zr(b,"isEnabled",N.target.checked),className:"text-cream-900"}),e.jsx("span",{className:"text-xs text-cream-700",children:"Enabled"})]})})]})]})]},b))]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-cream-200",children:[e.jsx("button",{type:"button",onClick:fi,className:"px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center gap-2",children:[d&&e.jsx(Kt,{className:"animate-spin",size:16}),oi?Mr.some(c=>c.value.trim()&&c.label.trim())?"Update & Add New Sub-Attributes":"Update Sub-Attribute":"Create Sub-Attributes"]})]})]})]})})]})]}),i==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:"Create Employee"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Create a new employee account. Employees can access the employee dashboard to manage orders assigned to their departments."}),e.jsxs("form",{onSubmit:Mc,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:rs.name,onChange:c=>Bs({...rs,name:c.target.value}),placeholder:"Enter employee name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:rs.email,onChange:c=>Bs({...rs,email:c.target.value}),placeholder:"Enter employee email",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Password *"}),e.jsx("input",{type:"password",required:!0,value:rs.password,onChange:c=>Bs({...rs,password:c.target.value}),placeholder:"Enter password",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gd,{size:20}),"Create Employee"]})})]})]}),e.jsx("div",{className:"border-t border-cream-300 pt-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:"Update User Role"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Users are created through the signup page. Use this form to update existing users' roles to admin or employee."}),e.jsxs("form",{onSubmit:Rc,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Username (Name) *"}),e.jsx("input",{type:"text",required:!0,value:Qt.username,onChange:c=>Vs({...Qt,username:c.target.value}),placeholder:"Enter user's name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Role *"}),e.jsx(Ea,{label:"Select Role",value:Qt.role,onChange:c=>Vs({...Qt,role:c}),options:[{value:"user",label:"User"},{value:"admin",label:"Admin"},{value:"emp",label:"Employee"}],className:"w-full"})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:20}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Er,{size:20}),"Update Role"]})})]})]})}),e.jsxs("div",{className:"border-t border-cream-300 pt-6",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["All Users (",ye.length,")"]}),e.jsx("button",{onClick:pi,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Refresh"})]}),ye.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(Rl,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No users found"})]}):e.jsx("div",{className:"space-y-4",children:ye.map(c=>e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 flex items-center justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-cream-900",children:c.name}),e.jsx("p",{className:"text-sm text-cream-600",children:c.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${c.role==="admin"?"bg-cream-900 text-white":"bg-cream-200 text-cream-900"}`,children:c.role}),c.isEmployee&&e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"})]})]}),e.jsx("div",{className:"text-xs text-cream-500",children:c.createdAt?new Date(c.createdAt).toLocaleDateString():"N/A"})]},c._id))})]})]}),i==="print-partner-requests"&&e.jsx(ak,{}),i==="corporate-requests"&&e.jsx(rk,{}),i==="pricing-books"&&e.jsx(nk,{}),i==="pricing-modifiers"&&e.jsx(lk,{}),i==="geo-zones"&&e.jsx(hk,{}),i==="user-segments"&&e.jsx(xk,{}),i==="product-availability"&&e.jsx(gk,{}),i==="pricing-preview"&&e.jsx(yk,{}),i==="pricing-logs"&&e.jsx(ok,{}),i==="virtual-pricing"&&e.jsx(bk,{})]})]}),e.jsx(ha,{children:Ke&&he&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(at.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-cream-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-cream-900",children:["Order #",he.orderNumber]}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:r?new Date(he.createdAt).toLocaleString():"Loading..."})]}),e.jsx("button",{onClick:()=>{yt(!1),Re(null),He({status:"",deliveryDate:"",adminNotes:""})},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(ns,{size:24})})]}),e.jsxs("div",{className:"space-y-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-cream-700",children:"Status:"}),e.jsx("div",{className:`px-4 py-2 rounded-full border-2 ${he.status==="completed"?"bg-green-100 text-green-800 border-green-200":he.status==="processing"?"bg-blue-100 text-blue-800 border-blue-200":he.status==="production_ready"?"bg-orange-100 text-orange-800 border-orange-200":he.status==="request"?"bg-yellow-100 text-yellow-800 border-yellow-200":he.status==="rejected"?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:e.jsx("span",{className:"text-sm font-semibold capitalize",children:he.status})})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(Rl,{size:18}),"Customer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1 font-medium",children:"Customer Name"}),e.jsx("p",{className:"font-semibold text-cream-900 text-base",children:he.user.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1 font-medium",children:"Email Address"}),e.jsx("p",{className:"font-semibold text-cream-900 text-base",children:he.user.email})]})]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(Na,{size:18}),"Product Information"]}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsx("img",{src:he.product.image||Wo,alt:he.product.name,className:"w-24 h-24 object-cover rounded-lg border border-cream-200",onError:c=>{const b=c.target;b.src=Wo}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-cream-900 text-lg mb-1",children:he.product.name}),e.jsxs("p",{className:"text-sm text-cream-600 mb-2",children:["Category: ",he.product.category&&typeof he.product.category=="object"&&he.product.category!==null&&"_id"in he.product.category?he.product.category.name||"N/A":typeof he.product.category=="string"?he.product.category:"N/A"]}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Base Price: ",((ko=he.product.basePrice)==null?void 0:ko.toFixed(2))||"0.00"," per unit"]})]})]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(Er,{size:18}),"Customization Details"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Quantity"}),e.jsxs("p",{className:"font-bold text-cream-900",children:[he.quantity," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Finish"}),e.jsx("p",{className:"font-bold text-cream-900",children:he.finish})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Shape"}),e.jsx("p",{className:"font-bold text-cream-900",children:he.shape})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Total Price"}),e.jsxs("p",{className:"font-bold text-cream-900",children:["",he.totalPrice.toFixed(2)]})]})]}),he.selectedOptions&&he.selectedOptions.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-2 font-semibold",children:"Selected Options"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:he.selectedOptions.map((c,b)=>e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-800 rounded-full text-xs font-medium",children:[typeof c=="string"?c:c.optionName||c.name||"Option",typeof c=="object"&&c.priceAdd?` (+${c.priceAdd.toFixed(2)})`:""]},b))})]}),he.selectedDynamicAttributes&&he.selectedDynamicAttributes.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-2 font-semibold",children:"Selected Attributes"}),e.jsx("div",{className:"space-y-2",children:he.selectedDynamicAttributes.map((c,b)=>e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-cream-100 border border-cream-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.attributeName,className:"w-8 h-8 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-cream-900",children:c.attributeName}),e.jsx("p",{className:"text-xs text-cream-600",children:c.label}),c.description&&e.jsx("p",{className:"text-xs text-cream-500 mt-0.5",children:c.description})]})]}),(c.priceAdd>0||c.priceMultiplier)&&e.jsxs("div",{className:"text-right",children:[c.priceAdd>0&&e.jsxs("span",{className:"block text-xs font-bold text-cream-900",children:["+",c.priceAdd.toFixed(2)]}),c.priceMultiplier&&c.priceMultiplier!==1&&e.jsxs("span",{className:"block text-xs text-cream-600",children:["",c.priceMultiplier.toFixed(2)]})]}),c.uploadedImages&&c.uploadedImages.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-cream-200 w-full",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-2 font-semibold",children:"Uploaded Images:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:c.uploadedImages.map((N,S)=>{let D="";return N.data&&(typeof N.data=="string"?D=`data:${N.contentType||"image/jpeg"};base64,${N.data}`:Buffer.isBuffer(N.data)&&(D=`data:${N.contentType||"image/jpeg"};base64,${N.data.toString("base64")}`)),D?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:D,alt:N.filename||`Image ${S+1}`,className:"w-full h-24 object-cover rounded border border-cream-200"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1 truncate",children:N.filename})]},S):null})})]})]},b))})]})]}),(()=>{var N,S,D;const c={quantity:he.quantity,product:{basePrice:0,gstPercentage:he.product.gstPercentage||18,options:he.product.options,filters:he.product.filters,quantityDiscounts:((N=he.product)==null?void 0:N.quantityDiscounts)||[]},finish:he.finish,shape:he.shape,selectedOptions:((S=he.selectedOptions)==null?void 0:S.map(U=>({name:typeof U=="string"?U:U.optionName||U.name||"Option",optionName:typeof U=="string"?U:U.optionName||U.name||"Option",priceAdd:typeof U=="object"&&U.priceAdd||0})))||[],selectedDynamicAttributes:(D=he.selectedDynamicAttributes)==null?void 0:D.map(U=>({attributeName:U.attributeName,label:U.label,priceMultiplier:U.priceMultiplier,priceAdd:U.priceAdd}))},b=vx(c);return e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx($l,{size:18}),"Price Breakdown"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-cream-200",children:[e.jsx("div",{className:"text-cream-600",children:e.jsxs("span",{children:["Base Price (",he.quantity.toLocaleString()," "," ",aa(0),")"]})}),e.jsx("span",{className:"font-medium text-cream-900",children:aa(b.rawBaseTotal)})]}),b.discountPercentage>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-700 bg-green-50 p-2 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold",children:["Bulk Discount (",b.discountPercentage,"%)"]}),e.jsxs("p",{className:"text-xs opacity-80",children:["Applied for ",he.quantity," units"]})]}),e.jsxs("span",{className:"font-bold",children:["-",aa(b.rawBaseTotal-b.discountedBaseTotal)]})]}),b.optionBreakdowns.map((U,B)=>e.jsxs("div",{className:"flex justify-between items-center text-cream-600",children:[e.jsxs("span",{children:[U.name," ",U.isPerUnit?`(${he.quantity}  ${aa(U.priceAdd)})`:""]}),e.jsxs("span",{children:["+",aa(U.cost)]})]},B)),he.selectedDynamicAttributes&&he.selectedDynamicAttributes.length>0&&e.jsx(e.Fragment,{children:he.selectedDynamicAttributes.filter(U=>U.priceAdd>0||U.priceMultiplier&&U.priceMultiplier!==1).map((U,B)=>{let Z=0,te=0;return U.priceAdd>0?(te=U.priceAdd,Z=U.priceAdd*he.quantity):U.priceMultiplier&&U.priceMultiplier!==1&&(te=0*(U.priceMultiplier-1),Z=te*he.quantity),Z===0?null:e.jsxs("div",{className:"flex justify-between items-center text-cream-600",children:[e.jsxs("span",{children:[U.attributeName," (",U.label,")"]}),e.jsxs("span",{children:["+",aa(te),"/unit  ",he.quantity.toLocaleString()," = ",aa(Z)]})]},`attr-${B}`)})}),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-cream-900 border-t border-cream-200",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:aa(b.subtotal)})]}),e.jsxs("div",{className:"flex justify-between items-center text-cream-600 text-xs",children:[e.jsxs("span",{children:["GST (",he.product.gstPercentage||18,"%)"]}),e.jsxs("span",{children:["+",aa(b.gstAmount)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t-2 border-cream-300",children:[e.jsx("span",{className:"text-base font-bold text-cream-900",children:"Total Amount"}),e.jsx("span",{className:"text-lg font-bold text-cream-900",children:aa(he.totalPrice)})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-cream-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-cream-600 text-xs",children:"Advance Paid"}),e.jsx("span",{className:"font-medium text-green-700",children:aa(he.advancePaid||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-cream-600 text-xs",children:"Balance Due"}),e.jsx("span",{className:`font-bold ${he.totalPrice-(he.advancePaid||0)>0?"text-red-600":"text-cream-500"}`,children:aa(he.totalPrice-(he.advancePaid||0))})]})]})]})]})})(),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(xo,{size:18}),"Delivery Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Complete Address"}),e.jsx("p",{className:"font-semibold text-cream-900 text-sm whitespace-pre-wrap",children:he.address||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Mobile Number"}),e.jsx("p",{className:"font-semibold text-cream-900",children:he.mobileNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Pincode"}),e.jsx("p",{className:"font-semibold text-cream-900",children:he.pincode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Delivery Date"}),e.jsx("p",{className:"font-semibold text-cream-900",children:he.deliveryDate?r?new Date(he.deliveryDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading...":"Not set"})]})]})]})]}),he.currentDepartment&&e.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 border border-indigo-200 mb-4",children:[e.jsxs("h3",{className:"font-bold text-indigo-900 mb-2 flex items-center gap-2",children:[e.jsx(Rn,{size:18}),"Current Department"]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"px-4 py-2 bg-white rounded-lg border border-indigo-200",children:[e.jsx("p",{className:"text-xs text-indigo-600 mb-1",children:"Currently Working On"}),e.jsx("p",{className:"text-lg font-bold text-indigo-900",children:typeof he.currentDepartment=="object"&&he.currentDepartment!==null?he.currentDepartment.name:"Department"}),he.currentDepartmentIndex!==null&&he.currentDepartmentIndex!==void 0&&e.jsxs("p",{className:"text-xs text-indigo-500 mt-1",children:["Position in Sequence: #",he.currentDepartmentIndex+1]})]})})]}),he.departmentStatuses&&he.departmentStatuses.length>0&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(xo,{size:18}),"Production Progress"]}),(()=>{const c=he.departmentStatuses.length,b=he.departmentStatuses.filter(S=>S.status==="completed").length,N=he.departmentStatuses.filter(S=>S.status==="in_progress").length;return e.jsxs("div",{className:"text-xs text-blue-700 font-medium",children:[b,"/",c," Stages Completed",N>0&&`  ${N} In Progress`]})})()]}),(()=>{const c=he.departmentStatuses.length,b=he.departmentStatuses.filter(S=>S.status==="completed").length,N=Math.round(b/c*100);return e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2.5 mb-1",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${N}%`}})}),e.jsxs("p",{className:"text-xs text-blue-700 text-right",children:[N,"% Complete"]})]})})(),e.jsx("div",{className:"space-y-2",children:he.departmentStatuses.sort((c,b)=>{const N=typeof c.department=="object"?c.department.sequence:0,S=typeof b.department=="object"?b.department.sequence:0;return N-S}).map((c,b)=>{const N=typeof c.department=="object"?c.department.name:"Department",S=c.status;let D="";if(c.startedAt&&c.completedAt){const U=new Date(c.startedAt),q=new Date(c.completedAt).getTime()-U.getTime(),Z=Math.floor(q/(1e3*60*60)),te=Math.floor(q%(1e3*60*60)/(1e3*60));Z>0?D=`${Z}h ${te}m`:D=`${te}m`}return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white rounded-lg border border-blue-100",children:[e.jsx("div",{className:`w-4 h-4 rounded-full mt-0.5 shrink-0 ${S==="completed"?"bg-green-500":S==="in_progress"?"bg-blue-500 animate-pulse":S==="paused"?"bg-yellow-500":S==="stopped"?"bg-red-500":"bg-gray-300"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-900",children:N}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${S==="completed"?"bg-green-100 text-green-800":S==="in_progress"?"bg-blue-100 text-blue-800":S==="paused"?"bg-yellow-100 text-yellow-800":S==="stopped"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:S.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"space-y-1 mt-2",children:[c.whenAssigned&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(pn,{size:12,className:"text-purple-600"}),e.jsxs("span",{className:"text-purple-600",children:["Assigned: ",new Date(c.whenAssigned).toLocaleString()]})]}),c.startedAt&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(pn,{size:12,className:"text-blue-600"}),e.jsxs("span",{className:"text-blue-600",children:["Started: ",new Date(c.startedAt).toLocaleString()]})]}),c.completedAt&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ya,{size:12,className:"text-green-600"}),e.jsxs("span",{className:"text-green-600",children:["Completed: ",new Date(c.completedAt).toLocaleString(),D&&` (Duration: ${D})`]})]}),c.pausedAt&&S==="paused"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(pn,{size:12,className:"text-yellow-600"}),e.jsxs("span",{className:"text-yellow-600",children:["Paused: ",new Date(c.pausedAt).toLocaleString()]})]}),c.stoppedAt&&S==="stopped"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ns,{size:12,className:"text-red-600"}),e.jsxs("span",{className:"text-red-600",children:["Stopped: ",new Date(c.stoppedAt).toLocaleString()]})]}),c.operator&&e.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[e.jsx(Rl,{size:12,className:"text-cream-600"}),e.jsxs("span",{className:"text-cream-600",children:["Operator: ",typeof c.operator=="object"&&c.operator&&"_id"in c.operator?`${c.operator.name||"N/A"} (${"email"in c.operator&&typeof c.operator.email=="string"?c.operator.email:"N/A"})`:"N/A"]})]}),c.notes&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1 italic",children:["Notes: ",c.notes]})]})]})]},b)})})]}),he.productionTimeline&&he.productionTimeline.length>0&&e.jsxs("div",{className:"bg-linear-to-br from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200",children:[e.jsxs("h3",{className:"font-bold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx(pn,{size:18}),"Production Activity Timeline"]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Array.isArray(he.productionTimeline)&&he.productionTimeline.sort((c,b)=>new Date(b.timestamp||0).getTime()-new Date(c.timestamp||0).getTime()).map((c,b)=>{const N=typeof c.department=="object"?c.department.name:"Department",S=c.operator?typeof c.operator=="object"?`${c.operator.name} (${c.operator.email})`:c.operator:"System",D={started:"bg-blue-100 text-blue-800 border-blue-300",paused:"bg-yellow-100 text-yellow-800 border-yellow-300",resumed:"bg-green-100 text-green-800 border-green-300",completed:"bg-green-100 text-green-800 border-green-300",stopped:"bg-red-100 text-red-800 border-red-300"};return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white rounded-lg border border-purple-100 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 shrink-0 ${c.action==="completed"?"bg-green-500":c.action==="started"?"bg-blue-500":c.action==="paused"?"bg-yellow-500":c.action==="stopped"?"bg-red-500":"bg-gray-400"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-purple-900",children:N}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium border ${D[c.action]||"bg-gray-100 text-gray-800 border-gray-300"}`,children:c.action.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600 mb-1",children:[e.jsx(pn,{size:12}),e.jsx("span",{children:new Date(c.timestamp).toLocaleString()})]}),S&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600 mb-1",children:[e.jsx(Rl,{size:12}),e.jsxs("span",{children:["Operator: ",S]})]}),c.notes&&e.jsx("div",{className:"text-xs text-purple-700 mt-1 italic bg-purple-50 p-2 rounded border border-purple-100",children:c.notes})]})]},b)})})]}),he.notes&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(gr,{size:18}),"Customer Notes"]}),e.jsx("p",{className:"text-sm text-blue-900 whitespace-pre-wrap",children:he.notes})]}),he.adminNotes&&e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsxs("h3",{className:"font-bold text-amber-900 mb-2 flex items-center gap-2",children:[e.jsx(Er,{size:18}),"Admin Notes"]}),e.jsx("p",{className:"text-sm text-amber-900 whitespace-pre-wrap",children:he.adminNotes})]}),(((bi=he.uploadedDesign)==null?void 0:bi.frontImage)||((Nn=he.uploadedDesign)==null?void 0:Nn.backImage))&&e.jsxs(at.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"bg-linear-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-blue-900 mb-4 flex items-center gap-2 text-lg",children:[e.jsx(vi,{size:20}),"Uploaded Customer Designs"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[((Wn=he.uploadedDesign)==null?void 0:Wn.frontImage)&&e.jsxs(at.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[e.jsxs("p",{className:"text-sm font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(Kr,{size:16}),"Front Design"]}),e.jsxs("div",{className:"relative bg-white rounded-lg border-2 border-blue-200 p-4 shadow-md hover:shadow-lg transition-shadow",children:[e.jsx("img",{src:he.uploadedDesign.frontImage.data||Pl,alt:"Front design",className:"w-full h-80 object-contain rounded-lg",onError:c=>{const b=c.target;b.src=Pl}}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["File: ",he.uploadedDesign.frontImage.filename||"front-design.png"]}),e.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:["Type: ",he.uploadedDesign.frontImage.contentType||"image/png"]})]}),e.jsxs("button",{onClick:()=>{const c=document.createElement("a");c.href=he.uploadedDesign.frontImage.data||Pl,c.download=he.uploadedDesign.frontImage.filename||"front-design.png",document.body.appendChild(c),c.click(),document.body.removeChild(c)},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",title:"Download image",children:[e.jsx(Ki,{size:14}),"Download"]})]})]})]}),((wn=he.uploadedDesign)==null?void 0:wn.backImage)&&e.jsxs(at.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[e.jsxs("p",{className:"text-sm font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(Kr,{size:16}),"Back Design"]}),e.jsxs("div",{className:"relative bg-white rounded-lg border-2 border-blue-200 p-4 shadow-md hover:shadow-lg transition-shadow",children:[e.jsx("img",{src:he.uploadedDesign.backImage.data||Pl,alt:"Back design",className:"w-full h-80 object-contain rounded-lg",onError:c=>{const b=c.target;b.src=Pl}}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["File: ",he.uploadedDesign.backImage.filename||"back-design.png"]}),e.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:["Type: ",he.uploadedDesign.backImage.contentType||"image/png"]})]}),e.jsxs("button",{onClick:()=>{const c=document.createElement("a");c.href=he.uploadedDesign.backImage.data||Pl,c.download=he.uploadedDesign.backImage.filename||"back-design.png",document.body.appendChild(c),c.click(),document.body.removeChild(c)},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",title:"Download image",children:[e.jsx(Ki,{size:14}),"Download"]})]})]})]})]})]})]}),he.status!=="cancelled"&&e.jsxs("div",{className:"border-t border-cream-200 pt-6",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(Er,{size:18}),"Manage Order"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Order Status"}),e.jsx(Ea,{label:"Select Status",value:Pt.status,onChange:c=>He({...Pt,status:c}),options:[{value:"request",label:"Request"},{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"rejected",label:"Rejected"}],className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Delivery Date"}),e.jsx("input",{type:"date",value:Pt.deliveryDate,onChange:c=>He({...Pt,deliveryDate:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Admin Notes"}),e.jsx("textarea",{value:Pt.adminNotes,onChange:c=>He({...Pt,adminNotes:c.target.value}),rows:4,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"Add notes for this order..."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>cl(he._id),disabled:d,className:"flex-1 bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:20}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xa,{size:20}),"Update Order"]})}),e.jsx("button",{onClick:()=>{yt(!1),Re(null),He({status:"",deliveryDate:"",adminNotes:""})},className:"px-6 py-3 border border-cream-300 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"})]})]})]})]})})}),e.jsx(ha,{children:Le&&Ve&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx(at.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-cream-900",children:"Upload Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{Ve&&window.confirm("Are you sure you want to delete this uploaded image?")&&(ua(Ve._id),ve(!1),_e(null))},disabled:d,className:"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",title:"Delete upload",children:[e.jsx(ta,{size:20}),"Delete"]}),e.jsx("button",{onClick:()=>{ve(!1),_e(null)},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(ns,{size:24})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"User"}),e.jsxs("p",{className:"font-semibold text-cream-900",children:[Ve.user.name," (",Ve.user.email,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Dimensions"}),e.jsxs("p",{className:"font-semibold text-cream-900",children:[Ve.width,"  ",Ve.height,"px"]})]}),Ve.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Description"}),e.jsx("p",{className:"text-cream-900",children:Ve.description})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Front Image"}),Ve.frontImage&&e.jsxs("button",{onClick:()=>Es(Ve.frontImage.data,Ve.frontImage.filename||"front-image.jpg"),className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ki,{size:14}),"Download"]})]}),Ve.frontImage&&e.jsxs("div",{className:"relative",children:[it[`modal-front-${Ve._id}`]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cream-100 rounded-lg",children:e.jsx(Kt,{className:"animate-spin text-cream-600",size:32})}),e.jsx("img",{src:Jl(Ve.frontImage.data,Ve.frontImage.contentType)||Pl,alt:Ve.frontImage.filename,className:`w-full rounded-lg border border-cream-300 ${it[`modal-front-${Ve._id}`]?"opacity-0":"opacity-100"} transition-opacity`,onLoad:()=>es(c=>({...c,[`modal-front-${Ve._id}`]:!1})),onError:()=>{var c;es(b=>({...b,[`modal-front-${Ve._id}`]:!1})),console.error("Failed to load image:",(c=Ve.frontImage)==null?void 0:c.filename)},onLoadStart:()=>es(c=>({...c,[`modal-front-${Ve._id}`]:!0}))})]})]}),Ve.backImage&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Back Image"}),e.jsxs("button",{onClick:()=>Es(Ve.backImage.data,Ve.backImage.filename||"back-image.jpg"),className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ki,{size:14}),"Download"]})]}),e.jsxs("div",{className:"relative",children:[it[`modal-back-${Ve._id}`]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cream-100 rounded-lg",children:e.jsx(Kt,{className:"animate-spin text-cream-600",size:32})}),e.jsx("img",{src:Jl(Ve.backImage.data,Ve.backImage.contentType)||Pl,alt:Ve.backImage.filename,className:`w-full rounded-lg border border-cream-300 ${it[`modal-back-${Ve._id}`]?"opacity-0":"opacity-100"} transition-opacity`,onLoad:()=>es(c=>({...c,[`modal-back-${Ve._id}`]:!1})),onError:()=>{var c;es(b=>({...b,[`modal-back-${Ve._id}`]:!1})),console.error("Failed to load image:",(c=Ve.backImage)==null?void 0:c.filename)},onLoadStart:()=>es(c=>({...c,[`modal-back-${Ve._id}`]:!0}))})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Uploaded"}),e.jsx("p",{className:"text-cream-900",children:r?new Date(Ve.createdAt).toLocaleString():"Loading..."})]})]})]})})})}),lt.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ts,{className:"text-red-600",size:24}),e.jsxs("h3",{className:"text-xl font-bold text-cream-900",children:["Delete ",lt.type==="category"?"Category":"Subcategory"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-cream-700 mb-3",children:["Are you sure you want to delete ",e.jsx("strong",{children:lt.name}),"?"]}),lt.subcategoryCount>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ts,{className:"text-red-600 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-red-800 font-semibold mb-1",children:[" Cannot Delete: This category has ",lt.subcategoryCount," subcategor",lt.subcategoryCount===1?"y":"ies","!"]}),e.jsx("p",{className:"text-red-700 text-sm",children:"Please delete or reassign all subcategories before deleting this category."})]})]})}),lt.productCount>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ts,{className:"text-red-600 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-red-800 font-semibold mb-1",children:[" Warning: This will delete ",lt.productCount," product",lt.productCount!==1?"s":"","!"]}),e.jsxs("p",{className:"text-red-700 text-sm",children:["All products under this ",lt.type==="category"?"category and its subcategories":"subcategory"," will be permanently deleted. This action cannot be undone."]}),e.jsx("p",{className:"text-red-700 text-sm mt-2 font-medium",children:"Please be careful before proceeding."})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Type ",e.jsx("strong",{children:'"delete"'})," to confirm:"]}),e.jsx("input",{type:"text",value:lt.deleteText,onChange:c=>pt({...lt,deleteText:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"Type 'delete' to confirm",autoFocus:!0})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>pt({...lt,isOpen:!1,deleteText:""}),className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{lt.type==="category"?du():vn()},disabled:lt.deleteText.toLowerCase()!=="delete"||d||lt.subcategoryCount>0,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin inline mr-2",size:16}),"Deleting..."]}):"Delete"})]})]})}),xa.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(kr,{className:"text-blue-600",size:24}),e.jsxs("h3",{className:"text-xl font-bold text-cream-900",children:[xa.type==="category"?"Category":"Subcategory"," Description"]})]}),e.jsx("button",{onClick:()=>hn({...xa,isOpen:!1}),className:"text-cream-600 hover:text-cream-900 transition-colors",children:e.jsx(ns,{size:24})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900 mb-2",children:xa.name}),e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-4 max-h-96 overflow-y-auto",children:e.jsx("p",{className:"text-cream-700 whitespace-pre-wrap leading-relaxed",children:xa.description})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>hn({...xa,isOpen:!1}),className:"px-6 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors",children:"Close"})})]})}),e.jsx(ha,{children:Ze&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(at.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-cream-200",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900",children:"Create Employee"}),e.jsx("button",{onClick:()=>{et(!1),Rt({name:"",email:"",password:""})},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(ns,{size:24})})]}),e.jsxs("form",{onSubmit:uu,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:Gt.name,onChange:c=>Rt({...Gt,name:c.target.value}),placeholder:"Enter employee name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:Gt.email,onChange:c=>Rt({...Gt,email:c.target.value}),placeholder:"Enter employee email",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Password *"}),e.jsx("input",{type:"password",required:!0,value:Gt.password,onChange:c=>Rt({...Gt,password:c.target.value}),placeholder:"Enter password",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{et(!1),Rt({name:"",email:"",password:""})},className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gd,{size:20}),"Create Employee"]})})]})]})]})})}),e.jsx(ha,{children:Zs&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(at.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-cream-200",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900",children:"Create Department"}),e.jsx("button",{onClick:()=>{Us(!1),zs({name:"",description:"",isEnabled:!0,operators:[]})},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(ns,{size:24})})]}),e.jsxs("form",{onSubmit:Ya,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Department Name *"}),e.jsx("input",{type:"text",required:!0,value:Wt.name,onChange:c=>zs({...Wt,name:c.target.value}),placeholder:"Enter department name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:Wt.description,onChange:c=>zs({...Wt,description:c.target.value}),placeholder:"Enter department description",rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-cream-900 mb-2",children:[e.jsx("input",{type:"checkbox",checked:Wt.isEnabled,onChange:c=>zs({...Wt,isEnabled:c.target.checked}),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{children:"Enabled"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Assign Operators (Optional)"}),e.jsxs("button",{type:"button",onClick:()=>et(!0),className:"px-3 py-1.5 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1.5",children:[e.jsx(gd,{size:14}),"Create Employee"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-2",children:"Select employees who can perform actions for this department. Only employees can be assigned."}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-200 rounded-lg p-3",children:hs.length===0?e.jsx("p",{className:"text-sm text-cream-600",children:"No employees available. Create employees first."}):hs.map(c=>{const b=Wt.operators.some(N=>String(N)===String(c._id));return e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-cream-50 border border-cream-200 rounded-lg hover:bg-cream-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:N=>{N.target.checked?zs({...Wt,operators:[...Wt.operators,c._id]}):zs({...Wt,operators:Wt.operators.filter(S=>String(S)!==String(c._id))})},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:c.name}),e.jsx("p",{className:"text-xs text-cream-600",children:c.email})]}),b&&e.jsx(Xa,{className:"text-cream-900",size:20})]},c._id)})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{Us(!1),zs({name:"",description:"",isEnabled:!0,operators:[]})},className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Rn,{size:20}),"Create Department"]})})]})]})]})})})]})},wk=()=>{const s=nr();return e.jsx("div",{className:"min-h-screen bg-linear-to-br from-cream-50 to-cream-100 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("h1",{className:"text-9xl font-bold text-cream-200 select-none",children:"404"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-cream-900 text-white px-6 py-2 rounded-full shadow-lg",children:e.jsx("span",{className:"text-lg font-semibold",children:"Page Not Found"})})})]}),e.jsx("h2",{className:"text-2xl font-bold text-cream-900 mb-4",children:"Oops! Looks like you're lost"}),e.jsx("p",{className:"text-cream-600 mb-8 leading-relaxed",children:"The page you're looking for doesn't exist or has been moved. Don't worry, let's get you back on track!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs("button",{onClick:()=>s(-1),className:"flex items-center justify-center gap-2 px-6 py-3 bg-white border-2 border-cream-300 text-cream-700 rounded-lg font-semibold hover:bg-cream-50 hover:border-cream-400 transition-all shadow-sm",children:[e.jsx(Td,{className:"w-5 h-5"}),"Go Back"]}),e.jsxs(ks,{to:"/",className:"flex items-center justify-center gap-2 px-6 py-3 bg-cream-900 text-white rounded-lg font-semibold hover:bg-cream-800 transition-all shadow-lg",children:[e.jsx(Xj,{className:"w-5 h-5"}),"Home Page"]})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-cream-200",children:[e.jsx("p",{className:"text-sm text-cream-500 mb-4",children:"Popular destinations:"}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[e.jsx(ks,{to:"/digital-print",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"Digital Print"}),e.jsx("span",{className:"text-cream-300",children:""}),e.jsx(ks,{to:"/about",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"About Us"}),e.jsx("span",{className:"text-cream-300",children:""}),e.jsx(ks,{to:"/contact",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"Contact"}),e.jsx("span",{className:"text-cream-300",children:""}),e.jsx(ks,{to:"/reviews",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"Reviews"})]})]})]})})},Sk=[{path:"/",element:e.jsx(ME,{}),errorElement:e.jsx(ba,{}),children:[{index:!0,element:e.jsx(HE,{}),errorElement:e.jsx(ba,{})},{path:"digital-print",element:e.jsx(GE,{}),errorElement:e.jsx(ba,{})},{path:"digital-print/:categoryId",element:e.jsx(Jf,{}),errorElement:e.jsx(ba,{})},{path:"digital-print/:categoryId/gloss-finish",element:e.jsx(yd,{}),errorElement:e.jsx(ba,{})},{path:"digital-print/:categoryId/:subCategoryId/:nestedSubCategoryId",element:e.jsx(Jf,{}),errorElement:e.jsx(ba,{})},{path:"digital-print/:categoryId/:subCategoryId",element:e.jsx(Jf,{}),errorElement:e.jsx(ba,{})},{path:"digital-print/:categoryId/:subCategoryId/:nestedSubCategoryId/:productId",element:e.jsx(yd,{}),errorElement:e.jsx(ba,{})},{path:"digital-print/:categoryId/:subCategoryId/:productId",element:e.jsx(yd,{}),errorElement:e.jsx(ba,{})},{path:"digital-print/:categoryId/:productId",element:e.jsx(yd,{}),errorElement:e.jsx(ba,{})},{path:"upload",element:e.jsx(JE,{}),errorElement:e.jsx(ba,{})},{path:"about",element:e.jsx(tT,{}),errorElement:e.jsx(ba,{})},{path:"policy",element:e.jsx(sT,{}),errorElement:e.jsx(ba,{})},{path:"contact",element:e.jsx(aT,{}),errorElement:e.jsx(ba,{})},{path:"login",element:e.jsx(nT,{}),errorElement:e.jsx(ba,{})},{path:"signup",element:e.jsx(cT,{}),errorElement:e.jsx(ba,{})},{path:"profile",element:e.jsx(mT,{}),errorElement:e.jsx(ba,{})},{path:"my-orders",element:e.jsx(bT,{}),errorElement:e.jsx(ba,{})},{path:"orders/:orderId",element:e.jsx(yj,{}),errorElement:e.jsx(ba,{})},{path:"order/:orderId",element:e.jsx(yj,{}),errorElement:e.jsx(ba,{})},{path:"admin/dashboard",element:e.jsx(Nk,{}),errorElement:e.jsx(ba,{})},{path:"employee/dashboard",element:e.jsx(jT,{}),errorElement:e.jsx(ba,{})},{path:"department-portal",element:e.jsx(yT,{}),errorElement:e.jsx(ba,{})},{path:"reviews",element:e.jsx(dT,{}),errorElement:e.jsx(ba,{})},{path:"*",element:e.jsx(wk,{}),errorElement:e.jsx(ba,{})}]}],oc=document.getElementById("root");if(!oc)throw new Error("Could not find root element to mount to");const vj=AS(Sk),Ck=oc.innerHTML.trim().length>0&&!oc.innerHTML.includes("<!--app-html-->")&&oc.children.length>0;Ck?gb.hydrateRoot(oc,e.jsx(ba,{children:e.jsx(Gb,{router:vj})})):gb.createRoot(oc).render(e.jsx(ba,{children:e.jsx(Gb,{router:vj})}));export{Te as A,Rn as B,ya as C,Wb as F,Kt as L,po as M,xm as P,Pr as R,ei as U,ns as X,Vd as _,Jr as a,ic as b,ha as c,cc as d,ti as e,Ts as f,Ak as g,cw as h,e as j,at as m,y as r};
