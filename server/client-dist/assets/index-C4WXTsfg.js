function a1(s,r){for(var n=0;n<r.length;n++){const l=r[n];if(typeof l!="string"&&!Array.isArray(l)){for(const d in l)if(d!=="default"&&!(d in s)){const m=Object.getOwnPropertyDescriptor(l,d);m&&Object.defineProperty(s,d,m.get?m:{enumerable:!0,get:()=>l[d]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const u of m.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function n(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(d){if(d.ep)return;d.ep=!0;const m=n(d);fetch(d.href,m)}})();var ck=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var gp={exports:{}},rd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb;function i1(){if(sb)return rd;sb=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(l,d,m){var u=null;if(m!==void 0&&(u=""+m),d.key!==void 0&&(u=""+d.key),"key"in d){m={};for(var p in d)p!=="key"&&(m[p]=d[p])}else m=d;return d=m.ref,{$$typeof:s,type:l,key:u,ref:d!==void 0?d:null,props:m}}return rd.Fragment=r,rd.jsx=n,rd.jsxs=n,rd}var ab;function n1(){return ab||(ab=1,gp.exports=i1()),gp.exports}var e=n1(),bp={exports:{}},id={},yp={exports:{}},jp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function l1(){return rb||(rb=1,(function(s){function r(I,K){var q=I.length;I.push(K);e:for(;0<q;){var de=q-1>>>1,Ce=I[de];if(0<d(Ce,K))I[de]=K,I[q]=Ce,q=de;else break e}}function n(I){return I.length===0?null:I[0]}function l(I){if(I.length===0)return null;var K=I[0],q=I.pop();if(q!==K){I[0]=q;e:for(var de=0,Ce=I.length,A=Ce>>>1;de<A;){var G=2*(de+1)-1,ie=I[G],Re=G+1,ge=I[Re];if(0>d(ie,q))Re<Ce&&0>d(ge,ie)?(I[de]=ge,I[Re]=q,de=Re):(I[de]=ie,I[G]=q,de=G);else if(Re<Ce&&0>d(ge,q))I[de]=ge,I[Re]=q,de=Re;else break e}}return K}function d(I,K){var q=I.sortIndex-K.sortIndex;return q!==0?q:I.id-K.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;s.unstable_now=function(){return m.now()}}else{var u=Date,p=u.now();s.unstable_now=function(){return u.now()-p}}var b=[],f=[],j=1,v=null,w=3,D=!1,P=!1,T=!1,$=!1,L=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function ce(I){for(var K=n(f);K!==null;){if(K.callback===null)l(f);else if(K.startTime<=I)l(f),K.sortIndex=K.expirationTime,r(b,K);else break;K=n(f)}}function U(I){if(T=!1,ce(I),!P)if(n(b)!==null)P=!0,O||(O=!0,me());else{var K=n(f);K!==null&&J(U,K.startTime-I)}}var O=!1,k=-1,W=5,Q=-1;function ne(){return $?!0:!(s.unstable_now()-Q<W)}function le(){if($=!1,O){var I=s.unstable_now();Q=I;var K=!0;try{e:{P=!1,T&&(T=!1,M(k),k=-1),D=!0;var q=w;try{t:{for(ce(I),v=n(b);v!==null&&!(v.expirationTime>I&&ne());){var de=v.callback;if(typeof de=="function"){v.callback=null,w=v.priorityLevel;var Ce=de(v.expirationTime<=I);if(I=s.unstable_now(),typeof Ce=="function"){v.callback=Ce,ce(I),K=!0;break t}v===n(b)&&l(b),ce(I)}else l(b);v=n(b)}if(v!==null)K=!0;else{var A=n(f);A!==null&&J(U,A.startTime-I),K=!1}}break e}finally{v=null,w=q,D=!1}K=void 0}}finally{K?me():O=!1}}}var me;if(typeof B=="function")me=function(){B(le)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,F=Ve.port2;Ve.port1.onmessage=le,me=function(){F.postMessage(null)}}else me=function(){L(le,0)};function J(I,K){k=L(function(){I(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(I){I.callback=null},s.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<I?Math.floor(1e3/I):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(I){switch(w){case 1:case 2:case 3:var K=3;break;default:K=w}var q=w;w=K;try{return I()}finally{w=q}},s.unstable_requestPaint=function(){$=!0},s.unstable_runWithPriority=function(I,K){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=w;w=I;try{return K()}finally{w=q}},s.unstable_scheduleCallback=function(I,K,q){var de=s.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?de+q:de):q=de,I){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=q+Ce,I={id:j++,callback:K,priorityLevel:I,startTime:q,expirationTime:Ce,sortIndex:-1},q>de?(I.sortIndex=q,r(f,I),n(b)===null&&I===n(f)&&(T?(M(k),k=-1):T=!0,J(U,q-de))):(I.sortIndex=Ce,r(b,I),P||D||(P=!0,O||(O=!0,me()))),I},s.unstable_shouldYield=ne,s.unstable_wrapCallback=function(I){var K=w;return function(){var q=w;w=K;try{return I.apply(this,arguments)}finally{w=q}}}})(jp)),jp}var ib;function o1(){return ib||(ib=1,yp.exports=l1()),yp.exports}var vp={exports:{}},ls={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function c1(){if(nb)return ls;nb=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function D(A){return A===null||typeof A!="object"?null:(A=w&&A[w]||A["@@iterator"],typeof A=="function"?A:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,$={};function L(A,G,ie){this.props=A,this.context=G,this.refs=$,this.updater=ie||P}L.prototype.isReactComponent={},L.prototype.setState=function(A,G){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,G,"setState")},L.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function M(){}M.prototype=L.prototype;function B(A,G,ie){this.props=A,this.context=G,this.refs=$,this.updater=ie||P}var ce=B.prototype=new M;ce.constructor=B,T(ce,L.prototype),ce.isPureReactComponent=!0;var U=Array.isArray;function O(){}var k={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function Q(A,G,ie){var Re=ie.ref;return{$$typeof:s,type:A,key:G,ref:Re!==void 0?Re:null,props:ie}}function ne(A,G){return Q(A.type,G,A.props)}function le(A){return typeof A=="object"&&A!==null&&A.$$typeof===s}function me(A){var G={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(ie){return G[ie]})}var Ve=/\/+/g;function F(A,G){return typeof A=="object"&&A!==null&&A.key!=null?me(""+A.key):G.toString(36)}function J(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(O,O):(A.status="pending",A.then(function(G){A.status==="pending"&&(A.status="fulfilled",A.value=G)},function(G){A.status==="pending"&&(A.status="rejected",A.reason=G)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function I(A,G,ie,Re,ge){var R=typeof A;(R==="undefined"||R==="boolean")&&(A=null);var re=!1;if(A===null)re=!0;else switch(R){case"bigint":case"string":case"number":re=!0;break;case"object":switch(A.$$typeof){case s:case r:re=!0;break;case j:return re=A._init,I(re(A._payload),G,ie,Re,ge)}}if(re)return ge=ge(A),re=Re===""?"."+F(A,0):Re,U(ge)?(ie="",re!=null&&(ie=re.replace(Ve,"$&/")+"/"),I(ge,G,ie,"",function(Be){return Be})):ge!=null&&(le(ge)&&(ge=ne(ge,ie+(ge.key==null||A&&A.key===ge.key?"":(""+ge.key).replace(Ve,"$&/")+"/")+re)),G.push(ge)),1;re=0;var je=Re===""?".":Re+":";if(U(A))for(var Ie=0;Ie<A.length;Ie++)Re=A[Ie],R=je+F(Re,Ie),re+=I(Re,G,ie,R,ge);else if(Ie=D(A),typeof Ie=="function")for(A=Ie.call(A),Ie=0;!(Re=A.next()).done;)Re=Re.value,R=je+F(Re,Ie++),re+=I(Re,G,ie,R,ge);else if(R==="object"){if(typeof A.then=="function")return I(J(A),G,ie,Re,ge);throw G=String(A),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return re}function K(A,G,ie){if(A==null)return A;var Re=[],ge=0;return I(A,Re,"","",function(R){return G.call(ie,R,ge++)}),Re}function q(A){if(A._status===-1){var G=A._result;G=G(),G.then(function(ie){(A._status===0||A._status===-1)&&(A._status=1,A._result=ie)},function(ie){(A._status===0||A._status===-1)&&(A._status=2,A._result=ie)}),A._status===-1&&(A._status=0,A._result=G)}if(A._status===1)return A._result.default;throw A._result}var de=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},Ce={map:K,forEach:function(A,G,ie){K(A,function(){G.apply(this,arguments)},ie)},count:function(A){var G=0;return K(A,function(){G++}),G},toArray:function(A){return K(A,function(G){return G})||[]},only:function(A){if(!le(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return ls.Activity=v,ls.Children=Ce,ls.Component=L,ls.Fragment=n,ls.Profiler=d,ls.PureComponent=B,ls.StrictMode=l,ls.Suspense=b,ls.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,ls.__COMPILER_RUNTIME={__proto__:null,c:function(A){return k.H.useMemoCache(A)}},ls.cache=function(A){return function(){return A.apply(null,arguments)}},ls.cacheSignal=function(){return null},ls.cloneElement=function(A,G,ie){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var Re=T({},A.props),ge=A.key;if(G!=null)for(R in G.key!==void 0&&(ge=""+G.key),G)!W.call(G,R)||R==="key"||R==="__self"||R==="__source"||R==="ref"&&G.ref===void 0||(Re[R]=G[R]);var R=arguments.length-2;if(R===1)Re.children=ie;else if(1<R){for(var re=Array(R),je=0;je<R;je++)re[je]=arguments[je+2];Re.children=re}return Q(A.type,ge,Re)},ls.createContext=function(A){return A={$$typeof:u,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:m,_context:A},A},ls.createElement=function(A,G,ie){var Re,ge={},R=null;if(G!=null)for(Re in G.key!==void 0&&(R=""+G.key),G)W.call(G,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(ge[Re]=G[Re]);var re=arguments.length-2;if(re===1)ge.children=ie;else if(1<re){for(var je=Array(re),Ie=0;Ie<re;Ie++)je[Ie]=arguments[Ie+2];ge.children=je}if(A&&A.defaultProps)for(Re in re=A.defaultProps,re)ge[Re]===void 0&&(ge[Re]=re[Re]);return Q(A,R,ge)},ls.createRef=function(){return{current:null}},ls.forwardRef=function(A){return{$$typeof:p,render:A}},ls.isValidElement=le,ls.lazy=function(A){return{$$typeof:j,_payload:{_status:-1,_result:A},_init:q}},ls.memo=function(A,G){return{$$typeof:f,type:A,compare:G===void 0?null:G}},ls.startTransition=function(A){var G=k.T,ie={};k.T=ie;try{var Re=A(),ge=k.S;ge!==null&&ge(ie,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(O,de)}catch(R){de(R)}finally{G!==null&&ie.types!==null&&(G.types=ie.types),k.T=G}},ls.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},ls.use=function(A){return k.H.use(A)},ls.useActionState=function(A,G,ie){return k.H.useActionState(A,G,ie)},ls.useCallback=function(A,G){return k.H.useCallback(A,G)},ls.useContext=function(A){return k.H.useContext(A)},ls.useDebugValue=function(){},ls.useDeferredValue=function(A,G){return k.H.useDeferredValue(A,G)},ls.useEffect=function(A,G){return k.H.useEffect(A,G)},ls.useEffectEvent=function(A){return k.H.useEffectEvent(A)},ls.useId=function(){return k.H.useId()},ls.useImperativeHandle=function(A,G,ie){return k.H.useImperativeHandle(A,G,ie)},ls.useInsertionEffect=function(A,G){return k.H.useInsertionEffect(A,G)},ls.useLayoutEffect=function(A,G){return k.H.useLayoutEffect(A,G)},ls.useMemo=function(A,G){return k.H.useMemo(A,G)},ls.useOptimistic=function(A,G){return k.H.useOptimistic(A,G)},ls.useReducer=function(A,G,ie){return k.H.useReducer(A,G,ie)},ls.useRef=function(A){return k.H.useRef(A)},ls.useState=function(A){return k.H.useState(A)},ls.useSyncExternalStore=function(A,G,ie){return k.H.useSyncExternalStore(A,G,ie)},ls.useTransition=function(){return k.H.useTransition()},ls.version="19.2.3",ls}var lb;function wh(){return lb||(lb=1,vp.exports=c1()),vp.exports}var Np={exports:{}},pr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function d1(){if(ob)return pr;ob=1;var s=wh();function r(b){var f="https://react.dev/errors/"+b;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)f+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+b+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(b,f,j){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:v==null?null:""+v,children:b,containerInfo:f,implementation:j}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(b,f){if(b==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return pr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,pr.createPortal=function(b,f){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(r(299));return m(b,f,null,j)},pr.flushSync=function(b){var f=u.T,j=l.p;try{if(u.T=null,l.p=2,b)return b()}finally{u.T=f,l.p=j,l.d.f()}},pr.preconnect=function(b,f){typeof b=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,l.d.C(b,f))},pr.prefetchDNS=function(b){typeof b=="string"&&l.d.D(b)},pr.preinit=function(b,f){if(typeof b=="string"&&f&&typeof f.as=="string"){var j=f.as,v=p(j,f.crossOrigin),w=typeof f.integrity=="string"?f.integrity:void 0,D=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;j==="style"?l.d.S(b,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:D}):j==="script"&&l.d.X(b,{crossOrigin:v,integrity:w,fetchPriority:D,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},pr.preinitModule=function(b,f){if(typeof b=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var j=p(f.as,f.crossOrigin);l.d.M(b,{crossOrigin:j,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&l.d.M(b)},pr.preload=function(b,f){if(typeof b=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var j=f.as,v=p(j,f.crossOrigin);l.d.L(b,j,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},pr.preloadModule=function(b,f){if(typeof b=="string")if(f){var j=p(f.as,f.crossOrigin);l.d.m(b,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:j,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else l.d.m(b)},pr.requestFormReset=function(b){l.d.r(b)},pr.unstable_batchedUpdates=function(b,f){return b(f)},pr.useFormState=function(b,f,j){return u.H.useFormState(b,f,j)},pr.useFormStatus=function(){return u.H.useHostTransitionStatus()},pr.version="19.2.3",pr}var cb;function gj(){if(cb)return Np.exports;cb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Np.exports=d1(),Np.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db;function u1(){if(db)return id;db=1;var s=o1(),r=wh(),n=gj();function l(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var a=t,i=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(i=a.return),t=a.return;while(t)}return a.tag===3?i:null}function u(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function p(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function b(t){if(m(t)!==t)throw Error(l(188))}function f(t){var a=t.alternate;if(!a){if(a=m(t),a===null)throw Error(l(188));return a!==t?null:t}for(var i=t,o=a;;){var h=i.return;if(h===null)break;var x=h.alternate;if(x===null){if(o=h.return,o!==null){i=o;continue}break}if(h.child===x.child){for(x=h.child;x;){if(x===i)return b(h),t;if(x===o)return b(h),a;x=x.sibling}throw Error(l(188))}if(i.return!==o.return)i=h,o=x;else{for(var C=!1,_=h.child;_;){if(_===i){C=!0,i=h,o=x;break}if(_===o){C=!0,o=h,i=x;break}_=_.sibling}if(!C){for(_=x.child;_;){if(_===i){C=!0,i=x,o=h;break}if(_===o){C=!0,o=x,i=h;break}_=_.sibling}if(!C)throw Error(l(189))}}if(i.alternate!==o)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?t:a}function j(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=j(t),a!==null)return a;t=t.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),B=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function me(t){return t===null||typeof t!="object"?null:(t=le&&t[le]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Symbol.for("react.client.reference");function F(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ve?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case T:return"Fragment";case L:return"Profiler";case $:return"StrictMode";case U:return"Suspense";case O:return"SuspenseList";case Q:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case B:return t.displayName||"Context";case M:return(t._context.displayName||"Context")+".Consumer";case ce:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return a=t.displayName||null,a!==null?a:F(t.type)||"Memo";case W:a=t._payload,t=t._init;try{return F(t(a))}catch{}}return null}var J=Array.isArray,I=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},de=[],Ce=-1;function A(t){return{current:t}}function G(t){0>Ce||(t.current=de[Ce],de[Ce]=null,Ce--)}function ie(t,a){Ce++,de[Ce]=t.current,t.current=a}var Re=A(null),ge=A(null),R=A(null),re=A(null);function je(t,a){switch(ie(R,a),ie(ge,t),ie(Re,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Cg(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Cg(a),t=Ag(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(Re),ie(Re,t)}function Ie(){G(Re),G(ge),G(R)}function Be(t){t.memoizedState!==null&&ie(re,t);var a=Re.current,i=Ag(a,t.type);a!==i&&(ie(ge,t),ie(Re,i))}function et(t){ge.current===t&&(G(Re),G(ge)),re.current===t&&(G(re),ed._currentValue=q)}var fe,se;function te(t){if(fe===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);fe=a&&a[1]||"",se=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+t+se}var be=!1;function We(t,a){if(!t||be)return"";be=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var Ke=function(){throw Error()};if(Object.defineProperty(Ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ke,[])}catch($e){var Oe=$e}Reflect.construct(t,[],Ke)}else{try{Ke.call()}catch($e){Oe=$e}t.call(Ke.prototype)}}else{try{throw Error()}catch($e){Oe=$e}(Ke=t())&&typeof Ke.catch=="function"&&Ke.catch(function(){})}}catch($e){if($e&&Oe&&typeof $e.stack=="string")return[$e.stack,Oe.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=o.DetermineComponentFrameRoot(),C=x[0],_=x[1];if(C&&_){var ae=C.split(`
`),Se=_.split(`
`);for(h=o=0;o<ae.length&&!ae[o].includes("DetermineComponentFrameRoot");)o++;for(;h<Se.length&&!Se[h].includes("DetermineComponentFrameRoot");)h++;if(o===ae.length||h===Se.length)for(o=ae.length-1,h=Se.length-1;1<=o&&0<=h&&ae[o]!==Se[h];)h--;for(;1<=o&&0<=h;o--,h--)if(ae[o]!==Se[h]){if(o!==1||h!==1)do if(o--,h--,0>h||ae[o]!==Se[h]){var Ge=`
`+ae[o].replace(" at new "," at ");return t.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",t.displayName)),Ge}while(1<=o&&0<=h);break}}}finally{be=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?te(i):""}function at(t,a){switch(t.tag){case 26:case 27:case 5:return te(t.type);case 16:return te("Lazy");case 13:return t.child!==a&&a!==null?te("Suspense Fallback"):te("Suspense");case 19:return te("SuspenseList");case 0:case 15:return We(t.type,!1);case 11:return We(t.type.render,!1);case 1:return We(t.type,!0);case 31:return te("Activity");default:return""}}function _e(t){try{var a="",i=null;do a+=at(t,i),i=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var At=Object.prototype.hasOwnProperty,Xt=s.unstable_scheduleCallback,Ft=s.unstable_cancelCallback,As=s.unstable_shouldYield,Vs=s.unstable_requestPaint,$t=s.unstable_now,Bs=s.unstable_getCurrentPriorityLevel,vs=s.unstable_ImmediatePriority,fa=s.unstable_UserBlockingPriority,$s=s.unstable_NormalPriority,Zs=s.unstable_LowPriority,pa=s.unstable_IdlePriority,rr=s.log,Tt=s.unstable_setDisableYieldValue,ha=null,Vt=null;function xa(t){if(typeof rr=="function"&&Tt(t),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(ha,t)}catch{}}var Ns=Math.clz32?Math.clz32:ft,va=Math.log,qe=Math.LN2;function ft(t){return t>>>=0,t===0?32:31-(va(t)/qe|0)|0}var xt=256,Ps=262144,Qs=4194304;function Js(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ms(t,a,i){var o=t.pendingLanes;if(o===0)return 0;var h=0,x=t.suspendedLanes,C=t.pingedLanes;t=t.warmLanes;var _=o&134217727;return _!==0?(o=_&~x,o!==0?h=Js(o):(C&=_,C!==0?h=Js(C):i||(i=_&~t,i!==0&&(h=Js(i))))):(_=o&~x,_!==0?h=Js(_):C!==0?h=Js(C):i||(i=o&~t,i!==0&&(h=Js(i)))),h===0?0:a!==0&&a!==h&&(a&x)===0&&(x=h&-h,i=a&-a,x>=i||x===32&&(i&4194048)!==0)?a:h}function ra(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Pa(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ja(){var t=Qs;return Qs<<=1,(Qs&62914560)===0&&(Qs=4194304),t}function ir(t){for(var a=[],i=0;31>i;i++)a.push(t);return a}function Zr(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Sn(t,a,i,o,h,x){var C=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var _=t.entanglements,ae=t.expirationTimes,Se=t.hiddenUpdates;for(i=C&~i;0<i;){var Ge=31-Ns(i),Ke=1<<Ge;_[Ge]=0,ae[Ge]=-1;var Oe=Se[Ge];if(Oe!==null)for(Se[Ge]=null,Ge=0;Ge<Oe.length;Ge++){var $e=Oe[Ge];$e!==null&&($e.lane&=-536870913)}i&=~Ke}o!==0&&Mi(t,o,0),x!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=x&~(C&~a))}function Mi(t,a,i){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-Ns(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|i&261930}function X(t,a){var i=t.entangledLanes|=a;for(t=t.entanglements;i;){var o=31-Ns(i),h=1<<o;h&a|t[o]&a&&(t[o]|=a),i&=~h}}function he(t,a){var i=a&-a;return i=(i&42)!==0?1:Ee(i),(i&(t.suspendedLanes|a))!==0?0:i}function Ee(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function tt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function it(){var t=K.p;return t!==0?t:(t=window.event,t===void 0?32:Wg(t.type))}function Dt(t,a){var i=K.p;try{return K.p=t,a()}finally{K.p=i}}var lt=Math.random().toString(36).slice(2),dt="__reactFiber$"+lt,vt="__reactProps$"+lt,Pt="__reactContainer$"+lt,Mt="__reactEvents$"+lt,_t="__reactListeners$"+lt,Kt="__reactHandles$"+lt,os="__reactResources$"+lt,ps="__reactMarker$"+lt;function Ks(t){delete t[dt],delete t[vt],delete t[Mt],delete t[_t],delete t[Kt]}function es(t){var a=t[dt];if(a)return a;for(var i=t.parentNode;i;){if(a=i[Pt]||i[dt]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(t=Rg(t);t!==null;){if(i=t[dt])return i;t=Rg(t)}return a}t=i,i=t.parentNode}return null}function is(t){if(t=t[dt]||t[Pt]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function rs(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(l(33))}function nr(t){var a=t[os];return a||(a=t[os]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Xs(t){t[ps]=!0}var mr=new Set,gr={};function qs(t,a){Ka(t,a),Ka(t+"Capture",a)}function Ka(t,a){for(gr[t]=a,t=0;t<a.length;t++)mr.add(a[t])}var Jr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zs={},Yt={};function hs(t){return At.call(Yt,t)?!0:At.call(zs,t)?!1:Jr.test(t)?Yt[t]=!0:(zs[t]=!0,!1)}function Oa(t,a,i){if(hs(a))if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+i)}}function ea(t,a,i){if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+i)}}function us(t,a,i,o){if(o===null)t.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(a,i,""+o)}}function da(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ui(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Xa(t,a,i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,x=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return h.call(this)},set:function(C){i=""+C,x.call(this,C)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(C){i=""+C},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function _i(t){if(!t._valueTracker){var a=ui(t)?"checked":"value";t._valueTracker=Xa(t,a,""+t[a])}}function mi(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var i=a.getValue(),o="";return t&&(o=ui(t)?t.checked?"true":"false":t.value),t=o,t!==i?(a.setValue(t),!0):!1}function er(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Na=/[\n"\\]/g;function ta(t){return t.replace(Na,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function cs(t,a,i,o,h,x,C,_){t.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.type=C:t.removeAttribute("type"),a!=null?C==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+da(a)):t.value!==""+da(a)&&(t.value=""+da(a)):C!=="submit"&&C!=="reset"||t.removeAttribute("value"),a!=null?ql(t,C,da(a)):i!=null?ql(t,C,da(i)):o!=null&&t.removeAttribute("value"),h==null&&x!=null&&(t.defaultChecked=!!x),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+da(_):t.removeAttribute("name")}function Kr(t,a,i,o,h,x,C,_){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.type=x),a!=null||i!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){_i(t);return}i=i!=null?""+da(i):"",a=a!=null?""+da(a):i,_||a===t.value||(t.value=a),t.defaultValue=a}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=_?t.checked:!!o,t.defaultChecked=!!o,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(t.name=C),_i(t)}function ql(t,a,i){a==="number"&&er(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function fi(t,a,i,o){if(t=t.options,a){a={};for(var h=0;h<i.length;h++)a["$"+i[h]]=!0;for(i=0;i<t.length;i++)h=a.hasOwnProperty("$"+t[i].value),t[i].selected!==h&&(t[i].selected=h),h&&o&&(t[i].defaultSelected=!0)}else{for(i=""+da(i),a=null,h=0;h<t.length;h++){if(t[h].value===i){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}a!==null||t[h].disabled||(a=t[h])}a!==null&&(a.selected=!0)}}function pi(t,a,i){if(a!=null&&(a=""+da(a),a!==t.value&&(t.value=a),i==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=i!=null?""+da(i):""}function oe(t,a,i,o){if(a==null){if(o!=null){if(i!=null)throw Error(l(92));if(J(o)){if(1<o.length)throw Error(l(93));o=o[0]}i=o}i==null&&(i=""),a=i}i=da(a),t.defaultValue=i,o=t.textContent,o===i&&o!==""&&o!==null&&(t.value=o),_i(t)}function Fe(t,a){if(a){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=a;return}}t.textContent=a}var we=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ye(t,a,i){var o=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,i):typeof i!="number"||i===0||we.has(a)?a==="float"?t.cssFloat=i:t[a]=(""+i).trim():t[a]=i+"px"}function Le(t,a,i){if(a!=null&&typeof a!="object")throw Error(l(62));if(t=t.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in a)o=a[h],a.hasOwnProperty(h)&&i[h]!==o&&ye(t,h,o)}else for(var x in a)a.hasOwnProperty(x)&&ye(t,x,a[x])}function rt(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Te=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ue=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Me(t){return Ue.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ze(){}var ve=null;function pt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ke=null,nt=null;function Wt(t){var a=is(t);if(a&&(t=a.stateNode)){var i=t[vt]||null;e:switch(t=a.stateNode,a.type){case"input":if(cs(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ta(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var o=i[a];if(o!==t&&o.form===t.form){var h=o[vt]||null;if(!h)throw Error(l(90));cs(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<i.length;a++)o=i[a],o.form===t.form&&mi(o)}break e;case"textarea":pi(t,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&fi(t,!!i.multiple,a,!1)}}}var Es=!1;function ts(t,a,i){if(Es)return t(a,i);Es=!0;try{var o=t(a);return o}finally{if(Es=!1,(ke!==null||nt!==null)&&(Mu(),ke&&(a=ke,t=nt,nt=ke=null,Wt(a),t)))for(a=0;a<t.length;a++)Wt(t[a])}}function xs(t,a){var i=t.stateNode;if(i===null)return null;var o=i[vt]||null;if(o===null)return null;i=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(l(231,a,typeof i));return i}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pe=!1;if(ns)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){pe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch{pe=!1}var Je=null,ht=null,Et=null;function He(){if(Et)return Et;var t,a=ht,i=a.length,o,h="value"in Je?Je.value:Je.textContent,x=h.length;for(t=0;t<i&&a[t]===h[t];t++);var C=i-t;for(o=1;o<=C&&a[i-o]===h[x-o];o++);return Et=h.slice(t,1<o?1-o:void 0)}function Ye(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Xe(){return!0}function It(){return!1}function kt(t){function a(i,o,h,x,C){this._reactName=i,this._targetInst=h,this.type=o,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(i=t[_],this[_]=i?i(x):x[_]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Xe:It,this.isPropagationStopped=It,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Xe)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Xe)},persist:function(){},isPersistent:Xe}),a}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=kt(Fs),qt=v({},Fs,{view:0,detail:0}),Ts=kt(qt),wt,Ra,Ba,sn=v({},qt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ba&&(Ba&&t.type==="mousemove"?(wt=t.screenX-Ba.screenX,Ra=t.screenY-Ba.screenY):Ra=wt=0,Ba=t),wt)},movementY:function(t){return"movementY"in t?t.movementY:Ra}}),Dr=kt(sn),an=v({},sn,{dataTransfer:0}),zi=kt(an),sl=v({},qt,{relatedTarget:0}),Hl=kt(sl),Gl=v({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),fc=kt(Gl),Qd=v({},Fs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$m=kt(Qd),Yd=v({},Fs,{data:0}),Li=kt(Yd),pc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},go={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wd(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=go[t])?!!a[t]:!1}function hc(){return Wd}var Rt=v({},qt,{key:function(t){if(t.key){var a=pc[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Ye(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hc,charCode:function(t){return t.type==="keypress"?Ye(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ye(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ma=kt(Rt),bo=v({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xc=kt(bo),Um=v({},qt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hc}),Zd=kt(Um),rn=v({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jd=kt(rn),Im=v({},sn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gc=kt(Im),_s=v({},Fs,{newState:0,oldState:0}),$i=kt(_s),Pr=[9,13,27,32],nn=ns&&"CompositionEvent"in window,Fi=null;ns&&"documentMode"in document&&(Fi=document.documentMode);var Kd=ns&&"TextEvent"in window&&!Fi,qa=ns&&(!nn||Fi&&8<Fi&&11>=Fi),bc=" ",Xd=!1;function yc(t,a){switch(t){case"keyup":return Pr.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ui(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cn=!1;function br(t,a){switch(t){case"compositionend":return Ui(a);case"keypress":return a.which!==32?null:(Xd=!0,bc);case"textInput":return t=a.data,t===bc&&Xd?null:t;default:return null}}function An(t,a){if(Cn)return t==="compositionend"||!nn&&yc(t,a)?(t=He(),Et=ht=Je=null,Cn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return qa&&a.locale!=="ko"?null:a.data;default:return null}}var ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eu(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!ln[t.type]:a==="textarea"}function tu(t,a,i,o){ke?nt?nt.push(o):nt=[o]:ke=o,a=Iu(a,"onChange"),0<a.length&&(i=new Os("onChange","change",null,i,o),t.push({event:i,listeners:a}))}var al=null,yr=null;function jc(t){yg(t,0)}function En(t){var a=rs(t);if(mi(a))return t}function rl(t,a){if(t==="change")return a}var vc=!1;if(ns){var il;if(ns){var zt="oninput"in document;if(!zt){var lr=document.createElement("div");lr.setAttribute("oninput","return;"),zt=typeof lr.oninput=="function"}il=zt}else il=!1;vc=il&&(!document.documentMode||9<document.documentMode)}function Z(){al&&(al.detachEvent("onpropertychange",mt),yr=al=null)}function mt(t){if(t.propertyName==="value"&&En(yr)){var a=[];tu(a,yr,t,pt(t)),ts(jc,a)}}function Vm(t,a,i){t==="focusin"?(Z(),al=a,yr=i,al.attachEvent("onpropertychange",mt)):t==="focusout"&&Z()}function su(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return En(yr)}function Ct(t,a){if(t==="click")return En(a)}function Tn(t,a){if(t==="input"||t==="change")return En(a)}function gt(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ba=typeof Object.is=="function"?Object.is:gt;function hi(t,a){if(ba(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var i=Object.keys(t),o=Object.keys(a);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var h=i[o];if(!At.call(a,h)||!ba(t[h],a[h]))return!1}return!0}function on(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Or(t,a){var i=on(t);t=0;for(var o;i;){if(i.nodeType===3){if(o=t+i.textContent.length,t<=a&&o>=a)return{node:i,offset:a-t};t=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=on(i)}}function au(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?au(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function xi(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=er(t.document);a instanceof t.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)t=a.contentWindow;else break;a=er(t.document)}return a}function yo(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var nl=ns&&"documentMode"in document&&11>=document.documentMode,kn=null,Ql=null,Xr=null,Nc=!1;function wc(t,a,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Nc||kn==null||kn!==er(o)||(o=kn,"selectionStart"in o&&yo(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Xr&&hi(Xr,o)||(Xr=o,o=Iu(Ql,"onSelect"),0<o.length&&(a=new Os("onSelect","select",null,a,i),t.push({event:a,listeners:o}),a.target=kn)))}function Dn(t,a){var i={};return i[t.toLowerCase()]=a.toLowerCase(),i["Webkit"+t]="webkit"+a,i["Moz"+t]="moz"+a,i}var cn={animationend:Dn("Animation","AnimationEnd"),animationiteration:Dn("Animation","AnimationIteration"),animationstart:Dn("Animation","AnimationStart"),transitionrun:Dn("Transition","TransitionRun"),transitionstart:Dn("Transition","TransitionStart"),transitioncancel:Dn("Transition","TransitionCancel"),transitionend:Dn("Transition","TransitionEnd")},dn={},jo={};ns&&(jo=document.createElement("div").style,"AnimationEvent"in window||(delete cn.animationend.animation,delete cn.animationiteration.animation,delete cn.animationstart.animation),"TransitionEvent"in window||delete cn.transitionend.transition);function Ii(t){if(dn[t])return dn[t];if(!cn[t])return t;var a=cn[t],i;for(i in a)if(a.hasOwnProperty(i)&&i in jo)return dn[t]=a[i];return t}var ll=Ii("animationend"),vo=Ii("animationiteration"),ru=Ii("animationstart"),Bm=Ii("transitionrun"),No=Ii("transitionstart"),qm=Ii("transitioncancel"),iu=Ii("transitionend"),Yl=new Map,Sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sc.push("scrollEnd");function ei(t,a){Yl.set(t,a),qs(a,[t])}var un=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},jr=[],Pn=0,Rr=0;function wo(){for(var t=Pn,a=Rr=Pn=0;a<t;){var i=jr[a];jr[a++]=null;var o=jr[a];jr[a++]=null;var h=jr[a];jr[a++]=null;var x=jr[a];if(jr[a++]=null,o!==null&&h!==null){var C=o.pending;C===null?h.next=h:(h.next=C.next,C.next=h),o.pending=h}x!==0&&nu(i,h,x)}}function or(t,a,i,o){jr[Pn++]=t,jr[Pn++]=a,jr[Pn++]=i,jr[Pn++]=o,Rr|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Cc(t,a,i,o){return or(t,a,i,o),So(t)}function mn(t,a){return or(t,null,null,a),So(t)}function nu(t,a,i){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i);for(var h=!1,x=t.return;x!==null;)x.childLanes|=i,o=x.alternate,o!==null&&(o.childLanes|=i),x.tag===22&&(t=x.stateNode,t===null||t._visibility&1||(h=!0)),t=x,x=x.return;return t.tag===3?(x=t.stateNode,h&&a!==null&&(h=31-Ns(i),t=x.hiddenUpdates,o=t[h],o===null?t[h]=[a]:o.push(a),a.lane=i|536870912),x):null}function So(t){if(50<Qc)throw Qc=0,If=null,Error(l(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Mr={};function Hm(t,a,i,o){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(t,a,i,o){return new Hm(t,a,i,o)}function Ac(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _r(t,a){var i=t.alternate;return i===null?(i=vr(t.tag,a,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=a,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,a=t.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function lu(t,a){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,a=i.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Co(t,a,i,o,h,x){var C=0;if(o=t,typeof t=="function")Ac(t)&&(C=1);else if(typeof t=="string")C=Hw(t,i,Re.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Q:return t=vr(31,i,a,h),t.elementType=Q,t.lanes=x,t;case T:return On(i.children,h,x,a);case $:C=8,h|=24;break;case L:return t=vr(12,i,a,h|2),t.elementType=L,t.lanes=x,t;case U:return t=vr(13,i,a,h),t.elementType=U,t.lanes=x,t;case O:return t=vr(19,i,a,h),t.elementType=O,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B:C=10;break e;case M:C=9;break e;case ce:C=11;break e;case k:C=14;break e;case W:C=16,o=null;break e}C=29,i=Error(l(130,t===null?"null":typeof t,"")),o=null}return a=vr(C,i,a,h),a.elementType=t,a.type=o,a.lanes=x,a}function On(t,a,i,o){return t=vr(7,t,o,a),t.lanes=i,t}function Ec(t,a,i){return t=vr(6,t,null,a),t.lanes=i,t}function ol(t){var a=vr(18,null,null,0);return a.stateNode=t,a}function Tc(t,a,i){return a=vr(4,t.children!==null?t.children:[],t.key,a),a.lanes=i,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Wl=new WeakMap;function zr(t,a){if(typeof t=="object"&&t!==null){var i=Wl.get(t);return i!==void 0?i:(a={value:t,source:a,stack:_e(a)},Wl.set(t,a),a)}return{value:t,source:a,stack:_e(a)}}var fn=[],cl=0,Rn=null,Zl=0,Lr=[],$r=0,Vi=null,ti=1,gi="";function Bi(t,a){fn[cl++]=Zl,fn[cl++]=Rn,Rn=t,Zl=a}function ou(t,a,i){Lr[$r++]=ti,Lr[$r++]=gi,Lr[$r++]=Vi,Vi=t;var o=ti;t=gi;var h=32-Ns(o)-1;o&=~(1<<h),i+=1;var x=32-Ns(a)+h;if(30<x){var C=h-h%5;x=(o&(1<<C)-1).toString(32),o>>=C,h-=C,ti=1<<32-Ns(a)+h|i<<h|o,gi=x+t}else ti=1<<x|i<<h|o,gi=t}function kc(t){t.return!==null&&(Bi(t,1),ou(t,1,0))}function Dc(t){for(;t===Rn;)Rn=fn[--cl],fn[cl]=null,Zl=fn[--cl],fn[cl]=null;for(;t===Vi;)Vi=Lr[--$r],Lr[$r]=null,gi=Lr[--$r],Lr[$r]=null,ti=Lr[--$r],Lr[$r]=null}function cu(t,a){Lr[$r++]=ti,Lr[$r++]=gi,Lr[$r++]=Vi,ti=a.id,gi=a.overflow,Vi=t}var Ha=null,ia=null,gs=!1,pn=null,Ga=!1,Ao=Error(l(519));function qi(t){var a=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ul(zr(a,t)),Ao}function Jl(t){var a=t.stateNode,i=t.type,o=t.memoizedProps;switch(a[dt]=t,a[vt]=o,i){case"dialog":Cs("cancel",a),Cs("close",a);break;case"iframe":case"object":case"embed":Cs("load",a);break;case"video":case"audio":for(i=0;i<Wc.length;i++)Cs(Wc[i],a);break;case"source":Cs("error",a);break;case"img":case"image":case"link":Cs("error",a),Cs("load",a);break;case"details":Cs("toggle",a);break;case"input":Cs("invalid",a),Kr(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Cs("invalid",a);break;case"textarea":Cs("invalid",a),oe(a,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||o.suppressHydrationWarning===!0||wg(a.textContent,i)?(o.popover!=null&&(Cs("beforetoggle",a),Cs("toggle",a)),o.onScroll!=null&&Cs("scroll",a),o.onScrollEnd!=null&&Cs("scrollend",a),o.onClick!=null&&(a.onclick=ze),a=!0):a=!1,a||qi(t,!0)}function Pc(t){for(Ha=t.return;Ha;)switch(Ha.tag){case 5:case 31:case 13:Ga=!1;return;case 27:case 3:Ga=!0;return;default:Ha=Ha.return}}function dl(t){if(t!==Ha)return!1;if(!gs)return Pc(t),gs=!0,!1;var a=t.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||sp(t.type,t.memoizedProps)),i=!i),i&&ia&&qi(t),Pc(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));ia=Og(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));ia=Og(t)}else a===27?(a=ia,Sl(t.type)?(t=lp,lp=null,ia=t):ia=a):ia=Ha?Si(t.stateNode.nextSibling):null;return!0}function Mn(){ia=Ha=null,gs=!1}function Eo(){var t=pn;return t!==null&&(Hr===null?Hr=t:Hr.push.apply(Hr,t),pn=null),t}function ul(t){pn===null?pn=[t]:pn.push(t)}var To=A(null),hn=null,bi=null;function Hi(t,a,i){ie(To,a._currentValue),a._currentValue=i}function yi(t){t._currentValue=To.current,G(To)}function c(t,a,i){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===i)break;t=t.return}}function g(t,a,i,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var x=h.dependencies;if(x!==null){var C=h.child;x=x.firstContext;e:for(;x!==null;){var _=x;x=h;for(var ae=0;ae<a.length;ae++)if(_.context===a[ae]){x.lanes|=i,_=x.alternate,_!==null&&(_.lanes|=i),c(x.return,i,t),o||(C=null);break e}x=_.next}}else if(h.tag===18){if(C=h.return,C===null)throw Error(l(341));C.lanes|=i,x=C.alternate,x!==null&&(x.lanes|=i),c(C,i,t),C=null}else C=h.child;if(C!==null)C.return=h;else for(C=h;C!==null;){if(C===t){C=null;break}if(h=C.sibling,h!==null){h.return=C.return,C=h;break}C=C.return}h=C}}function N(t,a,i,o){t=null;for(var h=a,x=!1;h!==null;){if(!x){if((h.flags&524288)!==0)x=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var C=h.alternate;if(C===null)throw Error(l(387));if(C=C.memoizedProps,C!==null){var _=h.type;ba(h.pendingProps.value,C.value)||(t!==null?t.push(_):t=[_])}}else if(h===re.current){if(C=h.alternate,C===null)throw Error(l(387));C.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ed):t=[ed])}h=h.return}t!==null&&g(a,t,i,o),a.flags|=262144}function S(t){for(t=t.firstContext;t!==null;){if(!ba(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function E(t){hn=t,bi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function z(t){return H(hn,t)}function V(t,a){return hn===null&&E(t),H(t,a)}function H(t,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},bi===null){if(t===null)throw Error(l(308));bi=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else bi=bi.next=a;return i}var Y=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(i,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(i){return i()})}},ee=s.unstable_scheduleCallback,De=s.unstable_NormalPriority,Qe={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yt(){return{controller:new Y,data:new Map,refCount:0}}function Ut(t){t.refCount--,t.refCount===0&&ee(De,function(){t.controller.abort()})}var St=null,Nt=0,jt=0,Bt=null;function ot(t,a){if(St===null){var i=St=[];Nt=0,jt=Qf(),Bt={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Nt++,a.then(Gt,Gt),a}function Gt(){if(--Nt===0&&St!==null){Bt!==null&&(Bt.status="fulfilled");var t=St;St=null,jt=0,Bt=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Ys(t,a){var i=[],o={status:"pending",value:null,reason:null,then:function(h){i.push(h)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var h=0;h<i.length;h++)(0,i[h])(a)},function(h){for(o.status="rejected",o.reason=h,h=0;h<i.length;h++)(0,i[h])(void 0)}),o}var Fr=I.S;I.S=function(t,a){Q0=$t(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&ot(t,a),Fr!==null&&Fr(t,a)};var bt=A(null);function Rs(){var t=bt.current;return t!==null?t:ua.pooledCache}function ws(t,a){a===null?ie(bt,bt.current):ie(bt,a.pool)}function Ur(){var t=Rs();return t===null?null:{parent:Qe._currentValue,pool:t}}var fr=Error(l(460)),Qa=Error(l(474)),ji=Error(l(542)),ct={then:function(){}};function du(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Nr(t,a,i){switch(i=t[i],i===void 0?t.push(a):i!==a&&(a.then(ze,ze),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,mu(t),t;default:if(typeof a.status=="string")a.then(ze,ze);else{if(t=ua,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=o}},function(o){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,mu(t),t}throw _n=a,fr}}function si(t){try{var a=t._init;return a(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(_n=i,fr):i}}var _n=null;function uu(){if(_n===null)throw Error(l(459));var t=_n;return _n=null,t}function mu(t){if(t===fr||t===ji)throw Error(l(483))}var ml=null,Kl=0;function ko(t){var a=Kl;return Kl+=1,ml===null&&(ml=[]),Nr(ml,t,a)}function vi(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Xl(t,a){throw a.$$typeof===w?Error(l(525)):(t=Object.prototype.toString.call(a),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Zt(t){function a(xe,ue){if(t){var Ne=xe.deletions;Ne===null?(xe.deletions=[ue],xe.flags|=16):Ne.push(ue)}}function i(xe,ue){if(!t)return null;for(;ue!==null;)a(xe,ue),ue=ue.sibling;return null}function o(xe){for(var ue=new Map;xe!==null;)xe.key!==null?ue.set(xe.key,xe):ue.set(xe.index,xe),xe=xe.sibling;return ue}function h(xe,ue){return xe=_r(xe,ue),xe.index=0,xe.sibling=null,xe}function x(xe,ue,Ne){return xe.index=Ne,t?(Ne=xe.alternate,Ne!==null?(Ne=Ne.index,Ne<ue?(xe.flags|=67108866,ue):Ne):(xe.flags|=67108866,ue)):(xe.flags|=1048576,ue)}function C(xe){return t&&xe.alternate===null&&(xe.flags|=67108866),xe}function _(xe,ue,Ne,Ze){return ue===null||ue.tag!==6?(ue=Ec(Ne,xe.mode,Ze),ue.return=xe,ue):(ue=h(ue,Ne),ue.return=xe,ue)}function ae(xe,ue,Ne,Ze){var Ht=Ne.type;return Ht===T?Ge(xe,ue,Ne.props.children,Ze,Ne.key):ue!==null&&(ue.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===W&&si(Ht)===ue.type)?(ue=h(ue,Ne.props),vi(ue,Ne),ue.return=xe,ue):(ue=Co(Ne.type,Ne.key,Ne.props,null,xe.mode,Ze),vi(ue,Ne),ue.return=xe,ue)}function Se(xe,ue,Ne,Ze){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==Ne.containerInfo||ue.stateNode.implementation!==Ne.implementation?(ue=Tc(Ne,xe.mode,Ze),ue.return=xe,ue):(ue=h(ue,Ne.children||[]),ue.return=xe,ue)}function Ge(xe,ue,Ne,Ze,Ht){return ue===null||ue.tag!==7?(ue=On(Ne,xe.mode,Ze,Ht),ue.return=xe,ue):(ue=h(ue,Ne),ue.return=xe,ue)}function Ke(xe,ue,Ne){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=Ec(""+ue,xe.mode,Ne),ue.return=xe,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case D:return Ne=Co(ue.type,ue.key,ue.props,null,xe.mode,Ne),vi(Ne,ue),Ne.return=xe,Ne;case P:return ue=Tc(ue,xe.mode,Ne),ue.return=xe,ue;case W:return ue=si(ue),Ke(xe,ue,Ne)}if(J(ue)||me(ue))return ue=On(ue,xe.mode,Ne,null),ue.return=xe,ue;if(typeof ue.then=="function")return Ke(xe,ko(ue),Ne);if(ue.$$typeof===B)return Ke(xe,V(xe,ue),Ne);Xl(xe,ue)}return null}function Oe(xe,ue,Ne,Ze){var Ht=ue!==null?ue.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ht!==null?null:_(xe,ue,""+Ne,Ze);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case D:return Ne.key===Ht?ae(xe,ue,Ne,Ze):null;case P:return Ne.key===Ht?Se(xe,ue,Ne,Ze):null;case W:return Ne=si(Ne),Oe(xe,ue,Ne,Ze)}if(J(Ne)||me(Ne))return Ht!==null?null:Ge(xe,ue,Ne,Ze,null);if(typeof Ne.then=="function")return Oe(xe,ue,ko(Ne),Ze);if(Ne.$$typeof===B)return Oe(xe,ue,V(xe,Ne),Ze);Xl(xe,Ne)}return null}function $e(xe,ue,Ne,Ze,Ht){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return xe=xe.get(Ne)||null,_(ue,xe,""+Ze,Ht);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case D:return xe=xe.get(Ze.key===null?Ne:Ze.key)||null,ae(ue,xe,Ze,Ht);case P:return xe=xe.get(Ze.key===null?Ne:Ze.key)||null,Se(ue,xe,Ze,Ht);case W:return Ze=si(Ze),$e(xe,ue,Ne,Ze,Ht)}if(J(Ze)||me(Ze))return xe=xe.get(Ne)||null,Ge(ue,xe,Ze,Ht,null);if(typeof Ze.then=="function")return $e(xe,ue,Ne,ko(Ze),Ht);if(Ze.$$typeof===B)return $e(xe,ue,Ne,V(ue,Ze),Ht);Xl(ue,Ze)}return null}function Ot(xe,ue,Ne,Ze){for(var Ht=null,Us=null,Lt=ue,fs=ue=0,Ds=null;Lt!==null&&fs<Ne.length;fs++){Lt.index>fs?(Ds=Lt,Lt=null):Ds=Lt.sibling;var Is=Oe(xe,Lt,Ne[fs],Ze);if(Is===null){Lt===null&&(Lt=Ds);break}t&&Lt&&Is.alternate===null&&a(xe,Lt),ue=x(Is,ue,fs),Us===null?Ht=Is:Us.sibling=Is,Us=Is,Lt=Ds}if(fs===Ne.length)return i(xe,Lt),gs&&Bi(xe,fs),Ht;if(Lt===null){for(;fs<Ne.length;fs++)Lt=Ke(xe,Ne[fs],Ze),Lt!==null&&(ue=x(Lt,ue,fs),Us===null?Ht=Lt:Us.sibling=Lt,Us=Lt);return gs&&Bi(xe,fs),Ht}for(Lt=o(Lt);fs<Ne.length;fs++)Ds=$e(Lt,xe,fs,Ne[fs],Ze),Ds!==null&&(t&&Ds.alternate!==null&&Lt.delete(Ds.key===null?fs:Ds.key),ue=x(Ds,ue,fs),Us===null?Ht=Ds:Us.sibling=Ds,Us=Ds);return t&&Lt.forEach(function(kl){return a(xe,kl)}),gs&&Bi(xe,fs),Ht}function Jt(xe,ue,Ne,Ze){if(Ne==null)throw Error(l(151));for(var Ht=null,Us=null,Lt=ue,fs=ue=0,Ds=null,Is=Ne.next();Lt!==null&&!Is.done;fs++,Is=Ne.next()){Lt.index>fs?(Ds=Lt,Lt=null):Ds=Lt.sibling;var kl=Oe(xe,Lt,Is.value,Ze);if(kl===null){Lt===null&&(Lt=Ds);break}t&&Lt&&kl.alternate===null&&a(xe,Lt),ue=x(kl,ue,fs),Us===null?Ht=kl:Us.sibling=kl,Us=kl,Lt=Ds}if(Is.done)return i(xe,Lt),gs&&Bi(xe,fs),Ht;if(Lt===null){for(;!Is.done;fs++,Is=Ne.next())Is=Ke(xe,Is.value,Ze),Is!==null&&(ue=x(Is,ue,fs),Us===null?Ht=Is:Us.sibling=Is,Us=Is);return gs&&Bi(xe,fs),Ht}for(Lt=o(Lt);!Is.done;fs++,Is=Ne.next())Is=$e(Lt,xe,fs,Is.value,Ze),Is!==null&&(t&&Is.alternate!==null&&Lt.delete(Is.key===null?fs:Is.key),ue=x(Is,ue,fs),Us===null?Ht=Is:Us.sibling=Is,Us=Is);return t&&Lt.forEach(function(s1){return a(xe,s1)}),gs&&Bi(xe,fs),Ht}function oa(xe,ue,Ne,Ze){if(typeof Ne=="object"&&Ne!==null&&Ne.type===T&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case D:e:{for(var Ht=Ne.key;ue!==null;){if(ue.key===Ht){if(Ht=Ne.type,Ht===T){if(ue.tag===7){i(xe,ue.sibling),Ze=h(ue,Ne.props.children),Ze.return=xe,xe=Ze;break e}}else if(ue.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===W&&si(Ht)===ue.type){i(xe,ue.sibling),Ze=h(ue,Ne.props),vi(Ze,Ne),Ze.return=xe,xe=Ze;break e}i(xe,ue);break}else a(xe,ue);ue=ue.sibling}Ne.type===T?(Ze=On(Ne.props.children,xe.mode,Ze,Ne.key),Ze.return=xe,xe=Ze):(Ze=Co(Ne.type,Ne.key,Ne.props,null,xe.mode,Ze),vi(Ze,Ne),Ze.return=xe,xe=Ze)}return C(xe);case P:e:{for(Ht=Ne.key;ue!==null;){if(ue.key===Ht)if(ue.tag===4&&ue.stateNode.containerInfo===Ne.containerInfo&&ue.stateNode.implementation===Ne.implementation){i(xe,ue.sibling),Ze=h(ue,Ne.children||[]),Ze.return=xe,xe=Ze;break e}else{i(xe,ue);break}else a(xe,ue);ue=ue.sibling}Ze=Tc(Ne,xe.mode,Ze),Ze.return=xe,xe=Ze}return C(xe);case W:return Ne=si(Ne),oa(xe,ue,Ne,Ze)}if(J(Ne))return Ot(xe,ue,Ne,Ze);if(me(Ne)){if(Ht=me(Ne),typeof Ht!="function")throw Error(l(150));return Ne=Ht.call(Ne),Jt(xe,ue,Ne,Ze)}if(typeof Ne.then=="function")return oa(xe,ue,ko(Ne),Ze);if(Ne.$$typeof===B)return oa(xe,ue,V(xe,Ne),Ze);Xl(xe,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,ue!==null&&ue.tag===6?(i(xe,ue.sibling),Ze=h(ue,Ne),Ze.return=xe,xe=Ze):(i(xe,ue),Ze=Ec(Ne,xe.mode,Ze),Ze.return=xe,xe=Ze),C(xe)):i(xe,ue)}return function(xe,ue,Ne,Ze){try{Kl=0;var Ht=oa(xe,ue,Ne,Ze);return ml=null,Ht}catch(Lt){if(Lt===fr||Lt===ji)throw Lt;var Us=vr(29,Lt,null,xe.mode);return Us.lanes=Ze,Us.return=xe,Us}finally{}}}var ms=Zt(!0),Ir=Zt(!1),Ni=!1;function Gm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qm(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fl(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pl(t,a,i){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Hs&2)!==0){var h=o.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),o.pending=a,a=So(t),nu(t,null,i),a}return or(t,o,a,i),So(t)}function Oc(t,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,i|=o,a.lanes=i,X(t,i)}}function Ym(t,a){var i=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var h=null,x=null;if(i=i.firstBaseUpdate,i!==null){do{var C={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};x===null?h=x=C:x=x.next=C,i=i.next}while(i!==null);x===null?h=x=a:x=x.next=a}else h=x=a;i={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:x,shared:o.shared,callbacks:o.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=a:t.next=a,i.lastBaseUpdate=a}var Wm=!1;function Rc(){if(Wm){var t=Bt;if(t!==null)throw t}}function Mc(t,a,i,o){Wm=!1;var h=t.updateQueue;Ni=!1;var x=h.firstBaseUpdate,C=h.lastBaseUpdate,_=h.shared.pending;if(_!==null){h.shared.pending=null;var ae=_,Se=ae.next;ae.next=null,C===null?x=Se:C.next=Se,C=ae;var Ge=t.alternate;Ge!==null&&(Ge=Ge.updateQueue,_=Ge.lastBaseUpdate,_!==C&&(_===null?Ge.firstBaseUpdate=Se:_.next=Se,Ge.lastBaseUpdate=ae))}if(x!==null){var Ke=h.baseState;C=0,Ge=Se=ae=null,_=x;do{var Oe=_.lane&-536870913,$e=Oe!==_.lane;if($e?(ks&Oe)===Oe:(o&Oe)===Oe){Oe!==0&&Oe===jt&&(Wm=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Ot=t,Jt=_;Oe=a;var oa=i;switch(Jt.tag){case 1:if(Ot=Jt.payload,typeof Ot=="function"){Ke=Ot.call(oa,Ke,Oe);break e}Ke=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Jt.payload,Oe=typeof Ot=="function"?Ot.call(oa,Ke,Oe):Ot,Oe==null)break e;Ke=v({},Ke,Oe);break e;case 2:Ni=!0}}Oe=_.callback,Oe!==null&&(t.flags|=64,$e&&(t.flags|=8192),$e=h.callbacks,$e===null?h.callbacks=[Oe]:$e.push(Oe))}else $e={lane:Oe,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Ge===null?(Se=Ge=$e,ae=Ke):Ge=Ge.next=$e,C|=Oe;if(_=_.next,_===null){if(_=h.shared.pending,_===null)break;$e=_,_=$e.next,$e.next=null,h.lastBaseUpdate=$e,h.shared.pending=null}}while(!0);Ge===null&&(ae=Ke),h.baseState=ae,h.firstBaseUpdate=Se,h.lastBaseUpdate=Ge,x===null&&(h.shared.lanes=0),yl|=C,t.lanes=C,t.memoizedState=Ke}}function bx(t,a){if(typeof t!="function")throw Error(l(191,t));t.call(a)}function yx(t,a){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)bx(i[t],a)}var Do=A(null),fu=A(0);function jx(t,a){t=qn,ie(fu,t),ie(Do,a),qn=t|a.baseLanes}function Zm(){ie(fu,qn),ie(Do,Do.current)}function Jm(){qn=fu.current,G(Do),G(fu)}var ai=A(null),wi=null;function hl(t){var a=t.alternate;ie(_a,_a.current&1),ie(ai,t),wi===null&&(a===null||Do.current!==null||a.memoizedState!==null)&&(wi=t)}function Km(t){ie(_a,_a.current),ie(ai,t),wi===null&&(wi=t)}function vx(t){t.tag===22?(ie(_a,_a.current),ie(ai,t),wi===null&&(wi=t)):xl()}function xl(){ie(_a,_a.current),ie(ai,ai.current)}function ri(t){G(ai),wi===t&&(wi=null),G(_a)}var _a=A(0);function pu(t){for(var a=t;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||ip(i)||np(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var zn=0,ds=null,na=null,$a=null,hu=!1,Po=!1,eo=!1,xu=0,_c=0,Oo=null,GN=0;function Ea(){throw Error(l(321))}function Xm(t,a){if(a===null)return!1;for(var i=0;i<a.length&&i<t.length;i++)if(!ba(t[i],a[i]))return!1;return!0}function ef(t,a,i,o,h,x){return zn=x,ds=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,I.H=t===null||t.memoizedState===null?r0:xf,eo=!1,x=i(o,h),eo=!1,Po&&(x=wx(a,i,o,h)),Nx(t),x}function Nx(t){I.H=$c;var a=na!==null&&na.next!==null;if(zn=0,$a=na=ds=null,hu=!1,_c=0,Oo=null,a)throw Error(l(300));t===null||Fa||(t=t.dependencies,t!==null&&S(t)&&(Fa=!0))}function wx(t,a,i,o){ds=t;var h=0;do{if(Po&&(Oo=null),_c=0,Po=!1,25<=h)throw Error(l(301));if(h+=1,$a=na=null,t.updateQueue!=null){var x=t.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}I.H=i0,x=a(i,o)}while(Po);return x}function QN(){var t=I.H,a=t.useState()[0];return a=typeof a.then=="function"?zc(a):a,t=t.useState()[0],(na!==null?na.memoizedState:null)!==t&&(ds.flags|=1024),a}function tf(){var t=xu!==0;return xu=0,t}function sf(t,a,i){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~i}function af(t){if(hu){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}hu=!1}zn=0,$a=na=ds=null,Po=!1,_c=xu=0,Oo=null}function wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $a===null?ds.memoizedState=$a=t:$a=$a.next=t,$a}function za(){if(na===null){var t=ds.alternate;t=t!==null?t.memoizedState:null}else t=na.next;var a=$a===null?ds.memoizedState:$a.next;if(a!==null)$a=a,na=t;else{if(t===null)throw ds.alternate===null?Error(l(467)):Error(l(310));na=t,t={memoizedState:na.memoizedState,baseState:na.baseState,baseQueue:na.baseQueue,queue:na.queue,next:null},$a===null?ds.memoizedState=$a=t:$a=$a.next=t}return $a}function gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zc(t){var a=_c;return _c+=1,Oo===null&&(Oo=[]),t=Nr(Oo,t,a),a=ds,($a===null?a.memoizedState:$a.next)===null&&(a=a.alternate,I.H=a===null||a.memoizedState===null?r0:xf),t}function bu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return zc(t);if(t.$$typeof===B)return z(t)}throw Error(l(438,String(t)))}function rf(t){var a=null,i=ds.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var o=ds.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=gu(),ds.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(t),o=0;o<t;o++)i[o]=ne;return a.index++,i}function Ln(t,a){return typeof a=="function"?a(t):a}function yu(t){var a=za();return nf(a,na,t)}function nf(t,a,i){var o=t.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=i;var h=t.baseQueue,x=o.pending;if(x!==null){if(h!==null){var C=h.next;h.next=x.next,x.next=C}a.baseQueue=h=x,o.pending=null}if(x=t.baseState,h===null)t.memoizedState=x;else{a=h.next;var _=C=null,ae=null,Se=a,Ge=!1;do{var Ke=Se.lane&-536870913;if(Ke!==Se.lane?(ks&Ke)===Ke:(zn&Ke)===Ke){var Oe=Se.revertLane;if(Oe===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,gesture:null,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),Ke===jt&&(Ge=!0);else if((zn&Oe)===Oe){Se=Se.next,Oe===jt&&(Ge=!0);continue}else Ke={lane:0,revertLane:Se.revertLane,gesture:null,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},ae===null?(_=ae=Ke,C=x):ae=ae.next=Ke,ds.lanes|=Oe,yl|=Oe;Ke=Se.action,eo&&i(x,Ke),x=Se.hasEagerState?Se.eagerState:i(x,Ke)}else Oe={lane:Ke,revertLane:Se.revertLane,gesture:Se.gesture,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},ae===null?(_=ae=Oe,C=x):ae=ae.next=Oe,ds.lanes|=Ke,yl|=Ke;Se=Se.next}while(Se!==null&&Se!==a);if(ae===null?C=x:ae.next=_,!ba(x,t.memoizedState)&&(Fa=!0,Ge&&(i=Bt,i!==null)))throw i;t.memoizedState=x,t.baseState=C,t.baseQueue=ae,o.lastRenderedState=x}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function lf(t){var a=za(),i=a.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=t;var o=i.dispatch,h=i.pending,x=a.memoizedState;if(h!==null){i.pending=null;var C=h=h.next;do x=t(x,C.action),C=C.next;while(C!==h);ba(x,a.memoizedState)||(Fa=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),i.lastRenderedState=x}return[x,o]}function Sx(t,a,i){var o=ds,h=za(),x=gs;if(x){if(i===void 0)throw Error(l(407));i=i()}else i=a();var C=!ba((na||h).memoizedState,i);if(C&&(h.memoizedState=i,Fa=!0),h=h.queue,df(Ex.bind(null,o,h,t),[t]),h.getSnapshot!==a||C||$a!==null&&$a.memoizedState.tag&1){if(o.flags|=2048,Ro(9,{destroy:void 0},Ax.bind(null,o,h,i,a),null),ua===null)throw Error(l(349));x||(zn&127)!==0||Cx(o,a,i)}return i}function Cx(t,a,i){t.flags|=16384,t={getSnapshot:a,value:i},a=ds.updateQueue,a===null?(a=gu(),ds.updateQueue=a,a.stores=[t]):(i=a.stores,i===null?a.stores=[t]:i.push(t))}function Ax(t,a,i,o){a.value=i,a.getSnapshot=o,Tx(a)&&kx(t)}function Ex(t,a,i){return i(function(){Tx(a)&&kx(t)})}function Tx(t){var a=t.getSnapshot;t=t.value;try{var i=a();return!ba(t,i)}catch{return!0}}function kx(t){var a=mn(t,2);a!==null&&Gr(a,t,2)}function of(t){var a=wr();if(typeof t=="function"){var i=t;if(t=i(),eo){xa(!0);try{i()}finally{xa(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:t},a}function Dx(t,a,i,o){return t.baseState=i,nf(t,na,typeof o=="function"?o:Ln)}function YN(t,a,i,o,h){if(Nu(t))throw Error(l(485));if(t=a.action,t!==null){var x={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){x.listeners.push(C)}};I.T!==null?i(!0):x.isTransition=!1,o(x),i=a.pending,i===null?(x.next=a.pending=x,Px(a,x)):(x.next=i.next,a.pending=i.next=x)}}function Px(t,a){var i=a.action,o=a.payload,h=t.state;if(a.isTransition){var x=I.T,C={};I.T=C;try{var _=i(h,o),ae=I.S;ae!==null&&ae(C,_),Ox(t,a,_)}catch(Se){cf(t,a,Se)}finally{x!==null&&C.types!==null&&(x.types=C.types),I.T=x}}else try{x=i(h,o),Ox(t,a,x)}catch(Se){cf(t,a,Se)}}function Ox(t,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){Rx(t,a,o)},function(o){return cf(t,a,o)}):Rx(t,a,i)}function Rx(t,a,i){a.status="fulfilled",a.value=i,Mx(a),t.state=i,a=t.pending,a!==null&&(i=a.next,i===a?t.pending=null:(i=i.next,a.next=i,Px(t,i)))}function cf(t,a,i){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=i,Mx(a),a=a.next;while(a!==o)}t.action=null}function Mx(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function _x(t,a){return a}function zx(t,a){if(gs){var i=ua.formState;if(i!==null){e:{var o=ds;if(gs){if(ia){t:{for(var h=ia,x=Ga;h.nodeType!==8;){if(!x){h=null;break t}if(h=Si(h.nextSibling),h===null){h=null;break t}}x=h.data,h=x==="F!"||x==="F"?h:null}if(h){ia=Si(h.nextSibling),o=h.data==="F!";break e}}qi(o)}o=!1}o&&(a=i[0])}}return i=wr(),i.memoizedState=i.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_x,lastRenderedState:a},i.queue=o,i=t0.bind(null,ds,o),o.dispatch=i,o=of(!1),x=hf.bind(null,ds,!1,o.queue),o=wr(),h={state:a,dispatch:null,action:t,pending:null},o.queue=h,i=YN.bind(null,ds,h,x,i),h.dispatch=i,o.memoizedState=t,[a,i,!1]}function Lx(t){var a=za();return $x(a,na,t)}function $x(t,a,i){if(a=nf(t,a,_x)[0],t=yu(Ln)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=zc(a)}catch(C){throw C===fr?ji:C}else o=a;a=za();var h=a.queue,x=h.dispatch;return i!==a.memoizedState&&(ds.flags|=2048,Ro(9,{destroy:void 0},WN.bind(null,h,i),null)),[o,x,t]}function WN(t,a){t.action=a}function Fx(t){var a=za(),i=na;if(i!==null)return $x(a,i,t);za(),a=a.memoizedState,i=za();var o=i.queue.dispatch;return i.memoizedState=t,[a,o,!1]}function Ro(t,a,i,o){return t={tag:t,create:i,deps:o,inst:a,next:null},a=ds.updateQueue,a===null&&(a=gu(),ds.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=t.next=t:(o=i.next,i.next=t,t.next=o,a.lastEffect=t),t}function Ux(){return za().memoizedState}function ju(t,a,i,o){var h=wr();ds.flags|=t,h.memoizedState=Ro(1|a,{destroy:void 0},i,o===void 0?null:o)}function vu(t,a,i,o){var h=za();o=o===void 0?null:o;var x=h.memoizedState.inst;na!==null&&o!==null&&Xm(o,na.memoizedState.deps)?h.memoizedState=Ro(a,x,i,o):(ds.flags|=t,h.memoizedState=Ro(1|a,x,i,o))}function Ix(t,a){ju(8390656,8,t,a)}function df(t,a){vu(2048,8,t,a)}function ZN(t){ds.flags|=4;var a=ds.updateQueue;if(a===null)a=gu(),ds.updateQueue=a,a.events=[t];else{var i=a.events;i===null?a.events=[t]:i.push(t)}}function Vx(t){var a=za().memoizedState;return ZN({ref:a,nextImpl:t}),function(){if((Hs&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}function Bx(t,a){return vu(4,2,t,a)}function qx(t,a){return vu(4,4,t,a)}function Hx(t,a){if(typeof a=="function"){t=t();var i=a(t);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Gx(t,a,i){i=i!=null?i.concat([t]):null,vu(4,4,Hx.bind(null,a,t),i)}function uf(){}function Qx(t,a){var i=za();a=a===void 0?null:a;var o=i.memoizedState;return a!==null&&Xm(a,o[1])?o[0]:(i.memoizedState=[t,a],t)}function Yx(t,a){var i=za();a=a===void 0?null:a;var o=i.memoizedState;if(a!==null&&Xm(a,o[1]))return o[0];if(o=t(),eo){xa(!0);try{t()}finally{xa(!1)}}return i.memoizedState=[o,a],o}function mf(t,a,i){return i===void 0||(zn&1073741824)!==0&&(ks&261930)===0?t.memoizedState=a:(t.memoizedState=i,t=W0(),ds.lanes|=t,yl|=t,i)}function Wx(t,a,i,o){return ba(i,a)?i:Do.current!==null?(t=mf(t,i,o),ba(t,a)||(Fa=!0),t):(zn&42)===0||(zn&1073741824)!==0&&(ks&261930)===0?(Fa=!0,t.memoizedState=i):(t=W0(),ds.lanes|=t,yl|=t,a)}function Zx(t,a,i,o,h){var x=K.p;K.p=x!==0&&8>x?x:8;var C=I.T,_={};I.T=_,hf(t,!1,a,i);try{var ae=h(),Se=I.S;if(Se!==null&&Se(_,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Ge=Ys(ae,o);Lc(t,a,Ge,li(t))}else Lc(t,a,o,li(t))}catch(Ke){Lc(t,a,{then:function(){},status:"rejected",reason:Ke},li())}finally{K.p=x,C!==null&&_.types!==null&&(C.types=_.types),I.T=C}}function JN(){}function ff(t,a,i,o){if(t.tag!==5)throw Error(l(476));var h=Jx(t).queue;Zx(t,h,a,q,i===null?JN:function(){return Kx(t),i(o)})}function Jx(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:q},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:i},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Kx(t){var a=Jx(t);a.next===null&&(a=t.alternate.memoizedState),Lc(t,a.next.queue,{},li())}function pf(){return z(ed)}function Xx(){return za().memoizedState}function e0(){return za().memoizedState}function KN(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var i=li();t=fl(i);var o=pl(a,t,i);o!==null&&(Gr(o,a,i),Oc(o,a,i)),a={cache:yt()},t.payload=a;return}a=a.return}}function XN(t,a,i){var o=li();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Nu(t)?s0(a,i):(i=Cc(t,a,i,o),i!==null&&(Gr(i,t,o),a0(i,a,o)))}function t0(t,a,i){var o=li();Lc(t,a,i,o)}function Lc(t,a,i,o){var h={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Nu(t))s0(a,h);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var C=a.lastRenderedState,_=x(C,i);if(h.hasEagerState=!0,h.eagerState=_,ba(_,C))return or(t,a,h,0),ua===null&&wo(),!1}catch{}finally{}if(i=Cc(t,a,h,o),i!==null)return Gr(i,t,o),a0(i,a,o),!0}return!1}function hf(t,a,i,o){if(o={lane:2,revertLane:Qf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Nu(t)){if(a)throw Error(l(479))}else a=Cc(t,i,o,2),a!==null&&Gr(a,t,2)}function Nu(t){var a=t.alternate;return t===ds||a!==null&&a===ds}function s0(t,a){Po=hu=!0;var i=t.pending;i===null?a.next=a:(a.next=i.next,i.next=a),t.pending=a}function a0(t,a,i){if((i&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,i|=o,a.lanes=i,X(t,i)}}var $c={readContext:z,use:bu,useCallback:Ea,useContext:Ea,useEffect:Ea,useImperativeHandle:Ea,useLayoutEffect:Ea,useInsertionEffect:Ea,useMemo:Ea,useReducer:Ea,useRef:Ea,useState:Ea,useDebugValue:Ea,useDeferredValue:Ea,useTransition:Ea,useSyncExternalStore:Ea,useId:Ea,useHostTransitionStatus:Ea,useFormState:Ea,useActionState:Ea,useOptimistic:Ea,useMemoCache:Ea,useCacheRefresh:Ea};$c.useEffectEvent=Ea;var r0={readContext:z,use:bu,useCallback:function(t,a){return wr().memoizedState=[t,a===void 0?null:a],t},useContext:z,useEffect:Ix,useImperativeHandle:function(t,a,i){i=i!=null?i.concat([t]):null,ju(4194308,4,Hx.bind(null,a,t),i)},useLayoutEffect:function(t,a){return ju(4194308,4,t,a)},useInsertionEffect:function(t,a){ju(4,2,t,a)},useMemo:function(t,a){var i=wr();a=a===void 0?null:a;var o=t();if(eo){xa(!0);try{t()}finally{xa(!1)}}return i.memoizedState=[o,a],o},useReducer:function(t,a,i){var o=wr();if(i!==void 0){var h=i(a);if(eo){xa(!0);try{i(a)}finally{xa(!1)}}}else h=a;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=XN.bind(null,ds,t),[o.memoizedState,t]},useRef:function(t){var a=wr();return t={current:t},a.memoizedState=t},useState:function(t){t=of(t);var a=t.queue,i=t0.bind(null,ds,a);return a.dispatch=i,[t.memoizedState,i]},useDebugValue:uf,useDeferredValue:function(t,a){var i=wr();return mf(i,t,a)},useTransition:function(){var t=of(!1);return t=Zx.bind(null,ds,t.queue,!0,!1),wr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,i){var o=ds,h=wr();if(gs){if(i===void 0)throw Error(l(407));i=i()}else{if(i=a(),ua===null)throw Error(l(349));(ks&127)!==0||Cx(o,a,i)}h.memoizedState=i;var x={value:i,getSnapshot:a};return h.queue=x,Ix(Ex.bind(null,o,x,t),[t]),o.flags|=2048,Ro(9,{destroy:void 0},Ax.bind(null,o,x,i,a),null),i},useId:function(){var t=wr(),a=ua.identifierPrefix;if(gs){var i=gi,o=ti;i=(o&~(1<<32-Ns(o)-1)).toString(32)+i,a="_"+a+"R_"+i,i=xu++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=GN++,a="_"+a+"r_"+i.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:pf,useFormState:zx,useActionState:zx,useOptimistic:function(t){var a=wr();a.memoizedState=a.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=hf.bind(null,ds,!0,i),i.dispatch=a,[t,a]},useMemoCache:rf,useCacheRefresh:function(){return wr().memoizedState=KN.bind(null,ds)},useEffectEvent:function(t){var a=wr(),i={impl:t};return a.memoizedState=i,function(){if((Hs&2)!==0)throw Error(l(440));return i.impl.apply(void 0,arguments)}}},xf={readContext:z,use:bu,useCallback:Qx,useContext:z,useEffect:df,useImperativeHandle:Gx,useInsertionEffect:Bx,useLayoutEffect:qx,useMemo:Yx,useReducer:yu,useRef:Ux,useState:function(){return yu(Ln)},useDebugValue:uf,useDeferredValue:function(t,a){var i=za();return Wx(i,na.memoizedState,t,a)},useTransition:function(){var t=yu(Ln)[0],a=za().memoizedState;return[typeof t=="boolean"?t:zc(t),a]},useSyncExternalStore:Sx,useId:Xx,useHostTransitionStatus:pf,useFormState:Lx,useActionState:Lx,useOptimistic:function(t,a){var i=za();return Dx(i,na,t,a)},useMemoCache:rf,useCacheRefresh:e0};xf.useEffectEvent=Vx;var i0={readContext:z,use:bu,useCallback:Qx,useContext:z,useEffect:df,useImperativeHandle:Gx,useInsertionEffect:Bx,useLayoutEffect:qx,useMemo:Yx,useReducer:lf,useRef:Ux,useState:function(){return lf(Ln)},useDebugValue:uf,useDeferredValue:function(t,a){var i=za();return na===null?mf(i,t,a):Wx(i,na.memoizedState,t,a)},useTransition:function(){var t=lf(Ln)[0],a=za().memoizedState;return[typeof t=="boolean"?t:zc(t),a]},useSyncExternalStore:Sx,useId:Xx,useHostTransitionStatus:pf,useFormState:Fx,useActionState:Fx,useOptimistic:function(t,a){var i=za();return na!==null?Dx(i,na,t,a):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:rf,useCacheRefresh:e0};i0.useEffectEvent=Vx;function gf(t,a,i,o){a=t.memoizedState,i=i(o,a),i=i==null?a:v({},a,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var bf={enqueueSetState:function(t,a,i){t=t._reactInternals;var o=li(),h=fl(o);h.payload=a,i!=null&&(h.callback=i),a=pl(t,h,o),a!==null&&(Gr(a,t,o),Oc(a,t,o))},enqueueReplaceState:function(t,a,i){t=t._reactInternals;var o=li(),h=fl(o);h.tag=1,h.payload=a,i!=null&&(h.callback=i),a=pl(t,h,o),a!==null&&(Gr(a,t,o),Oc(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var i=li(),o=fl(i);o.tag=2,a!=null&&(o.callback=a),a=pl(t,o,i),a!==null&&(Gr(a,t,i),Oc(a,t,i))}};function n0(t,a,i,o,h,x,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,x,C):a.prototype&&a.prototype.isPureReactComponent?!hi(i,o)||!hi(h,x):!0}function l0(t,a,i,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,o),a.state!==t&&bf.enqueueReplaceState(a,a.state,null)}function to(t,a){var i=a;if("ref"in a){i={};for(var o in a)o!=="ref"&&(i[o]=a[o])}if(t=t.defaultProps){i===a&&(i=v({},i));for(var h in t)i[h]===void 0&&(i[h]=t[h])}return i}function o0(t){un(t)}function c0(t){console.error(t)}function d0(t){un(t)}function wu(t,a){try{var i=t.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function u0(t,a,i){try{var o=t.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function yf(t,a,i){return i=fl(i),i.tag=3,i.payload={element:null},i.callback=function(){wu(t,a)},i}function m0(t){return t=fl(t),t.tag=3,t}function f0(t,a,i,o){var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var x=o.value;t.payload=function(){return h(x)},t.callback=function(){u0(a,i,o)}}var C=i.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(t.callback=function(){u0(a,i,o),typeof h!="function"&&(jl===null?jl=new Set([this]):jl.add(this));var _=o.stack;this.componentDidCatch(o.value,{componentStack:_!==null?_:""})})}function ew(t,a,i,o,h){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=i.alternate,a!==null&&N(a,i,h,!0),i=ai.current,i!==null){switch(i.tag){case 31:case 13:return wi===null?_u():i.alternate===null&&Ta===0&&(Ta=3),i.flags&=-257,i.flags|=65536,i.lanes=h,o===ct?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([o]):a.add(o),qf(t,o,h)),!1;case 22:return i.flags|=65536,o===ct?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([o]):i.add(o)),qf(t,o,h)),!1}throw Error(l(435,i.tag))}return qf(t,o,h),_u(),!1}if(gs)return a=ai.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,o!==Ao&&(t=Error(l(422),{cause:o}),ul(zr(t,i)))):(o!==Ao&&(a=Error(l(423),{cause:o}),ul(zr(a,i))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=zr(o,i),h=yf(t.stateNode,o,h),Ym(t,h),Ta!==4&&(Ta=2)),!1;var x=Error(l(520),{cause:o});if(x=zr(x,i),Gc===null?Gc=[x]:Gc.push(x),Ta!==4&&(Ta=2),a===null)return!0;o=zr(o,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,t=h&-h,i.lanes|=t,t=yf(i.stateNode,o,t),Ym(i,t),!1;case 1:if(a=i.type,x=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(jl===null||!jl.has(x))))return i.flags|=65536,h&=-h,i.lanes|=h,h=m0(h),f0(h,t,i,o),Ym(i,h),!1}i=i.return}while(i!==null);return!1}var jf=Error(l(461)),Fa=!1;function cr(t,a,i,o){a.child=t===null?Ir(a,null,i,o):ms(a,t.child,i,o)}function p0(t,a,i,o,h){i=i.render;var x=a.ref;if("ref"in o){var C={};for(var _ in o)_!=="ref"&&(C[_]=o[_])}else C=o;return E(a),o=ef(t,a,i,C,x,h),_=tf(),t!==null&&!Fa?(sf(t,a,h),$n(t,a,h)):(gs&&_&&kc(a),a.flags|=1,cr(t,a,o,h),a.child)}function h0(t,a,i,o,h){if(t===null){var x=i.type;return typeof x=="function"&&!Ac(x)&&x.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=x,x0(t,a,x,o,h)):(t=Co(i.type,null,o,a,a.mode,h),t.ref=a.ref,t.return=a,a.child=t)}if(x=t.child,!Tf(t,h)){var C=x.memoizedProps;if(i=i.compare,i=i!==null?i:hi,i(C,o)&&t.ref===a.ref)return $n(t,a,h)}return a.flags|=1,t=_r(x,o),t.ref=a.ref,t.return=a,a.child=t}function x0(t,a,i,o,h){if(t!==null){var x=t.memoizedProps;if(hi(x,o)&&t.ref===a.ref)if(Fa=!1,a.pendingProps=o=x,Tf(t,h))(t.flags&131072)!==0&&(Fa=!0);else return a.lanes=t.lanes,$n(t,a,h)}return vf(t,a,i,o,h)}function g0(t,a,i,o){var h=o.children,x=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|i:i,t!==null){for(o=a.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~x}else o=0,a.child=null;return b0(t,a,x,i,o)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&ws(a,x!==null?x.cachePool:null),x!==null?jx(a,x):Zm(),vx(a);else return o=a.lanes=536870912,b0(t,a,x!==null?x.baseLanes|i:i,i,o)}else x!==null?(ws(a,x.cachePool),jx(a,x),xl(),a.memoizedState=null):(t!==null&&ws(a,null),Zm(),xl());return cr(t,a,h,i),a.child}function Fc(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function b0(t,a,i,o,h){var x=Rs();return x=x===null?null:{parent:Qe._currentValue,pool:x},a.memoizedState={baseLanes:i,cachePool:x},t!==null&&ws(a,null),Zm(),vx(a),t!==null&&N(t,a,o,!0),a.childLanes=h,null}function Su(t,a){return a=Au({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function y0(t,a,i){return ms(a,t.child,null,i),t=Su(a,a.pendingProps),t.flags|=2,ri(a),a.memoizedState=null,t}function tw(t,a,i){var o=a.pendingProps,h=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(gs){if(o.mode==="hidden")return t=Su(a,o),a.lanes=536870912,Fc(null,t);if(Km(a),(t=ia)?(t=Pg(t,Ga),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Vi!==null?{id:ti,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},i=ol(t),i.return=a,a.child=i,Ha=a,ia=null)):t=null,t===null)throw qi(a);return a.lanes=536870912,null}return Su(a,o)}var x=t.memoizedState;if(x!==null){var C=x.dehydrated;if(Km(a),h)if(a.flags&256)a.flags&=-257,a=y0(t,a,i);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(l(558));else if(Fa||N(t,a,i,!1),h=(i&t.childLanes)!==0,Fa||h){if(o=ua,o!==null&&(C=he(o,i),C!==0&&C!==x.retryLane))throw x.retryLane=C,mn(t,C),Gr(o,t,C),jf;_u(),a=y0(t,a,i)}else t=x.treeContext,ia=Si(C.nextSibling),Ha=a,gs=!0,pn=null,Ga=!1,t!==null&&cu(a,t),a=Su(a,o),a.flags|=4096;return a}return t=_r(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Cu(t,a){var i=a.ref;if(i===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(t===null||t.ref!==i)&&(a.flags|=4194816)}}function vf(t,a,i,o,h){return E(a),i=ef(t,a,i,o,void 0,h),o=tf(),t!==null&&!Fa?(sf(t,a,h),$n(t,a,h)):(gs&&o&&kc(a),a.flags|=1,cr(t,a,i,h),a.child)}function j0(t,a,i,o,h,x){return E(a),a.updateQueue=null,i=wx(a,o,i,h),Nx(t),o=tf(),t!==null&&!Fa?(sf(t,a,x),$n(t,a,x)):(gs&&o&&kc(a),a.flags|=1,cr(t,a,i,x),a.child)}function v0(t,a,i,o,h){if(E(a),a.stateNode===null){var x=Mr,C=i.contextType;typeof C=="object"&&C!==null&&(x=z(C)),x=new i(o,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=bf,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=o,x.state=a.memoizedState,x.refs={},Gm(a),C=i.contextType,x.context=typeof C=="object"&&C!==null?z(C):Mr,x.state=a.memoizedState,C=i.getDerivedStateFromProps,typeof C=="function"&&(gf(a,i,C,o),x.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(C=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),C!==x.state&&bf.enqueueReplaceState(x,x.state,null),Mc(a,o,x,h),Rc(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){x=a.stateNode;var _=a.memoizedProps,ae=to(i,_);x.props=ae;var Se=x.context,Ge=i.contextType;C=Mr,typeof Ge=="object"&&Ge!==null&&(C=z(Ge));var Ke=i.getDerivedStateFromProps;Ge=typeof Ke=="function"||typeof x.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,Ge||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_||Se!==C)&&l0(a,x,o,C),Ni=!1;var Oe=a.memoizedState;x.state=Oe,Mc(a,o,x,h),Rc(),Se=a.memoizedState,_||Oe!==Se||Ni?(typeof Ke=="function"&&(gf(a,i,Ke,o),Se=a.memoizedState),(ae=Ni||n0(a,i,ae,o,Oe,Se,C))?(Ge||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=Se),x.props=o,x.state=Se,x.context=C,o=ae):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{x=a.stateNode,Qm(t,a),C=a.memoizedProps,Ge=to(i,C),x.props=Ge,Ke=a.pendingProps,Oe=x.context,Se=i.contextType,ae=Mr,typeof Se=="object"&&Se!==null&&(ae=z(Se)),_=i.getDerivedStateFromProps,(Se=typeof _=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==Ke||Oe!==ae)&&l0(a,x,o,ae),Ni=!1,Oe=a.memoizedState,x.state=Oe,Mc(a,o,x,h),Rc();var $e=a.memoizedState;C!==Ke||Oe!==$e||Ni||t!==null&&t.dependencies!==null&&S(t.dependencies)?(typeof _=="function"&&(gf(a,i,_,o),$e=a.memoizedState),(Ge=Ni||n0(a,i,Ge,o,Oe,$e,ae)||t!==null&&t.dependencies!==null&&S(t.dependencies))?(Se||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(o,$e,ae),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(o,$e,ae)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===t.memoizedProps&&Oe===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&Oe===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=$e),x.props=o,x.state=$e,x.context=ae,o=Ge):(typeof x.componentDidUpdate!="function"||C===t.memoizedProps&&Oe===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&Oe===t.memoizedState||(a.flags|=1024),o=!1)}return x=o,Cu(t,a),o=(a.flags&128)!==0,x||o?(x=a.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,t!==null&&o?(a.child=ms(a,t.child,null,h),a.child=ms(a,null,i,h)):cr(t,a,i,h),a.memoizedState=x.state,t=a.child):t=$n(t,a,h),t}function N0(t,a,i,o){return Mn(),a.flags|=256,cr(t,a,i,o),a.child}var Nf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wf(t){return{baseLanes:t,cachePool:Ur()}}function Sf(t,a,i){return t=t!==null?t.childLanes&~i:0,a&&(t|=ni),t}function w0(t,a,i){var o=a.pendingProps,h=!1,x=(a.flags&128)!==0,C;if((C=x)||(C=t!==null&&t.memoizedState===null?!1:(_a.current&2)!==0),C&&(h=!0,a.flags&=-129),C=(a.flags&32)!==0,a.flags&=-33,t===null){if(gs){if(h?hl(a):xl(),(t=ia)?(t=Pg(t,Ga),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Vi!==null?{id:ti,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},i=ol(t),i.return=a,a.child=i,Ha=a,ia=null)):t=null,t===null)throw qi(a);return np(t)?a.lanes=32:a.lanes=536870912,null}var _=o.children;return o=o.fallback,h?(xl(),h=a.mode,_=Au({mode:"hidden",children:_},h),o=On(o,h,i,null),_.return=a,o.return=a,_.sibling=o,a.child=_,o=a.child,o.memoizedState=wf(i),o.childLanes=Sf(t,C,i),a.memoizedState=Nf,Fc(null,o)):(hl(a),Cf(a,_))}var ae=t.memoizedState;if(ae!==null&&(_=ae.dehydrated,_!==null)){if(x)a.flags&256?(hl(a),a.flags&=-257,a=Af(t,a,i)):a.memoizedState!==null?(xl(),a.child=t.child,a.flags|=128,a=null):(xl(),_=o.fallback,h=a.mode,o=Au({mode:"visible",children:o.children},h),_=On(_,h,i,null),_.flags|=2,o.return=a,_.return=a,o.sibling=_,a.child=o,ms(a,t.child,null,i),o=a.child,o.memoizedState=wf(i),o.childLanes=Sf(t,C,i),a.memoizedState=Nf,a=Fc(null,o));else if(hl(a),np(_)){if(C=_.nextSibling&&_.nextSibling.dataset,C)var Se=C.dgst;C=Se,o=Error(l(419)),o.stack="",o.digest=C,ul({value:o,source:null,stack:null}),a=Af(t,a,i)}else if(Fa||N(t,a,i,!1),C=(i&t.childLanes)!==0,Fa||C){if(C=ua,C!==null&&(o=he(C,i),o!==0&&o!==ae.retryLane))throw ae.retryLane=o,mn(t,o),Gr(C,t,o),jf;ip(_)||_u(),a=Af(t,a,i)}else ip(_)?(a.flags|=192,a.child=t.child,a=null):(t=ae.treeContext,ia=Si(_.nextSibling),Ha=a,gs=!0,pn=null,Ga=!1,t!==null&&cu(a,t),a=Cf(a,o.children),a.flags|=4096);return a}return h?(xl(),_=o.fallback,h=a.mode,ae=t.child,Se=ae.sibling,o=_r(ae,{mode:"hidden",children:o.children}),o.subtreeFlags=ae.subtreeFlags&65011712,Se!==null?_=_r(Se,_):(_=On(_,h,i,null),_.flags|=2),_.return=a,o.return=a,o.sibling=_,a.child=o,Fc(null,o),o=a.child,_=t.child.memoizedState,_===null?_=wf(i):(h=_.cachePool,h!==null?(ae=Qe._currentValue,h=h.parent!==ae?{parent:ae,pool:ae}:h):h=Ur(),_={baseLanes:_.baseLanes|i,cachePool:h}),o.memoizedState=_,o.childLanes=Sf(t,C,i),a.memoizedState=Nf,Fc(t.child,o)):(hl(a),i=t.child,t=i.sibling,i=_r(i,{mode:"visible",children:o.children}),i.return=a,i.sibling=null,t!==null&&(C=a.deletions,C===null?(a.deletions=[t],a.flags|=16):C.push(t)),a.child=i,a.memoizedState=null,i)}function Cf(t,a){return a=Au({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Au(t,a){return t=vr(22,t,null,a),t.lanes=0,t}function Af(t,a,i){return ms(a,t.child,null,i),t=Cf(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function S0(t,a,i){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),c(t.return,a,i)}function Ef(t,a,i,o,h,x){var C=t.memoizedState;C===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:h,treeForkCount:x}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=o,C.tail=i,C.tailMode=h,C.treeForkCount=x)}function C0(t,a,i){var o=a.pendingProps,h=o.revealOrder,x=o.tail;o=o.children;var C=_a.current,_=(C&2)!==0;if(_?(C=C&1|2,a.flags|=128):C&=1,ie(_a,C),cr(t,a,o,i),o=gs?Zl:0,!_&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&S0(t,i,a);else if(t.tag===19)S0(t,i,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(i=a.child,h=null;i!==null;)t=i.alternate,t!==null&&pu(t)===null&&(h=i),i=i.sibling;i=h,i===null?(h=a.child,a.child=null):(h=i.sibling,i.sibling=null),Ef(a,!1,h,i,x,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,h=a.child,a.child=null;h!==null;){if(t=h.alternate,t!==null&&pu(t)===null){a.child=h;break}t=h.sibling,h.sibling=i,i=h,h=t}Ef(a,!0,i,null,x,o);break;case"together":Ef(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function $n(t,a,i){if(t!==null&&(a.dependencies=t.dependencies),yl|=a.lanes,(i&a.childLanes)===0)if(t!==null){if(N(t,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(l(153));if(a.child!==null){for(t=a.child,i=_r(t,t.pendingProps),a.child=i,i.return=a;t.sibling!==null;)t=t.sibling,i=i.sibling=_r(t,t.pendingProps),i.return=a;i.sibling=null}return a.child}function Tf(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&S(t)))}function sw(t,a,i){switch(a.tag){case 3:je(a,a.stateNode.containerInfo),Hi(a,Qe,t.memoizedState.cache),Mn();break;case 27:case 5:Be(a);break;case 4:je(a,a.stateNode.containerInfo);break;case 10:Hi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Km(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(hl(a),a.flags|=128,null):(i&a.child.childLanes)!==0?w0(t,a,i):(hl(a),t=$n(t,a,i),t!==null?t.sibling:null);hl(a);break;case 19:var h=(t.flags&128)!==0;if(o=(i&a.childLanes)!==0,o||(N(t,a,i,!1),o=(i&a.childLanes)!==0),h){if(o)return C0(t,a,i);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(_a,_a.current),o)break;return null;case 22:return a.lanes=0,g0(t,a,i,a.pendingProps);case 24:Hi(a,Qe,t.memoizedState.cache)}return $n(t,a,i)}function A0(t,a,i){if(t!==null)if(t.memoizedProps!==a.pendingProps)Fa=!0;else{if(!Tf(t,i)&&(a.flags&128)===0)return Fa=!1,sw(t,a,i);Fa=(t.flags&131072)!==0}else Fa=!1,gs&&(a.flags&1048576)!==0&&ou(a,Zl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=si(a.elementType),a.type=t,typeof t=="function")Ac(t)?(o=to(t,o),a.tag=1,a=v0(null,a,t,o,i)):(a.tag=0,a=vf(null,a,t,o,i));else{if(t!=null){var h=t.$$typeof;if(h===ce){a.tag=11,a=p0(null,a,t,o,i);break e}else if(h===k){a.tag=14,a=h0(null,a,t,o,i);break e}}throw a=F(t)||t,Error(l(306,a,""))}}return a;case 0:return vf(t,a,a.type,a.pendingProps,i);case 1:return o=a.type,h=to(o,a.pendingProps),v0(t,a,o,h,i);case 3:e:{if(je(a,a.stateNode.containerInfo),t===null)throw Error(l(387));o=a.pendingProps;var x=a.memoizedState;h=x.element,Qm(t,a),Mc(a,o,null,i);var C=a.memoizedState;if(o=C.cache,Hi(a,Qe,o),o!==x.cache&&g(a,[Qe],i,!0),Rc(),o=C.element,x.isDehydrated)if(x={element:o,isDehydrated:!1,cache:C.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=N0(t,a,o,i);break e}else if(o!==h){h=zr(Error(l(424)),a),ul(h),a=N0(t,a,o,i);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ia=Si(t.firstChild),Ha=a,gs=!0,pn=null,Ga=!0,i=Ir(a,null,o,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Mn(),o===h){a=$n(t,a,i);break e}cr(t,a,o,i)}a=a.child}return a;case 26:return Cu(t,a),t===null?(i=Lg(a.type,null,a.pendingProps,null))?a.memoizedState=i:gs||(i=a.type,t=a.pendingProps,o=Vu(R.current).createElement(i),o[dt]=a,o[vt]=t,dr(o,i,t),Xs(o),a.stateNode=o):a.memoizedState=Lg(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Be(a),t===null&&gs&&(o=a.stateNode=Mg(a.type,a.pendingProps,R.current),Ha=a,Ga=!0,h=ia,Sl(a.type)?(lp=h,ia=Si(o.firstChild)):ia=h),cr(t,a,a.pendingProps.children,i),Cu(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&gs&&((h=o=ia)&&(o=Ow(o,a.type,a.pendingProps,Ga),o!==null?(a.stateNode=o,Ha=a,ia=Si(o.firstChild),Ga=!1,h=!0):h=!1),h||qi(a)),Be(a),h=a.type,x=a.pendingProps,C=t!==null?t.memoizedProps:null,o=x.children,sp(h,x)?o=null:C!==null&&sp(h,C)&&(a.flags|=32),a.memoizedState!==null&&(h=ef(t,a,QN,null,null,i),ed._currentValue=h),Cu(t,a),cr(t,a,o,i),a.child;case 6:return t===null&&gs&&((t=i=ia)&&(i=Rw(i,a.pendingProps,Ga),i!==null?(a.stateNode=i,Ha=a,ia=null,t=!0):t=!1),t||qi(a)),null;case 13:return w0(t,a,i);case 4:return je(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=ms(a,null,o,i):cr(t,a,o,i),a.child;case 11:return p0(t,a,a.type,a.pendingProps,i);case 7:return cr(t,a,a.pendingProps,i),a.child;case 8:return cr(t,a,a.pendingProps.children,i),a.child;case 12:return cr(t,a,a.pendingProps.children,i),a.child;case 10:return o=a.pendingProps,Hi(a,a.type,o.value),cr(t,a,o.children,i),a.child;case 9:return h=a.type._context,o=a.pendingProps.children,E(a),h=z(h),o=o(h),a.flags|=1,cr(t,a,o,i),a.child;case 14:return h0(t,a,a.type,a.pendingProps,i);case 15:return x0(t,a,a.type,a.pendingProps,i);case 19:return C0(t,a,i);case 31:return tw(t,a,i);case 22:return g0(t,a,i,a.pendingProps);case 24:return E(a),o=z(Qe),t===null?(h=Rs(),h===null&&(h=ua,x=yt(),h.pooledCache=x,x.refCount++,x!==null&&(h.pooledCacheLanes|=i),h=x),a.memoizedState={parent:o,cache:h},Gm(a),Hi(a,Qe,h)):((t.lanes&i)!==0&&(Qm(t,a),Mc(a,null,null,i),Rc()),h=t.memoizedState,x=a.memoizedState,h.parent!==o?(h={parent:o,cache:o},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),Hi(a,Qe,o)):(o=x.cache,Hi(a,Qe,o),o!==h.cache&&g(a,[Qe],i,!0))),cr(t,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(l(156,a.tag))}function Fn(t){t.flags|=4}function kf(t,a,i,o,h){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(X0())t.flags|=8192;else throw _n=ct,Qa}else t.flags&=-16777217}function E0(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Vg(a))if(X0())t.flags|=8192;else throw _n=ct,Qa}function Eu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Ja():536870912,t.lanes|=a,Lo|=a)}function Uc(t,a){if(!gs)switch(t.tailMode){case"hidden":a=t.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function ya(t){var a=t.alternate!==null&&t.alternate.child===t.child,i=0,o=0;if(a)for(var h=t.child;h!==null;)i|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)i|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=i,a}function aw(t,a,i){var o=a.pendingProps;switch(Dc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ya(a),null;case 1:return ya(a),null;case 3:return i=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),yi(Qe),Ie(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(dl(a)?Fn(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Eo())),ya(a),null;case 26:var h=a.type,x=a.memoizedState;return t===null?(Fn(a),x!==null?(ya(a),E0(a,x)):(ya(a),kf(a,h,null,o,i))):x?x!==t.memoizedState?(Fn(a),ya(a),E0(a,x)):(ya(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&Fn(a),ya(a),kf(a,h,t,o,i)),null;case 27:if(et(a),i=R.current,h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Fn(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return ya(a),null}t=Re.current,dl(a)?Jl(a):(t=Mg(h,o,i),a.stateNode=t,Fn(a))}return ya(a),null;case 5:if(et(a),h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Fn(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return ya(a),null}if(x=Re.current,dl(a))Jl(a);else{var C=Vu(R.current);switch(x){case 1:x=C.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:x=C.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":x=C.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":x=C.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":x=C.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof o.is=="string"?C.createElement("select",{is:o.is}):C.createElement("select"),o.multiple?x.multiple=!0:o.size&&(x.size=o.size);break;default:x=typeof o.is=="string"?C.createElement(h,{is:o.is}):C.createElement(h)}}x[dt]=a,x[vt]=o;e:for(C=a.child;C!==null;){if(C.tag===5||C.tag===6)x.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===a)break e;for(;C.sibling===null;){if(C.return===null||C.return===a)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}a.stateNode=x;e:switch(dr(x,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Fn(a)}}return ya(a),kf(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,i),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Fn(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(l(166));if(t=R.current,dl(a)){if(t=a.stateNode,i=a.memoizedProps,o=null,h=Ha,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[dt]=a,t=!!(t.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||wg(t.nodeValue,i)),t||qi(a,!0)}else t=Vu(t).createTextNode(o),t[dt]=a,a.stateNode=t}return ya(a),null;case 31:if(i=a.memoizedState,t===null||t.memoizedState!==null){if(o=dl(a),i!==null){if(t===null){if(!o)throw Error(l(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[dt]=a}else Mn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ya(a),t=!1}else i=Eo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return a.flags&256?(ri(a),a):(ri(a),null);if((a.flags&128)!==0)throw Error(l(558))}return ya(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=dl(a),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(l(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));h[dt]=a}else Mn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ya(a),h=!1}else h=Eo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(ri(a),a):(ri(a),null)}return ri(a),(a.flags&128)!==0?(a.lanes=i,a):(i=o!==null,t=t!==null&&t.memoizedState!==null,i&&(o=a.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),x=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(x=o.memoizedState.cachePool.pool),x!==h&&(o.flags|=2048)),i!==t&&i&&(a.child.flags|=8192),Eu(a,a.updateQueue),ya(a),null);case 4:return Ie(),t===null&&Jf(a.stateNode.containerInfo),ya(a),null;case 10:return yi(a.type),ya(a),null;case 19:if(G(_a),o=a.memoizedState,o===null)return ya(a),null;if(h=(a.flags&128)!==0,x=o.rendering,x===null)if(h)Uc(o,!1);else{if(Ta!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(x=pu(t),x!==null){for(a.flags|=128,Uc(o,!1),t=x.updateQueue,a.updateQueue=t,Eu(a,t),a.subtreeFlags=0,t=i,i=a.child;i!==null;)lu(i,t),i=i.sibling;return ie(_a,_a.current&1|2),gs&&Bi(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&$t()>Ou&&(a.flags|=128,h=!0,Uc(o,!1),a.lanes=4194304)}else{if(!h)if(t=pu(x),t!==null){if(a.flags|=128,h=!0,t=t.updateQueue,a.updateQueue=t,Eu(a,t),Uc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!x.alternate&&!gs)return ya(a),null}else 2*$t()-o.renderingStartTime>Ou&&i!==536870912&&(a.flags|=128,h=!0,Uc(o,!1),a.lanes=4194304);o.isBackwards?(x.sibling=a.child,a.child=x):(t=o.last,t!==null?t.sibling=x:a.child=x,o.last=x)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$t(),t.sibling=null,i=_a.current,ie(_a,h?i&1|2:i&1),gs&&Bi(a,o.treeForkCount),t):(ya(a),null);case 22:case 23:return ri(a),Jm(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(i&536870912)!==0&&(a.flags&128)===0&&(ya(a),a.subtreeFlags&6&&(a.flags|=8192)):ya(a),i=a.updateQueue,i!==null&&Eu(a,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==i&&(a.flags|=2048),t!==null&&G(bt),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),yi(Qe),ya(a),null;case 25:return null;case 30:return null}throw Error(l(156,a.tag))}function rw(t,a){switch(Dc(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return yi(Qe),Ie(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return et(a),null;case 31:if(a.memoizedState!==null){if(ri(a),a.alternate===null)throw Error(l(340));Mn()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(ri(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(l(340));Mn()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return G(_a),null;case 4:return Ie(),null;case 10:return yi(a.type),null;case 22:case 23:return ri(a),Jm(),t!==null&&G(bt),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return yi(Qe),null;case 25:return null;default:return null}}function T0(t,a){switch(Dc(a),a.tag){case 3:yi(Qe),Ie();break;case 26:case 27:case 5:et(a);break;case 4:Ie();break;case 31:a.memoizedState!==null&&ri(a);break;case 13:ri(a);break;case 19:G(_a);break;case 10:yi(a.type);break;case 22:case 23:ri(a),Jm(),t!==null&&G(bt);break;case 24:yi(Qe)}}function Ic(t,a){try{var i=a.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var h=o.next;i=h;do{if((i.tag&t)===t){o=void 0;var x=i.create,C=i.inst;o=x(),C.destroy=o}i=i.next}while(i!==h)}}catch(_){aa(a,a.return,_)}}function gl(t,a,i){try{var o=a.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var x=h.next;o=x;do{if((o.tag&t)===t){var C=o.inst,_=C.destroy;if(_!==void 0){C.destroy=void 0,h=a;var ae=i,Se=_;try{Se()}catch(Ge){aa(h,ae,Ge)}}}o=o.next}while(o!==x)}}catch(Ge){aa(a,a.return,Ge)}}function k0(t){var a=t.updateQueue;if(a!==null){var i=t.stateNode;try{yx(a,i)}catch(o){aa(t,t.return,o)}}}function D0(t,a,i){i.props=to(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(o){aa(t,a,o)}}function Vc(t,a){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof i=="function"?t.refCleanup=i(o):i.current=o}}catch(h){aa(t,a,h)}}function xn(t,a){var i=t.ref,o=t.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(h){aa(t,a,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(h){aa(t,a,h)}else i.current=null}function P0(t){var a=t.type,i=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(h){aa(t,t.return,h)}}function Df(t,a,i){try{var o=t.stateNode;Aw(o,t.type,i,a),o[vt]=a}catch(h){aa(t,t.return,h)}}function O0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Sl(t.type)||t.tag===4}function Pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||O0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Sl(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Of(t,a,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(t),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=ze));else if(o!==4&&(o===27&&Sl(t.type)&&(i=t.stateNode,a=null),t=t.child,t!==null))for(Of(t,a,i),t=t.sibling;t!==null;)Of(t,a,i),t=t.sibling}function Tu(t,a,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?i.insertBefore(t,a):i.appendChild(t);else if(o!==4&&(o===27&&Sl(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Tu(t,a,i),t=t.sibling;t!==null;)Tu(t,a,i),t=t.sibling}function R0(t){var a=t.stateNode,i=t.memoizedProps;try{for(var o=t.type,h=a.attributes;h.length;)a.removeAttributeNode(h[0]);dr(a,o,i),a[dt]=t,a[vt]=i}catch(x){aa(t,t.return,x)}}var Un=!1,Ua=!1,Rf=!1,M0=typeof WeakSet=="function"?WeakSet:Set,tr=null;function iw(t,a){if(t=t.containerInfo,ep=Wu,t=xi(t),yo(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var h=o.anchorOffset,x=o.focusNode;o=o.focusOffset;try{i.nodeType,x.nodeType}catch{i=null;break e}var C=0,_=-1,ae=-1,Se=0,Ge=0,Ke=t,Oe=null;t:for(;;){for(var $e;Ke!==i||h!==0&&Ke.nodeType!==3||(_=C+h),Ke!==x||o!==0&&Ke.nodeType!==3||(ae=C+o),Ke.nodeType===3&&(C+=Ke.nodeValue.length),($e=Ke.firstChild)!==null;)Oe=Ke,Ke=$e;for(;;){if(Ke===t)break t;if(Oe===i&&++Se===h&&(_=C),Oe===x&&++Ge===o&&(ae=C),($e=Ke.nextSibling)!==null)break;Ke=Oe,Oe=Ke.parentNode}Ke=$e}i=_===-1||ae===-1?null:{start:_,end:ae}}else i=null}i=i||{start:0,end:0}}else i=null;for(tp={focusedElem:t,selectionRange:i},Wu=!1,tr=a;tr!==null;)if(a=tr,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,tr=t;else for(;tr!==null;){switch(a=tr,x=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)h=t[i],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&x!==null){t=void 0,i=a,h=x.memoizedProps,x=x.memoizedState,o=i.stateNode;try{var Ot=to(i.type,h);t=o.getSnapshotBeforeUpdate(Ot,x),o.__reactInternalSnapshotBeforeUpdate=t}catch(Jt){aa(i,i.return,Jt)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,i=t.nodeType,i===9)rp(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":rp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=a.sibling,t!==null){t.return=a.return,tr=t;break}tr=a.return}}function _0(t,a,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:Vn(t,i),o&4&&Ic(5,i);break;case 1:if(Vn(t,i),o&4)if(t=i.stateNode,a===null)try{t.componentDidMount()}catch(C){aa(i,i.return,C)}else{var h=to(i.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(h,a,t.__reactInternalSnapshotBeforeUpdate)}catch(C){aa(i,i.return,C)}}o&64&&k0(i),o&512&&Vc(i,i.return);break;case 3:if(Vn(t,i),o&64&&(t=i.updateQueue,t!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{yx(t,a)}catch(C){aa(i,i.return,C)}}break;case 27:a===null&&o&4&&R0(i);case 26:case 5:Vn(t,i),a===null&&o&4&&P0(i),o&512&&Vc(i,i.return);break;case 12:Vn(t,i);break;case 31:Vn(t,i),o&4&&$0(t,i);break;case 13:Vn(t,i),o&4&&F0(t,i),o&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=pw.bind(null,i),Mw(t,i))));break;case 22:if(o=i.memoizedState!==null||Un,!o){a=a!==null&&a.memoizedState!==null||Ua,h=Un;var x=Ua;Un=o,(Ua=a)&&!x?Bn(t,i,(i.subtreeFlags&8772)!==0):Vn(t,i),Un=h,Ua=x}break;case 30:break;default:Vn(t,i)}}function z0(t){var a=t.alternate;a!==null&&(t.alternate=null,z0(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Ks(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var wa=null,Vr=!1;function In(t,a,i){for(i=i.child;i!==null;)L0(t,a,i),i=i.sibling}function L0(t,a,i){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(ha,i)}catch{}switch(i.tag){case 26:Ua||xn(i,a),In(t,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ua||xn(i,a);var o=wa,h=Vr;Sl(i.type)&&(wa=i.stateNode,Vr=!1),In(t,a,i),Jc(i.stateNode),wa=o,Vr=h;break;case 5:Ua||xn(i,a);case 6:if(o=wa,h=Vr,wa=null,In(t,a,i),wa=o,Vr=h,wa!==null)if(Vr)try{(wa.nodeType===9?wa.body:wa.nodeName==="HTML"?wa.ownerDocument.body:wa).removeChild(i.stateNode)}catch(x){aa(i,a,x)}else try{wa.removeChild(i.stateNode)}catch(x){aa(i,a,x)}break;case 18:wa!==null&&(Vr?(t=wa,kg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Ho(t)):kg(wa,i.stateNode));break;case 4:o=wa,h=Vr,wa=i.stateNode.containerInfo,Vr=!0,In(t,a,i),wa=o,Vr=h;break;case 0:case 11:case 14:case 15:gl(2,i,a),Ua||gl(4,i,a),In(t,a,i);break;case 1:Ua||(xn(i,a),o=i.stateNode,typeof o.componentWillUnmount=="function"&&D0(i,a,o)),In(t,a,i);break;case 21:In(t,a,i);break;case 22:Ua=(o=Ua)||i.memoizedState!==null,In(t,a,i),Ua=o;break;default:In(t,a,i)}}function $0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ho(t)}catch(i){aa(a,a.return,i)}}}function F0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ho(t)}catch(i){aa(a,a.return,i)}}function nw(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new M0),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new M0),a;default:throw Error(l(435,t.tag))}}function ku(t,a){var i=nw(t);a.forEach(function(o){if(!i.has(o)){i.add(o);var h=hw.bind(null,t,o);o.then(h,h)}})}function Br(t,a){var i=a.deletions;if(i!==null)for(var o=0;o<i.length;o++){var h=i[o],x=t,C=a,_=C;e:for(;_!==null;){switch(_.tag){case 27:if(Sl(_.type)){wa=_.stateNode,Vr=!1;break e}break;case 5:wa=_.stateNode,Vr=!1;break e;case 3:case 4:wa=_.stateNode.containerInfo,Vr=!0;break e}_=_.return}if(wa===null)throw Error(l(160));L0(x,C,h),wa=null,Vr=!1,x=h.alternate,x!==null&&(x.return=null),h.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)U0(a,t),a=a.sibling}var Gi=null;function U0(t,a){var i=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Br(a,t),qr(t),o&4&&(gl(3,t,t.return),Ic(3,t),gl(5,t,t.return));break;case 1:Br(a,t),qr(t),o&512&&(Ua||i===null||xn(i,i.return)),o&64&&Un&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var h=Gi;if(Br(a,t),qr(t),o&512&&(Ua||i===null||xn(i,i.return)),o&4){var x=i!==null?i.memoizedState:null;if(o=t.memoizedState,i===null)if(o===null)if(t.stateNode===null){e:{o=t.type,i=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":x=h.getElementsByTagName("title")[0],(!x||x[ps]||x[dt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=h.createElement(o),h.head.insertBefore(x,h.querySelector("head > title"))),dr(x,o,i),x[dt]=t,Xs(x),o=x;break e;case"link":var C=Ug("link","href",h).get(o+(i.href||""));if(C){for(var _=0;_<C.length;_++)if(x=C[_],x.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&x.getAttribute("rel")===(i.rel==null?null:i.rel)&&x.getAttribute("title")===(i.title==null?null:i.title)&&x.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){C.splice(_,1);break t}}x=h.createElement(o),dr(x,o,i),h.head.appendChild(x);break;case"meta":if(C=Ug("meta","content",h).get(o+(i.content||""))){for(_=0;_<C.length;_++)if(x=C[_],x.getAttribute("content")===(i.content==null?null:""+i.content)&&x.getAttribute("name")===(i.name==null?null:i.name)&&x.getAttribute("property")===(i.property==null?null:i.property)&&x.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&x.getAttribute("charset")===(i.charSet==null?null:i.charSet)){C.splice(_,1);break t}}x=h.createElement(o),dr(x,o,i),h.head.appendChild(x);break;default:throw Error(l(468,o))}x[dt]=t,Xs(x),o=x}t.stateNode=o}else Ig(h,t.type,t.stateNode);else t.stateNode=Fg(h,o,t.memoizedProps);else x!==o?(x===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):x.count--,o===null?Ig(h,t.type,t.stateNode):Fg(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Df(t,t.memoizedProps,i.memoizedProps)}break;case 27:Br(a,t),qr(t),o&512&&(Ua||i===null||xn(i,i.return)),i!==null&&o&4&&Df(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Br(a,t),qr(t),o&512&&(Ua||i===null||xn(i,i.return)),t.flags&32){h=t.stateNode;try{Fe(h,"")}catch(Ot){aa(t,t.return,Ot)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Df(t,h,i!==null?i.memoizedProps:h)),o&1024&&(Rf=!0);break;case 6:if(Br(a,t),qr(t),o&4){if(t.stateNode===null)throw Error(l(162));o=t.memoizedProps,i=t.stateNode;try{i.nodeValue=o}catch(Ot){aa(t,t.return,Ot)}}break;case 3:if(Hu=null,h=Gi,Gi=Bu(a.containerInfo),Br(a,t),Gi=h,qr(t),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Ho(a.containerInfo)}catch(Ot){aa(t,t.return,Ot)}Rf&&(Rf=!1,I0(t));break;case 4:o=Gi,Gi=Bu(t.stateNode.containerInfo),Br(a,t),qr(t),Gi=o;break;case 12:Br(a,t),qr(t);break;case 31:Br(a,t),qr(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ku(t,o)));break;case 13:Br(a,t),qr(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Pu=$t()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ku(t,o)));break;case 22:h=t.memoizedState!==null;var ae=i!==null&&i.memoizedState!==null,Se=Un,Ge=Ua;if(Un=Se||h,Ua=Ge||ae,Br(a,t),Ua=Ge,Un=Se,qr(t),o&8192)e:for(a=t.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(i===null||ae||Un||Ua||so(t)),i=null,a=t;;){if(a.tag===5||a.tag===26){if(i===null){ae=i=a;try{if(x=ae.stateNode,h)C=x.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{_=ae.stateNode;var Ke=ae.memoizedProps.style,Oe=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null;_.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(Ot){aa(ae,ae.return,Ot)}}}else if(a.tag===6){if(i===null){ae=a;try{ae.stateNode.nodeValue=h?"":ae.memoizedProps}catch(Ot){aa(ae,ae.return,Ot)}}}else if(a.tag===18){if(i===null){ae=a;try{var $e=ae.stateNode;h?Dg($e,!0):Dg(ae.stateNode,!1)}catch(Ot){aa(ae,ae.return,Ot)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,ku(t,i))));break;case 19:Br(a,t),qr(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ku(t,o)));break;case 30:break;case 21:break;default:Br(a,t),qr(t)}}function qr(t){var a=t.flags;if(a&2){try{for(var i,o=t.return;o!==null;){if(O0(o)){i=o;break}o=o.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:var h=i.stateNode,x=Pf(t);Tu(t,x,h);break;case 5:var C=i.stateNode;i.flags&32&&(Fe(C,""),i.flags&=-33);var _=Pf(t);Tu(t,_,C);break;case 3:case 4:var ae=i.stateNode.containerInfo,Se=Pf(t);Of(t,Se,ae);break;default:throw Error(l(161))}}catch(Ge){aa(t,t.return,Ge)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function I0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;I0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Vn(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)_0(t,a.alternate,a),a=a.sibling}function so(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:gl(4,a,a.return),so(a);break;case 1:xn(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&D0(a,a.return,i),so(a);break;case 27:Jc(a.stateNode);case 26:case 5:xn(a,a.return),so(a);break;case 22:a.memoizedState===null&&so(a);break;case 30:so(a);break;default:so(a)}t=t.sibling}}function Bn(t,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,h=t,x=a,C=x.flags;switch(x.tag){case 0:case 11:case 15:Bn(h,x,i),Ic(4,x);break;case 1:if(Bn(h,x,i),o=x,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(Se){aa(o,o.return,Se)}if(o=x,h=o.updateQueue,h!==null){var _=o.stateNode;try{var ae=h.shared.hiddenCallbacks;if(ae!==null)for(h.shared.hiddenCallbacks=null,h=0;h<ae.length;h++)bx(ae[h],_)}catch(Se){aa(o,o.return,Se)}}i&&C&64&&k0(x),Vc(x,x.return);break;case 27:R0(x);case 26:case 5:Bn(h,x,i),i&&o===null&&C&4&&P0(x),Vc(x,x.return);break;case 12:Bn(h,x,i);break;case 31:Bn(h,x,i),i&&C&4&&$0(h,x);break;case 13:Bn(h,x,i),i&&C&4&&F0(h,x);break;case 22:x.memoizedState===null&&Bn(h,x,i),Vc(x,x.return);break;case 30:break;default:Bn(h,x,i)}a=a.sibling}}function Mf(t,a){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Ut(i))}function _f(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ut(t))}function Qi(t,a,i,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)V0(t,a,i,o),a=a.sibling}function V0(t,a,i,o){var h=a.flags;switch(a.tag){case 0:case 11:case 15:Qi(t,a,i,o),h&2048&&Ic(9,a);break;case 1:Qi(t,a,i,o);break;case 3:Qi(t,a,i,o),h&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ut(t)));break;case 12:if(h&2048){Qi(t,a,i,o),t=a.stateNode;try{var x=a.memoizedProps,C=x.id,_=x.onPostCommit;typeof _=="function"&&_(C,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(ae){aa(a,a.return,ae)}}else Qi(t,a,i,o);break;case 31:Qi(t,a,i,o);break;case 13:Qi(t,a,i,o);break;case 23:break;case 22:x=a.stateNode,C=a.alternate,a.memoizedState!==null?x._visibility&2?Qi(t,a,i,o):Bc(t,a):x._visibility&2?Qi(t,a,i,o):(x._visibility|=2,Mo(t,a,i,o,(a.subtreeFlags&10256)!==0||!1)),h&2048&&Mf(C,a);break;case 24:Qi(t,a,i,o),h&2048&&_f(a.alternate,a);break;default:Qi(t,a,i,o)}}function Mo(t,a,i,o,h){for(h=h&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=t,C=a,_=i,ae=o,Se=C.flags;switch(C.tag){case 0:case 11:case 15:Mo(x,C,_,ae,h),Ic(8,C);break;case 23:break;case 22:var Ge=C.stateNode;C.memoizedState!==null?Ge._visibility&2?Mo(x,C,_,ae,h):Bc(x,C):(Ge._visibility|=2,Mo(x,C,_,ae,h)),h&&Se&2048&&Mf(C.alternate,C);break;case 24:Mo(x,C,_,ae,h),h&&Se&2048&&_f(C.alternate,C);break;default:Mo(x,C,_,ae,h)}a=a.sibling}}function Bc(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=t,o=a,h=o.flags;switch(o.tag){case 22:Bc(i,o),h&2048&&Mf(o.alternate,o);break;case 24:Bc(i,o),h&2048&&_f(o.alternate,o);break;default:Bc(i,o)}a=a.sibling}}var qc=8192;function _o(t,a,i){if(t.subtreeFlags&qc)for(t=t.child;t!==null;)B0(t,a,i),t=t.sibling}function B0(t,a,i){switch(t.tag){case 26:_o(t,a,i),t.flags&qc&&t.memoizedState!==null&&Gw(i,Gi,t.memoizedState,t.memoizedProps);break;case 5:_o(t,a,i);break;case 3:case 4:var o=Gi;Gi=Bu(t.stateNode.containerInfo),_o(t,a,i),Gi=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=qc,qc=16777216,_o(t,a,i),qc=o):_o(t,a,i));break;default:_o(t,a,i)}}function q0(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Hc(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var o=a[i];tr=o,G0(o,t)}q0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)H0(t),t=t.sibling}function H0(t){switch(t.tag){case 0:case 11:case 15:Hc(t),t.flags&2048&&gl(9,t,t.return);break;case 3:Hc(t);break;case 12:Hc(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Du(t)):Hc(t);break;default:Hc(t)}}function Du(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var o=a[i];tr=o,G0(o,t)}q0(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:gl(8,a,a.return),Du(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,Du(a));break;default:Du(a)}t=t.sibling}}function G0(t,a){for(;tr!==null;){var i=tr;switch(i.tag){case 0:case 11:case 15:gl(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ut(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,tr=o;else e:for(i=t;tr!==null;){o=tr;var h=o.sibling,x=o.return;if(z0(o),o===i){tr=null;break e}if(h!==null){h.return=x,tr=h;break e}tr=x}}}var lw={getCacheForType:function(t){var a=z(Qe),i=a.data.get(t);return i===void 0&&(i=t(),a.data.set(t,i)),i},cacheSignal:function(){return z(Qe).controller.signal}},ow=typeof WeakMap=="function"?WeakMap:Map,Hs=0,ua=null,Ss=null,ks=0,sa=0,ii=null,bl=!1,zo=!1,zf=!1,qn=0,Ta=0,yl=0,ao=0,Lf=0,ni=0,Lo=0,Gc=null,Hr=null,$f=!1,Pu=0,Q0=0,Ou=1/0,Ru=null,jl=null,Ya=0,vl=null,$o=null,Hn=0,Ff=0,Uf=null,Y0=null,Qc=0,If=null;function li(){return(Hs&2)!==0&&ks!==0?ks&-ks:I.T!==null?Qf():it()}function W0(){if(ni===0)if((ks&536870912)===0||gs){var t=Ps;Ps<<=1,(Ps&3932160)===0&&(Ps=262144),ni=t}else ni=536870912;return t=ai.current,t!==null&&(t.flags|=32),ni}function Gr(t,a,i){(t===ua&&(sa===2||sa===9)||t.cancelPendingCommit!==null)&&(Fo(t,0),Nl(t,ks,ni,!1)),Zr(t,i),((Hs&2)===0||t!==ua)&&(t===ua&&((Hs&2)===0&&(ao|=i),Ta===4&&Nl(t,ks,ni,!1)),gn(t))}function Z0(t,a,i){if((Hs&6)!==0)throw Error(l(327));var o=!i&&(a&127)===0&&(a&t.expiredLanes)===0||ra(t,a),h=o?uw(t,a):Bf(t,a,!0),x=o;do{if(h===0){zo&&!o&&Nl(t,a,0,!1);break}else{if(i=t.current.alternate,x&&!cw(i)){h=Bf(t,a,!1),x=!1;continue}if(h===2){if(x=a,t.errorRecoveryDisabledLanes&x)var C=0;else C=t.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){a=C;e:{var _=t;h=Gc;var ae=_.current.memoizedState.isDehydrated;if(ae&&(Fo(_,C).flags|=256),C=Bf(_,C,!1),C!==2){if(zf&&!ae){_.errorRecoveryDisabledLanes|=x,ao|=x,h=4;break e}x=Hr,Hr=h,x!==null&&(Hr===null?Hr=x:Hr.push.apply(Hr,x))}h=C}if(x=!1,h!==2)continue}}if(h===1){Fo(t,0),Nl(t,a,0,!0);break}e:{switch(o=t,x=h,x){case 0:case 1:throw Error(l(345));case 4:if((a&4194048)!==a)break;case 6:Nl(o,a,ni,!bl);break e;case 2:Hr=null;break;case 3:case 5:break;default:throw Error(l(329))}if((a&62914560)===a&&(h=Pu+300-$t(),10<h)){if(Nl(o,a,ni,!bl),Ms(o,0,!0)!==0)break e;Hn=a,o.timeoutHandle=Eg(J0.bind(null,o,i,Hr,Ru,$f,a,ni,ao,Lo,bl,x,"Throttled",-0,0),h);break e}J0(o,i,Hr,Ru,$f,a,ni,ao,Lo,bl,x,null,-0,0)}}break}while(!0);gn(t)}function J0(t,a,i,o,h,x,C,_,ae,Se,Ge,Ke,Oe,$e){if(t.timeoutHandle=-1,Ke=a.subtreeFlags,Ke&8192||(Ke&16785408)===16785408){Ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ze},B0(a,x,Ke);var Ot=(x&62914560)===x?Pu-$t():(x&4194048)===x?Q0-$t():0;if(Ot=Qw(Ke,Ot),Ot!==null){Hn=x,t.cancelPendingCommit=Ot(ig.bind(null,t,a,x,i,o,h,C,_,ae,Ge,Ke,null,Oe,$e)),Nl(t,x,C,!Se);return}}ig(t,a,x,i,o,h,C,_,ae)}function cw(t){for(var a=t;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var h=i[o],x=h.getSnapshot;h=h.value;try{if(!ba(x(),h))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Nl(t,a,i,o){a&=~Lf,a&=~ao,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var h=a;0<h;){var x=31-Ns(h),C=1<<x;o[x]=-1,h&=~C}i!==0&&Mi(t,i,a)}function Mu(){return(Hs&6)===0?(Yc(0),!1):!0}function Vf(){if(Ss!==null){if(sa===0)var t=Ss.return;else t=Ss,bi=hn=null,af(t),ml=null,Kl=0,t=Ss;for(;t!==null;)T0(t.alternate,t),t=t.return;Ss=null}}function Fo(t,a){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,kw(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Hn=0,Vf(),ua=t,Ss=i=_r(t.current,null),ks=a,sa=0,ii=null,bl=!1,zo=ra(t,a),zf=!1,Lo=ni=Lf=ao=yl=Ta=0,Hr=Gc=null,$f=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var h=31-Ns(o),x=1<<h;a|=t[h],o&=~x}return qn=a,wo(),i}function K0(t,a){ds=null,I.H=$c,a===fr||a===ji?(a=uu(),sa=3):a===Qa?(a=uu(),sa=4):sa=a===jf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ii=a,Ss===null&&(Ta=1,wu(t,zr(a,t.current)))}function X0(){var t=ai.current;return t===null?!0:(ks&4194048)===ks?wi===null:(ks&62914560)===ks||(ks&536870912)!==0?t===wi:!1}function eg(){var t=I.H;return I.H=$c,t===null?$c:t}function tg(){var t=I.A;return I.A=lw,t}function _u(){Ta=4,bl||(ks&4194048)!==ks&&ai.current!==null||(zo=!0),(yl&134217727)===0&&(ao&134217727)===0||ua===null||Nl(ua,ks,ni,!1)}function Bf(t,a,i){var o=Hs;Hs|=2;var h=eg(),x=tg();(ua!==t||ks!==a)&&(Ru=null,Fo(t,a)),a=!1;var C=Ta;e:do try{if(sa!==0&&Ss!==null){var _=Ss,ae=ii;switch(sa){case 8:Vf(),C=6;break e;case 3:case 2:case 9:case 6:ai.current===null&&(a=!0);var Se=sa;if(sa=0,ii=null,Uo(t,_,ae,Se),i&&zo){C=0;break e}break;default:Se=sa,sa=0,ii=null,Uo(t,_,ae,Se)}}dw(),C=Ta;break}catch(Ge){K0(t,Ge)}while(!0);return a&&t.shellSuspendCounter++,bi=hn=null,Hs=o,I.H=h,I.A=x,Ss===null&&(ua=null,ks=0,wo()),C}function dw(){for(;Ss!==null;)sg(Ss)}function uw(t,a){var i=Hs;Hs|=2;var o=eg(),h=tg();ua!==t||ks!==a?(Ru=null,Ou=$t()+500,Fo(t,a)):zo=ra(t,a);e:do try{if(sa!==0&&Ss!==null){a=Ss;var x=ii;t:switch(sa){case 1:sa=0,ii=null,Uo(t,a,x,1);break;case 2:case 9:if(du(x)){sa=0,ii=null,ag(a);break}a=function(){sa!==2&&sa!==9||ua!==t||(sa=7),gn(t)},x.then(a,a);break e;case 3:sa=7;break e;case 4:sa=5;break e;case 7:du(x)?(sa=0,ii=null,ag(a)):(sa=0,ii=null,Uo(t,a,x,7));break;case 5:var C=null;switch(Ss.tag){case 26:C=Ss.memoizedState;case 5:case 27:var _=Ss;if(C?Vg(C):_.stateNode.complete){sa=0,ii=null;var ae=_.sibling;if(ae!==null)Ss=ae;else{var Se=_.return;Se!==null?(Ss=Se,zu(Se)):Ss=null}break t}}sa=0,ii=null,Uo(t,a,x,5);break;case 6:sa=0,ii=null,Uo(t,a,x,6);break;case 8:Vf(),Ta=6;break e;default:throw Error(l(462))}}mw();break}catch(Ge){K0(t,Ge)}while(!0);return bi=hn=null,I.H=o,I.A=h,Hs=i,Ss!==null?0:(ua=null,ks=0,wo(),Ta)}function mw(){for(;Ss!==null&&!As();)sg(Ss)}function sg(t){var a=A0(t.alternate,t,qn);t.memoizedProps=t.pendingProps,a===null?zu(t):Ss=a}function ag(t){var a=t,i=a.alternate;switch(a.tag){case 15:case 0:a=j0(i,a,a.pendingProps,a.type,void 0,ks);break;case 11:a=j0(i,a,a.pendingProps,a.type.render,a.ref,ks);break;case 5:af(a);default:T0(i,a),a=Ss=lu(a,qn),a=A0(i,a,qn)}t.memoizedProps=t.pendingProps,a===null?zu(t):Ss=a}function Uo(t,a,i,o){bi=hn=null,af(a),ml=null,Kl=0;var h=a.return;try{if(ew(t,h,a,i,ks)){Ta=1,wu(t,zr(i,t.current)),Ss=null;return}}catch(x){if(h!==null)throw Ss=h,x;Ta=1,wu(t,zr(i,t.current)),Ss=null;return}a.flags&32768?(gs||o===1?t=!0:zo||(ks&536870912)!==0?t=!1:(bl=t=!0,(o===2||o===9||o===3||o===6)&&(o=ai.current,o!==null&&o.tag===13&&(o.flags|=16384))),rg(a,t)):zu(a)}function zu(t){var a=t;do{if((a.flags&32768)!==0){rg(a,bl);return}t=a.return;var i=aw(a.alternate,a,qn);if(i!==null){Ss=i;return}if(a=a.sibling,a!==null){Ss=a;return}Ss=a=t}while(a!==null);Ta===0&&(Ta=5)}function rg(t,a){do{var i=rw(t.alternate,t);if(i!==null){i.flags&=32767,Ss=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(t=t.sibling,t!==null)){Ss=t;return}Ss=t=i}while(t!==null);Ta=6,Ss=null}function ig(t,a,i,o,h,x,C,_,ae){t.cancelPendingCommit=null;do Lu();while(Ya!==0);if((Hs&6)!==0)throw Error(l(327));if(a!==null){if(a===t.current)throw Error(l(177));if(x=a.lanes|a.childLanes,x|=Rr,Sn(t,i,x,C,_,ae),t===ua&&(Ss=ua=null,ks=0),$o=a,vl=t,Hn=i,Ff=x,Uf=h,Y0=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,xw($s,function(){return dg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=I.T,I.T=null,h=K.p,K.p=2,C=Hs,Hs|=4;try{iw(t,a,i)}finally{Hs=C,K.p=h,I.T=o}}Ya=1,ng(),lg(),og()}}function ng(){if(Ya===1){Ya=0;var t=vl,a=$o,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=I.T,I.T=null;var o=K.p;K.p=2;var h=Hs;Hs|=4;try{U0(a,t);var x=tp,C=xi(t.containerInfo),_=x.focusedElem,ae=x.selectionRange;if(C!==_&&_&&_.ownerDocument&&au(_.ownerDocument.documentElement,_)){if(ae!==null&&yo(_)){var Se=ae.start,Ge=ae.end;if(Ge===void 0&&(Ge=Se),"selectionStart"in _)_.selectionStart=Se,_.selectionEnd=Math.min(Ge,_.value.length);else{var Ke=_.ownerDocument||document,Oe=Ke&&Ke.defaultView||window;if(Oe.getSelection){var $e=Oe.getSelection(),Ot=_.textContent.length,Jt=Math.min(ae.start,Ot),oa=ae.end===void 0?Jt:Math.min(ae.end,Ot);!$e.extend&&Jt>oa&&(C=oa,oa=Jt,Jt=C);var xe=Or(_,Jt),ue=Or(_,oa);if(xe&&ue&&($e.rangeCount!==1||$e.anchorNode!==xe.node||$e.anchorOffset!==xe.offset||$e.focusNode!==ue.node||$e.focusOffset!==ue.offset)){var Ne=Ke.createRange();Ne.setStart(xe.node,xe.offset),$e.removeAllRanges(),Jt>oa?($e.addRange(Ne),$e.extend(ue.node,ue.offset)):(Ne.setEnd(ue.node,ue.offset),$e.addRange(Ne))}}}}for(Ke=[],$e=_;$e=$e.parentNode;)$e.nodeType===1&&Ke.push({element:$e,left:$e.scrollLeft,top:$e.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Ke.length;_++){var Ze=Ke[_];Ze.element.scrollLeft=Ze.left,Ze.element.scrollTop=Ze.top}}Wu=!!ep,tp=ep=null}finally{Hs=h,K.p=o,I.T=i}}t.current=a,Ya=2}}function lg(){if(Ya===2){Ya=0;var t=vl,a=$o,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=I.T,I.T=null;var o=K.p;K.p=2;var h=Hs;Hs|=4;try{_0(t,a.alternate,a)}finally{Hs=h,K.p=o,I.T=i}}Ya=3}}function og(){if(Ya===4||Ya===3){Ya=0,Vs();var t=vl,a=$o,i=Hn,o=Y0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ya=5:(Ya=0,$o=vl=null,cg(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(jl=null),tt(i),a=a.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(ha,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=I.T,h=K.p,K.p=2,I.T=null;try{for(var x=t.onRecoverableError,C=0;C<o.length;C++){var _=o[C];x(_.value,{componentStack:_.stack})}}finally{I.T=a,K.p=h}}(Hn&3)!==0&&Lu(),gn(t),h=t.pendingLanes,(i&261930)!==0&&(h&42)!==0?t===If?Qc++:(Qc=0,If=t):Qc=0,Yc(0)}}function cg(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Ut(a)))}function Lu(){return ng(),lg(),og(),dg()}function dg(){if(Ya!==5)return!1;var t=vl,a=Ff;Ff=0;var i=tt(Hn),o=I.T,h=K.p;try{K.p=32>i?32:i,I.T=null,i=Uf,Uf=null;var x=vl,C=Hn;if(Ya=0,$o=vl=null,Hn=0,(Hs&6)!==0)throw Error(l(331));var _=Hs;if(Hs|=4,H0(x.current),V0(x,x.current,C,i),Hs=_,Yc(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(ha,x)}catch{}return!0}finally{K.p=h,I.T=o,cg(t,a)}}function ug(t,a,i){a=zr(i,a),a=yf(t.stateNode,a,2),t=pl(t,a,2),t!==null&&(Zr(t,2),gn(t))}function aa(t,a,i){if(t.tag===3)ug(t,t,i);else for(;a!==null;){if(a.tag===3){ug(a,t,i);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(jl===null||!jl.has(o))){t=zr(i,t),i=m0(2),o=pl(a,i,2),o!==null&&(f0(i,o,a,t),Zr(o,2),gn(o));break}}a=a.return}}function qf(t,a,i){var o=t.pingCache;if(o===null){o=t.pingCache=new ow;var h=new Set;o.set(a,h)}else h=o.get(a),h===void 0&&(h=new Set,o.set(a,h));h.has(i)||(zf=!0,h.add(i),t=fw.bind(null,t,a,i),a.then(t,t))}function fw(t,a,i){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,ua===t&&(ks&i)===i&&(Ta===4||Ta===3&&(ks&62914560)===ks&&300>$t()-Pu?(Hs&2)===0&&Fo(t,0):Lf|=i,Lo===ks&&(Lo=0)),gn(t)}function mg(t,a){a===0&&(a=Ja()),t=mn(t,a),t!==null&&(Zr(t,a),gn(t))}function pw(t){var a=t.memoizedState,i=0;a!==null&&(i=a.retryLane),mg(t,i)}function hw(t,a){var i=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(i=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(a),mg(t,i)}function xw(t,a){return Xt(t,a)}var $u=null,Io=null,Hf=!1,Fu=!1,Gf=!1,wl=0;function gn(t){t!==Io&&t.next===null&&(Io===null?$u=Io=t:Io=Io.next=t),Fu=!0,Hf||(Hf=!0,bw())}function Yc(t,a){if(!Gf&&Fu){Gf=!0;do for(var i=!1,o=$u;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var x=0;else{var C=o.suspendedLanes,_=o.pingedLanes;x=(1<<31-Ns(42|t)+1)-1,x&=h&~(C&~_),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(i=!0,xg(o,x))}else x=ks,x=Ms(o,o===ua?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(x&3)===0||ra(o,x)||(i=!0,xg(o,x));o=o.next}while(i);Gf=!1}}function gw(){fg()}function fg(){Fu=Hf=!1;var t=0;wl!==0&&Tw()&&(t=wl);for(var a=$t(),i=null,o=$u;o!==null;){var h=o.next,x=pg(o,a);x===0?(o.next=null,i===null?$u=h:i.next=h,h===null&&(Io=i)):(i=o,(t!==0||(x&3)!==0)&&(Fu=!0)),o=h}Ya!==0&&Ya!==5||Yc(t),wl!==0&&(wl=0)}function pg(t,a){for(var i=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,x=t.pendingLanes&-62914561;0<x;){var C=31-Ns(x),_=1<<C,ae=h[C];ae===-1?((_&i)===0||(_&o)!==0)&&(h[C]=Pa(_,a)):ae<=a&&(t.expiredLanes|=_),x&=~_}if(a=ua,i=ks,i=Ms(t,t===a?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,i===0||t===a&&(sa===2||sa===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Ft(o),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||ra(t,i)){if(a=i&-i,a===t.callbackPriority)return a;switch(o!==null&&Ft(o),tt(i)){case 2:case 8:i=fa;break;case 32:i=$s;break;case 268435456:i=pa;break;default:i=$s}return o=hg.bind(null,t),i=Xt(i,o),t.callbackPriority=a,t.callbackNode=i,a}return o!==null&&o!==null&&Ft(o),t.callbackPriority=2,t.callbackNode=null,2}function hg(t,a){if(Ya!==0&&Ya!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Lu()&&t.callbackNode!==i)return null;var o=ks;return o=Ms(t,t===ua?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Z0(t,o,a),pg(t,$t()),t.callbackNode!=null&&t.callbackNode===i?hg.bind(null,t):null)}function xg(t,a){if(Lu())return null;Z0(t,a,!0)}function bw(){Dw(function(){(Hs&6)!==0?Xt(vs,gw):fg()})}function Qf(){if(wl===0){var t=jt;t===0&&(t=xt,xt<<=1,(xt&261888)===0&&(xt=256)),wl=t}return wl}function gg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Me(""+t)}function bg(t,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,t.id&&i.setAttribute("form",t.id),a.parentNode.insertBefore(i,a),t=new FormData(t),i.parentNode.removeChild(i),t}function yw(t,a,i,o,h){if(a==="submit"&&i&&i.stateNode===h){var x=gg((h[vt]||null).action),C=o.submitter;C&&(a=(a=C[vt]||null)?gg(a.formAction):C.getAttribute("formAction"),a!==null&&(x=a,C=null));var _=new Os("action","action",null,o,h);t.push({event:_,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(wl!==0){var ae=C?bg(h,C):new FormData(h);ff(i,{pending:!0,data:ae,method:h.method,action:x},null,ae)}}else typeof x=="function"&&(_.preventDefault(),ae=C?bg(h,C):new FormData(h),ff(i,{pending:!0,data:ae,method:h.method,action:x},x,ae))},currentTarget:h}]})}}for(var Yf=0;Yf<Sc.length;Yf++){var Wf=Sc[Yf],jw=Wf.toLowerCase(),vw=Wf[0].toUpperCase()+Wf.slice(1);ei(jw,"on"+vw)}ei(ll,"onAnimationEnd"),ei(vo,"onAnimationIteration"),ei(ru,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(Bm,"onTransitionRun"),ei(No,"onTransitionStart"),ei(qm,"onTransitionCancel"),ei(iu,"onTransitionEnd"),Ka("onMouseEnter",["mouseout","mouseover"]),Ka("onMouseLeave",["mouseout","mouseover"]),Ka("onPointerEnter",["pointerout","pointerover"]),Ka("onPointerLeave",["pointerout","pointerover"]),qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qs("onBeforeInput",["compositionend","keypress","textInput","paste"]),qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wc));function yg(t,a){a=(a&4)!==0;for(var i=0;i<t.length;i++){var o=t[i],h=o.event;o=o.listeners;e:{var x=void 0;if(a)for(var C=o.length-1;0<=C;C--){var _=o[C],ae=_.instance,Se=_.currentTarget;if(_=_.listener,ae!==x&&h.isPropagationStopped())break e;x=_,h.currentTarget=Se;try{x(h)}catch(Ge){un(Ge)}h.currentTarget=null,x=ae}else for(C=0;C<o.length;C++){if(_=o[C],ae=_.instance,Se=_.currentTarget,_=_.listener,ae!==x&&h.isPropagationStopped())break e;x=_,h.currentTarget=Se;try{x(h)}catch(Ge){un(Ge)}h.currentTarget=null,x=ae}}}}function Cs(t,a){var i=a[Mt];i===void 0&&(i=a[Mt]=new Set);var o=t+"__bubble";i.has(o)||(jg(a,t,2,!1),i.add(o))}function Zf(t,a,i){var o=0;a&&(o|=4),jg(i,t,o,a)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Jf(t){if(!t[Uu]){t[Uu]=!0,mr.forEach(function(i){i!=="selectionchange"&&(Nw.has(i)||Zf(i,!1,t),Zf(i,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Uu]||(a[Uu]=!0,Zf("selectionchange",!1,a))}}function jg(t,a,i,o){switch(Wg(a)){case 2:var h=Zw;break;case 8:h=Jw;break;default:h=mp}i=h.bind(null,a,i,t),h=void 0,!pe||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(a,i,{capture:!0,passive:h}):t.addEventListener(a,i,!0):h!==void 0?t.addEventListener(a,i,{passive:h}):t.addEventListener(a,i,!1)}function Kf(t,a,i,o,h){var x=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var C=o.tag;if(C===3||C===4){var _=o.stateNode.containerInfo;if(_===h)break;if(C===4)for(C=o.return;C!==null;){var ae=C.tag;if((ae===3||ae===4)&&C.stateNode.containerInfo===h)return;C=C.return}for(;_!==null;){if(C=es(_),C===null)return;if(ae=C.tag,ae===5||ae===6||ae===26||ae===27){o=x=C;continue e}_=_.parentNode}}o=o.return}ts(function(){var Se=x,Ge=pt(i),Ke=[];e:{var Oe=Yl.get(t);if(Oe!==void 0){var $e=Os,Ot=t;switch(t){case"keypress":if(Ye(i)===0)break e;case"keydown":case"keyup":$e=Ma;break;case"focusin":Ot="focus",$e=Hl;break;case"focusout":Ot="blur",$e=Hl;break;case"beforeblur":case"afterblur":$e=Hl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=zi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=Zd;break;case ll:case vo:case ru:$e=fc;break;case iu:$e=Jd;break;case"scroll":case"scrollend":$e=Ts;break;case"wheel":$e=gc;break;case"copy":case"cut":case"paste":$e=$m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=xc;break;case"toggle":case"beforetoggle":$e=$i}var Jt=(a&4)!==0,oa=!Jt&&(t==="scroll"||t==="scrollend"),xe=Jt?Oe!==null?Oe+"Capture":null:Oe;Jt=[];for(var ue=Se,Ne;ue!==null;){var Ze=ue;if(Ne=Ze.stateNode,Ze=Ze.tag,Ze!==5&&Ze!==26&&Ze!==27||Ne===null||xe===null||(Ze=xs(ue,xe),Ze!=null&&Jt.push(Zc(ue,Ze,Ne))),oa)break;ue=ue.return}0<Jt.length&&(Oe=new $e(Oe,Ot,null,i,Ge),Ke.push({event:Oe,listeners:Jt}))}}if((a&7)===0){e:{if(Oe=t==="mouseover"||t==="pointerover",$e=t==="mouseout"||t==="pointerout",Oe&&i!==ve&&(Ot=i.relatedTarget||i.fromElement)&&(es(Ot)||Ot[Pt]))break e;if(($e||Oe)&&(Oe=Ge.window===Ge?Ge:(Oe=Ge.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,$e?(Ot=i.relatedTarget||i.toElement,$e=Se,Ot=Ot?es(Ot):null,Ot!==null&&(oa=m(Ot),Jt=Ot.tag,Ot!==oa||Jt!==5&&Jt!==27&&Jt!==6)&&(Ot=null)):($e=null,Ot=Se),$e!==Ot)){if(Jt=Dr,Ze="onMouseLeave",xe="onMouseEnter",ue="mouse",(t==="pointerout"||t==="pointerover")&&(Jt=xc,Ze="onPointerLeave",xe="onPointerEnter",ue="pointer"),oa=$e==null?Oe:rs($e),Ne=Ot==null?Oe:rs(Ot),Oe=new Jt(Ze,ue+"leave",$e,i,Ge),Oe.target=oa,Oe.relatedTarget=Ne,Ze=null,es(Ge)===Se&&(Jt=new Jt(xe,ue+"enter",Ot,i,Ge),Jt.target=Ne,Jt.relatedTarget=oa,Ze=Jt),oa=Ze,$e&&Ot)t:{for(Jt=ww,xe=$e,ue=Ot,Ne=0,Ze=xe;Ze;Ze=Jt(Ze))Ne++;Ze=0;for(var Ht=ue;Ht;Ht=Jt(Ht))Ze++;for(;0<Ne-Ze;)xe=Jt(xe),Ne--;for(;0<Ze-Ne;)ue=Jt(ue),Ze--;for(;Ne--;){if(xe===ue||ue!==null&&xe===ue.alternate){Jt=xe;break t}xe=Jt(xe),ue=Jt(ue)}Jt=null}else Jt=null;$e!==null&&vg(Ke,Oe,$e,Jt,!1),Ot!==null&&oa!==null&&vg(Ke,oa,Ot,Jt,!0)}}e:{if(Oe=Se?rs(Se):window,$e=Oe.nodeName&&Oe.nodeName.toLowerCase(),$e==="select"||$e==="input"&&Oe.type==="file")var Us=rl;else if(eu(Oe))if(vc)Us=Tn;else{Us=su;var Lt=Vm}else $e=Oe.nodeName,!$e||$e.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?Se&&rt(Se.elementType)&&(Us=rl):Us=Ct;if(Us&&(Us=Us(t,Se))){tu(Ke,Us,i,Ge);break e}Lt&&Lt(t,Oe,Se),t==="focusout"&&Se&&Oe.type==="number"&&Se.memoizedProps.value!=null&&ql(Oe,"number",Oe.value)}switch(Lt=Se?rs(Se):window,t){case"focusin":(eu(Lt)||Lt.contentEditable==="true")&&(kn=Lt,Ql=Se,Xr=null);break;case"focusout":Xr=Ql=kn=null;break;case"mousedown":Nc=!0;break;case"contextmenu":case"mouseup":case"dragend":Nc=!1,wc(Ke,i,Ge);break;case"selectionchange":if(nl)break;case"keydown":case"keyup":wc(Ke,i,Ge)}var fs;if(nn)e:{switch(t){case"compositionstart":var Ds="onCompositionStart";break e;case"compositionend":Ds="onCompositionEnd";break e;case"compositionupdate":Ds="onCompositionUpdate";break e}Ds=void 0}else Cn?yc(t,i)&&(Ds="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Ds="onCompositionStart");Ds&&(qa&&i.locale!=="ko"&&(Cn||Ds!=="onCompositionStart"?Ds==="onCompositionEnd"&&Cn&&(fs=He()):(Je=Ge,ht="value"in Je?Je.value:Je.textContent,Cn=!0)),Lt=Iu(Se,Ds),0<Lt.length&&(Ds=new Li(Ds,t,null,i,Ge),Ke.push({event:Ds,listeners:Lt}),fs?Ds.data=fs:(fs=Ui(i),fs!==null&&(Ds.data=fs)))),(fs=Kd?br(t,i):An(t,i))&&(Ds=Iu(Se,"onBeforeInput"),0<Ds.length&&(Lt=new Li("onBeforeInput","beforeinput",null,i,Ge),Ke.push({event:Lt,listeners:Ds}),Lt.data=fs)),yw(Ke,t,Se,i,Ge)}yg(Ke,a)})}function Zc(t,a,i){return{instance:t,listener:a,currentTarget:i}}function Iu(t,a){for(var i=a+"Capture",o=[];t!==null;){var h=t,x=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||x===null||(h=xs(t,i),h!=null&&o.unshift(Zc(t,h,x)),h=xs(t,a),h!=null&&o.push(Zc(t,h,x))),t.tag===3)return o;t=t.return}return[]}function ww(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function vg(t,a,i,o,h){for(var x=a._reactName,C=[];i!==null&&i!==o;){var _=i,ae=_.alternate,Se=_.stateNode;if(_=_.tag,ae!==null&&ae===o)break;_!==5&&_!==26&&_!==27||Se===null||(ae=Se,h?(Se=xs(i,x),Se!=null&&C.unshift(Zc(i,Se,ae))):h||(Se=xs(i,x),Se!=null&&C.push(Zc(i,Se,ae)))),i=i.return}C.length!==0&&t.push({event:a,listeners:C})}var Sw=/\r\n?/g,Cw=/\u0000|\uFFFD/g;function Ng(t){return(typeof t=="string"?t:""+t).replace(Sw,`
`).replace(Cw,"")}function wg(t,a){return a=Ng(a),Ng(t)===a}function la(t,a,i,o,h,x){switch(i){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||Fe(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&Fe(t,""+o);break;case"className":ea(t,"class",o);break;case"tabIndex":ea(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ea(t,i,o);break;case"style":Le(t,o,x);break;case"data":if(a!=="object"){ea(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||i!=="href")){t.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=Me(""+o),t.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(i==="formAction"?(a!=="input"&&la(t,a,"name",h.name,h,null),la(t,a,"formEncType",h.formEncType,h,null),la(t,a,"formMethod",h.formMethod,h,null),la(t,a,"formTarget",h.formTarget,h,null)):(la(t,a,"encType",h.encType,h,null),la(t,a,"method",h.method,h,null),la(t,a,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=Me(""+o),t.setAttribute(i,o);break;case"onClick":o!=null&&(t.onclick=ze);break;case"onScroll":o!=null&&Cs("scroll",t);break;case"onScrollEnd":o!=null&&Cs("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(i=o.__html,i!=null){if(h.children!=null)throw Error(l(60));t.innerHTML=i}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}i=Me(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""+o):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":o===!0?t.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,o):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(i,o):t.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(i):t.setAttribute(i,o);break;case"popover":Cs("beforetoggle",t),Cs("toggle",t),Oa(t,"popover",o);break;case"xlinkActuate":us(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":us(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":us(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":us(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":us(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":us(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":us(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":us(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":us(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Oa(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Te.get(i)||i,Oa(t,i,o))}}function Xf(t,a,i,o,h,x){switch(i){case"style":Le(t,o,x);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(i=o.__html,i!=null){if(h.children!=null)throw Error(l(60));t.innerHTML=i}}break;case"children":typeof o=="string"?Fe(t,o):(typeof o=="number"||typeof o=="bigint")&&Fe(t,""+o);break;case"onScroll":o!=null&&Cs("scroll",t);break;case"onScrollEnd":o!=null&&Cs("scrollend",t);break;case"onClick":o!=null&&(t.onclick=ze);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gr.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(h=i.endsWith("Capture"),a=i.slice(2,h?i.length-7:void 0),x=t[vt]||null,x=x!=null?x[i]:null,typeof x=="function"&&t.removeEventListener(a,x,h),typeof o=="function")){typeof x!="function"&&x!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(a,o,h);break e}i in t?t[i]=o:o===!0?t.setAttribute(i,""):Oa(t,i,o)}}}function dr(t,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cs("error",t),Cs("load",t);var o=!1,h=!1,x;for(x in i)if(i.hasOwnProperty(x)){var C=i[x];if(C!=null)switch(x){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:la(t,a,x,C,i,null)}}h&&la(t,a,"srcSet",i.srcSet,i,null),o&&la(t,a,"src",i.src,i,null);return;case"input":Cs("invalid",t);var _=x=C=h=null,ae=null,Se=null;for(o in i)if(i.hasOwnProperty(o)){var Ge=i[o];if(Ge!=null)switch(o){case"name":h=Ge;break;case"type":C=Ge;break;case"checked":ae=Ge;break;case"defaultChecked":Se=Ge;break;case"value":x=Ge;break;case"defaultValue":_=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(l(137,a));break;default:la(t,a,o,Ge,i,null)}}Kr(t,x,_,ae,Se,C,h,!1);return;case"select":Cs("invalid",t),o=C=x=null;for(h in i)if(i.hasOwnProperty(h)&&(_=i[h],_!=null))switch(h){case"value":x=_;break;case"defaultValue":C=_;break;case"multiple":o=_;default:la(t,a,h,_,i,null)}a=x,i=C,t.multiple=!!o,a!=null?fi(t,!!o,a,!1):i!=null&&fi(t,!!o,i,!0);return;case"textarea":Cs("invalid",t),x=h=o=null;for(C in i)if(i.hasOwnProperty(C)&&(_=i[C],_!=null))switch(C){case"value":o=_;break;case"defaultValue":h=_;break;case"children":x=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(l(91));break;default:la(t,a,C,_,i,null)}oe(t,o,h,x);return;case"option":for(ae in i)if(i.hasOwnProperty(ae)&&(o=i[ae],o!=null))switch(ae){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:la(t,a,ae,o,i,null)}return;case"dialog":Cs("beforetoggle",t),Cs("toggle",t),Cs("cancel",t),Cs("close",t);break;case"iframe":case"object":Cs("load",t);break;case"video":case"audio":for(o=0;o<Wc.length;o++)Cs(Wc[o],t);break;case"image":Cs("error",t),Cs("load",t);break;case"details":Cs("toggle",t);break;case"embed":case"source":case"link":Cs("error",t),Cs("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Se in i)if(i.hasOwnProperty(Se)&&(o=i[Se],o!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:la(t,a,Se,o,i,null)}return;default:if(rt(a)){for(Ge in i)i.hasOwnProperty(Ge)&&(o=i[Ge],o!==void 0&&Xf(t,a,Ge,o,i,void 0));return}}for(_ in i)i.hasOwnProperty(_)&&(o=i[_],o!=null&&la(t,a,_,o,i,null))}function Aw(t,a,i,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,x=null,C=null,_=null,ae=null,Se=null,Ge=null;for($e in i){var Ke=i[$e];if(i.hasOwnProperty($e)&&Ke!=null)switch($e){case"checked":break;case"value":break;case"defaultValue":ae=Ke;default:o.hasOwnProperty($e)||la(t,a,$e,null,o,Ke)}}for(var Oe in o){var $e=o[Oe];if(Ke=i[Oe],o.hasOwnProperty(Oe)&&($e!=null||Ke!=null))switch(Oe){case"type":x=$e;break;case"name":h=$e;break;case"checked":Se=$e;break;case"defaultChecked":Ge=$e;break;case"value":C=$e;break;case"defaultValue":_=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(l(137,a));break;default:$e!==Ke&&la(t,a,Oe,$e,o,Ke)}}cs(t,C,_,ae,Se,Ge,x,h);return;case"select":$e=C=_=Oe=null;for(x in i)if(ae=i[x],i.hasOwnProperty(x)&&ae!=null)switch(x){case"value":break;case"multiple":$e=ae;default:o.hasOwnProperty(x)||la(t,a,x,null,o,ae)}for(h in o)if(x=o[h],ae=i[h],o.hasOwnProperty(h)&&(x!=null||ae!=null))switch(h){case"value":Oe=x;break;case"defaultValue":_=x;break;case"multiple":C=x;default:x!==ae&&la(t,a,h,x,o,ae)}a=_,i=C,o=$e,Oe!=null?fi(t,!!i,Oe,!1):!!o!=!!i&&(a!=null?fi(t,!!i,a,!0):fi(t,!!i,i?[]:"",!1));return;case"textarea":$e=Oe=null;for(_ in i)if(h=i[_],i.hasOwnProperty(_)&&h!=null&&!o.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:la(t,a,_,null,o,h)}for(C in o)if(h=o[C],x=i[C],o.hasOwnProperty(C)&&(h!=null||x!=null))switch(C){case"value":Oe=h;break;case"defaultValue":$e=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(l(91));break;default:h!==x&&la(t,a,C,h,o,x)}pi(t,Oe,$e);return;case"option":for(var Ot in i)if(Oe=i[Ot],i.hasOwnProperty(Ot)&&Oe!=null&&!o.hasOwnProperty(Ot))switch(Ot){case"selected":t.selected=!1;break;default:la(t,a,Ot,null,o,Oe)}for(ae in o)if(Oe=o[ae],$e=i[ae],o.hasOwnProperty(ae)&&Oe!==$e&&(Oe!=null||$e!=null))switch(ae){case"selected":t.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:la(t,a,ae,Oe,o,$e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Jt in i)Oe=i[Jt],i.hasOwnProperty(Jt)&&Oe!=null&&!o.hasOwnProperty(Jt)&&la(t,a,Jt,null,o,Oe);for(Se in o)if(Oe=o[Se],$e=i[Se],o.hasOwnProperty(Se)&&Oe!==$e&&(Oe!=null||$e!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(l(137,a));break;default:la(t,a,Se,Oe,o,$e)}return;default:if(rt(a)){for(var oa in i)Oe=i[oa],i.hasOwnProperty(oa)&&Oe!==void 0&&!o.hasOwnProperty(oa)&&Xf(t,a,oa,void 0,o,Oe);for(Ge in o)Oe=o[Ge],$e=i[Ge],!o.hasOwnProperty(Ge)||Oe===$e||Oe===void 0&&$e===void 0||Xf(t,a,Ge,Oe,o,$e);return}}for(var xe in i)Oe=i[xe],i.hasOwnProperty(xe)&&Oe!=null&&!o.hasOwnProperty(xe)&&la(t,a,xe,null,o,Oe);for(Ke in o)Oe=o[Ke],$e=i[Ke],!o.hasOwnProperty(Ke)||Oe===$e||Oe==null&&$e==null||la(t,a,Ke,Oe,o,$e)}function Sg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ew(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var h=i[o],x=h.transferSize,C=h.initiatorType,_=h.duration;if(x&&_&&Sg(C)){for(C=0,_=h.responseEnd,o+=1;o<i.length;o++){var ae=i[o],Se=ae.startTime;if(Se>_)break;var Ge=ae.transferSize,Ke=ae.initiatorType;Ge&&Sg(Ke)&&(ae=ae.responseEnd,C+=Ge*(ae<_?1:(_-Se)/(ae-Se)))}if(--o,a+=8*(x+C)/(h.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ep=null,tp=null;function Vu(t){return t.nodeType===9?t:t.ownerDocument}function Cg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ag(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function sp(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ap=null;function Tw(){var t=window.event;return t&&t.type==="popstate"?t===ap?!1:(ap=t,!0):(ap=null,!1)}var Eg=typeof setTimeout=="function"?setTimeout:void 0,kw=typeof clearTimeout=="function"?clearTimeout:void 0,Tg=typeof Promise=="function"?Promise:void 0,Dw=typeof queueMicrotask=="function"?queueMicrotask:typeof Tg<"u"?function(t){return Tg.resolve(null).then(t).catch(Pw)}:Eg;function Pw(t){setTimeout(function(){throw t})}function Sl(t){return t==="head"}function kg(t,a){var i=a,o=0;do{var h=i.nextSibling;if(t.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"||i==="/&"){if(o===0){t.removeChild(h),Ho(a);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")Jc(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,Jc(i);for(var x=i.firstChild;x;){var C=x.nextSibling,_=x.nodeName;x[ps]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&x.rel.toLowerCase()==="stylesheet"||i.removeChild(x),x=C}}else i==="body"&&Jc(t.ownerDocument.body);i=h}while(i);Ho(a)}function Dg(t,a){var i=t;t=0;do{var o=i.nextSibling;if(i.nodeType===1?a?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(a?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=o}while(i)}function rp(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":rp(i),Ks(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function Ow(t,a,i,o){for(;t.nodeType===1;){var h=i;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ps])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(x=t.getAttribute("rel"),x==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(x!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(x=t.getAttribute("src"),(x!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&x&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var x=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===x)return t}else return t;if(t=Si(t.nextSibling),t===null)break}return null}function Rw(t,a,i){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Si(t.nextSibling),t===null))return null;return t}function Pg(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Si(t.nextSibling),t===null))return null;return t}function ip(t){return t.data==="$?"||t.data==="$~"}function np(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Mw(t,a){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||i.readyState!=="loading")a();else{var o=function(){a(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Si(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var lp=null;function Og(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(a===0)return Si(t.nextSibling);a--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||a++}t=t.nextSibling}return null}function Rg(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(a===0)return t;a--}else i!=="/$"&&i!=="/&"||a++}t=t.previousSibling}return null}function Mg(t,a,i){switch(a=Vu(i),t){case"html":if(t=a.documentElement,!t)throw Error(l(452));return t;case"head":if(t=a.head,!t)throw Error(l(453));return t;case"body":if(t=a.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function Jc(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ks(t)}var Ci=new Map,_g=new Set;function Bu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Gn=K.d;K.d={f:_w,r:zw,D:Lw,C:$w,L:Fw,m:Uw,X:Vw,S:Iw,M:Bw};function _w(){var t=Gn.f(),a=Mu();return t||a}function zw(t){var a=is(t);a!==null&&a.tag===5&&a.type==="form"?Kx(a):Gn.r(t)}var Vo=typeof document>"u"?null:document;function zg(t,a,i){var o=Vo;if(o&&typeof a=="string"&&a){var h=ta(a);h='link[rel="'+t+'"][href="'+h+'"]',typeof i=="string"&&(h+='[crossorigin="'+i+'"]'),_g.has(h)||(_g.add(h),t={rel:t,crossOrigin:i,href:a},o.querySelector(h)===null&&(a=o.createElement("link"),dr(a,"link",t),Xs(a),o.head.appendChild(a)))}}function Lw(t){Gn.D(t),zg("dns-prefetch",t,null)}function $w(t,a){Gn.C(t,a),zg("preconnect",t,a)}function Fw(t,a,i){Gn.L(t,a,i);var o=Vo;if(o&&t&&a){var h='link[rel="preload"][as="'+ta(a)+'"]';a==="image"&&i&&i.imageSrcSet?(h+='[imagesrcset="'+ta(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(h+='[imagesizes="'+ta(i.imageSizes)+'"]')):h+='[href="'+ta(t)+'"]';var x=h;switch(a){case"style":x=Bo(t);break;case"script":x=qo(t)}Ci.has(x)||(t=v({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:t,as:a},i),Ci.set(x,t),o.querySelector(h)!==null||a==="style"&&o.querySelector(Kc(x))||a==="script"&&o.querySelector(Xc(x))||(a=o.createElement("link"),dr(a,"link",t),Xs(a),o.head.appendChild(a)))}}function Uw(t,a){Gn.m(t,a);var i=Vo;if(i&&t){var o=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+ta(o)+'"][href="'+ta(t)+'"]',x=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=qo(t)}if(!Ci.has(x)&&(t=v({rel:"modulepreload",href:t},a),Ci.set(x,t),i.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Xc(x)))return}o=i.createElement("link"),dr(o,"link",t),Xs(o),i.head.appendChild(o)}}}function Iw(t,a,i){Gn.S(t,a,i);var o=Vo;if(o&&t){var h=nr(o).hoistableStyles,x=Bo(t);a=a||"default";var C=h.get(x);if(!C){var _={loading:0,preload:null};if(C=o.querySelector(Kc(x)))_.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":a},i),(i=Ci.get(x))&&op(t,i);var ae=C=o.createElement("link");Xs(ae),dr(ae,"link",t),ae._p=new Promise(function(Se,Ge){ae.onload=Se,ae.onerror=Ge}),ae.addEventListener("load",function(){_.loading|=1}),ae.addEventListener("error",function(){_.loading|=2}),_.loading|=4,qu(C,a,o)}C={type:"stylesheet",instance:C,count:1,state:_},h.set(x,C)}}}function Vw(t,a){Gn.X(t,a);var i=Vo;if(i&&t){var o=nr(i).hoistableScripts,h=qo(t),x=o.get(h);x||(x=i.querySelector(Xc(h)),x||(t=v({src:t,async:!0},a),(a=Ci.get(h))&&cp(t,a),x=i.createElement("script"),Xs(x),dr(x,"link",t),i.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},o.set(h,x))}}function Bw(t,a){Gn.M(t,a);var i=Vo;if(i&&t){var o=nr(i).hoistableScripts,h=qo(t),x=o.get(h);x||(x=i.querySelector(Xc(h)),x||(t=v({src:t,async:!0,type:"module"},a),(a=Ci.get(h))&&cp(t,a),x=i.createElement("script"),Xs(x),dr(x,"link",t),i.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},o.set(h,x))}}function Lg(t,a,i,o){var h=(h=R.current)?Bu(h):null;if(!h)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=Bo(i.href),i=nr(h).hoistableStyles,o=i.get(a),o||(o={type:"style",instance:null,count:0,state:null},i.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Bo(i.href);var x=nr(h).hoistableStyles,C=x.get(t);if(C||(h=h.ownerDocument||h,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(t,C),(x=h.querySelector(Kc(t)))&&!x._p&&(C.instance=x,C.state.loading=5),Ci.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ci.set(t,i),x||qw(h,t,i,C.state))),a&&o===null)throw Error(l(528,""));return C}if(a&&o!==null)throw Error(l(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=qo(i),i=nr(h).hoistableScripts,o=i.get(a),o||(o={type:"script",instance:null,count:0,state:null},i.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function Bo(t){return'href="'+ta(t)+'"'}function Kc(t){return'link[rel="stylesheet"]['+t+"]"}function $g(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function qw(t,a,i,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),dr(a,"link",i),Xs(a),t.head.appendChild(a))}function qo(t){return'[src="'+ta(t)+'"]'}function Xc(t){return"script[async]"+t}function Fg(t,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+ta(i.href)+'"]');if(o)return a.instance=o,Xs(o),o;var h=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Xs(o),dr(o,"style",h),qu(o,i.precedence,t),a.instance=o;case"stylesheet":h=Bo(i.href);var x=t.querySelector(Kc(h));if(x)return a.state.loading|=4,a.instance=x,Xs(x),x;o=$g(i),(h=Ci.get(h))&&op(o,h),x=(t.ownerDocument||t).createElement("link"),Xs(x);var C=x;return C._p=new Promise(function(_,ae){C.onload=_,C.onerror=ae}),dr(x,"link",o),a.state.loading|=4,qu(x,i.precedence,t),a.instance=x;case"script":return x=qo(i.src),(h=t.querySelector(Xc(x)))?(a.instance=h,Xs(h),h):(o=i,(h=Ci.get(x))&&(o=v({},i),cp(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Xs(h),dr(h,"link",o),t.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(l(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,qu(o,i.precedence,t));return a.instance}function qu(t,a,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,x=h,C=0;C<o.length;C++){var _=o[C];if(_.dataset.precedence===a)x=_;else if(x!==h)break}x?x.parentNode.insertBefore(t,x.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(t,a.firstChild))}function op(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function cp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Hu=null;function Ug(t,a,i){if(Hu===null){var o=new Map,h=Hu=new Map;h.set(i,o)}else h=Hu,o=h.get(i),o||(o=new Map,h.set(i,o));if(o.has(t))return o;for(o.set(t,null),i=i.getElementsByTagName(t),h=0;h<i.length;h++){var x=i[h];if(!(x[ps]||x[dt]||t==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var C=x.getAttribute(a)||"";C=t+C;var _=o.get(C);_?_.push(x):o.set(C,[x])}}return o}function Ig(t,a,i){t=t.ownerDocument||t,t.head.insertBefore(i,a==="title"?t.querySelector("head > title"):null)}function Hw(t,a,i){if(i===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Vg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Gw(t,a,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Bo(o.href),x=a.querySelector(Kc(h));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Gu.bind(t),a.then(t,t)),i.state.loading|=4,i.instance=x,Xs(x);return}x=a.ownerDocument||a,o=$g(o),(h=Ci.get(h))&&op(o,h),x=x.createElement("link"),Xs(x);var C=x;C._p=new Promise(function(_,ae){C.onload=_,C.onerror=ae}),dr(x,"link",o),i.instance=x}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=Gu.bind(t),a.addEventListener("load",i),a.addEventListener("error",i))}}var dp=0;function Qw(t,a){return t.stylesheets&&t.count===0&&Yu(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var o=setTimeout(function(){if(t.stylesheets&&Yu(t,t.stylesheets),t.unsuspend){var x=t.unsuspend;t.unsuspend=null,x()}},6e4+a);0<t.imgBytes&&dp===0&&(dp=62500*Ew());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Yu(t,t.stylesheets),t.unsuspend)){var x=t.unsuspend;t.unsuspend=null,x()}},(t.imgBytes>dp?50:800)+a);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Gu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Qu=null;function Yu(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Qu=new Map,a.forEach(Yw,t),Qu=null,Gu.call(t))}function Yw(t,a){if(!(a.state.loading&4)){var i=Qu.get(t);if(i)var o=i.get(null);else{i=new Map,Qu.set(t,i);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<h.length;x++){var C=h[x];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(i.set(C.dataset.precedence,C),o=C)}o&&i.set(null,o)}h=a.instance,C=h.getAttribute("data-precedence"),x=i.get(C)||o,x===o&&i.set(null,h),i.set(C,h),this.count++,o=Gu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),x?x.parentNode.insertBefore(h,x.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),a.state.loading|=4}}var ed={$$typeof:B,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function Ww(t,a,i,o,h,x,C,_,ae){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=x,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ae,this.incompleteTransitions=new Map}function Bg(t,a,i,o,h,x,C,_,ae,Se,Ge,Ke){return t=new Ww(t,a,i,C,ae,Se,Ge,Ke,_),a=1,x===!0&&(a|=24),x=vr(3,null,null,a),t.current=x,x.stateNode=t,a=yt(),a.refCount++,t.pooledCache=a,a.refCount++,x.memoizedState={element:o,isDehydrated:i,cache:a},Gm(x),t}function qg(t){return t?(t=Mr,t):Mr}function Hg(t,a,i,o,h,x){h=qg(h),o.context===null?o.context=h:o.pendingContext=h,o=fl(a),o.payload={element:i},x=x===void 0?null:x,x!==null&&(o.callback=x),i=pl(t,o,a),i!==null&&(Gr(i,t,a),Oc(i,t,a))}function Gg(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<a?i:a}}function up(t,a){Gg(t,a),(t=t.alternate)&&Gg(t,a)}function Qg(t){if(t.tag===13||t.tag===31){var a=mn(t,67108864);a!==null&&Gr(a,t,67108864),up(t,67108864)}}function Yg(t){if(t.tag===13||t.tag===31){var a=li();a=Ee(a);var i=mn(t,a);i!==null&&Gr(i,t,a),up(t,a)}}var Wu=!0;function Zw(t,a,i,o){var h=I.T;I.T=null;var x=K.p;try{K.p=2,mp(t,a,i,o)}finally{K.p=x,I.T=h}}function Jw(t,a,i,o){var h=I.T;I.T=null;var x=K.p;try{K.p=8,mp(t,a,i,o)}finally{K.p=x,I.T=h}}function mp(t,a,i,o){if(Wu){var h=fp(o);if(h===null)Kf(t,a,o,Zu,i),Zg(t,o);else if(Xw(h,t,a,i,o))o.stopPropagation();else if(Zg(t,o),a&4&&-1<Kw.indexOf(t)){for(;h!==null;){var x=is(h);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var C=Js(x.pendingLanes);if(C!==0){var _=x;for(_.pendingLanes|=2,_.entangledLanes|=2;C;){var ae=1<<31-Ns(C);_.entanglements[1]|=ae,C&=~ae}gn(x),(Hs&6)===0&&(Ou=$t()+500,Yc(0))}}break;case 31:case 13:_=mn(x,2),_!==null&&Gr(_,x,2),Mu(),up(x,2)}if(x=fp(o),x===null&&Kf(t,a,o,Zu,i),x===h)break;h=x}h!==null&&o.stopPropagation()}else Kf(t,a,o,null,i)}}function fp(t){return t=pt(t),pp(t)}var Zu=null;function pp(t){if(Zu=null,t=es(t),t!==null){var a=m(t);if(a===null)t=null;else{var i=a.tag;if(i===13){if(t=u(a),t!==null)return t;t=null}else if(i===31){if(t=p(a),t!==null)return t;t=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Zu=t,null}function Wg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bs()){case vs:return 2;case fa:return 8;case $s:case Zs:return 32;case pa:return 268435456;default:return 32}default:return 32}}var hp=!1,Cl=null,Al=null,El=null,td=new Map,sd=new Map,Tl=[],Kw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zg(t,a){switch(t){case"focusin":case"focusout":Cl=null;break;case"dragenter":case"dragleave":Al=null;break;case"mouseover":case"mouseout":El=null;break;case"pointerover":case"pointerout":td.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":sd.delete(a.pointerId)}}function ad(t,a,i,o,h,x){return t===null||t.nativeEvent!==x?(t={blockedOn:a,domEventName:i,eventSystemFlags:o,nativeEvent:x,targetContainers:[h]},a!==null&&(a=is(a),a!==null&&Qg(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),t)}function Xw(t,a,i,o,h){switch(a){case"focusin":return Cl=ad(Cl,t,a,i,o,h),!0;case"dragenter":return Al=ad(Al,t,a,i,o,h),!0;case"mouseover":return El=ad(El,t,a,i,o,h),!0;case"pointerover":var x=h.pointerId;return td.set(x,ad(td.get(x)||null,t,a,i,o,h)),!0;case"gotpointercapture":return x=h.pointerId,sd.set(x,ad(sd.get(x)||null,t,a,i,o,h)),!0}return!1}function Jg(t){var a=es(t.target);if(a!==null){var i=m(a);if(i!==null){if(a=i.tag,a===13){if(a=u(i),a!==null){t.blockedOn=a,Dt(t.priority,function(){Yg(i)});return}}else if(a===31){if(a=p(i),a!==null){t.blockedOn=a,Dt(t.priority,function(){Yg(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ju(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var i=fp(t.nativeEvent);if(i===null){i=t.nativeEvent;var o=new i.constructor(i.type,i);ve=o,i.target.dispatchEvent(o),ve=null}else return a=is(i),a!==null&&Qg(a),t.blockedOn=i,!1;a.shift()}return!0}function Kg(t,a,i){Ju(t)&&i.delete(a)}function e1(){hp=!1,Cl!==null&&Ju(Cl)&&(Cl=null),Al!==null&&Ju(Al)&&(Al=null),El!==null&&Ju(El)&&(El=null),td.forEach(Kg),sd.forEach(Kg)}function Ku(t,a){t.blockedOn===a&&(t.blockedOn=null,hp||(hp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,e1)))}var Xu=null;function Xg(t){Xu!==t&&(Xu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Xu===t&&(Xu=null);for(var a=0;a<t.length;a+=3){var i=t[a],o=t[a+1],h=t[a+2];if(typeof o!="function"){if(pp(o||i)===null)continue;break}var x=is(i);x!==null&&(t.splice(a,3),a-=3,ff(x,{pending:!0,data:h,method:i.method,action:o},o,h))}}))}function Ho(t){function a(ae){return Ku(ae,t)}Cl!==null&&Ku(Cl,t),Al!==null&&Ku(Al,t),El!==null&&Ku(El,t),td.forEach(a),sd.forEach(a);for(var i=0;i<Tl.length;i++){var o=Tl[i];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Tl.length&&(i=Tl[0],i.blockedOn===null);)Jg(i),i.blockedOn===null&&Tl.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var h=i[o],x=i[o+1],C=h[vt]||null;if(typeof x=="function")C||Xg(i);else if(C){var _=null;if(x&&x.hasAttribute("formAction")){if(h=x,C=x[vt]||null)_=C.formAction;else if(pp(h)!==null)continue}else _=C.action;typeof _=="function"?i[o+1]=_:(i.splice(o,3),o-=3),Xg(i)}}}function eb(){function t(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(C){return h=C})},focusReset:"manual",scroll:"manual"})}function a(){h!==null&&(h(),h=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),h!==null&&(h(),h=null)}}}function xp(t){this._internalRoot=t}em.prototype.render=xp.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(l(409));var i=a.current,o=li();Hg(i,o,t,a,null,null)},em.prototype.unmount=xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Hg(t.current,2,null,t,null,null),Mu(),a[Pt]=null}};function em(t){this._internalRoot=t}em.prototype.unstable_scheduleHydration=function(t){if(t){var a=it();t={blockedOn:null,target:t,priority:a};for(var i=0;i<Tl.length&&a!==0&&a<Tl[i].priority;i++);Tl.splice(i,0,t),i===0&&Jg(t)}};var tb=r.version;if(tb!=="19.2.3")throw Error(l(527,tb,"19.2.3"));K.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=f(a),t=t!==null?j(t):null,t=t===null?null:t.stateNode,t};var t1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tm.isDisabled&&tm.supportsFiber)try{ha=tm.inject(t1),Vt=tm}catch{}}return id.createRoot=function(t,a){if(!d(t))throw Error(l(299));var i=!1,o="",h=o0,x=c0,C=d0;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError)),a=Bg(t,1,!1,null,null,i,o,null,h,x,C,eb),t[Pt]=a.current,Jf(t),new xp(a)},id.hydrateRoot=function(t,a,i){if(!d(t))throw Error(l(299));var o=!1,h="",x=o0,C=c0,_=d0,ae=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(x=i.onUncaughtError),i.onCaughtError!==void 0&&(C=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.formState!==void 0&&(ae=i.formState)),a=Bg(t,1,!0,a,i??null,o,h,ae,x,C,_,eb),a.context=qg(null),i=a.current,o=li(),o=Ee(o),h=fl(o),h.callback=null,pl(i,h,o),i=o,a.current.lanes=i,Zr(a,i),gn(a),t[Pt]=a.current,Jf(t),new em(a)},id.version="19.2.3",id}var ub;function m1(){if(ub)return bp.exports;ub=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),bp.exports=u1(),bp.exports}var mb=m1(),y=wh();const Pi=r1(y),f1=a1({__proto__:null,default:Pi},[y]);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bj=s=>{throw TypeError(s)},p1=(s,r,n)=>r.has(s)||bj("Cannot "+n),wp=(s,r,n)=>(p1(s,r,"read from private field"),n?n.call(s):r.get(s)),h1=(s,r,n)=>r.has(s)?bj("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,n),fb="popstate";function x1(s={}){function r(l,d){let{pathname:m,search:u,hash:p}=l.location;return Nd("",{pathname:m,search:u,hash:p},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function n(l,d){return typeof d=="string"?d:wn(d)}return b1(r,n,null,s)}function js(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function La(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function g1(){return Math.random().toString(36).substring(2,10)}function pb(s,r){return{usr:s.state,key:s.key,idx:r}}function Nd(s,r,n=null,l){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof r=="string"?Il(r):r,state:n,key:r&&r.key||l||g1()}}function wn({pathname:s="/",search:r="",hash:n=""}){return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Il(s){let r={};if(s){let n=s.indexOf("#");n>=0&&(r.hash=s.substring(n),s=s.substring(0,n));let l=s.indexOf("?");l>=0&&(r.search=s.substring(l),s=s.substring(0,l)),s&&(r.pathname=s)}return r}function b1(s,r,n,l={}){let{window:d=document.defaultView,v5Compat:m=!1}=l,u=d.history,p="POP",b=null,f=j();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function j(){return(u.state||{idx:null}).idx}function v(){p="POP";let $=j(),L=$==null?null:$-f;f=$,b&&b({action:p,location:T.location,delta:L})}function w($,L){p="PUSH";let M=Nd(T.location,$,L);f=j()+1;let B=pb(M,f),ce=T.createHref(M);try{u.pushState(B,"",ce)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;d.location.assign(ce)}m&&b&&b({action:p,location:T.location,delta:1})}function D($,L){p="REPLACE";let M=Nd(T.location,$,L);f=j();let B=pb(M,f),ce=T.createHref(M);u.replaceState(B,"",ce),m&&b&&b({action:p,location:T.location,delta:0})}function P($){return yj($)}let T={get action(){return p},get location(){return s(d,u)},listen($){if(b)throw new Error("A history only accepts one active listener");return d.addEventListener(fb,v),b=$,()=>{d.removeEventListener(fb,v),b=null}},createHref($){return r(d,$)},createURL:P,encodeLocation($){let L=P($);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:w,replace:D,go($){return u.go($)}};return T}function yj(s,r=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),js(n,"No window.location.(origin|href) available to create URL");let l=typeof s=="string"?s:wn(s);return l=l.replace(/ $/,"%20"),!r&&l.startsWith("//")&&(l=n+l),new URL(l,n)}var ud,hb=class{constructor(s){if(h1(this,ud,new Map),s)for(let[r,n]of s)this.set(r,n)}get(s){if(wp(this,ud).has(s))return wp(this,ud).get(s);if(s.defaultValue!==void 0)return s.defaultValue;throw new Error("No value found for context")}set(s,r){wp(this,ud).set(s,r)}};ud=new WeakMap;var y1=new Set(["lazy","caseSensitive","path","id","index","children"]);function j1(s){return y1.has(s)}var v1=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function N1(s){return v1.has(s)}function w1(s){return s.index===!0}function wd(s,r,n=[],l={},d=!1){return s.map((m,u)=>{let p=[...n,String(u)],b=typeof m.id=="string"?m.id:p.join("-");if(js(m.index!==!0||!m.children,"Cannot specify children on an index route"),js(d||!l[b],`Found a route id collision on id "${b}".  Route id's must be globally unique within Data Router usages`),w1(m)){let f={...m,id:b};return l[b]=xb(f,r(f)),f}else{let f={...m,id:b,children:void 0};return l[b]=xb(f,r(f)),m.children&&(f.children=wd(m.children,r,p,l,d)),f}})}function xb(s,r){return Object.assign(s,{...r,...typeof r.lazy=="object"&&r.lazy!=null?{lazy:{...s.lazy,...r.lazy}}:{}})}function Rl(s,r,n="/"){return md(s,r,n,!1)}function md(s,r,n,l){let d=typeof r=="string"?Il(r):r,m=Ri(d.pathname||"/",n);if(m==null)return null;let u=jj(s);C1(u);let p=null;for(let b=0;p==null&&b<u.length;++b){let f=z1(m);p=M1(u[b],f,l)}return p}function S1(s,r){let{route:n,pathname:l,params:d}=s;return{id:n.id,pathname:l,params:d,data:r[n.id],loaderData:r[n.id],handle:n.handle}}function jj(s,r=[],n=[],l="",d=!1){let m=(u,p,b=d,f)=>{let j={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(l)&&b)return;js(j.relativePath.startsWith(l),`Absolute route path "${j.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(l.length)}let v=jn([l,j.relativePath]),w=n.concat(j);u.children&&u.children.length>0&&(js(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),jj(u.children,r,w,v,b)),!(u.path==null&&!u.index)&&r.push({path:v,score:O1(v,u.index),routesMeta:w})};return s.forEach((u,p)=>{var b;if(u.path===""||!((b=u.path)!=null&&b.includes("?")))m(u,p);else for(let f of vj(u.path))m(u,p,!0,f)}),r}function vj(s){let r=s.split("/");if(r.length===0)return[];let[n,...l]=r,d=n.endsWith("?"),m=n.replace(/\?$/,"");if(l.length===0)return d?[m,""]:[m];let u=vj(l.join("/")),p=[];return p.push(...u.map(b=>b===""?m:[m,b].join("/"))),d&&p.push(...u),p.map(b=>s.startsWith("/")&&b===""?"/":b)}function C1(s){s.sort((r,n)=>r.score!==n.score?n.score-r.score:R1(r.routesMeta.map(l=>l.childrenIndex),n.routesMeta.map(l=>l.childrenIndex)))}var A1=/^:[\w-]+$/,E1=3,T1=2,k1=1,D1=10,P1=-2,gb=s=>s==="*";function O1(s,r){let n=s.split("/"),l=n.length;return n.some(gb)&&(l+=P1),r&&(l+=T1),n.filter(d=>!gb(d)).reduce((d,m)=>d+(A1.test(m)?E1:m===""?k1:D1),l)}function R1(s,r){return s.length===r.length&&s.slice(0,-1).every((l,d)=>l===r[d])?s[s.length-1]-r[r.length-1]:0}function M1(s,r,n=!1){let{routesMeta:l}=s,d={},m="/",u=[];for(let p=0;p<l.length;++p){let b=l[p],f=p===l.length-1,j=m==="/"?r:r.slice(m.length)||"/",v=ym({path:b.relativePath,caseSensitive:b.caseSensitive,end:f},j),w=b.route;if(!v&&f&&n&&!l[l.length-1].route.index&&(v=ym({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},j)),!v)return null;Object.assign(d,v.params),u.push({params:d,pathname:jn([m,v.pathname]),pathnameBase:U1(jn([m,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(m=jn([m,v.pathnameBase]))}return u}function ym(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,l]=_1(s.path,s.caseSensitive,s.end),d=r.match(n);if(!d)return null;let m=d[0],u=m.replace(/(.)\/+$/,"$1"),p=d.slice(1);return{params:l.reduce((f,{paramName:j,isOptional:v},w)=>{if(j==="*"){let P=p[w]||"";u=m.slice(0,m.length-P.length).replace(/(.)\/+$/,"$1")}const D=p[w];return v&&!D?f[j]=void 0:f[j]=(D||"").replace(/%2F/g,"/"),f},{}),pathname:m,pathnameBase:u,pattern:s}}function _1(s,r=!1,n=!0){La(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let l=[],d="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,b)=>(l.push({paramName:p,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(l.push({paramName:"*"}),d+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?d+="\\/*$":s!==""&&s!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,r?void 0:"i"),l]}function z1(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return La(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),s}}function Ri(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,l=s.charAt(n);return l&&l!=="/"?null:s.slice(n)||"/"}function L1({basename:s,pathname:r}){return r==="/"?s:jn([s,r])}var $1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Em=s=>$1.test(s);function F1(s,r="/"){let{pathname:n,search:l="",hash:d=""}=typeof s=="string"?Il(s):s,m;if(n)if(Em(n))m=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),La(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?m=bb(n.substring(1),"/"):m=bb(n,r)}else m=r;return{pathname:m,search:I1(l),hash:V1(d)}}function bb(s,r){let n=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(d=>{d===".."?n.length>1&&n.pop():d!=="."&&n.push(d)}),n.length>1?n.join("/"):"/"}function Sp(s,r,n,l){return`Cannot include a '${s}' character in a manually specified \`to.${r}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Nj(s){return s.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Sh(s){let r=Nj(s);return r.map((n,l)=>l===r.length-1?n.pathname:n.pathnameBase)}function Ch(s,r,n,l=!1){let d;typeof s=="string"?d=Il(s):(d={...s},js(!d.pathname||!d.pathname.includes("?"),Sp("?","pathname","search",d)),js(!d.pathname||!d.pathname.includes("#"),Sp("#","pathname","hash",d)),js(!d.search||!d.search.includes("#"),Sp("#","search","hash",d)));let m=s===""||d.pathname==="",u=m?"/":d.pathname,p;if(u==null)p=n;else{let v=r.length-1;if(!l&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),v-=1;d.pathname=w.join("/")}p=v>=0?r[v]:"/"}let b=F1(d,p),f=u&&u!=="/"&&u.endsWith("/"),j=(m||u===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(f||j)&&(b.pathname+="/"),b}var jn=s=>s.join("/").replace(/\/\/+/g,"/"),U1=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),I1=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,V1=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Tm=class{constructor(s,r,n,l=!1){this.status=s,this.statusText=r||"",this.internal=l,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Sd(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function zd(s){return s.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var zl=Symbol("Uninstrumented");function B1(s,r){let n={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};s.forEach(d=>d({id:r.id,index:r.index,path:r.path,instrument(m){let u=Object.keys(n);for(let p of u)m[p]&&n[p].push(m[p])}}));let l={};if(typeof r.lazy=="function"&&n.lazy.length>0){let d=Zo(n.lazy,r.lazy,()=>{});d&&(l.lazy=d)}if(typeof r.lazy=="object"){let d=r.lazy;["middleware","loader","action"].forEach(m=>{let u=d[m],p=n[`lazy.${m}`];if(typeof u=="function"&&p.length>0){let b=Zo(p,u,()=>{});b&&(l.lazy=Object.assign(l.lazy||{},{[m]:b}))}})}return["loader","action"].forEach(d=>{let m=r[d];if(typeof m=="function"&&n[d].length>0){let u=m[zl]??m,p=Zo(n[d],u,(...b)=>yb(b[0]));p&&(p[zl]=u,l[d]=p)}}),r.middleware&&r.middleware.length>0&&n.middleware.length>0&&(l.middleware=r.middleware.map(d=>{let m=d[zl]??d,u=Zo(n.middleware,m,(...p)=>yb(p[0]));return u?(u[zl]=m,u):d})),l}function q1(s,r){let n={navigate:[],fetch:[]};if(r.forEach(l=>l({instrument(d){let m=Object.keys(d);for(let u of m)d[u]&&n[u].push(d[u])}})),n.navigate.length>0){let l=s.navigate[zl]??s.navigate,d=Zo(n.navigate,l,(...m)=>{let[u,p]=m;return{to:typeof u=="number"||typeof u=="string"?u:u?wn(u):".",...jb(s,p??{})}});d&&(d[zl]=l,s.navigate=d)}if(n.fetch.length>0){let l=s.fetch[zl]??s.fetch,d=Zo(n.fetch,l,(...m)=>{let[u,,p,b]=m;return{href:p??".",fetcherKey:u,...jb(s,b??{})}});d&&(d[zl]=l,s.fetch=d)}return s}function Zo(s,r,n){return s.length===0?null:async(...l)=>{let d=await wj(s,n(...l),()=>r(...l),s.length-1);if(d.type==="error")throw d.value;return d.value}}async function wj(s,r,n,l){let d=s[l],m;if(d){let u,p=async()=>(u?console.error("You cannot call instrumented handlers more than once"):u=wj(s,r,n,l-1),m=await u,js(m,"Expected a result"),m.type==="error"&&m.value instanceof Error?{status:"error",error:m.value}:{status:"success",error:void 0});try{await d(p,r)}catch(b){console.error("An instrumentation function threw an error:",b)}u||await p(),await u}else try{m={type:"success",value:await n()}}catch(u){m={type:"error",value:u}}return m||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function yb(s){let{request:r,context:n,params:l,unstable_pattern:d}=s;return{request:H1(r),params:{...l},unstable_pattern:d,context:G1(n)}}function jb(s,r){return{currentUrl:wn(s.state.location),..."formMethod"in r?{formMethod:r.formMethod}:{},..."formEncType"in r?{formEncType:r.formEncType}:{},..."formData"in r?{formData:r.formData}:{},..."body"in r?{body:r.body}:{}}}function H1(s){return{method:s.method,url:s.url,headers:{get:(...r)=>s.headers.get(...r)}}}function G1(s){if(Y1(s)){let r={...s};return Object.freeze(r),r}else return{get:r=>s.get(r)}}var Q1=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Y1(s){if(s===null||typeof s!="object")return!1;const r=Object.getPrototypeOf(s);return r===Object.prototype||r===null||Object.getOwnPropertyNames(r).sort().join("\0")===Q1}var Sj=["POST","PUT","PATCH","DELETE"],W1=new Set(Sj),Z1=["GET",...Sj],J1=new Set(Z1),K1=new Set([301,302,303,307,308]),X1=new Set([307,308]),Cp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},e2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},nd={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},t2=s=>({hasErrorBoundary:!!s.hasErrorBoundary}),Cj="remix-router-transitions",Aj=Symbol("ResetLoaderData");function s2(s){const r=s.window?s.window:typeof window<"u"?window:void 0,n=typeof r<"u"&&typeof r.document<"u"&&typeof r.document.createElement<"u";js(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let l=s.hydrationRouteProperties||[],d=s.mapRouteProperties||t2,m=d;if(s.unstable_instrumentations){let X=s.unstable_instrumentations;m=he=>({...d(he),...B1(X.map(Ee=>Ee.route).filter(Boolean),he)})}let u={},p=wd(s.routes,m,void 0,u),b,f=s.basename||"/";f.startsWith("/")||(f=`/${f}`);let j=s.dataStrategy||l2,v={...s.future},w=null,D=new Set,P=null,T=null,$=null,L=s.hydrationData!=null,M=Rl(p,s.history.location,f),B=!1,ce=null,U;if(M==null&&!s.patchRoutesOnNavigation){let X=Ti(404,{pathname:s.history.location.pathname}),{matches:he,route:Ee}=sm(p);U=!0,M=he,ce={[Ee.id]:X}}else if(M&&!s.hydrationData&&Ja(M,p,s.history.location.pathname).active&&(M=null),M)if(M.some(X=>X.route.lazy))U=!1;else if(!M.some(X=>Ah(X.route)))U=!0;else{let X=s.hydrationData?s.hydrationData.loaderData:null,he=s.hydrationData?s.hydrationData.errors:null;if(he){let Ee=M.findIndex(tt=>he[tt.route.id]!==void 0);U=M.slice(0,Ee+1).every(tt=>!Yp(tt.route,X,he))}else U=M.every(Ee=>!Yp(Ee.route,X,he))}else{U=!1,M=[];let X=Ja(null,p,s.history.location.pathname);X.active&&X.matches&&(B=!0,M=X.matches)}let O,k={historyAction:s.history.action,location:s.history.location,matches:M,initialized:U,navigation:Cp,restoreScrollPosition:s.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||ce,fetchers:new Map,blockers:new Map},W="POP",Q=null,ne=!1,le,me=!1,Ve=new Map,F=null,J=!1,I=!1,K=new Set,q=new Map,de=0,Ce=-1,A=new Map,G=new Set,ie=new Map,Re=new Map,ge=new Set,R=new Map,re,je=null;function Ie(){if(w=s.history.listen(({action:X,location:he,delta:Ee})=>{if(re){re(),re=void 0;return}La(R.size===0||Ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let tt=Ps({currentLocation:k.location,nextLocation:he,historyAction:X});if(tt&&Ee!=null){let it=new Promise(Dt=>{re=Dt});s.history.go(Ee*-1),xt(tt,{state:"blocked",location:he,proceed(){xt(tt,{state:"proceeding",proceed:void 0,reset:void 0,location:he}),it.then(()=>s.history.go(Ee))},reset(){let Dt=new Map(k.blockers);Dt.set(tt,nd),fe({blockers:Dt})}}),Q==null||Q.resolve(),Q=null;return}return We(X,he)}),n){w2(r,Ve);let X=()=>S2(r,Ve);r.addEventListener("pagehide",X),F=()=>r.removeEventListener("pagehide",X)}return k.initialized||We("POP",k.location,{initialHydration:!0}),O}function Be(){w&&w(),F&&F(),D.clear(),le&&le.abort(),k.fetchers.forEach((X,he)=>Tt(he)),k.blockers.forEach((X,he)=>ft(he))}function et(X){return D.add(X),()=>D.delete(X)}function fe(X,he={}){X.matches&&(X.matches=X.matches.map(it=>{let Dt=u[it.route.id],lt=it.route;return lt.element!==Dt.element||lt.errorElement!==Dt.errorElement||lt.hydrateFallbackElement!==Dt.hydrateFallbackElement?{...it,route:Dt}:it})),k={...k,...X};let Ee=[],tt=[];k.fetchers.forEach((it,Dt)=>{it.state==="idle"&&(ge.has(Dt)?Ee.push(Dt):tt.push(Dt))}),ge.forEach(it=>{!k.fetchers.has(it)&&!q.has(it)&&Ee.push(it)}),[...D].forEach(it=>it(k,{deletedFetchers:Ee,newErrors:X.errors??null,viewTransitionOpts:he.viewTransitionOpts,flushSync:he.flushSync===!0})),Ee.forEach(it=>Tt(it)),tt.forEach(it=>k.fetchers.delete(it))}function se(X,he,{flushSync:Ee}={}){var Mt,_t;let tt=k.actionData!=null&&k.navigation.formMethod!=null&&Ar(k.navigation.formMethod)&&k.navigation.state==="loading"&&((Mt=X.state)==null?void 0:Mt._isRedirect)!==!0,it;he.actionData?Object.keys(he.actionData).length>0?it=he.actionData:it=null:tt?it=k.actionData:it=null;let Dt=he.loaderData?Db(k.loaderData,he.loaderData,he.matches||[],he.errors):k.loaderData,lt=k.blockers;lt.size>0&&(lt=new Map(lt),lt.forEach((Kt,os)=>lt.set(os,nd)));let dt=J?!1:Pa(X,he.matches||k.matches),vt=ne===!0||k.navigation.formMethod!=null&&Ar(k.navigation.formMethod)&&((_t=X.state)==null?void 0:_t._isRedirect)!==!0;b&&(p=b,b=void 0),J||W==="POP"||(W==="PUSH"?s.history.push(X,X.state):W==="REPLACE"&&s.history.replace(X,X.state));let Pt;if(W==="POP"){let Kt=Ve.get(k.location.pathname);Kt&&Kt.has(X.pathname)?Pt={currentLocation:k.location,nextLocation:X}:Ve.has(X.pathname)&&(Pt={currentLocation:X,nextLocation:k.location})}else if(me){let Kt=Ve.get(k.location.pathname);Kt?Kt.add(X.pathname):(Kt=new Set([X.pathname]),Ve.set(k.location.pathname,Kt)),Pt={currentLocation:k.location,nextLocation:X}}fe({...he,actionData:it,loaderData:Dt,historyAction:W,location:X,initialized:!0,navigation:Cp,revalidation:"idle",restoreScrollPosition:dt,preventScrollReset:vt,blockers:lt},{viewTransitionOpts:Pt,flushSync:Ee===!0}),W="POP",ne=!1,me=!1,J=!1,I=!1,Q==null||Q.resolve(),Q=null,je==null||je.resolve(),je=null}async function te(X,he){if(Q==null||Q.resolve(),Q=null,typeof X=="number"){Q||(Q=Mb());let os=Q.promise;return s.history.go(X),os}let Ee=Qp(k.location,k.matches,f,X,he==null?void 0:he.fromRouteId,he==null?void 0:he.relative),{path:tt,submission:it,error:Dt}=vb(!1,Ee,he),lt=k.location,dt=Nd(k.location,tt,he&&he.state);dt={...dt,...s.history.encodeLocation(dt)};let vt=he&&he.replace!=null?he.replace:void 0,Pt="PUSH";vt===!0?Pt="REPLACE":vt===!1||it!=null&&Ar(it.formMethod)&&it.formAction===k.location.pathname+k.location.search&&(Pt="REPLACE");let Mt=he&&"preventScrollReset"in he?he.preventScrollReset===!0:void 0,_t=(he&&he.flushSync)===!0,Kt=Ps({currentLocation:lt,nextLocation:dt,historyAction:Pt});if(Kt){xt(Kt,{state:"blocked",location:dt,proceed(){xt(Kt,{state:"proceeding",proceed:void 0,reset:void 0,location:dt}),te(X,he)},reset(){let os=new Map(k.blockers);os.set(Kt,nd),fe({blockers:os})}});return}await We(Pt,dt,{submission:it,pendingError:Dt,preventScrollReset:Mt,replace:he&&he.replace,enableViewTransition:he&&he.viewTransition,flushSync:_t})}function be(){je||(je=Mb()),fa(),fe({revalidation:"loading"});let X=je.promise;return k.navigation.state==="submitting"?X:k.navigation.state==="idle"?(We(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),X):(We(W||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:me===!0}),X)}async function We(X,he,Ee){le&&le.abort(),le=null,W=X,J=(Ee&&Ee.startUninterruptedRevalidation)===!0,ra(k.location,k.matches),ne=(Ee&&Ee.preventScrollReset)===!0,me=(Ee&&Ee.enableViewTransition)===!0;let tt=b||p,it=Ee&&Ee.overrideNavigation,Dt=Ee!=null&&Ee.initialHydration&&k.matches&&k.matches.length>0&&!B?k.matches:Rl(tt,he,f),lt=(Ee&&Ee.flushSync)===!0;if(Dt&&k.initialized&&!I&&h2(k.location,he)&&!(Ee&&Ee.submission&&Ar(Ee.submission.formMethod))){se(he,{matches:Dt},{flushSync:lt});return}let dt=Ja(Dt,tt,he.pathname);if(dt.active&&dt.matches&&(Dt=dt.matches),!Dt){let{error:Ks,notFoundMatches:es,route:is}=Qs(he.pathname);se(he,{matches:es,loaderData:{},errors:{[is.id]:Ks}},{flushSync:lt});return}le=new AbortController;let vt=Wo(s.history,he,le.signal,Ee&&Ee.submission),Pt=s.getContext?await s.getContext():new hb,Mt;if(Ee&&Ee.pendingError)Mt=[Ml(Dt).route.id,{type:"error",error:Ee.pendingError}];else if(Ee&&Ee.submission&&Ar(Ee.submission.formMethod)){let Ks=await at(vt,he,Ee.submission,Dt,Pt,dt.active,Ee&&Ee.initialHydration===!0,{replace:Ee.replace,flushSync:lt});if(Ks.shortCircuited)return;if(Ks.pendingActionResult){let[es,is]=Ks.pendingActionResult;if(oi(is)&&Sd(is.error)&&is.error.status===404){le=null,se(he,{matches:Ks.matches,loaderData:{},errors:{[es]:is.error}});return}}Dt=Ks.matches||Dt,Mt=Ks.pendingActionResult,it=Ap(he,Ee.submission),lt=!1,dt.active=!1,vt=Wo(s.history,vt.url,vt.signal)}let{shortCircuited:_t,matches:Kt,loaderData:os,errors:ps}=await _e(vt,he,Dt,Pt,dt.active,it,Ee&&Ee.submission,Ee&&Ee.fetcherSubmission,Ee&&Ee.replace,Ee&&Ee.initialHydration===!0,lt,Mt);_t||(le=null,se(he,{matches:Kt||Dt,...Pb(Mt),loaderData:os,errors:ps}))}async function at(X,he,Ee,tt,it,Dt,lt,dt={}){fa();let vt=v2(he,Ee);if(fe({navigation:vt},{flushSync:dt.flushSync===!0}),Dt){let _t=await ir(tt,he.pathname,X.signal);if(_t.type==="aborted")return{shortCircuited:!0};if(_t.type==="error"){if(_t.partialMatches.length===0){let{matches:os,route:ps}=sm(p);return{matches:os,pendingActionResult:[ps.id,{type:"error",error:_t.error}]}}let Kt=Ml(_t.partialMatches).route.id;return{matches:_t.partialMatches,pendingActionResult:[Kt,{type:"error",error:_t.error}]}}else if(_t.matches)tt=_t.matches;else{let{notFoundMatches:Kt,error:os,route:ps}=Qs(he.pathname);return{matches:Kt,pendingActionResult:[ps.id,{type:"error",error:os}]}}}let Pt,Mt=dm(tt,he);if(!Mt.route.action&&!Mt.route.lazy)Pt={type:"error",error:Ti(405,{method:X.method,pathname:he.pathname,routeId:Mt.route.id})};else{let _t=ac(m,u,X,tt,Mt,lt?[]:l,it),Kt=await Bs(X,_t,it,null);if(Pt=Kt[Mt.route.id],!Pt){for(let os of tt)if(Kt[os.route.id]){Pt=Kt[os.route.id];break}}if(X.signal.aborted)return{shortCircuited:!0}}if(no(Pt)){let _t;return dt&&dt.replace!=null?_t=dt.replace:_t=Eb(Pt.response.headers.get("Location"),new URL(X.url),f)===k.location.pathname+k.location.search,await $t(X,Pt,!0,{submission:Ee,replace:_t}),{shortCircuited:!0}}if(oi(Pt)){let _t=Ml(tt,Mt.route.id);return(dt&&dt.replace)!==!0&&(W="PUSH"),{matches:tt,pendingActionResult:[_t.route.id,Pt,Mt.route.id]}}return{matches:tt,pendingActionResult:[Mt.route.id,Pt]}}async function _e(X,he,Ee,tt,it,Dt,lt,dt,vt,Pt,Mt,_t){let Kt=Dt||Ap(he,lt),os=lt||dt||Rb(Kt),ps=!J&&!Pt;if(it){if(ps){let hs=At(_t);fe({navigation:Kt,...hs!==void 0?{actionData:hs}:{}},{flushSync:Mt})}let Yt=await ir(Ee,he.pathname,X.signal);if(Yt.type==="aborted")return{shortCircuited:!0};if(Yt.type==="error"){if(Yt.partialMatches.length===0){let{matches:Oa,route:ea}=sm(p);return{matches:Oa,loaderData:{},errors:{[ea.id]:Yt.error}}}let hs=Ml(Yt.partialMatches).route.id;return{matches:Yt.partialMatches,loaderData:{},errors:{[hs]:Yt.error}}}else if(Yt.matches)Ee=Yt.matches;else{let{error:hs,notFoundMatches:Oa,route:ea}=Qs(he.pathname);return{matches:Oa,loaderData:{},errors:{[ea.id]:hs}}}}let Ks=b||p,{dsMatches:es,revalidatingFetchers:is}=Nb(X,tt,m,u,s.history,k,Ee,os,he,Pt?[]:l,Pt===!0,I,K,ge,ie,G,Ks,f,s.patchRoutesOnNavigation!=null,_t);if(Ce=++de,!s.dataStrategy&&!es.some(Yt=>Yt.shouldLoad)&&!es.some(Yt=>Yt.route.middleware&&Yt.route.middleware.length>0)&&is.length===0){let Yt=Ns();return se(he,{matches:Ee,loaderData:{},errors:_t&&oi(_t[1])?{[_t[0]]:_t[1].error}:null,...Pb(_t),...Yt?{fetchers:new Map(k.fetchers)}:{}},{flushSync:Mt}),{shortCircuited:!0}}if(ps){let Yt={};if(!it){Yt.navigation=Kt;let hs=At(_t);hs!==void 0&&(Yt.actionData=hs)}is.length>0&&(Yt.fetchers=Xt(is)),fe(Yt,{flushSync:Mt})}is.forEach(Yt=>{Vt(Yt.key),Yt.controller&&q.set(Yt.key,Yt.controller)});let rs=()=>is.forEach(Yt=>Vt(Yt.key));le&&le.signal.addEventListener("abort",rs);let{loaderResults:nr,fetcherResults:Xs}=await vs(es,is,X,tt);if(X.signal.aborted)return{shortCircuited:!0};le&&le.signal.removeEventListener("abort",rs),is.forEach(Yt=>q.delete(Yt.key));let mr=am(nr);if(mr)return await $t(X,mr.result,!0,{replace:vt}),{shortCircuited:!0};if(mr=am(Xs),mr)return G.add(mr.key),await $t(X,mr.result,!0,{replace:vt}),{shortCircuited:!0};let{loaderData:gr,errors:qs}=kb(k,Ee,nr,_t,is,Xs);Pt&&k.errors&&(qs={...k.errors,...qs});let Ka=Ns(),Jr=va(Ce),zs=Ka||Jr||is.length>0;return{matches:Ee,loaderData:gr,errors:qs,...zs?{fetchers:new Map(k.fetchers)}:{}}}function At(X){if(X&&!oi(X[1]))return{[X[0]]:X[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function Xt(X){return X.forEach(he=>{let Ee=k.fetchers.get(he.key),tt=ld(void 0,Ee?Ee.data:void 0);k.fetchers.set(he.key,tt)}),new Map(k.fetchers)}async function Ft(X,he,Ee,tt){Vt(X);let it=(tt&&tt.flushSync)===!0,Dt=b||p,lt=Qp(k.location,k.matches,f,Ee,he,tt==null?void 0:tt.relative),dt=Rl(Dt,lt,f),vt=Ja(dt,Dt,lt);if(vt.active&&vt.matches&&(dt=vt.matches),!dt){Zs(X,he,Ti(404,{pathname:lt}),{flushSync:it});return}let{path:Pt,submission:Mt,error:_t}=vb(!0,lt,tt);if(_t){Zs(X,he,_t,{flushSync:it});return}let Kt=s.getContext?await s.getContext():new hb,os=(tt&&tt.preventScrollReset)===!0;if(Mt&&Ar(Mt.formMethod)){await As(X,he,Pt,dt,Kt,vt.active,it,os,Mt);return}ie.set(X,{routeId:he,path:Pt}),await Vs(X,he,Pt,dt,Kt,vt.active,it,os,Mt)}async function As(X,he,Ee,tt,it,Dt,lt,dt,vt){fa(),ie.delete(X);let Pt=k.fetchers.get(X);$s(X,N2(vt,Pt),{flushSync:lt});let Mt=new AbortController,_t=Wo(s.history,Ee,Mt.signal,vt);if(Dt){let us=await ir(tt,new URL(_t.url).pathname,_t.signal,X);if(us.type==="aborted")return;if(us.type==="error"){Zs(X,he,us.error,{flushSync:lt});return}else if(us.matches)tt=us.matches;else{Zs(X,he,Ti(404,{pathname:Ee}),{flushSync:lt});return}}let Kt=dm(tt,Ee);if(!Kt.route.action&&!Kt.route.lazy){let us=Ti(405,{method:vt.formMethod,pathname:Ee,routeId:he});Zs(X,he,us,{flushSync:lt});return}q.set(X,Mt);let os=de,ps=ac(m,u,_t,tt,Kt,l,it),Ks=await Bs(_t,ps,it,X),es=Ks[Kt.route.id];if(!es){for(let us of ps)if(Ks[us.route.id]){es=Ks[us.route.id];break}}if(_t.signal.aborted){q.get(X)===Mt&&q.delete(X);return}if(ge.has(X)){if(no(es)||oi(es)){$s(X,Yn(void 0));return}}else{if(no(es))if(q.delete(X),Ce>os){$s(X,Yn(void 0));return}else return G.add(X),$s(X,ld(vt)),$t(_t,es,!1,{fetcherSubmission:vt,preventScrollReset:dt});if(oi(es)){Zs(X,he,es.error);return}}let is=k.navigation.location||k.location,rs=Wo(s.history,is,Mt.signal),nr=b||p,Xs=k.navigation.state!=="idle"?Rl(nr,k.navigation.location,f):k.matches;js(Xs,"Didn't find any matches after fetcher action");let mr=++de;A.set(X,mr);let gr=ld(vt,es.data);k.fetchers.set(X,gr);let{dsMatches:qs,revalidatingFetchers:Ka}=Nb(rs,it,m,u,s.history,k,Xs,vt,is,l,!1,I,K,ge,ie,G,nr,f,s.patchRoutesOnNavigation!=null,[Kt.route.id,es]);Ka.filter(us=>us.key!==X).forEach(us=>{let da=us.key,ui=k.fetchers.get(da),Xa=ld(void 0,ui?ui.data:void 0);k.fetchers.set(da,Xa),Vt(da),us.controller&&q.set(da,us.controller)}),fe({fetchers:new Map(k.fetchers)});let Jr=()=>Ka.forEach(us=>Vt(us.key));Mt.signal.addEventListener("abort",Jr);let{loaderResults:zs,fetcherResults:Yt}=await vs(qs,Ka,rs,it);if(Mt.signal.aborted)return;if(Mt.signal.removeEventListener("abort",Jr),A.delete(X),q.delete(X),Ka.forEach(us=>q.delete(us.key)),k.fetchers.has(X)){let us=Yn(es.data);k.fetchers.set(X,us)}let hs=am(zs);if(hs)return $t(rs,hs.result,!1,{preventScrollReset:dt});if(hs=am(Yt),hs)return G.add(hs.key),$t(rs,hs.result,!1,{preventScrollReset:dt});let{loaderData:Oa,errors:ea}=kb(k,Xs,zs,void 0,Ka,Yt);va(mr),k.navigation.state==="loading"&&mr>Ce?(js(W,"Expected pending action"),le&&le.abort(),se(k.navigation.location,{matches:Xs,loaderData:Oa,errors:ea,fetchers:new Map(k.fetchers)})):(fe({errors:ea,loaderData:Db(k.loaderData,Oa,Xs,ea),fetchers:new Map(k.fetchers)}),I=!1)}async function Vs(X,he,Ee,tt,it,Dt,lt,dt,vt){let Pt=k.fetchers.get(X);$s(X,ld(vt,Pt?Pt.data:void 0),{flushSync:lt});let Mt=new AbortController,_t=Wo(s.history,Ee,Mt.signal);if(Dt){let is=await ir(tt,new URL(_t.url).pathname,_t.signal,X);if(is.type==="aborted")return;if(is.type==="error"){Zs(X,he,is.error,{flushSync:lt});return}else if(is.matches)tt=is.matches;else{Zs(X,he,Ti(404,{pathname:Ee}),{flushSync:lt});return}}let Kt=dm(tt,Ee);q.set(X,Mt);let os=de,ps=ac(m,u,_t,tt,Kt,l,it),es=(await Bs(_t,ps,it,X))[Kt.route.id];if(q.get(X)===Mt&&q.delete(X),!_t.signal.aborted){if(ge.has(X)){$s(X,Yn(void 0));return}if(no(es))if(Ce>os){$s(X,Yn(void 0));return}else{G.add(X),await $t(_t,es,!1,{preventScrollReset:dt});return}if(oi(es)){Zs(X,he,es.error);return}$s(X,Yn(es.data))}}async function $t(X,he,Ee,{submission:tt,fetcherSubmission:it,preventScrollReset:Dt,replace:lt}={}){Ee||(Q==null||Q.resolve(),Q=null),he.response.headers.has("X-Remix-Revalidate")&&(I=!0);let dt=he.response.headers.get("Location");js(dt,"Expected a Location header on the redirect Response"),dt=Eb(dt,new URL(X.url),f);let vt=Nd(k.location,dt,{_isRedirect:!0});if(n){let ps=!1;if(he.response.headers.has("X-Remix-Reload-Document"))ps=!0;else if(Em(dt)){const Ks=yj(dt,!0);ps=Ks.origin!==r.location.origin||Ri(Ks.pathname,f)==null}if(ps){lt?r.location.replace(dt):r.location.assign(dt);return}}le=null;let Pt=lt===!0||he.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Mt,formAction:_t,formEncType:Kt}=k.navigation;!tt&&!it&&Mt&&_t&&Kt&&(tt=Rb(k.navigation));let os=tt||it;if(X1.has(he.response.status)&&os&&Ar(os.formMethod))await We(Pt,vt,{submission:{...os,formAction:dt},preventScrollReset:Dt||ne,enableViewTransition:Ee?me:void 0});else{let ps=Ap(vt,tt);await We(Pt,vt,{overrideNavigation:ps,fetcherSubmission:it,preventScrollReset:Dt||ne,enableViewTransition:Ee?me:void 0})}}async function Bs(X,he,Ee,tt){let it,Dt={};try{it=await c2(j,X,he,tt,Ee,!1)}catch(lt){return he.filter(dt=>dt.shouldLoad).forEach(dt=>{Dt[dt.route.id]={type:"error",error:lt}}),Dt}if(X.signal.aborted)return Dt;for(let[lt,dt]of Object.entries(it))if(y2(dt)){let vt=dt.result;Dt[lt]={type:"redirect",response:f2(vt,X,lt,he,f)}}else Dt[lt]=await m2(dt);return Dt}async function vs(X,he,Ee,tt){let it=Bs(Ee,X,tt,null),Dt=Promise.all(he.map(async vt=>{if(vt.matches&&vt.match&&vt.request&&vt.controller){let Mt=(await Bs(vt.request,vt.matches,tt,vt.key))[vt.match.route.id];return{[vt.key]:Mt}}else return Promise.resolve({[vt.key]:{type:"error",error:Ti(404,{pathname:vt.path})}})})),lt=await it,dt=(await Dt).reduce((vt,Pt)=>Object.assign(vt,Pt),{});return{loaderResults:lt,fetcherResults:dt}}function fa(){I=!0,ie.forEach((X,he)=>{q.has(he)&&K.add(he),Vt(he)})}function $s(X,he,Ee={}){k.fetchers.set(X,he),fe({fetchers:new Map(k.fetchers)},{flushSync:(Ee&&Ee.flushSync)===!0})}function Zs(X,he,Ee,tt={}){let it=Ml(k.matches,he);Tt(X),fe({errors:{[it.route.id]:Ee},fetchers:new Map(k.fetchers)},{flushSync:(tt&&tt.flushSync)===!0})}function pa(X){return Re.set(X,(Re.get(X)||0)+1),ge.has(X)&&ge.delete(X),k.fetchers.get(X)||e2}function rr(X,he){Vt(X,he==null?void 0:he.reason),$s(X,Yn(null))}function Tt(X){let he=k.fetchers.get(X);q.has(X)&&!(he&&he.state==="loading"&&A.has(X))&&Vt(X),ie.delete(X),A.delete(X),G.delete(X),ge.delete(X),K.delete(X),k.fetchers.delete(X)}function ha(X){let he=(Re.get(X)||0)-1;he<=0?(Re.delete(X),ge.add(X)):Re.set(X,he),fe({fetchers:new Map(k.fetchers)})}function Vt(X,he){let Ee=q.get(X);Ee&&(Ee.abort(he),q.delete(X))}function xa(X){for(let he of X){let Ee=pa(he),tt=Yn(Ee.data);k.fetchers.set(he,tt)}}function Ns(){let X=[],he=!1;for(let Ee of G){let tt=k.fetchers.get(Ee);js(tt,`Expected fetcher: ${Ee}`),tt.state==="loading"&&(G.delete(Ee),X.push(Ee),he=!0)}return xa(X),he}function va(X){let he=[];for(let[Ee,tt]of A)if(tt<X){let it=k.fetchers.get(Ee);js(it,`Expected fetcher: ${Ee}`),it.state==="loading"&&(Vt(Ee),A.delete(Ee),he.push(Ee))}return xa(he),he.length>0}function qe(X,he){let Ee=k.blockers.get(X)||nd;return R.get(X)!==he&&R.set(X,he),Ee}function ft(X){k.blockers.delete(X),R.delete(X)}function xt(X,he){let Ee=k.blockers.get(X)||nd;js(Ee.state==="unblocked"&&he.state==="blocked"||Ee.state==="blocked"&&he.state==="blocked"||Ee.state==="blocked"&&he.state==="proceeding"||Ee.state==="blocked"&&he.state==="unblocked"||Ee.state==="proceeding"&&he.state==="unblocked",`Invalid blocker state transition: ${Ee.state} -> ${he.state}`);let tt=new Map(k.blockers);tt.set(X,he),fe({blockers:tt})}function Ps({currentLocation:X,nextLocation:he,historyAction:Ee}){if(R.size===0)return;R.size>1&&La(!1,"A router only supports one blocker at a time");let tt=Array.from(R.entries()),[it,Dt]=tt[tt.length-1],lt=k.blockers.get(it);if(!(lt&&lt.state==="proceeding")&&Dt({currentLocation:X,nextLocation:he,historyAction:Ee}))return it}function Qs(X){let he=Ti(404,{pathname:X}),Ee=b||p,{matches:tt,route:it}=sm(Ee);return{notFoundMatches:tt,route:it,error:he}}function Js(X,he,Ee){if(P=X,$=he,T=Ee||null,!L&&k.navigation===Cp){L=!0;let tt=Pa(k.location,k.matches);tt!=null&&fe({restoreScrollPosition:tt})}return()=>{P=null,$=null,T=null}}function Ms(X,he){return T&&T(X,he.map(tt=>S1(tt,k.loaderData)))||X.key}function ra(X,he){if(P&&$){let Ee=Ms(X,he);P[Ee]=$()}}function Pa(X,he){if(P){let Ee=Ms(X,he),tt=P[Ee];if(typeof tt=="number")return tt}return null}function Ja(X,he,Ee){if(s.patchRoutesOnNavigation)if(X){if(Object.keys(X[0].params).length>0)return{active:!0,matches:md(he,Ee,f,!0)}}else return{active:!0,matches:md(he,Ee,f,!0)||[]};return{active:!1,matches:null}}async function ir(X,he,Ee,tt){if(!s.patchRoutesOnNavigation)return{type:"success",matches:X};let it=X;for(;;){let Dt=b==null,lt=b||p,dt=u;try{await s.patchRoutesOnNavigation({signal:Ee,path:he,matches:it,fetcherKey:tt,patch:(Mt,_t)=>{Ee.aborted||wb(Mt,_t,lt,dt,m,!1)}})}catch(Mt){return{type:"error",error:Mt,partialMatches:it}}finally{Dt&&!Ee.aborted&&(p=[...p])}if(Ee.aborted)return{type:"aborted"};let vt=Rl(lt,he,f),Pt=null;if(vt){if(Object.keys(vt[0].params).length===0)return{type:"success",matches:vt};if(Pt=md(lt,he,f,!0),!(Pt&&it.length<Pt.length&&Zr(it,Pt.slice(0,it.length))))return{type:"success",matches:vt}}if(Pt||(Pt=md(lt,he,f,!0)),!Pt||Zr(it,Pt))return{type:"success",matches:null};it=Pt}}function Zr(X,he){return X.length===he.length&&X.every((Ee,tt)=>Ee.route.id===he[tt].route.id)}function Sn(X){u={},b=wd(X,m,void 0,u)}function Mi(X,he,Ee=!1){let tt=b==null;wb(X,he,b||p,u,m,Ee),tt&&(p=[...p],fe({}))}return O={get basename(){return f},get future(){return v},get state(){return k},get routes(){return p},get window(){return r},initialize:Ie,subscribe:et,enableScrollRestoration:Js,navigate:te,fetch:Ft,revalidate:be,createHref:X=>s.history.createHref(X),encodeLocation:X=>s.history.encodeLocation(X),getFetcher:pa,resetFetcher:rr,deleteFetcher:ha,dispose:Be,getBlocker:qe,deleteBlocker:ft,patchRoutes:Mi,_internalFetchControllers:q,_internalSetRoutes:Sn,_internalSetStateDoNotUseOrYouWillBreakYourApp(X){fe(X)}},s.unstable_instrumentations&&(O=q1(O,s.unstable_instrumentations.map(X=>X.router).filter(Boolean))),O}function a2(s){return s!=null&&("formData"in s&&s.formData!=null||"body"in s&&s.body!==void 0)}function Qp(s,r,n,l,d,m){let u,p;if(d){u=[];for(let f of r)if(u.push(f),f.route.id===d){p=f;break}}else u=r,p=r[r.length-1];let b=Ch(l||".",Sh(u),Ri(s.pathname,n)||s.pathname,m==="path");if(l==null&&(b.search=s.search,b.hash=s.hash),(l==null||l===""||l===".")&&p){let f=Eh(b.search);if(p.route.index&&!f)b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index";else if(!p.route.index&&f){let j=new URLSearchParams(b.search),v=j.getAll("index");j.delete("index"),v.filter(D=>D).forEach(D=>j.append("index",D));let w=j.toString();b.search=w?`?${w}`:""}}return n!=="/"&&(b.pathname=L1({basename:n,pathname:b.pathname})),wn(b)}function vb(s,r,n){if(!n||!a2(n))return{path:r};if(n.formMethod&&!j2(n.formMethod))return{path:r,error:Ti(405,{method:n.formMethod})};let l=()=>({path:r,error:Ti(400,{type:"invalid-body"})}),m=(n.formMethod||"get").toUpperCase(),u=Oj(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Ar(m))return l();let v=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((w,[D,P])=>`${w}${D}=${P}
`,""):String(n.body);return{path:r,submission:{formMethod:m,formAction:u,formEncType:n.formEncType,formData:void 0,json:void 0,text:v}}}else if(n.formEncType==="application/json"){if(!Ar(m))return l();try{let v=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:m,formAction:u,formEncType:n.formEncType,formData:void 0,json:v,text:void 0}}}catch{return l()}}}js(typeof FormData=="function","FormData is not available in this environment");let p,b;if(n.formData)p=Zp(n.formData),b=n.formData;else if(n.body instanceof FormData)p=Zp(n.body),b=n.body;else if(n.body instanceof URLSearchParams)p=n.body,b=Tb(p);else if(n.body==null)p=new URLSearchParams,b=new FormData;else try{p=new URLSearchParams(n.body),b=Tb(p)}catch{return l()}let f={formMethod:m,formAction:u,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:b,json:void 0,text:void 0};if(Ar(f.formMethod))return{path:r,submission:f};let j=Il(r);return s&&j.search&&Eh(j.search)&&p.append("index",""),j.search=`?${p}`,{path:wn(j),submission:f}}function Nb(s,r,n,l,d,m,u,p,b,f,j,v,w,D,P,T,$,L,M,B){var F;let ce=B?oi(B[1])?B[1].error:B[1].data:void 0,U=d.createURL(m.location),O=d.createURL(b),k;if(j&&m.errors){let J=Object.keys(m.errors)[0];k=u.findIndex(I=>I.route.id===J)}else if(B&&oi(B[1])){let J=B[0];k=u.findIndex(I=>I.route.id===J)-1}let W=B?B[1].statusCode:void 0,Q=W&&W>=400,ne={currentUrl:U,currentParams:((F=m.matches[0])==null?void 0:F.params)||{},nextUrl:O,nextParams:u[0].params,...p,actionResult:ce,actionStatus:W},le=zd(u),me=u.map((J,I)=>{let{route:K}=J,q=null;if(k!=null&&I>k?q=!1:K.lazy?q=!0:Ah(K)?j?q=Yp(K,m.loaderData,m.errors):r2(m.loaderData,m.matches[I],J)&&(q=!0):q=!1,q!==null)return Wp(n,l,s,le,J,f,r,q);let de=Q?!1:v||U.pathname+U.search===O.pathname+O.search||U.search!==O.search||i2(m.matches[I],J),Ce={...ne,defaultShouldRevalidate:de},A=jm(J,Ce);return Wp(n,l,s,le,J,f,r,A,Ce)}),Ve=[];return P.forEach((J,I)=>{if(j||!u.some(Re=>Re.route.id===J.routeId)||D.has(I))return;let K=m.fetchers.get(I),q=K&&K.state!=="idle"&&K.data===void 0,de=Rl($,J.path,L);if(!de){if(M&&q)return;Ve.push({key:I,routeId:J.routeId,path:J.path,matches:null,match:null,request:null,controller:null});return}if(T.has(I))return;let Ce=dm(de,J.path),A=new AbortController,G=Wo(d,J.path,A.signal),ie=null;if(w.has(I))w.delete(I),ie=ac(n,l,G,de,Ce,f,r);else if(q)v&&(ie=ac(n,l,G,de,Ce,f,r));else{let Re={...ne,defaultShouldRevalidate:Q?!1:v};jm(Ce,Re)&&(ie=ac(n,l,G,de,Ce,f,r,Re))}ie&&Ve.push({key:I,routeId:J.routeId,path:J.path,matches:ie,match:Ce,request:G,controller:A})}),{dsMatches:me,revalidatingFetchers:Ve}}function Ah(s){return s.loader!=null||s.middleware!=null&&s.middleware.length>0}function Yp(s,r,n){if(s.lazy)return!0;if(!Ah(s))return!1;let l=r!=null&&s.id in r,d=n!=null&&n[s.id]!==void 0;return!l&&d?!1:typeof s.loader=="function"&&s.loader.hydrate===!0?!0:!l&&!d}function r2(s,r,n){let l=!r||n.route.id!==r.route.id,d=!s.hasOwnProperty(n.route.id);return l||d}function i2(s,r){let n=s.route.path;return s.pathname!==r.pathname||n!=null&&n.endsWith("*")&&s.params["*"]!==r.params["*"]}function jm(s,r){if(s.route.shouldRevalidate){let n=s.route.shouldRevalidate(r);if(typeof n=="boolean")return n}return r.defaultShouldRevalidate}function wb(s,r,n,l,d,m){let u;if(s){let f=l[s];js(f,`No route found to patch children into: routeId = ${s}`),f.children||(f.children=[]),u=f.children}else u=n;let p=[],b=[];if(r.forEach(f=>{let j=u.find(v=>Ej(f,v));j?b.push({existingRoute:j,newRoute:f}):p.push(f)}),p.length>0){let f=wd(p,d,[s||"_","patch",String((u==null?void 0:u.length)||"0")],l);u.push(...f)}if(m&&b.length>0)for(let f=0;f<b.length;f++){let{existingRoute:j,newRoute:v}=b[f],w=j,[D]=wd([v],d,[],{},!0);Object.assign(w,{element:D.element?D.element:w.element,errorElement:D.errorElement?D.errorElement:w.errorElement,hydrateFallbackElement:D.hydrateFallbackElement?D.hydrateFallbackElement:w.hydrateFallbackElement})}}function Ej(s,r){return"id"in s&&"id"in r&&s.id===r.id?!0:s.index===r.index&&s.path===r.path&&s.caseSensitive===r.caseSensitive?(!s.children||s.children.length===0)&&(!r.children||r.children.length===0)?!0:s.children.every((n,l)=>{var d;return(d=r.children)==null?void 0:d.some(m=>Ej(n,m))}):!1}var Sb=new WeakMap,Tj=({key:s,route:r,manifest:n,mapRouteProperties:l})=>{let d=n[r.id];if(js(d,"No route found in manifest"),!d.lazy||typeof d.lazy!="object")return;let m=d.lazy[s];if(!m)return;let u=Sb.get(d);u||(u={},Sb.set(d,u));let p=u[s];if(p)return p;let b=(async()=>{let f=j1(s),v=d[s]!==void 0&&s!=="hasErrorBoundary";if(f)La(!f,"Route property "+s+" is not a supported lazy route property. This property will be ignored."),u[s]=Promise.resolve();else if(v)La(!1,`Route "${d.id}" has a static property "${s}" defined. The lazy property will be ignored.`);else{let w=await m();w!=null&&(Object.assign(d,{[s]:w}),Object.assign(d,l(d)))}typeof d.lazy=="object"&&(d.lazy[s]=void 0,Object.values(d.lazy).every(w=>w===void 0)&&(d.lazy=void 0))})();return u[s]=b,b},Cb=new WeakMap;function n2(s,r,n,l,d){let m=n[s.id];if(js(m,"No route found in manifest"),!s.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof s.lazy=="function"){let j=Cb.get(m);if(j)return{lazyRoutePromise:j,lazyHandlerPromise:j};let v=(async()=>{js(typeof s.lazy=="function","No lazy route function found");let w=await s.lazy(),D={};for(let P in w){let T=w[P];if(T===void 0)continue;let $=N1(P),M=m[P]!==void 0&&P!=="hasErrorBoundary";$?La(!$,"Route property "+P+" is not a supported property to be returned from a lazy route function. This property will be ignored."):M?La(!M,`Route "${m.id}" has a static property "${P}" defined but its lazy function is also returning a value for this property. The lazy route property "${P}" will be ignored.`):D[P]=T}Object.assign(m,D),Object.assign(m,{...l(m),lazy:void 0})})();return Cb.set(m,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let u=Object.keys(s.lazy),p=[],b;for(let j of u){if(d&&d.includes(j))continue;let v=Tj({key:j,route:s,manifest:n,mapRouteProperties:l});v&&(p.push(v),j===r&&(b=v))}let f=p.length>0?Promise.all(p).then(()=>{}):void 0;return f==null||f.catch(()=>{}),b==null||b.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:b}}async function Ab(s){let r=s.matches.filter(d=>d.shouldLoad),n={};return(await Promise.all(r.map(d=>d.resolve()))).forEach((d,m)=>{n[r[m].route.id]=d}),n}async function l2(s){return s.matches.some(r=>r.route.middleware)?kj(s,()=>Ab(s)):Ab(s)}function kj(s,r){return o2(s,r,l=>l,g2,n);function n(l,d,m){if(m)return Promise.resolve(Object.assign(m.value,{[d]:{type:"error",result:l}}));{let{matches:u}=s,p=Math.min(Math.max(u.findIndex(f=>f.route.id===d),0),Math.max(u.findIndex(f=>f.shouldCallHandler()),0)),b=Ml(u,u[p].route.id).route.id;return Promise.resolve({[b]:{type:"error",result:l}})}}}async function o2(s,r,n,l,d){let{matches:m,request:u,params:p,context:b,unstable_pattern:f}=s,j=m.flatMap(w=>w.route.middleware?w.route.middleware.map(D=>[w.route.id,D]):[]);return await Dj({request:u,params:p,context:b,unstable_pattern:f},j,r,n,l,d)}async function Dj(s,r,n,l,d,m,u=0){let{request:p}=s;if(p.signal.aborted)throw p.signal.reason??new Error(`Request aborted: ${p.method} ${p.url}`);let b=r[u];if(!b)return await n();let[f,j]=b,v,w=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await Dj(s,r,n,l,d,m,u+1)},v.value}catch(D){return v={value:await m(D,f,v)},v.value}};try{let D=await j(s,w),P=D!=null?l(D):void 0;return d(P)?P:v?P??v.value:(v={value:await w()},v.value)}catch(D){return await m(D,f,v)}}function Pj(s,r,n,l,d){let m=Tj({key:"middleware",route:l.route,manifest:r,mapRouteProperties:s}),u=n2(l.route,Ar(n.method)?"action":"loader",r,s,d);return{middleware:m,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function Wp(s,r,n,l,d,m,u,p,b=null){let f=!1,j=Pj(s,r,n,d,m);return{...d,_lazyPromises:j,shouldLoad:p,shouldRevalidateArgs:b,shouldCallHandler(v){return f=!0,b?typeof v=="boolean"?jm(d,{...b,defaultShouldRevalidate:v}):jm(d,b):p},resolve(v){let{lazy:w,loader:D,middleware:P}=d.route,T=f||p||v&&!Ar(n.method)&&(w||D),$=P&&P.length>0&&!D&&!w;return T&&(Ar(n.method)||!$)?d2({request:n,unstable_pattern:l,match:d,lazyHandlerPromise:j==null?void 0:j.handler,lazyRoutePromise:j==null?void 0:j.route,handlerOverride:v,scopedContext:u}):Promise.resolve({type:"data",result:void 0})}}}function ac(s,r,n,l,d,m,u,p=null){return l.map(b=>b.route.id!==d.route.id?{...b,shouldLoad:!1,shouldRevalidateArgs:p,shouldCallHandler:()=>!1,_lazyPromises:Pj(s,r,n,b,m),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Wp(s,r,n,zd(l),b,m,u,!0,p))}async function c2(s,r,n,l,d,m){n.some(f=>{var j;return(j=f._lazyPromises)==null?void 0:j.middleware})&&await Promise.all(n.map(f=>{var j;return(j=f._lazyPromises)==null?void 0:j.middleware}));let u={request:r,unstable_pattern:zd(n),params:n[0].params,context:d,matches:n},b=await s({...u,fetcherKey:l,runClientMiddleware:f=>{let j=u;return kj(j,()=>f({...j,fetcherKey:l,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(f=>{var j,v;return[(j=f._lazyPromises)==null?void 0:j.handler,(v=f._lazyPromises)==null?void 0:v.route]}))}catch{}return b}async function d2({request:s,unstable_pattern:r,match:n,lazyHandlerPromise:l,lazyRoutePromise:d,handlerOverride:m,scopedContext:u}){let p,b,f=Ar(s.method),j=f?"action":"loader",v=w=>{let D,P=new Promise((L,M)=>D=M);b=()=>D(),s.signal.addEventListener("abort",b);let T=L=>typeof w!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${j}" [routeId: ${n.route.id}]`)):w({request:s,unstable_pattern:r,params:n.params,context:u},...L!==void 0?[L]:[]),$=(async()=>{try{return{type:"data",result:await(m?m(M=>T(M)):T())}}catch(L){return{type:"error",result:L}}})();return Promise.race([$,P])};try{let w=f?n.route.action:n.route.loader;if(l||d)if(w){let D,[P]=await Promise.all([v(w).catch(T=>{D=T}),l,d]);if(D!==void 0)throw D;p=P}else{await l;let D=f?n.route.action:n.route.loader;if(D)[p]=await Promise.all([v(D),d]);else if(j==="action"){let P=new URL(s.url),T=P.pathname+P.search;throw Ti(405,{method:s.method,pathname:T,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(w)p=await v(w);else{let D=new URL(s.url),P=D.pathname+D.search;throw Ti(404,{pathname:P})}}catch(w){return{type:"error",result:w}}finally{b&&s.signal.removeEventListener("abort",b)}return p}async function u2(s){let r=s.headers.get("Content-Type");return r&&/\bapplication\/json\b/.test(r)?s.body==null?null:s.json():s.text()}async function m2(s){var l,d,m,u,p;let{result:r,type:n}=s;if(Rj(r)){let b;try{b=await u2(r)}catch(f){return{type:"error",error:f}}return n==="error"?{type:"error",error:new Tm(r.status,r.statusText,b),statusCode:r.status,headers:r.headers}:{type:"data",data:b,statusCode:r.status,headers:r.headers}}return n==="error"?Ob(r)?r.data instanceof Error?{type:"error",error:r.data,statusCode:(l=r.init)==null?void 0:l.status,headers:(d=r.init)!=null&&d.headers?new Headers(r.init.headers):void 0}:{type:"error",error:x2(r),statusCode:Sd(r)?r.status:void 0,headers:(m=r.init)!=null&&m.headers?new Headers(r.init.headers):void 0}:{type:"error",error:r,statusCode:Sd(r)?r.status:void 0}:Ob(r)?{type:"data",data:r.data,statusCode:(u=r.init)==null?void 0:u.status,headers:(p=r.init)!=null&&p.headers?new Headers(r.init.headers):void 0}:{type:"data",data:r}}function f2(s,r,n,l,d){let m=s.headers.get("Location");if(js(m,"Redirects returned/thrown from loaders/actions must have a Location header"),!Em(m)){let u=l.slice(0,l.findIndex(p=>p.route.id===n)+1);m=Qp(new URL(r.url),u,d,m),s.headers.set("Location",m)}return s}function Eb(s,r,n){if(Em(s)){let l=s,d=l.startsWith("//")?new URL(r.protocol+l):new URL(l),m=Ri(d.pathname,n)!=null;if(d.origin===r.origin&&m)return d.pathname+d.search+d.hash}return s}function Wo(s,r,n,l){let d=s.createURL(Oj(r)).toString(),m={signal:n};if(l&&Ar(l.formMethod)){let{formMethod:u,formEncType:p}=l;m.method=u.toUpperCase(),p==="application/json"?(m.headers=new Headers({"Content-Type":p}),m.body=JSON.stringify(l.json)):p==="text/plain"?m.body=l.text:p==="application/x-www-form-urlencoded"&&l.formData?m.body=Zp(l.formData):m.body=l.formData}return new Request(d,m)}function Zp(s){let r=new URLSearchParams;for(let[n,l]of s.entries())r.append(n,typeof l=="string"?l:l.name);return r}function Tb(s){let r=new FormData;for(let[n,l]of s.entries())r.append(n,l);return r}function p2(s,r,n,l=!1,d=!1){let m={},u=null,p,b=!1,f={},j=n&&oi(n[1])?n[1].error:void 0;return s.forEach(v=>{if(!(v.route.id in r))return;let w=v.route.id,D=r[w];if(js(!no(D),"Cannot handle redirect results in processLoaderData"),oi(D)){let P=D.error;if(j!==void 0&&(P=j,j=void 0),u=u||{},d)u[w]=P;else{let T=Ml(s,w);u[T.route.id]==null&&(u[T.route.id]=P)}l||(m[w]=Aj),b||(b=!0,p=Sd(D.error)?D.error.status:500),D.headers&&(f[w]=D.headers)}else m[w]=D.data,D.statusCode&&D.statusCode!==200&&!b&&(p=D.statusCode),D.headers&&(f[w]=D.headers)}),j!==void 0&&n&&(u={[n[0]]:j},n[2]&&(m[n[2]]=void 0)),{loaderData:m,errors:u,statusCode:p||200,loaderHeaders:f}}function kb(s,r,n,l,d,m){let{loaderData:u,errors:p}=p2(r,n,l);return d.filter(b=>!b.matches||b.matches.some(f=>f.shouldLoad)).forEach(b=>{let{key:f,match:j,controller:v}=b;if(v&&v.signal.aborted)return;let w=m[f];if(js(w,"Did not find corresponding fetcher result"),oi(w)){let D=Ml(s.matches,j==null?void 0:j.route.id);p&&p[D.route.id]||(p={...p,[D.route.id]:w.error}),s.fetchers.delete(f)}else if(no(w))js(!1,"Unhandled fetcher revalidation redirect");else{let D=Yn(w.data);s.fetchers.set(f,D)}}),{loaderData:u,errors:p}}function Db(s,r,n,l){let d=Object.entries(r).filter(([,m])=>m!==Aj).reduce((m,[u,p])=>(m[u]=p,m),{});for(let m of n){let u=m.route.id;if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&m.route.loader&&(d[u]=s[u]),l&&l.hasOwnProperty(u))break}return d}function Pb(s){return s?oi(s[1])?{actionData:{}}:{actionData:{[s[0]]:s[1].data}}:{}}function Ml(s,r){return(r?s.slice(0,s.findIndex(l=>l.route.id===r)+1):[...s]).reverse().find(l=>l.route.hasErrorBoundary===!0)||s[0]}function sm(s){let r=s.length===1?s[0]:s.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r}}function Ti(s,{pathname:r,routeId:n,method:l,type:d,message:m}={}){let u="Unknown Server Error",p="Unknown @remix-run/router error";return s===400?(u="Bad Request",l&&r&&n?p=`You made a ${l} request to "${r}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:d==="invalid-body"&&(p="Unable to encode submission body")):s===403?(u="Forbidden",p=`Route "${n}" does not match URL "${r}"`):s===404?(u="Not Found",p=`No route matches URL "${r}"`):s===405&&(u="Method Not Allowed",l&&r&&n?p=`You made a ${l.toUpperCase()} request to "${r}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:l&&(p=`Invalid request method "${l.toUpperCase()}"`)),new Tm(s||500,u,new Error(p),!0)}function am(s){let r=Object.entries(s);for(let n=r.length-1;n>=0;n--){let[l,d]=r[n];if(no(d))return{key:l,result:d}}}function Oj(s){let r=typeof s=="string"?Il(s):s;return wn({...r,hash:""})}function h2(s,r){return s.pathname!==r.pathname||s.search!==r.search?!1:s.hash===""?r.hash!=="":s.hash===r.hash?!0:r.hash!==""}function x2(s){var r,n;return new Tm(((r=s.init)==null?void 0:r.status)??500,((n=s.init)==null?void 0:n.statusText)??"Internal Server Error",s.data)}function g2(s){return s!=null&&typeof s=="object"&&Object.entries(s).every(([r,n])=>typeof r=="string"&&b2(n))}function b2(s){return s!=null&&typeof s=="object"&&"type"in s&&"result"in s&&(s.type==="data"||s.type==="error")}function y2(s){return Rj(s.result)&&K1.has(s.result.status)}function oi(s){return s.type==="error"}function no(s){return(s&&s.type)==="redirect"}function Ob(s){return typeof s=="object"&&s!=null&&"type"in s&&"data"in s&&"init"in s&&s.type==="DataWithResponseInit"}function Rj(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.headers=="object"&&typeof s.body<"u"}function j2(s){return J1.has(s.toUpperCase())}function Ar(s){return W1.has(s.toUpperCase())}function Eh(s){return new URLSearchParams(s).getAll("index").some(r=>r==="")}function dm(s,r){let n=typeof r=="string"?Il(r).search:r.search;if(s[s.length-1].route.index&&Eh(n||""))return s[s.length-1];let l=Nj(s);return l[l.length-1]}function Rb(s){let{formMethod:r,formAction:n,formEncType:l,text:d,formData:m,json:u}=s;if(!(!r||!n||!l)){if(d!=null)return{formMethod:r,formAction:n,formEncType:l,formData:void 0,json:void 0,text:d};if(m!=null)return{formMethod:r,formAction:n,formEncType:l,formData:m,json:void 0,text:void 0};if(u!==void 0)return{formMethod:r,formAction:n,formEncType:l,formData:void 0,json:u,text:void 0}}}function Ap(s,r){return r?{state:"loading",location:s,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}:{state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function v2(s,r){return{state:"submitting",location:s,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}}function ld(s,r){return s?{state:"loading",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:r}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function N2(s,r){return{state:"submitting",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:r?r.data:void 0}}function Yn(s){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function w2(s,r){try{let n=s.sessionStorage.getItem(Cj);if(n){let l=JSON.parse(n);for(let[d,m]of Object.entries(l||{}))m&&Array.isArray(m)&&r.set(d,new Set(m||[]))}}catch{}}function S2(s,r){if(r.size>0){let n={};for(let[l,d]of r)n[l]=[...d];try{s.sessionStorage.setItem(Cj,JSON.stringify(n))}catch(l){La(!1,`Failed to save applied view transitions in sessionStorage (${l}).`)}}}function Mb(){let s,r,n=new Promise((l,d)=>{s=async m=>{l(m);try{await n}catch{}},r=async m=>{d(m);try{await n}catch{}}});return{promise:n,resolve:s,reject:r}}var xo=y.createContext(null);xo.displayName="DataRouter";var Ld=y.createContext(null);Ld.displayName="DataRouterState";y.createContext(!1);var Th=y.createContext({isTransitioning:!1});Th.displayName="ViewTransition";var Mj=y.createContext(new Map);Mj.displayName="Fetchers";var C2=y.createContext(null);C2.displayName="Await";var Xi=y.createContext(null);Xi.displayName="Navigation";var km=y.createContext(null);km.displayName="Location";var en=y.createContext({outlet:null,matches:[],isDataRoute:!1});en.displayName="Route";var kh=y.createContext(null);kh.displayName="RouteError";function A2(s,{relative:r}={}){js($d(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:l}=y.useContext(Xi),{hash:d,pathname:m,search:u}=Fd(s,{relative:r}),p=m;return n!=="/"&&(p=m==="/"?n:jn([n,m])),l.createHref({pathname:p,search:u,hash:d})}function $d(){return y.useContext(km)!=null}function tn(){return js($d(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(km).location}var _j="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zj(s){y.useContext(Xi).static||y.useLayoutEffect(s)}function ar(){let{isDataRoute:s}=y.useContext(en);return s?I2():E2()}function E2(){js($d(),"useNavigate() may be used only in the context of a <Router> component.");let s=y.useContext(xo),{basename:r,navigator:n}=y.useContext(Xi),{matches:l}=y.useContext(en),{pathname:d}=tn(),m=JSON.stringify(Sh(l)),u=y.useRef(!1);return zj(()=>{u.current=!0}),y.useCallback((b,f={})=>{if(La(u.current,_j),!u.current)return;if(typeof b=="number"){n.go(b);return}let j=Ch(b,JSON.parse(m),d,f.relative==="path");s==null&&r!=="/"&&(j.pathname=j.pathname==="/"?r:jn([r,j.pathname])),(f.replace?n.replace:n.push)(j,f.state,f)},[r,n,m,d,s])}var T2=y.createContext(null);function k2(s){let r=y.useContext(en).outlet;return y.useMemo(()=>r&&y.createElement(T2.Provider,{value:s},r),[r,s])}function Dh(){let{matches:s}=y.useContext(en),r=s[s.length-1];return r?r.params:{}}function Fd(s,{relative:r}={}){let{matches:n}=y.useContext(en),{pathname:l}=tn(),d=JSON.stringify(Sh(n));return y.useMemo(()=>Ch(s,JSON.parse(d),l,r==="path"),[s,d,l,r])}function D2(s,r,n,l,d){js($d(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=y.useContext(Xi),{matches:u}=y.useContext(en),p=u[u.length-1],b=p?p.params:{},f=p?p.pathname:"/",j=p?p.pathnameBase:"/",v=p&&p.route;{let M=v&&v.path||"";Lj(f,!v||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let w=tn(),D;D=w;let P=D.pathname||"/",T=P;if(j!=="/"){let M=j.replace(/^\//,"").split("/");T="/"+P.replace(/^\//,"").split("/").slice(M.length).join("/")}let $=Rl(s,{pathname:T});return La(v||$!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),La($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_2($&&$.map(M=>Object.assign({},M,{params:Object.assign({},b,M.params),pathname:jn([j,m.encodeLocation?m.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?j:jn([j,m.encodeLocation?m.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),u,n,l,d)}function P2(){let s=U2(),r=Sd(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,l="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:l},m={padding:"2px 4px",backgroundColor:l},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:m},"ErrorBoundary")," or"," ",y.createElement("code",{style:m},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},r),n?y.createElement("pre",{style:d},n):null,u)}var O2=y.createElement(P2,null),R2=class extends y.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){this.props.onError?this.props.onError(s,r):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?y.createElement(en.Provider,{value:this.props.routeContext},y.createElement(kh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function M2({routeContext:s,match:r,children:n}){let l=y.useContext(xo);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(en.Provider,{value:s},n)}function _2(s,r=[],n=null,l=null,d=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(r.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let m=s,u=n==null?void 0:n.errors;if(u!=null){let j=m.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);js(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),m=m.slice(0,Math.min(m.length,j+1))}let p=!1,b=-1;if(n)for(let j=0;j<m.length;j++){let v=m[j];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(b=j),v.route.id){let{loaderData:w,errors:D}=n,P=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!D||D[v.route.id]===void 0);if(v.route.lazy||P){p=!0,b>=0?m=m.slice(0,b+1):m=[m[0]];break}}}let f=n&&l?(j,v)=>{var w,D;l(j,{location:n.location,params:((D=(w=n.matches)==null?void 0:w[0])==null?void 0:D.params)??{},unstable_pattern:zd(n.matches),errorInfo:v})}:void 0;return m.reduceRight((j,v,w)=>{let D,P=!1,T=null,$=null;n&&(D=u&&v.route.id?u[v.route.id]:void 0,T=v.route.errorElement||O2,p&&(b<0&&w===0?(Lj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,$=null):b===w&&(P=!0,$=v.route.hydrateFallbackElement||null)));let L=r.concat(m.slice(0,w+1)),M=()=>{let B;return D?B=T:P?B=$:v.route.Component?B=y.createElement(v.route.Component,null):v.route.element?B=v.route.element:B=j,y.createElement(M2,{match:v,routeContext:{outlet:j,matches:L,isDataRoute:n!=null},children:B})};return n&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?y.createElement(R2,{location:n.location,revalidation:n.revalidation,component:T,error:D,children:M(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:f}):M()},null)}function Ph(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z2(s){let r=y.useContext(xo);return js(r,Ph(s)),r}function L2(s){let r=y.useContext(Ld);return js(r,Ph(s)),r}function $2(s){let r=y.useContext(en);return js(r,Ph(s)),r}function Oh(s){let r=$2(s),n=r.matches[r.matches.length-1];return js(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function F2(){return Oh("useRouteId")}function U2(){var l;let s=y.useContext(kh),r=L2("useRouteError"),n=Oh("useRouteError");return s!==void 0?s:(l=r.errors)==null?void 0:l[n]}function I2(){let{router:s}=z2("useNavigate"),r=Oh("useNavigate"),n=y.useRef(!1);return zj(()=>{n.current=!0}),y.useCallback(async(d,m={})=>{La(n.current,_j),n.current&&(typeof d=="number"?await s.navigate(d):await s.navigate(d,{fromRouteId:r,...m}))},[s,r])}var _b={};function Lj(s,r,n){!r&&!_b[s]&&(_b[s]=!0,La(!1,n))}var zb={};function Lb(s,r){!s&&!zb[r]&&(zb[r]=!0,console.warn(r))}var V2="useOptimistic",$b=f1[V2],B2=()=>{};function q2(s){return $b?$b(s):[s,B2]}function H2(s){let r={hasErrorBoundary:s.hasErrorBoundary||s.ErrorBoundary!=null||s.errorElement!=null};return s.Component&&(s.element&&La(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(r,{element:y.createElement(s.Component),Component:void 0})),s.HydrateFallback&&(s.hydrateFallbackElement&&La(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(r,{hydrateFallbackElement:y.createElement(s.HydrateFallback),HydrateFallback:void 0})),s.ErrorBoundary&&(s.errorElement&&La(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(r,{errorElement:y.createElement(s.ErrorBoundary),ErrorBoundary:void 0})),r}var G2=["HydrateFallback","hydrateFallbackElement"],Q2=class{constructor(){this.status="pending",this.promise=new Promise((s,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",s(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}};function Y2({router:s,flushSync:r,unstable_onError:n,unstable_useTransitions:l}){let[d,m]=y.useState(s.state),[u,p]=q2(d),[b,f]=y.useState(),[j,v]=y.useState({isTransitioning:!1}),[w,D]=y.useState(),[P,T]=y.useState(),[$,L]=y.useState(),M=y.useRef(new Map),B=y.useCallback((k,{deletedFetchers:W,newErrors:Q,flushSync:ne,viewTransitionOpts:le})=>{Q&&n&&Object.values(Q).forEach(Ve=>{var F;return n(Ve,{location:k.location,params:((F=k.matches[0])==null?void 0:F.params)??{},unstable_pattern:zd(k.matches)})}),k.fetchers.forEach((Ve,F)=>{Ve.data!==void 0&&M.current.set(F,Ve.data)}),W.forEach(Ve=>M.current.delete(Ve)),Lb(ne===!1||r!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let me=s.window!=null&&s.window.document!=null&&typeof s.window.document.startViewTransition=="function";if(Lb(le==null||me,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!le||!me){r&&ne?r(()=>m(k)):l===!1?m(k):y.startTransition(()=>{l===!0&&p(Ve=>Fb(Ve,k)),m(k)});return}if(r&&ne){r(()=>{P&&(w==null||w.resolve(),P.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:le.currentLocation,nextLocation:le.nextLocation})});let Ve=s.window.document.startViewTransition(()=>{r(()=>m(k))});Ve.finished.finally(()=>{r(()=>{D(void 0),T(void 0),f(void 0),v({isTransitioning:!1})})}),r(()=>T(Ve));return}P?(w==null||w.resolve(),P.skipTransition(),L({state:k,currentLocation:le.currentLocation,nextLocation:le.nextLocation})):(f(k),v({isTransitioning:!0,flushSync:!1,currentLocation:le.currentLocation,nextLocation:le.nextLocation}))},[s.window,r,P,w,l,p,n]);y.useLayoutEffect(()=>s.subscribe(B),[s,B]),y.useEffect(()=>{j.isTransitioning&&!j.flushSync&&D(new Q2)},[j]),y.useEffect(()=>{if(w&&b&&s.window){let k=b,W=w.promise,Q=s.window.document.startViewTransition(async()=>{l===!1?m(k):y.startTransition(()=>{l===!0&&p(ne=>Fb(ne,k)),m(k)}),await W});Q.finished.finally(()=>{D(void 0),T(void 0),f(void 0),v({isTransitioning:!1})}),T(Q)}},[b,w,s.window,l,p]),y.useEffect(()=>{w&&b&&u.location.key===b.location.key&&w.resolve()},[w,P,u.location,b]),y.useEffect(()=>{!j.isTransitioning&&$&&(f($.state),v({isTransitioning:!0,flushSync:!1,currentLocation:$.currentLocation,nextLocation:$.nextLocation}),L(void 0))},[j.isTransitioning,$]);let ce=y.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:k=>s.navigate(k),push:(k,W,Q)=>s.navigate(k,{state:W,preventScrollReset:Q==null?void 0:Q.preventScrollReset}),replace:(k,W,Q)=>s.navigate(k,{replace:!0,state:W,preventScrollReset:Q==null?void 0:Q.preventScrollReset})}),[s]),U=s.basename||"/",O=y.useMemo(()=>({router:s,navigator:ce,static:!1,basename:U,unstable_onError:n}),[s,ce,U,n]);return y.createElement(y.Fragment,null,y.createElement(xo.Provider,{value:O},y.createElement(Ld.Provider,{value:u},y.createElement(Mj.Provider,{value:M.current},y.createElement(Th.Provider,{value:j},y.createElement(K2,{basename:U,location:u.location,navigationType:u.historyAction,navigator:ce,unstable_useTransitions:l===!0},y.createElement(W2,{routes:s.routes,future:s.future,state:u,unstable_onError:n})))))),null)}function Fb(s,r){return{...s,navigation:r.navigation.state!=="idle"?r.navigation:s.navigation,revalidation:r.revalidation!=="idle"?r.revalidation:s.revalidation,actionData:r.navigation.state!=="submitting"?r.actionData:s.actionData,fetchers:r.fetchers}}var W2=y.memo(Z2);function Z2({routes:s,future:r,state:n,unstable_onError:l}){return D2(s,void 0,n,l,r)}function J2(s){return k2(s.context)}function K2({basename:s="/",children:r=null,location:n,navigationType:l="POP",navigator:d,static:m=!1,unstable_useTransitions:u}){js(!$d(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),b=y.useMemo(()=>({basename:p,navigator:d,static:m,unstable_useTransitions:u,future:{}}),[p,d,m,u]);typeof n=="string"&&(n=Il(n));let{pathname:f="/",search:j="",hash:v="",state:w=null,key:D="default"}=n,P=y.useMemo(()=>{let T=Ri(f,p);return T==null?null:{location:{pathname:T,search:j,hash:v,state:w,key:D},navigationType:l}},[p,f,j,v,w,D,l]);return La(P!=null,`<Router basename="${p}"> is not able to match the URL "${f}${j}${v}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:y.createElement(Xi.Provider,{value:b},y.createElement(km.Provider,{children:r,value:P}))}var um="get",mm="application/x-www-form-urlencoded";function Dm(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function X2(s){return Dm(s)&&s.tagName.toLowerCase()==="button"}function eS(s){return Dm(s)&&s.tagName.toLowerCase()==="form"}function tS(s){return Dm(s)&&s.tagName.toLowerCase()==="input"}function sS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function aS(s,r){return s.button===0&&(!r||r==="_self")&&!sS(s)}var rm=null;function rS(){if(rm===null)try{new FormData(document.createElement("form"),0),rm=!1}catch{rm=!0}return rm}var iS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ep(s){return s!=null&&!iS.has(s)?(La(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mm}"`),null):s}function nS(s,r){let n,l,d,m,u;if(eS(s)){let p=s.getAttribute("action");l=p?Ri(p,r):null,n=s.getAttribute("method")||um,d=Ep(s.getAttribute("enctype"))||mm,m=new FormData(s)}else if(X2(s)||tS(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=s.getAttribute("formaction")||p.getAttribute("action");if(l=b?Ri(b,r):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||um,d=Ep(s.getAttribute("formenctype"))||Ep(p.getAttribute("enctype"))||mm,m=new FormData(p,s),!rS()){let{name:f,type:j,value:v}=s;if(j==="image"){let w=f?`${f}.`:"";m.append(`${w}x`,"0"),m.append(`${w}y`,"0")}else f&&m.append(f,v)}}else{if(Dm(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=um,l=null,d=mm,u=s}return m&&d==="text/plain"&&(u=m,m=void 0),{action:l,method:n.toLowerCase(),encType:d,formData:m,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rh(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function lS(s,r,n){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return l.pathname==="/"?l.pathname=`_root.${n}`:r&&Ri(l.pathname,r)==="/"?l.pathname=`${r.replace(/\/$/,"")}/_root.${n}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${n}`,l}async function oS(s,r){if(s.id in r)return r[s.id];try{let n=await import(s.module);return r[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function dS(s,r,n){let l=await Promise.all(s.map(async d=>{let m=r.routes[d.route.id];if(m){let u=await oS(m,n);return u.links?u.links():[]}return[]}));return pS(l.flat(1).filter(cS).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Ub(s,r,n,l,d,m){let u=(b,f)=>n[f]?b.route.id!==n[f].route.id:!0,p=(b,f)=>{var j;return n[f].pathname!==b.pathname||((j=n[f].route.path)==null?void 0:j.endsWith("*"))&&n[f].params["*"]!==b.params["*"]};return m==="assets"?r.filter((b,f)=>u(b,f)||p(b,f)):m==="data"?r.filter((b,f)=>{var v;let j=l.routes[b.route.id];if(!j||!j.hasLoader)return!1;if(u(b,f)||p(b,f))return!0;if(b.route.shouldRevalidate){let w=b.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(s,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function uS(s,r,{includeHydrateFallback:n}={}){return mS(s.map(l=>{let d=r.routes[l.route.id];if(!d)return[];let m=[d.module];return d.clientActionModule&&(m=m.concat(d.clientActionModule)),d.clientLoaderModule&&(m=m.concat(d.clientLoaderModule)),n&&d.hydrateFallbackModule&&(m=m.concat(d.hydrateFallbackModule)),d.imports&&(m=m.concat(d.imports)),m}).flat(1))}function mS(s){return[...new Set(s)]}function fS(s){let r={},n=Object.keys(s).sort();for(let l of n)r[l]=s[l];return r}function pS(s,r){let n=new Set;return new Set(r),s.reduce((l,d)=>{let m=JSON.stringify(fS(d));return n.has(m)||(n.add(m),l.push({key:m,link:d})),l},[])}function $j(){let s=y.useContext(xo);return Rh(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function hS(){let s=y.useContext(Ld);return Rh(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Mh=y.createContext(void 0);Mh.displayName="FrameworkContext";function Fj(){let s=y.useContext(Mh);return Rh(s,"You must render this element inside a <HydratedRouter> element"),s}function xS(s,r){let n=y.useContext(Mh),[l,d]=y.useState(!1),[m,u]=y.useState(!1),{onFocus:p,onBlur:b,onMouseEnter:f,onMouseLeave:j,onTouchStart:v}=r,w=y.useRef(null);y.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let T=L=>{L.forEach(M=>{u(M.isIntersecting)})},$=new IntersectionObserver(T,{threshold:.5});return w.current&&$.observe(w.current),()=>{$.disconnect()}}},[s]),y.useEffect(()=>{if(l){let T=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(T)}}},[l]);let D=()=>{d(!0)},P=()=>{d(!1),u(!1)};return n?s!=="intent"?[m,w,{}]:[m,w,{onFocus:od(p,D),onBlur:od(b,P),onMouseEnter:od(f,D),onMouseLeave:od(j,P),onTouchStart:od(v,D)}]:[!1,w,{}]}function od(s,r){return n=>{s&&s(n),n.defaultPrevented||r(n)}}function gS({page:s,...r}){let{router:n}=$j(),l=y.useMemo(()=>Rl(n.routes,s,n.basename),[n.routes,s,n.basename]);return l?y.createElement(yS,{page:s,matches:l,...r}):null}function bS(s){let{manifest:r,routeModules:n}=Fj(),[l,d]=y.useState([]);return y.useEffect(()=>{let m=!1;return dS(s,r,n).then(u=>{m||d(u)}),()=>{m=!0}},[s,r,n]),l}function yS({page:s,matches:r,...n}){let l=tn(),{manifest:d,routeModules:m}=Fj(),{basename:u}=$j(),{loaderData:p,matches:b}=hS(),f=y.useMemo(()=>Ub(s,r,b,d,l,"data"),[s,r,b,d,l]),j=y.useMemo(()=>Ub(s,r,b,d,l,"assets"),[s,r,b,d,l]),v=y.useMemo(()=>{if(s===l.pathname+l.search+l.hash)return[];let P=new Set,T=!1;if(r.forEach(L=>{var B;let M=d.routes[L.route.id];!M||!M.hasLoader||(!f.some(ce=>ce.route.id===L.route.id)&&L.route.id in p&&((B=m[L.route.id])!=null&&B.shouldRevalidate)||M.hasClientLoader?T=!0:P.add(L.route.id))}),P.size===0)return[];let $=lS(s,u,"data");return T&&P.size>0&&$.searchParams.set("_routes",r.filter(L=>P.has(L.route.id)).map(L=>L.route.id).join(",")),[$.pathname+$.search]},[u,p,l,d,f,r,s,m]),w=y.useMemo(()=>uS(j,d),[j,d]),D=bS(j);return y.createElement(y.Fragment,null,v.map(P=>y.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...n})),w.map(P=>y.createElement("link",{key:P,rel:"modulepreload",href:P,...n})),D.map(({key:P,link:T})=>y.createElement("link",{key:P,nonce:n.nonce,...T})))}function jS(...s){return r=>{s.forEach(n=>{typeof n=="function"?n(r):n!=null&&(n.current=r)})}}var Uj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Uj&&(window.__reactRouterVersion="7.10.1")}catch{}function vS(s,r){return s2({basename:r==null?void 0:r.basename,getContext:r==null?void 0:r.getContext,future:r==null?void 0:r.future,history:x1({window:r==null?void 0:r.window}),hydrationData:NS(),routes:s,mapRouteProperties:H2,hydrationRouteProperties:G2,dataStrategy:r==null?void 0:r.dataStrategy,patchRoutesOnNavigation:r==null?void 0:r.patchRoutesOnNavigation,window:r==null?void 0:r.window,unstable_instrumentations:r==null?void 0:r.unstable_instrumentations}).initialize()}function NS(){let s=window==null?void 0:window.__staticRouterHydrationData;return s&&s.errors&&(s={...s,errors:wS(s.errors)}),s}function wS(s){if(!s)return null;let r=Object.entries(s),n={};for(let[l,d]of r)if(d&&d.__type==="RouteErrorResponse")n[l]=new Tm(d.status,d.statusText,d.data,d.internal===!0);else if(d&&d.__type==="Error"){if(d.__subType){let m=window[d.__subType];if(typeof m=="function")try{let u=new m(d.message);u.stack="",n[l]=u}catch{}}if(n[l]==null){let m=new Error(d.message);m.stack="",n[l]=m}}else n[l]=d;return n}var Ij=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ys=y.forwardRef(function({onClick:r,discover:n="render",prefetch:l="none",relative:d,reloadDocument:m,replace:u,state:p,target:b,to:f,preventScrollReset:j,viewTransition:v,...w},D){let{basename:P,unstable_useTransitions:T}=y.useContext(Xi),$=typeof f=="string"&&Ij.test(f),L,M=!1;if(typeof f=="string"&&$&&(L=f,Uj))try{let ne=new URL(window.location.href),le=f.startsWith("//")?new URL(ne.protocol+f):new URL(f),me=Ri(le.pathname,P);le.origin===ne.origin&&me!=null?f=me+le.search+le.hash:M=!0}catch{La(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=A2(f,{relative:d}),[ce,U,O]=xS(l,w),k=ES(f,{replace:u,state:p,target:b,preventScrollReset:j,relative:d,viewTransition:v,unstable_useTransitions:T});function W(ne){r&&r(ne),ne.defaultPrevented||k(ne)}let Q=y.createElement("a",{...w,...O,href:L||B,onClick:M||m?r:W,ref:jS(D,U),target:b,"data-discover":!$&&n==="render"?"true":void 0});return ce&&!$?y.createElement(y.Fragment,null,Q,y.createElement(gS,{page:B})):Q});ys.displayName="Link";var SS=y.forwardRef(function({"aria-current":r="page",caseSensitive:n=!1,className:l="",end:d=!1,style:m,to:u,viewTransition:p,children:b,...f},j){let v=Fd(u,{relative:f.relative}),w=tn(),D=y.useContext(Ld),{navigator:P,basename:T}=y.useContext(Xi),$=D!=null&&OS(v)&&p===!0,L=P.encodeLocation?P.encodeLocation(v).pathname:v.pathname,M=w.pathname,B=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(M=M.toLowerCase(),B=B?B.toLowerCase():null,L=L.toLowerCase()),B&&T&&(B=Ri(B,T)||B);const ce=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let U=M===L||!d&&M.startsWith(L)&&M.charAt(ce)==="/",O=B!=null&&(B===L||!d&&B.startsWith(L)&&B.charAt(L.length)==="/"),k={isActive:U,isPending:O,isTransitioning:$},W=U?r:void 0,Q;typeof l=="function"?Q=l(k):Q=[l,U?"active":null,O?"pending":null,$?"transitioning":null].filter(Boolean).join(" ");let ne=typeof m=="function"?m(k):m;return y.createElement(ys,{...f,"aria-current":W,className:Q,ref:j,style:ne,to:u,viewTransition:p},typeof b=="function"?b(k):b)});SS.displayName="NavLink";var CS=y.forwardRef(({discover:s="render",fetcherKey:r,navigate:n,reloadDocument:l,replace:d,state:m,method:u=um,action:p,onSubmit:b,relative:f,preventScrollReset:j,viewTransition:v,...w},D)=>{let{unstable_useTransitions:P}=y.useContext(Xi),T=DS(),$=PS(p,{relative:f}),L=u.toLowerCase()==="get"?"get":"post",M=typeof p=="string"&&Ij.test(p),B=ce=>{if(b&&b(ce),ce.defaultPrevented)return;ce.preventDefault();let U=ce.nativeEvent.submitter,O=(U==null?void 0:U.getAttribute("formmethod"))||u,k=()=>T(U||ce.currentTarget,{fetcherKey:r,method:O,navigate:n,replace:d,state:m,relative:f,preventScrollReset:j,viewTransition:v});P&&n!==!1?y.startTransition(()=>k()):k()};return y.createElement("form",{ref:D,method:L,action:$,onSubmit:l?b:B,...w,"data-discover":!M&&s==="render"?"true":void 0})});CS.displayName="Form";function AS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vj(s){let r=y.useContext(xo);return js(r,AS(s)),r}function ES(s,{target:r,replace:n,state:l,preventScrollReset:d,relative:m,viewTransition:u,unstable_useTransitions:p}={}){let b=ar(),f=tn(),j=Fd(s,{relative:m});return y.useCallback(v=>{if(aS(v,r)){v.preventDefault();let w=n!==void 0?n:wn(f)===wn(j),D=()=>b(s,{replace:w,state:l,preventScrollReset:d,relative:m,viewTransition:u});p?y.startTransition(()=>D()):D()}},[f,b,j,n,l,r,s,d,m,u,p])}var TS=0,kS=()=>`__${String(++TS)}__`;function DS(){let{router:s}=Vj("useSubmit"),{basename:r}=y.useContext(Xi),n=F2(),l=s.fetch,d=s.navigate;return y.useCallback(async(m,u={})=>{let{action:p,method:b,encType:f,formData:j,body:v}=nS(m,r);if(u.navigate===!1){let w=u.fetcherKey||kS();await l(w,n,u.action||p,{preventScrollReset:u.preventScrollReset,formData:j,body:v,formMethod:u.method||b,formEncType:u.encType||f,flushSync:u.flushSync})}else await d(u.action||p,{preventScrollReset:u.preventScrollReset,formData:j,body:v,formMethod:u.method||b,formEncType:u.encType||f,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[l,d,r,n])}function PS(s,{relative:r}={}){let{basename:n}=y.useContext(Xi),l=y.useContext(en);js(l,"useFormAction must be used inside a RouteContext");let[d]=l.matches.slice(-1),m={...Fd(s||".",{relative:r})},u=tn();if(s==null){m.search=u.search;let p=new URLSearchParams(m.search),b=p.getAll("index");if(b.some(j=>j==="")){p.delete("index"),b.filter(v=>v).forEach(v=>p.append("index",v));let j=p.toString();m.search=j?`?${j}`:""}}return(!s||s===".")&&d.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(m.pathname=m.pathname==="/"?n:jn([n,m.pathname])),wn(m)}function OS(s,{relative:r}={}){let n=y.useContext(Th);js(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Vj("useViewTransitionState"),d=Fd(s,{relative:r});if(!n.isTransitioning)return!1;let m=Ri(n.currentLocation.pathname,l)||n.currentLocation.pathname,u=Ri(n.nextLocation.pathname,l)||n.nextLocation.pathname;return ym(d.pathname,u)!=null||ym(d.pathname,m)!=null}var RS=gj();function Ib(s){return y.createElement(Y2,{flushSync:RS.flushSync,...s})}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_S=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,l)=>l?l.toUpperCase():n.toLowerCase()),Vb=s=>{const r=_S(s);return r.charAt(0).toUpperCase()+r.slice(1)},Bj=(...s)=>s.filter((r,n,l)=>!!r&&r.trim()!==""&&l.indexOf(r)===n).join(" ").trim(),zS=s=>{for(const r in s)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=y.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:m,iconNode:u,...p},b)=>y.createElement("svg",{ref:b,...LS,width:r,height:r,stroke:s,strokeWidth:l?Number(n)*24/Number(r):n,className:Bj("lucide",d),...!m&&!zS(p)&&{"aria-hidden":"true"},...p},[...u.map(([f,j])=>y.createElement(f,j)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(s,r)=>{const n=y.forwardRef(({className:l,...d},m)=>y.createElement($S,{ref:m,iconNode:r,className:Bj(`lucide-${MS(Vb(s))}`,`lucide-${s}`,l),...d}));return n.displayName=Vb(s),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Cd=ut("arrow-left",FS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Yr=ut("arrow-right",US);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],VS=ut("badge-check",IS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Bb=ut("ban",BS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],HS=ut("bell",qS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],QS=ut("book",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],qj=ut("box",YS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ad=ut("briefcase",WS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],ki=ut("building-2",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ed=ut("calendar",JS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Za=ut("check",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_h=ut("chevron-down",XS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],po=ut("chevron-left",e4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],sr=ut("chevron-right",t4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bs=ut("circle-alert",s4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ga=ut("circle-check-big",a4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zn=ut("circle-check",r4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Hj=ut("circle-question-mark",i4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$l=ut("circle-x",n4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],o4=ut("circle",l4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ci=ut("clock",c4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],u4=ut("compass",d4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Gj=ut("copy",m4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ll=ut("credit-card",f4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],fd=ut("dollar-sign",p4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Wn=ut("download",h4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],g4=ut("eye-off",x4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Er=ut("eye",b4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],j4=ut("facebook",y4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Qj=ut("file-check",v4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],qb=ut("file-image",N4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Wr=ut("file-text",w4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],C4=ut("file",S4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Tp=ut("folder-plus",A4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Yj=ut("funnel",E4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],k4=ut("heart",T4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Wj=ut("house",D4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],bn=ut("image",P4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],hr=ut("info",O4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],M4=ut("instagram",R4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Zj=ut("layers",_4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],L4=ut("linkedin",z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Qt=ut("loader",$4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],kp=ut("log-in",F4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Td=ut("lock",U4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Hb=ut("log-out",I4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],uo=ut("mail",V4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Jn=ut("map-pin",B4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],H4=ut("menu",q4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ja=ut("package",G4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Y4=ut("palette",Q4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Jp=ut("pause",W4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],J4=ut("pen-line",Z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],kd=ut("pen",K4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],fm=ut("phone",X4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],lo=ut("play",e3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ls=ut("plus",t3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Jj=ut("printer",s3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Kn=ut("refresh-cw",a3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Gb=ut("ruler",r3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],nc=ut("save",i3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],l3=ut("scissors",n3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],c3=ut("scroll-text",o3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],di=ut("search",d3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],m3=ut("send",u3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Cr=ut("settings",f3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Pm=ut("shield",p3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Qb=ut("shopping-bag",h3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ai=ut("square-pen",x3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],gd=ut("square",g3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ki=ut("star",b3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],j3=ut("sticker",y3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],N3=ut("target",v3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Gs=ut("trash-2",w3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],C3=ut("trending-up",S3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],lc=ut("triangle-alert",A3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ho=ut("truck",E3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],k3=ut("twitter",T3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Jo=ut("upload",D3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],pd=ut("user-plus",P3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ji=ut("user",O3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ol=ut("users",R3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],as=ut("x",M3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],z3=ut("zap",_3);class L3 extends y.Component{constructor(r){super(r),this.props=r,this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx($3,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children||null}}const $3=({error:s,errorInfo:r})=>e.jsx(F3,{error:s,errorInfo:r}),F3=({error:s,errorInfo:r})=>{const n=ar(),l=()=>{n("/"),window.location.reload()},d=()=>{window.location.reload()};return e.jsx("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-lg border border-cream-200 p-8",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(lc,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-cream-600 mb-6",children:"We encountered an unexpected error. Please try refreshing the page or return to the home page."}),s&&!1,e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors font-medium",children:[e.jsx(Kn,{className:"w-4 h-4"}),"Refresh Page"]}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-cream-100 text-cream-700 rounded-lg hover:bg-cream-200 transition-colors font-medium",children:[e.jsx(Wj,{className:"w-4 h-4"}),"Go Home"]})]})]})})})},ma=s=>e.jsx(L3,{...s}),U3="modulepreload",I3=function(s){return"/"+s},Yb={},Ud=function(r,n,l){let d=Promise.resolve();if(n&&n.length>0){let u=function(f){return Promise.all(f.map(j=>Promise.resolve(j).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),b=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));d=u(n.map(f=>{if(f=I3(f),f in Yb)return;Yb[f]=!0;const j=f.endsWith(".css"),v=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${v}`))return;const w=document.createElement("link");if(w.rel=j?"stylesheet":U3,j||(w.as="script"),w.crossOrigin="",w.href=f,b&&w.setAttribute("nonce",b),document.head.appendChild(w),j)return new Promise((D,P)=>{w.addEventListener("load",D),w.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${f}`)))})}))}function m(u){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=u,window.dispatchEvent(p),!p.defaultPrevented)throw u}return d.then(u=>{for(const p of u||[])p.status==="rejected"&&m(p.reason);return r().catch(m)})},zh=y.createContext({});function Lh(s){const r=y.useRef(null);return r.current===null&&(r.current=s()),r.current}const $h=typeof window<"u",Kj=$h?y.useLayoutEffect:y.useEffect,Om=y.createContext(null);function Fh(s,r){s.indexOf(r)===-1&&s.push(r)}function Uh(s,r){const n=s.indexOf(r);n>-1&&s.splice(n,1)}const Xn=(s,r,n)=>n>r?r:n<s?s:n;let Ih=()=>{};const el={},Xj=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function ev(s){return typeof s=="object"&&s!==null}const tv=s=>/^0[^.\s]+$/u.test(s);function Vh(s){let r;return()=>(r===void 0&&(r=s()),r)}const Oi=s=>s,V3=(s,r)=>n=>r(s(n)),Id=(...s)=>s.reduce(V3),Dd=(s,r,n)=>{const l=r-s;return l===0?1:(n-s)/l};class Bh{constructor(){this.subscriptions=[]}add(r){return Fh(this.subscriptions,r),()=>Uh(this.subscriptions,r)}notify(r,n,l){const d=this.subscriptions.length;if(d)if(d===1)this.subscriptions[0](r,n,l);else for(let m=0;m<d;m++){const u=this.subscriptions[m];u&&u(r,n,l)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vn=s=>s*1e3,Di=s=>s/1e3;function sv(s,r){return r?s*(1e3/r):0}const av=(s,r,n)=>(((1-3*n+3*r)*s+(3*n-6*r))*s+3*r)*s,B3=1e-7,q3=12;function H3(s,r,n,l,d){let m,u,p=0;do u=r+(n-r)/2,m=av(u,l,d)-s,m>0?n=u:r=u;while(Math.abs(m)>B3&&++p<q3);return u}function Vd(s,r,n,l){if(s===r&&n===l)return Oi;const d=m=>H3(m,0,1,s,n);return m=>m===0||m===1?m:av(d(m),r,l)}const rv=s=>r=>r<=.5?s(2*r)/2:(2-s(2*(1-r)))/2,iv=s=>r=>1-s(1-r),nv=Vd(.33,1.53,.69,.99),qh=iv(nv),lv=rv(qh),ov=s=>(s*=2)<1?.5*qh(s):.5*(2-Math.pow(2,-10*(s-1))),Hh=s=>1-Math.sin(Math.acos(s)),cv=iv(Hh),dv=rv(Hh),G3=Vd(.42,0,1,1),Q3=Vd(0,0,.58,1),uv=Vd(.42,0,.58,1),Y3=s=>Array.isArray(s)&&typeof s[0]!="number",mv=s=>Array.isArray(s)&&typeof s[0]=="number",W3={linear:Oi,easeIn:G3,easeInOut:uv,easeOut:Q3,circIn:Hh,circInOut:dv,circOut:cv,backIn:qh,backInOut:lv,backOut:nv,anticipate:ov},Z3=s=>typeof s=="string",Wb=s=>{if(mv(s)){Ih(s.length===4);const[r,n,l,d]=s;return Vd(r,n,l,d)}else if(Z3(s))return W3[s];return s},im=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function J3(s,r){let n=new Set,l=new Set,d=!1,m=!1;const u=new WeakSet;let p={delta:0,timestamp:0,isProcessing:!1};function b(j){u.has(j)&&(f.schedule(j),s()),j(p)}const f={schedule:(j,v=!1,w=!1)=>{const P=w&&d?n:l;return v&&u.add(j),P.has(j)||P.add(j),j},cancel:j=>{l.delete(j),u.delete(j)},process:j=>{if(p=j,d){m=!0;return}d=!0,[n,l]=[l,n],n.forEach(b),n.clear(),d=!1,m&&(m=!1,f.process(j))}};return f}const K3=40;function fv(s,r){let n=!1,l=!0;const d={delta:0,timestamp:0,isProcessing:!1},m=()=>n=!0,u=im.reduce((B,ce)=>(B[ce]=J3(m),B),{}),{setup:p,read:b,resolveKeyframes:f,preUpdate:j,update:v,preRender:w,render:D,postRender:P}=u,T=()=>{const B=el.useManualTiming?d.timestamp:performance.now();n=!1,el.useManualTiming||(d.delta=l?1e3/60:Math.max(Math.min(B-d.timestamp,K3),1)),d.timestamp=B,d.isProcessing=!0,p.process(d),b.process(d),f.process(d),j.process(d),v.process(d),w.process(d),D.process(d),P.process(d),d.isProcessing=!1,n&&r&&(l=!1,s(T))},$=()=>{n=!0,l=!0,d.isProcessing||s(T)};return{schedule:im.reduce((B,ce)=>{const U=u[ce];return B[ce]=(O,k=!1,W=!1)=>(n||$(),U.schedule(O,k,W)),B},{}),cancel:B=>{for(let ce=0;ce<im.length;ce++)u[im[ce]].cancel(B)},state:d,steps:u}}const{schedule:Sa,cancel:Fl,state:ur,steps:Dp}=fv(typeof requestAnimationFrame<"u"?requestAnimationFrame:Oi,!0);let pm;function X3(){pm=void 0}const Qr={now:()=>(pm===void 0&&Qr.set(ur.isProcessing||el.useManualTiming?ur.timestamp:performance.now()),pm),set:s=>{pm=s,queueMicrotask(X3)}},pv=s=>r=>typeof r=="string"&&r.startsWith(s),hv=pv("--"),e5=pv("var(--"),Gh=s=>e5(s)?t5.test(s.split("/*")[0].trim()):!1,t5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dc={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Pd={...dc,transform:s=>Xn(0,1,s)},nm={...dc,default:1},bd=s=>Math.round(s*1e5)/1e5,Qh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function s5(s){return s==null}const a5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yh=(s,r)=>n=>!!(typeof n=="string"&&a5.test(n)&&n.startsWith(s)||r&&!s5(n)&&Object.prototype.hasOwnProperty.call(n,r)),xv=(s,r,n)=>l=>{if(typeof l!="string")return l;const[d,m,u,p]=l.match(Qh);return{[s]:parseFloat(d),[r]:parseFloat(m),[n]:parseFloat(u),alpha:p!==void 0?parseFloat(p):1}},r5=s=>Xn(0,255,s),Pp={...dc,transform:s=>Math.round(r5(s))},oo={test:Yh("rgb","red"),parse:xv("red","green","blue"),transform:({red:s,green:r,blue:n,alpha:l=1})=>"rgba("+Pp.transform(s)+", "+Pp.transform(r)+", "+Pp.transform(n)+", "+bd(Pd.transform(l))+")"};function i5(s){let r="",n="",l="",d="";return s.length>5?(r=s.substring(1,3),n=s.substring(3,5),l=s.substring(5,7),d=s.substring(7,9)):(r=s.substring(1,2),n=s.substring(2,3),l=s.substring(3,4),d=s.substring(4,5),r+=r,n+=n,l+=l,d+=d),{red:parseInt(r,16),green:parseInt(n,16),blue:parseInt(l,16),alpha:d?parseInt(d,16)/255:1}}const Kp={test:Yh("#"),parse:i5,transform:oo.transform},Bd=s=>({test:r=>typeof r=="string"&&r.endsWith(s)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${s}`}),Pl=Bd("deg"),Nn=Bd("%"),ss=Bd("px"),n5=Bd("vh"),l5=Bd("vw"),Zb={...Nn,parse:s=>Nn.parse(s)/100,transform:s=>Nn.transform(s*100)},Ko={test:Yh("hsl","hue"),parse:xv("hue","saturation","lightness"),transform:({hue:s,saturation:r,lightness:n,alpha:l=1})=>"hsla("+Math.round(s)+", "+Nn.transform(bd(r))+", "+Nn.transform(bd(n))+", "+bd(Pd.transform(l))+")"},Ia={test:s=>oo.test(s)||Kp.test(s)||Ko.test(s),parse:s=>oo.test(s)?oo.parse(s):Ko.test(s)?Ko.parse(s):Kp.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?oo.transform(s):Ko.transform(s),getAnimatableNone:s=>{const r=Ia.parse(s);return r.alpha=0,Ia.transform(r)}},o5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function c5(s){var r,n;return isNaN(s)&&typeof s=="string"&&(((r=s.match(Qh))==null?void 0:r.length)||0)+(((n=s.match(o5))==null?void 0:n.length)||0)>0}const gv="number",bv="color",d5="var",u5="var(",Jb="${}",m5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Od(s){const r=s.toString(),n=[],l={color:[],number:[],var:[]},d=[];let m=0;const p=r.replace(m5,b=>(Ia.test(b)?(l.color.push(m),d.push(bv),n.push(Ia.parse(b))):b.startsWith(u5)?(l.var.push(m),d.push(d5),n.push(b)):(l.number.push(m),d.push(gv),n.push(parseFloat(b))),++m,Jb)).split(Jb);return{values:n,split:p,indexes:l,types:d}}function yv(s){return Od(s).values}function jv(s){const{split:r,types:n}=Od(s),l=r.length;return d=>{let m="";for(let u=0;u<l;u++)if(m+=r[u],d[u]!==void 0){const p=n[u];p===gv?m+=bd(d[u]):p===bv?m+=Ia.transform(d[u]):m+=d[u]}return m}}const f5=s=>typeof s=="number"?0:Ia.test(s)?Ia.getAnimatableNone(s):s;function p5(s){const r=yv(s);return jv(s)(r.map(f5))}const Ul={test:c5,parse:yv,createTransformer:jv,getAnimatableNone:p5};function Op(s,r,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?s+(r-s)*6*n:n<1/2?r:n<2/3?s+(r-s)*(2/3-n)*6:s}function h5({hue:s,saturation:r,lightness:n,alpha:l}){s/=360,r/=100,n/=100;let d=0,m=0,u=0;if(!r)d=m=u=n;else{const p=n<.5?n*(1+r):n+r-n*r,b=2*n-p;d=Op(b,p,s+1/3),m=Op(b,p,s),u=Op(b,p,s-1/3)}return{red:Math.round(d*255),green:Math.round(m*255),blue:Math.round(u*255),alpha:l}}function vm(s,r){return n=>n>0?r:s}const Aa=(s,r,n)=>s+(r-s)*n,Rp=(s,r,n)=>{const l=s*s,d=n*(r*r-l)+l;return d<0?0:Math.sqrt(d)},x5=[Kp,oo,Ko],g5=s=>x5.find(r=>r.test(s));function Kb(s){const r=g5(s);if(!r)return!1;let n=r.parse(s);return r===Ko&&(n=h5(n)),n}const Xb=(s,r)=>{const n=Kb(s),l=Kb(r);if(!n||!l)return vm(s,r);const d={...n};return m=>(d.red=Rp(n.red,l.red,m),d.green=Rp(n.green,l.green,m),d.blue=Rp(n.blue,l.blue,m),d.alpha=Aa(n.alpha,l.alpha,m),oo.transform(d))},Xp=new Set(["none","hidden"]);function b5(s,r){return Xp.has(s)?n=>n<=0?s:r:n=>n>=1?r:s}function y5(s,r){return n=>Aa(s,r,n)}function Wh(s){return typeof s=="number"?y5:typeof s=="string"?Gh(s)?vm:Ia.test(s)?Xb:N5:Array.isArray(s)?vv:typeof s=="object"?Ia.test(s)?Xb:j5:vm}function vv(s,r){const n=[...s],l=n.length,d=s.map((m,u)=>Wh(m)(m,r[u]));return m=>{for(let u=0;u<l;u++)n[u]=d[u](m);return n}}function j5(s,r){const n={...s,...r},l={};for(const d in n)s[d]!==void 0&&r[d]!==void 0&&(l[d]=Wh(s[d])(s[d],r[d]));return d=>{for(const m in l)n[m]=l[m](d);return n}}function v5(s,r){const n=[],l={color:0,var:0,number:0};for(let d=0;d<r.values.length;d++){const m=r.types[d],u=s.indexes[m][l[m]],p=s.values[u]??0;n[d]=p,l[m]++}return n}const N5=(s,r)=>{const n=Ul.createTransformer(r),l=Od(s),d=Od(r);return l.indexes.var.length===d.indexes.var.length&&l.indexes.color.length===d.indexes.color.length&&l.indexes.number.length>=d.indexes.number.length?Xp.has(s)&&!d.values.length||Xp.has(r)&&!l.values.length?b5(s,r):Id(vv(v5(l,d),d.values),n):vm(s,r)};function Nv(s,r,n){return typeof s=="number"&&typeof r=="number"&&typeof n=="number"?Aa(s,r,n):Wh(s)(s,r)}const w5=s=>{const r=({timestamp:n})=>s(n);return{start:(n=!0)=>Sa.update(r,n),stop:()=>Fl(r),now:()=>ur.isProcessing?ur.timestamp:Qr.now()}},wv=(s,r,n=10)=>{let l="";const d=Math.max(Math.round(r/n),2);for(let m=0;m<d;m++)l+=Math.round(s(m/(d-1))*1e4)/1e4+", ";return`linear(${l.substring(0,l.length-2)})`},Nm=2e4;function Zh(s){let r=0;const n=50;let l=s.next(r);for(;!l.done&&r<Nm;)r+=n,l=s.next(r);return r>=Nm?1/0:r}function S5(s,r=100,n){const l=n({...s,keyframes:[0,r]}),d=Math.min(Zh(l),Nm);return{type:"keyframes",ease:m=>l.next(d*m).value/r,duration:Di(d)}}const C5=5;function Sv(s,r,n){const l=Math.max(r-C5,0);return sv(n-s(l),r-l)}const Da={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Mp=.001;function A5({duration:s=Da.duration,bounce:r=Da.bounce,velocity:n=Da.velocity,mass:l=Da.mass}){let d,m,u=1-r;u=Xn(Da.minDamping,Da.maxDamping,u),s=Xn(Da.minDuration,Da.maxDuration,Di(s)),u<1?(d=f=>{const j=f*u,v=j*s,w=j-n,D=eh(f,u),P=Math.exp(-v);return Mp-w/D*P},m=f=>{const v=f*u*s,w=v*n+n,D=Math.pow(u,2)*Math.pow(f,2)*s,P=Math.exp(-v),T=eh(Math.pow(f,2),u);return(-d(f)+Mp>0?-1:1)*((w-D)*P)/T}):(d=f=>{const j=Math.exp(-f*s),v=(f-n)*s+1;return-Mp+j*v},m=f=>{const j=Math.exp(-f*s),v=(n-f)*(s*s);return j*v});const p=5/s,b=T5(d,m,p);if(s=vn(s),isNaN(b))return{stiffness:Da.stiffness,damping:Da.damping,duration:s};{const f=Math.pow(b,2)*l;return{stiffness:f,damping:u*2*Math.sqrt(l*f),duration:s}}}const E5=12;function T5(s,r,n){let l=n;for(let d=1;d<E5;d++)l=l-s(l)/r(l);return l}function eh(s,r){return s*Math.sqrt(1-r*r)}const k5=["duration","bounce"],D5=["stiffness","damping","mass"];function ey(s,r){return r.some(n=>s[n]!==void 0)}function P5(s){let r={velocity:Da.velocity,stiffness:Da.stiffness,damping:Da.damping,mass:Da.mass,isResolvedFromDuration:!1,...s};if(!ey(s,D5)&&ey(s,k5))if(s.visualDuration){const n=s.visualDuration,l=2*Math.PI/(n*1.2),d=l*l,m=2*Xn(.05,1,1-(s.bounce||0))*Math.sqrt(d);r={...r,mass:Da.mass,stiffness:d,damping:m}}else{const n=A5(s);r={...r,...n,mass:Da.mass},r.isResolvedFromDuration=!0}return r}function wm(s=Da.visualDuration,r=Da.bounce){const n=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:r}:s;let{restSpeed:l,restDelta:d}=n;const m=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],p={done:!1,value:m},{stiffness:b,damping:f,mass:j,duration:v,velocity:w,isResolvedFromDuration:D}=P5({...n,velocity:-Di(n.velocity||0)}),P=w||0,T=f/(2*Math.sqrt(b*j)),$=u-m,L=Di(Math.sqrt(b/j)),M=Math.abs($)<5;l||(l=M?Da.restSpeed.granular:Da.restSpeed.default),d||(d=M?Da.restDelta.granular:Da.restDelta.default);let B;if(T<1){const U=eh(L,T);B=O=>{const k=Math.exp(-T*L*O);return u-k*((P+T*L*$)/U*Math.sin(U*O)+$*Math.cos(U*O))}}else if(T===1)B=U=>u-Math.exp(-L*U)*($+(P+L*$)*U);else{const U=L*Math.sqrt(T*T-1);B=O=>{const k=Math.exp(-T*L*O),W=Math.min(U*O,300);return u-k*((P+T*L*$)*Math.sinh(W)+U*$*Math.cosh(W))/U}}const ce={calculatedDuration:D&&v||null,next:U=>{const O=B(U);if(D)p.done=U>=v;else{let k=U===0?P:0;T<1&&(k=U===0?vn(P):Sv(B,U,O));const W=Math.abs(k)<=l,Q=Math.abs(u-O)<=d;p.done=W&&Q}return p.value=p.done?u:O,p},toString:()=>{const U=Math.min(Zh(ce),Nm),O=wv(k=>ce.next(U*k).value,U,30);return U+"ms "+O},toTransition:()=>{}};return ce}wm.applyToOptions=s=>{const r=S5(s,100,wm);return s.ease=r.ease,s.duration=vn(r.duration),s.type="keyframes",s};function th({keyframes:s,velocity:r=0,power:n=.8,timeConstant:l=325,bounceDamping:d=10,bounceStiffness:m=500,modifyTarget:u,min:p,max:b,restDelta:f=.5,restSpeed:j}){const v=s[0],w={done:!1,value:v},D=W=>p!==void 0&&W<p||b!==void 0&&W>b,P=W=>p===void 0?b:b===void 0||Math.abs(p-W)<Math.abs(b-W)?p:b;let T=n*r;const $=v+T,L=u===void 0?$:u($);L!==$&&(T=L-v);const M=W=>-T*Math.exp(-W/l),B=W=>L+M(W),ce=W=>{const Q=M(W),ne=B(W);w.done=Math.abs(Q)<=f,w.value=w.done?L:ne};let U,O;const k=W=>{D(w.value)&&(U=W,O=wm({keyframes:[w.value,P(w.value)],velocity:Sv(B,W,w.value),damping:d,stiffness:m,restDelta:f,restSpeed:j}))};return k(0),{calculatedDuration:null,next:W=>{let Q=!1;return!O&&U===void 0&&(Q=!0,ce(W),k(W)),U!==void 0&&W>=U?O.next(W-U):(!Q&&ce(W),w)}}}function O5(s,r,n){const l=[],d=n||el.mix||Nv,m=s.length-1;for(let u=0;u<m;u++){let p=d(s[u],s[u+1]);if(r){const b=Array.isArray(r)?r[u]||Oi:r;p=Id(b,p)}l.push(p)}return l}function R5(s,r,{clamp:n=!0,ease:l,mixer:d}={}){const m=s.length;if(Ih(m===r.length),m===1)return()=>r[0];if(m===2&&r[0]===r[1])return()=>r[1];const u=s[0]===s[1];s[0]>s[m-1]&&(s=[...s].reverse(),r=[...r].reverse());const p=O5(r,l,d),b=p.length,f=j=>{if(u&&j<s[0])return r[0];let v=0;if(b>1)for(;v<s.length-2&&!(j<s[v+1]);v++);const w=Dd(s[v],s[v+1],j);return p[v](w)};return n?j=>f(Xn(s[0],s[m-1],j)):f}function M5(s,r){const n=s[s.length-1];for(let l=1;l<=r;l++){const d=Dd(0,r,l);s.push(Aa(n,1,d))}}function _5(s){const r=[0];return M5(r,s.length-1),r}function z5(s,r){return s.map(n=>n*r)}function L5(s,r){return s.map(()=>r||uv).splice(0,s.length-1)}function yd({duration:s=300,keyframes:r,times:n,ease:l="easeInOut"}){const d=Y3(l)?l.map(Wb):Wb(l),m={done:!1,value:r[0]},u=z5(n&&n.length===r.length?n:_5(r),s),p=R5(u,r,{ease:Array.isArray(d)?d:L5(r,d)});return{calculatedDuration:s,next:b=>(m.value=p(b),m.done=b>=s,m)}}const $5=s=>s!==null;function Jh(s,{repeat:r,repeatType:n="loop"},l,d=1){const m=s.filter($5),p=d<0||r&&n!=="loop"&&r%2===1?0:m.length-1;return!p||l===void 0?m[p]:l}const F5={decay:th,inertia:th,tween:yd,keyframes:yd,spring:wm};function Cv(s){typeof s.type=="string"&&(s.type=F5[s.type])}class Kh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(r=>{this.resolve=r})}notifyFinished(){this.resolve()}then(r,n){return this.finished.then(r,n)}}const U5=s=>s/100;class Xh extends Kh{constructor(r){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var l,d;const{motionValue:n}=this.options;n&&n.updatedAt!==Qr.now()&&this.tick(Qr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(d=(l=this.options).onStop)==null||d.call(l))},this.options=r,this.initAnimation(),this.play(),r.autoplay===!1&&this.pause()}initAnimation(){const{options:r}=this;Cv(r);const{type:n=yd,repeat:l=0,repeatDelay:d=0,repeatType:m,velocity:u=0}=r;let{keyframes:p}=r;const b=n||yd;b!==yd&&typeof p[0]!="number"&&(this.mixKeyframes=Id(U5,Nv(p[0],p[1])),p=[0,100]);const f=b({...r,keyframes:p});m==="mirror"&&(this.mirroredGenerator=b({...r,keyframes:[...p].reverse(),velocity:-u})),f.calculatedDuration===null&&(f.calculatedDuration=Zh(f));const{calculatedDuration:j}=f;this.calculatedDuration=j,this.resolvedDuration=j+d,this.totalDuration=this.resolvedDuration*(l+1)-d,this.generator=f}updateTime(r){const n=Math.round(r-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(r,n=!1){const{generator:l,totalDuration:d,mixKeyframes:m,mirroredGenerator:u,resolvedDuration:p,calculatedDuration:b}=this;if(this.startTime===null)return l.next(0);const{delay:f=0,keyframes:j,repeat:v,repeatType:w,repeatDelay:D,type:P,onUpdate:T,finalKeyframe:$}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,r):this.speed<0&&(this.startTime=Math.min(r-d/this.speed,this.startTime)),n?this.currentTime=r:this.updateTime(r);const L=this.currentTime-f*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?L<0:L>d;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let B=this.currentTime,ce=l;if(v){const W=Math.min(this.currentTime,d)/p;let Q=Math.floor(W),ne=W%1;!ne&&W>=1&&(ne=1),ne===1&&Q--,Q=Math.min(Q,v+1),!!(Q%2)&&(w==="reverse"?(ne=1-ne,D&&(ne-=D/p)):w==="mirror"&&(ce=u)),B=Xn(0,1,ne)*p}const U=M?{done:!1,value:j[0]}:ce.next(B);m&&(U.value=m(U.value));let{done:O}=U;!M&&b!==null&&(O=this.playbackSpeed>=0?this.currentTime>=d:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return k&&P!==th&&(U.value=Jh(j,this.options,$,this.speed)),T&&T(U.value),k&&this.finish(),U}then(r,n){return this.finished.then(r,n)}get duration(){return Di(this.calculatedDuration)}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+Di(r)}get time(){return Di(this.currentTime)}set time(r){var n;r=vn(r),this.currentTime=r,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=r:this.driver&&(this.startTime=this.driver.now()-r/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(r){this.updateTime(Qr.now());const n=this.playbackSpeed!==r;this.playbackSpeed=r,n&&(this.time=Di(this.currentTime))}play(){var d,m;if(this.isStopped)return;const{driver:r=w5,startTime:n}=this.options;this.driver||(this.driver=r(u=>this.tick(u))),(m=(d=this.options).onPlay)==null||m.call(d);const l=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=l):this.holdTime!==null?this.startTime=l-this.holdTime:this.startTime||(this.startTime=n??l),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Qr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var r,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(r=this.options).onComplete)==null||n.call(r)}cancel(){var r,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(r=this.options).onCancel)==null||n.call(r)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(r){return this.startTime=0,this.tick(r,!0)}attachTimeline(r){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),r.observe(this)}}function I5(s){for(let r=1;r<s.length;r++)s[r]??(s[r]=s[r-1])}const co=s=>s*180/Math.PI,sh=s=>{const r=co(Math.atan2(s[1],s[0]));return ah(r)},V5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:sh,rotateZ:sh,skewX:s=>co(Math.atan(s[1])),skewY:s=>co(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},ah=s=>(s=s%360,s<0&&(s+=360),s),ty=sh,sy=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),ay=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),B5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sy,scaleY:ay,scale:s=>(sy(s)+ay(s))/2,rotateX:s=>ah(co(Math.atan2(s[6],s[5]))),rotateY:s=>ah(co(Math.atan2(-s[2],s[0]))),rotateZ:ty,rotate:ty,skewX:s=>co(Math.atan(s[4])),skewY:s=>co(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function rh(s){return s.includes("scale")?1:0}function ih(s,r){if(!s||s==="none")return rh(r);const n=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let l,d;if(n)l=B5,d=n;else{const p=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);l=V5,d=p}if(!d)return rh(r);const m=l[r],u=d[1].split(",").map(H5);return typeof m=="function"?m(u):u[m]}const q5=(s,r)=>{const{transform:n="none"}=getComputedStyle(s);return ih(n,r)};function H5(s){return parseFloat(s.trim())}const uc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mc=new Set(uc),ry=s=>s===dc||s===ss,G5=new Set(["x","y","z"]),Q5=uc.filter(s=>!G5.has(s));function Y5(s){const r=[];return Q5.forEach(n=>{const l=s.getValue(n);l!==void 0&&(r.push([n,l.get()]),l.set(n.startsWith("scale")?1:0))}),r}const mo={width:({x:s},{paddingLeft:r="0",paddingRight:n="0"})=>s.max-s.min-parseFloat(r)-parseFloat(n),height:({y:s},{paddingTop:r="0",paddingBottom:n="0"})=>s.max-s.min-parseFloat(r)-parseFloat(n),top:(s,{top:r})=>parseFloat(r),left:(s,{left:r})=>parseFloat(r),bottom:({y:s},{top:r})=>parseFloat(r)+(s.max-s.min),right:({x:s},{left:r})=>parseFloat(r)+(s.max-s.min),x:(s,{transform:r})=>ih(r,"x"),y:(s,{transform:r})=>ih(r,"y")};mo.translateX=mo.x;mo.translateY=mo.y;const fo=new Set;let nh=!1,lh=!1,oh=!1;function Av(){if(lh){const s=Array.from(fo).filter(l=>l.needsMeasurement),r=new Set(s.map(l=>l.element)),n=new Map;r.forEach(l=>{const d=Y5(l);d.length&&(n.set(l,d),l.render())}),s.forEach(l=>l.measureInitialState()),r.forEach(l=>{l.render();const d=n.get(l);d&&d.forEach(([m,u])=>{var p;(p=l.getValue(m))==null||p.set(u)})}),s.forEach(l=>l.measureEndState()),s.forEach(l=>{l.suspendedScrollY!==void 0&&window.scrollTo(0,l.suspendedScrollY)})}lh=!1,nh=!1,fo.forEach(s=>s.complete(oh)),fo.clear()}function Ev(){fo.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(lh=!0)})}function W5(){oh=!0,Ev(),Av(),oh=!1}class ex{constructor(r,n,l,d,m,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...r],this.onComplete=n,this.name=l,this.motionValue=d,this.element=m,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(fo.add(this),nh||(nh=!0,Sa.read(Ev),Sa.resolveKeyframes(Av))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:r,name:n,element:l,motionValue:d}=this;if(r[0]===null){const m=d==null?void 0:d.get(),u=r[r.length-1];if(m!==void 0)r[0]=m;else if(l&&n){const p=l.readValue(n,u);p!=null&&(r[0]=p)}r[0]===void 0&&(r[0]=u),d&&m===void 0&&d.set(r[0])}I5(r)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(r=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,r),fo.delete(this)}cancel(){this.state==="scheduled"&&(fo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Z5=s=>s.startsWith("--");function J5(s,r,n){Z5(r)?s.style.setProperty(r,n):s.style[r]=n}const K5=Vh(()=>window.ScrollTimeline!==void 0),X5={};function eC(s,r){const n=Vh(s);return()=>X5[r]??n()}const Tv=eC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hd=([s,r,n,l])=>`cubic-bezier(${s}, ${r}, ${n}, ${l})`,iy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hd([0,.65,.55,1]),circOut:hd([.55,0,1,.45]),backIn:hd([.31,.01,.66,-.59]),backOut:hd([.33,1.53,.69,.99])};function kv(s,r){if(s)return typeof s=="function"?Tv()?wv(s,r):"ease-out":mv(s)?hd(s):Array.isArray(s)?s.map(n=>kv(n,r)||iy.easeOut):iy[s]}function tC(s,r,n,{delay:l=0,duration:d=300,repeat:m=0,repeatType:u="loop",ease:p="easeOut",times:b}={},f=void 0){const j={[r]:n};b&&(j.offset=b);const v=kv(p,d);Array.isArray(v)&&(j.easing=v);const w={delay:l,duration:d,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:m+1,direction:u==="reverse"?"alternate":"normal"};return f&&(w.pseudoElement=f),s.animate(j,w)}function Dv(s){return typeof s=="function"&&"applyToOptions"in s}function sC({type:s,...r}){return Dv(s)&&Tv()?s.applyToOptions(r):(r.duration??(r.duration=300),r.ease??(r.ease="easeOut"),r)}class aC extends Kh{constructor(r){if(super(),this.finishedTime=null,this.isStopped=!1,!r)return;const{element:n,name:l,keyframes:d,pseudoElement:m,allowFlatten:u=!1,finalKeyframe:p,onComplete:b}=r;this.isPseudoElement=!!m,this.allowFlatten=u,this.options=r,Ih(typeof r.type!="string");const f=sC(r);this.animation=tC(n,l,d,f,m),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!m){const j=Jh(d,this.options,p,this.speed);this.updateMotionValue?this.updateMotionValue(j):J5(n,l,j),this.animation.cancel()}b==null||b(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var r,n;(n=(r=this.animation).finish)==null||n.call(r)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:r}=this;r==="idle"||r==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var r,n;this.isPseudoElement||(n=(r=this.animation).commitStyles)==null||n.call(r)}get duration(){var n,l;const r=((l=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:l.call(n).duration)||0;return Di(Number(r))}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+Di(r)}get time(){return Di(Number(this.animation.currentTime)||0)}set time(r){this.finishedTime=null,this.animation.currentTime=vn(r)}get speed(){return this.animation.playbackRate}set speed(r){r<0&&(this.finishedTime=null),this.animation.playbackRate=r}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(r){this.animation.startTime=r}attachTimeline({timeline:r,observe:n}){var l;return this.allowFlatten&&((l=this.animation.effect)==null||l.updateTiming({easing:"linear"})),this.animation.onfinish=null,r&&K5()?(this.animation.timeline=r,Oi):n(this)}}const Pv={anticipate:ov,backInOut:lv,circInOut:dv};function rC(s){return s in Pv}function iC(s){typeof s.ease=="string"&&rC(s.ease)&&(s.ease=Pv[s.ease])}const ny=10;class nC extends aC{constructor(r){iC(r),Cv(r),super(r),r.startTime&&(this.startTime=r.startTime),this.options=r}updateMotionValue(r){const{motionValue:n,onUpdate:l,onComplete:d,element:m,...u}=this.options;if(!n)return;if(r!==void 0){n.set(r);return}const p=new Xh({...u,autoplay:!1}),b=vn(this.finishedTime??this.time);n.setWithVelocity(p.sample(b-ny).value,p.sample(b).value,ny),p.stop()}}const ly=(s,r)=>r==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Ul.test(s)||s==="0")&&!s.startsWith("url("));function lC(s){const r=s[0];if(s.length===1)return!0;for(let n=0;n<s.length;n++)if(s[n]!==r)return!0}function oC(s,r,n,l){const d=s[0];if(d===null)return!1;if(r==="display"||r==="visibility")return!0;const m=s[s.length-1],u=ly(d,r),p=ly(m,r);return!u||!p?!1:lC(s)||(n==="spring"||Dv(n))&&l}function ch(s){s.duration=0,s.type="keyframes"}const cC=new Set(["opacity","clipPath","filter","transform"]),dC=Vh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function uC(s){var j;const{motionValue:r,name:n,repeatDelay:l,repeatType:d,damping:m,type:u}=s;if(!(((j=r==null?void 0:r.owner)==null?void 0:j.current)instanceof HTMLElement))return!1;const{onUpdate:b,transformTemplate:f}=r.owner.getProps();return dC()&&n&&cC.has(n)&&(n!=="transform"||!f)&&!b&&!l&&d!=="mirror"&&m!==0&&u!=="inertia"}const mC=40;class fC extends Kh{constructor({autoplay:r=!0,delay:n=0,type:l="keyframes",repeat:d=0,repeatDelay:m=0,repeatType:u="loop",keyframes:p,name:b,motionValue:f,element:j,...v}){var P;super(),this.stop=()=>{var T,$;this._animation&&(this._animation.stop(),(T=this.stopTimeline)==null||T.call(this)),($=this.keyframeResolver)==null||$.cancel()},this.createdAt=Qr.now();const w={autoplay:r,delay:n,type:l,repeat:d,repeatDelay:m,repeatType:u,name:b,motionValue:f,element:j,...v},D=(j==null?void 0:j.KeyframeResolver)||ex;this.keyframeResolver=new D(p,(T,$,L)=>this.onKeyframesResolved(T,$,w,!L),b,f,j),(P=this.keyframeResolver)==null||P.scheduleResolve()}onKeyframesResolved(r,n,l,d){this.keyframeResolver=void 0;const{name:m,type:u,velocity:p,delay:b,isHandoff:f,onUpdate:j}=l;this.resolvedAt=Qr.now(),oC(r,m,u,p)||((el.instantAnimations||!b)&&(j==null||j(Jh(r,l,n))),r[0]=r[r.length-1],ch(l),l.repeat=0);const w={startTime:d?this.resolvedAt?this.resolvedAt-this.createdAt>mC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...l,keyframes:r},D=!f&&uC(w)?new nC({...w,element:w.motionValue.owner.current}):new Xh(w);D.finished.then(()=>this.notifyFinished()).catch(Oi),this.pendingTimeline&&(this.stopTimeline=D.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=D}get finished(){return this._animation?this.animation.finished:this._finished}then(r,n){return this.finished.finally(r).then(()=>{})}get animation(){var r;return this._animation||((r=this.keyframeResolver)==null||r.resume(),W5()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(r){this.animation.time=r}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(r){this.animation.speed=r}get startTime(){return this.animation.startTime}attachTimeline(r){return this._animation?this.stopTimeline=this.animation.attachTimeline(r):this.pendingTimeline=r,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var r;this._animation&&this.animation.cancel(),(r=this.keyframeResolver)==null||r.cancel()}}const pC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hC(s){const r=pC.exec(s);if(!r)return[,];const[,n,l,d]=r;return[`--${n??l}`,d]}function Ov(s,r,n=1){const[l,d]=hC(s);if(!l)return;const m=window.getComputedStyle(r).getPropertyValue(l);if(m){const u=m.trim();return Xj(u)?parseFloat(u):u}return Gh(d)?Ov(d,r,n+1):d}function tx(s,r){return(s==null?void 0:s[r])??(s==null?void 0:s.default)??s}const Rv=new Set(["width","height","top","left","right","bottom",...uc]),xC={test:s=>s==="auto",parse:s=>s},Mv=s=>r=>r.test(s),_v=[dc,ss,Nn,Pl,l5,n5,xC],oy=s=>_v.find(Mv(s));function gC(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||tv(s):!0}const bC=new Set(["brightness","contrast","saturate","opacity"]);function yC(s){const[r,n]=s.slice(0,-1).split("(");if(r==="drop-shadow")return s;const[l]=n.match(Qh)||[];if(!l)return s;const d=n.replace(l,"");let m=bC.has(r)?1:0;return l!==n&&(m*=100),r+"("+m+d+")"}const jC=/\b([a-z-]*)\(.*?\)/gu,dh={...Ul,getAnimatableNone:s=>{const r=s.match(jC);return r?r.map(yC).join(" "):s}},cy={...dc,transform:Math.round},vC={rotate:Pl,rotateX:Pl,rotateY:Pl,rotateZ:Pl,scale:nm,scaleX:nm,scaleY:nm,scaleZ:nm,skew:Pl,skewX:Pl,skewY:Pl,distance:ss,translateX:ss,translateY:ss,translateZ:ss,x:ss,y:ss,z:ss,perspective:ss,transformPerspective:ss,opacity:Pd,originX:Zb,originY:Zb,originZ:ss},sx={borderWidth:ss,borderTopWidth:ss,borderRightWidth:ss,borderBottomWidth:ss,borderLeftWidth:ss,borderRadius:ss,radius:ss,borderTopLeftRadius:ss,borderTopRightRadius:ss,borderBottomRightRadius:ss,borderBottomLeftRadius:ss,width:ss,maxWidth:ss,height:ss,maxHeight:ss,top:ss,right:ss,bottom:ss,left:ss,padding:ss,paddingTop:ss,paddingRight:ss,paddingBottom:ss,paddingLeft:ss,margin:ss,marginTop:ss,marginRight:ss,marginBottom:ss,marginLeft:ss,backgroundPositionX:ss,backgroundPositionY:ss,...vC,zIndex:cy,fillOpacity:Pd,strokeOpacity:Pd,numOctaves:cy},NC={...sx,color:Ia,backgroundColor:Ia,outlineColor:Ia,fill:Ia,stroke:Ia,borderColor:Ia,borderTopColor:Ia,borderRightColor:Ia,borderBottomColor:Ia,borderLeftColor:Ia,filter:dh,WebkitFilter:dh},zv=s=>NC[s];function Lv(s,r){let n=zv(s);return n!==dh&&(n=Ul),n.getAnimatableNone?n.getAnimatableNone(r):void 0}const wC=new Set(["auto","none","0"]);function SC(s,r,n){let l=0,d;for(;l<s.length&&!d;){const m=s[l];typeof m=="string"&&!wC.has(m)&&Od(m).values.length&&(d=s[l]),l++}if(d&&n)for(const m of r)s[m]=Lv(n,d)}class CC extends ex{constructor(r,n,l,d,m){super(r,n,l,d,m,!0)}readKeyframes(){const{unresolvedKeyframes:r,element:n,name:l}=this;if(!n||!n.current)return;super.readKeyframes();for(let b=0;b<r.length;b++){let f=r[b];if(typeof f=="string"&&(f=f.trim(),Gh(f))){const j=Ov(f,n.current);j!==void 0&&(r[b]=j),b===r.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Rv.has(l)||r.length!==2)return;const[d,m]=r,u=oy(d),p=oy(m);if(u!==p)if(ry(u)&&ry(p))for(let b=0;b<r.length;b++){const f=r[b];typeof f=="string"&&(r[b]=parseFloat(f))}else mo[l]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:r,name:n}=this,l=[];for(let d=0;d<r.length;d++)(r[d]===null||gC(r[d]))&&l.push(d);l.length&&SC(r,l,n)}measureInitialState(){const{element:r,unresolvedKeyframes:n,name:l}=this;if(!r||!r.current)return;l==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mo[l](r.measureViewportBox(),window.getComputedStyle(r.current)),n[0]=this.measuredOrigin;const d=n[n.length-1];d!==void 0&&r.getValue(l,d).jump(d,!1)}measureEndState(){var p;const{element:r,name:n,unresolvedKeyframes:l}=this;if(!r||!r.current)return;const d=r.getValue(n);d&&d.jump(this.measuredOrigin,!1);const m=l.length-1,u=l[m];l[m]=mo[n](r.measureViewportBox(),window.getComputedStyle(r.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(p=this.removedTransforms)!=null&&p.length&&this.removedTransforms.forEach(([b,f])=>{r.getValue(b).set(f)}),this.resolveNoneKeyframes()}}function AC(s,r,n){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let l=document;const d=(n==null?void 0:n[s])??l.querySelectorAll(s);return d?Array.from(d):[]}return Array.from(s)}const $v=(s,r)=>r&&typeof s=="number"?r.transform(s):s;function Fv(s){return ev(s)&&"offsetHeight"in s}const dy=30,EC=s=>!isNaN(parseFloat(s));class TC{constructor(r,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=l=>{var m;const d=Qr.now();if(this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(l),this.current!==this.prev&&((m=this.events.change)==null||m.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(r),this.owner=n.owner}setCurrent(r){this.current=r,this.updatedAt=Qr.now(),this.canTrackVelocity===null&&r!==void 0&&(this.canTrackVelocity=EC(this.current))}setPrevFrameValue(r=this.current){this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt}onChange(r){return this.on("change",r)}on(r,n){this.events[r]||(this.events[r]=new Bh);const l=this.events[r].add(n);return r==="change"?()=>{l(),Sa.read(()=>{this.events.change.getSize()||this.stop()})}:l}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,n){this.passiveEffect=r,this.stopPassiveEffect=n}set(r){this.passiveEffect?this.passiveEffect(r,this.updateAndNotify):this.updateAndNotify(r)}setWithVelocity(r,n,l){this.set(n),this.prev=void 0,this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt-l}jump(r,n=!0){this.updateAndNotify(r),this.prev=r,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var r;(r=this.events.change)==null||r.notify(this.current)}addDependent(r){this.dependents||(this.dependents=new Set),this.dependents.add(r)}removeDependent(r){this.dependents&&this.dependents.delete(r)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const r=Qr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>dy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dy);return sv(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(r){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=r(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var r,n;(r=this.dependents)==null||r.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oc(s,r){return new TC(s,r)}const{schedule:ax}=fv(queueMicrotask,!1),Zi={x:!1,y:!1};function Uv(){return Zi.x||Zi.y}function kC(s){return s==="x"||s==="y"?Zi[s]?null:(Zi[s]=!0,()=>{Zi[s]=!1}):Zi.x||Zi.y?null:(Zi.x=Zi.y=!0,()=>{Zi.x=Zi.y=!1})}function Iv(s,r){const n=AC(s),l=new AbortController,d={passive:!0,...r,signal:l.signal};return[n,d,()=>l.abort()]}function uy(s){return!(s.pointerType==="touch"||Uv())}function DC(s,r,n={}){const[l,d,m]=Iv(s,n),u=p=>{if(!uy(p))return;const{target:b}=p,f=r(b,p);if(typeof f!="function"||!b)return;const j=v=>{uy(v)&&(f(v),b.removeEventListener("pointerleave",j))};b.addEventListener("pointerleave",j,d)};return l.forEach(p=>{p.addEventListener("pointerenter",u,d)}),m}const Vv=(s,r)=>r?s===r?!0:Vv(s,r.parentElement):!1,rx=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,PC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OC(s){return PC.has(s.tagName)||s.tabIndex!==-1}const hm=new WeakSet;function my(s){return r=>{r.key==="Enter"&&s(r)}}function _p(s,r){s.dispatchEvent(new PointerEvent("pointer"+r,{isPrimary:!0,bubbles:!0}))}const RC=(s,r)=>{const n=s.currentTarget;if(!n)return;const l=my(()=>{if(hm.has(n))return;_p(n,"down");const d=my(()=>{_p(n,"up")}),m=()=>_p(n,"cancel");n.addEventListener("keyup",d,r),n.addEventListener("blur",m,r)});n.addEventListener("keydown",l,r),n.addEventListener("blur",()=>n.removeEventListener("keydown",l),r)};function fy(s){return rx(s)&&!Uv()}function MC(s,r,n={}){const[l,d,m]=Iv(s,n),u=p=>{const b=p.currentTarget;if(!fy(p))return;hm.add(b);const f=r(b,p),j=(D,P)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",w),hm.has(b)&&hm.delete(b),fy(D)&&typeof f=="function"&&f(D,{success:P})},v=D=>{j(D,b===window||b===document||n.useGlobalTarget||Vv(b,D.target))},w=D=>{j(D,!1)};window.addEventListener("pointerup",v,d),window.addEventListener("pointercancel",w,d)};return l.forEach(p=>{(n.useGlobalTarget?window:p).addEventListener("pointerdown",u,d),Fv(p)&&(p.addEventListener("focus",f=>RC(f,d)),!OC(p)&&!p.hasAttribute("tabindex")&&(p.tabIndex=0))}),m}function Bv(s){return ev(s)&&"ownerSVGElement"in s}function _C(s){return Bv(s)&&s.tagName==="svg"}const xr=s=>!!(s&&s.getVelocity),zC=[..._v,Ia,Ul],LC=s=>zC.find(Mv(s)),ix=y.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function py(s,r){if(typeof s=="function")return s(r);s!=null&&(s.current=r)}function $C(...s){return r=>{let n=!1;const l=s.map(d=>{const m=py(d,r);return!n&&typeof m=="function"&&(n=!0),m});if(n)return()=>{for(let d=0;d<l.length;d++){const m=l[d];typeof m=="function"?m():py(s[d],null)}}}}function FC(...s){return y.useCallback($C(...s),s)}class UC extends y.Component{getSnapshotBeforeUpdate(r){const n=this.props.childRef.current;if(n&&r.isPresent&&!this.props.isPresent){const l=n.offsetParent,d=Fv(l)&&l.offsetWidth||0,m=this.props.sizeRef.current;m.height=n.offsetHeight||0,m.width=n.offsetWidth||0,m.top=n.offsetTop,m.left=n.offsetLeft,m.right=d-m.width-m.left}return null}componentDidUpdate(){}render(){return this.props.children}}function IC({children:s,isPresent:r,anchorX:n,root:l}){const d=y.useId(),m=y.useRef(null),u=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=y.useContext(ix),b=FC(m,s==null?void 0:s.ref);return y.useInsertionEffect(()=>{const{width:f,height:j,top:v,left:w,right:D}=u.current;if(r||!m.current||!f||!j)return;const P=n==="left"?`left: ${w}`:`right: ${D}`;m.current.dataset.motionPopId=d;const T=document.createElement("style");p&&(T.nonce=p);const $=l??document.head;return $.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${j}px !important;
            ${P}px !important;
            top: ${v}px !important;
          }
        `),()=>{$.contains(T)&&$.removeChild(T)}},[r]),e.jsx(UC,{isPresent:r,childRef:m,sizeRef:u,children:y.cloneElement(s,{ref:b})})}const VC=({children:s,initial:r,isPresent:n,onExitComplete:l,custom:d,presenceAffectsLayout:m,mode:u,anchorX:p,root:b})=>{const f=Lh(BC),j=y.useId();let v=!0,w=y.useMemo(()=>(v=!1,{id:j,initial:r,isPresent:n,custom:d,onExitComplete:D=>{f.set(D,!0);for(const P of f.values())if(!P)return;l&&l()},register:D=>(f.set(D,!1),()=>f.delete(D))}),[n,f,l]);return m&&v&&(w={...w}),y.useMemo(()=>{f.forEach((D,P)=>f.set(P,!1))},[n]),y.useEffect(()=>{!n&&!f.size&&l&&l()},[n]),u==="popLayout"&&(s=e.jsx(IC,{isPresent:n,anchorX:p,root:b,children:s})),e.jsx(Om.Provider,{value:w,children:s})};function BC(){return new Map}function qv(s=!0){const r=y.useContext(Om);if(r===null)return[!0,null];const{isPresent:n,onExitComplete:l,register:d}=r,m=y.useId();y.useEffect(()=>{if(s)return d(m)},[s]);const u=y.useCallback(()=>s&&l&&l(m),[m,l,s]);return!n&&l?[!1,u]:[!0]}const lm=s=>s.key||"";function hy(s){const r=[];return y.Children.forEach(s,n=>{y.isValidElement(n)&&r.push(n)}),r}const ca=({children:s,custom:r,initial:n=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:m="sync",propagate:u=!1,anchorX:p="left",root:b})=>{const[f,j]=qv(u),v=y.useMemo(()=>hy(s),[s]),w=u&&!f?[]:v.map(lm),D=y.useRef(!0),P=y.useRef(v),T=Lh(()=>new Map),[$,L]=y.useState(v),[M,B]=y.useState(v);Kj(()=>{D.current=!1,P.current=v;for(let O=0;O<M.length;O++){const k=lm(M[O]);w.includes(k)?T.delete(k):T.get(k)!==!0&&T.set(k,!1)}},[M,w.length,w.join("-")]);const ce=[];if(v!==$){let O=[...v];for(let k=0;k<M.length;k++){const W=M[k],Q=lm(W);w.includes(Q)||(O.splice(k,0,W),ce.push(W))}return m==="wait"&&ce.length&&(O=ce),B(hy(O)),L(v),null}const{forceRender:U}=y.useContext(zh);return e.jsx(e.Fragment,{children:M.map(O=>{const k=lm(O),W=u&&!f?!1:v===M||w.includes(k),Q=()=>{if(T.has(k))T.set(k,!0);else return;let ne=!0;T.forEach(le=>{le||(ne=!1)}),ne&&(U==null||U(),B(P.current),u&&(j==null||j()),l&&l())};return e.jsx(VC,{isPresent:W,initial:!D.current||n?void 0:!1,custom:r,presenceAffectsLayout:d,mode:m,root:b,onExitComplete:W?void 0:Q,anchorX:p,children:O},k)})})},Hv=y.createContext({strict:!1}),xy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cc={};for(const s in xy)cc[s]={isEnabled:r=>xy[s].some(n=>!!r[n])};function qC(s){for(const r in s)cc[r]={...cc[r],...s[r]}}const HC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sm(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||HC.has(s)}let Gv=s=>!Sm(s);function GC(s){typeof s=="function"&&(Gv=r=>r.startsWith("on")?!Sm(r):s(r))}try{GC(require("@emotion/is-prop-valid").default)}catch{}function QC(s,r,n){const l={};for(const d in s)d==="values"&&typeof s.values=="object"||(Gv(d)||n===!0&&Sm(d)||!r&&!Sm(d)||s.draggable&&d.startsWith("onDrag"))&&(l[d]=s[d]);return l}const Rm=y.createContext({});function Mm(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function Rd(s){return typeof s=="string"||Array.isArray(s)}const nx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lx=["initial",...nx];function _m(s){return Mm(s.animate)||lx.some(r=>Rd(s[r]))}function Qv(s){return!!(_m(s)||s.variants)}function YC(s,r){if(_m(s)){const{initial:n,animate:l}=s;return{initial:n===!1||Rd(n)?n:void 0,animate:Rd(l)?l:void 0}}return s.inherit!==!1?r:{}}function WC(s){const{initial:r,animate:n}=YC(s,y.useContext(Rm));return y.useMemo(()=>({initial:r,animate:n}),[gy(r),gy(n)])}function gy(s){return Array.isArray(s)?s.join(" "):s}function by(s,r){return r.max===r.min?0:s/(r.max-r.min)*100}const cd={correct:(s,r)=>{if(!r.target)return s;if(typeof s=="string")if(ss.test(s))s=parseFloat(s);else return s;const n=by(s,r.target.x),l=by(s,r.target.y);return`${n}% ${l}%`}},ZC={correct:(s,{treeScale:r,projectionDelta:n})=>{const l=s,d=Ul.parse(s);if(d.length>5)return l;const m=Ul.createTransformer(s),u=typeof d[0]!="number"?1:0,p=n.x.scale*r.x,b=n.y.scale*r.y;d[0+u]/=p,d[1+u]/=b;const f=Aa(p,b,.5);return typeof d[2+u]=="number"&&(d[2+u]/=f),typeof d[3+u]=="number"&&(d[3+u]/=f),m(d)}},uh={borderRadius:{...cd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cd,borderTopRightRadius:cd,borderBottomLeftRadius:cd,borderBottomRightRadius:cd,boxShadow:ZC};function Yv(s,{layout:r,layoutId:n}){return mc.has(s)||s.startsWith("origin")||(r||n!==void 0)&&(!!uh[s]||s==="opacity")}const JC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KC=uc.length;function XC(s,r,n){let l="",d=!0;for(let m=0;m<KC;m++){const u=uc[m],p=s[u];if(p===void 0)continue;let b=!0;if(typeof p=="number"?b=p===(u.startsWith("scale")?1:0):b=parseFloat(p)===0,!b||n){const f=$v(p,sx[u]);if(!b){d=!1;const j=JC[u]||u;l+=`${j}(${f}) `}n&&(r[u]=f)}}return l=l.trim(),n?l=n(r,d?"":l):d&&(l="none"),l}function ox(s,r,n){const{style:l,vars:d,transformOrigin:m}=s;let u=!1,p=!1;for(const b in r){const f=r[b];if(mc.has(b)){u=!0;continue}else if(hv(b)){d[b]=f;continue}else{const j=$v(f,sx[b]);b.startsWith("origin")?(p=!0,m[b]=j):l[b]=j}}if(r.transform||(u||n?l.transform=XC(r,s.transform,n):l.transform&&(l.transform="none")),p){const{originX:b="50%",originY:f="50%",originZ:j=0}=m;l.transformOrigin=`${b} ${f} ${j}`}}const cx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Wv(s,r,n){for(const l in r)!xr(r[l])&&!Yv(l,n)&&(s[l]=r[l])}function eA({transformTemplate:s},r){return y.useMemo(()=>{const n=cx();return ox(n,r,s),Object.assign({},n.vars,n.style)},[r])}function tA(s,r){const n=s.style||{},l={};return Wv(l,n,s),Object.assign(l,eA(s,r)),l}function sA(s,r){const n={},l=tA(s,r);return s.drag&&s.dragListener!==!1&&(n.draggable=!1,l.userSelect=l.WebkitUserSelect=l.WebkitTouchCallout="none",l.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(n.tabIndex=0),n.style=l,n}const aA={offset:"stroke-dashoffset",array:"stroke-dasharray"},rA={offset:"strokeDashoffset",array:"strokeDasharray"};function iA(s,r,n=1,l=0,d=!0){s.pathLength=1;const m=d?aA:rA;s[m.offset]=ss.transform(-l);const u=ss.transform(r),p=ss.transform(n);s[m.array]=`${u} ${p}`}function Zv(s,{attrX:r,attrY:n,attrScale:l,pathLength:d,pathSpacing:m=1,pathOffset:u=0,...p},b,f,j){if(ox(s,p,f),b){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:v,style:w}=s;v.transform&&(w.transform=v.transform,delete v.transform),(w.transform||v.transformOrigin)&&(w.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),w.transform&&(w.transformBox=(j==null?void 0:j.transformBox)??"fill-box",delete v.transformBox),r!==void 0&&(v.x=r),n!==void 0&&(v.y=n),l!==void 0&&(v.scale=l),d!==void 0&&iA(v,d,m,u,!1)}const Jv=()=>({...cx(),attrs:{}}),Kv=s=>typeof s=="string"&&s.toLowerCase()==="svg";function nA(s,r,n,l){const d=y.useMemo(()=>{const m=Jv();return Zv(m,r,Kv(l),s.transformTemplate,s.style),{...m.attrs,style:{...m.style}}},[r]);if(s.style){const m={};Wv(m,s.style,s),d.style={...m,...d.style}}return d}const lA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dx(s){return typeof s!="string"||s.includes("-")?!1:!!(lA.indexOf(s)>-1||/[A-Z]/u.test(s))}function oA(s,r,n,{latestValues:l},d,m=!1){const p=(dx(s)?nA:sA)(r,l,d,s),b=QC(r,typeof s=="string",m),f=s!==y.Fragment?{...b,...p,ref:n}:{},{children:j}=r,v=y.useMemo(()=>xr(j)?j.get():j,[j]);return y.createElement(s,{...f,children:v})}function yy(s){const r=[{},{}];return s==null||s.values.forEach((n,l)=>{r[0][l]=n.get(),r[1][l]=n.getVelocity()}),r}function ux(s,r,n,l){if(typeof r=="function"){const[d,m]=yy(l);r=r(n!==void 0?n:s.custom,d,m)}if(typeof r=="string"&&(r=s.variants&&s.variants[r]),typeof r=="function"){const[d,m]=yy(l);r=r(n!==void 0?n:s.custom,d,m)}return r}function xm(s){return xr(s)?s.get():s}function cA({scrapeMotionValuesFromProps:s,createRenderState:r},n,l,d){return{latestValues:dA(n,l,d,s),renderState:r()}}function dA(s,r,n,l){const d={},m=l(s,{});for(const w in m)d[w]=xm(m[w]);let{initial:u,animate:p}=s;const b=_m(s),f=Qv(s);r&&f&&!b&&s.inherit!==!1&&(u===void 0&&(u=r.initial),p===void 0&&(p=r.animate));let j=n?n.initial===!1:!1;j=j||u===!1;const v=j?p:u;if(v&&typeof v!="boolean"&&!Mm(v)){const w=Array.isArray(v)?v:[v];for(let D=0;D<w.length;D++){const P=ux(s,w[D]);if(P){const{transitionEnd:T,transition:$,...L}=P;for(const M in L){let B=L[M];if(Array.isArray(B)){const ce=j?B.length-1:0;B=B[ce]}B!==null&&(d[M]=B)}for(const M in T)d[M]=T[M]}}}return d}const Xv=s=>(r,n)=>{const l=y.useContext(Rm),d=y.useContext(Om),m=()=>cA(s,r,l,d);return n?m():Lh(m)};function mx(s,r,n){var m;const{style:l}=s,d={};for(const u in l)(xr(l[u])||r.style&&xr(r.style[u])||Yv(u,s)||((m=n==null?void 0:n.getValue(u))==null?void 0:m.liveStyle)!==void 0)&&(d[u]=l[u]);return d}const uA=Xv({scrapeMotionValuesFromProps:mx,createRenderState:cx});function eN(s,r,n){const l=mx(s,r,n);for(const d in s)if(xr(s[d])||xr(r[d])){const m=uc.indexOf(d)!==-1?"attr"+d.charAt(0).toUpperCase()+d.substring(1):d;l[m]=s[d]}return l}const mA=Xv({scrapeMotionValuesFromProps:eN,createRenderState:Jv}),fA=Symbol.for("motionComponentSymbol");function Xo(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function pA(s,r,n){return y.useCallback(l=>{l&&s.onMount&&s.onMount(l),r&&(l?r.mount(l):r.unmount()),n&&(typeof n=="function"?n(l):Xo(n)&&(n.current=l))},[r])}const fx=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hA="framerAppearId",tN="data-"+fx(hA),sN=y.createContext({});function xA(s,r,n,l,d){var T,$;const{visualElement:m}=y.useContext(Rm),u=y.useContext(Hv),p=y.useContext(Om),b=y.useContext(ix).reducedMotion,f=y.useRef(null);l=l||u.renderer,!f.current&&l&&(f.current=l(s,{visualState:r,parent:m,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:b}));const j=f.current,v=y.useContext(sN);j&&!j.projection&&d&&(j.type==="html"||j.type==="svg")&&gA(f.current,n,d,v);const w=y.useRef(!1);y.useInsertionEffect(()=>{j&&w.current&&j.update(n,p)});const D=n[tN],P=y.useRef(!!D&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,D))&&(($=window.MotionHasOptimisedAnimation)==null?void 0:$.call(window,D)));return Kj(()=>{j&&(w.current=!0,window.MotionIsMounted=!0,j.updateFeatures(),j.scheduleRenderMicrotask(),P.current&&j.animationState&&j.animationState.animateChanges())}),y.useEffect(()=>{j&&(!P.current&&j.animationState&&j.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)==null||L.call(window,D)}),P.current=!1),j.enteringChildren=void 0)}),j}function gA(s,r,n,l){const{layoutId:d,layout:m,drag:u,dragConstraints:p,layoutScroll:b,layoutRoot:f,layoutCrossfade:j}=r;s.projection=new n(s.latestValues,r["data-framer-portal-id"]?void 0:aN(s.parent)),s.projection.setOptions({layoutId:d,layout:m,alwaysMeasureLayout:!!u||p&&Xo(p),visualElement:s,animationType:typeof m=="string"?m:"both",initialPromotionConfig:l,crossfade:j,layoutScroll:b,layoutRoot:f})}function aN(s){if(s)return s.options.allowProjection!==!1?s.projection:aN(s.parent)}function zp(s,{forwardMotionProps:r=!1}={},n,l){n&&qC(n);const d=dx(s)?mA:uA;function m(p,b){let f;const j={...y.useContext(ix),...p,layoutId:bA(p)},{isStatic:v}=j,w=WC(p),D=d(p,v);if(!v&&$h){yA();const P=jA(j);f=P.MeasureLayout,w.visualElement=xA(s,D,j,l,P.ProjectionNode)}return e.jsxs(Rm.Provider,{value:w,children:[f&&w.visualElement?e.jsx(f,{visualElement:w.visualElement,...j}):null,oA(s,p,pA(D,w.visualElement,b),D,v,r)]})}m.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const u=y.forwardRef(m);return u[fA]=s,u}function bA({layoutId:s}){const r=y.useContext(zh).id;return r&&s!==void 0?r+"-"+s:s}function yA(s,r){y.useContext(Hv).strict}function jA(s){const{drag:r,layout:n}=cc;if(!r&&!n)return{};const l={...r,...n};return{MeasureLayout:r!=null&&r.isEnabled(s)||n!=null&&n.isEnabled(s)?l.MeasureLayout:void 0,ProjectionNode:l.ProjectionNode}}function vA(s,r){if(typeof Proxy>"u")return zp;const n=new Map,l=(m,u)=>zp(m,u,s,r),d=(m,u)=>l(m,u);return new Proxy(d,{get:(m,u)=>u==="create"?l:(n.has(u)||n.set(u,zp(u,void 0,s,r)),n.get(u))})}function rN({top:s,left:r,right:n,bottom:l}){return{x:{min:r,max:n},y:{min:s,max:l}}}function NA({x:s,y:r}){return{top:r.min,right:s.max,bottom:r.max,left:s.min}}function wA(s,r){if(!r)return s;const n=r({x:s.left,y:s.top}),l=r({x:s.right,y:s.bottom});return{top:n.y,left:n.x,bottom:l.y,right:l.x}}function Lp(s){return s===void 0||s===1}function mh({scale:s,scaleX:r,scaleY:n}){return!Lp(s)||!Lp(r)||!Lp(n)}function io(s){return mh(s)||iN(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function iN(s){return jy(s.x)||jy(s.y)}function jy(s){return s&&s!=="0%"}function Cm(s,r,n){const l=s-n,d=r*l;return n+d}function vy(s,r,n,l,d){return d!==void 0&&(s=Cm(s,d,l)),Cm(s,n,l)+r}function fh(s,r=0,n=1,l,d){s.min=vy(s.min,r,n,l,d),s.max=vy(s.max,r,n,l,d)}function nN(s,{x:r,y:n}){fh(s.x,r.translate,r.scale,r.originPoint),fh(s.y,n.translate,n.scale,n.originPoint)}const Ny=.999999999999,wy=1.0000000000001;function SA(s,r,n,l=!1){const d=n.length;if(!d)return;r.x=r.y=1;let m,u;for(let p=0;p<d;p++){m=n[p],u=m.projectionDelta;const{visualElement:b}=m.options;b&&b.props.style&&b.props.style.display==="contents"||(l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&tc(s,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),u&&(r.x*=u.x.scale,r.y*=u.y.scale,nN(s,u)),l&&io(m.latestValues)&&tc(s,m.latestValues))}r.x<wy&&r.x>Ny&&(r.x=1),r.y<wy&&r.y>Ny&&(r.y=1)}function ec(s,r){s.min=s.min+r,s.max=s.max+r}function Sy(s,r,n,l,d=.5){const m=Aa(s.min,s.max,d);fh(s,r,n,m,l)}function tc(s,r){Sy(s.x,r.x,r.scaleX,r.scale,r.originX),Sy(s.y,r.y,r.scaleY,r.scale,r.originY)}function lN(s,r){return rN(wA(s.getBoundingClientRect(),r))}function CA(s,r,n){const l=lN(s,n),{scroll:d}=r;return d&&(ec(l.x,d.offset.x),ec(l.y,d.offset.y)),l}const Cy=()=>({translate:0,scale:1,origin:0,originPoint:0}),sc=()=>({x:Cy(),y:Cy()}),Ay=()=>({min:0,max:0}),Wa=()=>({x:Ay(),y:Ay()}),ph={current:null},oN={current:!1};function AA(){if(oN.current=!0,!!$h)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),r=()=>ph.current=s.matches;s.addEventListener("change",r),r()}else ph.current=!1}const EA=new WeakMap;function TA(s,r,n){for(const l in r){const d=r[l],m=n[l];if(xr(d))s.addValue(l,d);else if(xr(m))s.addValue(l,oc(d,{owner:s}));else if(m!==d)if(s.hasValue(l)){const u=s.getValue(l);u.liveStyle===!0?u.jump(d):u.hasAnimated||u.set(d)}else{const u=s.getStaticValue(l);s.addValue(l,oc(u!==void 0?u:d,{owner:s}))}}for(const l in n)r[l]===void 0&&s.removeValue(l);return r}const Ey=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kA{scrapeMotionValuesFromProps(r,n,l){return{}}constructor({parent:r,props:n,presenceContext:l,reducedMotionConfig:d,blockInitialAnimation:m,visualState:u},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ex,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Qr.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,Sa.render(this.render,!1,!0))};const{latestValues:b,renderState:f}=u;this.latestValues=b,this.baseTarget={...b},this.initialValues=n.initial?{...b}:{},this.renderState=f,this.parent=r,this.props=n,this.presenceContext=l,this.depth=r?r.depth+1:0,this.reducedMotionConfig=d,this.options=p,this.blockInitialAnimation=!!m,this.isControllingVariants=_m(n),this.isVariantNode=Qv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:j,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in v){const D=v[w];b[w]!==void 0&&xr(D)&&D.set(b[w])}}mount(r){var n;this.current=r,EA.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((l,d)=>this.bindToMotionValue(d,l)),oN.current||AA(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ph.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var r;this.projection&&this.projection.unmount(),Fl(this.notifyUpdate),Fl(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(r=this.parent)==null||r.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const l=this.features[n];l&&(l.unmount(),l.isMounted=!1)}this.current=null}addChild(r){this.children.add(r),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(r)}removeChild(r){this.children.delete(r),this.enteringChildren&&this.enteringChildren.delete(r)}bindToMotionValue(r,n){this.valueSubscriptions.has(r)&&this.valueSubscriptions.get(r)();const l=mc.has(r);l&&this.onBindTransform&&this.onBindTransform();const d=n.on("change",u=>{this.latestValues[r]=u,this.props.onUpdate&&Sa.preRender(this.notifyUpdate),l&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let m;window.MotionCheckAppearSync&&(m=window.MotionCheckAppearSync(this,r,n)),this.valueSubscriptions.set(r,()=>{d(),m&&m(),n.owner&&n.stop()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}updateFeatures(){let r="animation";for(r in cc){const n=cc[r];if(!n)continue;const{isEnabled:l,Feature:d}=n;if(!this.features[r]&&d&&l(this.props)&&(this.features[r]=new d(this)),this.features[r]){const m=this.features[r];m.isMounted?m.update():(m.mount(),m.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Wa()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,n){this.latestValues[r]=n}update(r,n){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let l=0;l<Ey.length;l++){const d=Ey[l];this.propEventSubscriptions[d]&&(this.propEventSubscriptions[d](),delete this.propEventSubscriptions[d]);const m="on"+d,u=r[m];u&&(this.propEventSubscriptions[d]=this.on(d,u))}this.prevMotionValues=TA(this,this.scrapeMotionValuesFromProps(r,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(r){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(r),()=>n.variantChildren.delete(r)}addValue(r,n){const l=this.values.get(r);n!==l&&(l&&this.removeValue(r),this.bindToMotionValue(r,n),this.values.set(r,n),this.latestValues[r]=n.get())}removeValue(r){this.values.delete(r);const n=this.valueSubscriptions.get(r);n&&(n(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,n){if(this.props.values&&this.props.values[r])return this.props.values[r];let l=this.values.get(r);return l===void 0&&n!==void 0&&(l=oc(n===null?void 0:n,{owner:this}),this.addValue(r,l)),l}readValue(r,n){let l=this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:this.getBaseTargetFromProps(this.props,r)??this.readValueFromInstance(this.current,r,this.options);return l!=null&&(typeof l=="string"&&(Xj(l)||tv(l))?l=parseFloat(l):!LC(l)&&Ul.test(n)&&(l=Lv(r,n)),this.setBaseTarget(r,xr(l)?l.get():l)),xr(l)?l.get():l}setBaseTarget(r,n){this.baseTarget[r]=n}getBaseTarget(r){var m;const{initial:n}=this.props;let l;if(typeof n=="string"||typeof n=="object"){const u=ux(this.props,n,(m=this.presenceContext)==null?void 0:m.custom);u&&(l=u[r])}if(n&&l!==void 0)return l;const d=this.getBaseTargetFromProps(this.props,r);return d!==void 0&&!xr(d)?d:this.initialValues[r]!==void 0&&l===void 0?void 0:this.baseTarget[r]}on(r,n){return this.events[r]||(this.events[r]=new Bh),this.events[r].add(n)}notify(r,...n){this.events[r]&&this.events[r].notify(...n)}scheduleRenderMicrotask(){ax.render(this.render)}}class cN extends kA{constructor(){super(...arguments),this.KeyframeResolver=CC}sortInstanceNodePosition(r,n){return r.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(r,n){return r.style?r.style[n]:void 0}removeValueFromRenderState(r,{vars:n,style:l}){delete n[r],delete l[r]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;xr(r)&&(this.childSubscription=r.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function dN(s,{style:r,vars:n},l,d){const m=s.style;let u;for(u in r)m[u]=r[u];d==null||d.applyProjectionStyles(m,l);for(u in n)m.setProperty(u,n[u])}function DA(s){return window.getComputedStyle(s)}class PA extends cN{constructor(){super(...arguments),this.type="html",this.renderInstance=dN}readValueFromInstance(r,n){var l;if(mc.has(n))return(l=this.projection)!=null&&l.isProjecting?rh(n):q5(r,n);{const d=DA(r),m=(hv(n)?d.getPropertyValue(n):d[n])||0;return typeof m=="string"?m.trim():m}}measureInstanceViewportBox(r,{transformPagePoint:n}){return lN(r,n)}build(r,n,l){ox(r,n,l.transformTemplate)}scrapeMotionValuesFromProps(r,n,l){return mx(r,n,l)}}const uN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function OA(s,r,n,l){dN(s,r,void 0,l);for(const d in r.attrs)s.setAttribute(uN.has(d)?d:fx(d),r.attrs[d])}class RA extends cN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Wa}getBaseTargetFromProps(r,n){return r[n]}readValueFromInstance(r,n){if(mc.has(n)){const l=zv(n);return l&&l.default||0}return n=uN.has(n)?n:fx(n),r.getAttribute(n)}scrapeMotionValuesFromProps(r,n,l){return eN(r,n,l)}build(r,n,l){Zv(r,n,this.isSVGTag,l.transformTemplate,l.style)}renderInstance(r,n,l,d){OA(r,n,l,d)}mount(r){this.isSVGTag=Kv(r.tagName),super.mount(r)}}const MA=(s,r)=>dx(s)?new RA(r):new PA(r,{allowProjection:s!==y.Fragment});function rc(s,r,n){const l=s.getProps();return ux(l,r,n!==void 0?n:l.custom,s)}const hh=s=>Array.isArray(s);function _A(s,r,n){s.hasValue(r)?s.getValue(r).set(n):s.addValue(r,oc(n))}function zA(s){return hh(s)?s[s.length-1]||0:s}function LA(s,r){const n=rc(s,r);let{transitionEnd:l={},transition:d={},...m}=n||{};m={...m,...l};for(const u in m){const p=zA(m[u]);_A(s,u,p)}}function $A(s){return!!(xr(s)&&s.add)}function xh(s,r){const n=s.getValue("willChange");if($A(n))return n.add(r);if(!n&&el.WillChange){const l=new el.WillChange("auto");s.addValue("willChange",l),l.add(r)}}function mN(s){return s.props[tN]}const FA=s=>s!==null;function UA(s,{repeat:r,repeatType:n="loop"},l){const d=s.filter(FA),m=r&&n!=="loop"&&r%2===1?0:d.length-1;return d[m]}const IA={type:"spring",stiffness:500,damping:25,restSpeed:10},VA=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),BA={type:"keyframes",duration:.8},qA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HA=(s,{keyframes:r})=>r.length>2?BA:mc.has(s)?s.startsWith("scale")?VA(r[1]):IA:qA;function GA({when:s,delay:r,delayChildren:n,staggerChildren:l,staggerDirection:d,repeat:m,repeatType:u,repeatDelay:p,from:b,elapsed:f,...j}){return!!Object.keys(j).length}const px=(s,r,n,l={},d,m)=>u=>{const p=tx(l,s)||{},b=p.delay||l.delay||0;let{elapsed:f=0}=l;f=f-vn(b);const j={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:r.getVelocity(),...p,delay:-f,onUpdate:w=>{r.set(w),p.onUpdate&&p.onUpdate(w)},onComplete:()=>{u(),p.onComplete&&p.onComplete()},name:s,motionValue:r,element:m?void 0:d};GA(p)||Object.assign(j,HA(s,j)),j.duration&&(j.duration=vn(j.duration)),j.repeatDelay&&(j.repeatDelay=vn(j.repeatDelay)),j.from!==void 0&&(j.keyframes[0]=j.from);let v=!1;if((j.type===!1||j.duration===0&&!j.repeatDelay)&&(ch(j),j.delay===0&&(v=!0)),(el.instantAnimations||el.skipAnimations)&&(v=!0,ch(j),j.delay=0),j.allowFlatten=!p.type&&!p.ease,v&&!m&&r.get()!==void 0){const w=UA(j.keyframes,p);if(w!==void 0){Sa.update(()=>{j.onUpdate(w),j.onComplete()});return}}return p.isSync?new Xh(j):new fC(j)};function QA({protectedKeys:s,needsAnimating:r},n){const l=s.hasOwnProperty(n)&&r[n]!==!0;return r[n]=!1,l}function fN(s,r,{delay:n=0,transitionOverride:l,type:d}={}){let{transition:m=s.getDefaultTransition(),transitionEnd:u,...p}=r;l&&(m=l);const b=[],f=d&&s.animationState&&s.animationState.getState()[d];for(const j in p){const v=s.getValue(j,s.latestValues[j]??null),w=p[j];if(w===void 0||f&&QA(f,j))continue;const D={delay:n,...tx(m||{},j)},P=v.get();if(P!==void 0&&!v.isAnimating&&!Array.isArray(w)&&w===P&&!D.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const L=mN(s);if(L){const M=window.MotionHandoffAnimation(L,j,Sa);M!==null&&(D.startTime=M,T=!0)}}xh(s,j),v.start(px(j,v,w,s.shouldReduceMotion&&Rv.has(j)?{type:!1}:D,s,T));const $=v.animation;$&&b.push($)}return u&&Promise.all(b).then(()=>{Sa.update(()=>{u&&LA(s,u)})}),b}function pN(s,r,n,l=0,d=1){const m=Array.from(s).sort((f,j)=>f.sortNodePosition(j)).indexOf(r),u=s.size,p=(u-1)*l;return typeof n=="function"?n(m,u):d===1?m*l:p-m*l}function gh(s,r,n={}){var b;const l=rc(s,r,n.type==="exit"?(b=s.presenceContext)==null?void 0:b.custom:void 0);let{transition:d=s.getDefaultTransition()||{}}=l||{};n.transitionOverride&&(d=n.transitionOverride);const m=l?()=>Promise.all(fN(s,l,n)):()=>Promise.resolve(),u=s.variantChildren&&s.variantChildren.size?(f=0)=>{const{delayChildren:j=0,staggerChildren:v,staggerDirection:w}=d;return YA(s,r,f,j,v,w,n)}:()=>Promise.resolve(),{when:p}=d;if(p){const[f,j]=p==="beforeChildren"?[m,u]:[u,m];return f().then(()=>j())}else return Promise.all([m(),u(n.delay)])}function YA(s,r,n=0,l=0,d=0,m=1,u){const p=[];for(const b of s.variantChildren)b.notify("AnimationStart",r),p.push(gh(b,r,{...u,delay:n+(typeof l=="function"?0:l)+pN(s.variantChildren,b,l,d,m)}).then(()=>b.notify("AnimationComplete",r)));return Promise.all(p)}function WA(s,r,n={}){s.notify("AnimationStart",r);let l;if(Array.isArray(r)){const d=r.map(m=>gh(s,m,n));l=Promise.all(d)}else if(typeof r=="string")l=gh(s,r,n);else{const d=typeof r=="function"?rc(s,r,n.custom):r;l=Promise.all(fN(s,d,n))}return l.then(()=>{s.notify("AnimationComplete",r)})}function hN(s,r){if(!Array.isArray(r))return!1;const n=r.length;if(n!==s.length)return!1;for(let l=0;l<n;l++)if(r[l]!==s[l])return!1;return!0}const ZA=lx.length;function xN(s){if(!s)return;if(!s.isControllingVariants){const n=s.parent?xN(s.parent)||{}:{};return s.props.initial!==void 0&&(n.initial=s.props.initial),n}const r={};for(let n=0;n<ZA;n++){const l=lx[n],d=s.props[l];(Rd(d)||d===!1)&&(r[l]=d)}return r}const JA=[...nx].reverse(),KA=nx.length;function XA(s){return r=>Promise.all(r.map(({animation:n,options:l})=>WA(s,n,l)))}function e6(s){let r=XA(s),n=Ty(),l=!0;const d=b=>(f,j)=>{var w;const v=rc(s,j,b==="exit"?(w=s.presenceContext)==null?void 0:w.custom:void 0);if(v){const{transition:D,transitionEnd:P,...T}=v;f={...f,...T,...P}}return f};function m(b){r=b(s)}function u(b){const{props:f}=s,j=xN(s.parent)||{},v=[],w=new Set;let D={},P=1/0;for(let $=0;$<KA;$++){const L=JA[$],M=n[L],B=f[L]!==void 0?f[L]:j[L],ce=Rd(B),U=L===b?M.isActive:null;U===!1&&(P=$);let O=B===j[L]&&B!==f[L]&&ce;if(O&&l&&s.manuallyAnimateOnMount&&(O=!1),M.protectedKeys={...D},!M.isActive&&U===null||!B&&!M.prevProp||Mm(B)||typeof B=="boolean")continue;const k=t6(M.prevProp,B);let W=k||L===b&&M.isActive&&!O&&ce||$>P&&ce,Q=!1;const ne=Array.isArray(B)?B:[B];let le=ne.reduce(d(L),{});U===!1&&(le={});const{prevResolvedValues:me={}}=M,Ve={...me,...le},F=K=>{W=!0,w.has(K)&&(Q=!0,w.delete(K)),M.needsAnimating[K]=!0;const q=s.getValue(K);q&&(q.liveStyle=!1)};for(const K in Ve){const q=le[K],de=me[K];if(D.hasOwnProperty(K))continue;let Ce=!1;hh(q)&&hh(de)?Ce=!hN(q,de):Ce=q!==de,Ce?q!=null?F(K):w.add(K):q!==void 0&&w.has(K)?F(K):M.protectedKeys[K]=!0}M.prevProp=B,M.prevResolvedValues=le,M.isActive&&(D={...D,...le}),l&&s.blockInitialAnimation&&(W=!1);const J=O&&k;W&&(!J||Q)&&v.push(...ne.map(K=>{const q={type:L};if(typeof K=="string"&&l&&!J&&s.manuallyAnimateOnMount&&s.parent){const{parent:de}=s,Ce=rc(de,K);if(de.enteringChildren&&Ce){const{delayChildren:A}=Ce.transition||{};q.delay=pN(de.enteringChildren,s,A)}}return{animation:K,options:q}}))}if(w.size){const $={};if(typeof f.initial!="boolean"){const L=rc(s,Array.isArray(f.initial)?f.initial[0]:f.initial);L&&L.transition&&($.transition=L.transition)}w.forEach(L=>{const M=s.getBaseTarget(L),B=s.getValue(L);B&&(B.liveStyle=!0),$[L]=M??null}),v.push({animation:$})}let T=!!v.length;return l&&(f.initial===!1||f.initial===f.animate)&&!s.manuallyAnimateOnMount&&(T=!1),l=!1,T?r(v):Promise.resolve()}function p(b,f){var v;if(n[b].isActive===f)return Promise.resolve();(v=s.variantChildren)==null||v.forEach(w=>{var D;return(D=w.animationState)==null?void 0:D.setActive(b,f)}),n[b].isActive=f;const j=u(b);for(const w in n)n[w].protectedKeys={};return j}return{animateChanges:u,setActive:p,setAnimateFunction:m,getState:()=>n,reset:()=>{n=Ty()}}}function t6(s,r){return typeof r=="string"?r!==s:Array.isArray(r)?!hN(r,s):!1}function ro(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ty(){return{animate:ro(!0),whileInView:ro(),whileHover:ro(),whileTap:ro(),whileDrag:ro(),whileFocus:ro(),exit:ro()}}class Vl{constructor(r){this.isMounted=!1,this.node=r}update(){}}class s6 extends Vl{constructor(r){super(r),r.animationState||(r.animationState=e6(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();Mm(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:n}=this.node.prevProps||{};r!==n&&this.updateAnimationControlsSubscription()}unmount(){var r;this.node.animationState.reset(),(r=this.unmountControls)==null||r.call(this)}}let a6=0;class r6 extends Vl{constructor(){super(...arguments),this.id=a6++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:n}=this.node.presenceContext,{isPresent:l}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===l)return;const d=this.node.animationState.setActive("exit",!r);n&&!r&&d.then(()=>{n(this.id)})}mount(){const{register:r,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),r&&(this.unmount=r(this.id))}unmount(){}}const i6={animation:{Feature:s6},exit:{Feature:r6}};function Md(s,r,n,l={passive:!0}){return s.addEventListener(r,n,l),()=>s.removeEventListener(r,n)}function qd(s){return{point:{x:s.pageX,y:s.pageY}}}const n6=s=>r=>rx(r)&&s(r,qd(r));function jd(s,r,n,l){return Md(s,r,n6(n),l)}const gN=1e-4,l6=1-gN,o6=1+gN,bN=.01,c6=0-bN,d6=0+bN;function Tr(s){return s.max-s.min}function u6(s,r,n){return Math.abs(s-r)<=n}function ky(s,r,n,l=.5){s.origin=l,s.originPoint=Aa(r.min,r.max,s.origin),s.scale=Tr(n)/Tr(r),s.translate=Aa(n.min,n.max,s.origin)-s.originPoint,(s.scale>=l6&&s.scale<=o6||isNaN(s.scale))&&(s.scale=1),(s.translate>=c6&&s.translate<=d6||isNaN(s.translate))&&(s.translate=0)}function vd(s,r,n,l){ky(s.x,r.x,n.x,l?l.originX:void 0),ky(s.y,r.y,n.y,l?l.originY:void 0)}function Dy(s,r,n){s.min=n.min+r.min,s.max=s.min+Tr(r)}function m6(s,r,n){Dy(s.x,r.x,n.x),Dy(s.y,r.y,n.y)}function Py(s,r,n){s.min=r.min-n.min,s.max=s.min+Tr(r)}function Am(s,r,n){Py(s.x,r.x,n.x),Py(s.y,r.y,n.y)}function Ei(s){return[s("x"),s("y")]}const yN=({current:s})=>s?s.ownerDocument.defaultView:null,Oy=(s,r)=>Math.abs(s-r);function f6(s,r){const n=Oy(s.x,r.x),l=Oy(s.y,r.y);return Math.sqrt(n**2+l**2)}class jN{constructor(r,n,{transformPagePoint:l,contextWindow:d=window,dragSnapToOrigin:m=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Fp(this.lastMoveEventInfo,this.history),D=this.startEvent!==null,P=f6(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!D&&!P)return;const{point:T}=w,{timestamp:$}=ur;this.history.push({...T,timestamp:$});const{onStart:L,onMove:M}=this.handlers;D||(L&&L(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,w)},this.handlePointerMove=(w,D)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=$p(D,this.transformPagePoint),Sa.update(this.updatePoint,!0)},this.handlePointerUp=(w,D)=>{this.end();const{onEnd:P,onSessionEnd:T,resumeAnimation:$}=this.handlers;if(this.dragSnapToOrigin&&$&&$(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=Fp(w.type==="pointercancel"?this.lastMoveEventInfo:$p(D,this.transformPagePoint),this.history);this.startEvent&&P&&P(w,L),T&&T(w,L)},!rx(r))return;this.dragSnapToOrigin=m,this.handlers=n,this.transformPagePoint=l,this.distanceThreshold=u,this.contextWindow=d||window;const p=qd(r),b=$p(p,this.transformPagePoint),{point:f}=b,{timestamp:j}=ur;this.history=[{...f,timestamp:j}];const{onSessionStart:v}=n;v&&v(r,Fp(b,this.history)),this.removeListeners=Id(jd(this.contextWindow,"pointermove",this.handlePointerMove),jd(this.contextWindow,"pointerup",this.handlePointerUp),jd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),Fl(this.updatePoint)}}function $p(s,r){return r?{point:r(s.point)}:s}function Ry(s,r){return{x:s.x-r.x,y:s.y-r.y}}function Fp({point:s},r){return{point:s,delta:Ry(s,vN(r)),offset:Ry(s,p6(r)),velocity:h6(r,.1)}}function p6(s){return s[0]}function vN(s){return s[s.length-1]}function h6(s,r){if(s.length<2)return{x:0,y:0};let n=s.length-1,l=null;const d=vN(s);for(;n>=0&&(l=s[n],!(d.timestamp-l.timestamp>vn(r)));)n--;if(!l)return{x:0,y:0};const m=Di(d.timestamp-l.timestamp);if(m===0)return{x:0,y:0};const u={x:(d.x-l.x)/m,y:(d.y-l.y)/m};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function x6(s,{min:r,max:n},l){return r!==void 0&&s<r?s=l?Aa(r,s,l.min):Math.max(s,r):n!==void 0&&s>n&&(s=l?Aa(n,s,l.max):Math.min(s,n)),s}function My(s,r,n){return{min:r!==void 0?s.min+r:void 0,max:n!==void 0?s.max+n-(s.max-s.min):void 0}}function g6(s,{top:r,left:n,bottom:l,right:d}){return{x:My(s.x,n,d),y:My(s.y,r,l)}}function _y(s,r){let n=r.min-s.min,l=r.max-s.max;return r.max-r.min<s.max-s.min&&([n,l]=[l,n]),{min:n,max:l}}function b6(s,r){return{x:_y(s.x,r.x),y:_y(s.y,r.y)}}function y6(s,r){let n=.5;const l=Tr(s),d=Tr(r);return d>l?n=Dd(r.min,r.max-l,s.min):l>d&&(n=Dd(s.min,s.max-d,r.min)),Xn(0,1,n)}function j6(s,r){const n={};return r.min!==void 0&&(n.min=r.min-s.min),r.max!==void 0&&(n.max=r.max-s.min),n}const bh=.35;function v6(s=bh){return s===!1?s=0:s===!0&&(s=bh),{x:zy(s,"left","right"),y:zy(s,"top","bottom")}}function zy(s,r,n){return{min:Ly(s,r),max:Ly(s,n)}}function Ly(s,r){return typeof s=="number"?s:s[r]||0}const N6=new WeakMap;class w6{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Wa(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=r}start(r,{snapToCursor:n=!1,distanceThreshold:l}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const m=v=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qd(v).point)},u=(v,w)=>{const{drag:D,dragPropagation:P,onDragStart:T}=this.getProps();if(D&&!P&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kC(D),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ei(L=>{let M=this.getAxisMotionValue(L).get()||0;if(Nn.test(M)){const{projection:B}=this.visualElement;if(B&&B.layout){const ce=B.layout.layoutBox[L];ce&&(M=Tr(ce)*(parseFloat(M)/100))}}this.originPoint[L]=M}),T&&Sa.postRender(()=>T(v,w)),xh(this.visualElement,"transform");const{animationState:$}=this.visualElement;$&&$.setActive("whileDrag",!0)},p=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w;const{dragPropagation:D,dragDirectionLock:P,onDirectionLock:T,onDrag:$}=this.getProps();if(!D&&!this.openDragLock)return;const{offset:L}=w;if(P&&this.currentDirection===null){this.currentDirection=S6(L),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",w.point,L),this.updateAxis("y",w.point,L),this.visualElement.render(),$&&$(v,w)},b=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w,this.stop(v,w),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Ei(v=>{var w;return this.getAnimationState(v)==="paused"&&((w=this.getAxisMotionValue(v).animation)==null?void 0:w.play())}),{dragSnapToOrigin:j}=this.getProps();this.panSession=new jN(r,{onSessionStart:m,onStart:u,onMove:p,onSessionEnd:b,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:j,distanceThreshold:l,contextWindow:yN(this.visualElement)})}stop(r,n){const l=r||this.latestPointerEvent,d=n||this.latestPanInfo,m=this.isDragging;if(this.cancel(),!m||!d||!l)return;const{velocity:u}=d;this.startAnimation(u);const{onDragEnd:p}=this.getProps();p&&Sa.postRender(()=>p(l,d))}cancel(){this.isDragging=!1;const{projection:r,animationState:n}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:l}=this.getProps();!l&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(r,n,l){const{drag:d}=this.getProps();if(!l||!om(r,d,this.currentDirection))return;const m=this.getAxisMotionValue(r);let u=this.originPoint[r]+l[r];this.constraints&&this.constraints[r]&&(u=x6(u,this.constraints[r],this.elastic[r])),m.set(u)}resolveConstraints(){var m;const{dragConstraints:r,dragElastic:n}=this.getProps(),l=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(m=this.visualElement.projection)==null?void 0:m.layout,d=this.constraints;r&&Xo(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&l?this.constraints=g6(l.layoutBox,r):this.constraints=!1,this.elastic=v6(n),d!==this.constraints&&l&&this.constraints&&!this.hasMutatedConstraints&&Ei(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=j6(l.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:n}=this.getProps();if(!r||!Xo(r))return!1;const l=r.current,{projection:d}=this.visualElement;if(!d||!d.layout)return!1;const m=CA(l,d.root,this.visualElement.getTransformPagePoint());let u=b6(d.layout.layoutBox,m);if(n){const p=n(NA(u));this.hasMutatedConstraints=!!p,p&&(u=rN(p))}return u}startAnimation(r){const{drag:n,dragMomentum:l,dragElastic:d,dragTransition:m,dragSnapToOrigin:u,onDragTransitionEnd:p}=this.getProps(),b=this.constraints||{},f=Ei(j=>{if(!om(j,n,this.currentDirection))return;let v=b&&b[j]||{};u&&(v={min:0,max:0});const w=d?200:1e6,D=d?40:1e7,P={type:"inertia",velocity:l?r[j]:0,bounceStiffness:w,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...m,...v};return this.startAxisValueAnimation(j,P)});return Promise.all(f).then(p)}startAxisValueAnimation(r,n){const l=this.getAxisMotionValue(r);return xh(this.visualElement,r),l.start(px(r,l,0,n,this.visualElement,!1))}stopAnimation(){Ei(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){Ei(r=>{var n;return(n=this.getAxisMotionValue(r).animation)==null?void 0:n.pause()})}getAnimationState(r){var n;return(n=this.getAxisMotionValue(r).animation)==null?void 0:n.state}getAxisMotionValue(r){const n=`_drag${r.toUpperCase()}`,l=this.visualElement.getProps(),d=l[n];return d||this.visualElement.getValue(r,(l.initial?l.initial[r]:void 0)||0)}snapToCursor(r){Ei(n=>{const{drag:l}=this.getProps();if(!om(n,l,this.currentDirection))return;const{projection:d}=this.visualElement,m=this.getAxisMotionValue(n);if(d&&d.layout){const{min:u,max:p}=d.layout.layoutBox[n];m.set(r[n]-Aa(u,p,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:n}=this.getProps(),{projection:l}=this.visualElement;if(!Xo(n)||!l||!this.constraints)return;this.stopAnimation();const d={x:0,y:0};Ei(u=>{const p=this.getAxisMotionValue(u);if(p&&this.constraints!==!1){const b=p.get();d[u]=y6({min:b,max:b},this.constraints[u])}});const{transformTemplate:m}=this.visualElement.getProps();this.visualElement.current.style.transform=m?m({},""):"none",l.root&&l.root.updateScroll(),l.updateLayout(),this.resolveConstraints(),Ei(u=>{if(!om(u,r,null))return;const p=this.getAxisMotionValue(u),{min:b,max:f}=this.constraints[u];p.set(Aa(b,f,d[u]))})}addListeners(){if(!this.visualElement.current)return;N6.set(this.visualElement,this);const r=this.visualElement.current,n=jd(r,"pointerdown",b=>{const{drag:f,dragListener:j=!0}=this.getProps();f&&j&&this.start(b)}),l=()=>{const{dragConstraints:b}=this.getProps();Xo(b)&&b.current&&(this.constraints=this.resolveRefConstraints())},{projection:d}=this.visualElement,m=d.addEventListener("measure",l);d&&!d.layout&&(d.root&&d.root.updateScroll(),d.updateLayout()),Sa.read(l);const u=Md(window,"resize",()=>this.scalePositionWithinConstraints()),p=d.addEventListener("didUpdate",(({delta:b,hasLayoutChanged:f})=>{this.isDragging&&f&&(Ei(j=>{const v=this.getAxisMotionValue(j);v&&(this.originPoint[j]+=b[j].translate,v.set(v.get()+b[j].translate))}),this.visualElement.render())}));return()=>{u(),n(),m(),p&&p()}}getProps(){const r=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:l=!1,dragPropagation:d=!1,dragConstraints:m=!1,dragElastic:u=bh,dragMomentum:p=!0}=r;return{...r,drag:n,dragDirectionLock:l,dragPropagation:d,dragConstraints:m,dragElastic:u,dragMomentum:p}}}function om(s,r,n){return(r===!0||r===s)&&(n===null||n===s)}function S6(s,r=10){let n=null;return Math.abs(s.y)>r?n="y":Math.abs(s.x)>r&&(n="x"),n}class C6 extends Vl{constructor(r){super(r),this.removeGroupControls=Oi,this.removeListeners=Oi,this.controls=new w6(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Oi}unmount(){this.removeGroupControls(),this.removeListeners()}}const $y=s=>(r,n)=>{s&&Sa.postRender(()=>s(r,n))};class A6 extends Vl{constructor(){super(...arguments),this.removePointerDownListener=Oi}onPointerDown(r){this.session=new jN(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yN(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:n,onPan:l,onPanEnd:d}=this.node.getProps();return{onSessionStart:$y(r),onStart:$y(n),onMove:l,onEnd:(m,u)=>{delete this.session,d&&Sa.postRender(()=>d(m,u))}}}mount(){this.removePointerDownListener=jd(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Up=!1;class E6 extends y.Component{componentDidMount(){const{visualElement:r,layoutGroup:n,switchLayoutGroup:l,layoutId:d}=this.props,{projection:m}=r;m&&(n.group&&n.group.add(m),l&&l.register&&d&&l.register(m),Up&&m.root.didUpdate(),m.addEventListener("animationComplete",()=>{this.safeToRemove()}),m.setOptions({...m.options,onExitComplete:()=>this.safeToRemove()})),gm.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:n,visualElement:l,drag:d,isPresent:m}=this.props,{projection:u}=l;return u&&(u.isPresent=m,Up=!0,d||r.layoutDependency!==n||n===void 0||r.isPresent!==m?u.willUpdate():this.safeToRemove(),r.isPresent!==m&&(m?u.promote():u.relegate()||Sa.postRender(()=>{const p=u.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),ax.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:n,switchLayoutGroup:l}=this.props,{projection:d}=r;Up=!0,d&&(d.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(d),l&&l.deregister&&l.deregister(d))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function NN(s){const[r,n]=qv(),l=y.useContext(zh);return e.jsx(E6,{...s,layoutGroup:l,switchLayoutGroup:y.useContext(sN),isPresent:r,safeToRemove:n})}function T6(s,r,n){const l=xr(s)?s:oc(s);return l.start(px("",l,r,n)),l.animation}const k6=(s,r)=>s.depth-r.depth;class D6{constructor(){this.children=[],this.isDirty=!1}add(r){Fh(this.children,r),this.isDirty=!0}remove(r){Uh(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(k6),this.isDirty=!1,this.children.forEach(r)}}function P6(s,r){const n=Qr.now(),l=({timestamp:d})=>{const m=d-n;m>=r&&(Fl(l),s(m-r))};return Sa.setup(l,!0),()=>Fl(l)}const wN=["TopLeft","TopRight","BottomLeft","BottomRight"],O6=wN.length,Fy=s=>typeof s=="string"?parseFloat(s):s,Uy=s=>typeof s=="number"||ss.test(s);function R6(s,r,n,l,d,m){d?(s.opacity=Aa(0,n.opacity??1,M6(l)),s.opacityExit=Aa(r.opacity??1,0,_6(l))):m&&(s.opacity=Aa(r.opacity??1,n.opacity??1,l));for(let u=0;u<O6;u++){const p=`border${wN[u]}Radius`;let b=Iy(r,p),f=Iy(n,p);if(b===void 0&&f===void 0)continue;b||(b=0),f||(f=0),b===0||f===0||Uy(b)===Uy(f)?(s[p]=Math.max(Aa(Fy(b),Fy(f),l),0),(Nn.test(f)||Nn.test(b))&&(s[p]+="%")):s[p]=f}(r.rotate||n.rotate)&&(s.rotate=Aa(r.rotate||0,n.rotate||0,l))}function Iy(s,r){return s[r]!==void 0?s[r]:s.borderRadius}const M6=SN(0,.5,cv),_6=SN(.5,.95,Oi);function SN(s,r,n){return l=>l<s?0:l>r?1:n(Dd(s,r,l))}function Vy(s,r){s.min=r.min,s.max=r.max}function Yi(s,r){Vy(s.x,r.x),Vy(s.y,r.y)}function By(s,r){s.translate=r.translate,s.scale=r.scale,s.originPoint=r.originPoint,s.origin=r.origin}function qy(s,r,n,l,d){return s-=r,s=Cm(s,1/n,l),d!==void 0&&(s=Cm(s,1/d,l)),s}function z6(s,r=0,n=1,l=.5,d,m=s,u=s){if(Nn.test(r)&&(r=parseFloat(r),r=Aa(u.min,u.max,r/100)-u.min),typeof r!="number")return;let p=Aa(m.min,m.max,l);s===m&&(p-=r),s.min=qy(s.min,r,n,p,d),s.max=qy(s.max,r,n,p,d)}function Hy(s,r,[n,l,d],m,u){z6(s,r[n],r[l],r[d],r.scale,m,u)}const L6=["x","scaleX","originX"],$6=["y","scaleY","originY"];function Gy(s,r,n,l){Hy(s.x,r,L6,n?n.x:void 0,l?l.x:void 0),Hy(s.y,r,$6,n?n.y:void 0,l?l.y:void 0)}function Qy(s){return s.translate===0&&s.scale===1}function CN(s){return Qy(s.x)&&Qy(s.y)}function Yy(s,r){return s.min===r.min&&s.max===r.max}function F6(s,r){return Yy(s.x,r.x)&&Yy(s.y,r.y)}function Wy(s,r){return Math.round(s.min)===Math.round(r.min)&&Math.round(s.max)===Math.round(r.max)}function AN(s,r){return Wy(s.x,r.x)&&Wy(s.y,r.y)}function Zy(s){return Tr(s.x)/Tr(s.y)}function Jy(s,r){return s.translate===r.translate&&s.scale===r.scale&&s.originPoint===r.originPoint}class U6{constructor(){this.members=[]}add(r){Fh(this.members,r),r.scheduleRender()}remove(r){if(Uh(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(r){const n=this.members.findIndex(d=>r===d);if(n===0)return!1;let l;for(let d=n;d>=0;d--){const m=this.members[d];if(m.isPresent!==!1){l=m;break}}return l?(this.promote(l),!0):!1}promote(r,n){const l=this.lead;if(r!==l&&(this.prevLead=l,this.lead=r,r.show(),l)){l.instance&&l.scheduleRender(),r.scheduleRender(),r.resumeFrom=l,n&&(r.resumeFrom.preserveOpacity=!0),l.snapshot&&(r.snapshot=l.snapshot,r.snapshot.latestValues=l.animationValues||l.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:d}=r.options;d===!1&&l.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:n,resumingFrom:l}=r;n.onExitComplete&&n.onExitComplete(),l&&l.options.onExitComplete&&l.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function I6(s,r,n){let l="";const d=s.x.translate/r.x,m=s.y.translate/r.y,u=(n==null?void 0:n.z)||0;if((d||m||u)&&(l=`translate3d(${d}px, ${m}px, ${u}px) `),(r.x!==1||r.y!==1)&&(l+=`scale(${1/r.x}, ${1/r.y}) `),n){const{transformPerspective:f,rotate:j,rotateX:v,rotateY:w,skewX:D,skewY:P}=n;f&&(l=`perspective(${f}px) ${l}`),j&&(l+=`rotate(${j}deg) `),v&&(l+=`rotateX(${v}deg) `),w&&(l+=`rotateY(${w}deg) `),D&&(l+=`skewX(${D}deg) `),P&&(l+=`skewY(${P}deg) `)}const p=s.x.scale*r.x,b=s.y.scale*r.y;return(p!==1||b!==1)&&(l+=`scale(${p}, ${b})`),l||"none"}const Ip=["","X","Y","Z"],V6=1e3;let B6=0;function Vp(s,r,n,l){const{latestValues:d}=r;d[s]&&(n[s]=d[s],r.setStaticValue(s,0),l&&(l[s]=0))}function EN(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:r}=s.options;if(!r)return;const n=mN(r);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:d,layoutId:m}=s.options;window.MotionCancelOptimisedAnimation(n,"transform",Sa,!(d||m))}const{parent:l}=s;l&&!l.hasCheckedOptimisedAppear&&EN(l)}function TN({attachResizeListener:s,defaultParent:r,measureScroll:n,checkIsScrollRoot:l,resetTransform:d}){return class{constructor(u={},p=r==null?void 0:r()){this.id=B6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(G6),this.nodes.forEach(Z6),this.nodes.forEach(J6),this.nodes.forEach(Q6)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let b=0;b<this.path.length;b++)this.path[b].shouldResetTransform=!0;this.root===this&&(this.nodes=new D6)}addEventListener(u,p){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Bh),this.eventHandlers.get(u).add(p)}notifyListeners(u,...p){const b=this.eventHandlers.get(u);b&&b.notify(...p)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=Bv(u)&&!_C(u),this.instance=u;const{layoutId:p,layout:b,visualElement:f}=this.options;if(f&&!f.current&&f.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(b||p)&&(this.isLayoutDirty=!0),s){let j,v=0;const w=()=>this.root.updateBlockedByResize=!1;Sa.read(()=>{v=window.innerWidth}),s(u,()=>{const D=window.innerWidth;D!==v&&(v=D,this.root.updateBlockedByResize=!0,j&&j(),j=P6(w,250),gm.hasAnimatedSinceResize&&(gm.hasAnimatedSinceResize=!1,this.nodes.forEach(ej)))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&f&&(p||b)&&this.addEventListener("didUpdate",({delta:j,hasLayoutChanged:v,hasRelativeLayoutChanged:w,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||f.getDefaultTransition()||sE,{onLayoutAnimationStart:T,onLayoutAnimationComplete:$}=f.getProps(),L=!this.targetLayout||!AN(this.targetLayout,D),M=!v&&w;if(this.options.layoutRoot||this.resumeFrom||M||v&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const B={...tx(P,"layout"),onPlay:T,onComplete:$};(f.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B),this.setAnimationOrigin(j,M)}else v||ej(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(K6),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&EN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let j=0;j<this.path.length;j++){const v=this.path[j];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:p,layout:b}=this.options;if(p===void 0&&!b)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ky);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Xy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(W6),this.nodes.forEach(q6),this.nodes.forEach(H6)):this.nodes.forEach(Xy),this.clearAllSnapshots();const p=Qr.now();ur.delta=Xn(0,1e3/60,p-ur.timestamp),ur.timestamp=p,ur.isProcessing=!0,Dp.update.process(ur),Dp.preRender.process(ur),Dp.render.process(ur),ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ax.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Y6),this.sharedNodes.forEach(X6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Sa.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Sa.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Tr(this.snapshot.measuredBox.x)&&!Tr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let b=0;b<this.path.length;b++)this.path[b].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Wa(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(p=!1),p&&this.instance){const b=l(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:b,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:b}}}resetTransform(){if(!d)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!CN(this.projectionDelta),b=this.getTransformTemplate(),f=b?b(this.latestValues,""):void 0,j=f!==this.prevTransformTemplateValue;u&&this.instance&&(p||io(this.latestValues)||j)&&(d(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const p=this.measurePageBox();let b=this.removeElementScroll(p);return u&&(b=this.removeTransform(b)),aE(b),{animationId:this.root.animationId,measuredBox:p,layoutBox:b,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:u}=this.options;if(!u)return Wa();const p=u.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(rE))){const{scroll:j}=this.root;j&&(ec(p.x,j.offset.x),ec(p.y,j.offset.y))}return p}removeElementScroll(u){var b;const p=Wa();if(Yi(p,u),(b=this.scroll)!=null&&b.wasRoot)return p;for(let f=0;f<this.path.length;f++){const j=this.path[f],{scroll:v,options:w}=j;j!==this.root&&v&&w.layoutScroll&&(v.wasRoot&&Yi(p,u),ec(p.x,v.offset.x),ec(p.y,v.offset.y))}return p}applyTransform(u,p=!1){const b=Wa();Yi(b,u);for(let f=0;f<this.path.length;f++){const j=this.path[f];!p&&j.options.layoutScroll&&j.scroll&&j!==j.root&&tc(b,{x:-j.scroll.offset.x,y:-j.scroll.offset.y}),io(j.latestValues)&&tc(b,j.latestValues)}return io(this.latestValues)&&tc(b,this.latestValues),b}removeTransform(u){const p=Wa();Yi(p,u);for(let b=0;b<this.path.length;b++){const f=this.path[b];if(!f.instance||!io(f.latestValues))continue;mh(f.latestValues)&&f.updateSnapshot();const j=Wa(),v=f.measurePageBox();Yi(j,v),Gy(p,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,j)}return io(this.latestValues)&&Gy(p,this.latestValues),p}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var D;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==p;if(!(u||b&&this.isSharedProjectionDirty||this.isProjectionDirty||(D=this.parent)!=null&&D.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:j,layoutId:v}=this.options;if(!this.layout||!(j||v))return;this.resolvedRelativeTargetAt=ur.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Wa(),this.targetWithTransforms=Wa()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),m6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yi(this.target,this.layout.layoutBox),nN(this.target,this.targetDelta)):Yi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||mh(this.parent.latestValues)||iN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,p,b){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wa(),this.relativeTargetOrigin=Wa(),Am(this.relativeTargetOrigin,p,b),Yi(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var P;const u=this.getLead(),p=!!this.resumingFrom||this!==u;let b=!0;if((this.isProjectionDirty||(P=this.parent)!=null&&P.isProjectionDirty)&&(b=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===ur.timestamp&&(b=!1),b)return;const{layout:f,layoutId:j}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||j))return;Yi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,w=this.treeScale.y;SA(this.layoutCorrected,this.treeScale,this.path,p),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Wa());const{target:D}=u;if(!D){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(By(this.prevProjectionDelta.x,this.projectionDelta.x),By(this.prevProjectionDelta.y,this.projectionDelta.y)),vd(this.projectionDelta,this.layoutCorrected,D,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==w||!Jy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Jy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var p;if((p=this.options.visualElement)==null||p.scheduleRender(),u){const b=this.getStack();b&&b.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sc(),this.projectionDelta=sc(),this.projectionDeltaWithTransform=sc()}setAnimationOrigin(u,p=!1){const b=this.snapshot,f=b?b.latestValues:{},j={...this.latestValues},v=sc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const w=Wa(),D=b?b.source:void 0,P=this.layout?this.layout.source:void 0,T=D!==P,$=this.getStack(),L=!$||$.members.length<=1,M=!!(T&&!L&&this.options.crossfade===!0&&!this.path.some(tE));this.animationProgress=0;let B;this.mixTargetDelta=ce=>{const U=ce/1e3;tj(v.x,u.x,U),tj(v.y,u.y,U),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Am(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eE(this.relativeTarget,this.relativeTargetOrigin,w,U),B&&F6(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=Wa()),Yi(B,this.relativeTarget)),T&&(this.animationValues=j,R6(j,f,this.latestValues,U,M,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var p,b,f;this.notifyListeners("animationStart"),(p=this.currentAnimation)==null||p.stop(),(f=(b=this.resumingFrom)==null?void 0:b.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Fl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Sa.update(()=>{gm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=oc(0)),this.currentAnimation=T6(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:j=>{this.mixTargetDelta(j),u.onUpdate&&u.onUpdate(j)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(V6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:p,target:b,layout:f,latestValues:j}=u;if(!(!p||!b||!f)){if(this!==u&&this.layout&&f&&kN(this.options.animationType,this.layout.layoutBox,f.layoutBox)){b=this.target||Wa();const v=Tr(this.layout.layoutBox.x);b.x.min=u.target.x.min,b.x.max=b.x.min+v;const w=Tr(this.layout.layoutBox.y);b.y.min=u.target.y.min,b.y.max=b.y.min+w}Yi(p,b),tc(p,j),vd(this.projectionDeltaWithTransform,this.layoutCorrected,p,j)}}registerSharedNode(u,p){this.sharedNodes.has(u)||this.sharedNodes.set(u,new U6),this.sharedNodes.get(u).add(p);const f=p.options.initialPromotionConfig;p.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(p):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var p;const{layoutId:u}=this.options;return u?((p=this.getStack())==null?void 0:p.lead)||this:this}getPrevLead(){var p;const{layoutId:u}=this.options;return u?(p=this.getStack())==null?void 0:p.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:p,preserveFollowOpacity:b}={}){const f=this.getStack();f&&f.promote(this,b),u&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let p=!1;const{latestValues:b}=u;if((b.z||b.rotate||b.rotateX||b.rotateY||b.rotateZ||b.skewX||b.skewY)&&(p=!0),!p)return;const f={};b.z&&Vp("z",u,f,this.animationValues);for(let j=0;j<Ip.length;j++)Vp(`rotate${Ip[j]}`,u,f,this.animationValues),Vp(`skew${Ip[j]}`,u,f,this.animationValues);u.render();for(const j in f)u.setStaticValue(j,f[j]),this.animationValues&&(this.animationValues[j]=f[j]);u.scheduleRender()}applyProjectionStyles(u,p){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const b=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=xm(p==null?void 0:p.pointerEvents)||"",u.transform=b?b(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=xm(p==null?void 0:p.pointerEvents)||""),this.hasProjected&&!io(this.latestValues)&&(u.transform=b?b({},""):"none",this.hasProjected=!1);return}u.visibility="";const j=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=I6(this.projectionDeltaWithTransform,this.treeScale,j);b&&(v=b(j,v)),u.transform=v;const{x:w,y:D}=this.projectionDelta;u.transformOrigin=`${w.origin*100}% ${D.origin*100}% 0`,f.animationValues?u.opacity=f===this?j.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:j.opacityExit:u.opacity=f===this?j.opacity!==void 0?j.opacity:"":j.opacityExit!==void 0?j.opacityExit:0;for(const P in uh){if(j[P]===void 0)continue;const{correct:T,applyTo:$,isCSSVariable:L}=uh[P],M=v==="none"?j[P]:T(j[P],f);if($){const B=$.length;for(let ce=0;ce<B;ce++)u[$[ce]]=M}else L?this.options.visualElement.renderState.vars[P]=M:u[P]=M}this.options.layoutId&&(u.pointerEvents=f===this?xm(p==null?void 0:p.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var p;return(p=u.currentAnimation)==null?void 0:p.stop()}),this.root.nodes.forEach(Ky),this.root.sharedNodes.clear()}}}function q6(s){s.updateLayout()}function H6(s){var n;const r=((n=s.resumeFrom)==null?void 0:n.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&r&&s.hasListeners("didUpdate")){const{layoutBox:l,measuredBox:d}=s.layout,{animationType:m}=s.options,u=r.source!==s.layout.source;m==="size"?Ei(v=>{const w=u?r.measuredBox[v]:r.layoutBox[v],D=Tr(w);w.min=l[v].min,w.max=w.min+D}):kN(m,r.layoutBox,l)&&Ei(v=>{const w=u?r.measuredBox[v]:r.layoutBox[v],D=Tr(l[v]);w.max=w.min+D,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[v].max=s.relativeTarget[v].min+D)});const p=sc();vd(p,l,r.layoutBox);const b=sc();u?vd(b,s.applyTransform(d,!0),r.measuredBox):vd(b,l,r.layoutBox);const f=!CN(p);let j=!1;if(!s.resumeFrom){const v=s.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:w,layout:D}=v;if(w&&D){const P=Wa();Am(P,r.layoutBox,w.layoutBox);const T=Wa();Am(T,l,D.layoutBox),AN(P,T)||(j=!0),v.options.layoutRoot&&(s.relativeTarget=T,s.relativeTargetOrigin=P,s.relativeParent=v)}}}s.notifyListeners("didUpdate",{layout:l,snapshot:r,delta:b,layoutDelta:p,hasLayoutChanged:f,hasRelativeLayoutChanged:j})}else if(s.isLead()){const{onExitComplete:l}=s.options;l&&l()}s.options.transition=void 0}function G6(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function Q6(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function Y6(s){s.clearSnapshot()}function Ky(s){s.clearMeasurements()}function Xy(s){s.isLayoutDirty=!1}function W6(s){const{visualElement:r}=s.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),s.resetTransform()}function ej(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function Z6(s){s.resolveTargetDelta()}function J6(s){s.calcProjection()}function K6(s){s.resetSkewAndRotation()}function X6(s){s.removeLeadSnapshot()}function tj(s,r,n){s.translate=Aa(r.translate,0,n),s.scale=Aa(r.scale,1,n),s.origin=r.origin,s.originPoint=r.originPoint}function sj(s,r,n,l){s.min=Aa(r.min,n.min,l),s.max=Aa(r.max,n.max,l)}function eE(s,r,n,l){sj(s.x,r.x,n.x,l),sj(s.y,r.y,n.y,l)}function tE(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const sE={duration:.45,ease:[.4,0,.1,1]},aj=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),rj=aj("applewebkit/")&&!aj("chrome/")?Math.round:Oi;function ij(s){s.min=rj(s.min),s.max=rj(s.max)}function aE(s){ij(s.x),ij(s.y)}function kN(s,r,n){return s==="position"||s==="preserve-aspect"&&!u6(Zy(r),Zy(n),.2)}function rE(s){var r;return s!==s.root&&((r=s.scroll)==null?void 0:r.wasRoot)}const iE=TN({attachResizeListener:(s,r)=>Md(s,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Bp={current:void 0},DN=TN({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Bp.current){const s=new iE({});s.mount(window),s.setOptions({layoutScroll:!0}),Bp.current=s}return Bp.current},resetTransform:(s,r)=>{s.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),nE={pan:{Feature:A6},drag:{Feature:C6,ProjectionNode:DN,MeasureLayout:NN}};function nj(s,r,n){const{props:l}=s;s.animationState&&l.whileHover&&s.animationState.setActive("whileHover",n==="Start");const d="onHover"+n,m=l[d];m&&Sa.postRender(()=>m(r,qd(r)))}class lE extends Vl{mount(){const{current:r}=this.node;r&&(this.unmount=DC(r,(n,l)=>(nj(this.node,l,"Start"),d=>nj(this.node,d,"End"))))}unmount(){}}class oE extends Vl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Id(Md(this.node.current,"focus",()=>this.onFocus()),Md(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lj(s,r,n){const{props:l}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&l.whileTap&&s.animationState.setActive("whileTap",n==="Start");const d="onTap"+(n==="End"?"":n),m=l[d];m&&Sa.postRender(()=>m(r,qd(r)))}class cE extends Vl{mount(){const{current:r}=this.node;r&&(this.unmount=MC(r,(n,l)=>(lj(this.node,l,"Start"),(d,{success:m})=>lj(this.node,d,m?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yh=new WeakMap,qp=new WeakMap,dE=s=>{const r=yh.get(s.target);r&&r(s)},uE=s=>{s.forEach(dE)};function mE({root:s,...r}){const n=s||document;qp.has(n)||qp.set(n,{});const l=qp.get(n),d=JSON.stringify(r);return l[d]||(l[d]=new IntersectionObserver(uE,{root:s,...r})),l[d]}function fE(s,r,n){const l=mE(r);return yh.set(s,n),l.observe(s),()=>{yh.delete(s),l.unobserve(s)}}const pE={some:0,all:1};class hE extends Vl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:n,margin:l,amount:d="some",once:m}=r,u={root:n?n.current:void 0,rootMargin:l,threshold:typeof d=="number"?d:pE[d]},p=b=>{const{isIntersecting:f}=b;if(this.isInView===f||(this.isInView=f,m&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:j,onViewportLeave:v}=this.node.getProps(),w=f?j:v;w&&w(b)};return fE(this.node.current,u,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:n}=this.node;["amount","margin","root"].some(xE(r,n))&&this.startObserver()}unmount(){}}function xE({viewport:s={}},{viewport:r={}}={}){return n=>s[n]!==r[n]}const gE={inView:{Feature:hE},tap:{Feature:cE},focus:{Feature:oE},hover:{Feature:lE}},bE={layout:{ProjectionNode:DN,MeasureLayout:NN}},yE={...i6,...gE,...nE,...bE},st=vA(yE,MA),jE=()=>{var B,ce,U,O,k,W;const[s,r]=y.useState(!1),[n,l]=y.useState(!1),[d,m]=y.useState(!1),[u,p]=y.useState(null),b=tn(),f=ar();y.useEffect(()=>{if(typeof window>"u")return;const Q=localStorage.getItem("token"),ne=localStorage.getItem("user");if(Q&&ne)try{p(JSON.parse(ne))}catch(le){console.error("Error parsing user data:",le),localStorage.removeItem("token"),localStorage.removeItem("user")}else p(null);w(!0)},[b.pathname]),y.useEffect(()=>{const Q=()=>{r(window.scrollY>20)};return window.addEventListener("scroll",Q),()=>window.removeEventListener("scroll",Q)},[]),y.useEffect(()=>{const Q=ne=>{ne.target.closest(".profile-dropdown")||m(!1)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]);const j=[{label:"Home",path:"/"},{label:"Services",path:"/digital-print"},{label:"Upload",path:"/upload"},{label:"About",path:"/about"},{label:"Policy",path:"/policy"},{label:"Reviews",path:"/reviews"}],[v,w]=Pi.useState(!1),D=j,P=Q=>Q==="/"&&b.pathname!=="/"?!1:b.pathname.startsWith(Q),T=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),p(null),m(!1),f("/"),window.location.reload()},$=Q=>!Q||Q.length===0?"??":Q.split(" ").map(ne=>ne[0]).join("").toUpperCase().slice(0,2),L=Q=>{const ne=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-orange-500","bg-teal-500"];if(!Q||Q.length===0)return ne[0];const le=Q.length%ne.length;return ne[le]},M=b.pathname==="/login"||b.pathname==="/signup";return e.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${s?"bg-white/95 backdrop-blur-md shadow-sm py-2":"bg-white py-2"}`,children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center h-16 relative",children:[e.jsx(st.div,{initial:!1,animate:{left:M?"50%":"0px",x:M?"-50%":"0%"},transition:{duration:.6,ease:[.4,0,.2,1]},className:"flex items-center absolute",children:e.jsx(ys,{to:"/",className:"flex items-center gap-2 group cursor-pointer h-full",onClick:Q=>{M?(Q.preventDefault(),f("/")):b.pathname==="/"&&window.scrollTo({top:0,behavior:"smooth"})},children:e.jsx(st.img,{src:"/logo.svg",alt:"Prints24 Logo",className:`object-contain group-hover:scale-105 transition-all duration-300 cursor-pointer ${M?"h-12 sm:h-14 md:h-16 w-auto":"h-12 w-auto sm:h-14 md:h-16"}`,initial:!1})})}),!M&&e.jsxs("div",{className:"flex-1 flex items-center justify-end",children:[e.jsx("div",{className:"hidden md:flex items-center space-x-6",children:D.map(Q=>e.jsxs(ys,{to:Q.path,className:`text-sm font-medium transition-colors duration-200 relative group ${P(Q.path)?"text-cream-800 font-semibold":"text-cream-600 hover:text-cream-900"}`,children:[Q.label,e.jsx("span",{className:`absolute -bottom-1 left-0 w-0 h-0.5 bg-cream-800 transition-all duration-300 group-hover:w-full ${P(Q.path)?"w-full":""}`})]},Q.path))}),e.jsx("div",{className:"hidden md:flex items-center space-x-3 ml-8",children:!u||!v?e.jsxs(e.Fragment,{children:[e.jsx(ys,{to:"/login",children:e.jsx("button",{className:"text-cream-900 font-medium text-base hover:text-cream-600 transition-colors px-4 py-2",children:"Login"})}),e.jsx(ys,{to:"/signup",children:e.jsx("button",{className:"bg-cream-900 text-cream-50 px-6 py-2.5 rounded-full text-base font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Sign Up"})})]}):e.jsxs("div",{className:"relative profile-dropdown",children:[e.jsxs("button",{onClick:()=>m(!d),className:"flex items-center gap-2 p-2 rounded-lg hover:bg-cream-100 transition-colors",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${L(u.name||u.email||"User")} flex items-center justify-center text-white text-sm font-bold`,children:$(u.name||((B=u.email)==null?void 0:B.split("@")[0])||"User")}),e.jsx("span",{className:"text-cream-700 text-sm font-medium",children:(u.name||((ce=u.email)==null?void 0:ce.split("@")[0])||"User").split(" ")[0]})]}),e.jsx(ca,{children:d&&e.jsxs(st.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-xl shadow-lg border border-cream-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-cream-100",children:[" ",e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${L(u.name||u.email||"User")} flex items-center justify-center text-white font-bold`,children:$(u.name||((U=u.email)==null?void 0:U.split("@")[0])||"User")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-cream-900 truncate",children:u.name||((O=u.email)==null?void 0:O.split("@")[0])||"User"}),e.jsx("p",{className:"text-xs text-cream-600 truncate",children:u.email}),e.jsxs("span",{className:"inline-block mt-1 px-2 py-1 bg-cream-100 text-cream-700 text-xs rounded-full capitalize",children:[" ",u.role]})]})]})]}),e.jsxs("div",{className:"py-2",children:[" ",e.jsxs("button",{onClick:()=>{f("/profile"),m(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-cream-700 hover:bg-cream-50 transition-colors",children:[e.jsx(Ji,{size:16}),"My Profile"]}),u.role==="admin"&&e.jsxs("button",{onClick:()=>{f("/admin/dashboard"),m(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-cream-700 hover:bg-cream-50 transition-colors",children:[e.jsx(Cr,{size:16}),"Admin Dashboard"]}),u.role==="emp"&&e.jsxs("button",{onClick:()=>{f("/employee/dashboard"),m(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-cream-700 hover:bg-cream-50 transition-colors",children:[e.jsx(ja,{size:16}),"Employee Dashboard"]})]}),e.jsxs("div",{className:"border-t border-cream-100 pt-2",children:[" ",e.jsxs("button",{onClick:T,className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Hb,{size:16}),"Logout"]})]})]})})]})})]}),!M&&e.jsx("div",{className:"md:hidden",children:e.jsxs("button",{onClick:()=>l(!n),className:"text-cream-900 focus:outline-none p-1",children:[n?e.jsx(as,{size:28}):e.jsx(H4,{size:28})," "]})})]})}),!M&&e.jsx(ca,{children:n&&e.jsx(st.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-cream-50 border-t border-cream-200",children:e.jsxs("div",{className:"px-4 pt-2 pb-4 space-y-2",children:[" ",D.map(Q=>e.jsx(ys,{to:Q.path,onClick:()=>l(!1),className:`block px-3 py-2 rounded-md text-base font-medium ${P(Q.path)?"bg-cream-100 text-cream-900":"text-cream-600 hover:bg-cream-100 hover:text-cream-900"}`,children:Q.label},Q.path)),e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200 flex flex-col space-y-3",children:[" ",!u||!v?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{f("/login"),l(!1)},className:"w-full text-center text-cream-900 font-medium text-base py-3",children:"Login"}),e.jsx("button",{onClick:()=>{f("/signup"),l(!1)},className:"w-full bg-cream-900 text-cream-50 py-3 rounded-lg font-medium text-base",children:"Sign Up"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-3 py-2 bg-cream-100 rounded-lg",children:[" ",e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${L(u.name||u.email||"User")} flex items-center justify-center text-white text-sm font-bold`,children:$(u.name||((k=u.email)==null?void 0:k.split("@")[0])||"User")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-cream-900",children:u.name||((W=u.email)==null?void 0:W.split("@")[0])||"User"}),e.jsx("p",{className:"text-xs text-cream-600",children:u.email})]})]})]}),e.jsxs("button",{onClick:()=>{f("/profile"),l(!1)},className:"w-full text-center text-cream-900 font-medium py-2 flex items-center justify-center gap-2",children:[e.jsx(Ji,{size:16}),"My Profile"]}),u.role==="admin"&&e.jsxs("button",{onClick:()=>{f("/admin/dashboard"),l(!1)},className:"w-full text-center text-cream-900 font-medium py-2 flex items-center justify-center gap-2",children:[e.jsx(Cr,{size:16}),"Admin Dashboard"]}),e.jsxs("button",{onClick:()=>{T(),l(!1)},className:"w-full bg-red-600 text-white py-2.5 rounded-lg font-medium flex items-center justify-center gap-2",children:[e.jsx(Hb,{size:16}),"Logout"]})]})]})]})})})]})},vE=()=>e.jsx("footer",{className:"bg-cream-900 text-cream-100 pt-8 sm:pt-12 md:pt-16 pb-6 sm:pb-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 sm:gap-10 md:gap-12",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("h3",{className:"font-serif text-xl sm:text-2xl font-bold text-cream-50",children:"Prints24"}),e.jsx("p",{className:"text-cream-200 text-xs sm:text-sm leading-relaxed",children:"Modern, fast-growing digital & offset printing company providing creative and high-quality solutions."}),e.jsxs("div",{className:"flex space-x-3 sm:space-x-4 pt-2",children:[e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx(j4,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx(k3,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx(M4,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e.jsx(L4,{size:18,className:"sm:w-5 sm:h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-serif text-base sm:text-lg font-semibold text-cream-50 mb-4 sm:mb-6",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[e.jsx("li",{children:e.jsx(ys,{to:"/",className:"hover:text-white transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx(ys,{to:"/digital-print",className:"hover:text-white transition-colors",children:"Digital Print"})}),e.jsx("li",{children:e.jsx(ys,{to:"/upload",className:"hover:text-white transition-colors",children:"Upload Files"})}),e.jsx("li",{children:e.jsx(ys,{to:"/about",className:"hover:text-white transition-colors",children:"About Us"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-serif text-base sm:text-lg font-semibold text-cream-50 mb-4 sm:mb-6",children:"Customer Service"}),e.jsxs("ul",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[e.jsx("li",{children:e.jsx(ys,{to:"/policy",className:"hover:text-white transition-colors",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(ys,{to:"/policy",className:"hover:text-white transition-colors",children:"Terms & Conditions"})}),e.jsx("li",{children:e.jsx(ys,{to:"/policy",className:"hover:text-white transition-colors",children:"Shipping Policy"})}),e.jsx("li",{children:e.jsx(ys,{to:"/login",className:"hover:text-white transition-colors",children:"My Account"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-serif text-base sm:text-lg font-semibold text-cream-50 mb-4 sm:mb-6",children:"Contact"}),e.jsxs("ul",{className:"space-y-3 sm:space-y-4 text-xs sm:text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx(Jn,{size:16,className:"sm:w-[18px] sm:h-[18px] mt-0.5 shrink-0"}),e.jsxs("span",{children:["123 Print Street, Creative District,",e.jsx("br",{}),"New York, NY 10001"]})]}),e.jsxs("li",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(fm,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),e.jsx("span",{children:"+1 (555) 123-4567"})]}),e.jsxs("li",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(uo,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),e.jsx("span",{children:"support@prints24.com"})]})]})]})]}),e.jsx("div",{className:"border-t border-cream-800 mt-8 sm:mt-12 pt-6 sm:pt-8 text-center text-xs sm:text-sm text-cream-400",children:e.jsx("p",{children:" 2024 Prints24. All rights reserved."})})]})}),NE=()=>{const[s,r]=Pi.useState(null);return Pi.useEffect(()=>{typeof window<"u"&&Ud(()=>Promise.resolve().then(()=>HT),[]).then(n=>{r(()=>n.Toaster)})},[]),s?e.jsx(s,{position:"bottom-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}):null},wE=()=>{const s=tn();Pi.useEffect(()=>{typeof window<"u"&&window.scrollTo(0,0)},[s.pathname]);const[r,n]=Pi.useState(!1);return Pi.useEffect(()=>{const l=setTimeout(()=>{n(!0)},100);return()=>clearTimeout(l)},[]),e.jsxs("div",{className:"min-h-screen flex flex-col font-sans text-cream-900 bg-cream-50",children:[e.jsx(jE,{}),e.jsx("main",{className:"flex-grow pt-16",children:e.jsx("div",{children:e.jsx("div",{children:e.jsx(J2,{})})},s.pathname)}),e.jsx(vE,{}),e.jsx(NE,{})]})},Hp=[{id:1,image:"/banner.jpg",alt:"Prints 24 Banner"}],SE=()=>{const[s,r]=y.useState(0);return y.useEffect(()=>{const n=setInterval(()=>{r(l=>(l+1)%Hp.length)},5e3);return()=>clearInterval(n)},[]),e.jsxs("section",{className:"relative mt-2 mr-4 sm:mt-4 md:mt-6 h-[70vh] sm:h-[50vh] md:h-[55vh] lg:h-[60vh] xl:h-[65vh] min-h-[420px] sm:min-h-[380px] md:min-h-[400px] lg:min-h-[450px] xl:min-h-[500px] max-h-[750px] sm:max-h-[600px] md:max-h-[650px] lg:max-h-[700px] xl:max-h-[750px] w-full overflow-hidden bg-cream-900 rounded-xl sm:rounded-2xl md:rounded-3xl mx-2 sm:mx-4 md:mx-6 lg:mx-8",children:[e.jsx(ca,{mode:"wait",children:e.jsxs(st.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:1.5},className:"absolute inset-0",children:[e.jsx("img",{src:Hp[s].image,alt:Hp[s].alt,className:"w-full h-full object-cover",loading:"eager"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-black/60 backdrop-blur-[1px] sm:backdrop-blur-[2px]"})]},s)}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 z-10",children:e.jsxs(st.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-3xl md:max-w-4xl lg:max-w-5xl xl:max-w-6xl w-full",children:[e.jsx("div",{className:"inline-block py-2 px-4 sm:py-2.5 sm:px-6 md:py-3 md:px-8 lg:py-4 lg:px-10 rounded-full bg-cream-50/95 backdrop-blur-sm sm:backdrop-blur-md border border-white/20 mb-4 sm:mb-6 md:mb-8 lg:mb-10",children:e.jsx("span",{className:"text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl font-bold text-gray-800 uppercase tracking-wider",children:"WELCOME TO PRINTS 24"})}),e.jsxs("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-4 sm:mb-5 md:mb-6 lg:mb-8 leading-tight drop-shadow-lg px-2 sm:px-4",children:["Premium Printing ",e.jsx("br",{className:"hidden sm:block"}),e.jsx("span",{className:"text-cream-300 italic",children:"Simplified"})]}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl text-cream-100 mb-6 sm:mb-8 md:mb-10 lg:mb-12 max-w-xl sm:max-w-2xl md:max-w-3xl mx-auto leading-relaxed drop-shadow-md px-2 sm:px-4",children:"India's easiest and fastest printing platform. Design your personality and receive premium prints delivered right to your desk."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4 md:gap-5 lg:gap-6 px-4 sm:px-6 md:px-8",children:[e.jsxs(ys,{to:"/signup",className:"bg-cream-50 text-cream-900 px-5 py-2.5 sm:px-6 sm:py-3 md:px-7 md:py-3.5 lg:px-8 lg:py-4 rounded-full text-sm sm:text-base md:text-lg lg:text-xl font-bold hover:bg-white transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 sm:hover:-translate-y-1 flex items-center justify-center gap-2 w-full sm:w-auto sm:min-w-[180px] md:min-w-[200px] lg:min-w-[220px]",children:[e.jsx(pd,{size:16,className:"sm:w-4 sm:h-4 md:w-5 md:h-5 lg:w-6 lg:h-6"}),e.jsx("span",{children:"Sign Up Now"})]}),e.jsxs(ys,{to:"/digital-print",className:"bg-cream-50 text-cream-900 px-5 py-2.5 sm:px-6 sm:py-3 md:px-7 md:py-3.5 lg:px-8 lg:py-4 rounded-full text-sm sm:text-base md:text-lg lg:text-xl font-bold hover:bg-white transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 sm:hover:-translate-y-1 flex items-center justify-center gap-2 w-full sm:w-auto sm:min-w-[180px] md:min-w-[200px] lg:min-w-[220px]",children:[e.jsx(u4,{size:16,className:"sm:w-4 sm:h-4 md:w-5 md:h-5 lg:w-6 lg:h-6"}),e.jsx("span",{children:"Explore Products"})]})]})]})})]})},CE=[{id:"cards",title:"Visiting Cards",description:"Premium matte, gloss, and textured business cards.",icon:Ll},{id:"flyers",title:"Flyers & Brochures",description:"High-quality marketing materials for your business.",icon:Wr},{id:"idcards",title:"ID Cards",description:"Durable employee and student identification cards.",icon:VS},{id:"letterhead",title:"Letterhead",description:"Professional official stationary.",icon:Wr},{id:"stickers",title:"Stickers",description:"Custom shapes and sizes for branding.",icon:j3},{id:"invites",title:"Invitations",description:"Elegant cards for weddings and events.",icon:uo},{id:"banners",title:"Flex & Banners",description:"Large format printing for maximum visibility.",icon:bn},{id:"more",title:"Digital Printing",description:"Custom solutions for all your printing needs.",icon:Jj}],AE={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},EE={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},TE=({children:s,categories:r,loadingCategories:n})=>e.jsx("section",{className:"pt-2 sm:pt-4 pb-6 sm:pb-8 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-2 sm:mb-4",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl md:text-4xl font-bold text-cream-900 mb-3 sm:mb-4",children:"Our Products"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600 max-w-xl mx-auto mb-2 sm:mb-3",children:"Select from our wide range of premium printed products specially crafted for you"})]}),!n&&r.length>0&&e.jsxs(e.Fragment,{children:[s,e.jsx("div",{className:"text-center mt-6",children:e.jsxs(ys,{to:"/digital-print",className:"inline-flex items-center gap-2 bg-cream-900 text-cream-50 px-8 py-3 rounded-full font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1",children:["Explore More",e.jsx(Yr,{size:18})]})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h3",{className:"font-serif text-3xl font-bold text-cream-900 mb-2",children:"All Services"})}),e.jsx(st.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",variants:AE,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:CE.map(l=>e.jsx(st.div,{variants:EE,children:e.jsx(ys,{to:"/digital-print",children:e.jsx("div",{className:"group h-full p-8 bg-cream-50 rounded-2xl hover:bg-cream-900 transition-all duration-300 cursor-pointer relative overflow-hidden border border-cream-100 hover:shadow-2xl",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-14 h-14 bg-cream-200 text-cream-900 rounded-xl flex items-center justify-center mb-6 group-hover:bg-cream-800 group-hover:text-cream-50 transition-colors",children:e.jsx(l.icon,{size:28})}),e.jsx("h3",{className:"font-serif text-xl font-semibold mb-3 text-cream-900 group-hover:text-cream-50 transition-colors",children:l.title}),e.jsx("p",{className:"text-cream-600 text-sm group-hover:text-cream-200 transition-colors",children:l.description})]})})})},l.id))})]})]})}),oj=s=>s>=1536?7:s>=1280?6:s>=1024?5:s>=768?4:s>=640?3:2,kE=({categories:s,loadingCategories:r})=>(y.useEffect(()=>{if(r||s.length===0)return;let n=null,l=!1,d=Date.now(),m=!1;const u=()=>{const M=document.getElementById("category-scroll-container");if(!M)return;l=!0;const B=M.scrollWidth-M.clientWidth,ce=M.scrollLeft,U=window.innerWidth;let O=U/2;if(U>=1280?O=U*.2:U>=1024?O=U*.25:U>=768?O=U*.333:U>=640&&(O=U/2),ce>=B-10)M.scrollTo({left:0,behavior:"smooth"});else{const k=ce+O;k>=B?M.scrollTo({left:B,behavior:"smooth"}):(M.style.scrollBehavior="smooth",M.style.transition="scroll-left 0.8s ease-in-out",M.scrollTo({left:k,behavior:"smooth"}))}setTimeout(()=>{l=!1,d=Date.now(),m=!1,p()},1e3)},p=()=>{if(l)return;const M=m?2e4:1e4,B=Date.now()-d,ce=Math.max(0,M-B);n=setTimeout(()=>{Date.now()-d>=(m?2e4:1e4)?u():(l=!1,p())},ce)},b=()=>{d=Date.now(),m=!1,n&&(clearTimeout(n),n=null),l=!1,p()},f=()=>{d=Date.now(),m=!0,n&&(clearTimeout(n),n=null),l=!1,p()};window.homeCategoryUpdateFromArrow=f;const j=()=>b(),v=()=>b(),w=()=>b(),D=()=>b(),P=()=>b(),T=()=>b(),$=()=>b();window.addEventListener("mousemove",j),window.addEventListener("mousedown",D),window.addEventListener("click",w),window.addEventListener("keydown",P),window.addEventListener("touchstart",T),window.addEventListener("wheel",$);const L=document.getElementById("category-scroll-container");return L&&L.addEventListener("mouseenter",v),d=Date.now(),p(),()=>{n&&clearTimeout(n),window.removeEventListener("mousemove",j),window.removeEventListener("mousedown",D),window.removeEventListener("click",w),window.removeEventListener("keydown",P),window.removeEventListener("touchstart",T),window.removeEventListener("wheel",$),L&&L.removeEventListener("mouseenter",v)}},[r,s.length]),e.jsx("div",{className:"mb-10",children:e.jsxs("div",{className:"relative group/slider overflow-hidden",onMouseEnter:()=>{window.categoryLastInteraction=Date.now()},onMouseLeave:()=>{window.categoryLastInteraction=Date.now()},children:[e.jsx("button",{onClick:()=>{const n=document.getElementById("category-scroll-container");if(n){const l=window.innerWidth,d=oj(l),m=l/d,u=n.scrollLeft;u<=0?n.scrollTo({left:n.scrollWidth-n.clientWidth,behavior:"smooth"}):n.scrollTo({left:u-m,behavior:"smooth"})}window.homeCategoryUpdateFromArrow&&window.homeCategoryUpdateFromArrow()},className:"absolute left-1 sm:left-2 md:left-3 z-10 w-7 h-7 sm:w-8 sm:h-8 md:w-9 md:h-9 bg-white/95 hover:bg-white active:bg-white shadow-sm sm:shadow-md rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 0.875rem)"},children:e.jsx(po,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"})}),e.jsx("button",{onClick:()=>{const n=document.getElementById("category-scroll-container");if(n){const l=window.innerWidth,d=oj(l),m=l/d,u=n.scrollLeft,p=n.scrollWidth-n.clientWidth,b=u+m;u>=p-1?n.scrollTo({left:0,behavior:"smooth"}):b>=p?n.scrollTo({left:p,behavior:"smooth"}):n.scrollTo({left:b,behavior:"smooth"})}window.homeCategoryUpdateFromArrow&&window.homeCategoryUpdateFromArrow()},className:"absolute right-1 sm:right-2 md:right-3 z-10 w-7 h-7 sm:w-8 sm:h-8 md:w-9 md:h-9 bg-white/95 hover:bg-white active:bg-white shadow-sm sm:shadow-md rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 0.875rem)"},children:e.jsx(sr,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"})}),e.jsx("div",{id:"category-scroll-container",className:"flex overflow-x-auto overflow-y-hidden pb-1 sm:pb-2 md:pb-3 snap-x snap-mandatory scroll-smooth touch-pan-x",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth"},children:s.map((n,l)=>e.jsx(st.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:l*.03},className:"flex-shrink-0 snap-start transition-all duration-500 ease-in-out w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 2xl:w-[14.285%] px-0.5 sm:px-0.5 md:px-0.5",children:e.jsx(ys,{to:`/digital-print/${n._id}`,className:"block",children:e.jsxs("div",{className:"group flex flex-col items-center gap-0.5 sm:gap-1 p-1.5 sm:p-2 rounded-lg transition-all duration-300 relative",children:[n.type&&e.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 px-1.5 sm:px-2 md:px-2.5 py-0.5 sm:py-0.5 md:py-1 rounded-full text-[8px] sm:text-[9px] md:text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 whitespace-nowrap shadow-md ${n.type==="digital"?"bg-[#588157] text-white":"bg-[#003049] text-white"}`,children:n.type==="digital"?"Digital Print":"Bulk Print"}),e.jsx("div",{className:`w-18 h-18 sm:w-20 sm:h-20 md:w-24 md:h-24 lg:w-28 lg:h-28 xl:w-32 xl:h-32 rounded-full overflow-hidden bg-white transition-all duration-300 shadow-sm group-hover:shadow-md group-hover:scale-105 flex items-center justify-center relative ${n.type==="digital"?"group-hover:bg-[#f5faf0]":"group-hover:bg-[#f5fbff]"}`,children:e.jsx("img",{src:n.image,alt:n.name,className:`${n.name.toLowerCase().includes("visiting card")?"w-full h-full object-cover":n.name.toLowerCase().includes("card holder")?"w-9 h-9 sm:w-10 sm:h-10 md:w-12 md:h-12 lg:w-14 lg:h-14 xl:w-16 xl:h-16 object-contain":"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-18 lg:h-18 xl:w-20 xl:h-20 object-contain"}`})}),e.jsx("span",{className:"text-xs font-semibold text-cream-900 text-center max-w-[70px] sm:max-w-[80px] md:max-w-[90px] line-clamp-2 leading-tight mt-0.5",children:n.name})]})})},n._id))})]})})),cj=({label:s,value:r,onChange:n,options:l,className:d=""})=>{const[m,u]=y.useState(!1),p=y.useRef(null),b=l.find(j=>j.value===r),f=j=>{n(j),u(!1)};return y.useEffect(()=>{const j=v=>{p.current&&!p.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),e.jsxs("div",{className:`relative ${d}`,ref:p,children:[e.jsxs("button",{type:"button",onClick:()=>u(!m),className:"flex items-center justify-between w-full px-4 py-2.5 text-sm font-medium text-cream-900 bg-white border border-cream-300 rounded-lg hover:bg-cream-50 focus:outline-none focus:ring-2 focus:ring-cream-500 focus:ring-offset-2 transition-colors",children:[e.jsx("span",{className:"truncate",children:b?b.label:s}),e.jsx(_h,{className:`w-4 h-4 ml-2 transition-transform ${m?"rotate-180":""}`})]}),m&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-cream-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:l.map(j=>e.jsx("button",{type:"button",onClick:()=>f(j.value),className:`w-full text-left px-4 py-3 text-sm hover:bg-cream-50 transition-colors ${j.value===r?"bg-cream-100 text-cream-900 font-medium":"text-cream-700"} first:rounded-t-lg last:rounded-b-lg`,children:j.label},j.label))})]})},dj=({review:s,index:r,isExpanded:n,onToggleExpand:l,view:d,isClient:m})=>{const u=d==="grid"?100:200,p=s.comment.length>u,b=n||!p?s.comment:s.comment.substring(0,u)+"...";return d==="list"?e.jsx(st.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:r*.05,ease:"easeOut"},className:"bg-white p-6 rounded-2xl shadow-md border border-cream-100 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-200 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-cream-900 font-bold text-lg",children:s.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-cream-900",children:s.userName}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(f=>e.jsx(Ki,{size:14,className:f<=s.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"},f))})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-cream-700 leading-relaxed",children:b}),p&&e.jsx("button",{onClick:l,className:"text-cream-900 hover:text-cream-700 text-sm font-medium mt-1 underline",children:n?"Show Less":"Show More"})]}),e.jsx("p",{className:"text-xs text-cream-500",children:m?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading..."})]})]})},s._id):e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:r*.05,ease:"easeOut"},className:"bg-white p-6 rounded-2xl shadow-md border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-cream-900 font-bold text-lg",children:s.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-cream-900",children:s.userName}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(f=>e.jsx(Ki,{size:14,className:f<=s.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"},f))})]})]}),e.jsx("p",{className:"text-cream-700 leading-relaxed mb-4",children:b}),e.jsx("p",{className:"text-xs text-cream-500",children:m?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading..."})]},s._id)},DE=({reviews:s})=>{const r=s.length,n=r>0?s.reduce((l,d)=>l+d.rating,0)/r:0;return r===0?null:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 sm:gap-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Total Reviews"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-cream-900",children:r})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Average Rating"}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(l=>e.jsx(Ki,{size:16,className:`sm:w-5 sm:h-5 ${l<=Math.round(n)?"fill-yellow-400 text-yellow-400":"text-cream-300"}`},l))}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-cream-900",children:n.toFixed(1)})]})]})]})},PE=({reviews:s,loadingReviews:r,isLoggedIn:n,isClient:l})=>{const[d,m]=y.useState(null),[u,p]=y.useState("newest"),[b,f]=y.useState(!1),[j,v]=y.useState(!1),[w,D]=y.useState(new Set),T=[...s.filter(L=>!(d&&L.rating!==d))].sort((L,M)=>{const B=new Date(L.createdAt).getTime(),ce=new Date(M.createdAt).getTime();return u==="newest"?ce-B:u==="oldest"?B-ce:ce-B}),$=j||b?T:T.slice(0,6);return e.jsx("section",{className:"pt-8 sm:pt-12 pb-6 sm:pb-8 bg-cream-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl md:text-4xl font-bold text-cream-900 mb-3 sm:mb-4",children:"Customer Reviews"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600 max-w-xl mx-auto mb-4 sm:mb-6",children:"See what our customers have to say about their experience with Prints24."}),e.jsx(DE,{reviews:s})]}),e.jsx("div",{className:"max-w-6xl mx-auto mb-6 sm:mb-8",children:e.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl sm:rounded-2xl shadow-md border border-cream-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-0",children:[e.jsx(Yj,{size:18,className:"sm:w-5 sm:h-5 text-cream-600"}),e.jsx("span",{className:"text-sm sm:text-base font-medium text-cream-900",children:"Filters:"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[e.jsx("label",{className:"text-xs sm:text-sm text-cream-700 sm:whitespace-nowrap",children:"Rating:"}),e.jsx(cj,{label:"All Ratings",value:d,onChange:L=>m(L),options:[{value:null,label:"All Ratings"},{value:5,label:"5 Stars"},{value:4,label:"4 Stars"},{value:3,label:"3 Stars"},{value:2,label:"2 Stars"},{value:1,label:"1 Star"}],className:"w-full sm:w-auto"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[e.jsx("label",{className:"text-xs sm:text-sm text-cream-700 sm:whitespace-nowrap",children:"Sort by:"}),e.jsx(cj,{label:"Newest First",value:u,onChange:L=>p(L),options:[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"}],className:"w-full sm:w-auto"})]}),(d||u!=="newest")&&e.jsxs("button",{onClick:()=>{m(null),p("newest")},className:"flex items-center justify-center gap-2 px-4 py-2 text-xs sm:text-sm text-cream-700 hover:text-cream-900 border border-cream-300 rounded-lg hover:bg-cream-50 transition-colors",children:[e.jsx(as,{size:14,className:"sm:w-4 sm:h-4"}),"Clear Filters"]}),e.jsxs(ys,{to:"/reviews",className:"flex items-center justify-center gap-2 px-4 sm:px-5 py-2 sm:py-2.5 bg-cream-900 text-cream-50 rounded-lg text-sm sm:text-base font-medium hover:bg-cream-800 transition-all shadow-md hover:shadow-lg sm:ml-auto",children:[e.jsx(J4,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),"Write Review"]})]})})}),r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:"Loading reviews..."})}):T.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:d?`No reviews found with ${d} star rating.`:"No reviews yet. Be the first to review!"})}):e.jsx(ca,{mode:"wait",children:j?e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,ease:"easeInOut"},className:"max-w-4xl mx-auto space-y-4",children:$.map((L,M)=>e.jsx(dj,{review:L,index:M,isExpanded:w.has(L._id),onToggleExpand:()=>{const B=new Set(w);w.has(L._id)?B.delete(L._id):B.add(L._id),D(B)},view:"list",isClient:l},L._id))},"list-view"):e.jsx(st.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4,ease:"easeInOut"},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:$.map((L,M)=>e.jsx(dj,{review:L,index:M,isExpanded:w.has(L._id),onToggleExpand:()=>{const B=new Set(w);w.has(L._id)?B.delete(L._id):B.add(L._id),D(B)},view:"grid",isClient:l},L._id))},"grid-view")}),T.length>6&&!j&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{onClick:()=>f(!b),className:"inline-flex items-center gap-2 bg-cream-900 text-cream-50 px-6 py-3 rounded-xl font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1",children:[b?"Show Less":`Show More (${T.length-6} more)`,e.jsx(Yr,{size:18,className:`transition-transform ${b?"rotate-90":""}`})]})}),T.length>0&&e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>{v(!j),j||f(!1)},className:"inline-flex items-center gap-2 bg-cream-900 text-cream-50 px-5 py-2.5 rounded-lg font-medium hover:bg-cream-800 transition-all shadow-md hover:shadow-lg",children:j?"Show Less":"View All"})})]})})},OE=()=>e.jsx("section",{className:"pt-8 pb-24 bg-cream-100 relative overflow-hidden",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(st.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"bg-white p-10 md:p-16 rounded-3xl shadow-xl",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900 mb-2",children:"About Prints24"}),e.jsx("div",{className:"w-24 h-1 bg-cream-400 mx-auto rounded-full"})]}),e.jsxs("div",{className:"space-y-8 text-cream-800 leading-relaxed",children:[e.jsxs("p",{className:"text-lg",children:["Prints24 is a modern, fast-growing"," ",e.jsx("span",{className:"font-semibold",children:"Digital & Offset Printing Company"}),", whose aim is to provide Fast, Creative, and High-Quality printing solutions to customers."]}),e.jsx("p",{children:"We started Prints24 with the idea that today's digital generation should get a platform where they can avail all types of printing services, from small quantities (Short Run) to Bulk Printing, in an easy, fast, and reliable manner."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mt-12",children:[e.jsxs("div",{className:"bg-cream-50 p-6 rounded-xl border border-cream-200",children:[e.jsxs("h3",{className:"font-serif text-xl font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-cream-900 text-white rounded-full flex items-center justify-center text-sm",children:"V"})," ","Vision"]}),e.jsx("p",{className:"text-sm",children:"To make Affordable, Stylish, and Premium Quality Printing easily accessible to every individual and every business."})]}),e.jsxs("div",{className:"bg-cream-50 p-6 rounded-xl border border-cream-200",children:[e.jsxs("h3",{className:"font-serif text-xl font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-cream-900 text-white rounded-full flex items-center justify-center text-sm",children:"M"})," ","Mission"]}),e.jsxs("ul",{className:"text-sm space-y-2 list-disc list-inside",children:[e.jsx("li",{children:"To make Modern Printing easy and accessible to everyone."}),e.jsx("li",{children:"To provide smart solutions with Quick Delivery + High Quality."}),e.jsx("li",{children:"To make better options available according to every budget."})]})]})]})]})]})})})}),RE=()=>e.jsx("section",{className:"pt-24 pb-8 bg-cream-900 text-cream-50 text-center",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs(st.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.6},viewport:{once:!0},children:[e.jsx("div",{className:"mb-8 inline-flex items-center justify-center w-16 h-16 bg-cream-800 rounded-full",children:e.jsx(Yr,{size:32,className:"text-amber-300"})}),e.jsx("h2",{className:"font-serif text-4xl font-bold mb-6",children:"Have a Design Ready?"}),e.jsx("p",{className:"text-xl text-cream-200 max-w-2xl mx-auto mb-10",children:"Skip the templates and upload your own artwork. Our automated system checks for errors instantly."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm text-cream-300 mb-10",children:[e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"PDF"}),e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"AI"}),e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"PSD"}),e.jsx("span",{className:"px-4 py-1 bg-cream-800 rounded-full border border-cream-700",children:"JPG/PNG"})]}),e.jsx(ys,{to:"/upload",className:"bg-cream-50 text-cream-900 px-10 py-4 rounded-full text-lg font-bold hover:bg-cream-200 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1",children:"Upload Now"})]})})});function Hd(){const[s,r]=y.useState(!1);return y.useEffect(()=>{r(!0)},[]),s}const hx="https://print24-pricing-test-680867814154.asia-south1.run.app",Ae=`${hx}/api`,ME=()=>{const[s,r]=y.useState([]),[n,l]=y.useState(!0),[d,m]=y.useState([]),[u,p]=y.useState(!0),[b,f]=y.useState(!1),j=Hd();return y.useEffect(()=>{(async()=>{try{l(!0);const w=Ae,D={Accept:"application/json"},P=await fetch(`${w}/categories/digital`,{method:"GET",headers:D}),T=await P.text();if(!P.ok)throw new Error(`HTTP ${P.status}`);const $=JSON.parse(T),L=await fetch(`${w}/categories/bulk`,{method:"GET",headers:D}),M=await L.text();if(!L.ok)throw new Error(`HTTP ${L.status}`);const B=JSON.parse(M),ce=$.map(O=>({...O,type:"digital"})),U=B.map(O=>({...O,type:"bulk"}));ce.sort((O,k)=>(O.sortOrder||0)-(k.sortOrder||0)),U.sort((O,k)=>(O.sortOrder||0)-(k.sortOrder||0)),r([...ce,...U])}catch(w){console.error("Fetch categories error:",w)}finally{l(!1)}})()},[]),y.useEffect(()=>{if(typeof window>"u")return;const v=localStorage.getItem("token");f(!!v)},[]),y.useEffect(()=>{(async()=>{try{p(!0);const w=Ae,D={Accept:"application/json"},P=await fetch(`${w}/reviews`,{method:"GET",headers:D});if(!P.ok)throw new Error(`HTTP ${P.status}`);const T=await P.json();m(T)}catch(w){console.error("Fetch reviews error:",w)}finally{p(!1)}})()},[]),e.jsxs("div",{className:"w-full mt-5 overflow-hidden pr-4",children:[e.jsx(SE,{}),e.jsx(TE,{categories:s,loadingCategories:n,children:e.jsx(kE,{categories:s,loadingCategories:n})}),e.jsx(PE,{reviews:d,loadingReviews:u,isLoggedIn:b,isClient:j}),e.jsx(OE,{}),e.jsx(RE,{})]})},uj=({containerId:s,interval:r=5e3,slideInterval:n=3e3,scrollAmount:l=150,onScroll:d})=>{const m=y.useRef(null),u=y.useRef(null),p=y.useRef(!1),b=y.useRef(Date.now()),f=y.useCallback(()=>{m.current&&(clearTimeout(m.current),m.current=null),u.current&&(clearInterval(u.current),u.current=null)},[]),j=y.useCallback(()=>{p.current||!document.getElementById(s)||(u.current=setInterval(()=>{if(p.current){clearInterval(u.current),u.current=null;return}const $=document.getElementById(s);if($)if(d)d($);else{const L=$.scrollWidth-$.clientWidth;$.scrollLeft>=L-10?$.scrollTo({left:0,behavior:"smooth"}):$.scrollTo({left:$.scrollLeft+l,behavior:"smooth"})}},n))},[s,n,l,d]),v=y.useCallback(()=>{f(),m.current=setTimeout(()=>{j()},r)},[r,j,f]),w=y.useCallback(()=>{f(),b.current=Date.now(),v()},[v,f]),D=y.useCallback(()=>{p.current=!0,f()},[f]),P=y.useCallback(()=>{p.current=!1,v()},[v]);return y.useEffect(()=>{if(typeof window>"u")return;const T=document.getElementById(s);if(!T)return;const $=()=>w(),L=()=>w(),M=()=>w(),B=()=>w(),ce=()=>w(),U=()=>w(),O=()=>w(),k=()=>w(),W=()=>w(),Q=()=>w(),ne=()=>{D()},le=()=>{P()};return document.addEventListener("mousemove",$),document.addEventListener("mousedown",L),document.addEventListener("click",M),document.addEventListener("mouseover",B),document.addEventListener("keydown",ce),document.addEventListener("keyup",U),document.addEventListener("keypress",O),document.addEventListener("touchstart",k),document.addEventListener("touchmove",W),document.addEventListener("wheel",Q),T&&(T.addEventListener("mouseenter",ne),T.addEventListener("mouseleave",le)),v(),()=>{f(),document.removeEventListener("mousemove",$),document.removeEventListener("mousedown",L),document.removeEventListener("click",M),document.removeEventListener("mouseover",B),document.removeEventListener("keydown",ce),document.removeEventListener("keyup",U),document.removeEventListener("keypress",O),document.removeEventListener("touchstart",k),document.removeEventListener("touchmove",W),document.removeEventListener("wheel",Q),T&&(T.removeEventListener("mouseenter",ne),T.removeEventListener("mouseleave",le))}},[s,w,D,P,v,f]),{pause:D,resume:P,reset:w}},Ca=({label:s,options:r,value:n,onChange:l,className:d="",id:m})=>{const[u,p]=y.useState(!1),b=y.useRef(null);y.useEffect(()=>{const j=v=>{b.current&&!b.current.contains(v.target)&&p(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]);const f=r.find(j=>j.value===n);return e.jsxs("div",{className:`relative ${d}`,ref:b,id:m?`${m}-container`:void 0,children:[e.jsxs("button",{type:"button",id:m,onClick:()=>p(!u),className:"flex items-center gap-2 px-4 py-2.5 border-2 border-cream-300 rounded-lg bg-white text-cream-900 cursor-pointer hover:border-cream-500 transition-all shadow-sm hover:shadow-md min-w-[140px] justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:f?f.label:s}),e.jsx(_h,{size:16,className:`transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
            .filter-dropdown-scroll::-webkit-scrollbar {
              width: 6px;
            }
            .filter-dropdown-scroll::-webkit-scrollbar-track {
              background: #f5f5f0;
              border-radius: 3px;
            }
            .filter-dropdown-scroll::-webkit-scrollbar-thumb {
              background: #d4a574;
              border-radius: 3px;
            }
            .filter-dropdown-scroll::-webkit-scrollbar-thumb:hover {
              background: #c49564;
            }
          `}),e.jsx("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-cream-200 z-50 overflow-hidden",children:e.jsx("div",{className:"p-2 overflow-y-auto filter-dropdown-scroll",style:{maxHeight:"132px",scrollbarWidth:"thin",scrollbarColor:"#d4a574 #f5f5f0"},children:r.map(j=>e.jsxs("button",{type:"button",onClick:()=>{l(j.value),p(!1)},className:"w-full flex items-center justify-between px-3 py-2 text-sm text-cream-900 hover:bg-cream-50 rounded-md transition-colors",children:[e.jsx("span",{children:j.label}),n===j.value&&e.jsx(Za,{size:16,className:"text-cream-900"})]},j.value===null?"null":j.value))})})]})]})},Go=s=>s>=1536?7:s>=1280?6:s>=1024?5:s>=768?4:s>=640?3:2,_E=()=>{var I,K;const s=ar(),[r,n]=y.useState([]),[l,d]=y.useState([]),[m,u]=y.useState(!0),[p,b]=y.useState(null),[f,j]=y.useState(null),[v,w]=y.useState(null),[D,P]=y.useState(null),[T,$]=y.useState([]),[L,M]=y.useState(!1),[B,ce]=y.useState(""),U=uj({containerId:"digital-scroll-container",interval:6e3,slideInterval:3e3,scrollAmount:150,onScroll:q=>{const de=q.scrollWidth-q.clientWidth,Ce=q.scrollLeft,A=window.innerWidth,G=Go(A),ie=A/G;if(Ce>=de-10)q.scrollTo({left:0,behavior:"smooth"});else{const Re=Ce+ie;Re>=de?q.scrollTo({left:de,behavior:"smooth"}):q.scrollTo({left:Re,behavior:"smooth"})}}});y.useEffect(()=>{window.digitalUpdateFromArrow=()=>{U.reset()}},[U]);const O=uj({containerId:"bulk-scroll-container",interval:6e3,slideInterval:3e3,scrollAmount:150,onScroll:q=>{const de=q.scrollWidth-q.clientWidth,Ce=q.scrollLeft,A=window.innerWidth,G=Go(A),ie=A/G;if(Ce>=de-10)q.scrollTo({left:0,behavior:"smooth"});else{const Re=Ce+ie;Re>=de?q.scrollTo({left:de,behavior:"smooth"}):q.scrollTo({left:Re,behavior:"smooth"})}}});if(y.useEffect(()=>{window.bulkUpdateFromArrow=()=>{O.reset()}},[O]),y.useEffect(()=>{(async()=>{try{u(!0),b(null);const de=Ae,Ce={Accept:"application/json"},A=await fetch(`${de}/categories/digital`,{method:"GET",headers:Ce}),G=await A.text();if(G.trim().startsWith("<!DOCTYPE")||G.trim().startsWith("<html"))throw new Error("Server returned HTML instead of JSON. Please check your server configuration.");if(!A.ok)throw new Error(`HTTP ${A.status} - ${A.statusText}`);const ie=JSON.parse(G),Re=Array.isArray(ie)?ie.sort((Ie,Be)=>(Ie.sortOrder||0)-(Be.sortOrder||0)):ie;n(Re);const ge=await fetch(`${de}/categories/bulk`,{method:"GET",headers:Ce}),R=await ge.text();if(R.trim().startsWith("<!DOCTYPE")||R.trim().startsWith("<html"))throw new Error("Server returned HTML instead of JSON. Please check your server configuration.");if(!ge.ok)throw new Error(`HTTP ${ge.status} - ${ge.statusText}`);const re=JSON.parse(R),je=Array.isArray(re)?re.sort((Ie,Be)=>(Ie.sortOrder||0)-(Be.sortOrder||0)):re;d(je)}catch(de){b(de instanceof Error?de.message:"An unknown error occurred"),console.error("Fetch categories error:",de)}finally{u(!1)}})()},[]),y.useEffect(()=>{(async()=>{if(!v){$([]),P(null);return}try{M(!0);const de=Ae,Ce={Accept:"application/json"},A=await fetch(`${de}/subcategories/category/${v}?includeChildren=true`,{method:"GET",headers:Ce});if(A.ok){const G=await A.text();if(!G.trim().startsWith("<!DOCTYPE")&&!G.trim().startsWith("<html")){const ie=JSON.parse(G),Re=Array.isArray(ie)?ie:(ie==null?void 0:ie.data)||[],R=(re=>{let je=[];return re.forEach(Ie=>{if(je.push({...Ie,_displayLevel:0}),Ie.children&&Ie.children.length>0){const Be=Ie.children.map(et=>({...et,_displayLevel:1,_parentName:Ie.name}));je=je.concat(Be)}}),je})(Re);R.sort((re,je)=>(re.sortOrder||0)-(je.sortOrder||0)),$(R)}else $([])}else $([])}catch(de){console.error("Error fetching subcategories:",de),$([])}finally{M(!1)}})()},[v]),m)return e.jsx("div",{className:"min-h-screen bg-cream-50 py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-cream-900 mb-4",children:"Services"}),e.jsx("p",{className:"text-cream-600",children:"Loading categories..."})]})})});if(p)return e.jsx("div",{className:"min-h-screen bg-cream-50 py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-cream-900 mb-4",children:"Services"}),e.jsxs("p",{className:"text-cream-600",children:["Error: ",p]})]})})});const k=[...r.map(q=>({...q,type:"Digital"})),...l.map(q=>({...q,type:"Bulk"}))],W=v?k.find(q=>q._id===v):null,Q=!f||f==="Digital",ne=!f||f==="Bulk",le=W?W.type==="Digital":Q,me=W?W.type==="Bulk":ne,Ve=r.filter(q=>!(f&&f!=="Digital"||v&&q._id!==v||B&&!q.name.toLowerCase().includes(B.toLowerCase()))),F=l.filter(q=>!(f&&f!=="Bulk"||v&&q._id!==v||B&&!q.name.toLowerCase().includes(B.toLowerCase()))),J=k.map(q=>({value:q._id,label:`${q.name} (${q.type})`}));return e.jsx("div",{className:"min-h-screen bg-cream-50",children:e.jsxs("div",{className:"container mx-auto px-2 xs:px-3 sm:px-4 md:px-6 lg:px-8 pt-4 xs:pt-5 sm:pt-6 md:pt-8 lg:pt-10 pb-8 xs:pb-10 sm:pb-12 md:pb-16 lg:pb-20",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-4 flex-1",children:[e.jsxs("div",{className:"sm:w-48",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Print Type"}),e.jsx(Ca,{label:"All Types",value:f,onChange:q=>{j(q),w(null)},options:[{value:null,label:"All Types"},{value:"Digital",label:"Digital Print"},{value:"Bulk",label:"Bulk Print"}],className:"w-full"})]}),e.jsxs("div",{className:"flex-1 sm:flex-initial sm:w-64",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Category"}),e.jsx(Ca,{label:"All Categories",value:v,onChange:q=>{if(w(q),P(null),q){const de=k.find(Ce=>Ce._id===q);de&&j(de.type)}else j(null)},options:[{value:null,label:"All Categories"},...J.filter(q=>{if(f){const de=k.find(Ce=>Ce._id===q.value);return(de==null?void 0:de.type)===f}return!0})],className:"w-full"})]}),v&&e.jsxs("div",{className:"flex-1 sm:flex-initial sm:w-64",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Subcategory"}),e.jsx(Ca,{label:L?"Loading...":"All Subcategories",value:D,onChange:q=>{if(P(q),q&&v){const de=T.find(Ce=>Ce._id===q);if(de){const Ce=de._id;s(`/digital-print/${v}/${Ce}`)}}},options:[{value:null,label:"All Subcategories"},...T.map(q=>({value:q._id,label:q.name}))],className:"w-full"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-4 flex-1 sm:flex-initial sm:justify-end",children:[e.jsxs("div",{className:"relative sm:w-64",children:[e.jsx(di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:B,onChange:q=>ce(q.target.value),className:"w-full pl-10 pr-10 py-2.5 border-2 border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 text-sm sm:text-base bg-white shadow-sm transition-all"}),B&&e.jsx("button",{onClick:()=>ce(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cream-500 hover:text-cream-700 transition-colors",children:e.jsx(as,{size:18})})]}),(f||v||D||B)&&e.jsxs("button",{onClick:()=>{j(null),w(null),P(null),ce("")},className:"flex items-center gap-2 px-4 py-2.5 text-sm text-cream-700 hover:text-cream-900 bg-cream-100 hover:bg-cream-200 rounded-lg transition-colors whitespace-nowrap",children:[e.jsx(as,{size:16}),"Clear All"]})]})]}),(f||v||D||B)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4 pt-4 border-t border-cream-200",children:[e.jsx("span",{className:"text-xs font-medium text-cream-600",children:"Active filters:"}),f&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-xs font-medium flex items-center gap-2",children:["Type: ",f,e.jsx("button",{onClick:()=>{j(null),w(null),P(null)},className:"hover:text-red-600",children:e.jsx(as,{size:12})})]}),v&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-xs font-medium flex items-center gap-2",children:["Category: ",(I=k.find(q=>q._id===v))==null?void 0:I.name,e.jsx("button",{onClick:()=>{w(null),P(null),j(null)},className:"hover:text-red-600",children:e.jsx(as,{size:12})})]}),D&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-xs font-medium flex items-center gap-2",children:["Subcategory: ",(K=T.find(q=>q._id===D))==null?void 0:K.name,e.jsx("button",{onClick:()=>{P(null)},className:"hover:text-red-600",children:e.jsx(as,{size:12})})]})]})]}),le&&e.jsxs("div",{className:"mb-8 xs:mb-10 sm:mb-12 md:mb-16 lg:mb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 xs:gap-2.5 sm:gap-3 mb-4 xs:mb-5 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 xs:w-9 xs:h-9 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-lg sm:rounded-xl",style:{backgroundColor:"#588157"},children:e.jsx(z3,{className:"text-white w-4 h-4 xs:w-5 xs:h-5 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-lg xs:text-xl sm:text-2xl md:text-3xl font-bold text-cream-900",children:"Digital Print"}),e.jsx("p",{className:"text-cream-600 text-xs xs:text-sm sm:text-base font-medium",children:"Fast & small batches"})]})]}),e.jsxs("div",{className:"relative group/slider overflow-hidden",children:[e.jsx("button",{onClick:()=>{const q=document.getElementById("digital-scroll-container");if(q){const de=window.innerWidth,Ce=Go(de),A=de/Ce,G=q.scrollLeft;G<=0?q.scrollTo({left:q.scrollWidth-q.clientWidth,behavior:"smooth"}):q.scrollTo({left:G-A,behavior:"smooth"})}window.digitalUpdateFromArrow&&window.digitalUpdateFromArrow()},className:"absolute left-2 sm:left-3 md:left-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(po,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("button",{onClick:()=>{const q=document.getElementById("digital-scroll-container");if(q){const de=window.innerWidth,Ce=Go(de),A=de/Ce,G=q.scrollLeft,ie=q.scrollWidth-q.clientWidth,Re=G+A;G>=ie-1?q.scrollTo({left:0,behavior:"smooth"}):Re>=ie?q.scrollTo({left:ie,behavior:"smooth"}):q.scrollTo({left:Re,behavior:"smooth"})}window.digitalUpdateFromArrow&&window.digitalUpdateFromArrow()},className:"absolute right-2 sm:right-3 md:right-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(sr,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("div",{id:"digital-scroll-container",className:"flex overflow-x-auto overflow-y-hidden pb-2 sm:pb-3 md:pb-4 snap-x snap-mandatory scroll-smooth touch-pan-x",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth"},children:Ve.length===0?e.jsx("div",{className:"w-full text-center py-8 text-cream-600",children:"No digital print categories found matching your filters."}):Ve.map((q,de)=>e.jsx(st.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:de*.03},className:"flex-shrink-0 snap-start transition-all duration-500 ease-in-out w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 px-1 sm:px-1.5 md:px-2",children:e.jsx(ys,{to:`/digital-print/${q._id}`,className:"block",children:e.jsxs("div",{className:"group flex flex-col items-center gap-1.5 sm:gap-2 p-2 sm:p-2.5 rounded-lg transition-all duration-300 bg-cream-50",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 lg:w-32 lg:h-32 xl:w-36 xl:h-36 rounded-full overflow-hidden bg-white group-hover:bg-[#f5faf0] transition-all duration-300 shadow-sm sm:shadow-md group-hover:shadow-lg group-hover:scale-105 flex items-center justify-center",children:e.jsx("img",{src:q.image,alt:q.name,className:`${q.name.toLowerCase().includes("visiting card")?"w-full h-full object-cover":q.name.toLowerCase().includes("card holder")?"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 lg:w-16 lg:h-16 xl:w-18 xl:h-18 object-contain":"w-14 h-14 sm:w-16 sm:h-16 md:w-18 md:h-18 lg:w-20 lg:h-20 xl:w-22 xl:h-22 object-contain"}`})}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-cream-900 text-center max-w-[80px] sm:max-w-[100px] md:max-w-[120px] line-clamp-2 leading-tight mt-0.5",children:q.name})]})})},q._id))})]})]}),me&&e.jsxs("div",{className:"mb-0",children:[e.jsxs("div",{className:"flex items-center gap-2 xs:gap-2.5 sm:gap-3 mb-4 xs:mb-5 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 xs:w-9 xs:h-9 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-lg sm:rounded-xl",style:{backgroundColor:"#003049"},children:e.jsx(Pm,{className:"text-white w-4 h-4 xs:w-5 xs:h-5 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-lg xs:text-xl sm:text-2xl md:text-3xl font-bold text-cream-900",children:"Bulk & Offset Print"}),e.jsx("p",{className:"text-cream-600 text-xs xs:text-sm sm:text-base font-medium",children:"Quality & large orders"})]})]}),e.jsxs("div",{className:"relative group/slider overflow-hidden",children:[e.jsx("button",{onClick:()=>{const q=document.getElementById("bulk-scroll-container");if(q){const de=window.innerWidth,Ce=Go(de),A=de/Ce,G=q.scrollLeft;G<=0?q.scrollTo({left:q.scrollWidth-q.clientWidth,behavior:"smooth"}):q.scrollTo({left:G-A,behavior:"smooth"})}window.bulkUpdateFromArrow&&window.bulkUpdateFromArrow()},className:"absolute left-2 sm:left-3 md:left-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(po,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("button",{onClick:()=>{const q=document.getElementById("bulk-scroll-container");if(q){const de=window.innerWidth,Ce=Go(de),A=de/Ce,G=q.scrollLeft,ie=q.scrollWidth-q.clientWidth,Re=G+A;G>=ie-1?q.scrollTo({left:0,behavior:"smooth"}):Re>=ie?q.scrollTo({left:ie,behavior:"smooth"}):q.scrollTo({left:Re,behavior:"smooth"})}window.bulkUpdateFromArrow&&window.bulkUpdateFromArrow()},className:"absolute right-2 sm:right-3 md:right-4 z-10 w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-white/95 hover:bg-white active:bg-white shadow-md sm:shadow-lg rounded-full flex items-center justify-center text-cream-900 hover:text-cream-600 active:scale-95 transition-all opacity-100 sm:opacity-0 sm:group-hover/slider:opacity-100 touch-manipulation",style:{top:"calc(50% - 1rem)"},children:e.jsx(sr,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"})}),e.jsx("div",{id:"bulk-scroll-container",className:"flex overflow-x-auto overflow-y-hidden pb-2 sm:pb-3 md:pb-4 snap-x snap-mandatory scroll-smooth touch-pan-x",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth"},children:F.length===0?e.jsx("div",{className:"w-full text-center py-8 text-cream-600",children:"No bulk print categories found matching your filters."}):F.map((q,de)=>e.jsx(st.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:de*.03},className:"flex-shrink-0 snap-start transition-all duration-500 ease-in-out w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 px-1 sm:px-1.5 md:px-2",children:e.jsx(ys,{to:`/digital-print/${q._id}`,className:"block",children:e.jsxs("div",{className:"group flex flex-col items-center gap-1.5 sm:gap-2 p-2 sm:p-2.5 rounded-lg transition-all duration-300 bg-cream-50",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 lg:w-32 lg:h-32 xl:w-36 xl:h-36 rounded-full overflow-hidden bg-white group-hover:bg-[#f5fbff] transition-all duration-300 shadow-sm sm:shadow-md group-hover:shadow-lg group-hover:scale-105 flex items-center justify-center",children:e.jsx("img",{src:q.image,alt:q.name,className:`${q.name.toLowerCase().includes("visiting card")?"w-full h-full object-cover":q.name.toLowerCase().includes("card holder")?"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 lg:w-16 lg:h-16 xl:w-18 xl:h-18 object-contain":"w-14 h-14 sm:w-16 sm:h-16 md:w-18 md:h-18 lg:w-20 lg:h-20 xl:w-22 xl:h-22 object-contain"}`})}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-cream-900 text-center max-w-[80px] sm:max-w-[100px] md:max-w-[120px] line-clamp-2 leading-tight mt-0.5",children:q.name})]})})},q._id))})]})]})]})})};function Qo(...s){return s.filter(Boolean).join(" ")}const jh=y.forwardRef(({options:s,value:r,onValueChange:n,placeholder:l="Select...",disabled:d,className:m},u)=>{const[p,b]=y.useState(!1),f=y.useRef(null);y.useEffect(()=>{const v=w=>{f.current&&!f.current.contains(w.target)&&b(!1)};if(p)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[p]);const j=s.find(v=>v.value===r);return e.jsxs("div",{className:Qo("relative",m),ref:f,children:[e.jsxs("button",{ref:u,type:"button",disabled:d,onClick:()=>!d&&b(!p),className:Qo("flex h-10 w-full items-center justify-between rounded-md border border-cream-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-cream-500 focus:outline-none focus:ring-2 focus:ring-cream-900 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",p&&"ring-2 ring-cream-900"),children:[e.jsx("span",{className:Qo("block truncate",!j&&"text-cream-500"),children:j?j.label:l}),e.jsx(_h,{className:Qo("h-4 w-4 opacity-50 transition-transform",p&&"rotate-180")})]}),p&&e.jsx("div",{className:"absolute z-50 mt-1 w-full overflow-hidden rounded-md border border-cream-200 bg-white shadow-lg",children:e.jsx("div",{className:"max-h-60 overflow-auto p-1",children:s.length===0?e.jsx("div",{className:"px-2 py-1.5 text-sm text-cream-500",children:"No options available"}):s.map(v=>e.jsxs("button",{type:"button",onClick:()=>{n==null||n(v.value),b(!1)},className:Qo("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none hover:bg-cream-50 focus:bg-cream-50",r===v.value&&"bg-cream-50"),children:[e.jsx("span",{className:Qo("block truncate",r===v.value&&"font-medium"),children:v.label}),r===v.value&&e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Za,{className:"h-4 w-4 text-cream-900"})})]},v.value))})})]})});jh.displayName="Select";const kr=({fallbackPath:s="/",label:r="Back",className:n="",onClick:l})=>{const d=ar(),m=tn(),u=y.useRef(null);y.useEffect(()=>{const b=m.pathname;if(u.current===null){u.current=b;return}const f=setTimeout(()=>{u.current=b},0);return()=>clearTimeout(f)},[m.pathname]);const p=()=>{if(l){l(),typeof window<"u"&&setTimeout(()=>{window.scrollTo(0,0)},100);return}const b=m.state!==null&&m.state!==void 0,f=typeof window<"u"&&window.history.length>1,j=m.pathname,v=u.current;d(f||b||v&&v!==j?-1:s),typeof window<"u"&&window.scrollTo(0,0)};return e.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),p()},className:`flex items-center text-slate-500 hover:text-slate-700 transition-colors font-medium cursor-pointer ${n}`,type:"button",children:[e.jsx(Cd,{className:"w-4 h-4 mr-2"}),r]})},mj=({attributes:s,rules:r,selectedValues:n={}})=>{const l=s.reduce((m,u)=>(m[u._id.toString()]={...u,isVisible:!0,allowedValues:u.attributeValues?u.attributeValues.map(p=>p.value):[],defaultValue:u.defaultValue||null,visibilitySetByRule:!1,valuesRestrictedByRule:!1},m),{}),d=[...r].sort((m,u)=>(u.priority||0)-(m.priority||0));for(const m of d){const u=typeof m.when.attribute=="object"?m.when.attribute._id.toString():m.when.attribute.toString(),p=n[u];if(!(!p||String(p)!==m.when.value))for(const b of m.then){const f=typeof b.targetAttribute=="object"?b.targetAttribute._id.toString():b.targetAttribute.toString();if(!l[f])continue;const j=l[f];switch(b.action){case"SHOW":j.isVisible=!0,j.visibilitySetByRule=!0;break;case"HIDE":j.isVisible=!1,j.visibilitySetByRule=!0;break;case"SHOW_ONLY":if(Array.isArray(b.allowedValues)&&b.allowedValues.length>0){const v=j.attributeValues?j.attributeValues.map(w=>w.value):[];j.allowedValues=b.allowedValues.filter(w=>v.includes(w)),j.valuesRestrictedByRule=!0}break;case"SET_DEFAULT":b.defaultValue&&(j.allowedValues.length===0||j.allowedValues.includes(b.defaultValue))&&(j.defaultValue=b.defaultValue);break}}}return Object.keys(l).forEach(m=>{const u=l[m];!u.isVisible&&n[m]&&delete n[m],u.valuesRestrictedByRule&&n[m]&&!u.allowedValues.includes(String(n[m]))&&delete n[m],!u.valuesRestrictedByRule&&u.attributeValues&&(u.allowedValues=u.attributeValues.map(p=>p.value))}),{attributes:Object.values(l),selectedValues:n}};function zE(){const[s,r]=y.useState(null),[n,l]=y.useState(!0),[d,m]=y.useState(null),u=y.useCallback(async()=>{try{l(!0),m(null);const p=localStorage.getItem("token"),b=localStorage.getItem("userLocation");let f=null;if(b)try{f=JSON.parse(b).pincode,console.log(" Using pincode from LocationDetector:",f)}catch(P){console.warn("Failed to parse stored location:",P)}const j={"Content-Type":"application/json"};p&&(j.Authorization=`Bearer ${p}`);const v={method:f?"POST":"GET",headers:j};f&&(v.body=JSON.stringify({pincode:f}));const w=await fetch(`${hx}/api/user/context`,v);if(!w.ok)throw new Error(`Failed to fetch user context: ${w.status}`);const D=await w.json();if(D.success)r(D),console.log(" User context loaded:",{user:D.user.name,segment:D.segment.name,location:D.location.pincode,detectionMethod:D.location.detectionMethod});else throw new Error(D.message||"Failed to load user context")}catch(p){console.error(" Error fetching user context:",p),m(p.message||"Network error"),r({user:{id:null,name:"Guest",email:null,mobileNumber:null,userType:"guest",role:"guest",isAuthenticated:!1,isGuest:!0},segment:{id:null,code:"RETAIL",name:"Retail Customer",pricingTier:0},location:{pincode:null,geoZone:{id:null,name:null},territoryAccess:[],detectionMethod:"FALLBACK"},pricing:{currency:"INR",creditLimit:null,paymentTerms:null},meta:{timestamp:new Date().toISOString(),source:"FALLBACK"}})}finally{l(!1)}},[]);return y.useEffect(()=>{u()},[u]),y.useEffect(()=>{const p=b=>{b.key==="token"&&(console.log(" Token changed, refetching context..."),u())};return window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)},[u]),{context:s,loading:n,error:d,refetch:u}}function LE({productId:s,selectedDynamicAttributes:r=[],quantity:n=1,showBreakdown:l=!1}){var L,M,B,ce,U,O,k,W,Q,ne;const[d,m]=y.useState(null),[u,p]=y.useState(null),[b,f]=y.useState(!0),[j,v]=y.useState(null),[w,D]=y.useState({isNotAvailable:!1,message:""}),{context:P,loading:T}=zE();y.useEffect(()=>{s&&(async()=>{var me;if(!(T||!P)){f(!0),v(null),console.log(" Fetching pricing with context:",{segment:P.segment.code,pincode:P.location.pincode,user:P.user.name});try{const Ve=localStorage.getItem("token"),F={"Content-Type":"application/json"};Ve&&(F.Authorization=`Bearer ${Ve}`);const I={productId:s,selectedDynamicAttributes:(de=>!Array.isArray(de)||de.length===0?[]:de.map(Ce=>({type:Ce.attributeType||Ce.type,value:Ce.value,attributeType:Ce.attributeType||Ce.type,attributeValue:Ce.value})).filter(Ce=>Ce.value!=null))(r),quantity:n};P.location.pincode&&(I.pincode=P.location.pincode);const K=await fetch(`${hx}/api/pricing/quote`,{method:"POST",headers:F,body:JSON.stringify(I)});if(!K.ok){const de=await K.json().catch(()=>({})),Ce=de.message||`Server error: ${K.status}`;throw console.error(" Server error:",de),new Error(Ce)}const q=await K.json();q.success?(m(q.pricing),p(q.meta),console.log("\\n"+"=".repeat(80)),console.log(" PRICING API RESPONSE"),console.log("=".repeat(80)),console.log("\\n USER & SEGMENT:"),console.log(`   Segment: ${q.meta.userSegmentName} (${q.meta.userSegment})`),console.log(`   Guest Mode: ${q.meta.isGuest?"YES":"NO"}`),console.log(`   Authenticated: ${q.meta.isAuthenticated?"YES ":"NO "}`),console.log(`   Pricing Tier: ${q.meta.pricingTier}`),console.log("\\n LOCATION:"),console.log(`   Pincode: ${q.meta.pincode}`),console.log(`   Geo Zone: ${q.meta.geoZone||"Not mapped"}`),console.log(`   Detection Method: ${q.meta.detectedBy}`),q.meta.detectedBy==="IP_DETECTION"?console.log("     Location detected from IP address (not browser geolocation)"):console.log("    Location provided via request/localStorage"),console.log("\\n PRICING:"),console.log(`   Base Price: ${q.pricing.basePrice}`),console.log(`   Subtotal: ${q.pricing.subtotal}`),console.log(`   GST (${q.pricing.gstPercentage}%): ${q.pricing.gstAmount}`),console.log(`   Total Payable: ${q.pricing.totalPayable}`),console.log(`   Modifiers Applied: ${q.meta.modifiersApplied}`),((me=q.pricing.appliedModifiers)==null?void 0:me.length)>0&&(console.log("\\n MODIFIERS:"),q.pricing.appliedModifiers.forEach((de,Ce)=>{console.log(`   ${Ce+1}. ${de.name}: ${de.applied>0?"+":""}${de.applied} (${de.type})`)})),console.log("=".repeat(80)+"\\n")):q.isAvailable===!1||q.errorCode==="PRODUCT_NOT_AVAILABLE"?(D({isNotAvailable:!0,message:q.displayMessage||q.message||"This product is not available in your region"}),console.log(" Product Not Available:",q.message)):v(q.error||q.message||"Failed to calculate price")}catch(Ve){console.error(" ProductPriceBox: Error fetching pricing:",Ve),v(Ve.message||"Network error")}finally{f(!1)}}})()},[s,JSON.stringify(r),n,P,T]);const $=le=>le==null||isNaN(le)?"0.00":`${le.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return T||b?e.jsxs("div",{className:"price-box loading animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-24"})]}):j?e.jsx("div",{className:"price-box error",children:e.jsxs("div",{className:"text-red-500 text-sm mt-2 flex items-center gap-2 bg-red-50 p-2 rounded",children:[e.jsx("span",{className:"font-bold",children:" Error:"})," ",j,e.jsx("button",{onClick:()=>window.location.reload(),className:"underline ml-2 hover:text-red-700",children:"Retry"})]})}):w.isNotAvailable?e.jsx("div",{className:"price-box not-available",children:e.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),e.jsx("h3",{className:"text-lg font-bold text-amber-800",children:"Product Not Available"}),e.jsx("p",{className:"text-amber-700 text-sm",children:w.message}),((M=(L=P==null?void 0:P.location)==null?void 0:L.geoZone)==null?void 0:M.name)&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" Your region: ",e.jsx("strong",{children:P.location.geoZone.name})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please check other products or contact support for availability"})]})})}):d?e.jsxs("div",{className:"price-box",children:[!l&&e.jsxs("div",{className:"space-y-3",children:[r&&r.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-3 pb-2 border-b border-gray-100",children:"Selected Options:"}),e.jsx("div",{className:"space-y-2",children:r.filter(le=>{const me=le.value||le.attributeValue;return typeof me=="string"&&(me.length>30||/^[0-9a-f]{24}$/i.test(me))?!1:me!=null&&me!==""}).map((le,me)=>{const Ve=le.name||le.attributeName||le.type||le.attributeType||"Option",F=le.label||le.value||le.attributeValue;return e.jsxs("div",{className:"flex justify-between items-center text-sm py-1.5 px-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:Ve}),e.jsx("span",{className:"font-semibold text-gray-900",children:F})]},me)})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Unit Price"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:$(d.subtotal/n)})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-0.5",children:[" ",n.toLocaleString()," units"]}),e.jsx("div",{className:"text-base font-bold text-gray-900",children:$(d.subtotal)})]})]})}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["GST (",d.gstPercentage,"%)"]}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:$(d.gstAmount)})]})}),e.jsx("div",{className:"px-5 py-4 bg-gradient-to-br from-green-500 to-emerald-600",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide mb-0.5",children:"Total Amount"}),e.jsx("div",{className:"text-xs text-white/90",children:"Inclusive of all taxes"})]}),e.jsx("div",{className:"text-3xl font-bold text-white",children:$(d.totalPayable)})]})})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center space-y-1",children:[e.jsxs("div",{children:["Price for ",n.toLocaleString()," units"]}),d.calculatedAt&&new Date(d.calculatedAt).toString()!=="Invalid Date"&&e.jsxs("div",{children:["Calculated at ",new Date(d.calculatedAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"price-main flex items-baseline gap-2",children:[d.compareAtPrice&&d.compareAtPrice>d.totalPayable&&e.jsx("span",{className:"text-sm text-gray-500 line-through",children:$(d.compareAtPrice)}),e.jsx("span",{className:"text-3xl font-bold text-blue-900",children:$(d.totalPayable)})]}),P&&e.jsxs("div",{className:"mt-3 p-3 bg-linear-to-r from-blue-50 to-green-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Pricing for:"}),e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded font-semibold",children:[" ",P.segment.name]}),P.location.geoZone.name&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded font-semibold",children:[" ",P.location.geoZone.name]}),P.location.pincode&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",P.location.pincode,")"]})]}),P.location.detectionMethod==="IP_DETECTION"&&e.jsx("div",{className:"mt-2 text-xs text-gray-600 italic flex items-center gap-1",children:e.jsx("span",{children:" Location detected from your IP address"})}),P.user.isGuest&&e.jsx("div",{className:"mt-2 text-xs text-blue-700 font-medium",children:" Login to unlock special pricing for your account"})]})]}),l&&e.jsxs("div",{className:"price-breakdown mt-4 space-y-2 border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"bg-linear-to-br from-blue-50 to-purple-50 rounded-lg p-4 mb-3",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"PRICING WATERFALL"})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-2 py-1 border-b border-blue-100",children:[e.jsxs("span",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx("span",{className:"text-blue-500",children:""})," Master Price:"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:$(d.basePrice)})]}),((B=d.appliedModifiers)==null?void 0:B.some(le=>le.type==="ZONE_BOOK"))&&e.jsxs("div",{className:"flex justify-between text-sm mb-2 py-1 border-b border-green-100 bg-green-50/50 px-2 rounded",children:[e.jsxs("span",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx("span",{className:"text-green-600",children:""})," Zone Override:",e.jsxs("span",{className:"text-xs text-green-700 font-medium",children:["(",((ce=d.appliedModifiers.find(le=>le.type==="ZONE_BOOK"))==null?void 0:ce.source)||"Zone Book",")"]})]}),e.jsx("span",{className:"font-semibold text-green-700",children:$(((U=d.appliedModifiers.find(le=>le.type==="ZONE_BOOK"))==null?void 0:U.afterPrice)||d.basePrice)})]}),((O=d.appliedModifiers)==null?void 0:O.some(le=>le.type==="SEGMENT_BOOK"))&&e.jsxs("div",{className:"flex justify-between text-sm mb-2 py-1 border-b border-purple-100 bg-purple-50/50 px-2 rounded",children:[e.jsxs("span",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx("span",{className:"text-purple-600",children:""})," Segment Override:",e.jsxs("span",{className:"text-xs text-purple-700 font-medium",children:["(",((k=d.appliedModifiers.find(le=>le.type==="SEGMENT_BOOK"))==null?void 0:k.source)||"Segment Book",")"]})]}),e.jsx("span",{className:"font-semibold text-purple-700",children:$(((W=d.appliedModifiers.find(le=>le.type==="SEGMENT_BOOK"))==null?void 0:W.afterPrice)||d.basePrice)})]}),((Q=d.appliedModifiers)==null?void 0:Q.filter(le=>le.type==="MODIFIER").length)>0&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-blue-200",children:[e.jsxs("div",{className:"text-xs font-semibold text-blue-700 mb-2 flex items-center gap-1",children:[e.jsx("span",{children:""})," Price Modifiers Applied:"]}),(ne=d.appliedModifiers)==null?void 0:ne.filter(le=>le.type==="MODIFIER").map((le,me)=>{let Ve=le.name||le.source||le.modifierName;le.modifierType==="PERCENT_DEC"&&(Ve+=` (${le.value}% off)`),le.modifierType==="PERCENT_INC"&&(Ve+=` (+${le.value}%)`),le.modifierType==="FLAT_DEC"&&(Ve+=` (-${le.value})`),le.modifierType==="FLAT_INC"&&(Ve+=` (+${le.value})`);const F=le.change||le.applied||0;return e.jsxs("div",{className:"flex justify-between text-xs mb-1 pl-2 py-1",children:[e.jsxs("span",{className:"text-gray-600",children:[Ve,":"]}),e.jsxs("span",{className:F>=0?"text-red-600 font-medium":"text-green-600 font-medium",children:[F>=0?"+":"",$(F)]})]},me)})]})]}),e.jsxs("div",{className:"flex justify-between font-medium text-gray-800 border-b border-dashed border-gray-200 pb-2",children:[e.jsx("span",{children:"Final Unit Price:"}),e.jsx("span",{children:$(d.subtotal/n)})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 pt-2",children:[e.jsxs("span",{children:["Subtotal (",n," units):"]}),e.jsx("span",{children:$(d.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:["GST (",d.gstPercentage,"%):"]}),e.jsx("span",{children:$(d.gstAmount)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-blue-900 border-t border-gray-300 pt-3 mt-2",children:[e.jsx("span",{children:"Total Payable:"}),e.jsx("span",{children:$(d.totalPayable)})]})]}),n>1&&e.jsxs("div",{className:"price-note mt-2 text-sm text-gray-500",children:["Price for ",n," units"]}),!1]}):null}const $E=({onLocationDetected:s,showUI:r=!0,autoDetect:n=!0})=>{const[l,d]=y.useState(null),[m,u]=y.useState(!1),[p,b]=y.useState(null),[f,j]=y.useState(""),[v,w]=y.useState(!1),[D,P]=y.useState("idle");y.useEffect(()=>{n&&!l&&T()},[n]),y.useEffect(()=>{l&&s&&(s(l),localStorage.setItem("userLocation",JSON.stringify(l)))},[l,s]);const T=async()=>{u(!0),b(null),P("ip"),console.log(" Step 1: Trying IP-based location detection...");try{const L=await fetch(`${Ae}/geolocation/from-ip`,{method:"POST",headers:{"Content-Type":"application/json"}}),M=await L.json();if(L.ok&&M.success&&M.data&&M.data.pincode){const B={...M.data,source:"ip"};d(B),P("idle"),u(!1),console.log(" IP location detected:",B);return}L.status===400?console.log(" IP detection unavailable (localhost/private IP) - trying GPS..."):console.log(" IP detection returned no pincode - trying GPS...")}catch{console.log(" IP detection error - trying GPS...")}navigator.geolocation?(P("gps"),console.log(" Step 2: Trying GPS location..."),navigator.geolocation.getCurrentPosition(async L=>{try{const{latitude:M,longitude:B}=L.coords;console.log(` GPS coordinates obtained: ${M}, ${B}`);const ce=await fetch(`${Ae}/geolocation/from-gps`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:M,lng:B})}),U=await ce.json();if(ce.ok&&U.success&&U.data&&U.data.pincode){const O={...U.data,source:"gps"};d(O),P("idle"),console.log(" GPS location detected:",O)}else throw new Error(U.error||"GPS reverse geocoding failed")}catch(M){console.error(" GPS reverse geocoding failed:",M.message),b("Unable to detect your location automatically"),w(!0),P("manual")}finally{u(!1)}},L=>{console.log(` GPS denied or unavailable (${L.message})`),b("Unable to detect your location automatically"),w(!0),P("manual"),u(!1)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:0})):(console.log(" GPS not available"),b("Unable to detect your location automatically"),w(!0),P("manual"),u(!1))},$=async L=>{if(L.preventDefault(),!f||f.length!==6){b("Please enter a valid 6-digit pincode");return}u(!0),b(null);try{const M=await fetch(`${Ae}/geolocation/detect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pincode:f})}),B=await M.json();if(M.ok&&B.success){const ce={...B.data,source:"manual"};d(ce),w(!1),console.log(" Manual pincode accepted:",ce)}else b(B.error||"Invalid pincode")}catch(M){b(M.message||"Failed to validate pincode")}finally{u(!1)}};return r?e.jsxs("div",{className:"location-detector bg-linear-to-r from-blue-50 to-green-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Jn,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:" Your Location"})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 py-2",children:[e.jsx(Qt,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[D==="ip"&&"Detecting from IP address...",D==="gps"&&"Getting GPS location...",D==="manual"&&"Validating pincode...",D==="idle"&&"Detecting location..."]})]}),p&&!l&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded mb-3",children:[e.jsx(bs,{className:"w-4 h-4 text-yellow-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:p}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Please enter your pincode below"})]})]}),l&&!v&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-white rounded border border-green-200",children:[e.jsx(ga,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[l.city&&`${l.city}, `,l.state&&`${l.state} - `,e.jsx("span",{className:"text-blue-600",children:l.pincode})]}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded font-medium",children:[l.source==="gps"&&" GPS",l.source==="ip"&&" IP",l.source==="manual"&&" Manual"]})]}),l.source==="ip"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Location detected from your IP address"})]})]}),v&&e.jsxs("form",{onSubmit:$,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter Pincode"}),e.jsx("input",{type:"text",id:"pincode",value:f,onChange:L=>j(L.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit pincode",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",maxLength:6,required:!0})]}),e.jsx("button",{type:"submit",disabled:m||f.length!==6,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium text-sm",children:m?"Validating...":"Submit"})]}),!l&&!m&&!p&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded border border-blue-100",children:e.jsx("p",{className:"text-xs text-blue-700",children:" Detecting your location for accurate pricing..."})})]}):null},xd=({forcedProductId:s})=>{var fi,pi;const r=Dh(),n=ar(),{categoryId:l,subCategoryId:d,nestedSubCategoryId:m}=r,u=s||r.productId,[p,b]=y.useState([]),[f,j]=y.useState(null),[v,w]=y.useState(null),[D,P]=y.useState([]),[T,$]=y.useState(!0),[L,M]=y.useState(null),[B,ce]=y.useState([]),[U,O]=y.useState({}),[k,W]=y.useState([]),[Q,ne]=y.useState(null),[le,me]=y.useState(!1),[Ve,F]=y.useState(null),[J,I]=y.useState(!1),[K,q]=y.useState(""),[de,Ce]=y.useState(""),[A,G]=y.useState(""),[ie,Re]=y.useState(1e3),[ge,R]=y.useState({}),[re,je]=y.useState(new Set),[Ie,Be]=y.useState([]),[et,fe]=y.useState(null),[se,te]=y.useState(""),[be,We]=y.useState(null),[at,_e]=y.useState(""),[At,Xt]=y.useState(""),[Ft,As]=y.useState(""),[Vs,$t]=y.useState(""),[Bs,vs]=y.useState(""),[fa,$s]=y.useState(null),[Zs,pa]=y.useState(null),[rr,Tt]=y.useState(""),[ha,Vt]=y.useState(""),[xa,Ns]=y.useState(""),[va,qe]=y.useState(0),[ft,xt]=y.useState(0),[Ps,Qs]=y.useState(0),[Js,Ms]=y.useState(0),[ra,Pa]=y.useState(null),[Ja,ir]=y.useState(0),[Zr,Sn]=y.useState(0),[Mi,X]=y.useState(0),[he,Ee]=y.useState(0),[tt,it]=y.useState([]),[Dt,lt]=y.useState(0),[dt,vt]=y.useState(0),[Pt,Mt]=y.useState(!1),[_t,Kt]=y.useState(!1),[os,ps]=y.useState(!1),[Ks,es]=y.useState(!1),[is,rs]=y.useState(null),[nr,Xs]=y.useState([]),[mr,gr]=y.useState(!1),[qs,Ka]=y.useState(null),[Jr,zs]=y.useState(!1),[Yt,hs]=y.useState(null),[Oa,ea]=y.useState(!1);y.useEffect(()=>{const oe=Fe=>{Fe.key==="Escape"&&Pt&&Mt(!1)};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[Pt]),y.useEffect(()=>{var oe,Fe,we;f&&((oe=f.filters)!=null&&oe.printingOption&&f.filters.printingOption.length===1&&(!K||K!==f.filters.printingOption[0])&&q(f.filters.printingOption[0]),(Fe=f.filters)!=null&&Fe.deliverySpeed&&f.filters.deliverySpeed.length===1&&(!de||de!==f.filters.deliverySpeed[0])&&Ce(f.filters.deliverySpeed[0]),(we=f.filters)!=null&&we.textureType&&f.filters.textureType.length===1&&(!A||A!==f.filters.textureType[0])&&G(f.filters.textureType[0]),f&&J&&B.length>0?mj({attributes:B,rules:k,selectedValues:{...ge}}).attributes.forEach(Le=>{if(!Le.isVisible)return;const rt=Le.attributeValues||[];if(rt.length===1){const Te=rt[0];(!ge[Le._id]||ge[Le._id]!==Te.value)&&R(Ue=>({...Ue,[Le._id]:Te.value}))}Le.defaultValue&&!ge[Le._id]&&R(Te=>({...Te,[Le._id]:Le.defaultValue}))}):f&&!J&&f.dynamicAttributes&&f.dynamicAttributes.forEach(ye=>{if(!ye.isEnabled)return;const Le=typeof ye.attributeType=="object"?ye.attributeType:null;if(!Le)return;const rt=ye.customValues&&ye.customValues.length>0?ye.customValues:Le.attributeValues||[];if(rt.length===1){const Te=rt[0];(!ge[Le._id]||ge[Le._id]!==Te.value)&&R({...ge,[Le._id]:Te.value})}}))},[f,J,B,k,ge]),y.useEffect(()=>{(async()=>{var Fe,we,ye,Le,rt,Te,Ue,Me;try{$(!0),M(null),j(null),b([]);let ze=null,ve=null;const pt=m||d;if(u)if(!/^[0-9a-fA-F]{24}$/.test(u))console.warn("Invalid productId format:",u),F("Invalid product ID format. Please select a product from the list."),me(!1);else try{me(!0),F(null);const xs=await fetch(`${Ae}/products/${u}/detail`,{method:"GET",headers:{Accept:"application/json"}});if(xs.ok){const ns=await xs.text();if(!ns.startsWith("<!DOCTYPE")&&!ns.startsWith("<html")){const pe=JSON.parse(ns),Pe=pe.product,Je=pe.attributes||[],ht=pe.subAttributes||{},Et=pe.rules||[],He=pe.quantityConfig;Pe.subcategory&&(typeof Pe.subcategory=="object"&&Pe.subcategory._id?(ze=Pe.subcategory._id,ve=Pe.subcategory,w(Pe.subcategory)):typeof Pe.subcategory=="string"&&(ze=Pe.subcategory));const Ye={_id:Pe._id,id:Pe._id,name:Pe.name||"",description:Pe.description||"",descriptionArray:Pe.descriptionArray||(Pe.description?[Pe.description]:[]),filters:{printingOption:((Fe=Pe.filters)==null?void 0:Fe.printingOption)||[],orderQuantity:He||((we=Pe.filters)==null?void 0:we.orderQuantity)||{min:1e3,max:72e3,multiples:1e3},deliverySpeed:((ye=Pe.filters)==null?void 0:ye.deliverySpeed)||[],textureType:((Le=Pe.filters)==null?void 0:Le.textureType)||void 0,filterPricesEnabled:((rt=Pe.filters)==null?void 0:rt.filterPricesEnabled)||!1,printingOptionPrices:((Te=Pe.filters)==null?void 0:Te.printingOptionPrices)||[],deliverySpeedPrices:((Ue=Pe.filters)==null?void 0:Ue.deliverySpeedPrices)||[],textureTypePrices:((Me=Pe.filters)==null?void 0:Me.textureTypePrices)||[]},basePrice:Pe.basePrice||0,image:Pe.image,subcategory:Pe.subcategory,options:Pe.options||[],dynamicAttributes:Je.map(Xe=>({attributeType:{_id:Xe._id,attributeName:Xe.attributeName,inputStyle:Xe.inputStyle,attributeValues:Xe.attributeValues||[],defaultValue:Xe.defaultValue},isEnabled:!0,isRequired:Xe.isRequired||!1,displayOrder:Xe.displayOrder||0,customValues:Xe.customValues||[]})),quantityDiscounts:Pe.quantityDiscounts||[],maxFileSizeMB:Pe.maxFileSizeMB,minFileWidth:Pe.minFileWidth,maxFileWidth:Pe.maxFileWidth,minFileHeight:Pe.minFileHeight,maxFileHeight:Pe.maxFileHeight,blockCDRandJPG:Pe.blockCDRandJPG||!1,additionalDesignCharge:Pe.additionalDesignCharge||0,gstPercentage:Pe.gstPercentage||0,showPriceIncludingGst:Pe.showPriceIncludingGst||!1,instructions:Pe.instructions||""};j(Ye),ce(Je),O(ht),W(Et),ne(He),I(!0)}}else{const ns=await xs.text();let pe="Failed to fetch product details";try{pe=JSON.parse(ns).error||pe}catch{}F(pe)}}catch(xs){console.error("Error fetching product details:",xs),F("Error loading product details")}finally{me(!1)}if(!ze){const ts=l?`${Ae}/subcategories/category/${l}?includeChildren=true`:`${Ae}/subcategories`,xs=await fetch(ts,{method:"GET",headers:{Accept:"application/json"}});if(xs.ok){const ns=await xs.text();if(!ns.startsWith("<!DOCTYPE")&&!ns.startsWith("<html")){const pe=JSON.parse(ns),Pe=Et=>{let He=[];return Et.forEach(Ye=>{He.push(Ye),Ye.children&&Ye.children.length>0&&(He=He.concat(Pe(Ye.children)))}),He},Je=Pe(Array.isArray(pe)?pe:[]),ht=pt;if(ht&&(/^[0-9a-fA-F]{24}$/.test(ht)?ve=Je.find(He=>He._id===ht):ve=Je.find(He=>{var Ye,Xe;return He.slug===ht||((Ye=He.name)==null?void 0:Ye.toLowerCase().replace(/\s+/g,"-"))===ht.toLowerCase().replace(/\s+/g,"-")||((Xe=He.name)==null?void 0:Xe.toLowerCase())===ht.toLowerCase()})),ve||(ve=pe.find(Et=>{var He,Ye,Xe;return((He=Et.slug)==null?void 0:He.toLowerCase())==="gloss-finish"||((Ye=Et.name)==null?void 0:Ye.toLowerCase().includes("gloss finish"))||((Xe=Et.name)==null?void 0:Xe.toLowerCase().includes("gloss"))})),ve){if(ze=ve._id,w(ve),ve.parent&&(typeof ve.parent=="object"?ve.parent._id:ve.parent)&&!m&&l){const Ye=typeof ve.parent=="object"?ve.parent._id:ve.parent;console.log(`Nested subcategory detected in list, redirecting to include parent: ${Ye}`),n(`/digital-print/${l}/${Ye}/${ze}${u?`/${u}`:""}`,{replace:!0}),$(!1);return}pt&&!/^[0-9a-fA-F]{24}$/.test(pt)&&ze&&ze!==pt&&(m?n(`/digital-print/${l}/${ze}${u?`/${u}`:""}`,{replace:!0}):l?n(`/digital-print/${l}/${ze}${u?`/${u}`:""}`,{replace:!0}):n(`/digital-print/${ze}${u?`/${u}`:""}`,{replace:!0}))}else if(pt)try{const Et=await fetch(`${Ae}/subcategories/${pt}`,{method:"GET",headers:{Accept:"application/json"}});if(Et.ok){const He=await Et.text();if(!He.startsWith("<!DOCTYPE")&&!He.startsWith("<html")){const Ye=JSON.parse(He);if(Ye&&Ye._id){if(ve=Ye,ze=Ye._id,w(Ye),console.log("Found subcategory via API lookup, using _id:",ze),Ye.parent&&(typeof Ye.parent=="object"?Ye.parent._id:Ye.parent)&&!m&&l){const kt=typeof Ye.parent=="object"?Ye.parent._id:Ye.parent;console.log(`Nested subcategory detected, redirecting to include parent: ${kt}`),n(`/digital-print/${l}/${kt}/${ze}${u?`/${u}`:""}`,{replace:!0});return}if(pt&&!/^[0-9a-fA-F]{24}$/.test(pt)&&ze&&ze!==pt)if(m&&d){const kt=(/^[0-9a-fA-F]{24}$/.test(d),d);n(`/digital-print/${l}/${kt}/${ze}${u?`/${u}`:""}`,{replace:!0})}else l?n(`/digital-print/${l}/${ze}${u?`/${u}`:""}`,{replace:!0}):n(`/digital-print/${ze}${u?`/${u}`:""}`,{replace:!0})}}}}catch(Et){console.warn("Error fetching subcategory via API:",Et)}}}}const ke=(ve==null?void 0:ve._id)||pt;if(ke)try{console.log(`Checking for nested subcategories of: ${ke}`);const ts=await fetch(`${Ae}/subcategories/parent/${ke}`,{method:"GET",headers:{Accept:"application/json"}});if(ts.ok){const xs=await ts.text();if(!xs.startsWith("<!DOCTYPE")&&!xs.startsWith("<html"))try{const ns=JSON.parse(xs),pe=Array.isArray(ns)?ns:[];if(pe.sort((Pe,Je)=>(Pe.sortOrder||0)-(Je.sortOrder||0)),pe.length>0){if(pe.length===1&&!u){const Pe=pe[0],Je=Pe._id;if(m!==Je&&d!==Je){console.log(`Only one nested subcategory found: ${Pe.name} (${Je}). Auto-navigating...`);const ht=l&&d?`/digital-print/${l}/${d}/${Je}`:`/digital-print/${l}/${Je}`;n(ht,{replace:!0});return}}console.log(`Found ${pe.length} nested subcategories for subcategory ${ke}`),P(pe),b([]),$(!1);return}else console.log(`No nested subcategories found for subcategory ${ke}, will fetch products`)}catch(ns){console.error("Error parsing nested subcategories response:",ns)}}else console.log(`Nested subcategories check returned ${ts.status}, will fetch products`)}catch(ts){console.error("Error fetching nested subcategories:",ts)}P([]);let nt,Wt;if(!ve||ve===null)if(l&&/^[0-9a-fA-F]{24}$/.test(l))nt=`${Ae}/products/category/${l}`,Wt=await fetch(nt,{method:"GET",headers:{Accept:"application/json"}});else{b([]);return}else if(ve&&ve._id){const ts=ve._id,xs=ve.name||ts;console.log(`Fetching products for subcategory: ${xs} (${ts})`),nt=`${Ae}/products/subcategory/${ts}`,Wt=await fetch(nt,{method:"GET",headers:{Accept:"application/json"}})}else if(l&&/^[0-9a-fA-F]{24}$/.test(l))nt=`${Ae}/products/category/${l}`,Wt=await fetch(nt,{method:"GET",headers:{Accept:"application/json"}});else{b([]);return}const Es=await Wt.text();if(Es.startsWith("<!DOCTYPE")||Es.startsWith("<html"))console.error("Server returned HTML instead of JSON for products"),b([]);else if(Wt.ok)try{const ts=JSON.parse(Es);if(!Array.isArray(ts))console.warn("Products data is not an array:",ts),b([]);else{const xs=(ve==null?void 0:ve.name)||(ve==null?void 0:ve._id)||ze||"category "+l;console.log(`Fetched ${ts.length} product(s) for ${xs}`);let ns=ts;if(ts.length===0&&ve&&l&&/^[0-9a-fA-F]{24}$/.test(l)){console.log(`No products found for subcategory ${ze}, fetching category products as fallback`);try{const Pe=await fetch(`${Ae}/products/category/${l}`,{method:"GET",headers:{Accept:"application/json"}});if(Pe.ok){const Je=await Pe.text();if(!Je.startsWith("<!DOCTYPE")&&!Je.startsWith("<html")){const ht=JSON.parse(Je);Array.isArray(ht)&&ht.length>0&&(console.log(`Found ${ht.length} product(s) in category as fallback`),ns=ht)}}}catch(Pe){console.error("Error fetching category products as fallback:",Pe)}}const pe=ns.map(Pe=>{var Je,ht,Et,He,Ye,Xe,It,kt;return{_id:Pe._id,id:Pe._id,name:Pe.name||"",description:Pe.description||"",descriptionArray:Pe.descriptionArray||(Pe.description?[Pe.description]:[]),filters:{printingOption:((Je=Pe.filters)==null?void 0:Je.printingOption)||[],orderQuantity:((ht=Pe.filters)==null?void 0:ht.orderQuantity)||{min:1e3,max:72e3,multiples:1e3},deliverySpeed:((Et=Pe.filters)==null?void 0:Et.deliverySpeed)||[],textureType:((He=Pe.filters)==null?void 0:He.textureType)||void 0,filterPricesEnabled:((Ye=Pe.filters)==null?void 0:Ye.filterPricesEnabled)||!1,printingOptionPrices:((Xe=Pe.filters)==null?void 0:Xe.printingOptionPrices)||[],deliverySpeedPrices:((It=Pe.filters)==null?void 0:It.deliverySpeedPrices)||[],textureTypePrices:((kt=Pe.filters)==null?void 0:kt.textureTypePrices)||[]},basePrice:Pe.basePrice||0,image:Pe.image,subcategory:Pe.subcategory,options:Pe.options||[],dynamicAttributes:Pe.dynamicAttributes||[],quantityDiscounts:Pe.quantityDiscounts||[],maxFileSizeMB:Pe.maxFileSizeMB,minFileWidth:Pe.minFileWidth,maxFileWidth:Pe.maxFileWidth,minFileHeight:Pe.minFileHeight,maxFileHeight:Pe.maxFileHeight,blockCDRandJPG:Pe.blockCDRandJPG||!1,additionalDesignCharge:Pe.additionalDesignCharge||0,gstPercentage:Pe.gstPercentage||0,showPriceIncludingGst:Pe.showPriceIncludingGst||!1,instructions:Pe.instructions||""}});if(b(pe),pe.length===1&&!u){const Pe=pe[0];l&&d?n(`/digital-print/${l}/${d}/${Pe._id}`,{replace:!0}):l?n(`/digital-print/${l}/${Pe._id}`,{replace:!0}):d?n(`/digital-print/${d}/${Pe._id}`,{replace:!0}):n(`/digital-print/${Pe._id}`,{replace:!0});return}if(u&&pe.length>0){const Pe=pe.find(Je=>Je._id===u||Je.id===u);Pe&&j(Pe)}}}catch{b([])}else{console.error(`Failed to fetch products: ${Wt.status} ${Wt.statusText}`);try{const ts=JSON.parse(Es);console.error("Error details:",ts)}catch{console.error("Error response text:",Es)}b([])}}catch{b([])}finally{$(!1)}})()},[l,d,m,u]);const us=oe=>{var Le,rt,Te,Ue;j(oe),q(""),Ce(""),G("");const Fe=(Le=oe.filters)==null?void 0:Le.orderQuantity;let we=1e3;Fe&&(Fe.quantityType==="STEP_WISE"&&Fe.stepWiseQuantities&&Fe.stepWiseQuantities.length>0?we=Math.min(...Fe.stepWiseQuantities):Fe.quantityType==="RANGE_WISE"&&Fe.rangeWiseQuantities&&Fe.rangeWiseQuantities.length>0?we=Math.min(...Fe.rangeWiseQuantities.map(Me=>Me.min||1e3)):we=Fe.min||1e3),Re(we),Pa(null);const ye={};oe.dynamicAttributes&&Array.isArray(oe.dynamicAttributes)&&oe.dynamicAttributes.forEach(Me=>{if(Me.isEnabled){const ze=typeof Me.attributeType=="object"?Me.attributeType:null;if(ze){const ve=Me.customValues&&Me.customValues.length>0?Me.customValues:ze.attributeValues||[];ze.defaultValue&&ve.find(pt=>pt.value===ze.defaultValue)?ye[ze._id]=ze.defaultValue:ve.length>0&&(ze.inputStyle==="CHECKBOX"?ye[ze._id]=[]:ye[ze._id]=ve[0].value)}}}),R(ye),je(new Set),Be([]),(rt=oe.filters)!=null&&rt.printingOption&&oe.filters.printingOption.length>0&&q(oe.filters.printingOption[0]),(Te=oe.filters)!=null&&Te.deliverySpeed&&oe.filters.deliverySpeed.length>0&&Ce(oe.filters.deliverySpeed[0]),(Ue=oe.filters)!=null&&Ue.textureType&&oe.filters.textureType.length>0&&G(oe.filters.textureType[0])};y.useEffect(()=>{if(u&&p.length>0&&!f){const oe=p.find(Fe=>Fe._id===u||Fe.id===u);oe&&us(oe)}},[u,p,f]);const da=oe=>{if(J&&B.length>0){for(const ye of B)if(!(!ye.isVisible||!ge[ye._id])){if(ye.isStepQuantity&&ye.stepQuantities&&ye.stepQuantities.length>0){const rt=ye.stepQuantities.map(Te=>{const Ue=parseFloat(typeof Te=="object"?Te.quantity:Te);return isNaN(Ue)?0:Ue}).filter(Te=>Te>0).sort((Te,Ue)=>Te-Ue);if(rt.length>0)return rt}if(ye.isRangeQuantity&&ye.rangeQuantities&&ye.rangeQuantities.length>0){const rt=[];if(ye.rangeQuantities.forEach(Te=>{const Ue=typeof Te=="object"?parseFloat(Te.min):0,Me=typeof Te=="object"&&Te.max?parseFloat(Te.max):null;if(Ue>0&&(rt.includes(Ue)||rt.push(Ue),Me&&Me>Ue)){const ze=Math.max(1,Math.floor((Me-Ue)/5));for(let ve=Ue+ze;ve<Me;ve+=ze)rt.includes(ve)||rt.push(ve);Me<=Ue*10&&(rt.includes(Me)||rt.push(Me))}}),rt.length>0)return rt.sort((Te,Ue)=>Te-Ue)}}}if(f&&f.dynamicAttributes)for(const ye of f.dynamicAttributes){if(!ye.isEnabled)continue;const Le=typeof ye.attributeType=="object"?ye.attributeType:null;if(!(!Le||!ge[Le._id])){if(Le.isStepQuantity&&Le.stepQuantities&&Le.stepQuantities.length>0){const Te=Le.stepQuantities.map(Ue=>{const Me=parseFloat(typeof Ue=="object"?Ue.quantity:Ue);return isNaN(Me)?0:Me}).filter(Ue=>Ue>0).sort((Ue,Me)=>Ue-Me);if(Te.length>0)return Te}if(Le.isRangeQuantity&&Le.rangeQuantities&&Le.rangeQuantities.length>0){const Te=[];if(Le.rangeQuantities.forEach(Ue=>{const Me=typeof Ue=="object"?parseFloat(Ue.min):0,ze=typeof Ue=="object"&&Ue.max?parseFloat(Ue.max):null;if(Me>0&&(Te.includes(Me)||Te.push(Me),ze&&ze>Me)){const ve=Math.max(1,Math.floor((ze-Me)/5));for(let pt=Me+ve;pt<ze;pt+=ve)Te.includes(pt)||Te.push(pt);ze<=Me*10&&(Te.includes(ze)||Te.push(ze))}}),Te.length>0)return Te.sort((Ue,Me)=>Ue-Me)}}}const Fe=oe.filters.orderQuantity,we=Fe.quantityType||"SIMPLE";if(we==="STEP_WISE"&&Fe.stepWiseQuantities&&Fe.stepWiseQuantities.length>0)return Fe.stepWiseQuantities.filter(ye=>ye>0).sort((ye,Le)=>ye-Le);if(we==="RANGE_WISE"&&Fe.rangeWiseQuantities&&Fe.rangeWiseQuantities.length>0){const ye=[];return Fe.rangeWiseQuantities.forEach(Le=>{if(Le.min>0&&(ye.includes(Le.min)||ye.push(Le.min),Le.max&&Le.max>Le.min)){const rt=Math.max(1,Math.floor((Le.max-Le.min)/5));for(let Te=Le.min+rt;Te<Le.max;Te+=rt)ye.includes(Te)||ye.push(Te);Le.max<=Le.min*10&&(ye.includes(Le.max)||ye.push(Le.max))}}),ye.sort((Le,rt)=>Le-rt)}else{const{min:ye,max:Le,multiples:rt}=Fe,Te=[];for(let Ue=ye;Ue<=Le&&Ue<=ye+rt*20;Ue+=rt)Te.push(Ue);return Te}};Pi.useEffect(()=>{var oe,Fe,we,ye,Le,rt;if(f){let Te=f.basePrice;if(((Fe=(oe=f.filters)==null?void 0:oe.orderQuantity)==null?void 0:Fe.quantityType)==="RANGE_WISE"&&f.filters.orderQuantity.rangeWiseQuantities&&f.filters.orderQuantity.rangeWiseQuantities.length>0){const He=f.filters.orderQuantity.rangeWiseQuantities.find(Ye=>ie>=Ye.min&&(Ye.max===null||Ye.max===void 0||ie<=Ye.max));He&&He.priceMultiplier!==void 0&&He.priceMultiplier!==1&&(Te=Te*He.priceMultiplier)}let Ue=0,Me=0,ze=0;const ve=[],pt=((we=f.filters)==null?void 0:we.filterPricesEnabled)||!1;if(pt){if(K&&((ye=f.filters)!=null&&ye.printingOptionPrices)){const He=f.filters.printingOptionPrices.find(Ye=>Ye.name===K);if(He&&He.priceAdd!==void 0){const Xe=(typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0)/1e3;Te+=Xe,Ue=Xe*ie}}if(de&&((Le=f.filters)!=null&&Le.deliverySpeedPrices)){const He=f.filters.deliverySpeedPrices.find(Ye=>Ye.name===de);if(He&&He.priceAdd!==void 0){const Xe=(typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0)/1e3;Te+=Xe,Me=Xe*ie}}if(A&&((rt=f.filters)!=null&&rt.textureTypePrices)){const He=f.filters.textureTypePrices.find(Ye=>Ye.name===A);if(He&&He.priceAdd!==void 0){const Xe=(typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0)/1e3;Te+=Xe,ze=Xe*ie}}}else f.options&&Array.isArray(f.options)&&f.options.forEach(He=>{if(He.name===K){const Ye=typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0;if(Ye>0){const Xe=Ye/1e3;Te+=Xe,Ue=Xe*ie}else if(Ye<0){const Xe=1+Math.abs(Ye)/100,It=Te;Te*=Xe,Ue=(Te-It)*ie}}else if(He.name===de){const Ye=typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0;if(Ye>0){const Xe=Ye/1e3;Te+=Xe,Me=Xe*ie}else if(Ye<0){const Xe=1+Math.abs(Ye)/100,It=Te;Te*=Xe,Me=(Te-It)*ie}}else if(He.name===A){const Ye=typeof He.priceAdd=="number"?He.priceAdd:parseFloat(He.priceAdd)||0;if(Ye>0){const Xe=Ye/1e3;Te+=Xe,ze=Xe*ie}else if(Ye<0){const Xe=1+Math.abs(Ye)/100,It=Te;Te*=Xe,ze=(Te-It)*ie}}});if(!pt&&(!f.options||f.options.length===0)){if(K==="Both Sides"){const He=Te;Te*=1.2,Ue=(Te-He)*ie}if(de==="Express"){const He=Te;Te*=1.3,Me=(Te-He)*ie}if(A){const He=Te;Te*=1.15,ze=(Te-He)*ie}}let ke=0;f.options&&Array.isArray(f.options)&&Ie.length>0&&Ie.forEach(He=>{const Ye=f.options.find(Xe=>Xe.name===He);if(Ye&&Ye.priceAdd!==void 0){const Xe=typeof Ye.priceAdd=="number"?Ye.priceAdd:parseFloat(Ye.priceAdd)||0;if(Xe!==0){const It=Xe/1e3;Te+=It,ke+=It*ie}}}),Ee(ke),f.dynamicAttributes&&Array.isArray(f.dynamicAttributes)&&f.dynamicAttributes.forEach(He=>{if(He.isEnabled){const Ye=typeof He.attributeType=="object"?He.attributeType:null;if(Ye){const Xe=ge[Ye._id];if(Xe!=null&&Xe!==""){const It=He.customValues&&He.customValues.length>0?He.customValues:Ye.attributeValues||[];if(Array.isArray(Xe)){const kt=[];let Fs=0;Xe.forEach(Os=>{const qt=It.find(Ts=>Ts.value===Os);if(qt){let Ts=0;if(qt.description){const wt=qt.description.match(/Price Impact: ([\d.]+)/);wt&&(Ts=parseFloat(wt[1])||0)}if(Ts>0)Fs+=Ts*ie,qt.label&&kt.push(qt.label);else if(qt.priceMultiplier&&qt.priceMultiplier!==1){const wt=Te;Te=Te*qt.priceMultiplier;const Ra=(Te-wt)*ie;Fs+=Ra,qt.label&&kt.push(qt.label)}}}),Fs!==0&&ve.push({name:Ye.attributeName,label:kt.join(", ")||"Selected",charge:Fs})}else{const kt=It.find(Fs=>Fs.value===Xe);if(kt){let Fs=0;if(kt.description){const Os=kt.description.match(/Price Impact: ([\d.]+)/);Os&&(Fs=parseFloat(Os[1])||0)}if(Fs>0){const Os=Fs*ie;Os!==0&&ve.push({name:Ye.attributeName,label:kt.label||String(Xe||""),charge:Os})}else if(kt.priceMultiplier&&kt.priceMultiplier!==1){const Os=Te;Te=Te*kt.priceMultiplier;const qt=(Te-Os)*ie;qt!==0&&ve.push({name:Ye.attributeName,label:kt.label||String(Xe||""),charge:qt})}}}}}}});const nt=Te*ie;let Wt=1,Es=null;if(f.quantityDiscounts&&Array.isArray(f.quantityDiscounts)){const He=f.quantityDiscounts.find(Ye=>{const Xe=Ye.minQuantity||0,It=Ye.maxQuantity;return ie>=Xe&&(It==null||ie<=It)});He&&(He.priceMultiplier?Wt=He.priceMultiplier:He.discountPercentage&&(Wt=(100-He.discountPercentage)/100),Es=He.discountPercentage||0)}const ts=ve.reduce((He,Ye)=>He+Ye.charge,0);lt(nt);const ns=nt*Wt+ts;xt(ns),Pa(Es),ir(Ue),Sn(Me),X(ze),it(ve);const pe=f.additionalDesignCharge||0;Ms(pe);const Pe=f.gstPercentage||0,Je=(ns+pe)*(Pe/100);Qs(Je);const ht=ns+pe;qe(ht);const Et=ie>0?ht/ie:Te;vt(Et)}},[f,K,de,A,ie,ge,Ie]),Pi.useEffect(()=>{if(!f)return;const oe=da(f);oe.length>0&&!oe.includes(ie)&&Re(oe[0])},[ge,f]);const ui=oe=>{const Fe={};if(!oe)return Fe;const we=oe.match(/max(?:imum)?\s+file\s+size[:\s]+(\d+)\s*mb/i);we&&(Fe.maxSizeMB=parseInt(we[1]));const ye=oe.match(/(\d+)\s*[x]\s*(\d+)\s*pixels?/i);ye&&(Fe.fileWidth=parseInt(ye[1]),Fe.fileHeight=parseInt(ye[2])),/cdr|jpg|jpeg.*not\s+(?:accepted|allowed|permitted)/i.test(oe)&&(Fe.blockCDRandJPG=!0);const Le=oe.match(/(?:format|file\s+type|extension).*?only[:\s]+([^.]+)/i);if(Le){const rt=Le[1].split(/[,\s]+or\s+/i).map(Te=>Te.trim().toLowerCase());Fe.allowedFormats=rt}return Fe},Xa=(oe,Fe)=>{var pt;const we=(pt=oe.target.files)==null?void 0:pt[0];if(!we)return;if(!we.type.startsWith("image/")){alert("Please upload an image file"),oe.target.value="";return}const ye=f!=null&&f.instructions?ui(f.instructions):{},Le=ye.maxSizeMB||(f==null?void 0:f.maxFileSizeMB)||10,rt=Le*1024*1024;if(we.size>rt){alert(`File size must be less than ${Le} MB as specified in the instructions`),oe.target.value="";return}if(ye.blockCDRandJPG!==void 0?ye.blockCDRandJPG:(f==null?void 0:f.blockCDRandJPG)||!1){const ke=we.name.toLowerCase(),nt=ke.substring(ke.lastIndexOf(".")+1);if(nt==="cdr"||nt==="jpg"||nt==="jpeg"){alert("CDR and JPG files are not accepted for this product as per instructions. Please use PNG, PDF, or other formats."),oe.target.value="";return}}if(ye.allowedFormats&&ye.allowedFormats.length>0){const ke=we.name.toLowerCase(),nt=ke.substring(ke.lastIndexOf(".")+1);if(!ye.allowedFormats.some(Es=>nt.includes(Es.toLowerCase()))){alert(`Only ${ye.allowedFormats.join(", ").toUpperCase()} files are accepted as per instructions.`),oe.target.value="";return}}const Ue=f==null?void 0:f.minFileWidth,Me=f==null?void 0:f.maxFileWidth,ze=f==null?void 0:f.minFileHeight,ve=f==null?void 0:f.maxFileHeight;if(Ue||Me||ze||ve){const ke=new Image,nt=URL.createObjectURL(we);ke.onload=()=>{URL.revokeObjectURL(nt);let Wt=[];if(Ue&&ke.width<Ue&&Wt.push(`Image width must be at least ${Ue} pixels. Current width: ${ke.width} pixels.`),Me&&ke.width>Me&&Wt.push(`Image width must be at most ${Me} pixels. Current width: ${ke.width} pixels.`),ze&&ke.height<ze&&Wt.push(`Image height must be at least ${ze} pixels. Current height: ${ke.height} pixels.`),ve&&ke.height>ve&&Wt.push(`Image height must be at most ${ve} pixels. Current height: ${ke.height} pixels.`),Wt.length>0){alert(Wt.join(`
`)),oe.target.value="";return}if(Fe==="front"){$s(we);const Es=new FileReader;Es.onloadend=()=>{Tt(Es.result)},Es.readAsDataURL(we)}else{pa(we);const Es=new FileReader;Es.onloadend=()=>{Vt(Es.result)},Es.readAsDataURL(we)}},ke.onerror=()=>{URL.revokeObjectURL(nt),alert("Failed to load image. Please check the file format."),oe.target.value=""},ke.src=nt}else if(Fe==="front"){$s(we);const ke=new FileReader;ke.onloadend=()=>{Tt(ke.result)},ke.readAsDataURL(we)}else{pa(we);const ke=new FileReader;ke.onloadend=()=>{Vt(ke.result)},ke.readAsDataURL(we)}},_i=()=>{const oe=localStorage.getItem("token");return{"Content-Type":"application/json",...oe&&{Authorization:`Bearer ${oe}`}}},mi=(oe,Fe,we,ye)=>{const rt=(we-oe)*Math.PI/180,Te=(ye-Fe)*Math.PI/180,Ue=Math.sin(rt/2)*Math.sin(rt/2)+Math.cos(oe*Math.PI/180)*Math.cos(we*Math.PI/180)*Math.sin(Te/2)*Math.sin(Te/2);return 6371*(2*Math.atan2(Math.sqrt(Ue),Math.sqrt(1-Ue)))},er=async(oe,Fe,we)=>{const ye=[{name:"Main Branch",address:"1-A, One Colony, One Street, One, India",latitude:28.6139,longitude:77.209,pincode:"110001"},{name:"Branch 2",address:"2-B, Two Colony, Two Street, Two, India",latitude:19.076,longitude:72.8777,pincode:"400001"},{name:"Branch 3",address:"3-C, Three Colony, Three Street, Three, India",latitude:12.9716,longitude:77.5946,pincode:"560001"}];let Le=ye[0],rt=mi(oe,Fe,ye[0].latitude,ye[0].longitude);for(const ve of ye){const pt=mi(oe,Fe,ve.latitude,ve.longitude);pt<rt&&(rt=pt,Le=ve)}const Te=2,Ue=Math.max(1,Math.ceil(rt/500)),Me=Te+Ue,ze=new Date;return ze.setDate(ze.getDate()+Me),{deliveryDate:ze.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),locationSource:we?`[Location: ${we}]`:`[Location: ${oe.toFixed(4)}, ${Fe.toFixed(4)}]`,nearestBranch:Le.name}},Na=async oe=>{try{const we=await fetch(`${Ae}/geocoding/search?postalcode=${oe}&country=India&limit=1`,{headers:{Accept:"application/json"}});if(we.ok){const ye=await we.json();if(ye&&ye.length>0){const Le=ye[0];return{lat:parseFloat(Le.lat),lon:parseFloat(Le.lon),address:Le.display_name||`Pincode: ${oe}`}}}}catch{}return null};y.useEffect(()=>{(async()=>{if(f)try{if(navigator.geolocation)navigator.geolocation.getCurrentPosition(async Fe=>{const{latitude:we,longitude:ye}=Fe.coords;let Le="";try{const Ue=await fetch(`${Ae}/geocoding/reverse?lat=${we}&lon=${ye}&addressdetails=1`,{headers:{Accept:"application/json"}});if(Ue.ok){const Me=await Ue.json();if(Me.address){const ze=Me.address,ve=[];ze.house_number&&ve.push(ze.house_number),ze.road&&ve.push(ze.road),(ze.suburb||ze.neighbourhood)&&ve.push(ze.suburb||ze.neighbourhood),(ze.city||ze.town||ze.village)&&ve.push(ze.city||ze.town||ze.village),ze.state&&ve.push(ze.state),ze.country&&ve.push(ze.country),Le=ve.join(", ")}}}catch{}const rt=await er(we,ye,Le);fe(rt.deliveryDate),te(rt.locationSource)},async()=>{const Fe=localStorage.getItem("userPincode");if(Fe&&Fe.length===6){const we=await Na(Fe);if(we){const ye=await er(we.lat,we.lon,we.address);fe(ye.deliveryDate),te(`[Pincode: ${Fe}]`)}else{const Le=new Date;Le.setDate(Le.getDate()+5),fe(Le.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),te(`[Pincode: ${Fe}]`)}}else{const ye=new Date;ye.setDate(ye.getDate()+5),fe(ye.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),te("Default estimate")}});else{const Fe=localStorage.getItem("userPincode");if(Fe&&Fe.length===6){const we=await Na(Fe);if(we){const ye=await er(we.lat,we.lon,we.address);fe(ye.deliveryDate),te(`[Pincode: ${Fe}]`)}else{const Le=new Date;Le.setDate(Le.getDate()+5),fe(Le.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),te(`[Pincode: ${Fe}]`)}}else{const ye=new Date;ye.setDate(ye.getDate()+5),fe(ye.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),te("Default estimate")}}}catch{}})()},[f]);const ta=async()=>{if(!navigator.geolocation){rs("Geolocation is not supported by your browser.");return}ea(!0),rs(null);try{const oe=await new Promise((ye,Le)=>{navigator.geolocation.getCurrentPosition(ye,Le,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:Fe,longitude:we}=oe.coords;try{const Le=await fetch(`${Ae}/geocoding/reverse?lat=${Fe}&lon=${we}&zoom=18&addressdetails=1`,{headers:{Accept:"application/json"}});if(!Le.ok)throw new Error("Failed to fetch address");const Te=(await Le.json()).address||{},Ue=[];Te.house_number&&Ue.push(Te.house_number),Te.road&&Ue.push(Te.road),Te.neighbourhood&&Ue.push(Te.neighbourhood),Te.suburb&&Ue.push(Te.suburb),(Te.city||Te.town||Te.village)&&Ue.push(Te.city||Te.town||Te.village),Te.state&&Ue.push(Te.state),Te.postcode&&As(Te.postcode);const Me=Ue.join(", ");Me?($t(Me),te("location")):rs("Could not determine address from location. Please enter manually.")}catch{rs("Could not fetch address from location. Please enter manually.")}}catch(oe){oe.code===1?rs("Location access denied. Please enable location permissions or enter address manually."):oe.code===2?rs("Location unavailable. Please enter address manually."):oe.code===3?rs("Location request timeout. Please try again or enter address manually."):rs("Failed to get location. Please enter address manually.")}finally{ea(!1)}},cs=y.useRef(null),Kr=async()=>{if(!localStorage.getItem("token")){We("Please login to place an order. Redirecting to login page..."),setTimeout(()=>{n("/login")},2e3);return}cs.current=null;const Fe=[];if(f||(Fe.push("Please select a product"),cs.current||(cs.current=document.querySelector("[data-product-select]"))),!fa&&(Fe.push("Please upload a reference image"),!cs.current)){const we=document.querySelector('input[type="file"][accept*="image"]');if(we)cs.current=we;else{const ye=document.querySelector("[data-upload-section]");ye&&(cs.current=ye)}}if(!K&&(Fe.push("Please select a printing option"),!cs.current)){const we=document.querySelector('[data-field="printingOption"]');if(we)cs.current=we;else{const ye=document.querySelector('[data-section="printingOption"]');ye&&(cs.current=ye)}}if(!de&&(Fe.push("Please select a delivery speed"),!cs.current)){const we=document.querySelector('[data-field="deliverySpeed"]');if(we)cs.current=we;else{const ye=document.querySelector('[data-section="deliverySpeed"]');ye&&(cs.current=ye)}}if(f!=null&&f.dynamicAttributes&&f.dynamicAttributes.forEach(we=>{if(we.isRequired&&we.isEnabled){const ye=typeof we.attributeType=="object"?we.attributeType:null;if(ye){const Le=ge[ye._id];if((!Le||Array.isArray(Le)&&Le.length===0)&&(Fe.push(`${ye.attributeName} is required`),!cs.current)){const rt=document.querySelector(`[data-attribute="${ye._id}"]`);if(rt){const Te=rt.querySelector("input, select, button");cs.current=Te||rt}else{const Te=document.querySelector(`[data-attribute-name="${ye.attributeName}"]`);Te&&(cs.current=Te)}}if(Le&&(ye.inputStyle==="DROPDOWN"||ye.inputStyle==="RADIO")){const rt=we.customValues&&we.customValues.length>0?we.customValues:ye.attributeValues||[],Te=Array.isArray(Le)?rt.find(Ue=>Le.includes(Ue.value)):rt.find(Ue=>Ue.value===Le);if(Te&&Te.description){const Ue=Te.description.match(/Images Required: (\d+)/),Me=Ue?parseInt(Ue[1]):0;if(Me>0){const ze=`${ye._id}_images`;if((Array.isArray(ge[ze])?ge[ze]:[]).length<Me&&(Fe.push(`${ye.attributeName}: Please upload ${Me} image(s) for ${Te.label}`),!cs.current)){const pt=document.querySelector(`[data-attribute="${ye._id}"]`);if(pt){const ke=pt.querySelector(".bg-cream-50");cs.current=ke||pt}}}}}}}}),Fe.length>0){We(Fe.join(`
`)),setTimeout(()=>{if(cs.current){cs.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),setTimeout(()=>{if(cs.current instanceof HTMLInputElement||cs.current instanceof HTMLSelectElement)cs.current.focus();else{const ye=cs.current.querySelector("input, select, button");ye&&(ye instanceof HTMLInputElement||ye instanceof HTMLSelectElement||ye instanceof HTMLButtonElement)&&ye.focus()}},300);const we=cs.current instanceof HTMLInputElement||cs.current instanceof HTMLSelectElement?cs.current:cs.current.querySelector("input, select, button")||cs.current;we&&(we.style.borderColor="#ef4444",we.style.borderWidth="2px",we.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)",setTimeout(()=>{we.style.borderColor="",we.style.borderWidth="",we.style.boxShadow=""},3e3))}else setTimeout(()=>{const we=document.querySelector('[role="alert"]');we&&we.scrollIntoView({behavior:"smooth",block:"center"})},100)},100);return}We(null),es(!0),rs(null)},ql=async()=>{var Fe,we,ye,Le,rt,Te,Ue,Me,ze;if(!f){rs("Please select a product.");return}if(!fa||!rr){rs("Please upload a reference image.");return}if(!K){rs("Please select a printing option.");return}if(!de){rs("Please select a delivery speed.");return}if(!ie||ie<=0){rs("Please enter a valid quantity (must be greater than 0).");return}const oe=va+Ps;if(!oe||oe<=0){rs("Invalid order total. Please refresh and try again.");return}if(f!=null&&f.dynamicAttributes){for(const ve of f.dynamicAttributes)if(ve.isRequired&&ve.isEnabled){const pt=typeof ve.attributeType=="object"?ve.attributeType:null;if(pt){const ke=ge[pt._id];if(!ke||Array.isArray(ke)&&ke.length===0){rs(`${pt.attributeName} is required.`);return}}}}if(!at||at.trim().length===0){rs("Please enter your full name.");return}if(!At||At.trim().length===0){rs("Please enter your email address.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(At)){rs("Please enter a valid email address.");return}if(!Ft||Ft.trim().length===0){rs("Please enter your pincode.");return}if(Ft.length!==6||!/^\d+$/.test(Ft)){rs("Please enter a valid 6-digit pincode.");return}if(!Vs||Vs.trim().length===0){rs("Please enter your complete address.");return}if(!Bs||Bs.trim().length===0){rs("Please enter your mobile number.");return}if(Bs.length<10||!/^\d+$/.test(Bs)){rs("Please enter a valid 10-digit mobile number.");return}ps(!0),rs(null);try{await new Promise(pe=>setTimeout(pe,300));const ve={};if(!rr||!fa)throw new Error("Front design image is required.");try{let pe=rr;if(pe.includes(",")&&(pe=pe.split(",")[1]),!pe||pe.trim().length===0)throw new Error("Invalid front image data. Please upload the image again.");ve.frontImage={data:pe,contentType:fa.type||"image/png",filename:fa.name||"front-design.png"}}catch(pe){throw new Error(pe instanceof Error?pe.message:"Failed to prepare front design image. Please try uploading again.")}if(Zs&&ha)try{let pe=ha;pe.includes(",")&&(pe=pe.split(",")[1]),pe&&pe.trim().length>0&&(ve.backImage={data:pe,contentType:Zs.type||"image/png",filename:Zs.name||"back-design.png"})}catch{}const pt=Ie.map(pe=>{const Pe=f.options.find(Je=>Je.name===pe);return{optionId:pe,optionName:(Pe==null?void 0:Pe.name)||pe,name:(Pe==null?void 0:Pe.name)||pe,priceAdd:(Pe==null?void 0:Pe.priceAdd)||0,description:(Pe==null?void 0:Pe.description)||null,image:(Pe==null?void 0:Pe.image)||null}}),ke={},nt=[];for(const pe of Object.keys(ge)){const Pe=ge[pe];if(Pe!=null&&Pe!=="")if(pe.includes("__")){const[Je,ht]=pe.split("__"),Et=`${Je}:${ht}`,Ye=(U[Et]||[]).find(Xe=>Xe.value===Pe);if(Ye){const Xe=(Fe=f.dynamicAttributes)==null?void 0:Fe.find(It=>{const kt=typeof It.attributeType=="object"?It.attributeType:null;return(kt==null?void 0:kt._id)===Je});if(Xe){const It=typeof Xe.attributeType=="object"?Xe.attributeType:null;It&&nt.push({attributeTypeId:Je,attributeName:`${It.attributeName}: ${Ye.label}`,attributeValue:Pe,label:Ye.label||(Pe==null?void 0:Pe.toString())||"",priceAdd:Ye.priceAdd||0,description:void 0,image:Ye.image||void 0})}}}else{const Je=(we=f.dynamicAttributes)==null?void 0:we.find(ht=>{const Et=typeof ht.attributeType=="object"?ht.attributeType:null;return(Et==null?void 0:Et._id)===pe});if(Je){const ht=typeof Je.attributeType=="object"?Je.attributeType:null;if(ht){const Et=Je.customValues||[],He=ht.attributeValues||[],Ye=Et.length>0?Et:He;let Xe=null;if(Array.isArray(Pe)?Xe=Ye.filter(It=>Pe.includes(It.value)):Xe=Ye.find(It=>It.value===Pe||It.value===Pe.toString()),Xe)if(Array.isArray(Xe)){const It=Xe.map(wt=>wt.label||wt.value).join(", ");let kt=0,Fs=0;Xe.forEach(wt=>{if(wt.description){const Ra=wt.description.match(/Price Impact: ([\d.]+)/);Ra&&(kt+=parseFloat(Ra[1])||0)}wt.priceMultiplier&&(Fs+=wt.priceMultiplier)});const Os=`${pe}_images`,qt=Array.isArray(ge[Os])?ge[Os].filter(wt=>wt!==null):[],Ts=[];if(qt.length>0){for(const wt of qt)if(wt instanceof File)try{const Ra=new FileReader,Ba=await new Promise((sn,Dr)=>{Ra.onload=()=>{const an=Ra.result,zi=an.includes(",")?an.split(",")[1]:an;sn(zi)},Ra.onerror=Dr,Ra.readAsDataURL(wt)});Ts.push({data:Ba,contentType:wt.type||"image/png",filename:wt.name||"attribute-image.png"})}catch(Ra){console.error("Error converting image to base64:",Ra)}}nt.push({attributeTypeId:pe,attributeName:ht.attributeName||"Attribute",attributeValue:Pe,label:It,priceMultiplier:kt>0?void 0:Fs||void 0,priceAdd:kt,description:Xe.map(wt=>wt.description).filter(Boolean).join("; ")||void 0,image:((ye=Xe[0])==null?void 0:ye.image)||void 0,uploadedImages:Ts.length>0?Ts:void 0})}else{let It=0,kt=Xe.priceMultiplier;if(Xe.description){const Ts=Xe.description.match(/Price Impact: ([\d.]+)/);Ts&&(It=parseFloat(Ts[1])||0,It>0&&(kt=void 0))}const Fs=`${pe}_images`,Os=Array.isArray(ge[Fs])?ge[Fs].filter(Ts=>Ts!==null):[],qt=[];if(Os.length>0){for(const Ts of Os)if(Ts instanceof File)try{const wt=new FileReader,Ra=await new Promise((Ba,sn)=>{wt.onload=()=>{const Dr=wt.result,an=Dr.includes(",")?Dr.split(",")[1]:Dr;Ba(an)},wt.onerror=sn,wt.readAsDataURL(Ts)});qt.push({data:Ra,contentType:Ts.type||"image/png",filename:Ts.name||"attribute-image.png"})}catch(wt){console.error("Error converting image to base64:",wt)}}nt.push({attributeTypeId:pe,attributeName:ht.attributeName||"Attribute",attributeValue:Pe,label:Xe.label||(Pe==null?void 0:Pe.toString())||"",priceMultiplier:kt||void 0,priceAdd:It,description:Xe.description||void 0,image:Xe.image||void 0,uploadedImages:qt.length>0?qt:void 0})}else nt.push({attributeTypeId:pe,attributeName:ht.attributeName||"Attribute",attributeValue:Pe,label:(Pe==null?void 0:Pe.toString())||"",priceAdd:0})}}Pe instanceof File?ke[pe]=Pe.name:ke[pe]=Pe}}const Wt={productId:f._id,quantity:ie,finish:K,shape:de,selectedOptions:pt,selectedDynamicAttributes:nt,promoCodes:nr||[],pincode:Ft.trim(),address:Vs.trim(),mobileNumber:Bs.trim(),uploadedDesign:ve,notes:xa||"",advancePaid:0,paymentStatus:"pending",paymentGatewayInvoiceId:null,paperGSM:ke.paperGSM||null,paperQuality:ke.paperQuality||null,laminationType:ke.laminationType||null,specialEffects:ke.specialEffects?[ke.specialEffects]:[]},Es=localStorage.getItem("token");let ts;if(Es)ts=await fetch(`${Ae}/orders`,{method:"POST",headers:_i(),body:JSON.stringify(Wt)});else{const pe={...Wt,name:at.trim(),email:At.trim(),mobileNumber:Bs.trim()};ts=await fetch(`${Ae}/orders/create-with-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)})}if(!ts.ok){let pe="Failed to create order. Please try again.",Pe=null;try{const Je=await ts.json();if(pe=Je.error||pe,Pe=Je.details,pe.includes("No token provided")||pe.includes("token")){const ht={...Wt,name:at.trim(),email:At.trim(),mobileNumber:Bs.trim()},Et=await fetch(`${Ae}/orders/create-with-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ht)});if(Et.ok){const He=await Et.json();He.token&&(localStorage.setItem("token",He.token),He.user&&localStorage.setItem("user",JSON.stringify(He.user)));const Ye=He.order;es(!1),ps(!1),He.isNewUser&&He.tempPassword?alert(`Account created successfully!

Your temporary password: ${He.tempPassword}

Please save this password. You can change it after logging in.

Order placed successfully! Order Number: ${Ye.orderNumber||((Le=Ye.order)==null?void 0:Le.orderNumber)||"N/A"}`):alert(`Order placed successfully! Order Number: ${Ye.orderNumber||((rt=Ye.order)==null?void 0:rt.orderNumber)||"N/A"}`),Ye._id||(Te=Ye.order)!=null&&Te._id?n(`/order/${Ye._id||Ye.order._id}`):n("/profile");return}}if(Je.details)if(Array.isArray(Je.details)){const ht=Je.details.map(Et=>`${Et.field}: ${Et.message}`).join(`
`);pe+=`

`+ht}else pe+=`

`+Je.details}catch{const ht=await ts.text().catch(()=>"");pe+=`

Server returned: ${ts.status} ${ts.statusText}`}throw new Error(pe)}const xs=await ts.json(),ns=xs.order||xs;xs.token&&(localStorage.setItem("token",xs.token),xs.user&&localStorage.setItem("user",JSON.stringify(xs.user))),es(!1),ps(!1),xs.isNewUser&&xs.tempPassword?alert(`Account created successfully!

Your temporary password: ${xs.tempPassword}

Please save this password. You can change it after logging in.

Order placed successfully! Order Number: ${ns.orderNumber||((Ue=ns.order)==null?void 0:Ue.orderNumber)||"N/A"}`):alert(`Order placed successfully! Order Number: ${ns.orderNumber||((Me=ns.order)==null?void 0:Me.orderNumber)||"N/A"}`),ns._id||(ze=ns.order)!=null&&ze._id?n(`/order/${ns._id||ns.order._id}`):n("/profile")}catch(ve){rs(ve instanceof Error?ve.message:"Failed to process payment and create order. Please try again."),ps(!1)}};return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-4 sm:py-8",children:[e.jsx("style",{children:`
        .preview-container {
          position: relative;
          width: 100%;
          max-width: 500px;
          height: auto;
          display: inline-block;
          overflow: hidden;
        }
        
        .card-image {
          width: 100%;
          height: 100%;
          object-fit: contain;
          border-radius: 8px;
          transition: filter 0.4s;
          display: block;
          position: relative;
          z-index: 1;
        }
        
        /* GLOSS EFFECT (SHINY OVERLAY) */
        .preview-container.gloss::after {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(
            120deg,
            rgba(255, 255, 255, 0.25),
            rgba(255, 255, 255, 0) 60%
          );
          pointer-events: none;
          border-radius: 8px;
          z-index: 2;
        }
        
        /* UV COATING (DEEP SHINE + BOOST COLOR) */
        .preview-container.uv .card-image {
          filter: saturate(1.15) contrast(1.1) !important;
        }
        
        .preview-container.uv::after {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.35),
            rgba(255, 255, 255, 0) 70%
          );
          mix-blend-mode: screen;
          pointer-events: none;
          border-radius: 8px;
          z-index: 2;
        }
        
        /* LAMINATION (SOFT GLOSS, LOW SHINE) */
        .preview-container.laminated .card-image {
          filter: brightness(1.05) !important;
        }
        
        .preview-container.laminated::after {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(255, 255, 255, 0.08);
          border-radius: 8px;
          pointer-events: none;
          z-index: 2;
        }
        
        /* TEXTURE EFFECTS - Different patterns for each texture number */
        .preview-container.texture::before {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          pointer-events: none;
          border-radius: 8px;
          z-index: 3;
          opacity: 0.35;
          mix-blend-mode: overlay;
        }
        
        /* Texture No.1 - Fine Grid */
        .preview-container.texture-1::before {
          background-image: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.03) 2px,
            rgba(0, 0, 0, 0.03) 4px
          ),
          repeating-linear-gradient(
            90deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.03) 2px,
            rgba(0, 0, 0, 0.03) 4px
          );
        }
        
        /* Texture No.2 - Coarse Grid */
        .preview-container.texture-2::before {
          background-image: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 4px,
            rgba(0, 0, 0, 0.04) 4px,
            rgba(0, 0, 0, 0.04) 8px
          ),
          repeating-linear-gradient(
            90deg,
            transparent,
            transparent 4px,
            rgba(0, 0, 0, 0.04) 4px,
            rgba(0, 0, 0, 0.04) 8px
          );
        }
        
        /* Texture No.3 - Diagonal Lines */
        .preview-container.texture-3::before {
          background-image: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 3px,
            rgba(0, 0, 0, 0.03) 3px,
            rgba(0, 0, 0, 0.03) 6px
          );
        }
        
        /* Texture No.4 - Dots Pattern */
        .preview-container.texture-4::before {
          background-image: radial-gradient(circle, rgba(0, 0, 0, 0.04) 1px, transparent 1px);
          background-size: 6px 6px;
        }
        
        /* Texture No.5 - Horizontal Lines */
        .preview-container.texture-5::before {
          background-image: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 3px,
            rgba(0, 0, 0, 0.03) 3px,
            rgba(0, 0, 0, 0.03) 6px
          );
        }
        
        /* Texture No.6 - Vertical Lines */
        .preview-container.texture-6::before {
          background-image: repeating-linear-gradient(
            90deg,
            transparent,
            transparent 3px,
            rgba(0, 0, 0, 0.03) 3px,
            rgba(0, 0, 0, 0.03) 6px
          );
        }
        
        /* Texture No.7 - Crosshatch */
        .preview-container.texture-7::before {
          background-image: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.02) 2px,
            rgba(0, 0, 0, 0.02) 4px
          ),
          repeating-linear-gradient(
            -45deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.02) 2px,
            rgba(0, 0, 0, 0.02) 4px
          );
        }
        
        /* Texture No.8 - Fine Dots */
        .preview-container.texture-8::before {
          background-image: radial-gradient(circle, rgba(0, 0, 0, 0.03) 0.5px, transparent 0.5px);
          background-size: 4px 4px;
        }
        
        /* NO COATING (MATTE LOOK) */
        .preview-container.none .card-image {
          filter: saturate(0.9) contrast(0.95) !important;
        }
        
        /* SIZE EFFECTS */
        .preview-container.small {
          transform: scale(0.8);
          transition: transform 0.3s ease, max-width 0.3s ease;
        }
        
        .preview-container.small .card-image {
          transform: scale(1);
        }
        
        /* Modal specific styles */
        .preview-container .card-image {
          max-width: 100%;
          max-height: 90vh;
        }
      `}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx(kr,{onClick:()=>{n(u&&m&&d&&l&&!(u===m)?`/digital-print/${l}/${d}/${m}`:u&&d&&l&&!(u===d)?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:u&&m&&d&&l&&u!==m?`/digital-print/${l}/${d}/${m}`:u&&d&&l&&u!==d?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:l?`/digital-print/${l}`:"/digital-print",label:u&&d&&u!==d||u&&m&&u!==m?"Back to products":u&&l||d?"Back to Category":"Back to Categories",className:"text-sm sm:text-base text-cream-600 hover:text-cream-900"})}),T&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(Qt,{className:"animate-spin text-cream-900",size:48})}),L&&!T&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-800",children:L})}),Ve&&u&&e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-50",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[e.jsx(bs,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-2",children:"Error Loading Product"}),e.jsx("p",{className:"text-cream-700 mb-4",children:Ve}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800",children:"Retry"})]})}),e.jsx(ca,{children:be&&e.jsxs(st.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"sticky top-4 mb-4 p-4 bg-red-50 border-2 border-red-300 rounded-lg flex items-start gap-3 text-red-700 shadow-lg z-50",role:"alert",children:[e.jsx(bs,{size:20,className:"shrink-0 mt-0.5 text-red-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold mb-1 text-red-900",children:"Please complete the required fields:"}),e.jsx("ul",{className:"text-sm whitespace-pre-wrap font-sans list-disc list-inside space-y-1",children:be.split(`
`).filter(oe=>oe.trim()).map((oe,Fe)=>e.jsx("li",{className:"text-red-800",children:oe.replace(/^Please fill in all required fields:\n?/,"")},Fe))})]}),e.jsx("button",{onClick:()=>We(null),className:"shrink-0 text-red-500 hover:text-red-700 transition-colors","aria-label":"Close error message",children:e.jsx(as,{size:18})})]})}),!T&&!L&&!le&&!Ve&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsxs("div",{className:"lg:sticky lg:top-24 space-y-4",children:[e.jsx(st.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[320px] sm:min-h-[420px] md:min-h-[520px] bg-cream-100/50",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:(()=>{let oe=(f==null?void 0:f.image)||(v==null?void 0:v.image)||"/Glossy.png",Fe=(f==null?void 0:f.name)||(v==null?void 0:v.name)||"Product Preview";if((!oe||oe.trim()===""||oe==="null"||oe==="undefined")&&(oe=(v==null?void 0:v.image)||"/Glossy.png"),f&&f.dynamicAttributes&&re.size>0){const we=[...f.dynamicAttributes].filter(ye=>ye.isEnabled).sort((ye,Le)=>(ye.displayOrder||0)-(Le.displayOrder||0));for(const ye of we){const Le=typeof ye.attributeType=="object"?ye.attributeType:null;if(!Le||!re.has(Le._id))continue;const rt=ge[Le._id];if(!rt)continue;const Te=Array.isArray(rt)?rt:[rt],Ue=ye.customValues&&ye.customValues.length>0?ye.customValues:Le.attributeValues||[];let Me=!1;for(const ze of Te){const ve=Ue.find(pt=>pt.value===ze||pt.value===String(ze));if(ve&&ve.image&&ve.image.trim()!==""){oe=ve.image,Fe=`${Le.attributeName} - ${ve.label}`,Me=!0;break}}if(Me)break}}return e.jsx("img",{src:oe,alt:Fe,className:"w-full h-full object-contain rounded-lg",onError:we=>{const ye=we.target;ye.src!==(v==null?void 0:v.image)&&ye.src!=="/Glossy.png"&&(ye.src=(v==null?void 0:v.image)||"/Glossy.png")},style:{maxWidth:"100%",maxHeight:"100%"}})})()})}),f&&e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 p-4 sm:p-5 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-sm sm:text-base font-semibold text-cream-900",children:"Order Summary"}),e.jsx("span",{className:"text-xs text-cream-500",children:"Live pricing"})]}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm text-cream-800 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-cream-600",children:"Product"}),e.jsx("span",{className:"font-medium text-right line-clamp-1 ml-2",children:f.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-cream-600",children:"Quantity"}),e.jsx("span",{className:"font-medium",children:ie.toLocaleString()})]})]}),e.jsx($E,{onLocationDetected:oe=>{console.log(" Location detected for pricing:",oe)},showUI:!1,autoDetect:!0}),e.jsx(LE,{productId:f._id,quantity:ie,selectedDynamicAttributes:Object.entries(ge).filter(([oe,Fe])=>Fe!=null&&Fe!=="").map(([oe,Fe])=>{const we=B.find(rt=>rt._id===oe),ye=(we==null?void 0:we.attributeName)||oe;let Le=Fe;if(we!=null&&we.attributeValues){const rt=we.attributeValues.find(Te=>Te.value===Fe);Le=(rt==null?void 0:rt.label)||Fe}return{attributeType:oe,value:typeof Fe=="object"&&!Array.isArray(Fe)&&!(Fe instanceof File)?JSON.stringify(Fe):Fe,name:ye,label:Le}}),showBreakdown:!1})]})]})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"bg-white p-4 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl shadow-lg border border-cream-100 min-h-[600px] lg:min-h-[700px] flex flex-col",children:f?e.jsx(ca,{mode:"wait",children:e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[e.jsxs("div",{className:"mb-6 sm:mb-8 border-b border-cream-100 pb-4 sm:pb-6 relative",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx(kr,{onClick:()=>{n(u&&m&&d&&l?`/digital-print/${l}/${d}/${m}`:u&&d&&l?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:u&&m&&d&&l?`/digital-print/${l}/${d}/${m}`:u&&d&&l?`/digital-print/${l}/${d}`:u&&l?`/digital-print/${l}`:m&&d&&l?`/digital-print/${l}/${d}`:d&&l?`/digital-print/${l}`:l?`/digital-print/${l}`:"/digital-print",label:u&&d?"Back to Subcategory":u&&l||d?"Back to Category":"Back to Categories",className:"text-sm text-cream-600 hover:text-cream-900 mb-2"})}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"font-serif text-xl sm:text-2xl md:text-3xl font-bold text-cream-900 mb-2",children:f.name}),e.jsxs("button",{onClick:()=>Kt(!_t),className:"mt-2 mb-4 px-4 py-2 bg-cream-100 hover:bg-cream-200 text-cream-900 rounded-lg border border-cream-300 text-sm font-medium transition-all flex items-center gap-2",children:[e.jsx(hr,{size:16}),"Instructions"]}),e.jsx(ca,{children:_t&&e.jsx(st.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4 mb-6 p-4 sm:p-6 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-bold text-yellow-900 mb-3 flex items-center gap-2",children:[e.jsx(hr,{size:16}),"Important Instructions - Please Read Carefully"]}),f.instructions&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border-2 border-red-300 rounded-lg",children:[e.jsxs("p",{className:"text-xs font-bold text-red-900 mb-2 flex items-center gap-2",children:[e.jsx(as,{size:14,className:"text-red-600"}),"CRITICAL: Company Not Responsible If Instructions Not Followed"]}),e.jsx("div",{className:"text-xs sm:text-sm text-red-800 whitespace-pre-line",children:f.instructions})]}),e.jsxs("div",{className:"space-y-3 text-xs sm:text-sm text-yellow-800",children:[(f.maxFileSizeMB||f.minFileWidth||f.maxFileWidth||f.minFileHeight||f.maxFileHeight||f.blockCDRandJPG)&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-900 mb-2",children:"File Upload Requirements:"}),e.jsxs("div",{className:"space-y-1 ml-4",children:[f.maxFileSizeMB&&e.jsxs("p",{children:[" Maximum file size: ",e.jsxs("strong",{children:[f.maxFileSizeMB," MB"]})]}),(f.minFileWidth||f.maxFileWidth||f.minFileHeight||f.maxFileHeight)&&e.jsxs("div",{children:[e.jsx("p",{children:" File dimensions:"}),e.jsxs("div",{className:"ml-4 space-y-1",children:[(f.minFileWidth||f.maxFileWidth)&&e.jsxs("p",{children:["- Width: ",e.jsx("strong",{children:f.minFileWidth&&f.maxFileWidth?`${f.minFileWidth} - ${f.maxFileWidth} pixels`:f.minFileWidth?`Minimum ${f.minFileWidth} pixels`:f.maxFileWidth?`Maximum ${f.maxFileWidth} pixels`:"Any"})]}),(f.minFileHeight||f.maxFileHeight)&&e.jsxs("p",{children:["- Height: ",e.jsx("strong",{children:f.minFileHeight&&f.maxFileHeight?`${f.minFileHeight} - ${f.maxFileHeight} pixels`:f.minFileHeight?`Minimum ${f.minFileHeight} pixels`:f.maxFileHeight?`Maximum ${f.maxFileHeight} pixels`:"Any"})]})]})]}),f.blockCDRandJPG&&e.jsxs("p",{children:[" ",e.jsx("strong",{children:"CDR and JPG files are not accepted"})," for this product"]})]})]}),(f.additionalDesignCharge||f.gstPercentage)&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-900 mb-2",children:"Additional Charges:"}),e.jsxs("div",{className:"space-y-1 ml-4",children:[f.additionalDesignCharge&&f.additionalDesignCharge>0&&e.jsxs("p",{children:[" Additional Design Charge: ",e.jsxs("strong",{children:["",f.additionalDesignCharge.toFixed(2)]})," (applied if design help is needed)"]}),f.gstPercentage&&f.gstPercentage>0&&e.jsxs("p",{children:[" GST: ",e.jsxs("strong",{children:[f.gstPercentage,"%"]})," (applied on subtotal + design charge)"]})]})]}),!f.instructions&&!f.maxFileSizeMB&&!f.minFileWidth&&!f.maxFileWidth&&!f.minFileHeight&&!f.maxFileHeight&&!f.blockCDRandJPG&&!f.additionalDesignCharge&&!f.gstPercentage&&e.jsx("p",{className:"text-yellow-700 italic",children:"No special instructions for this product."})]})]})})}),e.jsx("div",{className:"text-sm sm:text-base text-cream-600 space-y-2",children:(()=>{if(f.description&&/<[a-z][\s\S]*>/i.test(f.description))return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                                        .product-description-html {
                                          color: #92400e;
                                          line-height: 1.6;
                                          white-space: normal;
                                        }
                                        .product-description-html b,
                                        .product-description-html strong {
                                          font-weight: 600;
                                          color: #7c2d12;
                                          display: inline;
                                        }
                                        .product-description-html > b:first-child,
                                        .product-description-html > strong:first-child {
                                          display: block;
                                          font-size: 1.1em;
                                          margin-bottom: 0.75rem;
                                          color: #7c2d12;
                                        }
                                        .product-description-html p,
                                        .product-description-html div {
                                          margin-bottom: 0.5rem;
                                          line-height: 1.6;
                                          color: #92400e;
                                          white-space: normal;
                                          word-wrap: break-word;
                                          overflow-wrap: break-word;
                                        }
                                        .product-description-html div:not(:first-child) {
                                          padding-left: 0;
                                        }
                                        .product-description-html ul,
                                        .product-description-html ol {
                                          margin-left: 1.5rem;
                                          margin-bottom: 0.5rem;
                                        }
                                        .product-description-html li {
                                          margin-bottom: 0.25rem;
                                        }
                                      `}),e.jsx("div",{className:"product-description-html text-cream-600",dangerouslySetInnerHTML:{__html:f.description}})]});if(f.descriptionArray&&Array.isArray(f.descriptionArray)&&f.descriptionArray.length>0){const oe=we=>we.split(/(\*\*.*?\*\*)/g).map((Le,rt)=>{if(Le.startsWith("**")&&Le.endsWith("**")){const Te=Le.slice(2,-2);return e.jsx("strong",{className:"font-bold text-cream-800",children:Te},rt)}return e.jsx("span",{children:Le},rt)});return[...f.descriptionArray].reverse().map((we,ye)=>{if(we.includes(":"))return e.jsx("div",{className:"mt-3 first:mt-0",children:e.jsx("p",{className:"font-semibold text-cream-700 mb-1.5",children:oe(we)})},ye);if(we.startsWith("")||we.startsWith("->")||we.startsWith("")){const Le=we.replace(/^[\-]+\s*/,"").trim();return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:oe(Le)})]},ye)}else return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:oe(we)})]},ye)})}else if(f.description){const oe=f.description.split(`
`).map(we=>we.trim()).filter(we=>we.length>0),Fe=we=>we.split(/(\*\*.*?\*\*)/g).map((Le,rt)=>{if(Le.startsWith("**")&&Le.endsWith("**")){const Te=Le.slice(2,-2);return e.jsx("strong",{className:"font-bold text-cream-800",children:Te},rt)}return e.jsx("span",{children:Le},rt)});return oe.map((we,ye)=>{if(we.includes(":"))return e.jsx("div",{className:"mt-3 first:mt-0",children:e.jsx("p",{className:"font-semibold text-cream-700 mb-1.5",children:Fe(we)})},ye);if(we.startsWith("")||we.startsWith("->")||we.startsWith("")){const Le=we.replace(/^[\-]+\s*/,"").trim();return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:Fe(Le)})]},ye)}else return e.jsxs("p",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-cream-500 mt-1",children:""}),e.jsx("span",{children:Fe(we)})]},ye)})}else return e.jsx("p",{className:"text-cream-500 italic",children:"No description available"})})()})]})})]}),(()=>{var rt,Te,Ue;let oe=1;const Fe=f.options&&f.options.length>0,we=((rt=f.filters)==null?void 0:rt.printingOption)&&f.filters.printingOption.length>0,ye=((Te=f.filters)==null?void 0:Te.textureType)&&f.filters.textureType.length>0,Le=((Ue=f.filters)==null?void 0:Ue.deliverySpeed)&&f.filters.deliverySpeed.length>0;return e.jsxs(e.Fragment,{children:[Fe&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[oe++,". Product Options"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:f.options.map((Me,ze)=>{const ve=Ie.includes(Me.name);return e.jsxs("button",{type:"button",onClick:()=>{Be(ve?Ie.filter(pt=>pt!==Me.name):[...Ie,Me.name])},className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${ve?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[ve&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Za,{size:18,className:"text-cream-900"})}),e.jsx("div",{className:"font-bold text-sm mb-1",children:Me.name}),Me.description&&e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:Me.description}),Me.priceAdd!==void 0&&Me.priceAdd!==0&&e.jsxs("p",{className:"text-xs text-cream-700 mt-1 font-medium",children:[Me.priceAdd>0?"+":"","",typeof Me.priceAdd=="number"?Me.priceAdd.toFixed(2):parseFloat(Me.priceAdd).toFixed(2)," per 1000 units"]}),Me.image&&e.jsx("img",{src:Me.image,alt:Me.name,className:"w-full h-24 object-cover rounded-lg mt-2"})]},ze)})})]}),we&&f.filters.printingOption.length>1&&e.jsxs("div",{className:"mb-6 sm:mb-8","data-section":"printingOption",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[oe++,". Printing Option"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:f.filters.printingOption.map(Me=>{var pt,ke;const ze=((pt=f.filters)==null?void 0:pt.filterPricesEnabled)||!1;let ve=null;if(ze&&((ke=f.filters)!=null&&ke.printingOptionPrices)){const nt=f.filters.printingOptionPrices.find(Wt=>Wt.name===Me);nt&&nt.priceAdd!==void 0&&nt.priceAdd!==0&&(ve=nt.priceAdd)}return e.jsxs("button",{"data-field":"printingOption",onClick:()=>q(Me),className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${K===Me?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[K===Me&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Za,{size:18,className:"text-cream-900"})}),e.jsx("div",{className:"font-bold text-sm",children:Me}),ve!==null&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1",children:[ve>0?"+":"","",Math.abs(ve).toFixed(2)," per 1000 units"]})]},Me)})})]}),ye&&f.filters.textureType.length>1&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[oe++,". Texture Type"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:f.filters.textureType.map(Me=>{var pt,ke;const ze=((pt=f.filters)==null?void 0:pt.filterPricesEnabled)||!1;let ve=null;if(ze&&((ke=f.filters)!=null&&ke.textureTypePrices)){const nt=f.filters.textureTypePrices.find(Wt=>Wt.name===Me);nt&&nt.priceAdd!==void 0&&nt.priceAdd!==0&&(ve=nt.priceAdd)}return e.jsxs("button",{onClick:()=>G(Me),className:`p-3 rounded-xl border text-xs sm:text-sm font-medium transition-all duration-200 relative ${A===Me?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[A===Me&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx(Za,{size:16,className:"text-cream-900"})}),e.jsx("div",{children:Me}),ve!==null&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1",children:[ve>0?"+":"","",Math.abs(ve).toFixed(2),"/1k"]})]},Me)})})]}),Le&&f.filters.deliverySpeed.length>1&&e.jsxs("div",{className:"mb-6 sm:mb-8","data-section":"deliverySpeed",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[oe++,". Delivery Speed"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:f.filters.deliverySpeed.map(Me=>{var pt,ke;const ze=((pt=f.filters)==null?void 0:pt.filterPricesEnabled)||!1;let ve=null;if(ze&&((ke=f.filters)!=null&&ke.deliverySpeedPrices)){const nt=f.filters.deliverySpeedPrices.find(Wt=>Wt.name===Me);nt&&nt.priceAdd!==void 0&&nt.priceAdd!==0&&(ve=nt.priceAdd)}return e.jsxs("button",{"data-field":"deliverySpeed",onClick:()=>Ce(Me),className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${de===Me?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[de===Me&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Za,{size:18,className:"text-cream-900"})}),e.jsx("div",{className:"font-bold text-sm",children:Me}),ve!==null&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1",children:[ve>0?"+":"","",Math.abs(ve).toFixed(2)," per 1000 units"]})]},Me)})})]}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[oe++,". Select Quantity"]}),e.jsx("div",{className:"mb-3",children:e.jsx(jh,{options:da(f).map(Me=>({value:Me,label:Me.toLocaleString()})),value:ie,onValueChange:Me=>Re(Number(Me)),placeholder:"Select quantity",className:"w-full"})}),(()=>{let Me=null,ze="";if(J&&B.length>0){for(const ke of B)if(!(!ke.isVisible||!ge[ke._id])){if(ke.isStepQuantity&&ke.stepQuantities&&ke.stepQuantities.length>0){Me={type:"STEP_WISE",stepQuantities:ke.stepQuantities},ze=ke.attributeName;break}if(ke.isRangeQuantity&&ke.rangeQuantities&&ke.rangeQuantities.length>0){Me={type:"RANGE_WISE",rangeQuantities:ke.rangeQuantities},ze=ke.attributeName;break}}}if(!Me&&f&&f.dynamicAttributes)for(const ke of f.dynamicAttributes){if(!ke.isEnabled)continue;const nt=typeof ke.attributeType=="object"?ke.attributeType:null;if(!(!nt||!ge[nt._id])){if(nt.isStepQuantity&&nt.stepQuantities&&nt.stepQuantities.length>0){Me={type:"STEP_WISE",stepQuantities:nt.stepQuantities},ze=nt.attributeName;break}if(nt.isRangeQuantity&&nt.rangeQuantities&&nt.rangeQuantities.length>0){Me={type:"RANGE_WISE",rangeQuantities:nt.rangeQuantities},ze=nt.attributeName;break}}}if(Me){if(Me.type==="STEP_WISE"){const ke=Me.stepQuantities.map(nt=>{const Wt=parseFloat(typeof nt=="object"?nt.quantity:nt);return isNaN(Wt)?0:Wt}).filter(nt=>nt>0).sort((nt,Wt)=>nt-Wt);return e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2",children:[e.jsxs("span",{className:"font-medium",children:[ze,":"]})," Available quantities: ",ke.map(nt=>nt.toLocaleString()).join(", ")]})}else if(Me.type==="RANGE_WISE")return e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2 space-y-1",children:[e.jsxs("div",{className:"font-medium mb-1",children:[ze,":"]}),Me.rangeQuantities.map((ke,nt)=>{const Wt=typeof ke=="object"?parseFloat(ke.min):0,Es=typeof ke=="object"&&ke.max?parseFloat(ke.max):null,ts=typeof ke=="object"?parseFloat(ke.price):0;return e.jsxs("div",{children:[ke.label||`${Wt.toLocaleString()}${Es?` - ${Es.toLocaleString()}`:"+"} units`,ts>0&&e.jsxs("span",{className:"ml-2 text-green-600",children:["(",ts.toFixed(2),")"]})]},nt)})]})}const ve=f.filters.orderQuantity,pt=ve.quantityType||"SIMPLE";return pt==="STEP_WISE"&&ve.stepWiseQuantities&&ve.stepWiseQuantities.length>0?e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2",children:["Available quantities: ",ve.stepWiseQuantities.sort((ke,nt)=>ke-nt).map(ke=>ke.toLocaleString()).join(", ")]}):pt==="RANGE_WISE"&&ve.rangeWiseQuantities&&ve.rangeWiseQuantities.length>0?e.jsx("div",{className:"text-xs sm:text-sm text-cream-600 mb-2 space-y-1",children:ve.rangeWiseQuantities.map((ke,nt)=>e.jsxs("div",{children:[ke.label||`${ke.min.toLocaleString()}${ke.max?` - ${ke.max.toLocaleString()}`:"+"} units`,ke.priceMultiplier!==1&&e.jsxs("span",{className:"ml-2 text-green-600",children:["(",ke.priceMultiplier>1?"+":"",((ke.priceMultiplier-1)*100).toFixed(0),"% price)"]})]},nt))}):e.jsxs("div",{className:"text-xs sm:text-sm text-cream-600 mb-2",children:["Min: ",ve.min.toLocaleString(),", Max: ",ve.max.toLocaleString(),", Multiples of: ",ve.multiples.toLocaleString()]})})(),ra!==null&&ra>0&&e.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-xs sm:text-sm text-green-800 font-medium",children:[" You're saving ",ra,"% on this order! (Bulk discount applied)"]})}),f.quantityDiscounts&&f.quantityDiscounts.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 mb-2",children:"Available Quantity Discounts:"}),e.jsx("div",{className:"space-y-1",children:f.quantityDiscounts.map((Me,ze)=>{const ve=Me.minQuantity||0,pt=Me.maxQuantity,ke=Me.discountPercentage||0,nt=pt?`${ve.toLocaleString()} - ${pt.toLocaleString()} units`:`${ve.toLocaleString()}+ units`;return e.jsxs("p",{className:"text-xs text-blue-800",children:[" ",nt,": ",e.jsxs("strong",{children:[ke,"% off"]})]},ze)})})]})]}),(()=>{let Me=[];return J&&B.length>0?Me=mj({attributes:B,rules:k,selectedValues:{...ge}}).attributes.filter(ve=>ve.isVisible).sort((ve,pt)=>(ve.displayOrder||0)-(pt.displayOrder||0)):f.dynamicAttributes&&(Me=f.dynamicAttributes.filter(ze=>ze.isEnabled).sort((ze,ve)=>(ze.displayOrder||0)-(ve.displayOrder||0))),Me.length>0?e.jsx(e.Fragment,{children:Me.map(ze=>{var Pe;let ve=null,pt=[],ke="",nt=!1;if(J&&B.length>0)ke=ze._id,nt=ze.isRequired||!1,ze.displayOrder,pt=ze.allowedValues&&ze.allowedValues.length>0?(ze.attributeValues||[]).filter(Je=>ze.allowedValues.includes(Je.value)):ze.attributeValues||[],ve={_id:ze._id,attributeName:ze.attributeName,inputStyle:ze.inputStyle,attributeValues:pt,defaultValue:ze.defaultValue};else{if(typeof ze.attributeType=="object"&&ze.attributeType!==null)ve=ze.attributeType,ke=ve._id;else if(typeof ze.attributeType=="string"&&ze.attributeType.trim()!=="")return null;if(!ve||!ve._id)return null;ke=ve._id,nt=ze.isRequired||!1,ze.displayOrder,pt=ze.customValues&&ze.customValues.length>0?ze.customValues:ve.attributeValues||[]}if(["DROPDOWN","RADIO","POPUP"].includes(ve.inputStyle)&&pt.length<1)return e.jsxs("div",{className:"mb-6 sm:mb-8 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[oe++,". ",ve.attributeName,nt&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("p",{className:"text-sm text-yellow-800",children:"This attribute is not available because it requires at least 2 options. Please contact support."})]},ke);const Es=ge[ke],ts=pt.find(Je=>Je.value===Es),xs=(ts==null?void 0:ts.hasSubAttributes)===!0,ns=`${ke}:${Es||""}`,pe=xs&&Es?U[ns]||[]:[];return e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-bold text-cream-900 mb-2 sm:mb-3 uppercase tracking-wider",children:[oe++,". ",ve.attributeName,nt&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(ve.inputStyle==="DROPDOWN"||ve.inputStyle==="POPUP")&&e.jsx("div",{"data-attribute":ke,"data-attribute-name":ve.attributeName,children:pt.length===0?e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No options available for this attribute. Please contact support."})}):e.jsxs(e.Fragment,{children:[e.jsx(jh,{options:pt.filter(Je=>Je&&Je.value&&Je.label).map(Je=>{let ht="";if(Je.description){const Et=Je.description.match(/Price Impact: ([\d.]+)/);if(Et){const He=parseFloat(Et[1])||0;He>0&&(ht=` (+${He.toFixed(2)}/unit)`)}}if(!ht&&Je.priceMultiplier&&Je.priceMultiplier!==1&&f){const He=(f.basePrice||0)*(Je.priceMultiplier-1);Math.abs(He)>=.01&&(ht=` (+${He.toFixed(2)}/unit)`)}return{value:Je.value,label:`${Je.label}${ht}`}}),value:ge[ke]||"",onValueChange:Je=>{R({...ge,[ke]:Je}),je(ht=>new Set(ht).add(ke))},placeholder:`Select ${ve.attributeName}`,className:"w-full"}),pe.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-xs font-semibold text-cream-700 mb-2",children:["Select ",(ts==null?void 0:ts.label)||ve.attributeName," Option:"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:pe.map(Je=>{const ht=()=>!Je.priceAdd||Je.priceAdd===0?null:`+${Je.priceAdd.toFixed(2)}/piece`,Et=`${ke}__${Es}`,He=ge[Et]===Je.value;return e.jsxs("button",{type:"button",onClick:()=>{R(Ye=>({...Ye,[Et]:Je.value}))},className:`p-3 rounded-lg border text-left transition-all ${He?"border-cream-900 bg-cream-50 ring-1 ring-cream-900":"border-cream-200 hover:border-cream-400"}`,children:[Je.image&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:Je.image,alt:Je.label,className:"w-full h-24 object-cover rounded"})}),e.jsx("div",{className:"text-sm font-medium",children:Je.label}),ht()&&e.jsx("div",{className:"text-xs text-cream-600 mt-1",children:ht()})]},Je._id)})})]}),(()=>{const Je=ge[ke];if(!Je)return null;const ht=pt.find(It=>It.value===Je);if(!ht||!ht.description)return null;const Et=ht.description.match(/Images Required: (\d+)/),He=Et?parseInt(Et[1]):0;if(He<=0)return null;const Ye=`${ke}_images`,Xe=Array.isArray(ge[Ye])?ge[Ye]:[];return e.jsxs("div",{className:"mt-4 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsxs("label",{className:"block text-sm font-semibold text-cream-900 mb-3",children:["Upload Images for ",ht.label," (",He," required) *"]}),e.jsx("div",{className:"space-y-3",children:Array.from({length:He}).map((It,kt)=>{const Fs=Xe[kt]||null;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*","data-image-index":kt,"data-attr-id":ke,onChange:Os=>{var Ts;const qt=((Ts=Os.target.files)==null?void 0:Ts[0])||null;if(qt){const wt=[...Xe];for(;wt.length<=kt;)wt.push(null);wt[kt]=qt,R({...ge,[Ye]:wt})}},className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg text-sm"}),Fs&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-cream-600 max-w-[150px] truncate",children:Fs.name}),e.jsx("button",{type:"button",onClick:()=>{const Os=[...Xe];Os[kt]=null,R({...ge,[Ye]:Os});const qt=document.querySelector(`input[type="file"][data-image-index="${kt}"][data-attr-id="${ke}"]`);qt&&(qt.value="")},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove image",children:e.jsx(as,{size:16})})]})]},kt)})}),Xe.length<He&&e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Please upload ",He-Xe.length," more image(s)"]})]})})()]})}),ve.inputStyle==="RADIO"&&e.jsx("div",{"data-attribute":ke,children:pt.length===0?e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No options available for this attribute. Please contact support."})}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>{const Je=pt.filter(ht=>ht&&ht.value&&ht.label);Ka({attributeId:ke,attributeName:ve.attributeName,attributeValues:Je,selectedValue:ge[ke]||null,isRequired:nt}),gr(!0)},className:"w-full px-4 py-3 border-2 border-dashed border-cream-300 rounded-xl hover:border-cream-400 hover:bg-cream-50 transition-all duration-200 text-left flex items-center justify-between group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-cream-700 group-hover:text-cream-900",children:ge[ke]?((Pe=pt.find(Je=>Je.value===ge[ke]))==null?void 0:Pe.label)||"Select option":`Select ${ve.attributeName}${nt?" *":""}`}),ge[ke]&&e.jsx("div",{className:"text-xs text-cream-500 mt-1",children:"Click to change selection"})]}),e.jsx(Yr,{size:18,className:"text-cream-400 group-hover:text-cream-600 transition-colors"})]}),(()=>{const Je=ge[ke];if(!Je)return null;const ht=pt.find(It=>It.value===Je);if(!ht||!ht.description)return null;const Et=ht.description.match(/Images Required: (\d+)/),He=Et?parseInt(Et[1]):0;if(He<=0)return null;const Ye=`${ke}_images`,Xe=Array.isArray(ge[Ye])?ge[Ye]:[];return e.jsxs("div",{className:"mt-4 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsxs("label",{className:"block text-sm font-semibold text-cream-900 mb-3",children:["Upload Images for ",ht.label," (",He," required) *"]}),e.jsx("div",{className:"space-y-3",children:Array.from({length:He}).map((It,kt)=>{const Fs=Xe[kt]||null;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*","data-image-index":kt,"data-attr-id":ke,onChange:Os=>{var Ts;const qt=((Ts=Os.target.files)==null?void 0:Ts[0])||null;if(qt){const wt=[...Xe];for(;wt.length<=kt;)wt.push(null);wt[kt]=qt,R({...ge,[Ye]:wt})}},className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg text-sm"}),Fs&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-cream-600 max-w-[150px] truncate",children:Fs.name}),e.jsx("button",{type:"button",onClick:()=>{const Os=[...Xe];Os[kt]=null,R({...ge,[Ye]:Os});const qt=document.querySelector(`input[type="file"][data-image-index="${kt}"][data-attr-id="${ke}"]`);qt&&(qt.value="")},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove image",children:e.jsx(as,{size:16})})]})]},kt)})}),Xe.length<He&&e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Please upload ",He-Xe.length," more image(s)"]})]})})()]})}),ve.inputStyle==="CHECKBOX"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3","data-attribute":ke,children:pt.length===0?e.jsx("div",{className:"col-span-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No options available for this attribute. Please contact support."})}):pt.filter(Je=>Je&&Je.value&&Je.label).map(Je=>{const ht=()=>{if(Je.description){const Xe=Je.description.match(/Price Impact: ([\d.]+)/);if(Xe){const It=parseFloat(Xe[1])||0;if(It>0)return`+${It.toFixed(2)}/unit`}}if(!Je.priceMultiplier||Je.priceMultiplier===1||!f)return null;const Ye=(f.basePrice||0)*(Je.priceMultiplier-1);return Math.abs(Ye)<.01?null:`+${Ye.toFixed(2)}/unit`},Et=Array.isArray(ge[ke])&&ge[ke].includes(Je.value);return e.jsxs("button",{type:"button",onClick:()=>{const He=Array.isArray(ge[ke])?ge[ke]:[],Ye=Et?He.filter(Xe=>Xe!==Je.value):[...He,Je.value];R({...ge,[ke]:Ye}),je(Xe=>new Set(Xe).add(ke))},className:`p-4 rounded-xl border text-left transition-all duration-200 relative ${Et?"border-cream-900 bg-cream-50 text-cream-900 ring-1 ring-cream-900":"border-cream-200 text-cream-600 hover:border-cream-400 hover:bg-cream-50"}`,children:[Et&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Za,{size:18,className:"text-cream-900"})}),Je.image&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:Je.image,alt:Je.label,className:"w-full h-32 object-cover rounded-lg border border-cream-200"})}),e.jsx("div",{className:"font-bold text-sm",children:Je.label}),ht()&&e.jsx("div",{className:"text-xs text-cream-600 mt-1",children:ht()})]},Je.value)})}),ve.inputStyle==="TEXT_FIELD"&&e.jsx("div",{"data-attribute":ke,children:e.jsx("input",{type:"text",value:ge[ke]||"",onChange:Je=>{R({...ge,[ke]:Je.target.value}),je(ht=>new Set(ht).add(ke))},placeholder:`Enter ${ve.attributeName}`,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})}),ve.inputStyle==="NUMBER"&&e.jsx("div",{"data-attribute":ke,children:e.jsx("input",{type:"number",value:ge[ke]||"",onChange:Je=>{R({...ge,[ke]:parseFloat(Je.target.value)||0}),je(ht=>new Set(ht).add(ke))},placeholder:`Enter ${ve.attributeName}`,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})}),ve.inputStyle==="FILE_UPLOAD"&&e.jsxs("div",{"data-attribute":ke,children:[e.jsx("input",{type:"file",onChange:Je=>{var Et;const ht=((Et=Je.target.files)==null?void 0:Et[0])||null;R({...ge,[ke]:ht}),ht&&je(He=>new Set(He).add(ke))},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",accept:"*/*"}),ve.fileRequirements&&e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:ve.fileRequirements})]})]},ke)})}):null})()]})})(),e.jsxs("div",{className:"mb-6 sm:mb-8 bg-cream-50 p-4 sm:p-6 rounded-xl border border-cream-200","data-upload-section":!0,children:[e.jsxs("h3",{className:"font-bold text-sm sm:text-base text-cream-900 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Jo,{size:16,className:"sm:w-[18px] sm:h-[18px]"})," Upload Your Design"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-cream-700 mb-2",children:"Upload Reference Image *"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:oe=>Xa(oe,"front"),className:"hidden","data-required-field":!0}),e.jsx("div",{className:"border-2 border-dashed border-cream-300 rounded-lg p-4 text-center hover:border-cream-900 transition-colors",children:rr?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:rr,alt:"Reference image preview",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:oe=>{oe.preventDefault(),$s(null),Tt("")},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(as,{size:14})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(qb,{size:24,className:"text-cream-600"}),e.jsx("span",{className:"text-sm text-cream-600",children:"Click to upload reference image"})]})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-cream-700 mb-2",children:"Back Design (Optional)"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:oe=>Xa(oe,"back"),className:"hidden"}),e.jsx("div",{className:"border-2 border-dashed border-cream-300 rounded-lg p-4 text-center hover:border-cream-900 transition-colors",children:ha?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ha,alt:"Back design preview",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:oe=>{oe.preventDefault(),pa(null),Vt("")},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(as,{size:14})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(qb,{size:24,className:"text-cream-600"}),e.jsx("span",{className:"text-sm text-cream-600",children:"Click to upload back design"})]})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-cream-700 mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:xa,onChange:oe=>Ns(oe.target.value),placeholder:"Any special instructions or notes...",className:"w-full p-3 rounded-lg border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm resize-none",rows:3})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-100",children:[e.jsx("button",{onClick:Kr,disabled:os,className:`w-full py-4 sm:py-5 md:py-6 rounded-xl font-bold text-lg sm:text-xl md:text-2xl transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 flex items-center justify-center gap-3 min-h-[60px] sm:min-h-[70px] ${os?"bg-cream-400 text-cream-700 cursor-not-allowed opacity-60":"bg-cream-900 text-cream-50 hover:bg-cream-800 active:bg-cream-700 cursor-pointer opacity-100"}`,children:os?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:24}),e.jsx("span",{children:"Processing Payment..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Za,{size:24}),e.jsx("span",{children:"Place Order"})]})}),e.jsxs("div",{className:"mt-4 text-center text-xs text-cream-500 flex items-center justify-center gap-2",children:[e.jsx(Ll,{size:14})," Secure Payment & Data Protection"]})]})]},f._id||f.id)}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 sm:mb-8 border-b border-cream-100 pb-4 sm:pb-6",children:[e.jsx("h1",{className:"font-serif text-xl sm:text-2xl md:text-3xl font-bold text-cream-900 mb-2",children:(v==null?void 0:v.name)||"Products"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600",children:D.length>0?"Select a subcategory to view products.":"Select a product to customize and place your order."})]}),D.length>0?e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:D.map(oe=>{const Fe=oe._id,we=oe.image||"/Glossy.png";return e.jsx(ys,{to:l&&d?`/digital-print/${l}/${d}/${Fe}`:l?`/digital-print/${l}/${Fe}`:`/digital-print/${Fe}`,className:"block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsx("div",{className:"w-full p-4 sm:p-5 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"shrink-0 w-20 sm:w-24 h-20 sm:h-24 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:we,alt:oe.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:oe.name}),e.jsx(Yr,{size:18,className:"text-cream-400 group-hover:text-cream-600 group-hover:translate-x-1 transition-all shrink-0"})]}),oe.description&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm mb-2 leading-relaxed",children:e.jsx("p",{className:"line-clamp-2",children:oe.description})}),e.jsx("div",{className:"mt-auto flex items-center text-cream-500 text-xs sm:text-sm font-medium",children:e.jsx("span",{children:"View Products"})})]})]})})},oe._id)})}):e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:p.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:"No products available"})}):p.map(oe=>{const Fe=oe.descriptionArray&&oe.descriptionArray.length>0?oe.descriptionArray:oe.description?oe.description.split(`
`).filter(Ue=>Ue.trim()):[],we=[];for(const Ue of Fe){const Me=Ue.replace(/<[^>]*>/g,"").trim();if(Me&&!Me.includes(":")&&Me.length>10&&(we.push(Me),we.length>=3))break}if(we.length===0&&Fe.length>0)for(let Ue=0;Ue<Math.min(3,Fe.length);Ue++){const Me=Fe[Ue].replace(/<[^>]*>/g,"").trim();Me&&we.push(Me)}const ye=we.slice(0,3).join("  ")||"",Le=oe.basePrice||0,rt=Le<1?(Le*1e3).toFixed(2):Le.toFixed(2),Te=Le<1?"per 1000 units":"";return e.jsxs("button",{"data-product-select":!0,onClick:()=>us(oe),className:"w-full p-3 sm:p-4 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 group",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:oe.name}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:["",rt]}),Te&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:Te})]})]}),ye&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm mb-2 leading-relaxed",children:e.jsx("p",{className:"line-clamp-3",children:ye})}),e.jsxs("div",{className:"mt-2 flex items-center text-cream-500 text-xs sm:text-sm font-medium",children:[e.jsx("span",{children:"View Details & Customize"}),e.jsx(Yr,{size:14,className:"ml-2 group-hover:translate-x-1 transition-transform"})]})]},oe._id||oe.id)})})]})})})]})})]}),e.jsx(ca,{children:Ks&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>!os&&es(!1),children:e.jsxs(st.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:oe=>oe.stopPropagation(),className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-4 sm:p-6 max-h-[90vh] overflow-y-auto","data-payment-modal":!0,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-cream-900 flex items-center gap-2",children:[e.jsx(Ll,{size:20,className:"sm:w-6 sm:h-6"}),e.jsx("span",{className:"text-base sm:text-xl",children:"Payment Confirmation"})]}),!os&&e.jsx("button",{onClick:()=>es(!1),className:"text-cream-600 hover:text-cream-900",children:e.jsx(as,{size:24})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-cream-700 font-medium",children:"Subtotal (Excluding GST):"}),e.jsxs("span",{className:"text-lg font-bold text-cream-900",children:["",va.toFixed(2)]})]}),Ps>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-cream-600",children:["GST (",(f==null?void 0:f.gstPercentage)||18,"%):"]}),e.jsxs("span",{className:"text-cream-700",children:["+",Ps.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-cream-300",children:[e.jsx("span",{className:"text-cream-700 font-medium",children:"Total Amount (Including GST):"}),e.jsxs("span",{className:"text-2xl font-bold text-cream-900",children:["",(va+Ps).toFixed(2)]})]})]})]}),e.jsx("p",{className:"text-xs text-cream-600 mt-2",children:"Your order will be placed and you can pay later."})]}),is&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4 flex items-start gap-2",children:[e.jsx(bs,{size:20,className:"text-red-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:is})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-cream-900 text-sm mb-3 flex items-center gap-2",children:[e.jsx(ho,{size:18}),"Delivery Information"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"customerName",id:"customerName",value:at,onChange:oe=>{_e(oe.target.value),is&&rs(null)},placeholder:"Enter your full name",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"customerEmail",id:"customerEmail",value:At,onChange:oe=>{Xt(oe.target.value),is&&rs(null)},placeholder:"Enter your email address",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:["Pincode ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"pincode",id:"pincode",value:Ft,onChange:oe=>{const Fe=oe.target.value.replace(/\D/g,"").slice(0,6);As(Fe),is&&rs(null)},placeholder:"Enter 6-digit pincode",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm",maxLength:6})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:["Complete Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{name:"address",id:"address",value:Vs,onChange:oe=>{$t(oe.target.value),is&&rs(null)},placeholder:"Enter your complete delivery address",rows:3,className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm resize-none"}),e.jsx("button",{type:"button",onClick:ta,disabled:Oa,className:"px-3 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",title:"Get location automatically",children:Oa?e.jsx(Qt,{className:"animate-spin",size:18}):e.jsx(Jn,{size:18})})]}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"You can enter address manually or use location button"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:["Mobile Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"mobileNumber",id:"mobileNumber",value:Bs,onChange:oe=>{const Fe=oe.target.value.replace(/\D/g,"").slice(0,10);vs(Fe),is&&rs(null)},placeholder:"Enter 10-digit mobile number",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none text-sm",maxLength:10})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-cream-700",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Order Summary:"}),e.jsxs("div",{className:"space-y-1 ml-4",children:[e.jsxs("p",{children:[" Product: ",e.jsx("strong",{children:f==null?void 0:f.name})]}),e.jsxs("p",{children:[" Quantity: ",e.jsx("strong",{children:ie.toLocaleString()})]}),e.jsxs("p",{children:[" Printing Option: ",e.jsx("strong",{children:K})]}),e.jsxs("p",{children:[" Delivery Speed: ",e.jsx("strong",{children:de})]}),A&&e.jsxs("p",{children:[" Texture Type: ",e.jsx("strong",{children:A})]})]})]}),et&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsxs("h3",{className:"font-bold text-sm text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(ho,{size:16})," Estimated Delivery"]}),e.jsxs("div",{className:"text-green-700 text-sm",children:[e.jsxs("div",{className:"font-semibold mb-1",children:["Estimated Delivery by ",e.jsx("strong",{children:et})]}),se&&e.jsx("div",{className:"text-xs text-green-600 mt-1",children:se})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[!os&&e.jsx("button",{onClick:()=>es(!1),className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ql,disabled:os,className:"flex-1 px-4 py-3 bg-cream-900 text-cream-50 rounded-lg font-semibold hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:os?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:18}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Za,{size:18}),"Confirm Order ",(va+Ps).toFixed(2)]})})]})]})})}),e.jsx(ca,{children:Pt&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",onClick:()=>Mt(!1),children:e.jsxs(st.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center p-4",onClick:oe=>oe.stopPropagation(),children:[e.jsx("div",{style:{maxWidth:"90%",maxHeight:"90%",width:"auto",height:"auto",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("img",{src:(v==null?void 0:v.image)||"/Glossy.png",alt:(v==null?void 0:v.name)||"Product Preview",className:"w-full h-full object-contain",style:{maxWidth:"100%",maxHeight:"90vh",width:"auto",height:"auto"}})}),e.jsx("button",{onClick:()=>Mt(!1),className:"absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white rounded-full p-2 backdrop-blur-sm transition-colors z-50","aria-label":"Close image",children:e.jsx(as,{size:24})})]})})}),e.jsx(ca,{children:mr&&qs&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>gr(!1),children:e.jsxs(st.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:oe=>oe.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-4 border-b border-cream-200 bg-linear-to-r from-cream-50 to-cream-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Select ",qs.attributeName]}),qs.isRequired&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Required field"})]}),e.jsx("button",{onClick:()=>gr(!1),className:"p-2 hover:bg-cream-200 rounded-full transition-colors","aria-label":"Close modal",children:e.jsx(as,{size:20,className:"text-cream-700"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 justify-items-center",children:qs.attributeValues.map(oe=>{const Fe=()=>{if(oe.description){const Ue=oe.description.match(/Price Impact: ([\d.]+)/);if(Ue){const Me=parseFloat(Ue[1])||0;if(Me>0)return`+${Me.toFixed(2)}/unit`}}if(!oe.priceMultiplier||oe.priceMultiplier===1||!f)return null;const Te=(f.basePrice||0)*(oe.priceMultiplier-1);return Math.abs(Te)<.01?null:`+${Te.toFixed(2)}/unit`},we=qs.selectedValue===oe.value,ye=`${qs.attributeId}:${oe.value}`,Le=U[ye]||[];return e.jsxs(st.button,{type:"button",onClick:()=>{const rt={...ge,[qs.attributeId]:oe.value};if(R(rt),je(Te=>new Set(Te).add(qs.attributeId)),Le.length>0){const Te=`${qs.attributeId}__${oe.value}`,Ue=rt[Te]||null;hs({attributeId:qs.attributeId,parentValue:oe.value,parentLabel:oe.label,subAttributes:Le,selectedValue:Ue}),zs(!0)}gr(!1)},whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative p-2 rounded-lg border-2 text-left transition-all duration-200 flex flex-col w-[140px] h-[140px] overflow-hidden ${we?"border-cream-900 bg-cream-50 text-cream-900 ring-2 ring-cream-900 ring-offset-1":"border-cream-200 text-cream-700 hover:border-cream-400 hover:bg-cream-50 hover:shadow-md"}`,children:[we&&e.jsx(st.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-1.5 right-1.5 bg-cream-900 text-white rounded-full p-1 shadow-lg z-10",children:e.jsx(Za,{size:12})}),oe.image&&e.jsx("div",{className:"mb-1.5 overflow-hidden rounded border border-cream-200 bg-cream-50 shrink-0",children:e.jsx("img",{src:oe.image,alt:oe.label,className:"w-full h-[70px] object-cover transition-transform duration-200 hover:scale-105"})}),e.jsxs("div",{className:"space-y-1 flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"font-semibold text-xs text-cream-900 leading-tight line-clamp-2",children:oe.label}),oe.description&&e.jsx("p",{className:"text-[10px] text-cream-600 line-clamp-2 leading-tight",children:oe.description}),Fe()&&e.jsx("div",{className:"mt-auto pt-1 border-t border-cream-200 text-[10px] font-semibold text-cream-700 leading-tight",children:Fe()})]})]},oe.value)})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-cream-200 bg-cream-50 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-cream-600",children:qs.selectedValue?e.jsxs("span",{children:["Selected: ",e.jsx("span",{className:"font-semibold text-cream-900",children:(fi=qs.attributeValues.find(oe=>oe.value===qs.selectedValue))==null?void 0:fi.label})]}):e.jsx("span",{children:"Please select an option"})}),e.jsx("button",{onClick:()=>gr(!1),className:"px-6 py-2 bg-cream-900 text-white rounded-lg font-semibold hover:bg-cream-800 transition-colors",children:qs.selectedValue?"Done":"Cancel"})]})]})})}),e.jsx(ca,{children:Jr&&Yt&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>zs(!1),children:e.jsxs(st.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-hidden flex flex-col",onClick:oe=>oe.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-4 border-b border-cream-200 bg-linear-to-r from-cream-50 to-cream-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-cream-900",children:["Select ",Yt.parentLabel," Option"]}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:["Additional options related to ",Yt.parentLabel]})]}),e.jsx("button",{onClick:()=>zs(!1),className:"p-2 hover:bg-cream-200 rounded-full transition-colors","aria-label":"Close sub-attribute modal",children:e.jsx(as,{size:18,className:"text-cream-700"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 justify-items-center",children:Yt.subAttributes.map(oe=>{const Fe=()=>!oe.priceAdd||oe.priceAdd===0?null:`+${oe.priceAdd.toFixed(2)}/piece`,we=`${Yt.attributeId}__${Yt.parentValue}`,ye=ge[we]===oe.value;return e.jsxs(st.button,{type:"button",onClick:()=>{R(Le=>({...Le,[we]:oe.value})),hs({...Yt,selectedValue:oe.value})},whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative p-2 rounded-lg border-2 text-left transition-all duration-200 flex flex-col w-[140px] h-[140px] overflow-hidden ${ye?"border-cream-900 bg-cream-50 text-cream-900 ring-2 ring-cream-900 ring-offset-1":"border-cream-200 text-cream-700 hover:border-cream-400 hover:bg-cream-50 hover:shadow-md"}`,children:[ye&&e.jsx(st.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-1.5 right-1.5 bg-cream-900 text-white rounded-full p-1 shadow-lg z-10",children:e.jsx(Za,{size:12})}),oe.image&&e.jsx("div",{className:"mb-1.5 overflow-hidden rounded border border-cream-200 bg-cream-50 shrink-0",children:e.jsx("img",{src:oe.image,alt:oe.label,className:"w-full h-[70px] object-cover transition-transform duration-200 hover:scale-105"})}),e.jsxs("div",{className:"space-y-1 flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"font-semibold text-xs text-cream-900 leading-tight line-clamp-2",children:oe.label}),Fe()&&e.jsx("div",{className:"mt-auto pt-1 border-t border-cream-200 text-[10px] font-semibold text-cream-700 leading-tight",children:Fe()})]})]},oe._id)})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-cream-200 bg-cream-50 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-cream-600",children:Yt.selectedValue?e.jsxs("span",{children:["Selected:"," ",e.jsx("span",{className:"font-semibold text-cream-900",children:(pi=Yt.subAttributes.find(oe=>oe.value===Yt.selectedValue))==null?void 0:pi.label})]}):e.jsx("span",{children:"Sub-option is optional"})}),e.jsx("button",{onClick:()=>zs(!1),className:"px-6 py-2 bg-cream-900 text-white rounded-lg font-semibold hover:bg-cream-800 transition-colors",children:"Done"})]})]})})})]})},Gp=()=>{const{categoryId:s,subCategoryId:r,nestedSubCategoryId:n}=Dh(),l=ar(),[d,m]=y.useState(""),[u,p]=y.useState(""),[b,f]=y.useState(""),[j,v]=y.useState([]),[w,D]=y.useState([]),[P,T]=y.useState(null),[$,L]=y.useState(!0),[M,B]=y.useState(null),[ce,U]=y.useState(!1),[O,k]=y.useState(""),[W,Q]=y.useState(null),[ne,le]=y.useState(null);y.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s,r]);const me=async J=>{const K=await J.clone().text();if(K.trim().startsWith("<!DOCTYPE")||K.trim().startsWith("<html"))throw new Error(`Server returned HTML instead of JSON. Status: ${J.status} ${J.statusText}`);try{const q=JSON.parse(K);if(!J.ok)throw new Error(q.error||q.message||`Request failed: ${J.status} ${J.statusText}`);return q}catch(q){throw q instanceof Error?q:new Error(K||`Invalid response from server. Status: ${J.status} ${J.statusText}`)}};y.useEffect(()=>{(async()=>{var I,K,q,de,Ce,A,G,ie,Re,ge;L(!0),B(null),v([]),D([]),U(!1),le(null);try{if(s&&!r){if(!/^[0-9a-fA-F]{24}$/.test(s)){B("Invalid category ID format"),L(!1);return}let R=[];const re=`${Ae}/subcategories/category/${s}`;try{const je=await fetch(re,{method:"GET",headers:{Accept:"application/json"}});if(je.ok){const Ie=await me(je);if(R=Array.isArray(Ie)?Ie:(Ie==null?void 0:Ie.data)||[],R&&R.length>0){if(R.sort((Be,et)=>(Be.sortOrder||0)-(et.sortOrder||0)),R.length===1){const Be=R[0],et=Be.slug||Be._id;l(s?`/digital-print/${s}/${et}`:`/digital-print/${et}`,{replace:!0}),L(!1);return}v(R);try{const Be=await fetch(`${Ae}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(!Be.ok)throw new Error(`Failed to fetch category: ${Be.status} ${Be.statusText}`);const et=await me(Be);m(et.name||""),p(et.description||""),f(et.image||"/Glossy.png")}catch(Be){console.error("Error fetching category info:",Be)}}}else if(je.status===404)console.log("No subcategories found for this category, checking for direct products...");else{const Ie=await fetch(`${Ae}/categories/parent/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(Ie.ok){const Be=await me(Ie);if(Be&&Array.isArray(Be)&&Be.length>0){if(R=Be,R.sort((et,fe)=>(et.sortOrder||0)-(fe.sortOrder||0)),R.length===1){const et=R[0],fe=et.slug||et._id;if(r!==fe){console.log(`Only one subcategory found: ${et.name} (${fe}). Auto-navigating...`),l(`/digital-print/${s}/${fe}`,{replace:!0});return}}v(R),L(!1);return}}console.log("No subcategories found, will check for direct products...")}}catch(je){console.error("Error fetching subcategories:",je)}try{if(!s||!/^[0-9a-fA-F]{24}$/.test(s)){console.warn("Invalid categoryId format, skipping product fetch:",s),L(!1);return}const je=`${Ae}/products/category/${s}`,Ie=await fetch(je,{method:"GET",headers:{Accept:"application/json"}});if(!Ie.ok){if(Ie.status===400||Ie.status===404){let se=Ie.status===404?"Category not found":"Invalid category ID or category not found";try{const be=await Ie.clone().text();if(be&&!be.trim().startsWith("<!DOCTYPE")&&!be.trim().startsWith("<html"))try{const We=JSON.parse(be);se=We.error||We.message||se}catch{be.trim().length>0&&be.trim().length<200&&(se=be.trim())}}catch(te){console.error("Error reading response:",te)}console.warn("Failed to fetch products for category:",s,se),D([]),L(!1);return}console.error("Error fetching products:",Ie.status,Ie.statusText),D([]),L(!1);return}const Be=await me(Ie),et=Array.isArray(Be)?Be.filter(se=>{var We;const te=typeof se.category=="object"?(We=se.category)!=null&&We._id?String(se.category._id):null:se.category?String(se.category):null,be=String(s);if(!te||te!==be)return!1;if(!se.subcategory||se.subcategory===null||se.subcategory===void 0)return!0;if(typeof se.subcategory=="string"){const at=se.subcategory.trim();return at===""||at==="null"||at==="undefined"}if(typeof se.subcategory=="object"){if(Object.keys(se.subcategory).length===0)return!0;const _e=se.subcategory._id;return!_e||_e===null||_e===""||_e==="null"||_e===void 0||typeof _e=="string"&&!/^[0-9a-fA-F]{24}$/.test(_e)}return!1}):[];console.log("Category ID:",s),console.log("Total products fetched:",Array.isArray(Be)?Be.length:0),console.log("Direct products after filtering:",et.length),et.length===0&&Array.isArray(Be)&&Be.length>0&&(console.log("Sample product category:",(I=Be[0])==null?void 0:I.category),console.log("Sample product subcategory:",(K=Be[0])==null?void 0:K.subcategory),console.log("Sample product category ID (string):",typeof((q=Be[0])==null?void 0:q.category)=="object"?String((Ce=(de=Be[0])==null?void 0:de.category)==null?void 0:Ce._id):String((A=Be[0])==null?void 0:A.category)));const fe=R&&R.length>0;if(fe&&R.length===1){const te=R[0]._id;s?l(`/digital-print/${s}/${te}`,{replace:!0}):l(`/digital-print/${te}`,{replace:!0}),L(!1);return}if(fe?(R.sort((se,te)=>(se.sortOrder||0)-(te.sortOrder||0)),v(R)):v([]),et&&et.length>0&&!fe){if(et.length===1){const se=et[0];s?l(`/digital-print/${s}/${se._id}`,{replace:!0}):l(`/digital-print/${se._id}`,{replace:!0}),L(!1);return}D(et);try{const se=await fetch(`${Ae}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(!se.ok)throw new Error(`Failed to fetch category: ${se.status} ${se.statusText}`);const te=await me(se);m(te.name||""),p(te.description||""),f(te.image||"/Glossy.png")}catch(se){console.error("Error fetching category info:",se)}L(!1);return}}catch(je){console.error("Error fetching products:",je);const Ie=je instanceof Error?je.message:"Failed to fetch products";!Ie.includes("Invalid category")&&!Ie.includes("400")&&!Ie.includes("Bad Request")?B(Ie):console.warn("Category may not have products or category ID is invalid:",s),D([])}try{if(s&&/^[0-9a-fA-F]{24}$/.test(s)){const je=await fetch(`${Ae}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(je.ok){const Ie=await me(je);m(Ie.name||""),p(Ie.description||"")}}}catch(je){console.error("Error fetching category info:",je)}L(!1);return}if(r){D([]),v([]);try{let R=null,re=n||r;if(/^[0-9a-fA-F]{24}$/.test(re||"")){let te=[];if(s)try{const be=`${Ae}/subcategories/category/${s}`,We=await fetch(be,{method:"GET",headers:{Accept:"application/json"}});if(We.ok){const at=await me(We);te=Array.isArray(at)?at:(at==null?void 0:at.data)||[],R=te.find(_e=>_e._id===re||_e.slug===re)||null}}catch{}if(!R&&re&&/^[0-9a-fA-F]{24}$/.test(re)){const be=te.find(We=>We._id===re);if(be)R=be;else{let We=!1;try{if((await fetch(`${Ae}/products/${re}`,{method:"GET",headers:{Accept:"application/json"}})).ok){We=!0,U(!0),le(re),L(!1);return}}catch{console.log("subCategoryId is not a product, continuing...")}if(!We)try{const at=await fetch(`${Ae}/subcategories/${re}`,{method:"GET",headers:{Accept:"application/json"}});if(at.ok)try{R=await me(at)}catch{}else at.status}catch{}}}}else{let te=[];if(s)try{const be=`${Ae}/subcategories/category/${s}`,We=await fetch(be,{method:"GET",headers:{Accept:"application/json"}});if(We.ok){const at=await me(We);te=Array.isArray(at)?at:(at==null?void 0:at.data)||[];const _e=async At=>{try{const Xt=await fetch(`${Ae}/subcategories/parent/${At}`,{method:"GET",headers:{Accept:"application/json"}});if(Xt.ok){const Ft=await me(Xt),As=Array.isArray(Ft)?Ft:(Ft==null?void 0:Ft.data)||[],Vs=[...As];for(const $t of As){const Bs=await _e($t._id);Vs.push(...Bs)}return Vs}}catch(Xt){console.error(`Error fetching nested subcategories for ${At}:`,Xt)}return[]};for(const At of te){const Xt=await _e(At._id);te.push(...Xt)}}}catch(be){console.error("Error fetching subcategories:",be)}if(te.length===0)try{const be=await fetch(`${Ae}/subcategories`,{method:"GET",headers:{Accept:"application/json"}});if(be.ok){const We=await me(be);te=Array.isArray(We)?We:(We==null?void 0:We.data)||[]}}catch(be){console.error("Error fetching all subcategories:",be)}if(R=te.find(be=>be.slug===re||be._id===re),R&&R._id)re=R._id,console.log("Found subcategory by slug, using _id:",re);else try{const be=await fetch(`${Ae}/subcategories/${re}`,{method:"GET",headers:{Accept:"application/json"}});be.ok?(R=await me(be),R&&R._id?(re=R._id,console.log("Found subcategory via API lookup, using _id:",re)):(R=null,re=null)):(console.warn(`Subcategory not found with slug/id: ${re}, continuing without subcategory`),R=null,re=null)}catch{console.warn(`Error fetching subcategory with slug/id: ${re}, continuing without subcategory`),R=null,re=null}}if(R){const te=((G=R.name)==null?void 0:G.toLowerCase())||"",be=((ie=R.slug)==null?void 0:ie.toLowerCase())||"";if(te.includes("gloss")||be.includes("gloss")||re!=null&&re.toLowerCase().includes("gloss")){U(!0),T(R),L(!1);return}T(R);try{const We=await fetch(`${Ae}/subcategories/parent/${R._id}`,{method:"GET",headers:{Accept:"application/json"}});if(We.ok){const at=await me(We),_e=Array.isArray(at)?at:(at==null?void 0:at.data)||[];if(_e.length>0){if(_e.length===1){const At=_e[0],Xt=At.slug||At._id;if(n!==Xt&&r!==Xt){console.log(`Only one nested subcategory found: ${At.name} (${Xt}). Auto-navigating...`);const Ft=s&&r?`/digital-print/${s}/${r}/${Xt}`:`/digital-print/${s}/${Xt}`;l(Ft,{replace:!0});return}}v(_e),console.log(`Found ${_e.length} nested subcategories`)}}}catch(We){console.error("Error fetching child subcategories:",We)}}const Ie=Ae.replace(/\/+$/,"");let Be,et;if(!R||R===null)if(s&&/^[0-9a-fA-F]{24}$/.test(s))Be=`${Ie}/products/category/${s}`,et=await fetch(Be,{method:"GET",headers:{Accept:"application/json"}});else throw new Error("Valid Category ID is required to fetch products when subcategory is null");else if(re&&/^[0-9a-fA-F]{24}$/.test(re))Be=`${Ie}/products/subcategory/${re}`,et=await fetch(Be,{method:"GET",headers:{Accept:"application/json"}});else if(s&&/^[0-9a-fA-F]{24}$/.test(s))Be=`${Ie}/products/category/${s}`,et=await fetch(Be,{method:"GET",headers:{Accept:"application/json"}});else throw new Error("Valid Subcategory ID or Category ID is required to fetch products");if(!et.ok&&et.status===400){const te=await et.text();let be="Invalid subcategory or category ID";try{const We=JSON.parse(te);be=We.error||We.message||be}catch{}throw new Error(be)}let fe;if(et.ok)fe=await me(et);else if(et.status===404)fe=[];else try{const te=await me(et);throw new Error(te.error||te.message||`Failed to fetch products: ${et.status} ${et.statusText}`)}catch(te){throw te instanceof Error&&te.message.includes("body stream")?new Error(`Failed to fetch products: ${et.status} ${et.statusText}`):te}console.log("=== PRODUCTS FETCHED (VisitingCards) ==="),console.log("Total products:",Array.isArray(fe)?fe.length:0),console.log("Full products data:",JSON.stringify(fe,null,2)),Array.isArray(fe)||(fe=[]);let se=[];if(R&&re)try{se=await(async be=>{try{const We=await fetch(`${Ae}/subcategories/parent/${be}?includeChildren=true`,{method:"GET",headers:{Accept:"application/json"}});if(We.ok){const at=await me(We),_e=Array.isArray(at)?at:(at==null?void 0:at.data)||[];_e.sort((Xt,Ft)=>(Xt.sortOrder||0)-(Ft.sortOrder||0));const At=Xt=>{let Ft=[];return Xt.forEach(As=>{Ft.push(As),As.children&&As.children.length>0&&(Ft=Ft.concat(At(As.children)))}),Ft};return At(_e)}}catch(We){console.error(`Error fetching nested subcategories for ${be}:`,We)}return[]})(re)}catch(te){console.error("Error fetching nested subcategories:",te)}if(R){if(T(R),m(((Re=R.category)==null?void 0:Re.name)||R.name||""),p(((ge=R.category)==null?void 0:ge.description)||R.description||""),se.length>0){if(se.length===1){const be=se[0]._id;s?l(`/digital-print/${s}/${re}/${be}`,{replace:!0}):l(`/digital-print/${re}/${be}`,{replace:!0}),L(!1);return}v(se),D([]),L(!1);return}}else if(s&&/^[0-9a-fA-F]{24}$/.test(s))try{const te=await fetch(`${Ae}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(te.ok){const be=await me(te);m(be.name||""),p(be.description||""),f(be.image||"/Glossy.png"),Array.isArray(fe)&&fe.length>0&&T({_id:r||s,name:be.name||"Products",description:be.description||"",image:be.image||"/Glossy.png",category:be,slug:r||s})}}catch(te){console.error("Error fetching category info:",te),Array.isArray(fe)&&fe.length>0&&T({_id:r||s||"",name:"Products",description:"",image:"/Glossy.png",slug:r||s||""})}if(Array.isArray(fe)&&fe.length===1){const te=fe[0],be=typeof te.subcategory=="object"?te.subcategory:null,We=(be==null?void 0:be._id)||(R?R._id:null),at=We&&We!==s&&We!==te._id&&R!==null;s&&at?l(`/digital-print/${s}/${We}/${te._id}`,{replace:!0}):s?l(`/digital-print/${s}/${te._id}`,{replace:!0}):l(`/digital-print/${te._id}`,{replace:!0}),L(!1);return}console.log("Final products data to set:",fe),console.log("Products array length:",Array.isArray(fe)?fe.length:0),D(Array.isArray(fe)?fe:[]),Array.isArray(fe)&&fe.length>0&&!R&&s&&console.log("Products found but subcategory data missing - will display products anyway"),L(!1);return}catch(R){console.error("Error fetching products:",R),B(R instanceof Error?R.message:"Failed to fetch products"),L(!1);return}}else{let R=`${Ae}/subcategories`;s&&(R=`${Ae}/subcategories/category/${s}`);const re=await fetch(R,{method:"GET",headers:{Accept:"application/json"}});if(!re.ok)throw new Error(`Failed to fetch subcategories: ${re.status} ${re.statusText}`);const je=await me(re),Ie=Array.isArray(je)?je:(je==null?void 0:je.data)||[];if(Ie.length>0){if(Ie.sort((Be,et)=>(Be.sortOrder||0)-(et.sortOrder||0)),v(Ie),D([]),Ie[0].category){const Be=typeof Ie[0].category=="object"?Ie[0].category:null;Be&&(m(Be.name||""),p(Be.description||""),f(Be.image||"/Glossy.png"))}}else if(v([]),s&&/^[0-9a-fA-F]{24}$/.test(s))try{const Be=`${Ae}/products/category/${s}`,et=await fetch(Be,{method:"GET",headers:{Accept:"application/json"}});if(et.ok){const fe=await me(et),se=Array.isArray(fe)?fe:[];if(se.length>0){D(se);try{const te=await fetch(`${Ae}/categories/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(te.ok){const be=await me(te);m(be.name||""),p(be.description||""),f(be.image||"/Glossy.png")}}catch(te){console.error("Error fetching category info:",te)}}else D([])}else D([])}catch(Be){console.error("Error fetching products for category:",Be),D([])}else D([])}}catch(R){console.error("Error fetching data:",R),B(R instanceof Error?R.message:"Failed to load data")}finally{L(!1)}})()},[s,r,n]);const Ve={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},F={hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,ease:"easeOut"}}};return ce&&s?e.jsx(xd,{forcedProductId:ne||void 0}):e.jsxs("div",{className:"min-h-screen bg-cream-50 py-4 sm:py-8",children:[!r&&e.jsx("div",{className:"bg-white border-b border-cream-200 pb-6 sm:pb-10 pt-6 sm:pt-8 mb-6 sm:mb-8 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"flex flex-col gap-2 text-center md:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-xs sm:text-sm font-medium text-cream-500 uppercase tracking-widest",children:[e.jsx(ys,{to:"/digital-print",className:"hover:text-cream-900 transition-colors",children:"Services"}),e.jsx(Yr,{size:12,className:"sm:w-3.5 sm:h-3.5"}),e.jsx("span",{className:"text-cream-900",children:d})]}),e.jsx("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-cream-900",children:d}),u&&e.jsx("p",{className:"text-sm sm:text-base text-cream-600 mt-2 max-w-xl mx-auto md:mx-0",children:"Choose the perfect paper type and finish for your brand identity."})]})})}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 pb-12 sm:pb-16",children:[$?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(Qt,{className:"animate-spin text-cream-900",size:48})}):M?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-800",children:M})}):j.length>0&&!r||w.length>0&&j.length===0&&!r?e.jsxs(e.Fragment,{children:[j.length>0&&e.jsx("div",{className:"mb-6 bg-white rounded-xl shadow-md border border-cream-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-4",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial sm:w-64",children:[e.jsx(di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search subcategories...",value:O,onChange:J=>k(J.target.value),className:"w-full pl-10 pr-10 py-2.5 border-2 border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 text-sm sm:text-base bg-white shadow-sm transition-all"}),O&&e.jsx("button",{onClick:()=>k(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cream-500 hover:text-cream-700 transition-colors",children:e.jsx(as,{size:18})})]}),e.jsxs("div",{className:"flex-1 sm:flex-initial sm:w-64",children:[e.jsx("label",{className:"block text-sm font-semibold text-cream-900 mb-2",children:"Filter Subcategory"}),e.jsx(Ca,{label:"All Subcategories",value:W,onChange:J=>Q(J),options:[{value:null,label:"All Subcategories"},...j.filter(J=>!(O&&!J.name.toLowerCase().includes(O.toLowerCase()))).map(J=>({value:J._id,label:J.name}))],className:"w-full"})]}),(O||W)&&e.jsxs("button",{onClick:()=>{k(""),Q(null)},className:"flex items-center gap-2 px-4 py-2.5 text-sm text-cream-700 hover:text-cream-900 bg-cream-100 hover:bg-cream-200 rounded-lg transition-colors whitespace-nowrap",children:[e.jsx(as,{size:16}),"Clear Filters"]})]})}),e.jsx(st.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-5",variants:Ve,initial:"hidden",animate:"visible",children:j.filter(J=>!(O&&!J.name.toLowerCase().includes(O.toLowerCase())||W&&J._id!==W)).map((J,I)=>{const K=J._id,q=J.image||"/Glossy.png";return e.jsx(st.div,{variants:F,children:e.jsx(ys,{to:s?`/digital-print/${s}/${K}`:`/digital-print/${K}`,className:"group block h-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 border border-cream-100 h-full flex flex-col hover:-translate-y-2",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-cream-100 flex items-center justify-center rounded-2xl sm:rounded-3xl m-3 sm:m-4 mx-2 sm:mx-3",children:[e.jsx("img",{src:q,alt:J.name,className:"object-contain h-full w-full transition-transform duration-700 group-hover:scale-110 rounded-2xl sm:rounded-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-cream-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 backdrop-blur-[2px]",children:e.jsx("span",{className:"bg-white text-cream-900 px-6 py-3 rounded-full font-bold text-sm transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 shadow-lg",children:"Customize Now"})})]}),e.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-serif text-lg sm:text-xl md:text-2xl font-bold text-cream-900 mb-2 group-hover:text-cream-600 transition-colors",children:J.name}),e.jsx("p",{className:"text-cream-600 text-sm sm:text-base mb-4 flex-grow leading-relaxed",children:J.description||""}),e.jsxs("div",{className:"pt-3 border-t border-cream-100 flex items-center justify-between mt-auto",children:[e.jsx("span",{className:"text-xs sm:text-sm text-cream-500",children:"View Details"}),e.jsx(Yr,{size:18,className:"text-cream-900 group-hover:text-cream-600 group-hover:translate-x-1 transition-all duration-300"})]})]})]})})},J._id)})}),w.length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Direct Products"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(st.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[400px] sm:min-h-[500px] md:min-h-[600px] bg-cream-100/50",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:b||"/Glossy.png",alt:d||"Category Preview",className:"w-full h-full object-contain cursor-pointer hover:opacity-90 transition-opacity rounded-lg",style:{maxWidth:"100%",maxHeight:"100%"}})})})})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx(st.div,{className:"space-y-3 sm:space-y-4 w-full",variants:Ve,initial:"hidden",animate:"visible",children:w.map(J=>{const I=typeof J.subcategory=="object"?J.subcategory:null,K=I==null?void 0:I._id,q=n&&r,de=q?n:null,Ce=q?r:null,A=K&&K!==s&&K!==J._id,G=q&&K&&(K===n||K===de),ie=J.basePrice||0,Re=ie<1?(ie*1e3).toFixed(2):ie.toFixed(2),ge=ie<1?"per 1000 units":"",je=(J.description?J.description.replace(/<[^>]*>/g,"").trim():"").split(`
`).filter(Be=>Be.trim()).slice(0,3).join(" ").trim(),Ie=je.length>200?je.substring(0,200)+"...":je||"";return e.jsx(st.div,{variants:F,children:e.jsx(ys,{to:s&&G&&Ce&&de?`/digital-print/${s}/${Ce}/${de}/${J._id}`:s&&A?`/digital-print/${s}/${K}/${J._id}`:s?`/digital-print/${s}/${J._id}`:`/digital-print/${J._id}`,className:"group block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"w-full p-4 sm:p-6 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 min-h-[140px] sm:min-h-[160px] flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32 h-24 sm:h-32 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:J.image||"/Glossy.png",alt:J.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:J.name}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:["",Re]}),ge&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:ge})]}),e.jsx("span",{className:"text-cream-900 group-hover:text-cream-600 text-xl font-bold transition-colors",children:""})]})]}),Ie&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm leading-relaxed flex-grow",children:e.jsx("p",{className:"line-clamp-2",children:Ie})})]})]})})},J._id)})})})]})]})]}):r?e.jsxs("div",{children:[r&&e.jsx("div",{className:"mb-4",children:e.jsx(kr,{onClick:()=>{l(n&&r&&s?`/digital-print/${s}/${r}`:s?`/digital-print/${s}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:n&&r&&s?`/digital-print/${s}/${r}`:s?`/digital-print/${s}`:"/digital-print",label:n?"Back to Subcategory":d?`Back to ${d}`:"Back to Category",className:"inline-flex items-center gap-2 text-sm text-cream-600 hover:text-cream-900"})}),j.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Nested Subcategories"}),e.jsx(st.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-5 mb-12",variants:Ve,initial:"hidden",animate:"visible",children:j.map(J=>{const I=J._id,K=J.image||"/Glossy.png",q=P?P._id:r;return e.jsx(st.div,{variants:F,children:e.jsx(ys,{to:s&&q?`/digital-print/${s}/${q}/${I}`:s?`/digital-print/${s}/${I}`:`/digital-print/${I}`,className:"group block h-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 border border-cream-100 h-full flex flex-col hover:-translate-y-2",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-cream-100 flex items-center justify-center rounded-2xl sm:rounded-3xl m-3 sm:m-4 mx-2 sm:mx-3",children:[e.jsx("img",{src:K,alt:J.name,className:"object-contain h-full w-full transition-transform duration-700 group-hover:scale-110 rounded-2xl sm:rounded-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-cream-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 backdrop-blur-[2px]",children:e.jsx("span",{className:"bg-white text-cream-900 px-6 py-3 rounded-full font-bold text-sm transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 shadow-lg",children:"Customize Now"})})]}),e.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-serif text-lg sm:text-xl md:text-2xl font-bold text-cream-900 mb-2 group-hover:text-cream-600 transition-colors",children:J.name}),e.jsx("p",{className:"text-cream-600 text-sm sm:text-base mb-4 flex-grow leading-relaxed",children:J.description||""}),e.jsxs("div",{className:"pt-3 border-t border-cream-100 flex items-center justify-between mt-auto",children:[e.jsx("span",{className:"text-xs sm:text-sm text-cream-500",children:"View Details"}),e.jsx(Yr,{size:18,className:"text-cream-900 group-hover:text-cream-600 group-hover:translate-x-1 transition-all duration-300"})]})]})]})})},J._id)})})]}),w.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Select Product"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(st.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[400px] sm:min-h-[500px] md:min-h-[600px] bg-cream-100/50",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:b||(P==null?void 0:P.image)||"/Glossy.png",alt:d||(P==null?void 0:P.name)||"Category Preview",className:"w-full h-full object-contain cursor-pointer hover:opacity-90 transition-opacity rounded-lg",style:{maxWidth:"100%",maxHeight:"100%"}})})})})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx(st.div,{className:"space-y-3 sm:space-y-4 w-full",variants:Ve,initial:"hidden",animate:"visible",children:w.map(J=>{const I=typeof J.subcategory=="object"?J.subcategory:null,K=(I==null?void 0:I.slug)||(I==null?void 0:I._id),q=K&&K!==s&&K!==J._id,de=J.basePrice||0,Ce=de<1?(de*1e3).toFixed(2):de.toFixed(2),A=de<1?"per 1000 units":"",Re=(J.description?J.description.replace(/<[^>]*>/g,"").trim():"").split(`
`).filter(R=>R.trim()).slice(0,3).join(" ").trim(),ge=Re.length>200?Re.substring(0,200)+"...":Re||"";return e.jsx(st.div,{variants:F,children:e.jsx(ys,{to:s&&q?`/digital-print/${s}/${K}/${J._id}`:s?`/digital-print/${s}/${J._id}`:`/digital-print/${J._id}`,className:"group block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"w-full p-4 sm:p-6 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 min-h-[140px] sm:min-h-[160px] flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32 h-24 sm:h-32 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:J.image||"/Glossy.png",alt:J.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:J.name}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:["",Ce]}),A&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:A})]}),e.jsx("span",{className:"text-cream-900 group-hover:text-cream-600 text-xl font-bold transition-colors",children:""})]})]}),ge&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm leading-relaxed flex-grow",children:e.jsx("p",{className:"line-clamp-2",children:ge})})]})]})})},J._id)})})})]})]}):j.length===0?e.jsxs("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-cream-700",children:"No products found for this subcategory."}),s&&e.jsx(kr,{onClick:()=>{l(s?`/digital-print/${s}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:s?`/digital-print/${s}`:"/digital-print",label:d?`Back to ${d}`:"Back to Category",className:"text-cream-900 hover:text-cream-600 underline mt-2 inline-block"})]}):null]}):s&&w.length>0?e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900 mb-6",children:"Select Product"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-12 min-h-[600px]",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(st.div,{className:"bg-white p-4 sm:p-6 md:p-8 lg:p-12 rounded-2xl sm:rounded-3xl shadow-sm border border-cream-100 flex items-center justify-center min-h-[400px] sm:min-h-[500px] md:min-h-[600px] bg-cream-100/50",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:b||"/Glossy.png",alt:d||"Category Preview",className:"w-full h-full object-contain cursor-pointer hover:opacity-90 transition-opacity rounded-lg",style:{maxWidth:"100%",maxHeight:"100%"}})})})})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsx(st.div,{className:"space-y-3 sm:space-y-4 w-full",variants:Ve,initial:"hidden",animate:"visible",children:w.map(J=>{const I=typeof J.subcategory=="object"?J.subcategory:null,K=(I==null?void 0:I.slug)||(I==null?void 0:I._id),q=K&&K!==s&&K!==J._id,de=J.basePrice||0,Ce=de<1?(de*1e3).toFixed(2):de.toFixed(2),A=de<1?"per 1000 units":"",Re=(J.description?J.description.replace(/<[^>]*>/g,"").trim():"").split(`
`).filter(R=>R.trim()).slice(0,3).join(" ").trim(),ge=Re.length>200?Re.substring(0,200)+"...":Re||"";return e.jsx(st.div,{variants:F,children:e.jsx(ys,{to:s&&q?`/digital-print/${s}/${K}/${J._id}`:s?`/digital-print/${s}/${J._id}`:`/digital-print/${J._id}`,className:"group block w-full",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"w-full p-4 sm:p-6 rounded-xl border-2 border-cream-200 hover:border-cream-900 text-left transition-all duration-200 hover:bg-cream-50 min-h-[140px] sm:min-h-[160px] flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32 h-24 sm:h-32 rounded-lg overflow-hidden bg-cream-100 border border-cream-200",children:e.jsx("img",{src:J.image||"/Glossy.png",alt:J.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"font-serif text-base sm:text-lg font-bold text-cream-900 group-hover:text-cream-600 transition-colors flex-1",children:J.name}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg sm:text-xl font-bold text-cream-900",children:["",Ce]}),A&&e.jsx("div",{className:"text-xs text-cream-500 mt-0.5",children:A})]}),e.jsx("span",{className:"text-cream-900 group-hover:text-cream-600 text-xl font-bold transition-colors",children:""})]})]}),ge&&e.jsx("div",{className:"text-cream-600 text-xs sm:text-sm leading-relaxed flex-grow",children:e.jsx("p",{className:"line-clamp-2",children:ge})})]})]})})},J._id)})})})]})]}):s&&j.length===0&&w.length===0?e.jsxs("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-cream-700",children:r?"No products found for this subcategory.":"No products found for this category."}),s&&r&&e.jsx(kr,{onClick:()=>{l(s?`/digital-print/${s}`:"/digital-print"),window.scrollTo(0,0)},fallbackPath:s?`/digital-print/${s}`:"/digital-print",label:d?`Back to ${d}`:"Back to Category",className:"text-cream-900 hover:text-cream-600 underline mt-2 inline-block"})]}):j.length===0&&!s?e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-cream-700",children:"No categories found."})}):null,!r&&d&&e.jsx(st.div,{className:"mt-12 sm:mt-20 bg-white p-8 sm:p-10 rounded-3xl border border-cream-200 shadow-sm",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:e.jsx("div",{className:"flex flex-col md:flex-row gap-10 items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-serif text-2xl font-bold text-cream-900 mb-4",children:["Why Choose Our ",d,"?"]}),u&&e.jsx("p",{className:"text-cream-700 leading-relaxed mb-6",children:u}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-cream-50 rounded-xl border border-cream-100",children:[e.jsx("div",{className:"font-bold text-2xl text-cream-900 mb-1",children:"24h"}),e.jsx("div",{className:"text-xs text-cream-500 uppercase tracking-wider",children:"Production"})]}),e.jsxs("div",{className:"text-center p-4 bg-cream-50 rounded-xl border border-cream-100",children:[e.jsx("div",{className:"font-bold text-2xl text-cream-900 mb-1",children:"300+"}),e.jsx("div",{className:"text-xs text-cream-500 uppercase tracking-wider",children:"GSM Paper"})]}),e.jsxs("div",{className:"text-center p-4 bg-cream-50 rounded-xl border border-cream-100",children:[e.jsx("div",{className:"font-bold text-2xl text-cream-900 mb-1",children:"100%"}),e.jsx("div",{className:"text-xs text-cream-500 uppercase tracking-wider",children:"Satisfaction"})]})]})]})})})]})]})},FE=({width:s="100%",height:r="100%",safeArea:n={top:10,bottom:10,left:10,right:10},bleedArea:l={top:15,bottom:15,left:15,right:15}})=>{const[d,m]=y.useState(!0);return e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[e.jsx("div",{className:"absolute -top-8 right-0 pointer-events-auto",children:e.jsxs("button",{onClick:()=>m(!d),className:"bg-cream-700 text-white px-3 py-1 rounded-lg text-xs flex items-center gap-1 hover:bg-cream-800 transition-colors",children:[d?e.jsx(g4,{size:12}):e.jsx(Er,{size:12}),d?"Hide Guides":"Show Guides"]})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute border border-red-400 opacity-50",style:{top:`${l.top}%`,bottom:`${l.bottom}%`,left:`${l.left}%`,right:`${l.right}%`},children:e.jsx("div",{className:"absolute -top-3 left-2 bg-red-500 text-white text-[10px] px-1 rounded",children:"Bleed Area"})}),e.jsx("div",{className:"absolute border border-blue-400 opacity-50",style:{top:"5%",bottom:"5%",left:"5%",right:"5%"},children:e.jsx("div",{className:"absolute border-2 border-dashed border-green-500 opacity-70",style:{top:`${n.top}%`,bottom:`${n.bottom}%`,left:`${n.left}%`,right:`${n.right}%`},children:e.jsx("div",{className:"absolute -top-3 left-2 text-green-600 bg-white/80 text-[10px] px-1 rounded font-bold",children:"Safe Area"})})})]})]})},UE=()=>{const s=ar(),[r,n]=y.useState("select"),[l,d]=y.useState(null),[m,u]=y.useState(""),[p,b]=y.useState(!1),[f,j]=y.useState(null),[v,w]=y.useState(null),[D,P]=y.useState("front"),[T,$]=y.useState(!1),[L,M]=y.useState(!1),[B,ce]=y.useState(0),[U,O]=y.useState(null),[k,W]=y.useState({height:2,width:3.5,safeTop:10,safeBottom:10,safeLeft:10,safeRight:10,bleedTop:15,bleedBottom:15,bleedLeft:15,bleedRight:15,description:""}),[Q,ne]=y.useState(!1);y.useEffect(()=>{(()=>{try{const Ce=localStorage.getItem("user");if(console.log(" Checking localStorage for user data:",{hasUserData:!!Ce}),Ce){const A=JSON.parse(Ce);console.log(" Found user data in localStorage:",A);let G=null,ie=null;if(A&&A._id&&typeof A._id=="string"?(G=A._id,ie=A.name||A.email||A.username||"User"):A&&A.user&&A.user._id&&typeof A.user._id=="string"?(G=A.user._id,ie=A.user.name||A.user.email||A.user.username||"User"):A&&A.id&&typeof A.id=="string"?(G=A.id,ie=A.name||A.email||A.username||"User"):A&&A.user&&A.user.id&&typeof A.user.id=="string"&&(G=A.user.id,ie=A.user.name||A.user.email||A.user.username||"User"),G){d(G),u(ie||"Your Account"),b(!0),console.log(" User is logged in with ID:",G);return}}console.warn(" No valid user ID found - user not logged in"),d(null),b(!1),u("")}catch(Ce){console.error(" Error reading localStorage:",Ce),d(null),b(!1),u("")}})()},[]);const le=()=>{s("/login")},me=de=>new Promise(Ce=>{const A=[];if(["image/jpeg","image/png","image/jpg","application/pdf"].includes(de.type)||A.push("Invalid file format. Use JPG, PNG, or PDF."),de.size>10*1024*1024&&A.push("File size exceeds 10MB limit."),de.type.startsWith("image/")){const ie=new Image,Re=URL.createObjectURL(de);ie.onload=()=>{const ge=ie.width/k.width;ge<300&&A.push(`Low resolution (${Math.round(ge)} DPI). Minimum 300 DPI recommended.`),(ie.width<1e3||ie.height<600)&&A.push("Low resolution image. Minimum 1000x600px required."),Ce({file:de,preview:Re,isValid:A.length===0,errors:A})},ie.onerror=()=>{A.push("Failed to load image data."),Ce({file:de,preview:"",isValid:!1,errors:A})},ie.src=Re}else Ce({file:de,preview:"",isValid:A.length===0,errors:A})}),Ve=async(de,Ce)=>{var A;if(de.preventDefault(),$(!1),(A=de.dataTransfer.files)!=null&&A[0]){const G=await me(de.dataTransfer.files[0]);Ce==="front"?j(G):w(G),P(Ce)}},F=async(de,Ce)=>{var A;if((A=de.target.files)!=null&&A[0]){const G=await me(de.target.files[0]);Ce==="front"?j(G):w(G),P(Ce)}},J=async()=>{if(console.log(" Upload button clicked"),!p||!l){le();return}if(!(!f||!f.isValid)){M(!0),ce(0);try{const de=new FormData;de.append("userId",l),de.append("height",k.height.toString()),de.append("width",k.width.toString()),de.append("description",k.description),de.append("safeTop",k.safeTop.toString()),de.append("safeBottom",k.safeBottom.toString()),de.append("safeLeft",k.safeLeft.toString()),de.append("safeRight",k.safeRight.toString()),de.append("bleedTop",k.bleedTop.toString()),de.append("bleedBottom",k.bleedBottom.toString()),de.append("bleedLeft",k.bleedLeft.toString()),de.append("bleedRight",k.bleedRight.toString()),de.append("frontImage",f.file),v&&v.isValid&&de.append("backImage",v.file);const Ce=localStorage.getItem("token"),A=new XMLHttpRequest;A.upload.onprogress=G=>{if(G.lengthComputable){const ie=G.loaded/G.total*100;ce(ie)}},A.onload=()=>{if(A.status===201){const G=JSON.parse(A.responseText);O(G),M(!1),console.log(" Upload successful!")}else console.error(" Upload failed with status:",A.status,A.responseText),M(!1)},A.onerror=()=>{console.error(" Upload XHR error"),M(!1)},A.open("POST",`${Ae}/upload`),Ce&&A.setRequestHeader("Authorization",`Bearer ${Ce}`),console.log(" Sending upload request with userId:",l),A.send(de)}catch(de){console.error(" Upload error:",de),M(!1)}}},I=()=>e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"font-serif text-4xl font-bold text-cream-900 mb-4",children:"Upload Your Design"}),e.jsx("p",{className:"text-cream-600 text-lg",children:"Get professional printing with our automated file preparation"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8 px-4",children:e.jsxs(st.div,{whileHover:{y:-5},className:"bg-white p-6 sm:p-8 rounded-2xl sm:rounded-3xl border border-cream-200 shadow-lg cursor-pointer hover:shadow-xl transition-all group md:col-span-2 max-w-2xl mx-auto",onClick:()=>{if(!p){le();return}n("upload")},children:[e.jsx("div",{className:"w-16 h-16 bg-cream-100 rounded-2xl flex items-center justify-center mb-6 text-cream-900 group-hover:bg-cream-900 group-hover:text-white transition-colors mx-auto",children:e.jsx(Jo,{size:32})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-3 text-center",children:"Upload Print-Ready Files"}),e.jsx("p",{className:"text-cream-600 mb-6 text-center",children:"Upload your designs with automatic CMYK conversion, bleed area setup, and professional pre-press checks."}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"text-cream-900 font-bold flex items-center group-hover:gap-2 transition-all mx-auto",children:[p?"Start Upload":"Login to Upload"," ",e.jsx(Jo,{size:16,className:"ml-2"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 mt-8 sm:mt-12 px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center p-6 bg-white rounded-xl border border-cream-100",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-green-600",children:e.jsx(ga,{size:24})}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Auto CMYK Conversion"}),e.jsx("p",{className:"text-cream-600 text-sm",children:"Automatic conversion to print-ready CMYK color space"})]}),e.jsxs("div",{className:"text-center p-6 bg-white rounded-xl border border-cream-100",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-blue-600",children:e.jsx(Gb,{size:24})}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Bleed Area Setup"}),e.jsx("p",{className:"text-cream-600 text-sm",children:"Professional bleed and safe area configuration"})]}),e.jsxs("div",{className:"text-center p-6 bg-white rounded-xl border border-cream-100",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-purple-600",children:e.jsx(Pm,{size:24})}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Quality Check"}),e.jsx("p",{className:"text-cream-600 text-sm",children:"Automatic resolution and format validation"})]})]})]}),K=()=>e.jsx("div",{className:"max-w-2xl mx-auto text-center",children:e.jsxs("div",{className:"bg-white rounded-3xl p-12 border border-cream-100 shadow-lg",children:[e.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(kp,{size:40,className:"text-yellow-600"})}),e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900 mb-4",children:"Login Required"}),e.jsx("p",{className:"text-cream-600 text-lg mb-6",children:"Please log in to upload your designs and access all features."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:le,className:"w-full bg-cream-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-cream-800 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 flex items-center justify-center gap-3",children:[e.jsx(kp,{size:20}),"Go to Login"]}),e.jsxs("button",{onClick:()=>n("select"),className:"w-full bg-cream-100 text-cream-700 py-3 rounded-xl font-bold hover:bg-cream-200 transition-all flex items-center justify-center gap-2",children:[e.jsx(Cd,{size:18}),"Back to Options"]})]})]})}),q=()=>{var de,Ce;return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("button",{onClick:()=>{n("select"),O(null)},className:"flex items-center text-cream-600 hover:text-cream-900 mb-6 transition-colors",children:[e.jsx(Cd,{size:20,className:"mr-2"})," Back to Options"]}),U?e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl p-8 text-center border border-cream-100 shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ga,{size:32,className:"text-green-600"})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-4",children:"Upload Successful!"}),e.jsxs("p",{className:"text-cream-600 mb-6",children:["Your design has been processed and is ready for printing.",U.design.hasBackImage?" Both front and back images were uploaded.":" Only front image was uploaded."]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-6 text-left",children:[e.jsxs("div",{className:"bg-cream-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-cream-900 mb-2",children:"Design Details"}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Size: ",U.design.width,'" '," ",U.design.height,'"']}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Files: ",U.design.hasBackImage?"2":"1"]})]}),e.jsxs("div",{className:"bg-cream-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-cream-900 mb-2",children:"Processing"}),e.jsx("p",{className:"text-sm text-cream-600",children:" CMYK Conversion"}),e.jsx("p",{className:"text-sm text-cream-600",children:" Bleed Setup"})]})]}),e.jsx("button",{onClick:()=>O(null),className:"bg-cream-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-cream-800 transition-colors",children:"Upload Another Design"})]}):e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"lg:w-2/5 space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl sm:rounded-2xl border border-cream-100 shadow-sm",children:[e.jsxs("h3",{className:"font-serif text-lg sm:text-xl font-bold text-cream-900 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Gb,{size:18,className:"sm:w-5 sm:h-5"}),"Design Specifications"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Width (inches)"}),e.jsx("input",{type:"number",step:"0.1",value:k.width,onChange:A=>W(G=>({...G,width:parseFloat(A.target.value)})),className:"w-full p-3 rounded-xl border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Height (inches)"}),e.jsx("input",{type:"number",step:"0.1",value:k.height,onChange:A=>W(G=>({...G,height:parseFloat(A.target.value)})),className:"w-full p-3 rounded-xl border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Description"}),e.jsx("textarea",{value:k.description,onChange:A=>W(G=>({...G,description:A.target.value})),placeholder:"Add notes about your design...",className:"w-full p-3 rounded-xl border border-cream-300 focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none resize-none",rows:3})]}),e.jsxs("button",{onClick:()=>ne(!Q),className:"flex items-center gap-2 text-cream-700 hover:text-cream-900 transition-colors text-sm font-medium",children:[e.jsx(Cr,{size:16}),Q?"Hide":"Show"," Advanced Settings"]})]}),Q&&e.jsxs(st.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-white p-6 rounded-2xl border border-cream-100 shadow-sm",children:[e.jsx("h4",{className:"font-bold text-cream-900 mb-4",children:"Print Safety Margins (%)"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 text-sm",children:["safeTop","safeBottom","safeLeft","safeRight","bleedTop","bleedBottom","bleedLeft","bleedRight"].map(A=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-cream-600 mb-1 capitalize",children:A.replace(/([A-Z])/g," $1").trim()}),e.jsx("input",{type:"number",step:"1",value:k[A],onChange:G=>W(ie=>({...ie,[A]:parseFloat(G.target.value)})),className:"w-full p-2 rounded-lg border border-cream-300 focus:ring-1 focus:ring-cream-900 focus:border-transparent outline-none"})]},A))})]}),["front","back"].map(A=>{const G=A==="front",ie=G?f:v;return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-cream-900 uppercase mb-2 tracking-wider",children:[A," Side ",G?"*":"(Optional)"]}),ie?e.jsxs("div",{className:`border rounded-xl p-4 flex items-start gap-4 relative ${ie.isValid?"bg-white border-cream-200":"bg-red-50 border-red-200"}`,onClick:()=>P(A),children:[ie.preview?e.jsx("img",{src:ie.preview,className:"w-16 h-16 object-cover rounded bg-cream-100",alt:"preview"}):e.jsx("div",{className:"w-16 h-16 bg-cream-100 rounded flex items-center justify-center",children:e.jsx(C4,{className:"text-cream-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-cream-900 truncate",children:ie.file.name}),e.jsxs("p",{className:"text-xs text-cream-500 mb-2",children:[(ie.file.size/1024/1024).toFixed(2)," MB"]}),ie.isValid?e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(ga,{size:12})," Ready for Upload"]}):e.jsx("div",{className:"space-y-1",children:ie.errors.map((Re,ge)=>e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(bs,{size:12})," ",Re]},ge))})]}),e.jsx("button",{onClick:Re=>{Re.stopPropagation(),G?j(null):w(null)},className:"text-cream-400 hover:text-red-500 p-1 transition-colors",children:e.jsx(Gs,{size:16})}),D===A&&e.jsx("div",{className:"absolute -right-3 top-1/2 -translate-y-1/2 w-0 h-0 border-t-8 border-t-transparent border-l-8 border-l-cream-900 border-b-8 border-b-transparent hidden lg:block"})]}):e.jsxs("div",{className:"border-2 border-dashed border-cream-300 rounded-xl p-8 text-center bg-white hover:bg-cream-50 hover:border-cream-400 transition-all cursor-pointer relative",onDragOver:Re=>{Re.preventDefault(),$(!0)},onDragLeave:()=>$(!1),onDrop:Re=>Ve(Re,A),children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Re=>F(Re,A),accept:"image/jpeg,image/png,image/jpg,application/pdf"}),e.jsx(Jo,{className:"mx-auto text-cream-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-cream-700",children:"Drag & Drop or Click"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"JPG, PNG, PDF (Max 10MB)"})]})]},A)}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-blue-900",children:[e.jsxs("h4",{className:"font-bold text-sm mb-2 flex items-center gap-2",children:[e.jsx(hr,{size:16})," Professional Print Requirements"]}),e.jsxs("ul",{className:"text-xs space-y-2 opacity-80",children:[e.jsx("li",{children:" Format: JPG, PNG, PDF"}),e.jsx("li",{children:" Resolution: 300 DPI minimum"}),e.jsx("li",{children:" Color: Auto-converted to CMYK"}),e.jsx("li",{children:" Bleed: 3mm recommended on all sides"}),e.jsx("li",{children:" File Size: Maximum 10MB per file"})]})]}),e.jsx("button",{onClick:J,disabled:!p||!f||!f.isValid||L,className:"w-full bg-cream-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-cream-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 flex items-center justify-center gap-2",children:p?L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading... ",Math.round(B),"%"]}):e.jsxs(e.Fragment,{children:[e.jsx(Jo,{size:20}),"Process & Upload Design"]}):e.jsxs(e.Fragment,{children:[e.jsx(kp,{size:20}),"Login to Upload"]})})]}),e.jsxs("div",{className:"lg:w-3/5 bg-cream-100 rounded-2xl p-8 flex flex-col items-center justify-center relative min-h-[600px]",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(#976b4d 1px, transparent 1px), linear-gradient(90deg, #976b4d 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsx("div",{className:"relative z-10 shadow-2xl",children:D==="front"&&f||D==="back"&&v?e.jsxs("div",{className:"relative w-[500px] aspect-[1.75/1] bg-white",children:[((de=D==="front"?f:v)==null?void 0:de.preview)&&e.jsx("img",{src:(Ce=D==="front"?f:v)==null?void 0:Ce.preview,className:"w-full h-full object-cover",alt:"preview"}),e.jsx(FE,{safeArea:{top:k.safeTop,bottom:k.safeBottom,left:k.safeLeft,right:k.safeRight},bleedArea:{top:k.bleedTop,bottom:k.bleedBottom,left:k.bleedLeft,right:k.bleedRight}})]}):e.jsxs("div",{className:"w-[500px] aspect-[1.75/1] bg-white flex flex-col items-center justify-center text-cream-300 border-2 border-dashed border-cream-200",children:[e.jsx(bn,{size:48,className:"mb-4"}),e.jsx("p",{className:"text-cream-400 font-medium",children:"Preview will appear here"})]})}),e.jsxs("div",{className:"mt-8 flex gap-6 flex-wrap justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-cream-700",children:[e.jsx("span",{className:"w-3 h-3 border border-red-400 bg-red-50"}),e.jsx("span",{children:"Bleed Area (Cut Zone)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-cream-700",children:[e.jsx("span",{className:"w-3 h-3 border border-blue-400 bg-blue-50"}),e.jsx("span",{children:"Trim Line (Final Size)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-cream-700",children:[e.jsx("span",{className:"w-3 h-3 border-2 border-dashed border-green-500 bg-green-50"}),e.jsx("span",{children:"Safe Area (Text/Logos)"})]})]})]})]})]})};return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-12",children:[e.jsx("div",{className:"container mx-auto px-4 sm:px-6 mb-6",children:e.jsx(kr,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs(ca,{mode:"wait",children:[r==="select"&&e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:I()},"select"),r==="upload"&&!p&&e.jsx(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:K()},"login-required"),r==="upload"&&p&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:q()},"upload")]})]})},IE=[{role:"Founder & Director",name:"Name Placeholder",desc:"Vision, Business Strategy & Decision Making"},{role:"Chief Executive Officer (CEO)",name:"Kajal Sharma",desc:"Leads the company with strong direction and clarity"},{role:"Chief Operating Officer (COO)",name:"Name Placeholder",desc:"Coordination, Daily Operations & Workflow Management"},{role:"HR",name:"Name Placeholder",desc:"Human Resources & Team Management"},{role:"Marketing Head",name:"Name Placeholder",desc:"Branding, Promotions & Client Acquisition"},{role:"Production Manager",name:"Name Placeholder",desc:"Machine Management, Quality Control & Output"},{role:"Design Head / Creative Lead",name:"Name Placeholder",desc:"Layouts, Templates, Content Designing & Branding"},{role:"Sales Manager",name:"Name Placeholder",desc:"Customer Handling, Order Conversion & Follow-ups"},{role:"Accounts & Billing Manager",name:"Name Placeholder",desc:"Billing, Invoices, Vendor Payments & Records"},{role:"Customer Support Lead",name:"Name Placeholder",desc:"Client Queries, Support & Service Updates"},{role:"Logistics & Dispatch Officer",name:"Name Placeholder",desc:"Packaging, Shipment Tracking & Delivery Coordination"}],VE=[{icon:Ki,title:"No Minimum Limit",text:"Premium printing available even for low quantity."},{icon:Zj,title:"Bulk Production",text:"Advanced production setup for bulk orders."},{icon:Y4,title:"Creative Design",text:"Creative and modern design approach."},{icon:ci,title:"Ultra-fast Delivery",text:"We respect deadlines with quick turnaround."},{icon:fd,title:"Best Pricing",text:"Affordable and transparent pricing structure."}],BE=["Commitment to Quality","Customer First Approach","Innovation & Creativity","Timely Delivery & Transparency"],qE=()=>e.jsxs("div",{className:"min-h-screen bg-cream-50",children:[e.jsx("div",{className:"container mx-auto px-4 pt-4 pb-4",children:e.jsx(kr,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsx("div",{className:"bg-cream-900 text-cream-50 py-20 mt-10",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx(st.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"font-serif text-4xl md:text-6xl font-bold mb-4",children:"About Prints24"}),e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"w-24 h-1 bg-cream-400 mx-auto rounded-full"})]})}),e.jsx("section",{className:"py-16 container mx-auto px-4 max-w-5xl",children:e.jsxs(st.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center space-y-8 text-lg text-cream-800 leading-relaxed",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-2xl text-cream-900",children:"Prints24"})," is a modern, fast-growing Digital & Offset Printing Company, aiming to deliver",e.jsx("span",{className:"font-semibold italic text-cream-600",children:" Fast, Creative, and High-Quality"})," printing solutions to customers."]}),e.jsx("p",{className:"max-w-3xl mx-auto",children:"We started Prints24 with the belief that todays digital generation should have a platform where they can order any type of printingfrom small quantities (Short Run) to large bulk ordersin a way that is:"}),e.jsx("div",{className:"flex justify-center gap-4 md:gap-12 py-6",children:["Easy","Fast","Reliable"].map((s,r)=>e.jsxs(st.div,{initial:{opacity:0,scale:.5},whileInView:{opacity:1,scale:1},transition:{delay:r*.1},className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-cream-200 flex items-center justify-center text-cream-900 mb-2",children:e.jsx(Za,{size:24,strokeWidth:3})}),e.jsx("span",{className:"font-serif font-bold text-xl text-cream-900",children:s})]},s))})]})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs(st.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"bg-cream-50 p-10 rounded-3xl border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-cream-900 text-white rounded-xl",children:e.jsx(Er,{size:28})}),e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900",children:"Our Vision"})]}),e.jsx("p",{className:"text-cream-700 text-lg leading-relaxed",children:"To make Affordable, Stylish, and Premium Quality Printing accessible to every individual and every business."})]}),e.jsxs(st.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"bg-cream-50 p-10 rounded-3xl border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-cream-900 text-white rounded-xl",children:e.jsx(N3,{size:28})}),e.jsx("h2",{className:"font-serif text-3xl font-bold text-cream-900",children:"Our Mission"})]}),e.jsxs("ul",{className:"space-y-4 text-cream-700",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Za,{size:20,className:"text-cream-500 mt-1 shrink-0"}),e.jsx("span",{children:"Make modern printing easy and accessible for everyone."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Za,{size:20,className:"text-cream-500 mt-1 shrink-0"}),e.jsx("span",{children:"Provide intelligent solutions with Quick Delivery and High Quality."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Za,{size:20,className:"text-cream-500 mt-1 shrink-0"}),e.jsx("span",{children:"Offer better printing options for every budget."})]})]})]})]})})}),e.jsx("section",{className:"py-20 bg-cream-900 text-cream-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"font-serif text-4xl font-bold mb-4",children:"What Makes Prints24 Different?"}),e.jsx("p",{className:"text-cream-200 max-w-2xl mx-auto",children:"We combine traditional quality with modern speed and convenience."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6",children:VE.map((s,r)=>e.jsxs(st.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.1},className:"bg-cream-800 p-6 rounded-2xl text-center hover:bg-cream-700 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-600 rounded-full flex items-center justify-center mx-auto mb-4 text-white",children:e.jsx(s.icon,{size:24})}),e.jsx("h3",{className:"font-serif font-bold text-lg mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-cream-200",children:s.text})]},r))})]})}),e.jsx("section",{className:"py-16 bg-cream-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h2",{className:"font-serif text-3xl font-bold text-center text-cream-900 mb-12",children:"Our Core Values"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:BE.map((s,r)=>e.jsxs(st.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"bg-white px-8 py-4 rounded-full shadow-sm border border-cream-200 flex items-center gap-3 font-medium text-cream-800",children:[e.jsx(k4,{size:18,className:"text-cream-500",fill:"currentColor"}),s]},r))})]})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"text-cream-500 font-medium uppercase tracking-widest text-sm",children:"The People Behind Prints24"}),e.jsx("h2",{className:"font-serif text-4xl font-bold text-cream-900 mt-2",children:"Meet Our Core Team"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:IE.map((s,r)=>e.jsxs(st.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.05},className:"group bg-cream-50 p-6 rounded-2xl border border-cream-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"w-16 h-16 bg-cream-200 rounded-full mb-4 flex items-center justify-center text-cream-900 group-hover:bg-cream-900 group-hover:text-cream-50 transition-colors",children:e.jsx(Ol,{size:24})}),e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"text-xs font-bold text-cream-500 uppercase tracking-wider mb-1",children:s.role}),e.jsx("h3",{className:"font-serif text-xl font-bold text-cream-900",children:s.name})]}),e.jsx("div",{className:"w-10 h-1 bg-cream-200 my-4 rounded-full group-hover:bg-cream-400 transition-colors"}),e.jsx("p",{className:"text-sm text-cream-600 leading-relaxed",children:s.desc})]},r))})]})})]}),HE=()=>{const[s,r]=y.useState("terms");y.useEffect(()=>{if(typeof window>"u")return;const l=()=>{const d=["terms","refund","cancellation","privacy"];for(const m of d){const u=document.getElementById(m);if(u){const p=u.getBoundingClientRect();p.top>=0&&p.top<300&&r(m)}}};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const n=l=>{const d=document.getElementById(l);if(d){const m=d.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:m,behavior:"smooth"}),r(l)}};return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-12",children:[e.jsx("div",{className:"container mx-auto px-4 pt-4 pb-4",children:e.jsx(kr,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsx("div",{className:"bg-cream-900 text-cream-50 py-16 mb-12",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold mb-4",children:"Legal Policies"}),e.jsx("p",{className:"text-cream-200 max-w-2xl mx-auto",children:"Transparency is key to our service. Please read our terms and conditions carefully."})]})}),e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-10",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsxs("div",{className:"sticky top-24 bg-white rounded-2xl shadow-sm border border-cream-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-cream-100 border-b border-cream-200 font-bold text-cream-900 flex items-center gap-2",children:[e.jsx(c3,{size:18})," Table of Contents"]}),e.jsxs("nav",{className:"p-2 space-y-1",children:[e.jsxs("button",{onClick:()=>n("terms"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="terms"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Terms of Service ",s==="terms"&&e.jsx(sr,{size:14})]}),e.jsxs("button",{onClick:()=>n("refund"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="refund"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Refund Policy ",s==="refund"&&e.jsx(sr,{size:14})]}),e.jsxs("button",{onClick:()=>n("cancellation"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="cancellation"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Cancellation Policy ",s==="cancellation"&&e.jsx(sr,{size:14})]}),e.jsxs("button",{onClick:()=>n("privacy"),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between ${s==="privacy"?"bg-cream-900 text-cream-50":"text-cream-600 hover:bg-cream-50"}`,children:["Privacy Policy ",s==="privacy"&&e.jsx(sr,{size:14})]})]})]})}),e.jsxs("div",{className:"lg:w-3/4 space-y-12",children:[e.jsx("section",{id:"terms",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(Wr,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Terms of Service"})]}),e.jsxs("div",{className:"space-y-6 text-cream-800 leading-relaxed",children:[e.jsx("p",{children:"Prints24 provides digital and offset printing services to B2B, B2C, corporate clients, small businesses, and individuals. By using our services, you agree to the following terms:"}),e.jsxs("div",{className:"bg-cream-50 p-5 rounded-xl border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(Pm,{size:16})," Customer Responsibility"]}),e.jsx("p",{className:"text-sm",children:"The customer is fully responsible for the legality, originality, copyright ownership, and authenticity of all submitted designs, documents, and artwork."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2 text-lg",children:"Prohibited Printing"}),e.jsx("p",{className:"text-sm mb-3",children:"We do strictly NOT allow printing of content that is illegal, forged, duplicate, copyrighted without permission, objectionable, religiously sensitive, government ID, currency, or any material restricted under Indian law."}),e.jsxs("div",{className:"flex items-start gap-2 text-red-600 text-xs font-medium bg-red-50 p-3 rounded-lg",children:[e.jsx(Bb,{size:16,className:"shrink-0 mt-0.5"}),"If such files are received, the order may be cancelled and legal action may be taken."]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Color Disclaimer"}),e.jsx("p",{className:"text-sm",children:"100% exact color matching is not guaranteed in digital or offset processes. If future reprints require identical colors, color profiling will be required and extra fees will apply."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Design Approval"}),e.jsx("p",{className:"text-sm",children:"After customer approval, Prints24 is not responsible for spelling mistakes, low-resolution images, incorrect alignment, missing elements, or design issues found later."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-3",children:"Printing Accuracy Policy"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full mt-1.5"}),e.jsx("span",{children:"If printing errors impact 5%50% of the product, we provide a proportional discount."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full mt-1.5"}),e.jsx("span",{children:"If more than 50% is defective due to production errors, we provide a free reprint."})]})]}),e.jsx("p",{className:"text-xs mt-2 text-cream-500 italic",children:"*For approved reprints, printing is free, but courier/delivery charges must be paid by the customer."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Liability & Rights"}),e.jsxs("p",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"Limited Liability:"})," In cases of courier delay, product damage, color mismatch, disputes, or loss, Prints24s maximum liability is limited to the printing value of the order only."]}),e.jsxs("p",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"Right to Refuse:"})," Prints24 reserves the right to cancel, reject, suspend, or modify any order, customer account, pricing, or policies without prior notice."]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Jurisdiction:"})," All legal matters fall under Jaipur, Rajasthan (India) jurisdiction only."]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Payments & Communication"}),e.jsx("p",{className:"text-sm mb-2",children:"Payments must be made only through officially verified Prints24 company banking channels. Payments made to personal accounts are not the responsibility of Prints24."}),e.jsx("p",{className:"text-sm",children:"By ordering, customers agree to receive transactional and promotional communications through SMS, WhatsApp, email, or phone."})]})]})]})}),e.jsx("section",{id:"refund",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(Kn,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Refund Policy"})]}),e.jsxs("div",{className:"space-y-4 text-cream-800",children:[e.jsx("p",{className:"font-medium",children:"All products are custom-made and non-refundable."}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100",children:[e.jsxs("h3",{className:"font-bold text-red-900 mb-2 text-sm flex items-center gap-2",children:[e.jsx(lc,{size:16})," No Refunds Provided For:"]}),e.jsxs("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-red-800",children:[e.jsx("li",{children:" Design dissatisfaction"}),e.jsx("li",{children:" Minor color variations"}),e.jsx("li",{children:" Errors discovered after customer approval"}),e.jsx("li",{children:" Courier delays"}),e.jsx("li",{children:" Expected variation in material/texture"})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100 flex items-start gap-3",children:[e.jsx(Kn,{size:20,className:"text-green-700 mt-0.5 shrink-0"}),e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Reprint Guarantee:"})," If production errors affect more than 50% of the order, we provide a free reprintnot a refund."]})]})]})]})}),e.jsx("section",{id:"cancellation",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(Bb,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Cancellation Policy"})]}),e.jsx("div",{className:"space-y-4 text-cream-800",children:e.jsxs("ul",{className:"space-y-3 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-100 flex items-center justify-center shrink-0 text-cream-900 font-bold text-xs",children:"1"}),e.jsxs("span",{children:["Orders may be cancelled ",e.jsx("strong",{children:"only before printing begins"}),"."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-100 flex items-center justify-center shrink-0 text-cream-900 font-bold text-xs",children:"2"}),e.jsx("span",{children:"Once production has started, modification or cancellation is not allowed."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-100 flex items-center justify-center shrink-0 text-cream-900 font-bold text-xs",children:"3"}),e.jsx("span",{children:"If cancelled before printing, setup, processing, and material costs will be deducted from the refund."})]})]})})]})}),e.jsx("section",{id:"privacy",className:"scroll-mt-28",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-cream-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-cream-100 rounded-lg text-cream-900",children:e.jsx(Td,{size:24})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900",children:"Privacy Policy"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-cream-800 text-sm",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Information We Collect"}),e.jsx("p",{className:"mb-4 text-cream-600",children:"Customer name, business details, email, phone, delivery address, and printing design files."}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"How Information Is Used"}),e.jsx("p",{className:"mb-4 text-cream-600",children:"For order processing, delivery, updates, support, and service improvement."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Data Security & Sharing"}),e.jsx("p",{className:"mb-4 text-cream-600",children:"All customer files and information remain confidential and shared only with printing partners, couriers, or payment gateways as needed."}),e.jsx("h3",{className:"font-bold text-cream-900 mb-2",children:"Customer Rights"}),e.jsx("p",{className:"text-cream-600",children:"Customers may receive promotional communications (opt-out available) and may request access/correction of stored information."})]})]})]})})]})]})})]})},ka=(s,r)=>{if(typeof window>"u")return;let n=null;if(r&&(n=document.getElementById(r)),n||(n=document.querySelector(`[name="${s}"]`)),n||(n=document.querySelector(`[data-field="${s}"]`)),!n){const l=[`#${s}`,`input[name="${s}"]`,`select[name="${s}"]`,`textarea[name="${s}"]`,`[id*="${s}"]`];for(const d of l)if(n=document.querySelector(d),n)break}if(n)n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{n&&(n.tagName==="BUTTON"?n.click():n.focus(),n.tagName==="SELECT"&&n.click(),n.classList.add("validation-error-highlight"),setTimeout(()=>{n==null||n.classList.remove("validation-error-highlight")},2e3))},300);else if(r){const l=document.getElementById(`${r}-container`);if(l){l.scrollIntoView({behavior:"smooth",block:"center"});const d=l.querySelector("button");d&&setTimeout(()=>{d.click(),d.classList.add("validation-error-highlight"),setTimeout(()=>{d.classList.remove("validation-error-highlight")},2e3)},300)}}},GE=()=>{const[s,r]=y.useState({name:"",email:"",message:""}),[n,l]=y.useState({}),[d,m]=y.useState(!1),[u,p]=y.useState({type:null,text:""}),b=v=>{const{name:w,value:D}=v.target;r(P=>({...P,[w]:D})),n[w]&&l(P=>({...P,[w]:void 0}))},f=()=>{const v={};if(s.name.trim()||(v.name="Name is required"),s.email?/\S+@\S+\.\S+/.test(s.email)||(v.email="Please enter a valid email address"):v.email="Email is required",s.message.trim()?s.message.trim().length<10&&(v.message="Message must be at least 10 characters"):v.message="Message is required",l(v),Object.keys(v).length>0){const w=Object.keys(v)[0];ka(w,w)}return Object.keys(v).length===0},j=async v=>{if(v.preventDefault(),!!f()){m(!0),p({type:null,text:""});try{await new Promise(w=>setTimeout(w,1e3)),p({type:"success",text:"Thank you! Your message has been sent successfully."}),r({name:"",email:"",message:""}),l({}),setTimeout(()=>{p({type:null,text:""})},5e3)}catch{p({type:"error",text:"Failed to send message. Please try again."}),setTimeout(()=>{p({type:null,text:""})},5e3)}finally{m(!1)}}};return e.jsx("div",{className:"min-h-screen bg-cream-50 py-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-2xl",children:[e.jsx("div",{className:"mb-6",children:e.jsx(kr,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs("div",{className:"bg-white p-10 rounded-2xl shadow-lg border border-cream-100",children:[e.jsx("h1",{className:"font-serif text-3xl font-bold text-cream-900 mb-6 text-center",children:"Contact Us"}),e.jsx(ca,{children:u.type&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`mb-6 p-4 rounded-lg flex items-start gap-3 ${u.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[e.jsx(bs,{size:20,className:"flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm",children:u.text})}),e.jsx("button",{onClick:()=>p({type:null,text:""}),className:"flex-shrink-0 hover:opacity-70 transition-opacity",children:e.jsx(as,{size:18})})]})}),e.jsxs("form",{className:"space-y-6",onSubmit:j,children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-cream-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"name",name:"name",type:"text",value:s.name,onChange:b,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-transparent outline-none transition-all ${n.name?"border-red-300 focus:ring-red-500 bg-red-50":"border-cream-200"}`,placeholder:"Your Name"}),n.name&&e.jsxs("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[e.jsx(bs,{size:12}),n.name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-cream-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"email",name:"email",type:"email",value:s.email,onChange:b,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-transparent outline-none transition-all ${n.email?"border-red-300 focus:ring-red-500 bg-red-50":"border-cream-200"}`,placeholder:"your@email.com"}),n.email&&e.jsxs("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[e.jsx(bs,{size:12}),n.email]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"message",className:"block text-sm font-medium text-cream-700 mb-1",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"message",name:"message",rows:4,value:s.message,onChange:b,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-transparent outline-none resize-none transition-all ${n.message?"border-red-300 focus:ring-red-500 bg-red-50":"border-cream-200"}`,placeholder:"How can we help?"}),n.message&&e.jsxs("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[e.jsx(bs,{size:12}),n.message]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-cream-50 py-3 rounded-lg font-bold hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Sending...":"Send Message"})]})]})]})})},QE={"+1":{pattern:/^\d{10}$/,minLength:10,maxLength:10,example:"1234567890"},"+91":{pattern:/^[6-9]\d{9}$/,minLength:10,maxLength:10,example:"9876543210"},"+55":{pattern:/^[1-9]\d{10}$/,minLength:11,maxLength:11,example:"11987654321"},"+44":{pattern:/^[1-9]\d{9,10}$/,minLength:10,maxLength:11,example:"7123456789"},"+61":{pattern:/^[2-9]\d{8}$/,minLength:9,maxLength:9,example:"412345678"},"+971":{pattern:/^[2-9]\d{8}$/,minLength:9,maxLength:9,example:"501234567"},"+86":{pattern:/^1[3-9]\d{9}$/,minLength:11,maxLength:11,example:"13800138000"},"+81":{pattern:/^[789]0\d{8}$|^[789]\d{9}$/,minLength:10,maxLength:11,example:"9012345678"},"+49":{pattern:/^[1-9]\d{10,11}$/,minLength:11,maxLength:12,example:"15123456789"},"+33":{pattern:/^[67]\d{8}$/,minLength:9,maxLength:9,example:"612345678"},"+7":{pattern:/^[3-9]\d{9}$/,minLength:10,maxLength:10,example:"9123456789"},"+65":{pattern:/^[689]\d{7}$/,minLength:8,maxLength:8,example:"91234567"},"+60":{pattern:/^[1-9]\d{8,9}$/,minLength:9,maxLength:10,example:"123456789"},"+66":{pattern:/^[689]\d{8}$/,minLength:9,maxLength:9,example:"812345678"},"+82":{pattern:/^[1-9]\d{9,10}$/,minLength:10,maxLength:11,example:"1012345678"},"+34":{pattern:/^[6-9]\d{8}$/,minLength:9,maxLength:9,example:"612345678"},"+39":{pattern:/^[3]\d{9}$/,minLength:10,maxLength:10,example:"3123456789"},"+31":{pattern:/^[6]\d{8}$/,minLength:9,maxLength:9,example:"612345678"},"+46":{pattern:/^[7]\d{8}$/,minLength:9,maxLength:9,example:"712345678"},"+41":{pattern:/^[7-9]\d{8}$/,minLength:9,maxLength:9,example:"781234567"},"+27":{pattern:/^[6-9]\d{8}$/,minLength:9,maxLength:9,example:"812345678"}},YE=()=>{var R;const s=ar(),r=tn(),[n,l]=y.useState({email:"",password:""}),[d,m]=y.useState({}),[u,p]=y.useState(!1),[b,f]=y.useState(!1),[j,v]=y.useState("email"),[w,D]=y.useState({email:"",otp:"",newPassword:"",confirmPassword:""}),[P,T]=y.useState({}),[$,L]=y.useState(!1),[M,B]=y.useState(!1),[ce,U]=y.useState(!1),[O,k]=y.useState(""),[W,Q]=y.useState(!1),[ne,le]=y.useState([]),[me,Ve]=y.useState([]),[F,J]=y.useState(""),[I,K]=y.useState(!0),q=y.useRef(null),de=(R=r.state)==null?void 0:R.message;y.useEffect(()=>{(async()=>{try{K(!0);const Be=(await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca2,flag,flags,idd")).json()).filter(et=>{var fe,se,te;return((fe=et.idd)==null?void 0:fe.root)&&((te=(se=et.idd)==null?void 0:se.suffixes)==null?void 0:te.length)>0}).map(et=>{var te;const fe=et.idd.root+(et.idd.suffixes[0]||""),se=QE[fe]||{pattern:/^\d{8,15}$/,minLength:8,maxLength:15,example:"1234567890"};return{code:fe,country:et.cca2,name:et.name.common,flag:et.flag||"",flagUrl:((te=et.flags)==null?void 0:te.png)||`https://flagcdn.com/w40/${et.cca2.toLowerCase()}.png`,pattern:se.pattern,minLength:se.minLength,maxLength:se.maxLength,example:se.example,uniqueId:`${fe}-${et.cca2}`}}).sort((et,fe)=>et.name.localeCompare(fe.name));le(Be),Ve(Be)}catch(je){console.error("Error fetching countries:",je);const Ie=[{code:"+1",country:"US",name:"United States",flag:"",flagUrl:"https://flagcdn.com/w40/us.png",pattern:/^\d{10}$/,minLength:10,maxLength:10,example:"1234567890",uniqueId:"+1-US"},{code:"+91",country:"IN",name:"India",flag:"",flagUrl:"https://flagcdn.com/w40/in.png",pattern:/^[6-9]\d{9}$/,minLength:10,maxLength:10,example:"9876543210",uniqueId:"+91-IN"},{code:"+44",country:"GB",name:"United Kingdom",flag:"",flagUrl:"https://flagcdn.com/w40/gb.png",pattern:/^[1-9]\d{9,10}$/,minLength:10,maxLength:11,example:"7123456789",uniqueId:"+44-GB"}];le(Ie),Ve(Ie)}finally{K(!1)}})()},[]),y.useEffect(()=>{if(!ne.length){Ve([]);return}if(!F||F.trim()===""){Ve(ne);return}const re=F.toLowerCase().trim(),je=ne.filter(Ie=>Ie.name.toLowerCase().includes(re)||Ie.code.toLowerCase().includes(re)||Ie.country.toLowerCase().includes(re));Ve(je)},[F,ne]),y.useEffect(()=>{const re=je=>{q.current&&!q.current.contains(je.target)&&Q(!1)};return W&&document.addEventListener("mousedown",re),()=>{document.removeEventListener("mousedown",re)}},[W]);const Ce=re=>{const{name:je,value:Ie}=re.target;l(Be=>({...Be,[je]:Ie})),d[je]&&m(Be=>({...Be,[je]:void 0})),d.general&&m(Be=>({...Be,general:void 0}))},A=()=>{const re={};if(n.email?/\S+@\S+\.\S+/.test(n.email)||(re.email="Please enter a valid email address"):re.email="Email is required",n.password||(re.password="Password is required"),m(re),Object.keys(re).length>0){const je=Object.keys(re)[0];ka(je,je)}return Object.keys(re).length===0},G=async()=>{if(!w.email.trim()){T({email:"Email is required"});return}if(!/\S+@\S+\.\S+/.test(w.email)){T({email:"Please enter a valid email address"});return}L(!0),T({});try{const re=await fetch(`${Ae}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.email.trim()})}),je=await re.json();if(!re.ok){L(!1),re.status===404?T({email:je.message||"No account found with this email address. Please check and try again."}):T({general:je.message||"Failed to send OTP. Please try again."});return}k(w.email.trim()),v("otp"),L(!1)}catch(re){console.error("Error sending OTP:",re),L(!1),T({general:"Network error. Please try again."})}},ie=async()=>{if(!w.otp||w.otp.length!==6){T({otp:"Please enter a valid 6-digit OTP"});return}B(!0),T({});try{const re=await fetch(`${Ae}/auth/verify-otp-password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.email.trim(),otp:w.otp})}),je=await re.json();if(!re.ok){B(!1),T({otp:je.message||"Invalid OTP. Please try again."});return}v("newPassword"),B(!1)}catch(re){console.error("Error verifying OTP:",re),B(!1),T({general:"Network error. Please try again."})}},Re=async()=>{const re={};if(w.newPassword?w.newPassword.length<6&&(re.newPassword="Password must be at least 6 characters"):re.newPassword="New password is required",w.confirmPassword?w.newPassword!==w.confirmPassword&&(re.confirmPassword="Passwords do not match"):re.confirmPassword="Please confirm your password",Object.keys(re).length>0){T(re);return}U(!0),T({});try{const je=await fetch(`${Ae}/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.email.trim(),otp:w.otp,newPassword:w.newPassword})}),Ie=await je.json();if(!je.ok){U(!1),T({general:Ie.message||"Failed to reset password. Please try again."});return}f(!1),v("email"),D({email:"",otp:"",newPassword:"",confirmPassword:""}),T({}),k(""),alert("Password reset successfully! You can now login with your new password.")}catch(je){console.error("Error resetting password:",je),U(!1),T({general:"Network error. Please try again."})}},ge=async re=>{if(re.preventDefault(),!!A()){p(!0);try{const je=await fetch(`${Ae}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:n.email,password:n.password})}),Ie=await je.text();if(Ie.startsWith("<!DOCTYPE")||Ie.startsWith("<html"))throw new Error("Server returned HTML instead of JSON. Please check your server configuration.");const Be=JSON.parse(Ie);if(!je.ok){m({general:Be.message||"Login failed. Please check credentials."});return}localStorage.setItem("token",Be.token),localStorage.setItem("user",JSON.stringify(Be.user)),Be.user.role==="admin"?s("/admin/dashboard"):Be.user.role==="emp"?s("/employee/dashboard"):s("/")}catch(je){console.error("Login error:",je),m({general:"Network error. Please check if the server is running."})}finally{p(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-96 h-96 bg-cream-200 rounded-full blur-3xl opacity-40 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-5%] w-96 h-96 bg-cream-300 rounded-full blur-3xl opacity-40 pointer-events-none"}),e.jsx("div",{className:"absolute top-4 left-4 z-20",children:e.jsx(kr,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl w-full space-y-6 sm:space-y-8 bg-white p-6 sm:p-8 md:p-10 rounded-2xl sm:rounded-3xl shadow-xl border border-cream-100 relative z-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-cream-900",children:"Welcome Back"}),e.jsx("p",{className:"mt-2 text-xs sm:text-sm text-cream-600",children:"Sign in to manage your prints and orders"})]}),de&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(bs,{size:16}),de]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:ge,children:[d.general&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-100 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(bs,{size:16}),d.general]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-cream-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(uo,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",value:n.email,onChange:Ce,className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${d.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter your email address"})]}),d.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-cream-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Td,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{id:"password",name:"password",type:"password",value:n.password,onChange:Ce,className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${d.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter your password"})]}),d.password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.password})]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("div",{className:"text-xs",children:e.jsx("button",{type:"button",onClick:()=>{f(!0),v("email"),D({email:"",otp:"",newPassword:"",confirmPassword:""}),T({}),k("")},className:"font-medium text-cream-900 hover:text-cream-700 hover:underline",children:"Forgot your password?"})})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed",children:u?e.jsx(Qt,{className:"animate-spin h-5 w-5"}):e.jsxs(e.Fragment,{children:["Sign in",e.jsx(Yr,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]})})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-cream-600",children:["Don't have an account?"," ",e.jsx(ys,{to:"/signup",className:"font-bold text-cream-900 hover:text-cream-700 underline transition-colors",children:"Sign Up"})]})})]}),e.jsx(ca,{children:b&&e.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:()=>{!$&&!M&&!ce&&f(!1)},children:e.jsxs(st.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:re=>re.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 sm:p-8 relative",children:[!$&&!M&&!ce&&e.jsx("button",{onClick:()=>f(!1),className:"absolute top-4 right-4 text-cream-400 hover:text-cream-900 transition-colors",children:e.jsx(as,{className:"h-5 w-5"})}),j==="email"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-cream-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(uo,{className:"h-8 w-8 text-cream-900"})}),e.jsx("h3",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-sm text-cream-600",children:"Enter your email address to receive a verification code"})]}),P.general&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(bs,{size:16}),P.general]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(uo,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"email",value:w.email,onChange:re=>{D({...w,email:re.target.value}),T({...P,email:void 0})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${P.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter your email address"})]}),P.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:P.email})]}),e.jsx("button",{onClick:G,disabled:$||!w.email,className:"w-full bg-cream-900 text-cream-50 py-3 px-4 rounded-xl font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:$?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin h-5 w-5"}),"Sending OTP..."]}):e.jsxs(e.Fragment,{children:["Send OTP",e.jsx(Yr,{className:"h-5 w-5"})]})})]})]}),j==="otp"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ga,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Verify OTP"}),e.jsx("p",{className:"text-sm text-cream-600 mb-2",children:"We've sent a 6-digit code to:"}),e.jsx("p",{className:"text-lg font-semibold text-cream-900 mb-6",children:O})]}),P.otp&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(bs,{size:16}),P.otp]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-2",children:"Enter OTP"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:w.otp,onChange:re=>{const je=re.target.value.replace(/\D/g,"").slice(0,6);D({...w,otp:je}),T({...P,otp:void 0})},className:`w-full px-4 py-3 border-2 ${P.otp?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} rounded-xl focus:outline-none focus:ring-2 text-center text-3xl font-bold tracking-widest bg-cream-50`,placeholder:"------",maxLength:6,autoFocus:!0,autoComplete:"one-time-code"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:ie,disabled:M||w.otp.length!==6,className:"flex-1 bg-cream-900 text-cream-50 py-3 px-4 rounded-xl font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin h-5 w-5"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:["Verify OTP",e.jsx(Yr,{className:"h-5 w-5"})]})}),e.jsx("button",{onClick:G,disabled:$||M,className:"px-4 py-3 bg-cream-100 text-cream-900 rounded-xl font-medium hover:bg-cream-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:$?"Sending...":"Resend"})]}),e.jsx("button",{onClick:()=>{v("email"),D({...w,otp:""}),T({})},className:"w-full text-sm text-cream-600 hover:text-cream-900 underline",children:"Change email address"})]})]}),j==="newPassword"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Td,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-cream-900 mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-sm text-cream-600",children:"Enter your new password below"})]}),P.general&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(bs,{size:16}),P.general]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:w.newPassword,onChange:re=>{D({...w,newPassword:re.target.value}),T({...P,newPassword:void 0})},className:`w-full px-3 py-2 border ${P.newPassword?"border-red-300 focus:ring-red-500":"border-cream-200 focus:ring-cream-900"} rounded-lg focus:outline-none focus:ring-2 text-sm`,placeholder:"Enter new password (min 6 characters)",autoFocus:!0}),P.newPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:P.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",value:w.confirmPassword,onChange:re=>{D({...w,confirmPassword:re.target.value}),T({...P,confirmPassword:void 0})},className:`w-full px-3 py-2 border ${P.confirmPassword?"border-red-300 focus:ring-red-500":"border-cream-200 focus:ring-cream-900"} rounded-lg focus:outline-none focus:ring-2 text-sm`,placeholder:"Confirm new password"}),P.confirmPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:P.confirmPassword})]}),e.jsx("button",{onClick:Re,disabled:ce||!w.newPassword||!w.confirmPassword,className:"w-full bg-cream-900 text-cream-50 py-3 px-4 rounded-xl font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ce?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin h-5 w-5"}),"Resetting Password..."]}):e.jsxs(e.Fragment,{children:["Reset Password",e.jsx(ga,{className:"h-5 w-5"})]})})]})]})]})})})]})},WE=y.lazy(()=>Ud(()=>import("./EmailVerification-DzLZQY8C.js"),[])),ZE=y.lazy(()=>Ud(()=>import("./CorporateForm-K-42vOtE.js"),[])),JE=y.lazy(()=>Ud(()=>import("./PrintPartnerForm-D3UWcejc.js"),[])),KE=()=>{const s=ar(),[r,n]=y.useState("role-selection"),[l,d]=y.useState(""),[m,u]=y.useState(""),[p,b]=y.useState(""),[f,j]=y.useState(""),[v,w]=y.useState({}),[D,P]=y.useState(!1),T=[{id:"CUSTOMER",title:"Personal / Customer",description:"For individual printing needs",icon:Ji,color:"bg-blue-50 hover:bg-blue-100 border-blue-200"},{id:"PRINT_PARTNER",title:"Print Partner",description:"Join as a printing service provider",icon:Ad,color:"bg-purple-50 hover:bg-purple-100 border-purple-200"},{id:"CORPORATE",title:"Corporate Member",description:"For businesses and organizations",icon:ki,color:"bg-green-50 hover:bg-green-100 border-green-200"}],$=O=>{d(O),n("email-entry")},L=async O=>{if(O.preventDefault(),!m.trim()||!/\S+@\S+\.\S+/.test(m)){w({email:"Please enter a valid email address"});return}w({}),n("email-verification")},M=()=>{n(l==="CUSTOMER"?"password-setup":"business-details")},B=async O=>{O.preventDefault();const k={};if((!p||p.length<6)&&(k.password="Password must be at least 6 characters"),p!==f&&(k.confirmPassword="Passwords do not match"),Object.keys(k).length>0){w(k);return}P(!0),w({});try{const W=await fetch("http://localhost:5000/api/auth/complete-customer-signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,password:p})}),Q=await W.json();if(!W.ok){w({general:Q.message||"Signup failed"}),P(!1);return}Q.token&&Q.user?(localStorage.setItem("token",Q.token),localStorage.setItem("user",JSON.stringify(Q.user)),s("/")):n("success"),P(!1)}catch{w({general:"Server error. Please try again."}),P(!1)}},ce=()=>{n("success")},U=()=>{r==="email-entry"?(n("role-selection"),d("")):r==="email-verification"?n("email-entry"):(r==="password-setup"||r==="business-details")&&n("email-verification")};return e.jsx("div",{className:"min-h-screen bg-linear-to-br from-cream-50 via-white to-cream-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[r!=="role-selection"&&r!=="success"&&e.jsxs("button",{onClick:U,className:"mb-6 flex items-center gap-2 text-cream-600 hover:text-cream-900 transition-colors",children:[e.jsx(Cd,{className:"h-5 w-5"}),"Back"]}),e.jsxs(ca,{mode:"wait",children:[r==="role-selection"&&e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[e.jsx("h1",{className:"font-serif text-3xl sm:text-4xl font-bold text-cream-900 mb-4",children:"Join Prints24"}),e.jsx("p",{className:"text-cream-600 mb-12",children:"Choose how you'd like to sign up"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:T.map(O=>{const k=O.icon;return e.jsxs(st.button,{onClick:()=>$(O.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-6 rounded-2xl border-2 ${O.color} transition-all text-left`,children:[e.jsx(k,{className:"h-12 w-12 mb-4 text-cream-900"}),e.jsx("h3",{className:"font-semibold text-lg text-cream-900 mb-2",children:O.title}),e.jsx("p",{className:"text-sm text-cream-600",children:O.description})]},O.id)})})]},"role-selection"),r==="email-entry"&&e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-2",children:"Enter Your Email"}),e.jsx("p",{className:"text-cream-600 mb-6",children:"We'll send you a verification code"}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(uo,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"email",value:m,onChange:O=>{u(O.target.value),w({})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${v.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"your@email.com",autoFocus:!0})]}),v.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:v.email})]}),e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:"Continue"})]})]})},"email-entry"),r==="email-verification"&&e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-2xl shadow-xl p-8",children:e.jsx(y.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Qt,{className:"h-8 w-8 animate-spin text-cream-900"})}),children:e.jsx(WE,{email:m,onVerified:M,onBack:U})})},"email-verification"),r==="password-setup"&&e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-2",children:"Create Your Password"}),e.jsx("p",{className:"text-cream-600 mb-6",children:"Secure your account with a strong password"}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Td,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"password",value:p,onChange:O=>{b(O.target.value),w({})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${v.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Enter password"})]}),v.password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:v.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-700 mb-1",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Td,{className:"h-5 w-5 text-cream-400"})}),e.jsx("input",{type:"password",value:f,onChange:O=>{j(O.target.value),w({})},className:`appearance-none relative block w-full px-3 py-3 pl-10 border ${v.confirmPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-cream-200 focus:ring-cream-900 focus:border-cream-900"} placeholder-cream-300 text-cream-900 rounded-xl focus:outline-none focus:ring-1 sm:text-sm transition-all`,placeholder:"Confirm password"})]}),v.confirmPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:v.confirmPassword})]}),v.general&&e.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(bs,{size:16}),v.general]}),e.jsx("button",{type:"submit",disabled:D,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin h-5 w-5 mr-2"}),"Creating Account..."]}):"Complete Signup"})]})]})},"password-setup"),r==="business-details"&&e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-2xl shadow-xl p-8",children:e.jsx(y.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Qt,{className:"h-8 w-8 animate-spin text-cream-900"})}),children:l==="CORPORATE"?e.jsx(ZE,{onBack:U,onSuccess:ce}):e.jsx(JE,{onBack:U})})},"business-details"),r==="success"&&e.jsx(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md mx-auto text-center",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"font-serif text-2xl font-bold text-cream-900 mb-2",children:l==="CUSTOMER"?"Welcome to Prints24!":"Application Submitted!"}),e.jsx("p",{className:"text-cream-600 mb-6",children:l==="CUSTOMER"?"Your account has been created successfully. You can now login and start ordering.":"Your application has been submitted for review. We will notify you once approved."}),e.jsx("button",{onClick:()=>s("/login"),className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-cream-50 bg-cream-900 hover:bg-cream-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cream-500 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:l==="CUSTOMER"?"Go to Login":"Return to Home"})]})},"success")]})]})})},XE=()=>{ar();const s=Hd(),[r,n]=y.useState([]),[l,d]=y.useState(!0),[m,u]=y.useState(!1),[p,b]=y.useState({rating:5,comment:"",userName:""}),[f,j]=y.useState(!1),[v,w]=y.useState(null),[D,P]=y.useState("newest"),[T,$]=y.useState({type:null,text:""});y.useEffect(()=>{const O=localStorage.getItem("token"),k=localStorage.getItem("user");if(u(!!O),O&&k)try{const W=JSON.parse(k);b(Q=>({...Q,userName:W.name||""}))}catch(W){console.error("Error parsing user data:",W)}},[]),y.useEffect(()=>{(async()=>{try{d(!0);const k=Ae,W={Accept:"application/json"},Q=await fetch(`${k}/reviews`,{method:"GET",headers:W});if(!Q.ok)throw new Error(`HTTP ${Q.status}`);const ne=await Q.json();n(ne)}catch(k){console.error("Fetch reviews error:",k)}finally{d(!1)}})()},[]);const L=async O=>{O.preventDefault();const k=[];if(p.userName.trim()||(k.push("Please enter your name"),ka("userName","userName")),p.comment.trim()||(k.push("Please enter a comment"),k.length===1&&ka("comment","comment")),k.length>0){$({type:"error",text:k.join(". ")}),setTimeout(()=>$({type:null,text:""}),5e3);return}try{j(!0),$({type:null,text:""});const W=Ae,Q=localStorage.getItem("token"),ne={"Content-Type":"application/json"};Q&&(ne.Authorization=`Bearer ${Q}`);const le=await fetch(`${W}/reviews`,{method:"POST",headers:ne,body:JSON.stringify({rating:p.rating,comment:p.comment,userName:p.userName.trim()})});if(!le.ok){const Ve=await le.json();throw new Error(Ve.error||"Failed to submit review")}const me=await le.json();n([me.review,...r]),b({rating:5,comment:"",userName:m?p.userName:""}),$({type:"success",text:"Review submitted successfully!"}),setTimeout(()=>$({type:null,text:""}),3e3)}catch(W){console.error("Submit review error:",W),$({type:"error",text:W instanceof Error?W.message:"Failed to submit review"}),setTimeout(()=>$({type:null,text:""}),3e3)}finally{j(!1)}},B=[...r.filter(O=>!(v&&O.rating!==v))].sort((O,k)=>{if(D==="highestRating")return k.rating!==O.rating?k.rating-O.rating:new Date(k.createdAt).getTime()-new Date(O.createdAt).getTime();if(D==="lowestRating")return O.rating!==k.rating?O.rating-k.rating:new Date(k.createdAt).getTime()-new Date(O.createdAt).getTime();{const W=new Date(O.createdAt).getTime(),Q=new Date(k.createdAt).getTime();return D==="newest"?Q-W:D==="oldest"?W-Q:Q-W}}),ce=r.length,U=ce>0?r.reduce((O,k)=>O+k.rating,0)/ce:0;return e.jsx("div",{className:"min-h-screen bg-cream-50 py-6 sm:py-12",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx(kr,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900"})}),e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-cream-900 mb-3 sm:mb-4",children:"Customer Reviews"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600 max-w-xl mx-auto mb-4 sm:mb-6",children:"Share your experience and see what others have to say about Prints24."}),ce>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 sm:gap-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Total Reviews"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-cream-900",children:ce})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl shadow-md border border-cream-200",children:[e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 mb-1",children:"Average Rating"}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(O=>e.jsx(Ki,{size:16,className:`sm:w-5 sm:h-5 ${O<=Math.round(U)?"fill-yellow-400 text-yellow-400":"text-cream-300"}`},O))}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-cream-900",children:U.toFixed(1)})]})]})]})]}),e.jsx("div",{className:"max-w-2xl mx-auto mb-8 sm:mb-12",children:e.jsxs("div",{className:"bg-white p-4 sm:p-6 md:p-8 rounded-xl sm:rounded-2xl shadow-lg border border-cream-200",children:[e.jsx("h2",{className:"font-serif text-xl sm:text-2xl font-bold text-cream-900 mb-4 sm:mb-6",children:"Write a Review"}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Your Name *"}),e.jsx("input",{id:"userName",name:"userName",type:"text",value:p.userName,onChange:O=>b({...p,userName:O.target.value}),className:"w-full p-4 border border-cream-300 rounded-xl focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none",placeholder:"Enter your name",required:!0,disabled:m}),m&&e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"Your name is pre-filled from your account"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(O=>e.jsx("button",{type:"button",onClick:()=>b({...p,rating:O}),className:"focus:outline-none",children:e.jsx(Ki,{size:24,className:`sm:w-8 sm:h-8 ${O<=p.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"} transition-colors`})},O))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Your Review *"}),e.jsx("textarea",{id:"comment",name:"comment",value:p.comment,onChange:O=>b({...p,comment:O.target.value}),rows:4,className:"w-full p-4 border border-cream-300 rounded-xl focus:ring-2 focus:ring-cream-900 focus:border-transparent outline-none resize-none",placeholder:"Share your experience...",required:!0})]}),T.type&&e.jsx("div",{className:`mb-4 p-3 rounded-lg ${T.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:T.text}),e.jsxs("button",{type:"submit",disabled:f,className:"bg-cream-900 text-cream-50 px-8 py-3 rounded-xl font-medium hover:bg-cream-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(m3,{size:18}),f?"Submitting...":"Submit Review"]})]})]})}),e.jsx("div",{className:"max-w-6xl mx-auto mb-8",children:e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-cream-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yj,{size:20,className:"text-cream-600"}),e.jsx("span",{className:"font-medium text-cream-900",children:"Filters:"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-cream-700",children:"Rating:"}),e.jsx(Ca,{label:"All Ratings",value:v,onChange:O=>w(O),options:[{value:null,label:"All Ratings"},{value:5,label:"5 Stars"},{value:4,label:"4 Stars"},{value:3,label:"3 Stars"},{value:2,label:"2 Stars"},{value:1,label:"1 Star"}]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-cream-700",children:"Sort by:"}),e.jsx(Ca,{label:"Newest First",value:D,onChange:O=>P(O),options:[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"highestRating",label:"Highest Rating"},{value:"lowestRating",label:"Lowest Rating"}]})]}),(v||D!=="newest")&&e.jsxs("button",{onClick:()=>{w(null),P("newest")},className:"ml-auto flex items-center gap-2 px-4 py-2 text-sm text-cream-700 hover:text-cream-900 border border-cream-300 rounded-lg hover:bg-cream-50 transition-colors",children:[e.jsx(as,{size:16}),"Clear Filters"]})]})})}),l?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:"Loading reviews..."})}):B.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-cream-600",children:v?`No reviews found with ${v} star rating.`:"No reviews yet. Be the first to review!"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:B.map(O=>e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-2xl shadow-md border border-cream-100 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-cream-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-cream-900 font-bold text-lg",children:O.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-cream-900",children:O.userName}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(k=>e.jsx(Ki,{size:14,className:k<=O.rating?"fill-yellow-400 text-yellow-400":"text-cream-300"},k))})]})]}),e.jsx("p",{className:"text-cream-700 leading-relaxed mb-4",children:O.comment}),e.jsx("p",{className:"text-xs text-cream-500",children:s?new Date(O.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading..."})]},O._id))})]})})},Ws=s=>`${s.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,xx=s=>{var M,B,ce,U,O,k;const r=s.product.basePrice||0,n=s.quantity||0,l=s.product.gstPercentage||18;let d=1;if(((B=(M=s.product.filters)==null?void 0:M.orderQuantity)==null?void 0:B.quantityType)==="RANGE_WISE"&&s.product.filters.orderQuantity.rangeWiseQuantities&&s.product.filters.orderQuantity.rangeWiseQuantities.length>0){const W=s.product.filters.orderQuantity.rangeWiseQuantities.find(Q=>n>=Q.min&&(Q.max===null||Q.max===void 0||n<=Q.max));W&&(d=W.priceMultiplier||1)}const u=r*d*n,p=[];if(s.selectedOptions&&s.selectedOptions.length>0&&s.selectedOptions.forEach(W=>{if(typeof W=="string")return;const Q=W.name||W.optionName||"Option",ne=W.priceAdd||0,le=ne<10,me=le?ne*n:ne;p.push({name:Q,priceAdd:ne,cost:me,isPerUnit:le})}),s.finish&&((ce=s.product.filters)!=null&&ce.filterPricesEnabled)){const W=(U=s.product.filters.printingOptionPrices)==null?void 0:U.find(Q=>Q.name===s.finish);if(W&&W.priceAdd!==0){const Q=W.priceAdd/1e3*n;p.push({name:`Printing: ${s.finish}`,priceAdd:W.priceAdd/1e3,cost:Q,isPerUnit:!0})}}if(s.shape&&((O=s.product.filters)!=null&&O.filterPricesEnabled)){const W=(k=s.product.filters.deliverySpeedPrices)==null?void 0:k.find(Q=>Q.name===s.shape);if(W&&W.priceAdd!==0){const Q=W.priceAdd/1e3*n;p.push({name:`Delivery: ${s.shape}`,priceAdd:W.priceAdd/1e3,cost:Q,isPerUnit:!0})}}s.selectedDynamicAttributes&&s.selectedDynamicAttributes.length>0&&s.selectedDynamicAttributes.forEach(W=>{if(W.priceMultiplier&&W.priceMultiplier!==1){const Q=W.priceMultiplier-1,ne=r*Q,le=ne*n;p.push({name:`${W.attributeName}: ${W.label}`,priceAdd:ne,cost:le,isPerUnit:!0})}else if(W.priceAdd&&W.priceAdd>0){const Q=W.priceAdd*n;p.push({name:`${W.attributeName}: ${W.label}`,priceAdd:W.priceAdd,cost:Q,isPerUnit:!0})}});const b=p.reduce((W,Q)=>W+Q.cost,0),f=u+b;let j=0,v=1,w=u;if(s.product.quantityDiscounts&&Array.isArray(s.product.quantityDiscounts)&&s.product.quantityDiscounts.length>0){const W=s.product.quantityDiscounts.find(Q=>{const ne=Q.minQuantity||0,le=Q.maxQuantity;return n>=ne&&(le==null||n<=le)});W&&(W.priceMultiplier?v=W.priceMultiplier:W.discountPercentage&&(v=(100-W.discountPercentage)/100),j=W.discountPercentage||0,w=u*v)}else n>=1e4?(j=70,v=.3,w=u*.3):n>=1e3?(j=50,v=.5,w=u*.5):n>=500&&(j=10,v=.9,w=u*.9);const D=f*v,P=f-D,T=D*l/100,$=D+T,L=D+T;return{rawBaseTotal:u,discountedBaseTotal:w,discountPercentage:j,optionBreakdowns:p,subtotal:D,gstAmount:T,finalTotal:L,subtotalBeforeGst:f,subtotalAfterDiscount:D,totalBeforeDiscount:$,discountAmount:P}},Sr=s=>`${s.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,eT=({subcategory:s})=>{const[r,n]=y.useState(!1),l=typeof s=="object"?s==null?void 0:s.image:null;return l&&!r?e.jsx("img",{src:l,alt:typeof s=="object"?s.name:"Subcategory",className:"w-24 h-24 object-cover rounded-lg group-hover:scale-105 transition-transform duration-300 shadow-sm",onError:()=>n(!0)}):e.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-lg flex items-center justify-center text-slate-300 group-hover:scale-105 transition-transform duration-300",children:e.jsx(qj,{className:"w-8 h-8"})})},fj=({orders:s,onSelectOrder:r})=>{const n=Hd(),[l,d]=y.useState(new Set),m=(u,p)=>{p.stopPropagation(),d(b=>{const f=new Set(b);return f.has(u)?f.delete(u):f.add(u),f})};return e.jsx("div",{className:"space-y-4",children:s.map(u=>{var Q,ne,le,me,Ve,F,J,I,K,q,de,Ce,A;const p=u.status==="completed",b=u.status==="processing"||u.status==="approved"||u.status==="production_ready",f=u.status==="request",j=u.departmentStatuses||[],v=j.length,w=j.filter(G=>G&&typeof G=="object"&&G.status?G.status==="completed":!1).length;let D=0;v>0?D=Math.round(w/v*100):p?D=100:b&&(D=0);const P=!f,T=l.has(u._id),$={quantity:u.quantity,product:{basePrice:((Q=u.product)==null?void 0:Q.basePrice)||0,gstPercentage:((ne=u.product)==null?void 0:ne.gstPercentage)||18,options:((le=u.product)==null?void 0:le.options)||[],filters:((me=u.product)==null?void 0:me.filters)||{},quantityDiscounts:((Ve=u.product)==null?void 0:Ve.quantityDiscounts)||[]},finish:u.finish,shape:u.shape,selectedOptions:(u.selectedOptions||[]).map(G=>({name:typeof G=="string"?G:G.optionName||G.name||"",optionName:typeof G=="string"?G:G.optionName||G.name||"",priceAdd:typeof G=="string"?0:G.priceAdd||0})),selectedDynamicAttributes:(F=u.selectedDynamicAttributes)==null?void 0:F.map(G=>({attributeName:G.attributeName,label:G.label,priceMultiplier:G.priceMultiplier,priceAdd:G.priceAdd}))},L=xx($),M=((J=u.product)==null?void 0:J.additionalDesignCharge)||0,B=L.subtotalBeforeGst||L.rawBaseTotal+L.optionBreakdowns.reduce((G,ie)=>G+ie.cost,0),ce=L.subtotalAfterDiscount||L.subtotal||B,U=L.discountAmount||B-ce,O=ce+M,k=O*(((I=u.product)==null?void 0:I.gstPercentage)||18)/100,W=u.totalPrice;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md hover:border-brand-300 transition-all duration-200 overflow-hidden group",children:[e.jsxs("div",{className:"p-6 flex flex-col md:flex-row md:items-center gap-6",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(eT,{subcategory:(K=u.product)==null?void 0:K.subcategory})}),e.jsxs("div",{className:"flex-1 min-w-0 self-start md:self-center",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-mono font-medium text-slate-500 bg-slate-100 px-2 py-0.5 rounded",children:u.orderNumber}),e.jsx("span",{className:"text-xs text-slate-400",children:n?new Date(u.createdAt).toLocaleDateString():"Loading..."})]}),((q=u.product)==null?void 0:q.subcategory)&&e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600 mb-0.5",children:typeof u.product.subcategory=="object"?u.product.subcategory.category?`${u.product.subcategory.category.name}  ${u.product.subcategory.name}`:u.product.subcategory.name:u.product.subcategory}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 truncate pr-4",children:((de=u.product)==null?void 0:de.name)||"Product"}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[u.quantity.toLocaleString()," units  ",u.finish]})]}),e.jsxs("div",{className:"flex flex-col md:items-end gap-2 md:w-64 pt-4 md:pt-0 border-t md:border-t-0 border-slate-100 mt-4 md:mt-0",children:[e.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 w-full",children:[e.jsx("span",{className:"text-lg font-bold text-slate-900",children:Sr(u.totalPrice)}),e.jsx("div",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${p?"bg-green-50 text-green-700 border-green-200":b?"bg-orange-50 text-orange-700 border-orange-200":"bg-slate-100 text-slate-600 border-slate-200"}`,children:u.status.replace("_"," ").toUpperCase()})]}),f?e.jsxs("div",{className:"flex items-center justify-end text-red-600 text-sm font-medium gap-1.5 animate-pulse w-full",children:[e.jsx(bs,{className:"w-4 h-4"}),"Payment Required"]}):P?e.jsxs("div",{className:"w-full md:max-w-[200px] group/progress cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1.5",children:[e.jsx("span",{children:"Production Progress"}),e.jsxs("span",{className:"font-semibold text-slate-700",children:[D,"%"]})]}),e.jsx("div",{className:"h-2.5 bg-slate-100 rounded-full overflow-hidden relative group-hover/progress:bg-slate-200 transition-colors",children:e.jsx("div",{className:"h-full bg-green-400 group-hover/progress:bg-green-300 rounded-full transition-all duration-300 ease-out shadow-sm group-hover/progress:shadow-md",style:{width:`${Math.max(0,Math.min(100,D))}%`,minWidth:D>0?"4px":"0px"}})}),v>0?e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1.5",children:[w," of ",v," departments completed"]}):p?e.jsx("p",{className:"text-[10px] text-green-600 mt-1.5 font-medium",children:"Order completed"}):e.jsx("p",{className:"text-[10px] text-slate-400 mt-1.5",children:"Production starting..."})]}):e.jsx("div",{className:"w-full md:max-w-[200px]",children:e.jsx("p",{className:"text-xs text-slate-400",children:"Waiting for production to start"})})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsxs("button",{onClick:G=>m(u._id,G),className:"text-xs text-slate-500 hover:text-brand-600 font-medium px-3 py-1.5 rounded-md hover:bg-slate-50 transition-colors",children:[T?"Hide":"Show"," Breakdown"]}),e.jsx("div",{className:"text-slate-300 group-hover:text-brand-500 transition-colors",children:e.jsx(Yr,{className:"w-6 h-6"})})]})]}),T&&e.jsx("div",{className:"border-t border-slate-200 bg-slate-50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Ll,{size:18}),"Price Breakdown"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-slate-100",children:[e.jsx("div",{className:"text-slate-600",children:e.jsxs("span",{children:["Base Price (",u.quantity.toLocaleString()," "," ",Sr(((Ce=u.product)==null?void 0:Ce.basePrice)||0),")"]})}),e.jsx("span",{className:"font-medium text-slate-900",children:Sr(L.rawBaseTotal)})]}),L.optionBreakdowns.map((G,ie)=>e.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[e.jsxs("span",{children:[G.name," ",G.isPerUnit?`(${u.quantity}  ${Sr(G.priceAdd)})`:""]}),e.jsxs("span",{children:["+",Sr(G.cost)]})]},ie)),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (Before Discount)"}),e.jsx("span",{children:Sr(B)})]}),L.discountPercentage>0&&U>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-600 bg-green-50 p-2 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold",children:["Bulk Discount (",L.discountPercentage,"%)"]}),e.jsxs("p",{className:"text-xs opacity-80",children:["Applied for ",u.quantity," units"]})]}),e.jsxs("span",{className:"font-bold",children:["-",Sr(U)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (After Discount)"}),e.jsx("span",{children:Sr(ce)})]}),M>0&&e.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[e.jsx("span",{children:"Additional Design Charge"}),e.jsxs("span",{children:["+",Sr(M)]})]}),M>0&&e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (Including Design Charge)"}),e.jsx("span",{children:Sr(O)})]}),e.jsxs("div",{className:"flex justify-between items-center text-slate-500 text-xs",children:[e.jsxs("span",{children:["GST (",((A=u.product)==null?void 0:A.gstPercentage)||18,"%)"]}),e.jsxs("span",{children:["+",Sr(k)]})]}),u.advancePaid!==void 0&&u.advancePaid>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-slate-500",children:"Advance Paid"}),e.jsx("span",{className:"font-medium text-green-600",children:Sr(u.advancePaid||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500",children:"Balance Due"}),e.jsx("span",{className:`font-bold ${u.totalPrice-(u.advancePaid||0)>0?"text-red-600":"text-slate-400"}`,children:Sr(u.totalPrice-(u.advancePaid||0))})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t-2 border-slate-300",children:[e.jsx("span",{className:"text-lg font-bold text-slate-900",children:"Total Amount"}),e.jsx("span",{className:"text-xl font-bold text-brand-600",children:Sr(W)})]})]})]})}),e.jsx("div",{onClick:()=>r(u),className:"cursor-pointer",children:e.jsxs("div",{className:"px-6 pb-4 md:pb-6 flex items-center justify-between",children:[e.jsxs("button",{className:"text-sm text-brand-600 hover:text-brand-700 font-medium flex items-center gap-1",children:["View Full Details",e.jsx(Yr,{className:"w-4 h-4"})]}),e.jsx("div",{className:"md:hidden",children:e.jsxs("button",{onClick:G=>m(u._id,G),className:"text-xs text-slate-500 hover:text-brand-600 font-medium px-3 py-1.5 rounded-md hover:bg-slate-50 transition-colors",children:[T?"Hide":"Show"," Breakdown"]})})]})})]},u._id)})})},tT=()=>{var $s,Zs,pa,rr,Tt,ha,Vt,xa,Ns,va;const s=ar(),r=Hd(),[n,l]=y.useState(null),[d,m]=y.useState(!0),[u,p]=y.useState([]),[b,f]=y.useState(!1),[j,v]=y.useState("dashboard"),[w,D]=y.useState({}),[P,T]=y.useState(!1),[$,L]=y.useState(""),[M,B]=y.useState(null),[ce,U]=y.useState(null),[O,k]=y.useState(!1),[W,Q]=y.useState(!1),[ne,le]=y.useState({firstName:"",lastName:"",email:"",mobileNumber:"",countryCode:"+91"}),[me,Ve]=y.useState(null),[F,J]=y.useState(null),[I,K]=y.useState(!1),[q,de]=y.useState(!1),[Ce,A]=y.useState(""),[G,ie]=y.useState(""),[Re,ge]=y.useState(!1),[R,re]=y.useState(!1),[je,Ie]=y.useState(""),[Be,et]=y.useState(""),[fe,se]=y.useState(""),[te,be]=y.useState(!1);y.useEffect(()=>{const qe=localStorage.getItem("token"),ft=localStorage.getItem("user");if(!qe||!ft){s("/login");return}try{const xt=JSON.parse(ft);l(xt),m(!1),xt.countryCode&&at(xt.countryCode),We(),Xt()}catch(xt){console.error("Error parsing user data:",xt),s("/login")}},[s]);const We=async()=>{var qe;try{const ft=await fetch(`${Ae}/auth/profile`,{headers:At()});if(ft.ok){const xt=await ft.json();xt.success&&xt.user&&(console.log("Fetched user profile data:",xt.user),console.log("User type:",xt.user.userType),console.log("Profile data:",xt.user.profile),console.log("Approval status:",xt.user.approvalStatus),l(xt.user),localStorage.setItem("user",JSON.stringify(xt.user)),le({firstName:xt.user.firstName||"",lastName:xt.user.lastName||"",email:xt.user.email||"",mobileNumber:((qe=xt.user.mobileNumber)==null?void 0:qe.replace(xt.user.countryCode||"",""))||"",countryCode:xt.user.countryCode||"+91"}),xt.user.countryCode?(be(!1),at(xt.user.countryCode)):be(!0))}}catch(ft){console.error("Error fetching profile:",ft)}},at=async qe=>{var Ps,Qs;if(!qe){be(!0);return}const ft={"+1":{name:"United States",code:"us"},"+91":{name:"India",code:"in"},"+44":{name:"United Kingdom",code:"gb"},"+55":{name:"Brazil",code:"br"},"+61":{name:"Australia",code:"au"},"+971":{name:"United Arab Emirates",code:"ae"},"+86":{name:"China",code:"cn"},"+81":{name:"Japan",code:"jp"},"+49":{name:"Germany",code:"de"},"+33":{name:"France",code:"fr"},"+7":{name:"Russia",code:"ru"},"+65":{name:"Singapore",code:"sg"},"+60":{name:"Malaysia",code:"my"},"+66":{name:"Thailand",code:"th"},"+82":{name:"South Korea",code:"kr"},"+39":{name:"Italy",code:"it"},"+34":{name:"Spain",code:"es"},"+31":{name:"Netherlands",code:"nl"},"+32":{name:"Belgium",code:"be"},"+41":{name:"Switzerland",code:"ch"},"+46":{name:"Sweden",code:"se"},"+47":{name:"Norway",code:"no"},"+45":{name:"Denmark",code:"dk"},"+358":{name:"Finland",code:"fi"},"+48":{name:"Poland",code:"pl"},"+351":{name:"Portugal",code:"pt"},"+30":{name:"Greece",code:"gr"},"+27":{name:"South Africa",code:"za"},"+20":{name:"Egypt",code:"eg"},"+52":{name:"Mexico",code:"mx"},"+54":{name:"Argentina",code:"ar"},"+56":{name:"Chile",code:"cl"},"+57":{name:"Colombia",code:"co"},"+51":{name:"Peru",code:"pe"},"+92":{name:"Pakistan",code:"pk"},"+880":{name:"Bangladesh",code:"bd"},"+94":{name:"Sri Lanka",code:"lk"},"+95":{name:"Myanmar",code:"mm"},"+84":{name:"Vietnam",code:"vn"},"+62":{name:"Indonesia",code:"id"},"+63":{name:"Philippines",code:"ph"},"+64":{name:"New Zealand",code:"nz"},"+246":{name:"British Indian Ocean Territory",code:"io"}};if(ft[qe]){et(ft[qe].name),se(`https://flagcdn.com/w40/${ft[qe].code}.png`),be(!0);return}const xt=new AbortController;try{const Js=qe.replace("+",""),Ms=await fetch(`https://restcountries.com/v3.1/callingcode/${Js}`,{signal:xt.signal});if(!Ms.ok){et(""),se(""),be(!0);return}const ra=await Ms.json();if(ra&&Array.isArray(ra)&&ra.length>0){const Pa=ra[0];et(((Ps=Pa.name)==null?void 0:Ps.common)||"");const Ja=((Qs=Pa.cca2)==null?void 0:Qs.toLowerCase())||"";se(Ja?`https://flagcdn.com/w40/${Ja}.png`:""),be(!0);return}et(""),se(""),be(!0)}catch(Js){Js.name==="AbortError"||Js instanceof TypeError&&Js.message.includes("fetch")?(et(""),se(""),be(!0)):Js.name!=="AbortError"&&(console.warn("Error fetching country name:",Js),et(""),se(""),be(!0));const Ms=ft[qe];Ms&&(et(Ms.name),se(`https://flagcdn.com/w40/${Ms.code}.png`),be(!0))}},_e=(qe,ft)=>{if(!qe)return"";if(!ft)return qe;const xt=ft.replace("+","");let Ps=qe;return qe.startsWith(ft)?Ps=qe.replace(ft,""):qe.startsWith(xt)&&(Ps=qe.replace(xt,"")),`${ft} ${Ps}`};y.useEffect(()=>{n!=null&&n.countryCode?(be(!1),et(""),se(""),at(n.countryCode)):be(!0)},[n==null?void 0:n.countryCode]),y.useEffect(()=>{if(!n)return;const qe=setInterval(()=>{Xt()},15e3);return()=>clearInterval(qe)},[n,u.length]);const At=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}),Xt=async()=>{const qe=u.length===0;qe&&f(!0);try{if(!localStorage.getItem("token")){p([]);return}const xt=await fetch(`${Ae}/orders/my-orders?limit=50`,{method:"GET",headers:{...At(),"Content-Type":"application/json"}}),Ps=await xt.text();if(Ps.startsWith("<!DOCTYPE")||Ps.startsWith("<html")){console.warn("Server returned HTML instead of JSON"),p([]);return}if(!xt.ok)throw new Error("Failed to fetch orders");const Qs=JSON.parse(Ps),Js=Array.isArray(Qs)?Qs:[],Ms={};Js.forEach(ra=>{var Zr,Sn;const Pa=((Zr=ra.departmentStatuses)==null?void 0:Zr.length)||0,Ja=((Sn=ra.departmentStatuses)==null?void 0:Sn.filter(Mi=>(typeof Mi=="object"?Mi.status:null)==="completed").length)||0,ir=Pa>0?Ja/Pa*100:0;w[ra._id]!==ir&&(Ms[ra._id]=ir)}),Object.keys(Ms).length>0&&D(ra=>({...ra,...Ms})),p(Js)}catch(ft){console.error("Error fetching orders:",ft),qe&&p([])}finally{qe&&f(!1)}},Ft=qe=>{s(`/order/${qe._id}`),window.scrollTo(0,0)},As=qe=>qe?qe.split(" ").map(ft=>ft[0]).join("").toUpperCase().slice(0,2):"U",Vs=qe=>{const ft=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-orange-500","bg-teal-500"];if(!qe)return ft[0];const xt=qe.length%ft.length;return ft[xt]},$t=qe=>qe.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(qe.trim())?qe.trim()===(n==null?void 0:n.email)?"New email must be different from current email":qe.trim().length>254?"Email is too long (maximum 254 characters)":qe.includes("..")?"Email cannot contain consecutive dots":qe.startsWith(".")||qe.endsWith(".")?"Email cannot start or end with a dot":qe.includes("@.")||qe.includes(".@")?"Invalid email format":null:"Invalid email format. Please enter a valid email address (e.g., user@example.com)":"Email is required",Bs=async()=>{if(!ne.firstName||!ne.lastName){Ve("First name and last name are required.");return}if(ne.email&&$t(ne.email)){Ve($t(ne.email));return}K(!0),Ve(null),J(null);try{const qe=await fetch(`${Ae}/auth/profile`,{method:"PUT",headers:{"Content-Type":"application/json",...At()},body:JSON.stringify({firstName:ne.firstName.trim(),lastName:ne.lastName.trim(),email:ne.email.trim()||void 0})}),ft=await qe.json();if(!qe.ok)throw new Error(ft.message||ft.error||"Failed to update profile");J("Profile updated successfully!");const xt={...n,firstName:ft.user.firstName,lastName:ft.user.lastName,name:ft.user.name,email:ft.user.email,countryCode:ft.user.countryCode};l(xt),localStorage.setItem("user",JSON.stringify(xt)),ft.user.countryCode?at(ft.user.countryCode):xt.countryCode&&at(xt.countryCode),setTimeout(()=>{Q(!1),J(null)},2e3)}catch(qe){Ve(qe instanceof Error?qe.message:"Failed to update profile")}finally{K(!1)}},vs=async()=>{const qe=$t($);if(qe){B(qe);return}k(!0),B(null),U(null);try{const ft=await fetch(`${Ae}/auth/update-email`,{method:"PUT",headers:{"Content-Type":"application/json",...At()},body:JSON.stringify({email:$.trim()})}),xt=await ft.json();if(!ft.ok)throw new Error(xt.message||xt.error||"Failed to update email");U("Email updated successfully!");const Ps={...n,email:xt.user.email};l(Ps),localStorage.setItem("user",JSON.stringify(Ps)),setTimeout(()=>{T(!1),L(""),U(null)},2e3)}catch(ft){B(ft instanceof Error?ft.message:"Failed to update email")}finally{k(!1)}};if(d)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading profile..."})]})});if(!n)return null;const fa=()=>{switch(j){case"dashboard":return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Hello, ",(n.name||"User").split(" ")[0],"."]}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Here's what's going on in your account."})]}),e.jsxs("button",{onClick:()=>v("orders"),className:"flex items-center justify-center gap-2 bg-white border border-slate-300 text-slate-700 font-medium px-5 py-2.5 rounded-lg hover:bg-slate-50 hover:border-slate-400 transition-all shadow-sm",children:[e.jsx(Cr,{className:"w-4 h-4"}),"View All Orders"]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Account snapshot"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{onClick:()=>v("orders"),className:"bg-slate-100 rounded-xl p-6 min-h-[140px] flex flex-col justify-between hover:bg-slate-200 transition-colors cursor-pointer border border-transparent hover:border-slate-300 group",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 group-hover:text-slate-900",children:"Orders"}),e.jsx("span",{className:"text-4xl font-bold text-slate-900",children:u.length})]}),e.jsxs("div",{className:"bg-slate-100 rounded-xl p-6 min-h-[140px] flex flex-col justify-between hover:bg-slate-200 transition-colors cursor-pointer border border-transparent hover:border-slate-300 group",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 group-hover:text-slate-900",children:"Account Status"}),e.jsxs("span",{className:"text-lg font-bold text-green-600 group-hover:text-green-700 flex items-center gap-1",children:["Active ",e.jsx(ga,{className:"w-5 h-5"})]})]})]}),(()=>{const ft=u.filter(xt=>xt.deliveredAt&&xt.status==="completed").sort((xt,Ps)=>new Date(Ps.deliveredAt||0).getTime()-new Date(xt.deliveredAt||0).getTime())[0];return ft&&ft.deliveredAt?e.jsxs("div",{className:"mt-6 bg-green-50 rounded-xl p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ho,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Latest Delivery"})]}),e.jsxs("p",{className:"text-sm text-slate-600 mb-1",children:["Order: ",e.jsx("span",{className:"font-mono font-medium",children:ft.orderNumber})]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Arrived on:"," ",e.jsx("span",{className:"font-semibold text-green-700",children:new Date(ft.deliveredAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})})]})]}):null})()]}),(()=>{var xt,Ps;const ft=u.filter(Qs=>Qs.deliveredAt&&Qs.status==="completed").sort((Qs,Js)=>new Date(Js.deliveredAt||0).getTime()-new Date(Qs.deliveredAt||0).getTime())[0];return ft?e.jsxs("div",{className:"bg-linear-to-br from-green-50 to-emerald-50 rounded-xl border border-green-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(ho,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Latest Delivery"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Your most recent order delivery"})]})]}),e.jsxs("div",{onClick:()=>Ft(ft),className:"bg-white rounded-lg p-4 border border-green-200 hover:border-green-300 cursor-pointer transition-all group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[((xt=ft.product)==null?void 0:xt.image)&&e.jsx("img",{src:ft.product.image,alt:ft.product.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900",children:((Ps=ft.product)==null?void 0:Ps.name)||"Product"}),e.jsx("p",{className:"text-xs text-slate-500",children:ft.orderNumber})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Delivered on"}),e.jsx("p",{className:"font-semibold text-green-700",children:new Date(ft.deliveredAt||"").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-green-100",children:[e.jsxs("span",{className:"text-sm text-slate-600",children:[ft.quantity.toLocaleString()," units"]}),e.jsx("span",{className:"text-sm font-bold text-slate-900",children:Sr(ft.totalPrice)})]})]})]}):null})(),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Recent Orders"}),e.jsx("button",{onClick:()=>v("orders"),className:"text-sm font-semibold text-slate-900 underline hover:text-brand-600",children:"View all"})]}),b&&u.length===0?e.jsx("div",{className:"space-y-4",children:[1,2].map(qe=>e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"}),e.jsx("div",{className:"h-5 bg-slate-200 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]}),e.jsxs("div",{className:"w-32 space-y-2",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded"}),e.jsx("div",{className:"h-2 bg-slate-200 rounded"})]})]})},qe))}):u.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(ja,{size:48,className:"mx-auto mb-4 opacity-50 text-slate-400"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"You haven't placed any orders yet."}),e.jsx(ys,{to:"/digital-print",className:"inline-block bg-brand-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-brand-700 transition-colors",children:"Browse Products"})]}):e.jsx(fj,{orders:u.slice(0,2),onSelectOrder:Ft})]})]});case"orders":return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Order History"}),e.jsx("button",{onClick:()=>v("dashboard"),className:"text-sm font-semibold text-slate-600 hover:text-brand-600",children:" Back to Dashboard"})]}),b&&u.length===0?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(qe=>e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"}),e.jsx("div",{className:"h-5 bg-slate-200 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]}),e.jsxs("div",{className:"w-32 space-y-2",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded"}),e.jsx("div",{className:"h-2 bg-slate-200 rounded"})]})]})},qe))}):u.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(ja,{size:48,className:"mx-auto mb-4 opacity-50 text-slate-400"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"You haven't placed any orders yet."}),e.jsx(ys,{to:"/digital-print",className:"inline-block bg-brand-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-brand-700 transition-colors",children:"Browse Products"})]}):e.jsx(fj,{orders:u,onSelectOrder:Ft})]});default:return null}};return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[e.jsx(st.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:200},className:`w-24 h-24 sm:w-28 sm:h-28 rounded-full ${Vs(n.name)} flex items-center justify-center text-white text-3xl sm:text-4xl font-bold shadow-lg ring-4 ring-white`,children:As(n.name)}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap justify-center sm:justify-start",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:n.name}),(n.userType==="print partner"||n.userType==="Print Partner")&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 border border-blue-200",children:"Print Partner"}),n.userType==="corporate"&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800 border border-purple-200",children:"Corporate"}),n.approvalStatus&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${n.approvalStatus==="approved"?"bg-green-50 text-green-700 border border-green-200":n.approvalStatus==="rejected"?"bg-red-50 text-red-700 border border-red-200":"bg-yellow-50 text-yellow-700 border border-yellow-200"}`,children:n.approvalStatus==="approved"?" Verified":n.approvalStatus==="rejected"?"Rejected":"Pending Verification"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[e.jsx(uo,{size:16,className:"text-slate-400 shrink-0 mt-1 sm:mt-0"}),P?e.jsxs("div",{className:"flex-1 w-full flex flex-col sm:flex-row items-stretch sm:items-center gap-2 min-w-0",children:[e.jsx("input",{type:"email",value:$,onChange:qe=>{const ft=qe.target.value;if(L(ft),U(null),ft.trim()&&ft.trim()!==(n==null?void 0:n.email)){const xt=$t(ft);B(xt)}else B(null)},onBlur:qe=>{const ft=qe.target.value;if(ft.trim()){const xt=$t(ft);B(xt)}else B(null)},onKeyDown:qe=>{if(qe.key==="Enter"){qe.preventDefault();const ft=$t($);ft?B(ft):vs()}else qe.key==="Escape"&&(T(!1),L(""),B(null),U(null))},className:`flex-1 w-full sm:min-w-[200px] px-3 py-1.5 border rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm transition-colors ${M?"border-red-300 bg-red-50 focus:ring-red-500 focus:border-red-500":$.trim()&&$.trim()!==(n==null?void 0:n.email)&&!$t($)?"border-green-300 bg-green-50":"border-slate-300"}`,placeholder:"Enter new email",autoFocus:!0}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0 w-full sm:w-auto",children:[e.jsx("button",{type:"button",onClick:()=>{const qe=$t($);qe?B(qe):vs()},disabled:O||!$.trim()||!!$t($),className:"flex-1 sm:flex-initial px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1.5 text-sm whitespace-nowrap",children:O?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:14}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ga,{size:14}),"Save"]})}),e.jsxs("button",{type:"button",onClick:()=>{T(!1),L(""),B(null),U(null)},disabled:O,className:"flex-1 sm:flex-initial px-3 py-1.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 flex items-center justify-center gap-1.5 text-sm whitespace-nowrap",children:[e.jsx(as,{size:14}),"Cancel"]})]})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-slate-600",children:n.email})})]}),P&&e.jsxs("div",{className:"ml-7 mt-1 space-y-1",children:[M&&e.jsxs("p",{className:"text-xs text-red-600 flex items-start gap-1.5",children:[e.jsx(bs,{size:12,className:"mt-0.5 shrink-0"}),e.jsx("span",{children:M})]}),ce&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1.5",children:[e.jsx(ga,{size:12}),ce]}),!M&&!ce&&$.trim()&&$.trim()!==(n==null?void 0:n.email)&&!$t($)&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1.5",children:[e.jsx(ga,{size:12}),"Email is valid. Press Enter to save or Escape to cancel."]}),!M&&!ce&&!$.trim()&&e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1.5",children:[e.jsx(hr,{size:12}),"Enter a new email address"]})]})]}),(n.firstName||n.lastName||n.mobileNumber)&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Customer Details"}),!W&&e.jsx("button",{type:"button",onClick:()=>{var qe;Q(!0),le({firstName:n.firstName||"",lastName:n.lastName||"",email:n.email||"",mobileNumber:((qe=n.mobileNumber)==null?void 0:qe.replace(n.countryCode||"",""))||"",countryCode:n.countryCode||"+91"}),Ve(null),J(null)},className:"p-1.5 text-slate-400 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors shrink-0",title:"Edit profile",children:e.jsx(Ai,{size:14})})]}),W?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:ne.firstName,onChange:qe=>le({...ne,firstName:qe.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm",placeholder:"Enter first name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:ne.lastName,onChange:qe=>le({...ne,lastName:qe.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm",placeholder:"Enter last name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:ne.email,onChange:qe=>le({...ne,email:qe.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-sm",placeholder:"Enter email"})]}),n.mobileNumber&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Mobile Number (Cannot be changed)"}),e.jsx("input",{type:"text",value:_e(n.mobileNumber,n.countryCode),disabled:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-100 text-slate-500 text-sm cursor-not-allowed"})]}),me&&e.jsxs("p",{className:"text-xs text-red-600 flex items-start gap-1.5",children:[e.jsx(bs,{size:12,className:"mt-0.5 shrink-0"}),e.jsx("span",{children:me})]}),F&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1.5",children:[e.jsx(ga,{size:12}),F]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:Bs,disabled:I,className:"flex-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1.5 text-sm",children:I?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:14}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ga,{size:14}),"Save Changes"]})}),e.jsx("button",{type:"button",onClick:()=>{Q(!1),Ve(null),J(null)},disabled:I,className:"px-3 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-3",children:[n.firstName&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Ji,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"First Name:"})," ",n.firstName]})]}),n.lastName&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Ji,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Last Name:"})," ",n.lastName]})]}),n.mobileNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(fm,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Mobile:"})," ",_e(n.mobileNumber,n.countryCode)]})]}),n.countryCode&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[fe?e.jsx("img",{src:fe,alt:Be||"Country flag",className:"w-6 h-4 object-cover rounded shrink-0",onError:qe=>{const ft=qe.target;ft.style.display="none"}}):e.jsx(Jn,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Country:"})," ",te?Be||n.countryCode||"Unknown":"Loading..."]})]})]})]}),(n.userType==="print partner"||n.userType==="Print Partner")&&n.profile&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Print Partner Details"}),n.profile.verificationStatus&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${n.profile.verificationStatus==="APPROVED"?"bg-green-100 text-green-800":n.profile.verificationStatus==="REJECTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:n.profile.verificationStatus})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(ki,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Business Name:"})," ",n.profile.businessName||"Not provided"]})]}),n.profile.ownerName&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Ji,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Owner Name:"})," ",n.profile.ownerName]})]}),n.profile.gstNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Wr,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"GST Number:"})," ",n.profile.gstNumber]})]}),n.profile.address&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(Jn,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",[($s=n.profile.address)==null?void 0:$s.fullAddress,(Zs=n.profile.address)==null?void 0:Zs.city,(pa=n.profile.address)==null?void 0:pa.state,(rr=n.profile.address)==null?void 0:rr.pincode].filter(Boolean).join(", ")||"Not provided"]})]}),n.profile.whatsappNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(fm,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"WhatsApp:"})," ",n.profile.whatsappNumber]})]}),n.profile.proofDocument&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(bn,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-slate-600",children:e.jsx("span",{className:"font-medium",children:"Proof Document:"})}),e.jsxs("a",{href:n.profile.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm flex items-center gap-1",children:[e.jsx(Er,{size:14}),"View Proof Document"]})]})]})]})]}),n.userType==="corporate"&&n.profile&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Corporate Details"}),n.profile.verificationStatus&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${n.profile.verificationStatus==="APPROVED"?"bg-green-100 text-green-800":n.profile.verificationStatus==="REJECTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:n.profile.verificationStatus})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(ki,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Organization:"})," ",n.profile.organizationName||"Not provided"]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Wr,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",((Tt=n.profile.organizationType)==null?void 0:Tt.replace(/_/g," "))||"Not provided"]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Ji,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Authorized Person:"})," ",n.profile.authorizedPersonName||"Not provided",n.profile.designation&&e.jsxs("span",{className:"text-slate-500",children:[" (",(ha=n.profile.designation)==null?void 0:ha.replace(/_/g," "),")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Wr,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"GST Number:"})," ",n.profile.gstNumber||"Not provided"]})]}),n.profile.address&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(Jn,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",[(Vt=n.profile.address)==null?void 0:Vt.fullAddress,(xa=n.profile.address)==null?void 0:xa.city,(Ns=n.profile.address)==null?void 0:Ns.state,(va=n.profile.address)==null?void 0:va.pincode].filter(Boolean).join(", ")||"Not provided"]})]}),n.profile.whatsappNumber&&e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(fm,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-medium",children:"WhatsApp:"})," ",n.profile.whatsappNumber]})]}),n.profile.proofDocument&&e.jsxs("div",{className:"flex items-start gap-3 justify-center sm:justify-start",children:[e.jsx(bn,{size:16,className:"text-slate-400 mt-0.5"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-slate-600",children:e.jsx("span",{className:"font-medium",children:"Proof Document:"})}),e.jsxs("a",{href:n.profile.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm flex items-center gap-1",children:[e.jsx(Er,{size:14}),"View Proof Document"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Pm,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-slate-600 capitalize",children:n.role})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-start",children:[e.jsx(Ed,{size:16,className:"text-slate-400"}),e.jsxs("span",{className:"text-slate-600",children:["Member since"," ",r?new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}):"Loading..."]})]})]})]})]})}),fa()]})})},sT=({event:s,isLast:r,isActive:n})=>{const l=s.status==="completed";s.status;const[d,m]=y.useState(!1),u=b=>b?new Date(b).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",p=s.startedAt||s.completedAt||s.timestamp;return e.jsxs("div",{className:`flex-1 relative ${r?"":"mb-8 md:mb-0"}`,children:[!r&&e.jsx("div",{className:`absolute left-3.5 top-8 w-0.5 h-[calc(100%-2rem)] md:w-[calc(100%-2rem)] md:h-0.5 md:left-8 md:top-3.5 ${l?"bg-green-500":"bg-slate-200"}`}),e.jsxs("div",{className:"flex md:flex-col items-center gap-4 md:gap-2",children:[e.jsxs("div",{className:`relative z-10 w-7 h-7 rounded-full flex items-center justify-center border-2 transition-all duration-300 cursor-pointer ${l?"bg-green-500 border-green-500 text-white":n?"bg-white border-orange-500 text-orange-500 shadow-[0_0_0_4px_rgba(249,115,22,0.2)]":"bg-white border-slate-300 text-slate-300"}`,onMouseEnter:()=>p&&m(!0),onMouseLeave:()=>m(!1),children:[l?e.jsx(Zn,{className:"w-4 h-4"}):n?e.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-pulse"}):e.jsx(o4,{className:"w-4 h-4"}),d&&p&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-slate-900 text-white text-xs rounded-lg shadow-lg z-50 whitespace-nowrap",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[s.startedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Started:"})," ",e.jsx("span",{children:u(s.startedAt)})]}),s.completedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Completed:"})," ",e.jsx("span",{children:u(s.completedAt)})]}),!s.startedAt&&!s.completedAt&&s.timestamp&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Date:"})," ",e.jsx("span",{children:u(s.timestamp)})]}),n&&!s.completedAt&&e.jsx("div",{className:"text-orange-300 mt-1",children:"In Progress"})]}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:e.jsx("div",{className:"border-4 border-transparent border-t-slate-900"})})]})]}),e.jsxs("div",{className:"md:text-center",children:[e.jsx("p",{className:`text-sm font-semibold ${n?"text-orange-600":l?"text-slate-900":"text-slate-400"}`,children:s.stage}),s.timestamp&&e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:new Date(s.timestamp).toLocaleDateString()}),n&&e.jsx("span",{className:"inline-block mt-1 text-[10px] uppercase tracking-wider font-bold text-orange-600 animate-pulse",children:"In Progress"})]})]})]})},aT=({status:s})=>{const r=d=>d.includes("Prepress")?e.jsx(Qj,{className:"w-3 h-3"}):d.includes("Print")?e.jsx(Jj,{className:"w-3 h-3"}):d.includes("Cut")?e.jsx(l3,{className:"w-3 h-3"}):d.includes("Plate")?e.jsx(Zj,{className:"w-3 h-3"}):e.jsx(qj,{className:"w-3 h-3"}),n=s.status==="completed",l=s.status==="in_progress";return e.jsxs("div",{className:`shrink-0 flex items-center gap-2 px-3 py-2 rounded-lg border transition-all duration-300 ${n?"bg-green-50 border-green-200":l?"bg-white border-orange-400 shadow-sm ring-1 ring-orange-100":"bg-slate-50 border-slate-200 opacity-60"}`,children:[e.jsx("div",{className:`p-1.5 rounded-full ${n?"bg-green-100 text-green-700":l?"bg-orange-100 text-orange-700":"bg-slate-200 text-slate-500"}`,children:r(s.departmentName)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`text-xs font-semibold ${n?"text-green-900":l?"text-orange-900":"text-slate-500"}`,children:s.departmentName}),l&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 animate-pulse"})]}),e.jsx("p",{className:"text-[10px] text-slate-500",children:s.completedAt?new Date(s.completedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s.startedAt?"Started "+new Date(s.startedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Pending"})]})]})},rT=({order:s})=>{var p;const[r,n]=y.useState(null),[l,d]=y.useState(null),[m,u]=y.useState(!1);return y.useEffect(()=>{(async()=>{var f;if((f=s==null?void 0:s.product)!=null&&f._id){u(!0);try{const j=localStorage.getItem("token"),v=await fetch(`${Ae}/products/${s.product._id}/detail`,{headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});if(v.ok){const w=await v.json();d({subAttributes:w.subAttributes||{}})}}catch(j){console.error("Error fetching product details:",j)}finally{u(!1)}}})()},[(p=s==null?void 0:s.product)==null?void 0:p._id]),s.product?e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>n(null),children:e.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",children:[e.jsx("button",{onClick:()=>n(null),className:"absolute -top-10 right-0 text-white hover:text-slate-300 transition-colors",children:e.jsx("span",{className:"text-2xl font-bold",children:""})}),e.jsx("img",{src:r.src,alt:r.alt,className:"w-full h-full object-contain rounded-lg"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-slate-100 pb-4",children:[e.jsx(ja,{className:"w-5 h-5 text-brand-600"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Product Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-2",children:"Shape"}),e.jsx("p",{className:"text-slate-900 font-semibold text-lg",children:s.shape})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-2",children:"Finish"}),e.jsx("p",{className:"text-slate-900 font-semibold text-lg",children:s.finish})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-base font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Zn,{className:"w-4 h-4 text-brand-600"}),"Selected Options"]}),s.selectedOptions&&s.selectedOptions.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.selectedOptions.map((b,f)=>{var D;const j=b.optionName||b.name||"Option",v=b.priceAdd||0;let w=b.description;if(!w&&((D=s.product)!=null&&D.options)&&b.optionId){const P=s.product.options.find(T=>T._id===b.optionId||T.name===j);w=P==null?void 0:P.description}return e.jsx("div",{className:"group relative bg-gradient-to-br from-white to-slate-50 rounded-xl border border-slate-200 hover:border-brand-300 hover:shadow-md transition-all duration-300 overflow-hidden",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[b.image?e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:b.image,alt:j,className:"w-20 h-20 object-cover rounded-lg border-2 border-slate-200 group-hover:border-brand-400 transition-colors cursor-pointer shadow-sm",onClick:()=>n({src:b.image,alt:j})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors cursor-pointer"})]}):e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gradient-to-br from-brand-100 to-brand-200 text-brand-700 flex items-center justify-center border-2 border-brand-200",children:e.jsx(Zn,{className:"w-8 h-8"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:j}),w&&e.jsx("p",{className:"text-xs text-slate-600 leading-relaxed mb-2",children:w}),v>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200",children:e.jsxs("span",{className:"text-sm font-bold text-brand-600",children:["+",Ws(v),v<10&&e.jsx("span",{className:"text-xs text-slate-500 font-normal ml-1",children:"/unit"})]})})]})]})})},f)})}):e.jsx("div",{className:"text-sm text-slate-500 italic p-4 bg-slate-50 rounded-lg border border-dashed border-slate-200 text-center",children:"No additional options configured."})]}),s.selectedDynamicAttributes&&s.selectedDynamicAttributes.length>0&&e.jsxs("div",{className:"pt-6 border-t border-slate-200",children:[e.jsxs("h4",{className:"text-base font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(hr,{className:"w-4 h-4 text-brand-600"}),"Selected Attributes"]}),e.jsx("div",{className:"space-y-4",children:s.selectedDynamicAttributes.map((b,f)=>{var w,D;const j=`${b.attributeTypeId}:${b.attributeValue}`,v=((w=l==null?void 0:l.subAttributes)==null?void 0:w[j])||[];return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"group relative bg-gradient-to-br from-white to-slate-50 rounded-xl border border-slate-200 hover:border-brand-300 hover:shadow-md transition-all duration-300 overflow-hidden",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[b.image?e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:b.image,alt:b.attributeName,className:"w-20 h-20 object-cover rounded-lg border-2 border-slate-200 group-hover:border-brand-400 transition-colors cursor-pointer shadow-sm",onClick:()=>n({src:b.image,alt:`${b.attributeName} - ${b.label}`})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors cursor-pointer"})]}):e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gradient-to-br from-slate-100 to-slate-200 text-slate-600 flex items-center justify-center border-2 border-slate-200",children:e.jsx(hr,{className:"w-8 h-8"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-1",children:b.attributeName}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-1",children:b.label}),b.description&&e.jsx("p",{className:"text-xs text-slate-600 leading-relaxed mb-2",children:b.description}),(b.priceAdd>0||b.priceMultiplier)&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200",children:b.priceAdd>0?e.jsxs("span",{className:"text-sm font-bold text-brand-600",children:["+",Ws(b.priceAdd),e.jsx("span",{className:"text-xs text-slate-500 font-normal ml-1",children:"/unit"})]}):b.priceMultiplier&&b.priceMultiplier!==1?e.jsxs("span",{className:"text-sm font-bold text-brand-600",children:["+",Ws((((D=s.product)==null?void 0:D.basePrice)||0)*(b.priceMultiplier-1)),e.jsx("span",{className:"text-xs text-slate-500 font-normal ml-1",children:"/unit"})]}):null}),b.uploadedImages&&b.uploadedImages.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-2",children:"Uploaded Images"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:b.uploadedImages.map((P,T)=>{let $="";return P.data&&(typeof P.data=="string"?$=`data:${P.contentType||"image/jpeg"};base64,${P.data}`:Buffer.isBuffer(P.data)&&($=`data:${P.contentType||"image/jpeg"};base64,${P.data.toString("base64")}`)),$?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:$,alt:P.filename||`Image ${T+1}`,className:"w-full h-24 object-cover rounded-lg border border-slate-200 cursor-pointer hover:border-brand-400 transition-colors",onClick:()=>n({src:$,alt:P.filename||`Image ${T+1}`})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 truncate",children:P.filename})]},T):null})})]})]})]})})}),v.length>0&&e.jsxs("div",{className:"ml-6 pl-4 border-l-2 border-brand-200 space-y-2",children:[e.jsxs("p",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold mb-2",children:[b.label," Options"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:v.map(P=>e.jsx("div",{className:"group relative bg-gradient-to-br from-brand-50/50 to-white rounded-lg border border-brand-100 hover:border-brand-300 hover:shadow-sm transition-all duration-200 overflow-hidden",children:e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[P.image?e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:P.image,alt:P.label,className:"w-16 h-16 object-cover rounded-lg border-2 border-brand-200 group-hover:border-brand-400 transition-colors cursor-pointer shadow-sm",onClick:()=>n({src:P.image,alt:`${b.attributeName} - ${P.label}`})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors cursor-pointer"})]}):e.jsx("div",{className:"w-16 h-16 rounded-lg bg-gradient-to-br from-brand-100 to-brand-200 text-brand-600 flex items-center justify-center border-2 border-brand-200",children:e.jsx(hr,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-900 mb-1",children:P.label}),P.priceAdd&&P.priceAdd>0&&e.jsxs("p",{className:"text-xs font-bold text-brand-600",children:["+",Ws(P.priceAdd),e.jsx("span",{className:"text-[10px] text-slate-500 font-normal ml-1",children:"/piece"})]})]})]})})},P._id))})]})]},f)})})]})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-slate-100 pb-4",children:[e.jsx(ja,{className:"w-5 h-5 text-brand-600"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Product Configuration"})]}),e.jsx("p",{className:"text-slate-600",children:"Product information not available."})]})},iT=({order:s})=>{var j,v,w,D,P,T,$,L,M,B,ce,U;if(!s.product)return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Price Breakdown"}),e.jsx("p",{className:"text-slate-600",children:"Product information not available."})]});const r={quantity:s.quantity,product:{basePrice:((j=s.product)==null?void 0:j.basePrice)||0,gstPercentage:((v=s.product)==null?void 0:v.gstPercentage)||18,options:((w=s.product)==null?void 0:w.options)||[],filters:((D=s.product)==null?void 0:D.filters)||{},quantityDiscounts:((P=s.product)==null?void 0:P.quantityDiscounts)||[]},finish:s.finish,shape:s.shape,selectedOptions:(s.selectedOptions||[]).map(O=>({name:O.optionName||O.name,optionName:O.optionName||O.name,priceAdd:O.priceAdd||0})),selectedDynamicAttributes:(T=s.selectedDynamicAttributes)==null?void 0:T.map(O=>({attributeName:O.attributeName,label:O.label,priceMultiplier:O.priceMultiplier,priceAdd:O.priceAdd}))},n=xx(r),l=(($=s.product)==null?void 0:$.additionalDesignCharge)||0,d=n.subtotalBeforeGst||n.rawBaseTotal+n.optionBreakdowns.reduce((O,k)=>O+k.cost,0),m=n.subtotalAfterDiscount||n.subtotal||d,u=n.discountAmount||d-m,p=m+l,b=p*(((L=s.product)==null?void 0:L.gstPercentage)||18)/100,f=s.totalPrice;return(M=s.product)!=null&&M.subcategory&&typeof s.product.subcategory=="object"?s.product.subcategory.name:(B=s.product)!=null&&B.subcategory,e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Price Breakdown"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-slate-100",children:[e.jsx("div",{className:"text-slate-600",children:e.jsxs("span",{children:["Base Price (",s.quantity.toLocaleString()," "," ",Ws(((ce=s.product)==null?void 0:ce.basePrice)||0),")"]})}),e.jsx("span",{className:"font-medium text-slate-900",children:Ws(n.rawBaseTotal)})]}),n.optionBreakdowns.map((O,k)=>e.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[e.jsxs("span",{children:[O.name," ",O.isPerUnit?`(${s.quantity}  ${Ws(O.priceAdd)})`:""]}),e.jsxs("span",{children:["+",Ws(O.cost)]})]},k)),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (Before Discount)"}),e.jsx("span",{children:Ws(d)})]}),n.discountPercentage>0&&u>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-600 bg-green-50 p-2 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold",children:["Bulk Discount (",n.discountPercentage,"%)"]}),e.jsxs("p",{className:"text-xs opacity-80",children:["Applied for ",s.quantity," units"]})]}),e.jsxs("span",{className:"font-bold",children:["-",Ws(u)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (After Discount)"}),e.jsx("span",{children:Ws(m)})]}),l>0&&e.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[e.jsx("span",{children:"Additional Design Charge"}),e.jsxs("span",{children:["+",Ws(l)]})]}),l>0&&e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-slate-900 border-t border-slate-100",children:[e.jsx("span",{children:"Subtotal (Including Design Charge)"}),e.jsx("span",{children:Ws(p)})]}),e.jsxs("div",{className:"flex justify-between items-center text-slate-500 text-xs",children:[e.jsxs("span",{children:["GST (",((U=s.product)==null?void 0:U.gstPercentage)||18,"%)"]}),e.jsxs("span",{children:["+",Ws(b)]})]}),s.advancePaid!==void 0&&s.advancePaid>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-slate-500",children:"Advance Paid"}),e.jsx("span",{className:"font-medium text-green-600",children:Ws(s.advancePaid||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500",children:"Balance Due"}),e.jsx("span",{className:`font-bold ${s.totalPrice-(s.advancePaid||0)>0?"text-red-600":"text-slate-400"}`,children:Ws(s.totalPrice-(s.advancePaid||0))})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t-2 border-slate-300",children:[e.jsx("span",{className:"text-lg font-bold text-slate-900",children:"Total Amount"}),e.jsx("span",{className:"text-xl font-bold text-brand-600",children:Ws(f)})]})]})]})},nT=({order:s})=>{var n,l,d;const r=[];return(n=s.uploadedDesign)!=null&&n.frontImage&&r.push({type:"front",fileName:s.uploadedDesign.frontImage.filename||"front-design.png",uploadedAt:s.createdAt,sizeMb:0,data:s.uploadedDesign.frontImage.data}),(l=s.uploadedDesign)!=null&&l.backImage&&r.push({type:"back",fileName:s.uploadedDesign.backImage.filename||"back-design.png",uploadedAt:s.createdAt,sizeMb:0,data:s.uploadedDesign.backImage.data}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Design Files (CMYK Format)"}),e.jsxs("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-md",children:["Max ",((d=s.product)==null?void 0:d.maxFileSizeMB)||10,"MB"]})]}),r.length>0?e.jsx("div",{className:"space-y-4 mb-6",children:r.map((m,u)=>e.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50 group hover:border-brand-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded flex items-center justify-center text-slate-400 border border-slate-200",children:e.jsx(Qj,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:m.fileName}),e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:[e.jsx("span",{className:"uppercase bg-slate-200 px-1.5 py-0.5 rounded text-[10px] font-medium",children:m.type}),e.jsx("span",{children:"CMYK JPEG"}),m.sizeMb>0&&`  ${m.sizeMb} MB`,`  ${new Date(m.uploadedAt).toLocaleDateString()}`]})]})]}),m.data&&e.jsx("a",{href:m.data,download:m.fileName,className:"text-slate-400 hover:text-brand-600 p-2 rounded-lg hover:bg-white transition-colors",title:"Download image",children:e.jsx(Wn,{className:"w-4 h-4"})})]}),m.data&&e.jsx("div",{className:"mt-3 border border-slate-200 rounded-lg overflow-hidden bg-white",children:e.jsx("img",{src:m.data,alt:`${m.type} design preview`,className:"w-full h-auto max-h-64 object-contain",onError:p=>{p.currentTarget.style.display="none"}})})]},u))}):e.jsxs("div",{className:"bg-amber-50 text-amber-800 p-3 rounded-lg text-sm mb-4 flex gap-2",children:[e.jsx(lc,{className:"w-4 h-4 shrink-0 mt-0.5"}),e.jsx("p",{children:"No files uploaded yet."})]})]})},pj=()=>{var P;const{orderId:s}=Dh(),r=ar(),[n,l]=y.useState(null),[d,m]=y.useState(!0),[u,p]=y.useState(null);y.useEffect(()=>{(async()=>{if(!s){p("Order ID is required"),m(!1);return}try{const $=localStorage.getItem("token");if(!$){r("/login");return}const L=await fetch(`${Ae}/orders/${s}`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(!L.ok)throw new Error("Failed to fetch order details");const M=await L.json();l(M)}catch($){p($ instanceof Error?$.message:"Failed to load order details")}finally{m(!1)}})()},[s,r]);const b=()=>{var O,k,W,Q;if(!n)return[];const T=()=>{var le;const ne=(le=n.departmentStatuses)==null?void 0:le.find(me=>{const Ve=typeof me=="object"?me.status:null;return Ve==="in_progress"||Ve==="completed"});return typeof ne=="object"?ne.startedAt:void 0},$=()=>{var me;const ne=(me=n.departmentStatuses)==null?void 0:me.filter(Ve=>(typeof Ve=="object"?Ve.status:null)==="completed");if(!ne||ne.length===0)return;const le=ne.reduce((Ve,F)=>{const J=typeof F=="object"?F:null,I=typeof Ve=="object"?Ve:null;return J!=null&&J.completedAt?I!=null&&I.completedAt?new Date(J.completedAt)>new Date(I.completedAt)?F:Ve:F:Ve});return typeof le=="object"?le.completedAt:void 0},L=[{stage:"Order Placed",status:"completed",timestamp:n.createdAt,startedAt:n.createdAt,completedAt:n.createdAt}],M=(O=n.uploadedDesign)!=null&&O.frontImage||(k=n.uploadedDesign)!=null&&k.backImage?n.createdAt:void 0;if(M?L.push({stage:"Design & File Prep",status:"completed",timestamp:M,startedAt:n.createdAt,completedAt:M}):L.push({stage:"Design & File Prep",status:"pending"}),(W=n.departmentStatuses)==null?void 0:W.some(ne=>{const le=typeof ne=="object"?ne.status:null;return le==="in_progress"||le==="completed"})){const ne=(Q=n.departmentStatuses)==null?void 0:Q.every(le=>(typeof le=="object"?le.status:null)==="completed");L.push({stage:"Production",status:ne?"completed":"in_progress",timestamp:T(),startedAt:T(),completedAt:ne?$():void 0})}else L.push({stage:"Production",status:"pending"});const ce=n.packedAt||(n.status==="completed"?n.updatedAt:void 0);ce?L.push({stage:"Packing",status:"completed",timestamp:ce,startedAt:n.movedToPackingAt||ce,completedAt:ce}):L.push({stage:"Packing",status:"pending"});const U=n.dispatchedAt||n.handedOverToCourierAt;return n.courierPartner||n.trackingId||U?L.push({stage:"Courier",status:"completed",timestamp:U||n.updatedAt,startedAt:U||n.handedOverToCourierAt||n.updatedAt,completedAt:n.deliveredAt||void 0}):L.push({stage:"Courier",status:"pending"}),L},f=()=>n!=null&&n.departmentStatuses?n.departmentStatuses.map(T=>{const $=typeof T.department=="object"?T.department:null,L=typeof T=="object"?T.status:"pending";return{departmentName:($==null?void 0:$.name)||"Unknown",status:L,startedAt:typeof T=="object"&&T.startedAt||void 0,completedAt:typeof T=="object"&&T.completedAt||void 0}}).sort((T,$)=>{var U,O;const L=(U=n.departmentStatuses)==null?void 0:U.find(k=>{const W=typeof k.department=="object"?k.department:null;return(W==null?void 0:W.name)===T.departmentName}),M=(O=n.departmentStatuses)==null?void 0:O.find(k=>{const W=typeof k.department=="object"?k.department:null;return(W==null?void 0:W.name)===$.departmentName}),B=typeof(L==null?void 0:L.department)=="object"?L.department.sequence:0,ce=typeof(M==null?void 0:M.department)=="object"?M.department.sequence:0;return B-ce}):[];if(d)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading order details..."})]})});if(u||!n)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(lc,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-900 font-semibold mb-2",children:"Error loading order"}),e.jsx("p",{className:"text-slate-600 mb-4",children:u||"Order not found"}),e.jsx("button",{onClick:()=>r("/profile"),className:"px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors",children:"Back to Profile"})]})});if(!n.product)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(lc,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-900 font-semibold mb-2",children:"Product information missing"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"This order is missing product details. Please contact support."}),e.jsx("button",{onClick:()=>r("/profile"),className:"px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors",children:"Back to Profile"})]})});const j=n.paymentStatus!=="completed",v=b(),w=f(),D=typeof n.product.subcategory=="object"&&n.product.subcategory!==null?n.product.subcategory.name:n.product.subcategory||"N/A";return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(kr,{fallbackPath:"/profile",label:"Back to Orders"})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6",children:[e.jsxs("div",{className:"flex items-start gap-5",children:[(()=>{var L,M;const T=(L=n.product)==null?void 0:L.subcategory,$=typeof T=="object"?T==null?void 0:T.image:null;return $?e.jsx("img",{src:$,alt:"Subcategory",className:"hidden md:block w-24 h-24 object-cover rounded-lg shadow-sm border border-slate-100"}):(M=n.product)!=null&&M.image?e.jsx("img",{src:n.product.image,alt:n.product.name,className:"hidden md:block w-24 h-24 object-cover rounded-lg shadow-sm border border-slate-100"}):null})(),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:n.orderNumber}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${n.status==="completed"?"bg-green-100 text-green-700":n.status==="processing"?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-600"}`,children:n.status.replace("_"," ")})]}),e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600 mb-1",children:(()=>{var $;const T=($=n.product)==null?void 0:$.subcategory;return T&&typeof T=="object"&&(T!=null&&T.category)&&typeof T.category=="object"?`${T.category.name}  ${String(T.name||"")}`:String(T&&typeof T=="object"?T.name||"N/A":D||"N/A")})()}),e.jsx("p",{className:"text-slate-600 font-medium",children:((P=n.product)==null?void 0:P.name)||"Product"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ci,{className:"w-4 h-4"})," Est. Delivery:"," ",n.deliveryDate?new Date(n.deliveryDate).toLocaleDateString():"Not set"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ja,{className:"w-4 h-4"})," ",n.quantity.toLocaleString()," units"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 md:self-start",children:[n.paymentGatewayInvoiceId&&e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 transition-colors",children:[e.jsx(Wn,{className:"w-4 h-4"})," Invoice"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-slate-50 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 transition-colors",children:[e.jsx(Hj,{className:"w-4 h-4"})," Support"]})]})]})}),j?e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-2xl p-8 text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ll,{className:"w-8 h-8"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Payment Required"}),e.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:"Your order has been created but production will not start until payment is confirmed."}),e.jsxs("button",{className:"bg-brand-600 hover:bg-brand-700 border-brown-200 border px-8 py-3 rounded-xl font-semibold shadow-lg shadow-brand-500/20 transition-all",children:["Pay ",Ws(n.totalPrice)," Now"]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8 mb-6 overflow-hidden",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-400 mb-8",children:"Order Status"}),e.jsx("div",{className:"flex flex-col md:flex-row justify-between relative",children:v.map((T,$)=>e.jsx(sT,{event:T,isLast:$===v.length-1,isActive:T.status==="in_progress"},$))}),w.length>0&&e.jsxs("div",{className:"mt-10 pt-8 border-t border-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Production Sequence"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Live Updates"})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide",children:w.map((T,$)=>e.jsxs(Pi.Fragment,{children:[e.jsx(aT,{status:T}),$<w.length-1&&e.jsx("div",{className:"w-8 h-0.5 bg-slate-200 shrink-0 self-center"})]},$))})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(rT,{order:n}),e.jsx(nT,{order:n}),n.shippingAddress&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Jn,{className:"w-5 h-5 text-brand-600"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delivery Location"})]}),e.jsxs("div",{className:"pl-8",children:[e.jsx("p",{className:"text-slate-900 font-medium",children:n.shippingAddress.street}),e.jsxs("p",{className:"text-slate-600",children:[n.shippingAddress.city,", ",n.shippingAddress.state," ",n.shippingAddress.zipCode]}),e.jsx("p",{className:"text-slate-600",children:n.shippingAddress.country})]})]}),n.status==="completed"&&(n.courierPartner||n.trackingId)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ho,{className:"w-5 h-5 text-brand-600"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Tracking Information"})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Tracking Number:"," ",e.jsx("span",{className:"font-mono text-slate-900",children:n.trackingId||"TRK-99887766"})]}),n.courierPartner&&e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Courier: ",e.jsx("span",{className:"font-medium",children:n.courierPartner})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(iT,{order:n})})]})]})})},lT=()=>{var L;const s=ar(),[r,n]=y.useState([]),[l,d]=y.useState(null),[m,u]=y.useState(null),[p,b]=y.useState(!0),[f,j]=y.useState(null),[v,w]=y.useState(1);y.useEffect(()=>{D(v)},[v]);const D=async M=>{try{b(!0),j(null);const B=localStorage.getItem("token");if(!B){s("/login");return}const ce=await fetch(`${Ae}/timeline/my-orders?page=${M}&limit=20`,{headers:{Authorization:`Bearer ${B}`,"Content-Type":"application/json"}});if(!ce.ok){if(ce.status===401){localStorage.removeItem("token"),s("/login");return}throw new Error("Failed to fetch orders")}const U=await ce.json();n(U.orders||[]),d(U.latestOrder||null),u(U.pagination||null)}catch(B){j(B instanceof Error?B.message:"Failed to load orders")}finally{b(!1)}},P=M=>{switch(M.toLowerCase()){case"completed":return"bg-green-100 text-green-700 border-green-200";case"processing":case"production_ready":case"approved":return"bg-blue-100 text-blue-700 border-blue-200";case"request":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"cancelled":case"rejected":return"bg-red-100 text-red-700 border-red-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},T=M=>{switch(M.toLowerCase()){case"completed":return e.jsx(Zn,{className:"w-4 h-4"});case"processing":case"production_ready":case"approved":return e.jsx(Qt,{className:"w-4 h-4 animate-spin"});case"request":return e.jsx(ci,{className:"w-4 h-4"});case"cancelled":case"rejected":return e.jsx(bs,{className:"w-4 h-4"});default:return e.jsx(ja,{className:"w-4 h-4"})}},$=M=>{try{return new Date(M).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid date"}};return p&&r.length===0?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qt,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading your orders..."})]})}):f?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(bs,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Error Loading Orders"}),e.jsx("p",{className:"text-slate-600 mb-4",children:f}),e.jsx("button",{onClick:()=>D(v),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"My Orders"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Track and manage all your orders"})]}),l&&e.jsx(st.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl shadow-lg p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium mb-1",children:"Latest Order"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:l.orderNumber}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ja,{className:"w-4 h-4"}),((L=l.product)==null?void 0:L.name)||"Product"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ed,{className:"w-4 h-4"}),$(l.createdAt)]})]})]}),e.jsxs("button",{onClick:()=>s(`/orders/${l._id}`),className:"px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition-colors flex items-center gap-2",children:["View Details",e.jsx(sr,{className:"w-5 h-5"})]})]})}),r.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[e.jsx(ja,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Orders Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Start shopping to see your orders here"}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Products"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4",children:r.map((M,B)=>{var ce,U;return e.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:B*.05},onClick:()=>s(`/orders/${M._id}`),className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition-all cursor-pointer group",children:e.jsxs("div",{className:"flex items-center gap-6",children:[(ce=M.product)!=null&&ce.image?e.jsx("img",{src:M.product.image,alt:M.product.name,className:"w-20 h-20 object-cover rounded-lg border border-slate-200"}):e.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(ja,{className:"w-8 h-8 text-slate-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:M.orderNumber}),e.jsxs("span",{className:`
                          px-3 py-1 rounded-full text-xs font-medium border
                          flex items-center gap-1
                          ${P(M.status)}
                        `,children:[T(M.status),M.status.replace("_"," ")]})]}),e.jsx("p",{className:"text-slate-700 font-medium mb-1",children:((U=M.product)==null?void 0:U.name)||"Product"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[e.jsxs("span",{children:["Quantity: ",M.quantity.toLocaleString()]}),e.jsx("span",{children:""}),e.jsx("span",{children:$(M.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-slate-900 mb-2",children:["",M.totalPrice.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 group-hover:text-blue-700 font-medium",children:[e.jsx("span",{children:"View Details"}),e.jsx(sr,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]})},M._id)})}),m&&m.totalPages>1&&e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:v===1,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:m.totalPages},(M,B)=>B+1).map(M=>e.jsx("button",{onClick:()=>w(M),className:`
                        w-10 h-10 rounded-lg font-medium transition-colors
                        ${M===v?"bg-blue-600 text-white":"border border-slate-300 hover:bg-slate-50"}
                      `,children:M},M))}),e.jsx("button",{onClick:()=>w(M=>Math.min(m.totalPages,M+1)),disabled:v===m.totalPages,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),m&&e.jsxs("p",{className:"text-center text-sm text-slate-500 mt-4",children:["Showing ",r.length," of ",m.totalOrders," orders"]})]})]})})},oT=()=>{const s=ar(),[r,n]=y.useState([]),[l,d]=y.useState(null),[m,u]=y.useState([]),[p,b]=y.useState(!1),[f,j]=y.useState(null),[v,w]=y.useState(null),[D,P]=y.useState(""),[T,$]=y.useState("all");y.useEffect(()=>{if(!localStorage.getItem("token")){s("/login");return}M()},[s]),y.useEffect(()=>{l&&B(l._id)},[l,T]);const L=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}),M=async()=>{b(!0);try{const Q=await fetch(`${Ae}/departments?isEnabled=true`,{headers:L()});if(!Q.ok)throw new Error("Failed to fetch departments");const ne=await Q.json(),le=ne.data||ne||[];n(le.sort((me,Ve)=>(me.sequence||0)-(Ve.sequence||0))),le.length>0&&!l&&d(le[0])}catch(Q){j(Q instanceof Error?Q.message:"Failed to fetch departments")}finally{b(!1)}},B=async Q=>{b(!0);try{const ne=T!=="all"?`${Ae}/departments/${Q}/orders?status=${T}`:`${Ae}/departments/${Q}/orders`,le=await fetch(ne,{headers:L()});if(!le.ok)throw new Error("Failed to fetch orders");const me=await le.json();u(me.data||me||[])}catch(ne){j(ne instanceof Error?ne.message:"Failed to fetch orders")}finally{b(!1)}},ce=async(Q,ne,le)=>{if(l){b(!0),j(null),w(null);try{const me=await fetch(`${Ae}/orders/${Q}/departments/${l._id}/action`,{method:"POST",headers:L(),body:JSON.stringify({action:ne,notes:le||""})}),Ve=await me.json();if(!me.ok)throw new Error(Ve.error||"Failed to perform action");w(`Order ${ne}ed successfully`),B(l._id),setTimeout(()=>w(null),3e3)}catch(me){j(me instanceof Error?me.message:"Failed to perform action")}finally{b(!1)}}},U=Q=>!Q.departmentStatuses||!l?null:Q.departmentStatuses.find(ne=>(typeof ne.department=="object"?ne.department._id:ne.department)===l._id),O=Q=>{switch(Q){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"paused":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"stopped":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},k=Q=>{const ne=U(Q);if(!ne)return null;const le=ne.status,me=[];return le==="pending"&&me.push(e.jsxs("button",{onClick:()=>ce(Q._id,"start"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(lo,{size:16}),"Start"]},"start")),le==="in_progress"&&me.push(e.jsxs("button",{onClick:()=>ce(Q._id,"pause"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors flex items-center gap-2",children:[e.jsx(Jp,{size:16}),"Pause"]},"pause"),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job? This may require reprint.")&&ce(Q._id,"stop")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(gd,{size:16}),"Stop"]},"stop"),e.jsxs("button",{onClick:()=>ce(Q._id,"complete"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Zn,{size:16}),"Complete"]},"complete")),le==="paused"&&me.push(e.jsxs("button",{onClick:()=>ce(Q._id,"resume"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(lo,{size:16}),"Resume"]},"resume"),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&ce(Q._id,"stop")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(gd,{size:16}),"Stop"]},"stop")),me.length>0?e.jsx("div",{className:"flex gap-2",children:me}):null},W=m.filter(Q=>Q.orderNumber.toLowerCase().includes(D.toLowerCase())||Q.product.name.toLowerCase().includes(D.toLowerCase()));return e.jsx("div",{className:"min-h-screen bg-cream-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(kr,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900 mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-cream-900 mb-2",children:"Department Portal"}),e.jsx("p",{className:"text-cream-600",children:"Manage production workflow for your department"})]}),f&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(bs,{size:20}),f]}),v&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-700",children:[e.jsx(Zn,{size:20}),v]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-cream-200 p-6 mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(ki,{size:24}),"Select Department"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:r.map(Q=>e.jsxs("button",{onClick:()=>d(Q),className:`p-4 rounded-lg border-2 transition-all ${(l==null?void 0:l._id)===Q._id?"border-cream-900 bg-cream-50 ring-2 ring-cream-900":"border-cream-200 hover:border-cream-400"}`,children:[e.jsx("div",{className:"font-semibold text-cream-900",children:Q.name}),Q.description&&e.jsx("div",{className:"text-xs text-cream-600 mt-1",children:Q.description}),e.jsxs("div",{className:"text-xs text-cream-500 mt-2",children:["Sequence: ",Q.sequence]})]},Q._id))})]}),l&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-cream-200 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900 mb-2",children:["Orders - ",l.name]}),e.jsxs("p",{className:"text-sm text-cream-600",children:[W.length," order(s) found"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:T,onChange:Q=>$(Q.target.value),className:"px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"stopped",children:"Stopped"})]}),e.jsxs("button",{onClick:()=>B(l._id),className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2",children:[e.jsx(Kn,{size:16}),"Refresh"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by order number or product name...",value:D,onChange:Q=>P(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]})}),p?e.jsx("div",{className:"text-center py-12",children:e.jsx(Qt,{className:"animate-spin text-cream-900 mx-auto",size:32})}):W.length===0?e.jsxs("div",{className:"text-center py-12 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx(ja,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-cream-600",children:"No orders found"})]}):e.jsx("div",{className:"space-y-4",children:W.map(Q=>{var le;const ne=U(Q);return e.jsx(st.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border border-cream-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"font-bold text-cream-900",children:["Order #",Q.orderNumber]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border-2 ${O((ne==null?void 0:ne.status)||"pending")}`,children:((le=ne==null?void 0:ne.status)==null?void 0:le.replace("_"," ").toUpperCase())||"PENDING"})]}),e.jsxs("div",{className:"text-sm text-cream-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",Q.product.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Quantity:"})," ",Q.quantity.toLocaleString()," units"]}),(ne==null?void 0:ne.operator)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Operator:"})," ",ne.operator.name]}),(ne==null?void 0:ne.startedAt)&&e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(ci,{size:14}),"Started: ",new Date(ne.startedAt).toLocaleString()]}),(ne==null?void 0:ne.notes)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",ne.notes]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:k(Q)})]})},Q._id)})})]})]})})},cT=()=>{var ge;const s=ar(),[r,n]=y.useState(null),[l,d]=y.useState([]),[m,u]=y.useState(null),[p,b]=y.useState([]),[f,j]=y.useState(!1),[v,w]=y.useState(null),[D,P]=y.useState(null),[T,$]=y.useState(""),[L,M]=y.useState("all"),[B,ce]=y.useState(null),[U,O]=y.useState(null),[k,W]=y.useState(!1),[Q,ne]=y.useState(!0),[le,me]=y.useState("dashboard");y.useEffect(()=>{const R=localStorage.getItem("token"),re=localStorage.getItem("user");if(!R||!re){s("/login");return}try{const je=JSON.parse(re);if(n(je),je.role!=="emp"&&je.role!=="admin"){s("/");return}}catch(je){console.error("Error parsing user data:",je),s("/login")}},[s]),y.useEffect(()=>{r&&(r.role==="emp"||r.role==="admin")&&F()},[r]),y.useEffect(()=>{m&&r&&J(m._id)},[m,L,r]);const Ve=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json",Accept:"application/json"}),F=async()=>{if(r){j(!0);try{const R=await fetch(`${Ae}/departments?isEnabled=true`,{headers:Ve()});if(!R.ok)throw new Error("Failed to fetch departments");const re=await R.json(),je=re.data||re||[],Ie=r.id||r._id;if(!Ie){console.error("User ID not found in userData:",r),w("User ID not found. Please log in again."),j(!1);return}const Be="69327f9850162220fa7bff29",et=je.filter(fe=>fe._id===Be||!fe.operators||fe.operators.length===0?!0:fe.operators.some(te=>{const be=typeof te=="object"&&(te._id||te.id)||String(te);return String(be)===String(Ie)}));d(et.sort((fe,se)=>(fe.sequence||0)-(se.sequence||0))),et.length>0&&!m&&u(et[0])}catch(R){w(R instanceof Error?R.message:"Failed to fetch departments")}finally{j(!1)}}},J=async R=>{j(!0),w(null);try{const re=L!=="all"?`${Ae}/departments/${R}/orders?status=${L}`:`${Ae}/departments/${R}/orders`,je=await fetch(re,{headers:Ve()});if(!je.ok){const et=await je.json().catch(()=>({}));throw new Error(et.error||"Failed to fetch orders")}const Ie=await je.json(),Be=Ie.data||Ie||[];b(Array.isArray(Be)?Be:[])}catch(re){const je=re instanceof Error?re.message:"Failed to fetch orders";w(je),b([]),console.error("Error fetching department orders:",re)}finally{j(!1)}},I=async R=>{try{const re=await fetch(`${Ae}/orders/${R}`,{headers:Ve()});if(!re.ok)throw new Error("Failed to fetch order details");const je=await re.json();O(je)}catch(re){console.error("Error fetching full order details:",re),O(null)}},K=R=>{ce(R),O(null),W(!0),I(R._id)},q=async(R,re,je)=>{if(m){j(!0),w(null),P(null);try{const Ie=await fetch(`${Ae}/orders/${R}/departments/${m._id}/action`,{method:"POST",headers:Ve(),body:JSON.stringify({action:re,notes:je||""})}),Be=await Ie.json();if(!Ie.ok)throw new Error(Be.error||"Failed to perform action");P(`Order ${re==="complete"?"completed":re==="start"?"started":re==="resume"?"resumed":`${re}ed`} successfully`),J(m._id),setTimeout(()=>P(null),3e3)}catch(Ie){w(Ie instanceof Error?Ie.message:"Failed to perform action")}finally{j(!1)}}},de=R=>!R.departmentStatuses||!m?null:R.departmentStatuses.find(re=>(typeof re.department=="object"?re.department._id:re.department)===m._id),Ce=R=>{switch(R){case"completed":return"bg-green-50 text-green-700 border-green-200";case"in_progress":return"bg-blue-50 text-blue-700 border-blue-200";case"paused":return"bg-orange-50 text-orange-700 border-orange-200";case"stopped":return"bg-red-50 text-red-700 border-red-200";default:return"bg-yellow-50 text-yellow-700 border-yellow-200"}},A=R=>{switch(R){case"completed":return"bg-green-500";case"in_progress":return"bg-blue-500";case"paused":return"bg-orange-500";case"stopped":return"bg-red-500";default:return"bg-yellow-500"}},G={pending:p.filter(R=>{const re=de(R);return(re==null?void 0:re.status)==="pending"}).length,inProgress:p.filter(R=>{const re=de(R);return(re==null?void 0:re.status)==="in_progress"}).length,urgent:p.filter(R=>{const re=de(R);return(re==null?void 0:re.status)==="paused"||(re==null?void 0:re.status)==="stopped"}).length,completed:p.filter(R=>{const re=de(R);return(re==null?void 0:re.status)==="completed"}).length},ie=p.filter(R=>R.orderNumber.toLowerCase().includes(T.toLowerCase())||R.product.name.toLowerCase().includes(T.toLowerCase())||R.user.name.toLowerCase().includes(T.toLowerCase())),Re=R=>R.split(" ").map(re=>re[0]).join("").toUpperCase().slice(0,2);return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[e.jsx("div",{className:"fixed top-4 left-4 z-50",children:e.jsx(kr,{fallbackPath:"/",label:"Back to Home",className:"bg-white shadow-md px-4 py-2 rounded-lg text-slate-600 hover:text-slate-900"})}),e.jsxs("aside",{className:`${Q?"w-64":"w-20"} bg-white border-r border-slate-200 transition-all duration-300 flex flex-col`,children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(ja,{className:"w-6 h-6 text-white"})}),Q&&e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"NexusOrder"})]})}),e.jsxs("nav",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-700 font-medium",children:[e.jsx(ja,{className:"w-5 h-5"}),Q&&e.jsx("span",{children:"Dashboard"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(ci,{className:"w-5 h-5"}),Q&&e.jsxs("span",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:"My Orders"}),e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:p.length})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(Ji,{className:"w-5 h-5"}),Q&&e.jsx("span",{children:"Team"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(C3,{className:"w-5 h-5"}),Q&&e.jsx("span",{children:"Reports"})]})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200",children:[e.jsx("p",{className:`text-xs font-semibold text-slate-400 uppercase mb-2 ${!Q&&"hidden"}`,children:"System"}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(Cr,{className:"w-5 h-5"}),Q&&e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-50 font-medium",children:[e.jsx(Hj,{className:"w-5 h-5"}),Q&&e.jsx("span",{children:"Support"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:r?Re(r.name):"U"}),Q&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:(r==null?void 0:r.name)||"User"}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:(r==null?void 0:r.role)==="emp"?"Employee":"Admin"})]})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx("header",{className:"bg-white border-b border-slate-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 max-w-2xl",children:e.jsxs("div",{className:"relative",children:[e.jsx(di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search orders, customers, or SKUs...",value:T,onChange:R=>$(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-4 ml-6",children:[e.jsxs("button",{className:"relative p-2 hover:bg-slate-50 rounded-lg",children:[e.jsx(HS,{className:"w-5 h-5 text-slate-600"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:r?Re(r.name):"U"})]})]})}),e.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:["Welcome back, ",((ge=r==null?void 0:r.name)==null?void 0:ge.split(" ")[0])||"Employee","."]}),e.jsxs("p",{className:"text-slate-600",children:["You have ",G.pending+G.inProgress," active tasks requiring attention."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(ci,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full font-medium",children:["+",G.pending," new"]})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:G.pending}),e.jsx("p",{className:"text-sm text-slate-600",children:"Pending Orders"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(ja,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"On track"})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:G.inProgress}),e.jsx("p",{className:"text-sm text-slate-600",children:"In Progress"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(lc,{className:"w-6 h-6 text-red-600"})}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium",children:"-1 from yesterday"})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:G.urgent}),e.jsx("p",{className:"text-sm text-slate-600",children:"Urgent Attention"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Zn,{className:"w-6 h-6 text-green-600"})}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"+15%"})]}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:G.completed}),e.jsx("p",{className:"text-sm text-slate-600",children:"Completed Today"})]})]}),l.length>0&&e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Department:"}),l.map(R=>e.jsx("button",{onClick:()=>u(R),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${(m==null?void 0:m._id)===R._id?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:R.name},R._id))]})}),m&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Assigned Orders"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2 bg-white border border-slate-200 rounded-lg",children:["all","pending","in_progress","paused","completed"].map(R=>e.jsx("button",{onClick:()=>M(R),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${L===R?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-50"}`,children:R==="all"?"All":R.replace("_"," ").toUpperCase()},R))}),e.jsx("button",{onClick:()=>J(m._id),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50",children:e.jsx(Kn,{className:"w-5 h-5 text-slate-600"})})]})]}),e.jsxs(ca,{children:[v&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(bs,{size:20}),v]}),D&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-700",children:[e.jsx(Zn,{size:20}),D]})]}),f?e.jsx("div",{className:"text-center py-12",children:e.jsx(Qt,{className:"animate-spin text-blue-600 mx-auto",size:32})}):ie.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(ja,{size:48,className:"mx-auto mb-4 opacity-50 text-slate-400"}),e.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"No orders found"}),e.jsx("p",{className:"text-sm text-slate-500",children:L!=="all"?`No orders with status "${L}" for this department.`:"No orders are currently assigned to this department."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ie.map(R=>{const re=de(R),je=(re==null?void 0:re.status)||"pending",Ie=A(je);return e.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>K(R),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-1",children:R.orderNumber}),e.jsx("p",{className:"text-xs text-slate-500",children:R.product.name})]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${Ie}`})]}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${Ce(je)}`,children:je.replace("_"," ").toUpperCase()})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Ji,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:R.user.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(ja,{className:"w-4 h-4"}),e.jsxs("span",{children:[R.quantity.toLocaleString()," units"]})]}),R.deliveryDate&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Ed,{className:"w-4 h-4"}),e.jsxs("span",{children:["Due: ",new Date(R.deliveryDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-100",onClick:Be=>Be.stopPropagation(),children:[je==="pending"&&e.jsxs("button",{onClick:()=>q(R._id,"start"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(lo,{className:"w-4 h-4"}),"Start"]}),je==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>q(R._id,"pause"),className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(Jp,{className:"w-4 h-4"}),"Pause"]}),e.jsxs("button",{onClick:()=>q(R._id,"complete"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(Zn,{className:"w-4 h-4"}),"Complete"]})]}),je==="paused"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>q(R._id,"resume"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(lo,{className:"w-4 h-4"}),"Resume"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&q(R._id,"stop")},className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(gd,{className:"w-4 h-4"}),"Stop"]})]}),je==="completed"&&e.jsx("div",{className:"w-full px-4 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-medium text-center",children:"Completed"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("button",{onClick:Be=>{Be.stopPropagation(),K(R)},className:"w-full flex items-center justify-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx("span",{children:"View Details"}),e.jsx(sr,{className:"w-4 h-4"})]})})]},R._id)})})]})]})]}),e.jsx(ca,{children:k&&(U||B)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>{W(!1),ce(null),O(null)},children:e.jsxs(st.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:R=>R.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:(U||B).orderNumber}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Created: ",new Date((U||B).createdAt).toLocaleString()]})]}),e.jsx("div",{className:"flex items-center gap-3",children:(()=>{const re=de(U||B),je=(re==null?void 0:re.status)||"pending";return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${Ce(je)}`,children:je.replace("_"," ").toUpperCase()}),e.jsx("button",{onClick:()=>{W(!1),ce(null),O(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(as,{className:"w-5 h-5 text-slate-600"})})]})})()})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[(()=>{const R=U||B,re=de(R),je=(re==null?void 0:re.status)||"pending";return e.jsxs("div",{className:"flex gap-3",children:[je==="pending"&&e.jsxs("button",{onClick:()=>{q(R._id,"start"),W(!1)},className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(lo,{className:"w-5 h-5"}),"Start"]}),je==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{q(R._id,"pause"),W(!1)},className:"flex-1 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(Jp,{className:"w-5 h-5"}),"Pause"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&(q(R._id,"stop"),W(!1))},className:"flex-1 px-6 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(gd,{className:"w-5 h-5"}),"Stop / Finish"]})]}),je==="paused"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{q(R._id,"resume"),W(!1)},className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(lo,{className:"w-5 h-5"}),"Resume"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to stop this job?")&&(q(R._id,"stop"),W(!1))},className:"flex-1 px-6 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(gd,{className:"w-5 h-5"}),"Stop / Finish"]})]})]})})(),(()=>{var re,je,Ie,Be,et,fe;const R=U||B;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Customer"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Name"}),e.jsx("p",{className:"font-semibold text-slate-900",children:R.user.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Email"}),e.jsx("p",{className:"font-semibold text-slate-900",children:R.user.email})]}),R.mobileNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Mobile"}),e.jsx("p",{className:"font-semibold text-slate-900",children:R.mobileNumber})]}),R.deliveryDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Due Date"}),e.jsx("p",{className:"font-semibold text-slate-900",children:new Date(R.deliveryDate).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Product Info"}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[((re=R.product)==null?void 0:re.image)&&e.jsx("img",{src:R.product.image,alt:R.product.name,className:"w-24 h-24 object-cover rounded-lg border border-slate-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-slate-900 text-lg mb-2",children:((je=R.product)==null?void 0:je.name)||"Product"}),((Ie=R.product)==null?void 0:Ie.subcategory)&&e.jsx("div",{className:"mb-2",children:e.jsx("p",{className:"text-sm text-slate-600",children:typeof R.product.subcategory=="object"&&R.product.subcategory.category?`${R.product.subcategory.category.name}  ${R.product.subcategory.name}`:typeof R.product.subcategory=="object"?R.product.subcategory.name:R.product.subcategory})}),e.jsxs("div",{className:"space-y-1 text-sm text-slate-600",children:[e.jsxs("p",{children:["Quantity: ",R.quantity.toLocaleString()," units"]}),R.finish&&e.jsxs("p",{children:["Finish: ",R.finish]}),R.shape&&e.jsxs("p",{children:["Shape: ",R.shape]}),((Be=R.product)==null?void 0:Be.basePrice)&&e.jsxs("p",{children:["Base Price: ",R.product.basePrice.toFixed(2)]}),e.jsxs("p",{className:"font-semibold text-slate-900 mt-2",children:["Total: ",R.totalPrice.toFixed(2)]})]})]})]}),((et=R.product)==null?void 0:et.description)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Description:"}),e.jsx("p",{className:"text-sm text-slate-600",children:R.product.description})]}),((fe=R.product)==null?void 0:fe.instructions)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Instructions:"}),e.jsx("p",{className:"text-sm text-slate-600",children:R.product.instructions})]})]}),R.selectedOptions&&Array.isArray(R.selectedOptions)&&R.selectedOptions.length>0?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Selected Options"}),e.jsx("div",{className:"space-y-3",children:R.selectedOptions.map((se,te)=>{const be=(se==null?void 0:se.optionName)||(se==null?void 0:se.name)||"Option",We=typeof(se==null?void 0:se.priceAdd)=="number"?se.priceAdd:typeof(se==null?void 0:se.priceAdd)=="string"&&parseFloat(se.priceAdd)||0;return be==="Option"&&We===0?null:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(se==null?void 0:se.image)&&e.jsx("img",{src:se.image,alt:be,className:"w-12 h-12 object-cover rounded-lg",onError:at=>{at.currentTarget.style.display="none"}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:be}),(se==null?void 0:se.description)&&e.jsx("p",{className:"text-xs text-slate-500",children:se.description})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-slate-900",children:["+",We.toFixed(2)]})})]},te)}).filter(Boolean)}),R.selectedOptions.filter(se=>{const te=(se==null?void 0:se.optionName)||(se==null?void 0:se.name)||"Option",be=typeof(se==null?void 0:se.priceAdd)=="number"?se.priceAdd:typeof(se==null?void 0:se.priceAdd)=="string"&&parseFloat(se.priceAdd)||0;return!(te==="Option"&&be===0)}).length===0&&e.jsx("p",{className:"text-sm text-slate-500 italic text-center py-4",children:"No valid options found"})]}):null,R.selectedDynamicAttributes&&R.selectedDynamicAttributes.length>0&&e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Selected Attributes"}),e.jsx("div",{className:"space-y-3",children:R.selectedDynamicAttributes.map((se,te)=>e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900",children:se.attributeName}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Value: ",e.jsx("span",{className:"font-semibold",children:se.label||String(se.attributeValue)})]}),se.description&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:se.description})]}),se.image&&e.jsx("img",{src:se.image,alt:se.attributeName,className:"w-16 h-16 object-cover rounded-lg ml-3"})]}),(se.priceMultiplier!==1||se.priceAdd>0)&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-100",children:e.jsxs("p",{className:"text-xs text-slate-500",children:[se.priceMultiplier!==1&&`Multiplier: ${se.priceMultiplier}x`,se.priceMultiplier!==1&&se.priceAdd>0&&"  ",se.priceAdd>0&&`Additional: +${se.priceAdd.toFixed(2)}`]})})]},te))})]}),R.uploadedDesign&&(R.uploadedDesign.frontImage||R.uploadedDesign.backImage)&&e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"User Uploaded Designs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.uploadedDesign.frontImage&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 mb-2",children:"Front Image"}),R.uploadedDesign.frontImage.data&&e.jsx("img",{src:R.uploadedDesign.frontImage.data,alt:"Front design",className:"w-full h-48 object-contain rounded-lg border border-slate-200 bg-slate-50"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:R.uploadedDesign.frontImage.filename})]}),R.uploadedDesign.backImage&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 mb-2",children:"Back Image"}),R.uploadedDesign.backImage.data&&e.jsx("img",{src:R.uploadedDesign.backImage.data,alt:"Back design",className:"w-full h-48 object-contain rounded-lg border border-slate-200 bg-slate-50"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:R.uploadedDesign.backImage.filename})]})]})]})]})})(),(()=>{const R=U||B;return R.notes?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Customer Instructions"}),e.jsx("div",{className:"space-y-2",children:R.notes.split(`
`).map((re,je)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:""}),e.jsx("p",{className:"text-slate-700",children:re})]},je))})]}):null})(),(()=>{const R=U||B;return R.departmentStatuses&&R.departmentStatuses.length>0?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"Production Timeline"}),e.jsx("div",{className:"space-y-4",children:R.departmentStatuses.sort((re,je)=>{const Ie=typeof re.department=="object"?re.department.sequence:0,Be=typeof je.department=="object"?je.department.sequence:0;return Ie-Be}).map((re,je)=>{const Ie=typeof re.department=="object"?re.department.name:"Department",Be=re.status,et=Be==="completed",fe=Be==="in_progress",se=Be==="pending";return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${et?"bg-green-500":fe?"bg-blue-500 animate-pulse":se?"bg-yellow-500":"bg-slate-300"}`}),je<R.departmentStatuses.length-1&&e.jsx("div",{className:`w-0.5 h-12 ${et?"bg-green-500":"bg-slate-200"}`})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium text-slate-900",children:Ie}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Ce(Be)}`,children:Be.replace("_"," ").toUpperCase()})]}),re.startedAt&&e.jsxs("p",{className:"text-xs text-slate-500",children:["Started: ",new Date(re.startedAt).toLocaleString()]}),re.completedAt&&e.jsxs("p",{className:"text-xs text-green-600",children:["Completed: ",new Date(re.completedAt).toLocaleString()]})]})]},je)})})]}):null})(),(()=>{var je,Ie,Be,et;const R=U||B;return((je=R.uploadedDesign)==null?void 0:je.frontImage)||((Ie=R.uploadedDesign)==null?void 0:Ie.backImage)?e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide mb-4",children:"User Uploaded Designs (CMYK Format)"}),e.jsxs("div",{className:"space-y-4",children:[((Be=R.uploadedDesign)==null?void 0:Be.frontImage)&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(bn,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:R.uploadedDesign.frontImage.filename||"Front Image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Front design file (CMYK JPEG)"})]})]}),R.uploadedDesign.frontImage.data&&e.jsx("a",{href:R.uploadedDesign.frontImage.data,download:R.uploadedDesign.frontImage.filename,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Download image",children:e.jsx(Wn,{className:"w-4 h-4 text-slate-600"})})]}),R.uploadedDesign.frontImage.data&&e.jsx("div",{className:"mt-3 border border-slate-200 rounded-lg overflow-hidden bg-slate-50",children:e.jsx("img",{src:R.uploadedDesign.frontImage.data,alt:"Front design preview",className:"w-full h-auto max-h-64 object-contain",onError:fe=>{fe.currentTarget.style.display="none"}})})]}),((et=R.uploadedDesign)==null?void 0:et.backImage)&&e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(bn,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:R.uploadedDesign.backImage.filename||"Back Image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Back design file (CMYK JPEG)"})]})]}),R.uploadedDesign.backImage.data&&e.jsx("a",{href:R.uploadedDesign.backImage.data,download:R.uploadedDesign.backImage.filename,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Download image",children:e.jsx(Wn,{className:"w-4 h-4 text-slate-600"})})]}),R.uploadedDesign.backImage.data&&e.jsx("div",{className:"mt-3 border border-slate-200 rounded-lg overflow-hidden bg-slate-50",children:e.jsx("img",{src:R.uploadedDesign.backImage.data,alt:"Back design preview",className:"w-full h-auto max-h-64 object-contain",onError:fe=>{fe.currentTarget.style.display="none"}})})]})]})]}):null})()]})]})})})]})};let dT={data:""},uT=s=>{if(typeof window=="object"){let r=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(s||document.head).appendChild(r),r.firstChild}return s||dT},mT=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,fT=/\/\*[^]*?\*\/|  +/g,hj=/\n+/g,_l=(s,r)=>{let n="",l="",d="";for(let m in s){let u=s[m];m[0]=="@"?m[1]=="i"?n=m+" "+u+";":l+=m[1]=="f"?_l(u,m):m+"{"+_l(u,m[1]=="k"?"":r)+"}":typeof u=="object"?l+=_l(u,r?r.replace(/([^,])+/g,p=>m.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,b=>/&/.test(b)?b.replace(/&/g,p):p?p+" "+b:b)):m):u!=null&&(m=/^--/.test(m)?m:m.replace(/[A-Z]/g,"-$&").toLowerCase(),d+=_l.p?_l.p(m,u):m+":"+u+";")}return n+(r&&d?r+"{"+d+"}":d)+l},Qn={},PN=s=>{if(typeof s=="object"){let r="";for(let n in s)r+=n+PN(s[n]);return r}return s},pT=(s,r,n,l,d)=>{let m=PN(s),u=Qn[m]||(Qn[m]=(b=>{let f=0,j=11;for(;f<b.length;)j=101*j+b.charCodeAt(f++)>>>0;return"go"+j})(m));if(!Qn[u]){let b=m!==s?s:(f=>{let j,v,w=[{}];for(;j=mT.exec(f.replace(fT,""));)j[4]?w.shift():j[3]?(v=j[3].replace(hj," ").trim(),w.unshift(w[0][v]=w[0][v]||{})):w[0][j[1]]=j[2].replace(hj," ").trim();return w[0]})(s);Qn[u]=_l(d?{["@keyframes "+u]:b}:b,n?"":"."+u)}let p=n&&Qn.g?Qn.g:null;return n&&(Qn.g=Qn[u]),((b,f,j,v)=>{v?f.data=f.data.replace(v,b):f.data.indexOf(b)===-1&&(f.data=j?b+f.data:f.data+b)})(Qn[u],r,l,p),u},hT=(s,r,n)=>s.reduce((l,d,m)=>{let u=r[m];if(u&&u.call){let p=u(n),b=p&&p.props&&p.props.className||/^go/.test(p)&&p;u=b?"."+b:p&&typeof p=="object"?p.props?"":_l(p,""):p===!1?"":p}return l+d+(u??"")},"");function zm(s){let r=this||{},n=s.call?s(r.p):s;return pT(n.unshift?n.raw?hT(n,[].slice.call(arguments,1),r.p):n.reduce((l,d)=>Object.assign(l,d&&d.call?d(r.p):d),{}):n,uT(r.target),r.g,r.o,r.k)}let ON,vh,Nh;zm.bind({g:1});let tl=zm.bind({k:1});function xT(s,r,n,l){_l.p=r,ON=s,vh=n,Nh=l}function Bl(s,r){let n=this||{};return function(){let l=arguments;function d(m,u){let p=Object.assign({},m),b=p.className||d.className;n.p=Object.assign({theme:vh&&vh()},p),n.o=/ *go\d+/.test(b),p.className=zm.apply(n,l)+(b?" "+b:"");let f=s;return s[0]&&(f=p.as||s,delete p.as),Nh&&f[0]&&Nh(p),ON(f,p)}return d}}var gT=s=>typeof s=="function",_d=(s,r)=>gT(s)?s(r):s,bT=(()=>{let s=0;return()=>(++s).toString()})(),RN=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");s=!r||r.matches}return s}})(),yT=20,gx="default",MN=(s,r)=>{let{toastLimit:n}=s.settings;switch(r.type){case 0:return{...s,toasts:[r.toast,...s.toasts].slice(0,n)};case 1:return{...s,toasts:s.toasts.map(u=>u.id===r.toast.id?{...u,...r.toast}:u)};case 2:let{toast:l}=r;return MN(s,{type:s.toasts.find(u=>u.id===l.id)?1:0,toast:l});case 3:let{toastId:d}=r;return{...s,toasts:s.toasts.map(u=>u.id===d||d===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return r.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(u=>u.id!==r.toastId)};case 5:return{...s,pausedAt:r.time};case 6:let m=r.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+m}))}}},bm=[],_N={toasts:[],pausedAt:void 0,settings:{toastLimit:yT}},yn={},zN=(s,r=gx)=>{yn[r]=MN(yn[r]||_N,s),bm.forEach(([n,l])=>{n===r&&l(yn[r])})},LN=s=>Object.keys(yn).forEach(r=>zN(s,r)),jT=s=>Object.keys(yn).find(r=>yn[r].toasts.some(n=>n.id===s)),Lm=(s=gx)=>r=>{zN(r,s)},vT={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},$N=(s={},r=gx)=>{let[n,l]=y.useState(yn[r]||_N),d=y.useRef(yn[r]);y.useEffect(()=>(d.current!==yn[r]&&l(yn[r]),bm.push([r,l]),()=>{let u=bm.findIndex(([p])=>p===r);u>-1&&bm.splice(u,1)}),[r]);let m=n.toasts.map(u=>{var p,b,f;return{...s,...s[u.type],...u,removeDelay:u.removeDelay||((p=s[u.type])==null?void 0:p.removeDelay)||(s==null?void 0:s.removeDelay),duration:u.duration||((b=s[u.type])==null?void 0:b.duration)||(s==null?void 0:s.duration)||vT[u.type],style:{...s.style,...(f=s[u.type])==null?void 0:f.style,...u.style}}});return{...n,toasts:m}},NT=(s,r="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...n,id:(n==null?void 0:n.id)||bT()}),Gd=s=>(r,n)=>{let l=NT(r,s,n);return Lm(l.toasterId||jT(l.id))({type:2,toast:l}),l.id},Va=(s,r)=>Gd("blank")(s,r);Va.error=Gd("error");Va.success=Gd("success");Va.loading=Gd("loading");Va.custom=Gd("custom");Va.dismiss=(s,r)=>{let n={type:3,toastId:s};r?Lm(r)(n):LN(n)};Va.dismissAll=s=>Va.dismiss(void 0,s);Va.remove=(s,r)=>{let n={type:4,toastId:s};r?Lm(r)(n):LN(n)};Va.removeAll=s=>Va.remove(void 0,s);Va.promise=(s,r,n)=>{let l=Va.loading(r.loading,{...n,...n==null?void 0:n.loading});return typeof s=="function"&&(s=s()),s.then(d=>{let m=r.success?_d(r.success,d):void 0;return m?Va.success(m,{id:l,...n,...n==null?void 0:n.success}):Va.dismiss(l),d}).catch(d=>{let m=r.error?_d(r.error,d):void 0;m?Va.error(m,{id:l,...n,...n==null?void 0:n.error}):Va.dismiss(l)}),s};var wT=1e3,FN=(s,r="default")=>{let{toasts:n,pausedAt:l}=$N(s,r),d=y.useRef(new Map).current,m=y.useCallback((v,w=wT)=>{if(d.has(v))return;let D=setTimeout(()=>{d.delete(v),u({type:4,toastId:v})},w);d.set(v,D)},[]);y.useEffect(()=>{if(l)return;let v=Date.now(),w=n.map(D=>{if(D.duration===1/0)return;let P=(D.duration||0)+D.pauseDuration-(v-D.createdAt);if(P<0){D.visible&&Va.dismiss(D.id);return}return setTimeout(()=>Va.dismiss(D.id,r),P)});return()=>{w.forEach(D=>D&&clearTimeout(D))}},[n,l,r]);let u=y.useCallback(Lm(r),[r]),p=y.useCallback(()=>{u({type:5,time:Date.now()})},[u]),b=y.useCallback((v,w)=>{u({type:1,toast:{id:v,height:w}})},[u]),f=y.useCallback(()=>{l&&u({type:6,time:Date.now()})},[l,u]),j=y.useCallback((v,w)=>{let{reverseOrder:D=!1,gutter:P=8,defaultPosition:T}=w||{},$=n.filter(B=>(B.position||T)===(v.position||T)&&B.height),L=$.findIndex(B=>B.id===v.id),M=$.filter((B,ce)=>ce<L&&B.visible).length;return $.filter(B=>B.visible).slice(...D?[M+1]:[0,M]).reduce((B,ce)=>B+(ce.height||0)+P,0)},[n]);return y.useEffect(()=>{n.forEach(v=>{if(v.dismissed)m(v.id,v.removeDelay);else{let w=d.get(v.id);w&&(clearTimeout(w),d.delete(v.id))}})},[n,m]),{toasts:n,handlers:{updateHeight:b,startPause:p,endPause:f,calculateOffset:j}}},ST=tl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,CT=tl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,AT=tl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,UN=Bl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ST} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${CT} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${AT} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ET=tl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,IN=Bl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${ET} 1s linear infinite;
`,TT=tl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,kT=tl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,VN=Bl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TT} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${kT} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,DT=Bl("div")`
  position: absolute;
`,PT=Bl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,OT=tl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RT=Bl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${OT} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,BN=({toast:s})=>{let{icon:r,type:n,iconTheme:l}=s;return r!==void 0?typeof r=="string"?y.createElement(RT,null,r):r:n==="blank"?null:y.createElement(PT,null,y.createElement(IN,{...l}),n!=="loading"&&y.createElement(DT,null,n==="error"?y.createElement(UN,{...l}):y.createElement(VN,{...l})))},MT=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,_T=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,zT="0%{opacity:0;} 100%{opacity:1;}",LT="0%{opacity:1;} 100%{opacity:0;}",$T=Bl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,FT=Bl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,UT=(s,r)=>{let n=s.includes("top")?1:-1,[l,d]=RN()?[zT,LT]:[MT(n),_T(n)];return{animation:r?`${tl(l)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${tl(d)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},qN=y.memo(({toast:s,position:r,style:n,children:l})=>{let d=s.height?UT(s.position||r||"top-center",s.visible):{opacity:0},m=y.createElement(BN,{toast:s}),u=y.createElement(FT,{...s.ariaProps},_d(s.message,s));return y.createElement($T,{className:s.className,style:{...d,...n,...s.style}},typeof l=="function"?l({icon:m,message:u}):y.createElement(y.Fragment,null,m,u))});xT(y.createElement);var IT=({id:s,className:r,style:n,onHeightUpdate:l,children:d})=>{let m=y.useCallback(u=>{if(u){let p=()=>{let b=u.getBoundingClientRect().height;l(s,b)};p(),new MutationObserver(p).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[s,l]);return y.createElement("div",{ref:m,className:r,style:n},d)},VT=(s,r)=>{let n=s.includes("top"),l=n?{top:0}:{bottom:0},d=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:RN()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(n?1:-1)}px)`,...l,...d}},BT=zm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,cm=16,qT=({reverseOrder:s,position:r="top-center",toastOptions:n,gutter:l,children:d,toasterId:m,containerStyle:u,containerClassName:p})=>{let{toasts:b,handlers:f}=FN(n,m);return y.createElement("div",{"data-rht-toaster":m||"",style:{position:"fixed",zIndex:9999,top:cm,left:cm,right:cm,bottom:cm,pointerEvents:"none",...u},className:p,onMouseEnter:f.startPause,onMouseLeave:f.endPause},b.map(j=>{let v=j.position||r,w=f.calculateOffset(j,{reverseOrder:s,gutter:l,defaultPosition:r}),D=VT(v,w);return y.createElement(IT,{id:j.id,key:j.id,onHeightUpdate:f.updateHeight,className:j.visible?BT:"",style:D},j.type==="custom"?_d(j.message,j):d?d(j):y.createElement(qN,{toast:j,position:v}))}))},Wi=Va;const HT=Object.freeze(Object.defineProperty({__proto__:null,CheckmarkIcon:VN,ErrorIcon:UN,LoaderIcon:IN,ToastBar:qN,ToastIcon:BN,Toaster:qT,default:Wi,resolveValue:_d,toast:Va,useToaster:FN,useToasterStore:$N},Symbol.toStringTag,{value:"Module"})),GT=({onSuccess:s,onError:r})=>{var me,Ve,F,J;const[n,l]=y.useState([]),[d,m]=y.useState(!1),[u,p]=y.useState("all"),[b,f]=y.useState(""),[j,v]=y.useState(null),[w,D]=y.useState(1),[P]=y.useState(10),[T,$]=y.useState(null),L=()=>{const I=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:I?`Bearer ${I}`:""}},M=async()=>{m(!0);try{const I=u!=="all"?`?status=${u}`:"",K=await fetch(`${Ae}/auth/print-partner-requests${I}`,{headers:L()});if(!K.ok)throw new Error(`Failed to fetch: ${K.status}`);const q=await K.json();if(q.success)l(q.requests||[]),D(1);else throw new Error(q.message||"Failed to fetch requests")}catch(I){console.error("Fetch print partner requests error:",I),r==null||r(I.message||"Failed to fetch print partner requests")}finally{m(!1)}};y.useEffect(()=>{M()},[u]);const B=async I=>{if(window.confirm("Are you sure you want to approve this request?")){v(I);try{const q=await(await fetch(`${Ae}/auth/print-partner-requests/${I}/approve`,{method:"POST",headers:L()})).json();if(q.success)s==null||s("Print partner request approved successfully!"),M(),(T==null?void 0:T._id)===I&&$(null);else throw new Error(q.message||"Failed to approve")}catch(K){r==null||r(K.message||"Failed to approve request")}finally{v(null)}}},ce=async I=>{if(window.confirm("Are you sure you want to reject this request?")){v(I);try{const q=await(await fetch(`${Ae}/auth/print-partner-requests/${I}/reject`,{method:"POST",headers:L(),body:JSON.stringify({rejectionReason:"Rejected by admin"})})).json();if(q.success)s==null||s("Print partner request rejected successfully!"),M(),(T==null?void 0:T._id)===I&&$(null);else throw new Error(q.message||"Failed to reject")}catch(K){r==null||r(K.message||"Failed to reject request")}finally{v(null)}}},U=n.filter(I=>{if(!b)return!0;const K=b.toLowerCase();return I.businessName.toLowerCase().includes(K)||I.ownerName.toLowerCase().includes(K)||I.email.toLowerCase().includes(K)||I.mobileNumber.includes(K)}),O=U.length,k=Math.ceil(O/P),W=w*P,Q=W-P,ne=U.slice(Q,W),le=I=>D(I);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass-panel p-4 rounded-2xl bg-white shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-600",children:e.jsx(Ad,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Print Partners"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage partnership requests"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(di,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search partners...",value:b,onChange:I=>f(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsxs("select",{value:u,onChange:I=>p(I.target.value),className:"w-full sm:w-auto px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]}),e.jsx("button",{onClick:M,disabled:d,className:"p-2 border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 text-gray-600",children:e.jsx(Kn,{size:18,className:d?"animate-spin":""})})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100 text-xs uppercase tracking-wider text-gray-500 font-medium",children:[e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Business Name"}),e.jsx("th",{className:"px-6 py-4",children:"Owner"}),e.jsx("th",{className:"px-6 py-4",children:"Contact"}),e.jsx("th",{className:"px-6 py-4",children:"Submitted"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:d?Array(5).fill(0).map((I,K)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-16"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-32"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-24"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-28"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-20"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-12 ml-auto"})})]},K)):ne.length>0?ne.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors cursor-pointer",onClick:()=>$(I),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold
                                                ${I.verificationStatus==="APPROVED"?"bg-green-100 text-green-700":I.verificationStatus==="REJECTED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${I.verificationStatus==="APPROVED"?"bg-green-500":I.verificationStatus==="REJECTED"?"bg-red-500":"bg-yellow-500"}`}),I.verificationStatus]})}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:I.businessName}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:I.ownerName}),e.jsxs("td",{className:"px-6 py-4 text-gray-500 text-sm",children:[e.jsx("div",{children:I.mobileNumber}),e.jsx("div",{className:"text-xs text-gray-400",children:I.email})]}),e.jsx("td",{className:"px-6 py-4 text-gray-500 text-sm",children:new Date(I.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:K=>K.stopPropagation(),children:[e.jsx("button",{onClick:()=>$(I),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(Er,{size:18})}),I.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>B(I._id),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve",disabled:j===I._id,children:e.jsx(ga,{size:18})}),e.jsx("button",{onClick:()=>ce(I._id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject",disabled:j===I._id,children:e.jsx($l,{size:18})})]})]})})]},I._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(di,{size:32,className:"opacity-20"}),e.jsx("p",{children:"No requests found"})]})})})})]})}),O>0&&e.jsxs("div",{className:"border-t border-gray-100 bg-gray-50 px-6 py-4 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",e.jsxs("span",{className:"font-medium text-gray-900",children:[Q+1,"-",Math.min(W,O)]})," of ",e.jsx("span",{className:"font-medium text-gray-900",children:O})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w>1&&le(w-1),disabled:w===1,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(po,{size:16})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 px-2",children:["Page ",w," of ",Math.max(1,k)]}),e.jsx("button",{onClick:()=>w<k&&le(w+1),disabled:w===k,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(sr,{size:16})})]})]})]}),T&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Full information for ",T.businessName]})]}),e.jsx("button",{onClick:()=>$(null),className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",children:e.jsx(as,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ad,{size:16,className:"text-blue-600"}),"Business Information"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Business Name"}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:T.businessName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"GST Number"}),e.jsx("span",{className:"font-mono text-gray-700",children:T.gstNumber||"N/A"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Address"}),e.jsx("span",{className:"text-gray-700",children:[(me=T.address)==null?void 0:me.fullAddress,(Ve=T.address)==null?void 0:Ve.city,(F=T.address)==null?void 0:F.state,(J=T.address)==null?void 0:J.pincode].filter(Boolean).join(", ")||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ji,{size:16,className:"text-purple-600"}),"Owner Contact"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Owner Name"}),e.jsx("span",{className:"font-medium text-gray-900",children:T.ownerName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Mobile"}),e.jsx("span",{className:"text-gray-700 font-medium",children:T.mobileNumber})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Email"}),e.jsx("span",{className:"text-gray-700 break-all",children:T.email})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Wr,{size:16,className:"text-orange-600"}),"Verification Document"]}),T.proofDocument?e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:e.jsx(Er,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Proof Document"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Visiting Card / Shop Photo"})]})]}),e.jsx("a",{href:T.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-semibold text-gray-700 hover:text-blue-600 hover:border-blue-200 transition-colors shadow-sm",children:"View Original"})]}):e.jsx("div",{className:"p-4 rounded-xl bg-red-50 text-red-600 text-sm",children:"No document uploaded"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-50/50 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ci,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-blue-800",children:"Request Timeline"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submitted on:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(T.createdAt).toLocaleString()})]}),T.verifiedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[T.verificationStatus==="APPROVED"?"Approved":"Rejected"," on:"]}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(T.verifiedAt).toLocaleString()})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50 rounded-b-2xl flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>$(null),className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors shadow-sm",children:"Close"}),T.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>ce(T._id),disabled:j===T._id,className:"px-5 py-2.5 bg-white border border-red-200 text-red-600 rounded-xl font-medium hover:bg-red-50 hover:border-red-300 transition-colors shadow-sm flex items-center gap-2",children:[e.jsx($l,{size:18}),"Reject"]}),e.jsxs("button",{onClick:()=>B(T._id),disabled:j===T._id,className:"px-5 py-2.5 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors shadow-sm flex items-center gap-2",children:[j===T._id?e.jsx(Kn,{className:"animate-spin",size:18}):e.jsx(ga,{size:18}),"Approve"]})]})]})]})})]})},QT=({onSuccess:s,onError:r})=>{var me,Ve,F,J;const[n,l]=y.useState([]),[d,m]=y.useState(!1),[u,p]=y.useState("all"),[b,f]=y.useState(""),[j,v]=y.useState(null),[w,D]=y.useState(1),[P]=y.useState(10),[T,$]=y.useState(null),L=()=>{const I=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:I?`Bearer ${I}`:""}},M=async()=>{m(!0);try{const I=u!=="all"?`?status=${u}`:"",K=await fetch(`${Ae}/auth/corporate-requests${I}`,{headers:L()});if(!K.ok)throw new Error(`Failed to fetch: ${K.status}`);const q=await K.json();if(q.success)l(q.requests||[]),D(1);else throw new Error(q.message||"Failed to fetch requests")}catch(I){console.error("Fetch corporate requests error:",I),r==null||r(I.message||"Failed to fetch corporate requests")}finally{m(!1)}};y.useEffect(()=>{M()},[u]);const B=async I=>{if(window.confirm("Are you sure you want to approve this request?")){v(I);try{const q=await(await fetch(`${Ae}/auth/corporate-requests/${I}/approve`,{method:"POST",headers:L()})).json();if(q.success)s==null||s("Corporate request approved successfully!"),M(),(T==null?void 0:T._id)===I&&$(null);else throw new Error(q.message||"Failed to approve")}catch(K){r==null||r(K.message||"Failed to approve request")}finally{v(null)}}},ce=async I=>{if(window.confirm("Are you sure you want to reject this request?")){v(I);try{const q=await(await fetch(`${Ae}/auth/corporate-requests/${I}/reject`,{method:"POST",headers:L(),body:JSON.stringify({rejectionReason:"Rejected by admin"})})).json();if(q.success)s==null||s("Corporate request rejected successfully!"),M(),(T==null?void 0:T._id)===I&&$(null);else throw new Error(q.message||"Failed to reject")}catch(K){r==null||r(K.message||"Failed to reject request")}finally{v(null)}}},U=n.filter(I=>{if(!b)return!0;const K=b.toLowerCase();return I.organizationName.toLowerCase().includes(K)||I.authorizedPersonName.toLowerCase().includes(K)||I.officialEmail.toLowerCase().includes(K)||I.mobileNumber.includes(K)}),O=U.length,k=Math.ceil(O/P),W=w*P,Q=W-P,ne=U.slice(Q,W),le=I=>D(I);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass-panel p-4 rounded-2xl bg-white shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg text-purple-600",children:e.jsx(ki,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Corporate Requests"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage corporate partnerships"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(di,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search organization...",value:b,onChange:I=>f(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),e.jsxs("select",{value:u,onChange:I=>p(I.target.value),className:"w-full sm:w-auto px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm bg-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]}),e.jsx("button",{onClick:M,disabled:d,className:"p-2 border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 text-gray-600",children:e.jsx(Kn,{size:18,className:d?"animate-spin":""})})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100 text-xs uppercase tracking-wider text-gray-500 font-medium",children:[e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Organization"}),e.jsx("th",{className:"px-6 py-4",children:"Authorized Person"}),e.jsx("th",{className:"px-6 py-4",children:"Contact"}),e.jsx("th",{className:"px-6 py-4",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:d?Array(5).fill(0).map((I,K)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-16"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-32"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-24"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-28"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-20"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-12 ml-auto"})})]},K)):ne.length>0?ne.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors cursor-pointer",onClick:()=>$(I),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold
                                                ${I.verificationStatus==="APPROVED"?"bg-green-100 text-green-700":I.verificationStatus==="REJECTED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${I.verificationStatus==="APPROVED"?"bg-green-500":I.verificationStatus==="REJECTED"?"bg-red-500":"bg-yellow-500"}`}),I.verificationStatus]})}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:I.organizationName}),e.jsxs("td",{className:"px-6 py-4 text-gray-600",children:[I.authorizedPersonName,e.jsx("div",{className:"text-xs text-gray-400",children:I.designation})]}),e.jsxs("td",{className:"px-6 py-4 text-gray-500 text-sm",children:[e.jsx("div",{children:I.mobileNumber}),e.jsx("div",{className:"text-xs text-gray-400",children:I.officialEmail})]}),e.jsx("td",{className:"px-6 py-4 text-gray-500 text-sm",children:I.organizationType}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:K=>K.stopPropagation(),children:[e.jsx("button",{onClick:()=>$(I),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(Er,{size:18})}),I.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>B(I._id),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve",disabled:j===I._id,children:e.jsx(ga,{size:18})}),e.jsx("button",{onClick:()=>ce(I._id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject",disabled:j===I._id,children:e.jsx($l,{size:18})})]})]})})]},I._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(di,{size:32,className:"opacity-20"}),e.jsx("p",{children:"No requests found"})]})})})})]})}),O>0&&e.jsxs("div",{className:"border-t border-gray-100 bg-gray-50 px-6 py-4 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",e.jsxs("span",{className:"font-medium text-gray-900",children:[Q+1,"-",Math.min(W,O)]})," of ",e.jsx("span",{className:"font-medium text-gray-900",children:O})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w>1&&le(w-1),disabled:w===1,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(po,{size:16})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 px-2",children:["Page ",w," of ",Math.max(1,k)]}),e.jsx("button",{onClick:()=>w<k&&le(w+1),disabled:w===k,className:"p-2 border border-gray-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-gray-600",children:e.jsx(sr,{size:16})})]})]})]}),T&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Full information for ",T.organizationName]})]}),e.jsx("button",{onClick:()=>$(null),className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",children:e.jsx(as,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ad,{size:16,className:"text-purple-600"}),"Organization Information"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Organization Name"}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:T.organizationName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Type"}),e.jsx("span",{className:"font-medium text-gray-900",children:T.organizationType})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"GST Number"}),e.jsx("span",{className:"font-mono text-gray-700",children:T.gstNumber||"N/A"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Address"}),e.jsx("span",{className:"text-gray-700",children:[(me=T.address)==null?void 0:me.fullAddress,(Ve=T.address)==null?void 0:Ve.city,(F=T.address)==null?void 0:F.state,(J=T.address)==null?void 0:J.pincode].filter(Boolean).join(", ")||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ji,{size:16,className:"text-blue-600"}),"Authorized Person"]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Name"}),e.jsx("span",{className:"font-medium text-gray-900",children:T.authorizedPersonName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Designation"}),e.jsx("span",{className:"font-medium text-gray-900",children:T.designation})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Mobile"}),e.jsx("span",{className:"text-gray-700 font-medium",children:T.mobileNumber})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:"Official Email"}),e.jsx("span",{className:"text-gray-700 break-all",children:T.officialEmail})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Wr,{size:16,className:"text-orange-600"}),"Verification Document"]}),T.proofDocument?e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:e.jsx(Er,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Proof Document"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Business Registration / ID Proof"})]})]}),e.jsx("a",{href:T.proofDocument,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-semibold text-gray-700 hover:text-blue-600 hover:border-blue-200 transition-colors shadow-sm",children:"View Original"})]}):e.jsx("div",{className:"p-4 rounded-xl bg-red-50 text-red-600 text-sm",children:"No document uploaded"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-50/50 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ci,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-blue-800",children:"Request Timeline"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submitted on:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(T.createdAt).toLocaleString()})]}),T.verifiedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[T.verificationStatus==="APPROVED"?"Approved":"Rejected"," on:"]}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(T.verifiedAt).toLocaleString()})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50 rounded-b-2xl flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>$(null),className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors shadow-sm",children:"Close"}),T.verificationStatus==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>ce(T._id),disabled:j===T._id,className:"px-5 py-2.5 bg-white border border-red-200 text-red-600 rounded-xl font-medium hover:bg-red-50 hover:border-red-300 transition-colors shadow-sm flex items-center gap-2",children:[e.jsx($l,{size:18}),"Reject"]}),e.jsxs("button",{onClick:()=>B(T._id),disabled:j===T._id,className:"px-5 py-2.5 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors shadow-sm flex items-center gap-2",children:[j===T._id?e.jsx(Kn,{className:"animate-spin",size:18}):e.jsx(ga,{size:18}),"Approve"]})]})]})]})})]})},HN=({conflict:s,onResolve:r,onCancel:n})=>{var T,$,L,M,B,ce,U,O,k,W,Q,ne,le,me,Ve;const[l,d]=y.useState(null),[m,u]=y.useState(!1);console.log(" ConflictDetectionModal received data:",{conflict:s,hasConflicts:s==null?void 0:s.hasConflicts,hasConflict:s==null?void 0:s.hasConflict,conflictsArray:s==null?void 0:s.conflicts,payload:s==null?void 0:s.payload});const p=(s==null?void 0:s.hasConflict)||(s==null?void 0:s.hasConflicts);if(!s||!p)return null;const b=s.conflicts&&!s.affectedItems;console.log(" Using format:",b?"OLD":"NEW");let f=s.affectedItems||[],j=s.impactSummary;if(b&&s.conflicts){f=s.conflicts.map(J=>({priceBook:{name:J.priceBookName||"Unknown"},zone:J.zone?{name:J.zoneName||"Zone"}:null,segment:J.segment?{name:J.segmentName||"Segment"}:null,pricing:{currentPrice:J.existingPrice,newZonePrice:J.newPrice,priceDifference:J.priceDifference,percentageDifference:String(J.percentageDifference).includes("%")?J.percentageDifference:J.percentageDifference+"%",direction:J.priceDifference>0?"increase":"decrease"}}));const F=s.product||((T=s.payload)==null?void 0:T.product);j={product:{_id:(F==null?void 0:F._id)||(($=s.payload)==null?void 0:$.productId)||"unknown",name:(F==null?void 0:F.name)||"Product",sku:(F==null?void 0:F.sku)||""},updateLevel:"ZONE",currentMasterPrice:((L=s.conflicts[0])==null?void 0:L.existingPrice)||0,newPrice:((M=s.conflicts[0])==null?void 0:M.newPrice)||0,totalAffectedItems:s.conflicts.length,affectedSegments:[]},console.log(" Transformed data:",{affectedItems:f,impactSummary:j})}const v=s.resolutionOptions||[];if(!j){console.warn(" impactSummary is undefined! Creating default...");const F=s.product||((B=s.payload)==null?void 0:B.product);j={product:{_id:(F==null?void 0:F._id)||((ce=s.payload)==null?void 0:ce.productId)||"unknown",name:(F==null?void 0:F.name)||"Product",sku:(F==null?void 0:F.sku)||""},updateLevel:"ZONE",currentMasterPrice:((O=(U=s.conflicts)==null?void 0:U[0])==null?void 0:O.existingPrice)||0,newPrice:((W=(k=s.conflicts)==null?void 0:k[0])==null?void 0:W.newPrice)||((Q=s.payload)==null?void 0:Q.newPrice)||0,totalAffectedItems:((ne=s.conflicts)==null?void 0:ne.length)||0,affectedSegments:[]}}console.log(" Final render data:",{productName:(le=j==null?void 0:j.product)==null?void 0:le.name,currentPrice:j==null?void 0:j.currentMasterPrice,newPrice:j==null?void 0:j.newPrice,affectedItemsCount:f==null?void 0:f.length});const w=async()=>{if(l){u(!0);try{await r(l)}catch(F){console.error("Resolution error:",F)}finally{u(!1)}}},D=F=>({OVERWRITE:"",PRESERVE:"",RELATIVE:""})[F]||"",P=F=>({OVERWRITE:"#dc2626",PRESERVE:"#10b981",RELATIVE:"#4f46e5"})[F]||"#666";return e.jsx("div",{className:"modal-overlay",onClick:n,children:e.jsxs("div",{className:"modal-content",onClick:F=>F.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:" Pricing Conflicts Detected"}),e.jsxs("p",{className:"modal-subtitle",children:[((me=j==null?void 0:j.product)==null?void 0:me.name)||"Product"," ",(Ve=j==null?void 0:j.product)!=null&&Ve.sku?`(${j.product.sku})`:""]})]}),e.jsx("button",{className:"btn-close",onClick:n,children:""})]}),e.jsxs("div",{className:"impact-summary-section",children:[e.jsxs("div",{className:"summary-card",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("label",{children:"Master Price:"}),e.jsxs("strong",{children:["",((j==null?void 0:j.currentMasterPrice)||0).toFixed(2)]})]}),e.jsx("div",{className:"summary-arrow",children:""}),e.jsxs("div",{className:"summary-item",children:[e.jsx("label",{children:"New Price:"}),e.jsxs("strong",{className:"text-primary",children:["",((j==null?void 0:j.newPrice)||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"affected-count-badge",children:[(j==null?void 0:j.totalAffectedItems)||0," segment",((j==null?void 0:j.totalAffectedItems)||0)!==1?"s":""," with custom pricing"]})]}),e.jsxs("div",{className:"affected-items-section",children:[e.jsx("h4",{children:" Impact on Existing Prices:"}),e.jsx("div",{className:"affected-table-wrapper",children:e.jsxs("table",{className:"affected-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Segment"}),e.jsx("th",{children:"Current Price"}),e.jsx("th",{children:"New Zone Price"}),e.jsx("th",{children:"Difference"})]})}),e.jsx("tbody",{children:f.map((F,J)=>{var q,de,Ce,A,G,ie;const I=((q=F.pricing)==null?void 0:q.currentPrice)||((de=F.pricing)==null?void 0:de.currentEffectivePrice)||0,K=((Ce=F.pricing)==null?void 0:Ce.direction)==="increase";return e.jsxs("tr",{children:[e.jsx("td",{className:"segment-name",children:F.priceBook?e.jsxs("div",{children:[e.jsxs("strong",{children:[" ",F.priceBook.name]}),F.zone&&e.jsxs("div",{style:{fontSize:"0.85em",color:"#666"},children:["Zone: ",F.zone.name]}),F.segment&&e.jsxs("div",{style:{fontSize:"0.85em",color:"#666"},children:["Segment: ",F.segment.name]})]}):F.segment?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:F.segment.name}),F.segment.code&&e.jsx("small",{className:"segment-code",children:F.segment.code})]}):e.jsx("strong",{children:"Unknown"})}),e.jsxs("td",{className:"price-current",children:["",I.toFixed(2)]}),e.jsxs("td",{className:"price-new",children:["",(((A=F.pricing)==null?void 0:A.newZonePrice)||0).toFixed(2)]}),e.jsxs("td",{className:`price-diff ${K?"increase":"decrease"}`,children:[e.jsxs("span",{className:"diff-amount",children:[K?"+":"","",(((G=F.pricing)==null?void 0:G.priceDifference)||0).toFixed(2)]}),e.jsxs("span",{className:"diff-percent",children:["(",K?"+":"",((ie=F.pricing)==null?void 0:ie.percentageDifference)||"0%",")"]})]})]},J)})})]})})]}),e.jsxs("div",{className:"resolution-options",children:[e.jsx("h4",{children:" Choose Resolution Strategy:"}),e.jsx("div",{className:"options-grid",children:v.map(F=>e.jsxs("div",{className:`option-card ${l===F.id?"selected":""}`,onClick:()=>d(F.id),style:{borderColor:l===F.id?P(F.id):"#e0e0e0"},children:[e.jsx("div",{className:"option-icon",style:{background:P(F.id)},children:D(F.id)}),e.jsxs("div",{className:"option-content",children:[e.jsx("h5",{children:F.label}),e.jsx("p",{className:"option-description",children:F.description}),F.id==="RELATIVE"&&F.impact.preview&&F.impact.preview.length>0&&e.jsxs("div",{className:"option-preview",children:[e.jsx("strong",{children:"Preview:"}),e.jsx("ul",{children:F.impact.preview.map((J,I)=>e.jsxs("li",{children:[e.jsxs("span",{className:"preview-segment",children:[J.segment,":"]}),e.jsxs("span",{className:"preview-prices",children:["",J.currentPrice.toFixed(2),"  ",J.newPrice.toFixed(2)]}),e.jsxs("span",{className:"preview-diff",children:["(",J.difference>0?"+":"","",J.difference.toFixed(2),")"]})]},I))})]})]}),l===F.id&&e.jsx("div",{className:"option-checkmark",children:""})]},F.id))})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-cancel",onClick:n,disabled:m,children:"Cancel"}),e.jsx("button",{className:"btn-confirm",onClick:w,disabled:!l||m,style:{background:l?P(l):"#ccc"},children:m?"Applying...":"Apply Resolution"})]})]})})},YT=()=>{const[s,r]=y.useState([]),[n,l]=y.useState(!1),[d,m]=y.useState(!1),[u,p]=y.useState(null),[b,f]=y.useState(!1),[j,v]=y.useState(null),[w,D]=y.useState([]),[P,T]=y.useState(!1),[$,L]=y.useState(!1),[M,B]=y.useState(null),[ce,U]=y.useState([]),[O,k]=y.useState({product:"",basePrice:"",compareAtPrice:""}),[W,Q]=y.useState({name:"",currency:"INR",isDefault:!1,zone:"",segment:"",isMaster:!1,parentBook:"",isOverride:!1,overridePriority:0,description:""}),[ne,le]=y.useState(null),[me,Ve]=y.useState(!1),[F,J]=y.useState(!1),[I,K]=y.useState([]),[q,de]=y.useState([]);y.useEffect(()=>{A(),Ce()},[]);const Ce=async()=>{try{const be={Authorization:`Bearer ${localStorage.getItem("token")}`},[We,at]=await Promise.all([fetch("/api/admin/pricing/geo-zones",{headers:be}),fetch("/api/admin/pricing/user-segments",{headers:be})]);if(We.ok){const _e=await We.json();K(_e.zones||[])}if(at.ok){const _e=await at.json();de(_e.segments||[])}}catch(te){console.error("Failed to fetch lookup data:",te)}},A=async()=>{l(!0);try{const te=localStorage.getItem("token"),be=await fetch("/api/admin/price-books",{headers:{Authorization:`Bearer ${te}`}});if(be.ok){const We=await be.json();r(We.priceBooks||[])}}catch(te){console.error("Failed to fetch price books:",te)}finally{l(!1)}},G=async te=>{T(!0);try{const be=localStorage.getItem("token"),We=await fetch(`/api/admin/price-book-entries?priceBook=${te}`,{headers:{Authorization:`Bearer ${be}`}});if(We.ok){const at=await We.json();D(at.entries||[])}}catch(be){console.error("Failed to fetch price book entries:",be)}finally{T(!1)}},ie=async()=>{try{const te=await fetch("/api/products");if(te.ok){const be=await te.json();U(be.products||be||[])}}catch(te){console.error("Failed to fetch products:",te)}},Re=async te=>{te.preventDefault(),l(!0);try{const be=localStorage.getItem("token"),We=u?`/api/admin/price-books/${u._id}`:"/api/admin/price-books",at=await fetch(We,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${be}`},body:JSON.stringify(W)});if(at.ok)alert(u?"Price book updated!":"Price book created!"),m(!1),fe(),A();else{const _e=await at.json();alert(_e.message||"Failed to save price book")}}catch(be){console.error("Error saving price book:",be),alert("Failed to save price book")}finally{l(!1)}},ge=async te=>{var We,at;if(te.preventDefault(),!j)return;T(!0);const be=localStorage.getItem("token");try{if(!M&&parseFloat(O.basePrice)>0){const Ft={zoneId:((We=j.zone)==null?void 0:We._id)||null,segmentId:((at=j.segment)==null?void 0:at._id)||null,productId:O.product,newPrice:parseFloat(O.basePrice)},As=await fetch("/api/admin/pricing/detect-conflicts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${be}`},body:JSON.stringify(Ft)});if(As.ok){const Vs=await As.json();if(console.log(" Conflict Check Response:",Vs),Vs.success&&Vs.data&&(Vs.data.hasConflict||Vs.data.hasConflicts)){console.log(" CONFLICTS DETECTED! Showing modal with data:",Vs.data),le({...Vs.data,payload:Ft}),Ve(!0),T(!1);return}else console.log(" No conflicts detected, proceeding with save")}}const _e=M?`/api/admin/price-book-entries/${M._id}`:"/api/admin/price-book-entries",At={priceBook:j._id,product:O.product,basePrice:parseFloat(O.basePrice),compareAtPrice:O.compareAtPrice?parseFloat(O.compareAtPrice):void 0},Xt=await fetch(_e,{method:M?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${be}`},body:JSON.stringify(At)});if(Xt.ok)alert(M?"Price updated!":"Product price added!"),L(!1),se(),G(j._id);else{const Ft=await Xt.json();alert(Ft.message||"Failed to save price")}}catch(_e){console.error("Error saving price entry:",_e),alert("Failed to save price")}finally{T(!1)}},R=async te=>{var be,We,at,_e,At;if(ne){J(!0);try{const Xt=localStorage.getItem("token"),Ft=(be=ne.payload)==null?void 0:be.productId,As=(We=ne.payload)==null?void 0:We.newPrice,Vs=((at=ne.impactSummary)==null?void 0:at.currentMasterPrice)||0,$t=(_e=ne.payload)==null?void 0:_e.zoneId,Bs=(At=ne.payload)==null?void 0:At.segmentId,vs=ne.conflicts||[],fa={resolutionId:te,productId:Ft,newPrice:As,oldPrice:Vs,zoneId:$t,segmentId:Bs,conflicts:vs,updateLevel:"ZONE"};console.log(" Sending conflict resolution request:",fa);const $s=await fetch("/api/admin/pricing/resolve-conflict",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Xt}`},body:JSON.stringify(fa)});if($s.ok)alert("Conflict resolved and price saved successfully!"),Ve(!1),L(!1),se(),le(null),j&&G(j._id);else{const Zs=await $s.json();console.error(" Conflict resolution failed:",{status:$s.status,statusText:$s.statusText,error:Zs,sentRequest:fa}),alert(Zs.message||"Failed to resolve conflict")}}catch(Xt){console.error("Error resolving conflict:",Xt),alert("Failed to resolve conflict")}finally{J(!1)}}},re=async te=>{if(confirm("Are you sure you want to delete this price entry?")&&j)try{const be=localStorage.getItem("token"),We=await fetch(`/api/admin/price-book-entries/${te}`,{method:"DELETE",headers:{Authorization:`Bearer ${be}`}});if(We.ok)alert("Price entry deleted!"),G(j._id);else{const at=await We.json();alert(at.message||"Failed to delete price entry")}}catch(be){console.error("Error deleting entry:",be),alert("Failed to delete price entry")}},je=async te=>{if(confirm("Are you sure you want to delete this price book? All associated price entries will also be deleted."))try{const be=localStorage.getItem("token"),We=await fetch(`/api/admin/price-books/${te}`,{method:"DELETE",headers:{Authorization:`Bearer ${be}`}});if(We.ok)alert("Price book deleted!"),A();else{const at=await We.json();alert(at.message||"Failed to delete price book")}}catch(be){console.error("Error deleting price book:",be),alert("Failed to delete price book")}},Ie=te=>{var be,We;p(te),Q({name:te.name,currency:te.currency,isDefault:te.isDefault,zone:((be=te.zone)==null?void 0:be._id)||"",segment:((We=te.segment)==null?void 0:We._id)||"",isMaster:te.isMaster||!1,parentBook:te.parentBook||"",isOverride:te.isOverride||!1,overridePriority:te.overridePriority||0,description:te.description||""}),m(!0)},Be=te=>{v(te),f(!0),G(te._id),ie()},et=te=>{var be;if(!te.product){alert("Cannot edit this entry: Product data is missing. Please delete and recreate this entry.");return}B(te),k({product:te.product._id,basePrice:te.basePrice.toString(),compareAtPrice:((be=te.compareAtPrice)==null?void 0:be.toString())||""}),L(!0)},fe=()=>{Q({name:"",currency:"INR",isDefault:!1,zone:"",segment:"",isMaster:!1,parentBook:"",isOverride:!1,overridePriority:0,description:""}),p(null)},se=()=>{k({product:"",basePrice:"",compareAtPrice:""}),B(null)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(QS,{className:"text-indigo-600"}),"Price Book Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage price books and assign product prices for different pricing strategies"})]}),e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsxs("button",{onClick:()=>{fe(),m(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(Ls,{size:20}),"Create Price Book"]}),e.jsx("button",{onClick:()=>{console.log(" TEST: Manually triggering conflict modal"),le({hasConflict:!0,affectedCount:2,affectedItems:[{segment:{_id:"1",name:"CORPORATE",code:"CORP"},pricing:{masterPrice:1e3,currentPrice:1050,newZonePrice:1200,priceDifference:150,percentageDifference:"14.29%",direction:"increase"}},{segment:{_id:"2",name:"RETAIL",code:"RET"},pricing:{masterPrice:1e3,currentEffectivePrice:900,newZonePrice:1200,priceDifference:300,percentageDifference:"33.33%",direction:"increase"}}],impactSummary:{product:{_id:"test123",name:"Test Product",sku:"TEST-001"},updateLevel:"ZONE",currentMasterPrice:1e3,newPrice:1200,totalAffectedItems:2,affectedSegments:["CORPORATE","RETAIL"]},resolutionOptions:[{id:"OVERWRITE",label:"Force Overwrite",description:"Delete all overrides",impact:{warning:"Will delete 2 items",itemsDeleted:2}},{id:"PRESERVE",label:"Preserve Overrides",description:"Keep existing prices",impact:{warning:"Will preserve 2 items",itemsPreserved:2}}],payload:{productId:"test123",newPrice:1200}}),Ve(!0)},className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700",children:" TEST MODAL"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n&&s.length===0?e.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"Loading..."}):s.length===0?e.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"No price books found. Create one to get started."}):s.map(te=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-2 border-gray-200 hover:border-indigo-300 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[te.name,te.isDefault&&e.jsx(Ki,{size:16,className:"text-yellow-500 fill-yellow-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 font-mono",children:te.currency}),e.jsxs("div",{className:"flex gap-2 mt-1 flex-wrap",children:[te.zone&&e.jsxs("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-0.5 rounded",children:["Zone: ",te.zone.name]}),te.segment&&e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:["Segment: ",te.segment.name]})]})]}),te.createdAt&&e.jsx("div",{className:"bg-indigo-50 text-indigo-700 px-2 py-1 rounded text-xs font-medium",children:new Date(te.createdAt).toLocaleDateString()})]}),e.jsx("div",{className:"flex gap-2 mb-4",children:te.isDefault&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs font-medium",children:"Default"})}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs("button",{onClick:()=>Be(te),className:"flex-1 bg-green-50 text-green-600 px-3 py-2 rounded hover:bg-green-100 flex items-center justify-center gap-2",children:[e.jsx(Er,{size:16}),"Prices"]}),e.jsxs("button",{onClick:()=>Ie(te),className:"flex-1 bg-blue-50 text-blue-600 px-3 py-2 rounded hover:bg-blue-100 flex items-center justify-center gap-2",children:[e.jsx(kd,{size:16}),"Edit"]}),e.jsxs("button",{onClick:()=>je(te._id),className:"flex-1 bg-red-50 text-red-600 px-3 py-2 rounded hover:bg-red-100 flex items-center justify-center gap-2",children:[e.jsx(Gs,{size:16}),"Delete"]})]})]},te._id))}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:u?"Edit Price Book":"Create Price Book"}),e.jsxs("form",{onSubmit:Re,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price Book Name *"}),e.jsx("input",{type:"text",value:W.name,onChange:te=>Q({...W,name:te.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Standard Pricing, Seasonal Sale",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency *"}),e.jsxs("select",{value:W.currency,onChange:te=>Q({...W,currency:te.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"INR",children:"INR ()"}),e.jsx("option",{value:"USD",children:"USD ($)"}),e.jsx("option",{value:"EUR",children:"EUR ()"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Geo Zone (Optional)"}),e.jsxs("select",{value:W.zone,onChange:te=>Q({...W,zone:te.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"-- No Zone (Global) --"}),I.map(te=>e.jsx("option",{value:te._id,children:te.name},te._id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Limit these prices to a specific geographic area"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"User Segment (Optional)"}),e.jsxs("select",{value:W.segment,onChange:te=>Q({...W,segment:te.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"-- No Segment (All Users) --"}),q.map(te=>e.jsxs("option",{value:te._id,children:[te.name," (",te.code,")"]},te._id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Limit these prices to a specific group of customers"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:W.isMaster,onChange:te=>Q({...W,isMaster:te.target.checked}),className:"rounded text-indigo-600"}),e.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Master Price Book"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"If checked, this will be the base for all other calculations. Only one master should exist."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:W.isDefault,onChange:te=>Q({...W,isDefault:te.target.checked}),className:"rounded"}),e.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[e.jsx(Ki,{size:16,className:"text-yellow-500"}),"Set as Default Price Book"]})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6 mt-1",children:"This price book will be used as the default base for pricing calculations"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),fe()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(nc,{size:18}),n?"Saving...":"Save"]})]})]})]})}),b&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[j.name," - Product Prices"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage product prices for this price book"})]}),e.jsx("button",{onClick:()=>{f(!1),v(null),D([])},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(as,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{se(),L(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Ls,{size:20}),"Add Product Price"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Base Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Compare At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:P?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:'No products added yet. Click "Add Product Price" to get started.'})}):w.map(te=>{var be,We,at,_e;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[((be=te.product)==null?void 0:be.image)&&e.jsx("img",{src:te.product.image,alt:te.product.name,className:"w-10 h-10 rounded object-cover"}),e.jsx("span",{className:"font-medium",children:((We=te.product)==null?void 0:We.name)||"Unknown Product"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:((_e=(at=te.product)==null?void 0:at.category)==null?void 0:_e.name)||"-"}),e.jsxs("td",{className:"px-6 py-4 font-semibold text-green-600",children:[j.currency," ",te.basePrice.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:te.compareAtPrice?`${j.currency} ${te.compareAtPrice.toFixed(2)}`:"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>et(te),className:"text-blue-600 hover:text-blue-800",children:e.jsx(kd,{size:18})}),e.jsx("button",{onClick:()=>re(te._id),className:"text-red-600 hover:text-red-800",children:e.jsx(Gs,{size:18})})]})})]},te._id)})})]})})]})]})}),$&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:M?"Edit Product Price":"Add Product Price"}),e.jsxs("form",{onSubmit:ge,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product *"}),e.jsxs("select",{value:O.product,onChange:te=>k({...O,product:te.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,disabled:!!M,children:[e.jsx("option",{value:"",children:"Select Product"}),ce.map(te=>e.jsx("option",{value:te._id,children:te.name},te._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Base Price (",j.currency,") *"]}),e.jsx("input",{type:"number",step:"0.01",value:O.basePrice,onChange:te=>k({...O,basePrice:te.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"0.00",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Compare At Price (",j.currency,")"]}),e.jsx("input",{type:"number",step:"0.01",value:O.compareAtPrice,onChange:te=>k({...O,compareAtPrice:te.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"0.00 (optional)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Original price before discount (for showing savings)"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{L(!1),se()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:P,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(nc,{size:18}),P?"Saving...":"Save"]})]})]})]})}),(console.log(" Modal Render Check:",{showConflictModal:me,hasConflictData:!!ne,conflictData:ne}),null),me&&ne&&e.jsx(HN,{conflict:ne,onResolve:R,onCancel:()=>{Ve(!1),le(null),T(!1)}})]})},dd=[{value:"geo_zone",label:"Geo Zone",type:"select",optionsSrc:"zones"},{value:"user_segment",label:"User Segment",type:"select",optionsSrc:"segments"},{value:"category",label:"Product Category",type:"select",optionsSrc:"categories"},{value:"product_id",label:"Specific Product",type:"select",optionsSrc:"products"},{value:"quantity",label:"Cart Quantity",type:"number"},{value:"order_value",label:"Order Value",type:"number"},{value:"day_of_week",label:"Day of Week (0-6)",type:"select",options:[{value:"0",label:"Sunday"},{value:"1",label:"Monday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"}]}],WT=[{value:"EQUALS",label:"Equals (=)"},{value:"NOT_EQUALS",label:"Not Equals (!=)"},{value:"GT",label:"Greater Than (>)"},{value:"LT",label:"Less Than (<)"},{value:"GTE",label:"Greater/Equal (>=)"},{value:"LTE",label:"Less/Equal (<=)"},{value:"IN",label:"In List (comma separated)"},{value:"CONTAINS",label:"Contains Text"}],ZT=()=>{var de,Ce;const[s,r]=y.useState([]),[n,l]=y.useState(!1),[d,m]=y.useState(null),[u,p]=y.useState(!1),[b,f]=y.useState([]),[j,v]=y.useState([]),[w,D]=y.useState([]),[P,T]=y.useState([]),[$,L]=y.useState([]),[M,B]=y.useState([]),[ce,U]=y.useState("AND"),[O,k]=y.useState({appliesTo:"GLOBAL",modifierType:"PERCENT_DEC",value:0,priority:0,isActive:!0,isStackable:!0,reason:""});y.useEffect(()=>{W(),Q()},[]);const W=async()=>{p(!0);try{const G=await(await fetch("/api/admin/price-modifiers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();r(G.modifiers||[])}catch(A){console.error("Failed to fetch modifiers:",A)}finally{p(!1)}},Q=async()=>{try{const[A,G,ie,Re,ge]=await Promise.all([fetch("/api/admin/pricing/geo-zones",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/user-segments",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/products",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/attribute-types",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/admin/pricing/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]),[R,re,je,Ie,Be]=await Promise.all([A.json(),G.json(),ie.json(),Re.json(),ge.json()]);f(R.zones||[]),v(re.segments||[]),D(je.products||[]),T(Ie.attributeTypes||[]),L(Be.categories||[])}catch(A){console.error("Failed to fetch lookup data:",A)}},ne=async()=>{try{const A=d?`/api/admin/price-modifiers/${d._id}`:"/api/admin/price-modifiers";(await fetch(A,{method:d?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(O)})).ok&&(W(),l(!1),m(null),k({appliesTo:"GLOBAL",modifierType:"PERCENT_DEC",value:0,priority:0,isActive:!0,isStackable:!0,reason:"",conditions:null}),B([]))}catch(A){console.error("Failed to save modifier:",A)}},le=async A=>{if(confirm("Delete this modifier?"))try{(await fetch(`/api/admin/price-modifiers/${A}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok&&W()}catch(G){console.error("Failed to delete modifier:",G)}},me=A=>{if(m(A),k({...A,validFrom:A.validFrom?new Date(A.validFrom).toISOString().split("T")[0]:void 0,validTo:A.validTo?new Date(A.validTo).toISOString().split("T")[0]:void 0}),A.appliesTo==="COMBINATION"&&A.conditions){const G=[],ie=A.conditions.OR?"OR":"AND";U(ie);const Re=ge=>{ge.AND?ge.AND.forEach(R=>Re(R)):ge.OR?ge.OR.forEach(R=>Re(R)):ge.field&&G.push({id:Math.random().toString(36).substr(2,9),field:ge.field,operator:ge.operator,value:Array.isArray(ge.value)?ge.value.join(","):String(ge.value)})};Re(A.conditions),G.length===0&&G.push({id:"1",field:"geo_zone",operator:"EQUALS",value:""}),B(G)}else B([]),U("AND");l(!0)},Ve=()=>{B([...M,{id:Math.random().toString(36).substr(2,9),field:"geo_zone",operator:"EQUALS",value:""}])},F=A=>{B(M.filter(G=>G.id!==A))},J=(A,G,ie)=>{const Re=M.map(ge=>ge.id===A?{...ge,[G]:ie}:ge);B(Re),I(Re)},I=A=>{if(A.length===0){k(ie=>({...ie,conditions:null}));return}const G=A.map(ie=>{let Re=ie.value;return ie.operator==="IN"?Re=ie.value.split(",").map(ge=>ge.trim()):!isNaN(Number(ie.value))&&ie.value!==""&&(Re=Number(ie.value)),{field:ie.field,operator:ie.operator,value:Re}});k(ie=>({...ie,conditions:{[ce]:G}}))},K=A=>({GLOBAL:"bg-purple-100 text-purple-800",ZONE:"bg-blue-100 text-blue-800",SEGMENT:"bg-green-100 text-green-800",PRODUCT:"bg-orange-100 text-orange-800",ATTRIBUTE:"bg-pink-100 text-pink-800"})[A]||"bg-gray-100 text-gray-800",q=A=>A.includes("INC")?"":A.includes("DEC")?"":"";return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Price Modifier Rules"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Create dynamic pricing rules for different scopes"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{m(null),k({appliesTo:"GLOBAL",modifierType:"PERCENT_DEC",value:0,priority:0,isActive:!0,isStackable:!0,reason:"",conditions:null}),B([{id:"1",field:"geo_zone",operator:"EQUALS",value:""}]),l(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(Ls,{className:"w-4 h-4"}),"Create New Modifier"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Active Modifiers"}),u?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading modifiers..."}):s.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No modifiers yet. Create one to get started!"}):e.jsx("div",{className:"space-y-4",children:s.map(A=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${K(A.appliesTo)}`,children:A.appliesTo}),e.jsx("span",{className:"text-2xl",children:q(A.modifierType)}),e.jsx("span",{className:"font-semibold text-lg",children:A.modifierType.includes("PERCENT")?`${A.value}%`:`${A.value}`}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(Priority: ",A.priority,")"]}),!A.isActive&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:"Inactive"})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:A.reason||"No description"}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600",children:[A.geoZone&&e.jsxs("span",{children:["Zone: ",A.geoZone.name||A.geoZone]}),A.userSegment&&e.jsxs("span",{children:["Segment: ",A.userSegment.name||A.userSegment]}),A.product&&e.jsxs("span",{children:["Product: ",A.product.name||A.product]}),A.attributeType&&e.jsxs("span",{children:["Attribute: ",A.attributeType.attributeName||A.attributeType]}),A.minQuantity&&e.jsxs("span",{children:["Min Qty: ",A.minQuantity]}),A.maxQuantity&&e.jsxs("span",{children:["Max Qty: ",A.maxQuantity]}),A.validFrom&&e.jsxs("span",{children:["From: ",new Date(A.validFrom).toLocaleDateString()]}),A.validTo&&e.jsxs("span",{children:["To: ",new Date(A.validTo).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>me(A),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>A._id&&le(A._id),className:"px-3 py-1 text-red-600 hover:bg-red-50 rounded",children:"Delete"})]})]})},A._id))})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-semibold",children:[d?"Edit":"Create"," Price Modifier"]}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(as,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Applies To (Scope) *"}),e.jsxs("select",{value:O.appliesTo,onChange:A=>k({...O,appliesTo:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"GLOBAL",children:"Global (All Products)"}),e.jsx("option",{value:"ZONE",children:"Geo Zone"}),e.jsx("option",{value:"SEGMENT",children:"User Segment"}),e.jsx("option",{value:"PRODUCT",children:"Specific Product"}),e.jsx("option",{value:"ATTRIBUTE",children:"Product Attribute"}),e.jsx("option",{value:"COMBINATION",children:"Combination Rule (Advanced)"})]})]}),O.appliesTo==="ZONE"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Geo Zone *"}),e.jsxs("select",{value:O.geoZone||"",onChange:A=>k({...O,geoZone:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a zone..."}),b.map(A=>e.jsx("option",{value:A._id,children:A.name},A._id))]})]}),O.appliesTo==="SEGMENT"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Segment *"}),e.jsxs("select",{value:O.userSegment||"",onChange:A=>k({...O,userSegment:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a segment..."}),j.map(A=>e.jsxs("option",{value:A._id,children:[A.name," (",A.code,")"]},A._id))]})]}),O.appliesTo==="PRODUCT"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),e.jsxs("select",{value:O.product||"",onChange:A=>k({...O,product:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a product..."}),w.map(A=>e.jsx("option",{value:A._id,children:A.name},A._id))]})]}),O.appliesTo==="ATTRIBUTE"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attribute Type *"}),e.jsxs("select",{value:O.attributeType||"",onChange:A=>k({...O,attributeType:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select an attribute..."}),P.map(A=>e.jsx("option",{value:A._id,children:A.attributeName},A._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attribute Value"}),e.jsx("input",{type:"text",value:O.attributeValue||"",onChange:A=>k({...O,attributeValue:A.target.value}),placeholder:"e.g., GLOSSY, A4, etc.",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to apply to all values of this attribute"})]})]}),O.appliesTo==="COMBINATION"&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logic Operator"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{U("AND"),I(M)},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${ce==="AND"?"bg-blue-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"AND (All must match)"}),e.jsx("button",{type:"button",onClick:()=>{U("OR"),I(M)},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${ce==="OR"?"bg-green-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"OR (Any can match)"})]})]}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rule Conditions (",ce==="AND"?"ALL must match":"ANY can match",")"]}),e.jsx("div",{className:"space-y-3",children:M.map(A=>{var G,ie,Re,ge;return e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("select",{value:A.field,onChange:R=>J(A.id,"field",R.target.value),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-sm",children:dd.map(R=>e.jsx("option",{value:R.value,children:R.label},R.value))}),e.jsx("select",{value:A.operator,onChange:R=>J(A.id,"operator",R.target.value),className:"w-32 px-2 py-1.5 border border-gray-300 rounded text-sm",children:WT.map(R=>e.jsx("option",{value:R.value,children:R.label},R.value))}),e.jsx("div",{className:"flex-1",children:((G=dd.find(R=>R.value===A.field))==null?void 0:G.optionsSrc)==="zones"?e.jsxs("select",{value:A.value,onChange:R=>J(A.id,"value",R.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Zone"}),b.map(R=>e.jsx("option",{value:R._id,children:R.name},R._id))]}):((ie=dd.find(R=>R.value===A.field))==null?void 0:ie.optionsSrc)==="segments"?e.jsxs("select",{value:A.value,onChange:R=>J(A.id,"value",R.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Segment"}),j.map(R=>e.jsx("option",{value:R._id,children:R.name},R._id))]}):((Re=dd.find(R=>R.value===A.field))==null?void 0:Re.optionsSrc)==="categories"?e.jsxs("select",{value:A.value,onChange:R=>J(A.id,"value",R.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Category"}),$.map(R=>e.jsx("option",{value:R._id,children:R.name},R._id))]}):((ge=dd.find(R=>R.value===A.field))==null?void 0:ge.optionsSrc)==="products"?e.jsxs("select",{value:A.value,onChange:R=>J(A.id,"value",R.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Product"}),w.map(R=>e.jsx("option",{value:R._id,children:R.name},R._id))]}):e.jsx("input",{type:"text",value:A.value,onChange:R=>J(A.id,"value",R.target.value),placeholder:"Value",className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm"})}),e.jsx("button",{onClick:()=>F(A.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded",title:"Remove Condition",children:e.jsx(as,{className:"w-4 h-4"})})]},A.id)})}),e.jsxs("button",{onClick:Ve,className:"mt-3 text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(Ls,{className:"w-3 h-3"})," Add Condition"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modifier Type *"}),e.jsxs("select",{value:O.modifierType,onChange:A=>k({...O,modifierType:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"PERCENT_INC",children:"Percentage Increase (+%)"}),e.jsx("option",{value:"PERCENT_DEC",children:"Percentage Decrease (-%)"}),e.jsx("option",{value:"FLAT_INC",children:"Flat Amount Increase (+)"}),e.jsx("option",{value:"FLAT_DEC",children:"Flat Amount Decrease (-)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value *"}),e.jsx("input",{type:"number",value:O.value||"",onChange:A=>k({...O,value:parseFloat(A.target.value)}),placeholder:(de=O.modifierType)!=null&&de.includes("PERCENT")?"10":"500",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(Ce=O.modifierType)!=null&&Ce.includes("PERCENT")?"Enter percentage (e.g., 10 for 10%)":"Enter flat amount (e.g., 500 for 500)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("input",{type:"number",value:O.priority||0,onChange:A=>k({...O,priority:parseInt(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher priority modifiers are applied first"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Quantity"}),e.jsx("input",{type:"number",value:O.minQuantity||"",onChange:A=>k({...O,minQuantity:parseInt(A.target.value)||void 0}),placeholder:"No minimum",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Quantity"}),e.jsx("input",{type:"number",value:O.maxQuantity||"",onChange:A=>k({...O,maxQuantity:parseInt(A.target.value)||void 0}),placeholder:"No maximum",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),e.jsx("input",{type:"date",value:O.validFrom||"",onChange:A=>k({...O,validFrom:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid To"}),e.jsx("input",{type:"date",value:O.validTo||"",onChange:A=>k({...O,validTo:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason / Description *"}),e.jsx("textarea",{value:O.reason||"",onChange:A=>k({...O,reason:A.target.value}),placeholder:"e.g., Summer Sale 2024, Corporate Bulk Discount, etc.",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"stacking-controls space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Modifier Behavior"}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-3 bg-white rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:O.isActive,onChange:A=>k({...O,isActive:A.target.checked}),className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Active"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Modifier is currently enabled and will be applied"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-3 bg-white rounded-lg border-2 border-gray-200 hover:border-green-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:O.isStackable,onChange:A=>{const G=A.target.checked;k({...O,isStackable:G})},className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Allow Stacking"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Can combine with other modifiers (e.g., 5% + 10% = 15%)"})]})]}),O.isStackable&&e.jsx("div",{className:"info-badge bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-800 flex items-start gap-2",children:[e.jsx("span",{className:"text-base",children:""}),e.jsx("span",{children:"Stackable modifiers can be combined. If a user qualifies for multiple stackable modifiers, all will be applied sequentially."})]})}),!O.isStackable&&e.jsx("div",{className:"warning-badge bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-yellow-800 flex items-start gap-2",children:[e.jsx("span",{className:"text-base",children:""}),e.jsx("span",{children:"Non-stackable modifiers will be applied based on priority. Only the highest priority modifier will be used."})]})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:ne,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[e.jsx(nc,{className:"w-4 h-4"}),d?"Update":"Create"," Modifier"]})]})]})})]})},JT=()=>{var W,Q,ne,le;const[s,r]=y.useState([]),[n,l]=y.useState(!1),[d,m]=y.useState(null),[u,p]=y.useState(null),[b,f]=y.useState(!1),[j,v]=y.useState(""),[w,D]=y.useState(""),[P,T]=y.useState(""),[$,L]=y.useState(1),[M,B]=y.useState({currentPage:1,totalPages:1,totalLogs:0,limit:20});y.useEffect(()=>{ce()},[$,j,w,P]);const ce=async()=>{l(!0),m(null);try{const me=new URLSearchParams({page:$.toString(),limit:"20"});j&&me.append("search",j),w&&me.append("startDate",w),P&&me.append("endDate",P);const F=await(await fetch(`${Ae}/admin/pricing-logs?${me}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();F.success?(r(F.logs||[]),B(F.pagination)):m(F.message||"Failed to fetch logs")}catch(me){console.error("Failed to fetch pricing logs:",me),m("Failed to fetch pricing logs. Please try again.")}finally{l(!1)}},U=me=>{p(me),f(!0)},O=me=>new Date(me).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=me=>`${me.toFixed(2)}`;return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Wr,{className:"w-7 h-7 md:w-8 md:h-8"}),"Pricing Audit Logs"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"View all pricing calculations and applied modifiers"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:j,onChange:me=>{v(me.target.value),L(1)},placeholder:"Order, product, user...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ed,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"date",value:w,onChange:me=>{D(me.target.value),L(1)},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ed,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"date",value:P,onChange:me=>{T(me.target.value),L(1)},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})}),d&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start gap-2",children:[e.jsx(bs,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:d})]}),n?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[e.jsx(Qt,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading pricing logs..."})]}):s.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[e.jsx(Wr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No pricing logs found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Logs will appear here when orders are created"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:s.map(me=>{var Ve,F,J,I,K;return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[((Ve=me.product)==null?void 0:Ve.image)&&e.jsx("img",{src:me.product.image,alt:me.product.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 text-lg",children:["Order #",me.orderNumber]}),e.jsx("p",{className:"text-gray-700 mt-1",children:((F=me.product)==null?void 0:F.name)||"Unknown Product"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(J=me.user)==null?void 0:J.name," (",(I=me.user)==null?void 0:I.email,")"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["Qty: ",me.quantity]}),e.jsx("span",{children:""}),e.jsx("span",{className:"font-semibold text-green-600",children:k(me.totalPrice)}),e.jsx("span",{children:""}),e.jsxs("span",{children:[((K=me.modifiers)==null?void 0:K.length)||0," modifiers"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:O(me.createdAt)})]})]})}),e.jsxs("button",{onClick:()=>U(me),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx(Er,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"View Details"}),e.jsx("span",{className:"sm:hidden",children:"Details"})]})]})},me.orderId)})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing page ",M.currentPage," of ",M.totalPages," (",M.totalLogs," total logs)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>L(me=>Math.max(1,me-1)),disabled:$===1,className:"flex items-center gap-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(po,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),e.jsx("span",{className:"px-4 py-2 text-sm font-medium",children:$}),e.jsxs("button",{onClick:()=>L(me=>Math.min(M.totalPages,me+1)),disabled:$===M.totalPages,className:"flex items-center gap-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(sr,{className:"w-4 h-4"})]})]})]})})]}),b&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 md:p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Pricing Details"}),e.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(as,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Order Information"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Order Number:"}),e.jsxs("span",{className:"font-semibold",children:["#",u.orderNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Product:"}),e.jsx("span",{className:"font-semibold",children:(W=u.product)==null?void 0:W.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"font-semibold",children:(Q=u.user)==null?void 0:Q.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"font-semibold",children:(ne=u.user)==null?void 0:ne.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"font-semibold",children:O(u.createdAt)})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3",children:["Applied Modifiers (",((le=u.modifiers)==null?void 0:le.length)||0,")"]}),u.modifiers&&u.modifiers.length>0?e.jsx("div",{className:"space-y-3",children:u.modifiers.map((me,Ve)=>e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:[me.scope," Modifier"]}),e.jsxs("span",{className:`text-sm font-bold ${me.afterAmount>me.beforeAmount?"text-red-600":"text-green-600"}`,children:[me.afterAmount>me.beforeAmount?"+":"",k(me.afterAmount-me.beforeAmount)]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:me.reason||"No reason provided"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsxs("span",{children:["Before: ",k(me.beforeAmount)]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["After: ",k(me.afterAmount)]})]})]},me._id))}):e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 rounded-lg p-4",children:"No modifiers were applied to this order"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Price Summary"}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total Payable"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:k(u.totalPrice)})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Quantity: ",u.quantity," units"]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 p-4 md:p-6",children:e.jsx("button",{onClick:()=>f(!1),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})},KT=()=>{const[s,r]=y.useState([]),[n,l]=y.useState(!1),[d,m]=y.useState(!1),[u,p]=y.useState(null),[b,f]=y.useState({name:"",code:"",currency_code:"INR",level:"COUNTRY",pincodeRanges:[{start:0,end:0}],isActive:!0});y.useEffect(()=>{j()},[]);const j=async()=>{l(!0);try{const U=localStorage.getItem("token"),O=await fetch("/api/admin/pricing/geo-zones",{headers:{Authorization:`Bearer ${U}`}});if(O.ok){const k=await O.json();r(k.zones||[])}}catch(U){console.error("Failed to fetch geo zones:",U)}finally{l(!1)}},v=async U=>{U.preventDefault(),l(!0);try{const O=localStorage.getItem("token"),k=u?`/api/admin/pricing/geo-zones/${u._id}`:"/api/admin/pricing/geo-zones",W=await fetch(k,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify(b)});if(W.ok)alert(u?"Geo zone updated!":"Geo zone created!"),m(!1),L(),j();else{const Q=W.headers.get("content-type");let ne="Failed to save geo zone";if(Q&&Q.includes("application/json"))try{ne=(await W.json()).message||ne}catch(le){console.error("Failed to parse error response:",le)}else try{const le=await W.text();le&&(ne=le)}catch(le){console.error("Failed to parse text response:",le)}alert(ne)}}catch(O){console.error("Error saving geo zone:",O),alert("Failed to save geo zone")}finally{l(!1)}},w=async(U,O=!1)=>{if(!(!O&&!confirm("Are you sure you want to delete this geo zone?")))try{const k=localStorage.getItem("token"),W=O?`/api/admin/pricing/geo-zones/${U}?force=true`:`/api/admin/pricing/geo-zones/${U}`,Q=await fetch(W,{method:"DELETE",headers:{Authorization:`Bearer ${k}`}});if(Q.ok)alert("Geo zone deleted!"),j();else{const ne=await Q.json();if(Q.status===400&&ne.requiresConfirmation){if(confirm(`${ne.message}

Do you want to FORCE DELETE? This action cannot be undone.`)){await w(U,!0);return}}else alert(ne.message||"Failed to delete geo zone")}}catch(k){console.error("Error deleting geo zone:",k),alert("Failed to delete geo zone")}},D=U=>{p(U),f({name:U.name,code:U.code,currency_code:U.currency_code||U.currency||"INR",level:U.level||"COUNTRY",pincodeRanges:U.pincodeRanges.length>0?U.pincodeRanges:[{start:0,end:0}],isActive:U.isActive}),m(!0)},P=U=>{p(null),f({name:`${U.name} (Copy)`,code:`${U.code}_COPY`,currency_code:U.currency_code||U.currency||"INR",level:U.level||"COUNTRY",pincodeRanges:U.pincodeRanges.map(O=>({...O})),isActive:!0}),m(!0)},T=async U=>{var W;const O=(W=U.target.files)==null?void 0:W[0];if(!O)return;const k=new FileReader;k.onload=async Q=>{var ne;try{const le=(ne=Q.target)==null?void 0:ne.result;if(!le)return;const me=le.split(`
`),Ve=me[0].split(",").map(q=>q.trim()),F=me.slice(1).filter(q=>q.trim()).map(q=>{const de=q.split(",").map(A=>A.trim()),Ce={};return Ve.forEach((A,G)=>{Ce[A]=de[G]}),Ce.pincodeStart&&(Ce.pincodeStart=parseInt(Ce.pincodeStart)),Ce.pincodeEnd&&(Ce.pincodeEnd=parseInt(Ce.pincodeEnd)),Ce});if(F.length===0){alert("No valid data found in CSV");return}l(!0);const J=localStorage.getItem("token"),K=await(await fetch("/api/admin/pricing/geo-zones/bulk-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`},body:JSON.stringify({zones:F})})).json();K.success?(alert(`Import successful!
Created: ${K.results.created}
Updated: ${K.results.updated}
Failed: ${K.results.failed}`),j()):alert("Import failed: "+K.message)}catch(le){console.error("Import error:",le),alert("Error processing file")}finally{l(!1),U.target.value=""}},k.readAsText(O)},$=()=>{const U=["name,code,level,currency_code,pincodeStart,pincodeEnd"],O="South Zone,SZ,DISTRICT,INR,500000,509999",k=new Blob([[U,O].join(`
`)],{type:"text/csv"}),W=window.URL.createObjectURL(k),Q=document.createElement("a");Q.href=W,Q.download="geo_zones_template.csv",Q.click()},L=()=>{f({name:"",code:"",currency_code:"INR",level:"COUNTRY",pincodeRanges:[{start:0,end:0}],isActive:!0}),p(null)},M=()=>{f({...b,pincodeRanges:[...b.pincodeRanges,{start:0,end:0}]})},B=U=>{f({...b,pincodeRanges:b.pincodeRanges.filter((O,k)=>k!==U)})},ce=(U,O,k)=>{const W=[...b.pincodeRanges];W[U][O]=k,f({...b,pincodeRanges:W})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Jn,{className:"text-blue-600"}),"Geo Zone Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage geographical zones for location-based pricing"})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 justify-between items-center",children:[e.jsxs("button",{onClick:()=>{L(),m(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Ls,{size:20}),"Create Geo Zone"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:$,className:"text-gray-600 hover:text-gray-800 px-3 py-2 border rounded-lg flex items-center gap-2",title:"Download CSV Template",children:[e.jsx(Wr,{size:18}),"Template"]}),e.jsxs("label",{className:"cursor-pointer bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Jo,{size:20}),"Import CSV",e.jsx("input",{type:"file",accept:".csv",onChange:T,className:"hidden"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Currency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pincode Ranges"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No geo zones found. Create one to get started."})}):s.map(U=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:U.name}),e.jsx("td",{className:"px-6 py-4",children:U.code}),e.jsx("td",{className:"px-6 py-4",children:U.currency_code||U.currency}),e.jsx("td",{className:"px-6 py-4",children:U.pincodeRanges&&U.pincodeRanges.length>0?U.pincodeRanges.map((O,k)=>e.jsxs("div",{className:"text-sm",children:[O.start," - ",O.end]},k)):e.jsx("span",{className:"text-gray-400 text-sm",children:"No ranges"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${U.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:U.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>D(U),className:"text-blue-600 hover:text-blue-800",children:e.jsx(kd,{size:18})}),e.jsx("button",{onClick:()=>P(U),className:"text-green-600 hover:text-green-800",title:"Duplicate Zone",children:e.jsx(Gj,{size:18})}),e.jsx("button",{onClick:()=>w(U._id),className:"text-red-600 hover:text-red-800",title:"Delete Zone",children:e.jsx(Gs,{size:18})})]})})]},U._id))})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:u?"Edit Geo Zone":"Create Geo Zone"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Zone Name *"}),e.jsx("input",{type:"text",value:b.name,onChange:U=>f({...b,name:U.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., North India",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Zone Code *"}),e.jsx("input",{type:"text",value:b.code,onChange:U=>f({...b,code:U.target.value.toUpperCase()}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., NORTH",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency Code (ISO 4217) *"}),e.jsxs("select",{value:b.currency_code,onChange:U=>f({...b,currency_code:U.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"INR",children:"INR ()"}),e.jsx("option",{value:"USD",children:"USD ($)"}),e.jsx("option",{value:"EUR",children:"EUR ()"}),e.jsx("option",{value:"GBP",children:"GBP ()"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Zone Level *"}),e.jsxs("select",{value:b.level,onChange:U=>f({...b,level:U.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"COUNTRY",children:"Country"}),e.jsx("option",{value:"STATE",children:"State"}),e.jsx("option",{value:"UT",children:"Union Territory"}),e.jsx("option",{value:"DISTRICT",children:"District"}),e.jsx("option",{value:"CITY",children:"City"}),e.jsx("option",{value:"ZIP",children:"ZIP/Pincode"}),e.jsx("option",{value:"ZONE",children:"Zone"}),e.jsx("option",{value:"REGION",children:"Region"})]})]}),["DISTRICT","CITY","ZIP"].includes(b.level)&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pincode Ranges *"}),b.pincodeRanges.map((U,O)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"number",value:U.start||"",onChange:k=>ce(O,"start",parseInt(k.target.value)),className:"flex-1 border rounded-lg px-3 py-2",placeholder:"Start (e.g., 110000)",required:!0}),e.jsx("span",{className:"self-center",children:"-"}),e.jsx("input",{type:"number",value:U.end||"",onChange:k=>ce(O,"end",parseInt(k.target.value)),className:"flex-1 border rounded-lg px-3 py-2",placeholder:"End (e.g., 119999)",required:!0}),b.pincodeRanges.length>1&&e.jsx("button",{type:"button",onClick:()=>B(O),className:"text-red-600 hover:text-red-800",children:e.jsx(as,{size:20})})]},O)),e.jsxs("button",{type:"button",onClick:M,className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",children:[e.jsx(Ls,{size:16}),"Add Range"]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b.isActive,onChange:U=>f({...b,isActive:U.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm font-medium",children:"Active"})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),L()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(nc,{size:18}),n?"Saving...":"Save"]})]})]})]})})]})},XT=()=>{const[s,r]=y.useState([]),[n,l]=y.useState(!1),[d,m]=y.useState(!1),[u,p]=y.useState(null),[b,f]=y.useState({name:"",code:"",description:"",isDefault:!1,isActive:!0});y.useEffect(()=>{j()},[]);const j=async()=>{l(!0);try{const T=localStorage.getItem("token"),$=await fetch("/api/admin/pricing/user-segments",{headers:{Authorization:`Bearer ${T}`}});if($.ok){const L=await $.json();r(L.segments||[])}}catch(T){console.error("Failed to fetch user segments:",T)}finally{l(!1)}},v=async T=>{T.preventDefault(),l(!0);try{const $=localStorage.getItem("token"),L=u?`/api/admin/pricing/user-segments/${u._id}`:"/api/admin/pricing/user-segments",M=await fetch(L,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},body:JSON.stringify(b)});if(M.ok)alert(u?"User segment updated!":"User segment created!"),m(!1),P(),j();else{const B=await M.json();alert(B.message||"Failed to save user segment")}}catch($){console.error("Error saving user segment:",$),alert("Failed to save user segment")}finally{l(!1)}},w=async T=>{if(confirm("Are you sure you want to delete this user segment?"))try{const $=localStorage.getItem("token");(await fetch(`/api/admin/pricing/user-segments/${T}`,{method:"DELETE",headers:{Authorization:`Bearer ${$}`}})).ok&&(alert("User segment deleted!"),j())}catch($){console.error("Error deleting user segment:",$),alert("Failed to delete user segment")}},D=T=>{p(T),f({name:T.name,code:T.code,description:T.description||"",isDefault:T.isDefault,isActive:T.isActive}),m(!0)},P=()=>{f({name:"",code:"",description:"",isDefault:!1,isActive:!0}),p(null)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Ol,{className:"text-purple-600"}),"User Segment Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage user segments for segment-based pricing (Retail, Corporate, VIP, etc.)"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{P(),m(!0)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[e.jsx(Ls,{size:20}),"Create User Segment"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n?e.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"Loading..."}):s.length===0?e.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"No user segments found. Create one to get started."}):s.map(T=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-2 border-gray-200 hover:border-purple-300 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[T.name,T.isDefault&&e.jsx(Ki,{size:16,className:"text-yellow-500 fill-yellow-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 font-mono",children:T.code})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${T.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:T.isActive?"Active":"Inactive"})]}),T.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:T.description}),e.jsx("div",{className:"flex gap-2 mb-4",children:T.isDefault&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs font-medium",children:"Default"})}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs("button",{onClick:()=>D(T),className:"flex-1 bg-blue-50 text-blue-600 px-3 py-2 rounded hover:bg-blue-100 flex items-center justify-center gap-2",children:[e.jsx(kd,{size:16}),"Edit"]}),e.jsxs("button",{onClick:()=>w(T._id),className:"flex-1 bg-red-50 text-red-600 px-3 py-2 rounded hover:bg-red-100 flex items-center justify-center gap-2",children:[e.jsx(Gs,{size:16}),"Delete"]})]})]},T._id))}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:u?"Edit User Segment":"Create User Segment"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Segment Name *"}),e.jsx("input",{type:"text",value:b.name,onChange:T=>f({...b,name:T.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Retail, Corporate, VIP",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Segment Code *"}),e.jsx("input",{type:"text",value:b.code,onChange:T=>f({...b,code:T.target.value.toUpperCase()}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., RETAIL, CORPORATE, VIP",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier for this segment (uppercase)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:T=>f({...b,description:T.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Optional description",rows:3})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b.isDefault,onChange:T=>f({...b,isDefault:T.target.checked}),className:"rounded"}),e.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[e.jsx(Ki,{size:16,className:"text-yellow-500"}),"Set as default segment"]})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6 mt-1",children:"New users will be assigned to this segment by default"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b.isActive,onChange:T=>f({...b,isActive:T.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm font-medium",children:"Active"})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),P()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[e.jsx(nc,{size:18}),n?"Saving...":"Save"]})]})]})]})})]})},ek=()=>{const[s,r]=y.useState([]),[n,l]=y.useState([]),[d,m]=y.useState([]),[u,p]=y.useState(!1),[b,f]=y.useState(!1),[j,v]=y.useState(null),[w,D]=y.useState({product:"",geoZone:"",isSellable:!0,reason:""});y.useEffect(()=>{P(),T(),$()},[]);const P=async()=>{p(!0);try{const U=localStorage.getItem("token"),O=await fetch("/api/admin/pricing/product-availability",{headers:{Authorization:`Bearer ${U}`}});if(O.ok){const k=await O.json();r(k.availability||[])}}catch(U){console.error("Failed to fetch product availabilities:",U)}finally{p(!1)}},T=async()=>{try{const U=await fetch("/api/products");if(U.ok){const O=await U.json();l(O.products||O)}}catch(U){console.error("Failed to fetch products:",U)}},$=async()=>{try{const U=localStorage.getItem("token"),O=await fetch("/api/admin/pricing/geo-zones",{headers:{Authorization:`Bearer ${U}`}});if(O.ok){const k=await O.json();m(k.zones||[])}}catch(U){console.error("Failed to fetch geo zones:",U)}},L=async U=>{U.preventDefault(),p(!0);try{const O=localStorage.getItem("token"),k=j?`/api/admin/pricing/product-availability/${j._id}`:"/api/admin/pricing/product-availability",W=await fetch(k,{method:j?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify(w)});if(W.ok)alert(j?"Availability updated!":"Availability rule created!"),f(!1),ce(),P();else{const Q=await W.json();alert(Q.message||"Failed to save availability rule")}}catch(O){console.error("Error saving availability:",O),alert("Failed to save availability rule")}finally{p(!1)}},M=async U=>{if(confirm("Are you sure you want to delete this availability rule?"))try{const O=localStorage.getItem("token");(await fetch(`/api/admin/pricing/product-availability/${U}`,{method:"DELETE",headers:{Authorization:`Bearer ${O}`}})).ok&&(alert("Availability rule deleted!"),P())}catch(O){console.error("Error deleting availability:",O),alert("Failed to delete availability rule")}},B=U=>{v(U),D({product:U.product._id,geoZone:U.geoZone._id,isSellable:U.isSellable,reason:U.reason||""}),f(!0)},ce=()=>{D({product:"",geoZone:"",isSellable:!0,reason:""}),v(null)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ja,{className:"text-green-600"}),"Product Availability Manager"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Control which products are available in different geographical zones"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>{ce(),f(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Ls,{size:20}),"Create Availability Rule"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Geo Zone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reason"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No availability rules found. Create one to restrict product availability by region."})}):s.map(U=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:U.product.name}),e.jsx("td",{className:"px-6 py-4",children:U.geoZone.name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 w-fit ${U.isSellable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.isSellable?e.jsxs(e.Fragment,{children:[e.jsx(ga,{size:16}),"Available"]}):e.jsxs(e.Fragment,{children:[e.jsx($l,{size:16}),"Blocked"]})})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:U.reason||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>B(U),className:"text-blue-600 hover:text-blue-800",children:e.jsx(kd,{size:18})}),e.jsx("button",{onClick:()=>M(U._id),className:"text-red-600 hover:text-red-800",children:e.jsx(Gs,{size:18})})]})})]},U._id))})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:j?"Edit Availability Rule":"Create Availability Rule"}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product *"}),e.jsxs("select",{value:w.product,onChange:U=>D({...w,product:U.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Product"}),n.map(U=>e.jsx("option",{value:U._id,children:U.name},U._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Geo Zone *"}),e.jsxs("select",{value:w.geoZone,onChange:U=>D({...w,geoZone:U.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Geo Zone"}),d.map(U=>e.jsx("option",{value:U._id,children:U.name},U._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Availability Status *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"isSellable",checked:w.isSellable===!0,onChange:()=>D({...w,isSellable:!0,reason:""}),className:"text-green-600"}),e.jsx(ga,{size:20,className:"text-green-600"}),e.jsx("span",{className:"font-medium",children:"Available (Sellable)"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"isSellable",checked:w.isSellable===!1,onChange:()=>D({...w,isSellable:!1}),className:"text-red-600"}),e.jsx($l,{size:20,className:"text-red-600"}),e.jsx("span",{className:"font-medium",children:"Blocked (Not Sellable)"})]})]})]}),!w.isSellable&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason for Blocking"}),e.jsx("textarea",{value:w.reason,onChange:U=>D({...w,reason:U.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Not available in your region, Out of stock in this area",rows:3}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This message will be shown to customers in this region"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{f(!1),ce()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(nc,{size:18}),u?"Saving...":"Save"]})]})]})]})})]})},tk=()=>{const[s,r]=y.useState({zone:null,segment:null,product:null}),[n,l]=y.useState(null),[d,m]=y.useState("MASTER"),[u,p]=y.useState(!1),[b,f]=y.useState(null),[j,v]=y.useState([]),[w,D]=y.useState([]),[P,T]=y.useState([]),[$,L]=y.useState([]),[M,B]=y.useState(null),[ce,U]=y.useState(""),[O,k]=y.useState(!1),[W,Q]=y.useState(!1),[ne,le]=y.useState(!1),[me,Ve]=y.useState(null),[F,J]=y.useState(null);y.useEffect(()=>{K()},[]),y.useEffect(()=>{q(),L([]),B(null)},[s]);const I=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}),K=async()=>{try{if(!localStorage.getItem("token")){console.warn(" No authentication token found. Please login to access admin pricing."),f("Please login to access pricing administration");return}const[te,be,We]=await Promise.all([fetch("/api/admin/pricing/geo-zones",{headers:I()}),fetch("/api/admin/pricing/user-segments",{headers:I()}),fetch("/api/admin/pricing/products",{headers:I()})]);if(te.status===401||te.status===403){f("Authentication failed. Please login as an admin.");return}if(!te.ok||!be.ok||!We.ok){f(`Server error: ${te.status}. Please check your connection or contact support.`);return}const[at,_e,At]=await Promise.all([te.json(),be.json(),We.json()]);v(at.zones||at.data||[]),D(_e.segments||_e.data||[]),T(At.products||At.data||[]),console.log(" Loaded dropdown options:",{zones:(at.zones||at.data||[]).length,segments:(_e.segments||_e.data||[]).length,products:(At.products||At.data||[]).length})}catch(se){console.error("Error loading dropdown options:",se),f("Failed to load pricing data. Please check your connection and try again.")}},q=async()=>{p(!0),f(null);try{const se=new URLSearchParams;s.zone&&se.append("zone",s.zone),s.segment&&se.append("segment",s.segment),s.product&&se.append("product",s.product);const be=await(await fetch(`/api/admin/pricing/smart-view?${se}`,{headers:I()})).json();be.success?(l(be.data),m(be.data.viewType)):f(be.error||"Failed to load data")}catch(se){f(se.message)}finally{p(!1)}},de=(se,te)=>{r(be=>({...be,[se]:te||null}))},Ce=()=>{r({zone:null,segment:null,product:null})},A=(se,te)=>{B(se),U(te.toString())},G=()=>{B(null),U("")},ie=async(se,te)=>{var At;const be=parseFloat(ce);if(isNaN(be)||be<0){G();return}const We=(At=n==null?void 0:n.entries)==null?void 0:At.find(Xt=>Xt.productId===se),at=(We==null?void 0:We.basePrice)||0;if(be===at){G();return}const _e={productId:se,segmentId:te||s.segment||void 0,zoneId:s.zone||void 0,originalPrice:at,newPrice:be};await Re(_e),G()},Re=async se=>{var te;try{const We=await(await fetch("/api/admin/pricing/detect-conflicts",{method:"POST",headers:I(),body:JSON.stringify({zoneId:se.zoneId,segmentId:se.segmentId,productId:se.productId,newPrice:se.newPrice})})).json();We.success&&((te=We.data)!=null&&te.hasConflict)?(Ve(We.data),J(se),le(!0)):ge(se)}catch(be){console.error("Error checking conflicts:",be),ge(se)}},ge=se=>{L(te=>{const be=te.findIndex(We=>We.productId===se.productId&&We.segmentId===se.segmentId&&We.zoneId===se.zoneId);if(be>=0){const We=[...te];return We[be]=se,We}return[...te,se]})},R=async se=>{if(!(!F||!me)){k(!0);try{const be=await(await fetch("/api/admin/pricing/resolve-conflict",{method:"POST",headers:I(),body:JSON.stringify({resolutionId:se,newPrice:F.newPrice,oldPrice:F.originalPrice,zoneId:F.zoneId,segmentId:F.segmentId,productId:F.productId,updateLevel:"ZONE"})})).json();be.success?(Q(!0),q(),setTimeout(()=>Q(!1),2e3)):f(be.error||"Failed to resolve conflict")}catch(te){f(te.message)}finally{k(!1),le(!1),Ve(null),J(null)}}},re=async()=>{if($.length!==0){k(!0);try{for(const se of $)await fetch("/api/admin/pricing/virtual-price",{method:"POST",headers:I(),body:JSON.stringify({productId:se.productId,zoneId:se.zoneId,segmentId:se.segmentId,newPrice:se.newPrice})});Q(!0),L([]),q(),setTimeout(()=>Q(!1),2e3)}catch(se){f(se.message)}finally{k(!1)}}},je=()=>{L([]),q()},Ie=$.length>0,Be=(se,te,be,We)=>{const at=We||`${se}-${be||"default"}`,_e=M===at,At=$.find(As=>As.productId===se&&(As.segmentId===be||!As.segmentId&&!be)),Xt=At?At.newPrice:te,Ft=!!At;return _e?e.jsxs("td",{className:"price-cell editing",children:[e.jsx("input",{type:"number",value:ce,onChange:As=>U(As.target.value),onKeyDown:As=>{As.key==="Enter"&&ie(se,be),As.key==="Escape"&&G()},autoFocus:!0,min:"0",step:"0.01"}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{onClick:()=>ie(se,be),children:""}),e.jsx("button",{onClick:G,children:""})]})]},at):Xt==null?e.jsx("td",{className:"price-cell unavailable",title:"Price not available",children:"N/A"},at):e.jsxs("td",{className:`price-cell editable ${Ft?"modified":""}`,onClick:()=>A(at,Xt),title:"Click to edit",children:["",Xt.toFixed(2),Ft&&e.jsx("span",{className:"modified-indicator",children:"*"})]},at)},et=se=>({MASTER:" Master Price Book",ZONE:" Zone View (All Products  All Segments)",GROUP_ZONE:" Group Zone View (All Products)",PRODUCT_ZONE:" Product Zone View (All Segments)",SINGLE_CELL:" Single Cell View (Detailed Breakdown)"})[se]||se,fe=()=>{var se,te,be,We,at,_e,At,Xt,Ft,As,Vs,$t,Bs,vs,fa,$s,Zs,pa,rr;if(u)return e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading price data..."})]});if(b)return e.jsxs("div",{className:"error-state",children:[e.jsxs("p",{children:[" Error: ",b]}),e.jsx("button",{onClick:q,children:"Retry"})]});if(!n)return e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"Select filters to view pricing data"})});switch(d){case"MASTER":return e.jsxs("div",{className:"master-view",children:[e.jsxs("div",{className:"view-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Master Book:"})," ",n.masterBookName||"Master Price Book"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Products:"})," ",((se=n.entries)==null?void 0:se.length)||0]})]}),e.jsxs("table",{className:"price-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Base Price"}),e.jsx("th",{children:"Compare At"})]})}),e.jsx("tbody",{children:(te=n.entries)==null?void 0:te.map(Tt=>e.jsxs("tr",{children:[e.jsx("td",{children:Tt.productName}),Be(Tt.productId,Tt.basePrice,void 0,`master-${Tt.productId}`),e.jsxs("td",{className:"price",children:["",Tt.compareAtPrice||"-"]})]},Tt.productId))})]})]});case"ZONE":return e.jsxs("div",{className:"zone-view",children:[e.jsxs("div",{className:"view-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",n.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Products:"})," ",((be=n.matrix)==null?void 0:be.length)||0]})]}),e.jsx("div",{className:"matrix-grid",children:e.jsxs("table",{className:"price-table matrix-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),Object.keys(((at=(We=n.matrix)==null?void 0:We[0])==null?void 0:at.segments)||{}).map(Tt=>e.jsx("th",{children:Tt},Tt))]})}),e.jsx("tbody",{children:(_e=n.matrix)==null?void 0:_e.map(Tt=>e.jsxs("tr",{className:Tt.isAvailable===!1?"unavailable-row":"",children:[e.jsxs("td",{className:"product-name",children:[Tt.productName,Tt.isAvailable===!1&&e.jsx("span",{className:"unavailable-badge",children:""})]}),Object.entries(Tt.segments).map(([ha,Vt])=>{var va;const xa=typeof Vt=="object"?Vt==null?void 0:Vt.finalPrice:Vt;return!(typeof Vt=="object"?(Vt==null?void 0:Vt.isAvailable)!==!1:!0)||xa==null?e.jsx("td",{className:"price-cell unavailable",title:Tt.availabilityReason||"Not available",children:"N/A"},ha):Be(Tt.productId,xa,(va=Tt.segmentIds)==null?void 0:va[ha],`zone-${Tt.productId}-${ha}`)})]},Tt.productId))})]})})]});case"GROUP_ZONE":return e.jsxs("div",{className:"group-zone-view",children:[e.jsxs("div",{className:"view-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",n.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Segment:"})," ",n.segmentName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Products:"})," ",((At=n.prices)==null?void 0:At.length)||0]})]}),e.jsxs("table",{className:"price-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Master Price"}),e.jsx("th",{children:"Final Price"}),e.jsx("th",{children:"Adjustments"})]})}),e.jsx("tbody",{children:(Xt=n.prices)==null?void 0:Xt.map(Tt=>{var ha;return e.jsxs("tr",{children:[e.jsx("td",{children:Tt.productName}),e.jsxs("td",{className:"price",children:["",Tt.masterPrice]}),Be(Tt.productId,Tt.finalPrice,n.segmentId,`group-${Tt.productId}`),e.jsxs("td",{className:"adjustments",children:[((ha=Tt.adjustments)==null?void 0:ha.length)||0," adjustment(s)"]})]},Tt.productId)})})]})]});case"PRODUCT_ZONE":return e.jsxs("div",{className:"product-zone-view",children:[e.jsxs("div",{className:"view-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",n.productName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",n.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Segments:"})," ",((Ft=n.prices)==null?void 0:Ft.length)||0]})]}),e.jsxs("table",{className:"price-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Segment"}),e.jsx("th",{children:"Master Price"}),e.jsx("th",{children:"Final Price"}),e.jsx("th",{children:"Discount"})]})}),e.jsx("tbody",{children:(As=n.prices)==null?void 0:As.map(Tt=>e.jsxs("tr",{children:[e.jsx("td",{children:Tt.segmentName}),e.jsxs("td",{className:"price",children:["",Tt.masterPrice]}),Be(n.productId,Tt.finalPrice,Tt.segmentId,`prod-${Tt.segmentId}`),e.jsx("td",{className:"discount",children:Tt.masterPrice>Tt.finalPrice?`${((1-Tt.finalPrice/Tt.masterPrice)*100).toFixed(1)}%`:"-"})]},Tt.segmentId))})]})]});case"SINGLE_CELL":return((Vs=n.price)==null?void 0:Vs.isAvailable)===!1?e.jsxs("div",{className:"single-cell-view",children:[e.jsxs("div",{className:"view-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",n.productName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",n.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Segment:"})," ",n.segmentName]})]}),e.jsxs("div",{className:"not-available-banner",children:[e.jsx("div",{className:"not-available-icon",children:""}),e.jsx("h3",{children:"Product Not Available"}),e.jsx("p",{className:"not-available-reason",children:(($t=n.price)==null?void 0:$t.availabilityReason)||"This product is not available in the selected zone"})]})]}):e.jsxs("div",{className:"single-cell-view",children:[e.jsxs("div",{className:"view-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",n.productName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zone:"})," ",n.zoneName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Segment:"})," ",n.segmentName]})]}),e.jsxs("div",{className:"breakdown-card",children:[e.jsx("h4",{children:" Price Breakdown"}),e.jsxs("div",{className:"breakdown-item base-price",children:[e.jsx("span",{children:"Master Price:"}),e.jsxs("strong",{children:["",(vs=(Bs=n.price)==null?void 0:Bs.masterPrice)==null?void 0:vs.toFixed(2)]})]}),($s=(fa=n.price)==null?void 0:fa.adjustments)==null?void 0:$s.map((Tt,ha)=>{const Vt=Tt.type==="MODIFIER",xa=Vt?Tt.modifierName:`${Tt.type} (${Tt.bookName||"Adjustment"})`,Ns=Tt.modifierType==="PERCENT_INC"||Tt.modifierType==="FLAT_INC"||Tt.change>0,va=Math.abs(Vt?Tt.change:Tt.value),qe=Vt?Tt.value:null;return e.jsxs("div",{className:`breakdown-item modifier-item ${Ns?"increase":"decrease"}`,children:[e.jsxs("span",{className:"modifier-label",children:[Vt&&Tt.appliesTo==="ZONE"&&" ",Vt&&Tt.appliesTo==="SEGMENT"&&" ",Vt&&Tt.appliesTo==="PRODUCT"&&" ",Vt&&Tt.appliesTo==="GLOBAL"&&" ",xa,qe!==null&&` (${Ns?"+":"-"}${qe}%)`]}),e.jsxs("strong",{className:Ns?"positive":"negative",children:[Ns?"+":"-","",va==null?void 0:va.toFixed(2)]})]},ha)}),e.jsxs("div",{className:"breakdown-item total",children:[e.jsx("span",{children:"Final Price:"}),e.jsxs("strong",{className:"final-price",children:["",(pa=(Zs=n.price)==null?void 0:Zs.finalPrice)==null?void 0:pa.toFixed(2)]})]}),((rr=n.price)==null?void 0:rr.modifiersApplied)>0&&e.jsx("div",{className:"modifiers-summary",children:e.jsxs("small",{children:[" ",n.price.modifiersApplied," modifier(s) applied"]})})]})]});default:return e.jsxs("div",{children:["Unknown view type: ",d]})}};return e.jsxs("div",{className:"smart-view-matrix",children:[e.jsxs("div",{className:"matrix-header",children:[e.jsx("h2",{children:" Smart View Matrix"}),e.jsx("p",{children:"Manage virtual price books with hierarchical pricing"})]}),e.jsxs("div",{className:"matrix-container",children:[e.jsxs("div",{className:"filter-panel",children:[e.jsx("h3",{children:" Filters"}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Geo Zone"}),e.jsxs("select",{value:s.zone||"",onChange:se=>de("zone",se.target.value),children:[e.jsx("option",{value:"",children:"All Zones"}),j.map(se=>e.jsxs("option",{value:se._id,children:[se.name," (",se.level,")"]},se._id))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"User Segment"}),e.jsxs("select",{value:s.segment||"",onChange:se=>de("segment",se.target.value),children:[e.jsx("option",{value:"",children:"All Segments"}),w.map(se=>e.jsx("option",{value:se._id,children:se.name||se.code},se._id))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Product"}),e.jsxs("select",{value:s.product||"",onChange:se=>de("product",se.target.value),children:[e.jsx("option",{value:"",children:"All Products"}),P.map(se=>e.jsx("option",{value:se._id,children:se.name},se._id))]})]}),e.jsx("button",{className:"btn-clear",onClick:Ce,children:"Clear Filters"}),Ie&&e.jsxs("div",{className:"unsaved-actions",children:[e.jsxs("p",{className:"unsaved-count",children:[" ",$.length," unsaved change(s)"]}),e.jsx("button",{className:"btn-save",onClick:re,disabled:O,children:O?"Saving...":" Save All"}),e.jsx("button",{className:"btn-discard",onClick:je,disabled:O,children:" Discard"})]}),W&&e.jsx("div",{className:"save-success",children:" Changes saved!"})]}),e.jsxs("div",{className:"matrix-content",children:[e.jsxs("div",{className:"view-header",children:[e.jsx("h3",{children:et(d)}),e.jsx("span",{className:"view-badge",children:d})]}),fe()]})]}),ne&&me&&e.jsx(HN,{conflict:me,onResolve:R,onCancel:()=>{le(!1),Ve(null),J(null)}})]})},sk=()=>e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Pricing Preview"}),e.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded text-center text-gray-500",children:"Pricing Preview Module Coming Soon"})]}),ak=({value:s,onChange:r,placeholder:n="Enter description...",className:l="",style:d,height:m="300px"})=>{const[u,p]=y.useState(null),[b,f]=y.useState(!1);return y.useEffect(()=>{typeof window<"u"&&Ud(()=>import("./editor.esm-C9OlE5Xv.js"),[]).then(j=>{p(()=>j.Editor),f(!0)}).catch(j=>{console.error("Failed to load PrimeReact Editor:",j),f(!0)})},[]),!b||!u?e.jsx("div",{className:`rich-text-editor-wrapper ${l}`,style:{height:m,...d},children:e.jsx("textarea",{value:s||"",onChange:j=>r(j.target.value),placeholder:n,className:"w-full p-3 border border-gray-300 rounded-lg resize-none",style:{height:m,minHeight:"200px"}})}):e.jsx(rk,{Editor:u,value:s,onChange:r,placeholder:n,className:l,style:d,height:m})},rk=({Editor:s,value:r,onChange:n,placeholder:l,className:d,style:m,height:u})=>{const p=y.useRef(null),b=y.useMemo(()=>({toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["image"],["clean"]],clipboard:{matchVisual:!1}}),[]),f=y.useMemo(()=>["header","font","size","bold","italic","underline","strike","color","background","list","indent","align","image"],[]),j=y.useMemo(()=>w=>{w.htmlValue!==void 0?n(w.htmlValue||""):w.textValue!==void 0?n(w.textValue||""):w.value!==void 0&&n(w.value||"")},[n]),v=y.useMemo(()=>({height:u,...m}),[u,m]);return e.jsxs("div",{className:`rich-text-editor-wrapper ${d}`,children:[e.jsx(s,{ref:p,value:r||"",onTextChange:j,placeholder:l,modules:b,formats:f,style:v}),e.jsx("style",{children:`
        .rich-text-editor-wrapper {
          width: 100%;
        }
        .rich-text-editor-wrapper .p-editor-container {
          border: 1px solid #d1d5db;
          border-radius: 0.5rem;
          overflow: hidden;
        }
        .rich-text-editor-wrapper .p-editor-toolbar {
          border-bottom: 1px solid #d1d5db;
          background: #f9fafb;
          padding: 0.5rem;
        }
        .rich-text-editor-wrapper .ql-editor {
          min-height: 200px;
        }
        .rich-text-editor-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: italic;
        }
      `})]})},Yo="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23f5f5f5'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-family='sans-serif' font-size='14'%3ENo Image%3C/text%3E%3C/svg%3E",Dl="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Crect width='400' height='400' fill='%23f5f5f5'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-family='sans-serif' font-size='18'%3EImage Not Available%3C/text%3E%3C/svg%3E",ik=()=>{var Eo,ul,To,hn,bi,Hi,yi;const s=ar(),r=Hd(),[n,l]=y.useState("products"),[d,m]=y.useState(!1),[u,p]=y.useState(null),[b,f]=y.useState(null),[j,v]=y.useState(null),[w,D]=y.useState({}),[P,T]=y.useState(null),[$,L]=y.useState(null),[M,B]=y.useState({}),[ce,U]=y.useState({}),[O,k]=y.useState({}),[W,Q]=y.useState({}),[ne,le]=y.useState({}),[me,Ve]=y.useState({}),[F,J]=y.useState({name:"",description:"",descriptionArray:[],category:"",subcategory:"",image:null,options:"",filters:{printingOption:[],orderQuantity:{min:1e3,max:72e3,multiples:1e3,quantityType:"SIMPLE",stepWiseQuantities:[],rangeWiseQuantities:[]},deliverySpeed:[],textureType:[]},quantityDiscounts:[],maxFileSizeMB:"",minFileWidth:"",maxFileWidth:"",minFileHeight:"",maxFileHeight:"",blockCDRandJPG:!1,additionalDesignCharge:"",gstPercentage:"",showPriceIncludingGst:!1,instructions:"",productionSequence:[],variants:[]}),[I,K]=y.useState([]),[q,de]=y.useState({}),[Ce,A]=y.useState(!0),[G,ie]=y.useState(!1),[Re,ge]=y.useState([]),[R,re]=y.useState([]),[je,Ie]=y.useState([]),[Be,et]=y.useState([]),[fe,se]=y.useState({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),[te,be]=y.useState(!1),[We,at]=y.useState(!1),[_e,At]=y.useState({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),[Xt,Ft]=y.useState([]),[As,Vs]=y.useState(!1),[$t,Bs]=y.useState(!1),[vs,fa]=y.useState(null),[$s,Zs]=y.useState(null),[pa,rr]=y.useState([]),[Tt,ha]=y.useState([]),[Vt,xa]=y.useState({username:"",role:"user"}),[Ns,va]=y.useState({name:"",email:"",password:""}),[qe,ft]=y.useState([]),[xt,Ps]=y.useState([]),[Qs,Js]=y.useState(""),[Ms,ra]=y.useState("all"),[Pa,Ja]=y.useState("all"),[ir,Zr]=y.useState(""),[Sn,Mi]=y.useState([]),[X,he]=y.useState(null),[Ee,tt]=y.useState(null),it=Pi.useRef(null),Dt=Pi.useRef(null),[lt,dt]=y.useState({isOpen:!1,type:"category",id:"",name:"",productCount:0,subcategoryCount:0,deleteText:""}),[vt,Pt]=y.useState([]),[Mt,_t]=y.useState([]),[Kt,os]=y.useState([]),[ps,Ks]=y.useState(""),[es,is]=y.useState(""),[rs,nr]=y.useState([]),[Xs,mr]=y.useState(!1),[gr,qs]=y.useState(!1),[Ka,Jr]=y.useState(!1),[zs,Yt]=y.useState(null),[hs,Oa]=y.useState(null),[ea,us]=y.useState([]),[da,ui]=y.useState({isOpen:!1,type:"category",name:"",description:""}),[Xa,_i]=y.useState(""),[mi,er]=y.useState([]),[Na,ta]=y.useState([]),[cs,Kr]=y.useState({}),[ql,fi]=y.useState({}),[pi,oe]=y.useState([]),[Fe,we]=y.useState(!1),[ye,Le]=y.useState([]),[rt,Te]=y.useState([]),[Ue,Me]=y.useState(null),[ze,ve]=y.useState(!1),[pt,ke]=y.useState(!1),[nt,Wt]=y.useState({}),[Es,ts]=y.useState([]),[xs,ns]=y.useState(!1),[pe,Pe]=y.useState(null),[Je,ht]=y.useState(!1),[Et,He]=y.useState({status:"",deliveryDate:"",adminNotes:""}),[Ye,Xe]=y.useState(!1),[It,kt]=y.useState({name:"",email:"",password:""}),[Fs,Os]=y.useState(!1),[qt,Ts]=y.useState({name:"",description:"",isEnabled:!0,operators:[]}),[wt,Ra]=y.useState([]),[Ba,sn]=y.useState(""),[Dr,an]=y.useState(!1),[zi,sl]=y.useState(null),[Hl,Gl]=y.useState(!1),[fc,Qd]=y.useState([]),[$m,Yd]=y.useState(!1),[Li,pc]=y.useState(null),[Fm,go]=y.useState(!1),[Wd,hc]=y.useState({page:1,limit:10,total:0,totalPages:0}),[Rt,Ma]=y.useState({name:"",scope:"GLOBAL",scopeRefId:"",when:{attribute:"",value:""},then:[],priority:0,isActive:!0}),[bo,xc]=y.useState([]),[Um,Zd]=y.useState(!1),[rn,Jd]=y.useState(null),[Im,gc]=y.useState(!1),[_s,$i]=y.useState({parentAttribute:"",parentValue:"",value:"",label:"",image:null,priceAdd:0,isEnabled:!0}),[Pr,nn]=y.useState([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}]),[Fi,Kd]=y.useState({attributeId:"",parentValue:""}),[qa,bc]=y.useState([]),[Xd,yc]=y.useState(!1),[Ui,Cn]=y.useState(null),[br,An]=y.useState({name:"",description:"",isEnabled:!0,operators:[]}),[ln,eu]=y.useState([]),[tu,al]=y.useState(!1),[yr,jc]=y.useState(null),[En,rl]=y.useState(null),[vc,il]=y.useState(!1),[zt,lr]=y.useState({name:"",printType:"",category:"",subcategory:"",selectedDepartments:[],selectedAttributes:[]}),[Z,mt]=y.useState({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]});y.useEffect(()=>{const c=localStorage.getItem("user");if(!c){s("/login");return}if(JSON.parse(c).role!=="admin"){s("/");return}ba(),Or(),on(),dn(),Ii(),ll()},[s]),y.useEffect(()=>{n==="products"&&(or(),_r(),Mr()),n==="departments"&&(Mr(),jo()),n==="sequences"&&(_r(),Mr(),ba(),on()),n==="categories"&&hi(),n==="manage-products"&&(on(),ba())},[n]),y.useEffect(()=>{u&&window.scrollTo({top:0,behavior:"smooth"})},[u]),y.useEffect(()=>{(Object.keys(M).length>0||Object.keys(ce).length>0||Object.keys(W).length>0||Object.keys(ne).length>0||Object.keys(me).length>0||Object.keys(O).length>0)&&window.scrollTo({top:0,behavior:"smooth"})},[M,ce,W,ne,me,O]),y.useEffect(()=>{if(fe.parent&&fe.type){const c=vt.find(g=>g._id===fe.parent);c&&c.type!==fe.type&&se({...fe,parent:""})}},[fe.type,vt]);const Vm=async c=>{const g=new Map;c.forEach(z=>{g.set(z._id,{...z,children:[]})});const N=(z,V,H)=>z.map(Y=>({_id:Y._id,name:Y.name,description:Y.description,image:Y.image,slug:Y.slug,type:Y.category&&typeof Y.category=="object"?Y.category.type:H,parent:V,sortOrder:Y.sortOrder||0,category:Y.category,isSubcategory:!0,createdAt:Y.createdAt,updatedAt:Y.updatedAt,children:Y.children?N(Y.children,Y._id,H):[]})),S=[];for(const z of c){const V=g.get(z._id);try{const H=await fetch(`${Ae}/subcategories/category/${z._id}?includeChildren=true`,{headers:Ct()});if(H.ok){const Y=await gt(H),ee=Array.isArray(Y)?Y:[];V.children=N(ee,z._id,z.type)}}catch(H){console.error(`Error fetching subcategories for category ${z._id}:`,H),V.children=[]}S.push(V)}const E=z=>Array.isArray(z)?[...z].sort((V,H)=>(V.sortOrder||0)-(H.sortOrder||0)).map(V=>({...V,children:V.children?E(V.children):[]})):[];return E(S)},su=(c,g=0,N=[])=>{let S=[];return c.forEach(E=>{const z=[...N,E._id];S.push({...E,displayLevel:g,path:z}),E.children&&E.children.length>0&&(S=S.concat(su(E.children,g+1,z)))}),S};y.useEffect(()=>{let c=[...qe];if(Ms!=="all"&&(c=c.filter(N=>N.type===Ms)),Qs.trim()!==""){const N=Qs.toLowerCase().trim();c=c.filter(S=>S.name.toLowerCase().includes(N)||S.description&&S.description.toLowerCase().includes(N)||S.type&&S.type.toLowerCase().includes(N))}c.sort((N,S)=>(N.sortOrder||0)-(S.sortOrder||0)),(async()=>{let N=await Vm(c);if(Pa==="top-level")N=N.map(E=>({...E,children:[]}));else if(Pa==="subcategories"){const E=[];N.forEach(z=>{z.children&&z.children.length>0&&E.push(...z.children)}),N=E}const S=su(N);Ps(S)})()},[qe,Qs,Ms,Pa]),y.useEffect(()=>{let c=[...pa];if(ir.trim()!==""){const g=ir.toLowerCase().trim();c=c.filter(N=>N.name.toLowerCase().includes(g)||N.description&&N.description.toLowerCase().includes(g)||N.slug&&N.slug.toLowerCase().includes(g)||N.category&&typeof N.category=="object"&&N.category.name&&N.category.name.toLowerCase().includes(g))}c.sort((g,N)=>{const S=g.sortOrder||0,E=N.sortOrder||0;return S!==E?S-E:new Date(N.createdAt||0).getTime()-new Date(g.createdAt||0).getTime()}),Mi(c)},[pa,ir]),y.useEffect(()=>{if(Xa&&mi.length===1&&!F.category){const c=mi[0];c&&c._id&&(J({...F,category:c._id}),ta([c._id]),xi(c._id))}},[Xa,mi,F.category]),y.useEffect(()=>{var c;if(F.category&&((c=cs[F.category])==null?void 0:c.length)===1&&!F.subcategory){const g=cs[F.category][0];g&&g._id&&J({...F,subcategory:g._id})}},[F.category,cs,F.subcategory]),y.useEffect(()=>{if(n==="products"&&(F.category||F.subcategory)){const c=F.category||null,g=F.subcategory||null;or(c,g)}},[F.category,F.subcategory,n]),y.useEffect(()=>{const c=qa.filter(g=>g.isEnabled);if(c.length===1&&zt.selectedDepartments.length===0){const g=c[0];g&&g._id&&lr({...zt,selectedDepartments:[g._id]})}},[qa,zt.selectedDepartments.length]),y.useEffect(()=>{if(zt.printType){const c=qe.filter(g=>zt.printType==="digital"?g.type==="Digital"||g.type==="digital":zt.printType==="bulk"?g.type==="Bulk"||g.type==="bulk":!1).filter(g=>!g.parent);if(c.length===1&&!zt.category){const g=c[0];g&&g._id&&lr({...zt,category:g._id})}}},[zt.printType,qe,zt.category]);const Ct=(c=!1)=>{const N={Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"};return c&&(N["Content-Type"]="application/json"),N},Tn=(c,g,N)=>{if(!c)return"";let S=c.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),E=S,z=2,V=qe.some(Y=>Y.slug===E&&(!g||Y._id!==g)),H=pa.some(Y=>Y.slug===E&&(!N||Y._id!==N));for(;V||H;)E=`${S}-${z}`,z++,V=qe.some(Y=>Y.slug===E&&(!g||Y._id!==g)),H=pa.some(Y=>Y.slug===E&&(!N||Y._id!==N));return E},gt=async c=>{const g=await c.text();if(g.trim().startsWith("<!DOCTYPE")||g.trim().startsWith("<html"))throw new Error(`Server returned HTML instead of JSON. Status: ${c.status} ${c.statusText}`);try{const N=JSON.parse(g);if(!c.ok)throw new Error(N.error||N.message||`Request failed: ${c.status} ${c.statusText}`);return N}catch(N){throw N instanceof Error?N:new Error(g||`Invalid response from server. Status: ${c.status} ${c.statusText}`)}},ba=async()=>{try{const c=await fetch(`${Ae}/categories`,{method:"GET",headers:Ct()});if(!c.ok)throw new Error(`Failed to fetch categories: ${c.status} ${c.statusText}`);const g=await gt(c),N=Array.isArray(g)?g.filter(S=>!S.parent||S.parent===null||typeof S.parent=="object"&&!S.parent._id):[];N.sort((S,E)=>(S.sortOrder||0)-(E.sortOrder||0)),ft(N),Ps(N)}catch(c){console.error("Error fetching categories:",c),p(c instanceof Error?c.message:"Failed to fetch categories")}},hi=async c=>{try{const g=c?`${Ae}/categories/available-parents?excludeId=${c}`:`${Ae}/categories/available-parents`,N=await fetch(g,{method:"GET",headers:Ct()});if(!N.ok)throw new Error(`Failed to fetch available parent categories: ${N.status} ${N.statusText}`);const S=await gt(N),E=Array.isArray(S)?S.sort((z,V)=>{const H=z.sortOrder||0,Y=V.sortOrder||0;return H!==Y?H-Y:(z.name||"").localeCompare(V.name||"")}):[];Pt(E)}catch(g){console.error("Error fetching available parent categories:",g)}},on=async()=>{try{const c=await fetch(`${Ae}/subcategories`,{method:"GET",headers:Ct()});if(!c.ok)throw new Error(`Failed to fetch subcategories: ${c.status} ${c.statusText}`);const g=await gt(c),N=g.filter(S=>!S.category||S._warning);N.length>0&&p(`Warning: ${N.length} subcategor${N.length===1?"y":"ies"} have deleted parent categories. Please reassign them to valid categories.`),rr(g)}catch(c){console.error("Error fetching subcategories:",c),p(c instanceof Error?c.message:"Failed to fetch subcategories")}},Or=async c=>{try{qs(!0);let g=`${Ae}/products`;c&&(g=`${Ae}/products/category/${c}`);const N=await fetch(g,{headers:Ct()});if(!N.ok)throw new Error(`Failed to fetch products: ${N.status} ${N.statusText}`);const S=await gt(N);console.log("=== PRODUCTS FETCHED (AdminDashboard) ==="),console.log("Total products:",Array.isArray(S)?S.length:0),console.log("Full products data:",JSON.stringify(S,null,2)),_t(S),os(S)}catch(g){console.error("Error fetching products:",g),p(g instanceof Error?g.message:"Failed to fetch products")}finally{qs(!1)}};y.useEffect(()=>{if((ps||es.trim())&&Mt.length>0){Jr(!0);const N=setTimeout(()=>{Jr(!1)},100);return()=>clearTimeout(N)}else Jr(!1);let g=Mt;if(ps&&(g=g.filter(N=>{const S=N.category&&typeof N.category=="object"?N.category._id:N.category,E=N.subcategory&&typeof N.subcategory=="object"?N.subcategory._id:N.subcategory;return S===ps||E===ps})),es.trim()){const N=es.toLowerCase().trim();g=g.filter(S=>{var Y,ee,De,Qe;const E=(Y=S.name)==null?void 0:Y.toLowerCase().includes(N),z=(ee=S.description)==null?void 0:ee.toLowerCase().includes(N),V=S.category&&typeof S.category=="object"?(De=S.category.name)==null?void 0:De.toLowerCase().includes(N):!1,H=S.subcategory&&typeof S.subcategory=="object"?(Qe=S.subcategory.name)==null?void 0:Qe.toLowerCase().includes(N):!1;return E||z||V||H})}os(g),Jr(!1)},[Mt,ps,es]);const au=async c=>{Ks(c),c?await Or(c):await Or()},xi=async c=>{if(!c){Kr(g=>{const N={...g};return delete N[c],N});return}try{fi(V=>({...V,[c]:!0}));const g=await fetch(`${Ae}/subcategories/category/${c}?includeChildren=true`,{headers:Ct()});if(!g.ok){const V=await fetch(`${Ae}/categories/parent/${c}`,{headers:Ct()});if(V.ok){const H=await gt(V),Y=Array.isArray(H)?H:(H==null?void 0:H.data)||[];Kr(ee=>({...ee,[c]:Y}));return}throw new Error(`Failed to fetch child categories: ${g.status} ${g.statusText}`)}const N=await gt(g),S=Array.isArray(N)?N:(N==null?void 0:N.data)||[],E=V=>{let H=[];return V.forEach(Y=>{H.push(Y),Y.children&&Y.children.length>0&&(H=H.concat(E(Y.children)))}),H},z=E(S);Kr(V=>({...V,[c]:z}))}catch(g){console.error("Error fetching child categories:",g),Kr(N=>({...N,[c]:[]}))}finally{fi(g=>{const N={...g};return delete N[c],N})}},yo=(c,g)=>{if(!c)return[];const N=[c];if(!g||g===c)return N;const S=(V,H,Y)=>{if(V===H)return Y;const ee=cs[V]||[];for(const De of ee){const Qe=[...Y,De._id],yt=S(De._id,H,Qe);if(yt)return yt}return null},E=S(c,g,N);if(E)return E;if(qe.find(V=>V._id===g)){const V=[];let H=g;for(;H&&(V.unshift(H),H!==c);){const Y=qe.find(ee=>ee._id===H);if(!Y||!Y.parent||(H=typeof Y.parent=="object"?Y.parent._id:Y.parent,V.includes(H)))break}return V}return N};y.useEffect(()=>{if(Xa){const c=qe.filter(g=>g.type===Xa&&(!g.parent||g.parent===null||typeof g.parent=="object"&&!g.parent._id));er(c)}else er([]);Xa&&(J(c=>({...c,category:"",subcategory:""})),ta([]),Kr({}))},[Xa,qe]),y.useEffect(()=>{const c=Na[Na.length-1];c&&!cs[c]&&xi(c),Na.forEach(g=>{cs[g]||xi(g)})},[Na]);const nl=async c=>{if(zs===c)Yt(null),us([]),Oa(null),oe([]);else{Yt(c),Oa(null),oe([]);try{we(!0);const g=await fetch(`${Ae}/products/category/${c}`,{headers:Ct()});let N=[];if(g.ok){const E=await gt(g);console.log("=== CATEGORY PRODUCTS (handleCategoryClick) ==="),console.log(`Category ID: ${c}`),console.log(`Products fetched: ${Array.isArray(E)?E.length:0}`),console.log("Full products data:",JSON.stringify(E,null,2)),Array.isArray(E)&&(N=E.filter(z=>!z.subcategory||z.subcategory===null||typeof z.subcategory=="string"&&z.subcategory===""))}let S=[];try{const E=await fetch(`${Ae}/subcategories/category/${c}?includeChildren=true`,{headers:Ct()});if(E.ok){const z=await gt(E);S=Array.isArray(z)?z:(z==null?void 0:z.data)||[],S.sort((V,H)=>{const Y=V.sortOrder||0,ee=H.sortOrder||0;return Y!==ee?Y-ee:new Date(H.createdAt||0).getTime()-new Date(V.createdAt||0).getTime()}),us(S)}}catch(E){console.error("Error fetching subcategories:",E),us([])}if(S.length>0){const E=[];for(const z of S)try{let V=[];const H=await fetch(`${Ae}/products/subcategory/${z._id}`,{headers:Ct()});if(H.ok){const De=await gt(H);console.log("=== SUBCATEGORY PRODUCTS (handleCategoryClick) ==="),console.log(`Subcategory ID: ${z._id}`),console.log(`Products fetched: ${Array.isArray(De)?De.length:0}`),console.log("Full products data:",JSON.stringify(De,null,2)),Array.isArray(De)&&(V=De)}if(V.length===0){const De=await fetch(`${Ae}/products/category/${c}`,{headers:Ct()});if(De.ok){const Qe=await gt(De);Array.isArray(Qe)&&(V=Qe.filter(Ut=>!Ut.subcategory||Ut.subcategory===null||typeof Ut.subcategory=="string"&&Ut.subcategory===""))}}const Y=new Set(E.map(De=>De._id)),ee=V.filter(De=>!Y.has(De._id));E.push(...ee)}catch(V){console.error(`Error fetching products from subcategory ${z._id}:`,V)}oe([...N,...E])}else oe(N)}catch(g){console.error("Error fetching category products:",g),p(g instanceof Error?g.message:"Failed to fetch category products"),oe([])}finally{we(!1)}}},kn=async(c,g)=>{if(g&&g.stopPropagation(),hs===c)Oa(null),oe([]);else{Oa(c);try{we(!0);let N=[];try{const S=await fetch(`${Ae}/products/subcategory/${c}`,{headers:Ct()});if(S.ok){const E=await gt(S);console.log("=== SUBCATEGORY PRODUCTS (handleSubCategoryClick) ==="),console.log(`Subcategory ID: ${c}`),console.log(`Products fetched: ${Array.isArray(E)?E.length:0}`),console.log("Full products data:",JSON.stringify(E,null,2)),N=Array.isArray(E)?E:[]}}catch(S){console.error("Error fetching subcategory products:",S)}if(N.length===0&&zs){console.log("No products found with subcategory, trying parent category products...");try{const S=await fetch(`${Ae}/products/category/${zs}`,{headers:Ct()});if(S.ok){const E=await gt(S);Array.isArray(E)&&(N=E.filter(V=>!V.subcategory||V.subcategory===null||typeof V.subcategory=="string"&&V.subcategory===""),console.log(`Found ${N.length} product(s) in parent category ${zs}`))}}catch(S){console.error("Error fetching category products as fallback:",S)}}oe(N)}catch(N){console.error("Error fetching subcategory products:",N),p(N instanceof Error?N.message:"Failed to fetch subcategory products"),oe([])}finally{we(!1)}}},Ql=(c,g)=>{if(!g||!X){Xr();return}const N=g.getBoundingClientRect(),S=c.clientY,E=80,z=20,V=5,H=S-N.top,Y=N.bottom-S;let ee=!1,De=null,Qe=0;if(H<E&&g.scrollTop>0){ee=!0,De="up";const yt=Math.max(0,E-H);Qe=V+yt/E*(z-V)}else if(Y<E){const yt=g.scrollHeight-g.clientHeight;if(g.scrollTop<yt){ee=!0,De="down";const Ut=Math.max(0,E-Y);Qe=V+Ut/E*(z-V)}}if(it.current&&(clearTimeout(it.current),it.current=null),ee&&De){const yt=()=>{if(!g){Xr();return}if(De==="up")g.scrollTop>0?(g.scrollTop=Math.max(0,g.scrollTop-Qe),it.current=setTimeout(yt,16)):Xr();else if(De==="down"){const Ut=g.scrollHeight-g.clientHeight;g.scrollTop<Ut?(g.scrollTop=Math.min(Ut,g.scrollTop+Qe),it.current=setTimeout(yt,16)):Xr()}};yt()}else Xr()},Xr=()=>{it.current&&(clearTimeout(it.current),it.current=null)},Nc=async(c,g,N)=>{if(window.confirm("Are you sure you want to reorder these categories? This will update the sort order for all affected categories."))try{m(!0),p(null),f(null);let E=xt.find(bt=>bt._id===c);if(E||(E=qe.find(bt=>bt._id===c)),!E)try{const bt=await fetch(`${Ae}/categories/${c}`,{method:"GET",headers:Ct()});if(bt.ok)E=await gt(bt);else try{const Rs=await fetch(`${Ae}/subcategories/${c}`,{method:"GET",headers:Ct()});if(Rs.ok){const ws=await gt(Rs);E={...ws,parent:ws.category,type:ws.category&&typeof ws.category=="object"?ws.category.type:"Digital"}}}catch(Rs){console.error("Error fetching dragged subcategory:",Rs)}}catch(bt){console.error("Error fetching dragged category:",bt)}if(!E){p(`Dragged category not found (ID: ${c}). Please refresh the page and try again.`),m(!1);return}if(E.isSubcategory||E.displayLevel&&E.displayLevel>0){p("Subcategories should be reordered in their own section. Please use the subcategory drag and drop."),m(!1);return}let V=xt.find(bt=>bt._id===g);if(V||(V=qe.find(bt=>bt._id===g)),!V)try{const bt=await fetch(`${Ae}/categories/${g}`,{method:"GET",headers:Ct()});if(bt.ok)V=await gt(bt);else try{const Rs=await fetch(`${Ae}/subcategories/${g}`,{method:"GET",headers:Ct()});if(Rs.ok){const ws=await gt(Rs);V={...ws,parent:ws.category,type:ws.category&&typeof ws.category=="object"?ws.category.type:"Digital"}}}catch(Rs){console.error("Error fetching target subcategory:",Rs)}}catch(bt){console.error("Error fetching target category:",bt)}if(!V){p(`Target category not found (ID: ${g}). Please refresh the page and try again.`),m(!1);return}if(V.isSubcategory||V.displayLevel&&V.displayLevel>0){p("Subcategories should be reordered in their own section. Please use the subcategory drag and drop."),m(!1);return}const Y=E.parent?typeof E.parent=="object"?E.parent._id:E.parent:null,ee=V.parent?typeof V.parent=="object"?V.parent._id:V.parent:null;if(Y!==ee){p("Cannot reorder categories across different levels. Categories must have the same parent."),m(!1);return}const Qe=[...qe,...xt.filter(bt=>!qe.find(Rs=>Rs._id===bt._id))].filter(bt=>(bt.parent?typeof bt.parent=="object"?bt.parent._id:bt.parent:null)===Y).sort((bt,Rs)=>(bt.sortOrder||0)-(Rs.sortOrder||0)),yt=xt.filter(bt=>(bt.parent?typeof bt.parent=="object"?bt.parent._id:bt.parent:null)===Y).sort((bt,Rs)=>(bt.sortOrder||0)-(Rs.sortOrder||0)),Ut=yt.findIndex(bt=>bt._id===c),St=yt.findIndex(bt=>bt._id===g);if(Ut===-1||St===-1){p("Category not found in filtered view"),m(!1);return}const Nt=Qe.find(bt=>bt._id===g);if(!Nt){p("Target category not found in siblings"),m(!1);return}const jt=E.sortOrder??0,Bt=Nt.sortOrder??0;if(jt===Bt){f("Categories are already in the same position"),m(!1);return}const ot=Qe.findIndex(bt=>bt._id===c),Gt=Qe.findIndex(bt=>bt._id===g);if(ot===-1||Gt===-1){p("Could not find categories in siblings list"),m(!1);return}const Ys=[];if(Ys.push({id:c,sortOrder:Bt}),ot<Gt)for(let bt=ot+1;bt<=Gt;bt++){const Rs=Qe[bt],ws=Rs.sortOrder??bt;bt===Gt?Ys.push({id:Rs._id,sortOrder:ws+1}):Ys.push({id:Rs._id,sortOrder:ws-1})}else for(let bt=Gt;bt<ot;bt++){const Rs=Qe[bt],ws=Rs.sortOrder??bt;Ys.push({id:Rs._id,sortOrder:ws+1})}const Fr=Ys.map(async({id:bt,sortOrder:Rs})=>{let ws=qe.find(Qa=>Qa._id===bt)||xt.find(Qa=>Qa._id===bt);if(!ws)try{const Qa=await fetch(`${Ae}/categories/${bt}`,{method:"GET",headers:Ct()});Qa.ok&&(ws=await gt(Qa))}catch(Qa){console.error(`Error fetching category ${bt}:`,Qa)}const Ur=new FormData;if(Ur.append("sortOrder",Rs.toString()),ws){if(Ur.append("name",ws.name),Ur.append("description",ws.description||""),Ur.append("type",ws.type),ws.parent){const Qa=typeof ws.parent=="object"?ws.parent._id:ws.parent;Ur.append("parent",Qa)}else Ur.append("parent","");ws.slug&&Ur.append("slug",ws.slug)}else console.warn(`Category ${bt} not found in local state, updating with sortOrder only`);const fr=await fetch(`${Ae}/categories/${bt}`,{method:"PUT",headers:{...Ct()},body:Ur});if(!fr.ok){const Qa=await fr.json().catch(()=>({error:`HTTP ${fr.status}: ${fr.statusText}`}));throw new Error(`Failed to update category ${bt}: ${Qa.error||fr.statusText}`)}return fr});await Promise.all(Fr),f(`Category moved successfully! Category moved from position ${jt+1} to ${Bt+1}.`),await ba()}catch(E){p(E instanceof Error?E.message:"Failed to reorder categories")}finally{m(!1)}},wc=async(c,g)=>{if(window.confirm("Are you sure you want to reorder these subcategories? This will update the sort order for all affected subcategories."))try{m(!0),p(null),f(null);let S=ea.find(jt=>jt._id===c);if(!S){const jt=xt.find(Bt=>Bt._id===c&&Bt.isSubcategory);jt&&(S=jt)}if(!S){p("Dragged subcategory not found"),m(!1);return}let E=ea.find(jt=>jt._id===g);if(!E){const jt=xt.find(Bt=>Bt._id===g&&Bt.isSubcategory);jt&&(E=jt)}if(!E){p("Target subcategory not found"),m(!1);return}const z=S.category?typeof S.category=="object"?S.category._id:S.category:null,V=E.category?typeof E.category=="object"?E.category._id:E.category:null;if(z!==V){p("Cannot reorder subcategories across different categories."),m(!1);return}let H=[...ea];if(H.length===0||!H.some(jt=>(jt.category?typeof jt.category=="object"?jt.category._id:jt.category:null)===z)){const jt=xt.filter(Bt=>Bt.isSubcategory||Bt.displayLevel>0?(Bt.category?typeof Bt.category=="object"?Bt.category._id:Bt.category:Bt.parent?typeof Bt.parent=="object"?Bt.parent._id:Bt.parent:null)===z:!1);if(jt.length>0)H=jt;else try{const Bt=await fetch(`${Ae}/subcategories/category/${z}`,{headers:Ct()});if(Bt.ok){const ot=await gt(Bt);H=Array.isArray(ot)?ot:(ot==null?void 0:ot.data)||[]}}catch(Bt){console.error("Error fetching subcategories:",Bt)}}const Y=H.filter(jt=>(jt.category?typeof jt.category=="object"?jt.category._id:jt.category:jt.parent?typeof jt.parent=="object"?jt.parent._id:jt.parent:null)===z).sort((jt,Bt)=>(jt.sortOrder||0)-(Bt.sortOrder||0)),ee=Y.findIndex(jt=>jt._id===c),De=Y.findIndex(jt=>jt._id===g);if(ee===-1||De===-1){p("Could not find subcategories in sorted list"),m(!1);return}if(ee===De){f("Subcategories are already in the same position"),m(!1);return}const Qe=[],yt=[...Y],[Ut]=yt.splice(ee,1);yt.splice(De,0,Ut),yt.forEach((jt,Bt)=>{Qe.push({id:jt._id,sortOrder:Bt})});const St=Qe.map(({id:jt,sortOrder:Bt})=>{const ot=new FormData;ot.append("sortOrder",Bt.toString());const Gt=ea.find(Ys=>Ys._id===jt);return Gt&&(ot.append("name",Gt.name),ot.append("description",Gt.description||""),ot.append("category",z||""),Gt.slug&&ot.append("slug",Gt.slug)),fetch(`${Ae}/subcategories/${jt}`,{method:"PUT",headers:{...Ct()},body:ot})});await Promise.all(St),f(`Subcategory "${S.name}" moved successfully!`);const Nt=ea.map(jt=>{const Bt=Qe.find(ot=>ot.id===jt._id);return Bt?{...jt,sortOrder:Bt.sortOrder}:jt});us(Nt),zs&&await nl(zs),await ba()}catch(S){p(S instanceof Error?S.message:"Failed to reorder subcategories")}finally{m(!1)}},Dn=c=>{const g=qe.find(N=>N._id===c);g&&(At({name:"",description:"",category:c,parent:"",type:g.type||"",slug:"",sortOrder:0,image:null}),fa(null),Zs(null),l("categories"),p(null),f(null))},cn=(c,g)=>{const N=qe.find(S=>S._id===c);if(N){_i(N.type||"");let S=[c];if(g&&(S=yo(c,g)),ta(S),J({...F,category:c,subcategory:g||""}),N.type){const E=qe.filter(z=>z.type===N.type);er(E)}g&&xi(g),S.forEach(E=>{xi(E)}),l("products"),p(null),f(null)}},dn=async()=>{try{const c=await fetch(`${Ae}/admin/users`,{headers:Ct()});if(!c.ok)throw new Error(`Failed to fetch users: ${c.status} ${c.statusText}`);const g=await gt(c);Le(g)}catch(c){console.error("Error fetching users:",c),p(c instanceof Error?c.message:"Failed to fetch users")}},jo=async()=>{try{const c=await fetch(`${Ae}/admin/employees`,{headers:Ct()});if(!c.ok)throw new Error(`Failed to fetch employees: ${c.status} ${c.statusText}`);const g=await gt(c);ha(g)}catch(c){console.error("Error fetching employees:",c),p(c instanceof Error?c.message:"Failed to fetch employees")}},Ii=async(c=!1)=>{ke(!0);try{const g=`${Ae}/admin/uploads${c?"?includeImages=true":""}`,N=await fetch(g,{headers:Ct()}),S=await gt(N);if(N.status===503)throw new Error(S.error||"Database connection timeout. Try again without images.");const E=Array.isArray(S)?S:S.uploads||[];Te(E)}catch(g){console.error("Error fetching uploads:",g),p(g instanceof Error?g.message:"Failed to fetch uploaded images")}finally{ke(!1)}},ll=async()=>{ns(!0);try{const c=await fetch(`${Ae}/admin/orders`,{headers:Ct()});if(!c.ok)throw new Error(`Failed to fetch orders: ${c.status} ${c.statusText}`);const g=await gt(c);ts(g||[])}catch(c){console.error("Error fetching orders:",c),p(c instanceof Error?c.message:"Failed to fetch orders")}finally{ns(!1)}},vo=async()=>{Yd(!0);try{const c=`${Ae}/admin/attribute-rules?page=${Wd.page}&limit=${Wd.limit}`,g=await fetch(c,{method:"GET",headers:Ct()});if(!g.ok)throw new Error(`Failed to fetch attribute rules: ${g.status} ${g.statusText}`);const N=await gt(g),S=N.success?N.data:Array.isArray(N)?N:[];console.log(" Fetched attribute rules:",S),Qd(S),N.pagination&&hc(N.pagination)}catch(c){console.error("Error fetching attribute rules:",c),p(c instanceof Error?c.message:"Failed to fetch attribute rules"),Qd([])}finally{Yd(!1)}},ru=async c=>{c.preventDefault(),m(!0),p(null),f(null);try{if(!Rt.name.trim()){p("Rule name is required"),m(!1);return}if(!Rt.when.attribute||!Rt.when.value){p("WHEN condition (attribute and value) is required"),m(!1);return}if(Rt.then.length===0){p("At least one THEN action is required"),m(!1);return}for(const V of Rt.then){if(!V.targetAttribute){p(`Action "${V.action}" requires a target attribute`),m(!1);return}if(V.targetAttribute===Rt.when.attribute){p("Target attribute cannot be the same as WHEN attribute"),m(!1);return}if(V.action==="SHOW_ONLY"&&(!V.allowedValues||V.allowedValues.length===0)){p("SHOW_ONLY action requires at least one allowed value"),m(!1);return}if(V.action==="SET_DEFAULT"&&!V.defaultValue){p("SET_DEFAULT action requires a default value"),m(!1);return}}if(Rt.scope==="CATEGORY"&&!Rt.scopeRefId){p("Category scope requires a category selection"),m(!1);return}if(Rt.scope==="PRODUCT"&&!Rt.scopeRefId){p("Product scope requires a product selection"),m(!1);return}const g=wt.find(V=>V.attributeName===Rt.when.attribute);if(!g){p("WHEN attribute not found"),m(!1);return}const N={name:Rt.name,when:{attribute:g._id,value:Rt.when.value},then:Rt.then.map(V=>{if(V.action==="TRIGGER_PRICING")return{action:V.action,pricingSignal:V.pricingSignal||{pricingKey:"",scope:"PRODUCT",priority:0}};const H=wt.find(Y=>Y.attributeName===V.targetAttribute);if(!H&&V.targetAttribute)throw new Error(`Target attribute "${V.targetAttribute}" not found`);return{action:V.action,targetAttribute:H==null?void 0:H._id,allowedValues:V.allowedValues||[],defaultValue:V.defaultValue||null}}),priority:Rt.priority||0,isActive:Rt.isActive};Rt.scope==="CATEGORY"?N.applicableCategory=Rt.scopeRefId:Rt.scope==="PRODUCT"&&(N.applicableProduct=Rt.scopeRefId);const S=Li?`${Ae}/admin/attribute-rules/${Li}`:`${Ae}/admin/attribute-rules`,z=await fetch(S,{method:Li?"PUT":"POST",headers:{...Ct(!0)},body:JSON.stringify(N)});if(!z.ok){const V=await gt(z);throw new Error(V.error||`Failed to ${Li?"update":"create"} rule`)}f(`Rule ${Li?"updated":"created"} successfully`),await vo(),No()}catch(g){console.error("Error saving attribute rule:",g),p(g instanceof Error?g.message:`Failed to ${Li?"update":"create"} rule`)}finally{m(!1)}},Bm=async c=>{if(window.confirm("Are you sure you want to delete this rule?")){m(!0),p(null);try{if(!(await fetch(`${Ae}/admin/attribute-rules/${c}`,{method:"DELETE",headers:Ct()})).ok)throw new Error("Failed to delete rule");f("Rule deleted successfully"),await vo()}catch(g){console.error("Error deleting rule:",g),p(g instanceof Error?g.message:"Failed to delete rule")}finally{m(!1)}}},No=()=>{pc(null),go(!1),Ma({name:"",scope:"GLOBAL",scopeRefId:"",when:{attribute:"",value:""},then:[],priority:0,isActive:!0})},qm=c=>{var E;const g=typeof c.when.attribute=="object"&&c.when.attribute!==null?c.when.attribute.attributeName:((E=wt.find(z=>z._id===c.when.attribute))==null?void 0:E.attributeName)||"";let N="";c.applicableProduct?N=typeof c.applicableProduct=="object"&&c.applicableProduct!==null?c.applicableProduct._id:c.applicableProduct:c.applicableCategory&&(N=typeof c.applicableCategory=="object"&&c.applicableCategory!==null?c.applicableCategory._id:c.applicableCategory);const S=(c.then||[]).filter(z=>z&&z.targetAttribute).map(z=>{var H;const V=typeof z.targetAttribute=="object"&&z.targetAttribute!==null?z.targetAttribute.attributeName:z.targetAttribute&&((H=wt.find(Y=>Y._id===z.targetAttribute))==null?void 0:H.attributeName)||"";return{action:z.action,targetAttribute:V,allowedValues:z.allowedValues||[],defaultValue:z.defaultValue||null}});Ma({name:`${c.name||"Untitled Rule"} (Copy)`,scope:c.applicableProduct?"PRODUCT":c.applicableCategory?"CATEGORY":"GLOBAL",scopeRefId:N,when:{attribute:g,value:c.when.value||""},then:S,priority:c.priority||0,isActive:c.isActive!==void 0?c.isActive:!0}),pc(null),go(!0)},iu=c=>{var S;const g=typeof c.when.attribute=="object"&&c.when.attribute!==null?c.when.attribute.attributeName:((S=wt.find(E=>E._id===c.when.attribute))==null?void 0:S.attributeName)||"";let N="";c.applicableProduct?N=typeof c.applicableProduct=="object"&&c.applicableProduct!==null?c.applicableProduct._id:c.applicableProduct:c.applicableCategory&&(N=typeof c.applicableCategory=="object"&&c.applicableCategory!==null?c.applicableCategory._id:c.applicableCategory),Ma({name:c.name||"",scope:c.applicableProduct?"PRODUCT":c.applicableCategory?"CATEGORY":"GLOBAL",scopeRefId:N,when:{attribute:g,value:c.when.value||""},then:(c.then||[]).filter(E=>E&&E.targetAttribute).map(E=>{var V;const z=typeof E.targetAttribute=="object"&&E.targetAttribute!==null?E.targetAttribute.attributeName:E.targetAttribute&&((V=wt.find(H=>H._id===E.targetAttribute))==null?void 0:V.attributeName)||"";return{action:E.action,targetAttribute:z,allowedValues:E.allowedValues||[],defaultValue:E.defaultValue||null}}),priority:c.priority||0,isActive:c.isActive!==void 0?c.isActive:!0}),pc(c._id),go(!0)},Yl=async c=>{Zd(!0);try{const g=c||Fi,N=new URLSearchParams;g.attributeId&&N.append("attributeId",g.attributeId),g.parentValue&&N.append("parentValue",g.parentValue);const S=`${Ae}/admin/sub-attributes${N.toString()?`?${N.toString()}`:""}`,E=await fetch(S,{method:"GET",headers:Ct()});if(!E.ok)throw new Error(`Failed to fetch sub-attributes: ${E.status} ${E.statusText}`);const z=await gt(E);xc(Array.isArray(z)?z:[])}catch(g){console.error("Error fetching sub-attributes:",g),p(g instanceof Error?g.message:"Failed to fetch sub-attributes"),xc([])}finally{Zd(!1)}},Sc=async c=>{c.preventDefault(),m(!0),p(null),f(null);try{if(!_s.parentAttribute){p("Parent attribute is required"),m(!1);return}if(!_s.parentValue){p("Parent value is required"),m(!1);return}const g=wt.find(N=>N.attributeName===_s.parentAttribute);if(!g){p("Parent attribute not found"),m(!1);return}if(rn){if(!_s.value||!_s.label){p("Value and label are required for the sub-attribute being edited"),m(!1);return}const N=new FormData;N.append("parentAttribute",g._id),N.append("parentValue",_s.parentValue),N.append("value",_s.value),N.append("label",_s.label),N.append("priceAdd",_s.priceAdd.toString()),N.append("isEnabled",_s.isEnabled.toString()),_s.image&&N.append("image",_s.image);const S=await fetch(`${Ae}/admin/sub-attributes/${rn}`,{method:"PUT",headers:{Authorization:Ct().Authorization,Accept:"application/json"},body:N});if(!S.ok){const ee=await gt(S);throw new Error(ee.error||"Failed to update sub-attribute")}const E=Pr.filter(ee=>ee.value.trim()&&ee.label.trim());let z=!0,V=0,H=0;const Y=[];if(E.length>0)for(const ee of E)try{const De=new FormData;De.append("parentAttribute",g._id),De.append("parentValue",_s.parentValue),De.append("value",ee.value.trim()),De.append("label",ee.label.trim()),De.append("priceAdd",ee.priceAdd.toString()),De.append("isEnabled",ee.isEnabled.toString()),ee.image&&De.append("image",ee.image);const Qe=await fetch(`${Ae}/admin/sub-attributes`,{method:"POST",headers:{Authorization:Ct().Authorization,Accept:"application/json"},body:De});if(!Qe.ok){const yt=await gt(Qe);throw new Error(yt.error||"Failed to create sub-attribute")}V++}catch(De){H++,Y.push(`${ee.label}: ${De instanceof Error?De.message:"Unknown error"}`)}H>0?p(`Updated 1 sub-attribute. Created ${V} new sub-attribute(s), but ${H} failed: ${Y.join("; ")}`):V>0?f(`Successfully updated 1 sub-attribute and created ${V} new sub-attribute(s)`):f("Sub-attribute updated successfully"),await Yl(),await or(),un()}else{const N=Pr.filter(V=>V.value.trim()&&V.label.trim());if(N.length===0){p("At least one sub-attribute with value and label is required"),m(!1);return}let S=0,E=0;const z=[];for(const V of N)try{const H=new FormData;H.append("parentAttribute",g._id),H.append("parentValue",_s.parentValue),H.append("value",V.value.trim()),H.append("label",V.label.trim()),H.append("priceAdd",V.priceAdd.toString()),H.append("isEnabled",V.isEnabled.toString()),V.image&&H.append("image",V.image);const Y=await fetch(`${Ae}/admin/sub-attributes`,{method:"POST",headers:{Authorization:Ct().Authorization,Accept:"application/json"},body:H});if(!Y.ok){const ee=await gt(Y);throw new Error(ee.error||"Failed to create sub-attribute")}S++}catch(H){E++,z.push(`${V.label}: ${H instanceof Error?H.message:"Unknown error"}`)}E>0?p(`Created ${S} sub-attribute(s), but ${E} failed: ${z.join("; ")}`):f(`Successfully created ${S} sub-attribute(s)`),await Yl(),await or(),un()}}catch(g){console.error("Error saving sub-attribute:",g),p(g instanceof Error?g.message:"Failed to save sub-attribute")}finally{m(!1)}},ei=async c=>{if(window.confirm("Are you sure you want to delete this sub-attribute?")){m(!0),p(null);try{if(!(await fetch(`${Ae}/admin/sub-attributes/${c}`,{method:"DELETE",headers:Ct()})).ok)throw new Error("Failed to delete sub-attribute");f("Sub-attribute deleted successfully"),await Yl(),await or()}catch(g){console.error("Error deleting sub-attribute:",g),p(g instanceof Error?g.message:"Failed to delete sub-attribute")}finally{m(!1)}}},un=()=>{Jd(null),gc(!1),$i({parentAttribute:"",parentValue:"",value:"",label:"",image:null,priceAdd:0,isEnabled:!0}),nn([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}])},jr=()=>{nn([...Pr,{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}])},Pn=c=>{Pr.length>1&&nn(Pr.filter((g,N)=>N!==c))},Rr=(c,g,N)=>{const S=[...Pr];S[c]={...S[c],[g]:N},nn(S)},wo=c=>{var N;const g=typeof c.parentAttribute=="object"&&c.parentAttribute!==null?c.parentAttribute.attributeName:((N=wt.find(S=>S._id===c.parentAttribute))==null?void 0:N.attributeName)||"";$i({parentAttribute:g,parentValue:c.parentValue||"",value:c.value||"",label:c.label||"",image:null,priceAdd:c.priceAdd||0,isEnabled:c.isEnabled!==void 0?c.isEnabled:!0}),nn([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}]),Jd(c._id),gc(!0)},or=async(c,g)=>{an(!0);try{let N=`${Ae}/attribute-types`;const S=new URLSearchParams;c&&S.append("categoryId",c),g&&S.append("subCategoryId",g),S.toString()&&(N+=`?${S.toString()}`),console.log("Fetching attribute types from:",N);const E=await fetch(N,{method:"GET",headers:Ct()});if(console.log("Attribute types response status:",E.status,E.statusText),!E.ok){if(E.status===404){console.warn("Attribute types endpoint not found (404). The server may need to be restarted. Returning empty array."),Ra([]);return}throw new Error(`Failed to fetch attribute types: ${E.status} ${E.statusText}`)}const z=await gt(E),H=(z.data||z||[]).filter(Y=>{if(Y.isCommonAttribute||!c&&!g)return!0;const ee=Y.applicableCategories||[],De=Y.applicableSubCategories||[];return!!(ee.length===0&&De.length===0||c&&ee.some(Qe=>(typeof Qe=="object"&&Qe!==null?Qe._id:Qe)===c)||g&&De.some(Qe=>(typeof Qe=="object"&&Qe!==null?Qe._id:Qe)===g))});Ra(H)}catch(N){console.error("Error fetching attribute types:",N),N instanceof Error&&(N.message.includes("404")||N.message.includes("Not Found"))?(console.warn("Attribute types endpoint returned 404. Please restart the server to register the route."),Ra([])):p(N instanceof Error?N.message:"Failed to fetch attribute types")}finally{an(!1)}},Cc=()=>{let c=[];if(Z.attributeOptionsTable&&Z.attributeOptionsTable.length>0)c=Z.attributeOptionsTable.filter(z=>z.name.trim()!=="").map(z=>{var De,Qe,yt,Ut;let V=0;(De=z.optionUsage)!=null&&De.price&&z.priceImpact?V=parseFloat(z.priceImpact)||0:z.priceImpactPer1000&&(V=parseFloat(z.priceImpactPer1000)||0);const H=V>0?1+V/1e3:1,Y=[];(Qe=z.optionUsage)!=null&&Qe.price&&Y.push(`Price Impact: ${z.priceImpact||0}`),(yt=z.optionUsage)!=null&&yt.image&&Y.push(`Images Required: ${z.numberOfImagesRequired||0}`),(Ut=z.optionUsage)!=null&&Ut.listing&&Y.push(`Filters: ${z.listingFilters||"None"}`);const ee=Y.length>0?Y.join(" | "):"";return{value:z.name.toLowerCase().replace(/\s+/g,"-"),label:z.name,priceMultiplier:H,description:ee,image:z.image||""}});else if(Z.simpleOptions)c=Z.simpleOptions.split(",").map(V=>V.trim()).filter(V=>V!=="").map(V=>({value:V.toLowerCase().replace(/\s+/g,"-"),label:V,priceMultiplier:1,description:"",image:""}));else if(Z.primaryEffectType==="PRICE"&&Z.priceImpactPer1000){const z=parseFloat(Z.priceImpactPer1000)||0,V=z>0?1+z/1e3:1;c=[{value:Z.attributeName.toLowerCase().replace(/\s+/g,"-"),label:Z.attributeName,priceMultiplier:V,description:"",image:""}]}const g=Z.isPriceEffect||Z.effectDescription&&Z.effectDescription.toLowerCase().includes("price");if(Z.isPriceEffect&&Z.priceEffectAmount&&c.length===0){const z=parseFloat(Z.priceEffectAmount)||0,V=z>0?1+z/1e3:1;c=[{value:Z.attributeName.toLowerCase().replace(/\s+/g,"-"),label:Z.attributeName,priceMultiplier:V,description:"",image:""}]}let N=Z.primaryEffectType;if(Z.effectDescription){const z=Z.effectDescription.toLowerCase();z.includes("price")||z.includes("cost")?N="PRICE":z.includes("file")||z.includes("upload")||z.includes("image")?N="FILE":z.includes("variant")||z.includes("version")||z.includes("type")?N="VARIANT":N="INFORMATIONAL"}const S=Z.primaryEffectType==="FILE"?Z.inputStyle==="FILE_UPLOAD"?"PRINTING_IMAGE":"GENERAL":Z.primaryEffectType==="PRICE"&&Z.inputStyle==="NUMBER"?"QUANTITY_PRICING":"GENERAL";if(Z.isFixedQuantity&&Z.fixedQuantityMin&&Z.fixedQuantityMax){const z=parseInt(Z.fixedQuantityMin)||0,V=parseInt(Z.fixedQuantityMax)||0;c.length>0?c[0].description=JSON.stringify({fixedQuantityMin:z,fixedQuantityMax:V}):c.push({value:"fixed-quantity",label:"Fixed Quantity",priceMultiplier:1,description:JSON.stringify({fixedQuantityMin:z,fixedQuantityMax:V}),image:""})}const E=N||Z.primaryEffectType||"INFORMATIONAL";return{attributeName:Z.attributeName||"",functionType:S||"GENERAL",isPricingAttribute:g||!1,inputStyle:Z.inputStyle||"DROPDOWN",isFixedQuantityNeeded:Z.isFixedQuantity||Z.inputStyle==="NUMBER"&&E==="PRICE",primaryEffectType:E,effectDescription:Z.effectDescription||"",isFilterable:Z.isFilterable!==void 0?Z.isFilterable:E==="INFORMATIONAL"||E==="VARIANT",attributeValues:c,defaultValue:c.length>0?c[0].value:"",isRequired:Z.isRequired!==void 0?Z.isRequired:E==="FILE"||E==="PRICE"||Z.isPriceEffect,displayOrder:0,isCommonAttribute:Z.isCommonAttribute!==void 0?Z.isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[],parentAttribute:Z.parentAttribute||null,showWhenParentValue:Z.showWhenParentValue||[],hideWhenParentValue:Z.hideWhenParentValue||[],fixedQuantityMin:Z.isFixedQuantity?parseInt(Z.fixedQuantityMin)||0:void 0,fixedQuantityMax:Z.isFixedQuantity?parseInt(Z.fixedQuantityMax)||0:void 0,isStepQuantity:Z.isStepQuantity||!1,isRangeQuantity:Z.isRangeQuantity||!1,stepQuantities:Z.isStepQuantity&&Z.stepQuantities.length>0?Z.stepQuantities.map(z=>({quantity:parseFloat(z.quantity)||0,price:parseFloat(z.price)||0})).filter(z=>z.quantity>0):[],rangeQuantities:Z.isRangeQuantity&&Z.rangeQuantities.length>0?Z.rangeQuantities.map(z=>({min:parseFloat(z.min)||0,max:z.max?parseFloat(z.max):null,price:parseFloat(z.price)||0})).filter(z=>z.min>0):[]}},mn=async c=>{var g,N;c.preventDefault(),c.stopPropagation(),m(!0),p(null),f(null);try{const S=Cc();k({});let E=!1;const z={};if(S.attributeName||(z.attributeName="Attribute name is required",E=!0),S.functionType,S.inputStyle,(!S.primaryEffectType||S.primaryEffectType.trim()==="")&&(z.primaryEffectType="Primary effect type is required. Please describe what this attribute affects in the 'What This Affects' field.",E=!0),(!Z.effectDescription||Z.effectDescription.trim()==="")&&(z.primaryEffectType="Please describe what this attribute affects in the 'What This Affects' field.",E=!0),["DROPDOWN","RADIO","POPUP"].includes(S.inputStyle)&&(!S.attributeValues||S.attributeValues.length<2)&&(z.attributeValues=`${S.inputStyle} requires at least 2 options. Please add options in the table above.`,E=!0),Z.attributeOptionsTable&&Z.attributeOptionsTable.length>0&&Z.attributeOptionsTable.filter((St,Nt)=>{if(!St.name||St.name.trim()==="")return!1;const jt=St.optionUsage||{price:!1,image:!1,listing:!1};return!jt.price&&!jt.image&&!jt.listing}).length>0&&(z.attributeValues="Each option must have at least one usage selected (Price, Image, or Listing).",E=!0),E){k(z),p("Please fix the errors below"),m(!1);const Ut=Object.keys(z)[0];if(Ut==="attributeName")ka("attributeName","attribute-name");else if(Ut==="functionType")ka("functionType","attribute-functionType");else if(Ut==="inputStyle")ka("inputStyle","attribute-inputStyle");else if(Ut==="primaryEffectType")ka("primaryEffectType","attribute-primaryEffectType");else if(Ut==="attributeValues"){const St=document.querySelector("[data-attribute-options-table]");St&&St.scrollIntoView({behavior:"smooth",block:"center"})}return}const V={attributeName:S.attributeName||"",functionType:S.functionType||"GENERAL",isPricingAttribute:S.isPricingAttribute||!1,inputStyle:S.inputStyle||"DROPDOWN",isFixedQuantityNeeded:S.isFixedQuantityNeeded||!1,primaryEffectType:S.primaryEffectType||"INFORMATIONAL",effectDescription:Z.effectDescription||S.effectDescription||"",isFilterable:S.isFilterable||!1,attributeValues:JSON.stringify(S.attributeValues),defaultValue:S.defaultValue||"",isRequired:S.isRequired||!1,displayOrder:S.displayOrder||0,isCommonAttribute:S.isCommonAttribute!==void 0?S.isCommonAttribute:!0,applicableCategories:JSON.stringify(S.applicableCategories),applicableSubCategories:JSON.stringify(S.applicableSubCategories),parentAttribute:S.parentAttribute||null,showWhenParentValue:JSON.stringify(S.showWhenParentValue||[]),hideWhenParentValue:JSON.stringify(S.hideWhenParentValue||[])};console.log("=== ATTRIBUTE TYPE PAYLOAD ==="),console.log("Form effectDescription:",Z.effectDescription),console.log("FullAttributeType effectDescription:",S.effectDescription),console.log("Payload effectDescription:",V.effectDescription),console.log("==============================");const H=zi?`${Ae}/attribute-types/${zi}`:`${Ae}/attribute-types`,Y=zi?"PUT":"POST";console.log("Sending attribute type request:",{url:H,method:Y,payload:{...V,attributeValues:"[stringified]",effectDescription:V.effectDescription}});const ee=await fetch(H,{method:Y,headers:{...Ct(),"Content-Type":"application/json"},body:JSON.stringify(V)});if(console.log("Attribute type response status:",ee.status,ee.statusText),ee.status===404)throw new Error("Attribute types API endpoint not found (404). Please ensure the server is running and the route is registered. Try restarting the server.");const De=await gt(ee);if(console.log("Attribute type response data:",{success:De.success,effectDescription:(g=De.data)==null?void 0:g.effectDescription,fullData:De.data}),!ee.ok)throw new Error(De.error||De.message||`Failed to save attribute type: ${ee.status} ${ee.statusText}`);f(zi?"Attribute type updated successfully":"Attribute type created successfully"),mt({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]});const Qe=Hl,yt=(De==null?void 0:De._id)||((N=De==null?void 0:De.attributeType)==null?void 0:N._id);sl(null),Hl&&Gl(!1),await or(),Qe&&yt&&et([...Be||[],{attributeTypeId:yt,isEnabled:!0,isRequired:!1,displayOrder:(Be||[]).length}])}catch(S){console.error("Error saving attribute type:",S),p(S instanceof Error?S.message:"Failed to save attribute type")}finally{m(!1)}},nu=async c=>{var g,N,S,E;try{const z=await fetch(`${Ae}/attribute-types/${c}`,{method:"GET",headers:Ct()});if(!z.ok)throw new Error(`Failed to fetch attribute type: ${z.status}`);const V=await gt(z),H=V.data||V;if(console.log("EDIT AttributeType - Fetched attributeType:",{_id:H==null?void 0:H._id,attributeName:H==null?void 0:H.attributeName,isStepQuantity:H==null?void 0:H.isStepQuantity,isRangeQuantity:H==null?void 0:H.isRangeQuantity,stepQuantities:H==null?void 0:H.stepQuantities,rangeQuantities:H==null?void 0:H.rangeQuantities}),H){window.scrollTo({top:0,behavior:"smooth"});const Y=(H.attributeValues||[]).filter(Nt=>(Nt.label||Nt.value)&&Nt.value!=="fixed-quantity").map(Nt=>{const jt=Nt.priceMultiplier?((Nt.priceMultiplier-1)*1e3).toFixed(2):"0",Bt=parseFloat(jt)>0;return{name:Nt.label||Nt.value||"",priceImpactPer1000:jt,image:Nt.image||void 0,optionUsage:{price:Bt,image:!!Nt.image,listing:!1},priceImpact:Bt?jt:"",numberOfImagesRequired:Nt.image?1:0,listingFilters:""}})||[],ee=(Y||[]).map(Nt=>Nt.name).join(", ");let De="",Qe="",yt=!1;if(H.fixedQuantityMin!==void 0&&H.fixedQuantityMax!==void 0)De=String(H.fixedQuantityMin),Qe=String(H.fixedQuantityMax),yt=!0;else if(H.attributeValues&&H.attributeValues.length>0)try{const Nt=H.attributeValues[0];if(Nt.description){const jt=JSON.parse(Nt.description);jt.fixedQuantityMin&&jt.fixedQuantityMax&&(De=String(jt.fixedQuantityMin),Qe=String(jt.fixedQuantityMax),yt=!0)}}catch{}const Ut=H.isPricingAttribute||!1;let St="";if(Ut&&H.attributeValues&&H.attributeValues.length>0){const Nt=H.attributeValues[0];Nt.priceMultiplier&&(St=((Nt.priceMultiplier-1)*1e3).toFixed(2))}mt({attributeName:H.attributeName||"",inputStyle:H.inputStyle||"DROPDOWN",attributeImage:null,effectDescription:H.effectDescription||"",simpleOptions:ee,isPriceEffect:Ut,isStepQuantity:H.isStepQuantity||!1,isRangeQuantity:H.isRangeQuantity||!1,priceEffectAmount:St,stepQuantities:(H.stepQuantities||[]).map(Nt=>({quantity:Nt.quantity?String(Nt.quantity):"",price:Nt.price?String(Nt.price):""})),rangeQuantities:(H.rangeQuantities||[]).map(Nt=>({min:Nt.min?String(Nt.min):"",max:Nt.max?String(Nt.max):"",price:Nt.price?String(Nt.price):""})),isFixedQuantity:yt,fixedQuantityMin:De,fixedQuantityMax:Qe,primaryEffectType:H.primaryEffectType||"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:Y,functionType:H.functionType||"GENERAL",isPricingAttribute:H.isPricingAttribute||!1,isFixedQuantityNeeded:H.isFixedQuantityNeeded||!1,isFilterable:H.isFilterable||!1,attributeValues:H.attributeValues||[],defaultValue:H.defaultValue||"",isRequired:H.isRequired||!1,displayOrder:H.displayOrder||0,isCommonAttribute:H.isCommonAttribute!==void 0?H.isCommonAttribute:!0,applicableCategories:((g=H.applicableCategories)==null?void 0:g.map(Nt=>Nt._id||Nt))||[],applicableSubCategories:((N=H.applicableSubCategories)==null?void 0:N.map(Nt=>Nt._id||Nt))||[],parentAttribute:H.parentAttribute&&typeof H.parentAttribute=="object"?H.parentAttribute._id:H.parentAttribute||"",showWhenParentValue:H.showWhenParentValue||[],hideWhenParentValue:H.hideWhenParentValue||[]}),sl(c)}else p("Attribute type not found")}catch(z){console.error("Error fetching attribute type for editing:",z),p(z instanceof Error?z.message:"Failed to load attribute type");const V=wt.find(H=>H._id===c);if(V){const H=(V.attributeValues||[]).filter(St=>(St.label||St.value)&&St.value!=="fixed-quantity").map(St=>{const Nt=St.priceMultiplier?((St.priceMultiplier-1)*1e3).toFixed(2):"0",jt=parseFloat(Nt)>0;return{name:St.label||St.value||"",priceImpactPer1000:Nt,image:St.image||void 0,optionUsage:{price:jt,image:!!St.image,listing:!1},priceImpact:jt?Nt:"",numberOfImagesRequired:St.image?1:0,listingFilters:""}})||[],Y=(H||[]).map(St=>St.name).join(", ");let ee="",De="",Qe=!1;V.fixedQuantityMin!==void 0&&V.fixedQuantityMax!==void 0&&(ee=String(V.fixedQuantityMin),De=String(V.fixedQuantityMax),Qe=!0);const yt=V.isPricingAttribute||!1;let Ut="";if(yt&&V.attributeValues&&V.attributeValues.length>0){const St=V.attributeValues[0];St.priceMultiplier&&(Ut=((St.priceMultiplier-1)*1e3).toFixed(2))}mt({attributeName:V.attributeName||"",inputStyle:V.inputStyle||"DROPDOWN",attributeImage:null,effectDescription:V.effectDescription||"",simpleOptions:Y,isPriceEffect:yt,isStepQuantity:V.isStepQuantity||!1,isRangeQuantity:V.isRangeQuantity||!1,priceEffectAmount:Ut,stepQuantities:(V.stepQuantities||[]).map(St=>({quantity:St.quantity?String(St.quantity):"",price:St.price?String(St.price):""})),rangeQuantities:(V.rangeQuantities||[]).map(St=>({min:St.min?String(St.min):"",max:St.max?String(St.max):"",price:St.price?String(St.price):""})),isFixedQuantity:Qe,fixedQuantityMin:ee,fixedQuantityMax:De,primaryEffectType:V.primaryEffectType||"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:H,functionType:V.functionType||"GENERAL",isPricingAttribute:V.isPricingAttribute||!1,isFixedQuantityNeeded:V.isFixedQuantityNeeded||!1,isFilterable:V.isFilterable||!1,attributeValues:V.attributeValues||[],defaultValue:V.defaultValue||"",isRequired:V.isRequired||!1,displayOrder:V.displayOrder||0,isCommonAttribute:V.isCommonAttribute!==void 0?V.isCommonAttribute:!0,applicableCategories:((S=V.applicableCategories)==null?void 0:S.map(St=>St._id||St))||[],applicableSubCategories:((E=V.applicableSubCategories)==null?void 0:E.map(St=>St._id||St))||[],parentAttribute:V.parentAttribute&&typeof V.parentAttribute=="object"?V.parentAttribute._id:V.parentAttribute||"",showWhenParentValue:V.showWhenParentValue||[],hideWhenParentValue:V.hideWhenParentValue||[]}),sl(c)}}},So=async c=>{const g=wt.find(N=>N._id===c);if(g&&window.confirm(`Are you sure you want to delete the attribute type "${g.attributeName}"?

Note: This action cannot be undone. If this attribute is being used in any products, the deletion will be prevented.`))try{m(!0),p(null),f(null);const N=await fetch(`${Ae}/attribute-types/${c}`,{method:"DELETE",headers:Ct()});if(!N.ok){const E=N.clone();let z="Failed to delete attribute type";try{const H=await E.json();z=H.error||H.message||z,console.log("Error data received:",H)}catch{try{z=await N.text()||N.statusText||z}catch{z=N.statusText||z}}console.log("Error message:",z),z.toLowerCase().includes("used")||z.toLowerCase().includes("in use")||z.toLowerCase().includes("product")||z.toLowerCase().includes("cannot delete")?Wi.error(e.jsx("div",{children:e.jsx("div",{className:"font-semibold",children:"Attribute is in use"})}),{duration:5e3,position:"bottom-right"}):Wi.error(z,{duration:4e3,position:"bottom-right"}),p(z),m(!1);return}const S=await gt(N);Wi.success("Attribute deleted successfully",{duration:3e3,position:"bottom-right"}),or()}catch(N){console.error("Error deleting attribute type:",N);const S=N instanceof Error?N.message:"Failed to delete attribute type";S.toLowerCase().includes("used")||S.toLowerCase().includes("in use")||S.toLowerCase().includes("product")?Wi.error(e.jsx("div",{children:e.jsx("div",{className:"font-semibold",children:"Attribute is in use"})}),{duration:5e3,position:"bottom-right"}):Wi.error(S,{duration:4e3,position:"bottom-right"}),p(S)}finally{m(!1)}},Mr=async()=>{yc(!0);try{const c=await fetch(`${Ae}/departments`,{method:"GET",headers:Ct()});if(!c.ok)throw new Error(`Failed to fetch departments: ${c.status} ${c.statusText}`);const g=await gt(c);bc(g.data||g||[])}catch(c){console.error("Error fetching departments:",c),p(c instanceof Error?c.message:"Failed to fetch departments"),bc([])}finally{yc(!1)}},Hm=async c=>{c.preventDefault(),m(!0),p(null),f(null);try{if(Q({}),!br.name.trim()){Q({name:"Department name is required"}),p("Department name is required"),m(!1),ka("name","department-name");return}const g=Ui?`${Ae}/departments/${Ui}`:`${Ae}/departments`,S=await fetch(g,{method:Ui?"PUT":"POST",headers:{...Ct(),"Content-Type":"application/json"},body:JSON.stringify(br)}),E=await gt(S);if(!S.ok)throw new Error(E.error||`Failed to ${Ui?"update":"create"} department`);f(Ui?"Department updated successfully":"Department created successfully"),An({name:"",description:"",isEnabled:!0,operators:[]}),Cn(null),Mr()}catch(g){console.error("Error saving department:",g),p(g instanceof Error?g.message:"Failed to save department")}finally{m(!1)}},vr=c=>{var N;const g=qa.find(S=>S._id===c);if(g){window.scrollTo({top:0,behavior:"smooth"});const S=((N=g.operators)==null?void 0:N.map(E=>typeof E=="object"&&E!==null&&(E._id||E.id)||String(E)))||[];An({name:g.name||"",description:g.description||"",isEnabled:g.isEnabled!==void 0?g.isEnabled:!0,operators:S}),Cn(c)}},Ac=async c=>{if(window.confirm("Are you sure you want to delete this department? This action cannot be undone if there are active orders.")){m(!0);try{const g=await fetch(`${Ae}/departments/${c}`,{method:"DELETE",headers:Ct()}),N=await gt(g);if(!g.ok)throw new Error(N.error||"Failed to delete department");f("Department deleted successfully"),Mr()}catch(g){console.error("Error deleting department:",g),p(g instanceof Error?g.message:"Failed to delete department")}finally{m(!1)}}},_r=async()=>{al(!0);try{const c=await fetch(`${Ae}/sequences`,{headers:Ct()});if(!c.ok)throw new Error("Failed to fetch sequences");const g=await gt(c);eu(g.data||g||[])}catch(c){console.error("Error fetching sequences:",c),p(c instanceof Error?c.message:"Failed to fetch sequences")}finally{al(!1)}},lu=async c=>{c.preventDefault(),m(!0),p(null),f(null);try{le({});let g=!1;const N={};if(zt.name.trim()||(N.name="Sequence name is required",g=!0),zt.printType||(N.printType="Print type is required",g=!0),zt.category||(N.category="Category is required",g=!0),(!zt.selectedDepartments||zt.selectedDepartments.length===0)&&(N.selectedDepartments="At least one department must be selected",g=!0),g){le(N),p("Please fix the errors below"),m(!1);const H=Object.keys(N)[0];H==="name"?ka("name","sequence-name"):H==="printType"?ka("printType","sequence-printType"):H==="category"?ka("category","sequence-category"):H==="selectedDepartments"&&ka("selectedDepartments","sequence-departments");return}const S=yr?`${Ae}/sequences/${yr}`:`${Ae}/sequences`,z=await fetch(S,{method:yr?"PUT":"POST",headers:{...Ct(),"Content-Type":"application/json"},body:JSON.stringify({name:zt.name,printType:zt.printType,category:zt.category||null,subcategory:zt.subcategory||null,departments:zt.selectedDepartments,attributes:zt.selectedAttributes||[]})}),V=await gt(z);if(!z.ok)throw new Error(V.error||`Failed to ${yr?"update":"create"} sequence`);f(yr?"Sequence updated successfully":"Sequence created successfully"),lr({name:"",printType:"",category:"",subcategory:"",selectedDepartments:[],selectedAttributes:[]}),jc(null),_r()}catch(g){console.error("Error saving sequence:",g),p(g instanceof Error?g.message:"Failed to save sequence")}finally{m(!1)}},Co=c=>{const g=(ln||[]).find(N=>N._id===c);if(g){window.scrollTo({top:0,behavior:"smooth"});let N="";if(g.category){const S=typeof g.category=="object"?g.category:qe.find(E=>E._id===g.category);S&&(S.type==="Digital"||S.type==="digital")?N="digital":N="bulk"}else N="bulk";lr({name:g.name||"",printType:N,category:g.category&&typeof g.category=="object"&&g.category!==null?g.category._id:g.category||"",subcategory:g.subcategory&&typeof g.subcategory=="object"&&g.subcategory!==null?g.subcategory._id:g.subcategory||"",selectedDepartments:(g.departments||[]).map(S=>!S||!S.department?null:typeof S.department=="object"&&S.department!==null?S.department._id:S.department).filter(S=>S!==null)||[],selectedAttributes:(g.attributes||[]).map(S=>S?typeof S=="object"&&S!==null?S._id:S:null).filter(S=>S!==null)||[]}),jc(c)}},On=async c=>{if(window.confirm("Are you sure you want to delete this sequence? This action cannot be undone.")){m(!0);try{if(!(await fetch(`${Ae}/sequences/${c}`,{method:"DELETE",headers:Ct()})).ok)throw new Error("Failed to delete sequence");f("Sequence deleted successfully"),_r()}catch(g){console.error("Error deleting sequence:",g),p(g instanceof Error?g.message:"Failed to delete sequence")}finally{m(!1)}}},Ec=c=>{const g=zt.selectedDepartments.indexOf(c);lr(g===-1?{...zt,selectedDepartments:[...zt.selectedDepartments,c]}:{...zt,selectedDepartments:zt.selectedDepartments.filter(N=>N!==c)})},ol=async(c,g,N,S)=>{try{const E={};N&&(E.action=N),g?E.status=g:(Et.status&&(E.status=Et.status),Et.deliveryDate&&(E.deliveryDate=Et.deliveryDate),Et.adminNotes!==void 0&&(E.adminNotes=Et.adminNotes)),S&&(E.deliveryDate=S);const z=await fetch(`${Ae}/admin/orders/${c}`,{method:"PUT",headers:{...Ct(),"Content-Type":"application/json"},body:JSON.stringify(E)});if(!z.ok){const V=await gt(z);throw new Error(V.error||`Failed to update order: ${z.status} ${z.statusText}`)}await gt(z),f("Order updated successfully"),ht(!1),Pe(null),He({status:"",deliveryDate:"",adminNotes:""}),ll()}catch(E){console.error("Error updating order:",E),p(E instanceof Error?E.message:"Failed to update order")}},Tc=async c=>{if(window.confirm("Are you sure you want to reject this order?"))try{const g=await fetch(`${Ae}/admin/orders/${c}`,{method:"PUT",headers:{...Ct(),"Content-Type":"application/json"},body:JSON.stringify({status:"rejected"})});if(!g.ok){const N=await gt(g);throw new Error(N.error||`Failed to reject order: ${g.status} ${g.statusText}`)}await gt(g),f("Order rejected successfully"),ll()}catch(g){console.error("Error rejecting order:",g),p(g instanceof Error?g.message:"Failed to reject order")}},Wl=(c,g="image/png")=>!c||c.trim()===""?null:c.startsWith("data:")?c:c.startsWith("/9j/")||c.startsWith("iVBORw0KGgo")?`data:${g};base64,${c}`:c,zr=async c=>{c.preventDefault(),c.stopPropagation(),m(!0),p(null),f(null),B({});try{let g=null,N=null;const S={};(!F.name||!F.name.trim())&&(S.name="Product name is required",g||(g="name",N="product-name")),F.category||(S.category="Please select a category",g||(g="category",N="product-category"));const E=qe.find(ot=>ot._id===F.category);!E&&F.category&&(S.category="Selected category not found. Please select a valid category.",g||(g="category",N="product-category"));const z=E==null?void 0:E.type,V=F.category;if((!F.gstPercentage||!F.gstPercentage.toString().trim())&&(S.gstPercentage="GST % is required for invoice calculation",g||(g="gstPercentage",N="product-gstPercentage")),(!F.instructions||!F.instructions.trim())&&(S.instructions="Instructions are required",g||(g="instructions",N="product-instructions")),Object.keys(S).length>0){B(S),p("Please fix the errors below"),m(!1);const ot=Object.values(S).filter(Gt=>!!Gt);Wi.error(e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Please fix the following errors:"}),e.jsx("ul",{className:"list-disc list-inside mt-1 text-sm",children:ot.map((Gt,Ys)=>e.jsx("li",{children:Gt},Ys))})]}),{duration:5e3,position:"bottom-right"}),g&&N&&ka(g,N);return}let H;if(F.subcategory&&F.subcategory.trim()!==""){const ot=pa.find(Gt=>Gt._id===F.subcategory);if(ot){if((ot.category?typeof ot.category=="object"?ot.category._id:ot.category:null)!==V){p("Selected subcategory does not belong to the selected category. Please select a valid subcategory."),m(!1);return}H=ot._id}else{const Gt=[];Object.values(cs).forEach(bt=>{Array.isArray(bt)&&Gt.push(...bt)});const Ys=Gt.find(bt=>bt._id===F.subcategory);if(!Ys){p("Selected subcategory not found. Please select a valid subcategory."),m(!1);return}if((Ys.category?typeof Ys.category=="object"?Ys.category._id:Ys.category:null)!==V){p("Selected subcategory does not belong to the selected category. Please select a valid subcategory."),m(!1);return}H=Ys._id}}const Y=new FormData;Y.append("name",F.name),Y.append("description",F.description||""),F.image&&Y.append("image",F.image),Y.append("category",V),j?Y.append("subcategory",H&&H.trim()!==""&&H!=="null"?H:""):H&&H.trim()!==""&&H!=="null"&&Y.append("subcategory",H);const ee=F.description.split(`
`).map(ot=>ot.trim()).filter(ot=>ot.length>0);ee.length>0&&Y.append("descriptionArray",JSON.stringify(ee));const De={printingOption:[],orderQuantity:F.filters.orderQuantity,deliverySpeed:R.map(ot=>typeof ot=="string"?ot:ot.name).filter(ot=>ot.trim()),textureType:je.map(ot=>typeof ot=="string"?ot:ot.name).filter(ot=>ot.trim()),filterPricesEnabled:G};G?(De.printingOptionPrices=[],De.deliverySpeedPrices=R.filter(ot=>typeof ot=="object"&&ot.name&&ot.name.trim()).map(ot=>({name:ot.name.trim(),priceAdd:typeof ot.priceAdd=="number"?ot.priceAdd:ot.priceAdd&&parseFloat(ot.priceAdd)||0})),De.textureTypePrices=je.filter(ot=>typeof ot=="object"&&ot.name&&ot.name.trim()).map(ot=>({name:ot.name.trim(),priceAdd:typeof ot.priceAdd=="number"?ot.priceAdd:ot.priceAdd&&parseFloat(ot.priceAdd)||0}))):(De.printingOptionPrices=[],De.deliverySpeedPrices=[],De.textureTypePrices=[]),console.log("Filters being sent:",JSON.stringify(De,null,2)),Y.append("filters",JSON.stringify(De));const Qe=I.length>0?JSON.stringify(I):F.options;Qe&&Y.append("options",Qe);const yt=Be&&Be.length>0?Be.filter(ot=>ot&&ot.attributeTypeId).map(ot=>({attributeType:ot.attributeTypeId,isEnabled:ot.isEnabled!==void 0?ot.isEnabled:!0,isRequired:ot.isRequired!==void 0?ot.isRequired:!1,displayOrder:ot.displayOrder!==void 0?ot.displayOrder:0,customValues:[]})):[];if(Y.append("dynamicAttributes",JSON.stringify(yt)),F.variants&&F.variants.length>0&&Y.append("variants",JSON.stringify(F.variants)),F.quantityDiscounts&&F.quantityDiscounts.length>0){const ot=F.quantityDiscounts.filter(Gt=>Gt.minQuantity>0&&Gt.discountPercentage>0).map(Gt=>({minQuantity:Gt.minQuantity,maxQuantity:Gt.maxQuantity,discountPercentage:Gt.discountPercentage,priceMultiplier:(100-Gt.discountPercentage)/100}));ot.length>0&&Y.append("quantityDiscounts",JSON.stringify(ot))}F.maxFileSizeMB&&Y.append("maxFileSizeMB",F.maxFileSizeMB),F.minFileWidth&&Y.append("minFileWidth",F.minFileWidth),F.maxFileWidth&&Y.append("maxFileWidth",F.maxFileWidth),F.minFileHeight&&Y.append("minFileHeight",F.minFileHeight),F.maxFileHeight&&Y.append("maxFileHeight",F.maxFileHeight),Y.append("blockCDRandJPG",F.blockCDRandJPG?"true":"false"),F.additionalDesignCharge&&Y.append("additionalDesignCharge",F.additionalDesignCharge),F.gstPercentage&&Y.append("gstPercentage",F.gstPercentage),Y.append("showPriceIncludingGst",F.showPriceIncludingGst?"true":"false"),F.instructions&&Y.append("instructions",F.instructions),F.productionSequence&&F.productionSequence.length>0&&Y.append("productionSequence",JSON.stringify(F.productionSequence));const Ut=j?`${Ae}/products/${j}`:`${Ae}/products`,Nt=await fetch(Ut,{method:j?"PUT":"POST",headers:{...Ct()},body:Y});if(!Nt.ok){const ot=Nt.clone();let Gt="Failed to save product";const Ys={};try{const Fr=await ot.json();Gt=Fr.error||Fr.message||Gt,Gt.toLowerCase().includes("name")?Ys.name=Gt:Gt.toLowerCase().includes("price")||Gt.toLowerCase().includes("baseprice")?Ys.basePrice=Gt:Gt.toLowerCase().includes("category")?Ys.category=Gt:Gt.toLowerCase().includes("gst")?Ys.gstPercentage=Gt:Gt.toLowerCase().includes("instruction")&&(Ys.instructions=Gt)}catch{Gt=Nt.statusText||Gt}if(Object.keys(Ys).length>0){D(Ys);const Fr=Object.keys(Ys)[0];ka(Fr,`product-${Fr}`)}Wi.error(Gt,{duration:5e3,position:"bottom-right"}),p(Gt),m(!1);return}const jt=await gt(Nt),Bt=V;Wi.success(`Product ${j?"updated":"created"} successfully!`,{duration:3e3,position:"bottom-right"}),f(`Product ${j?"updated":"created"} successfully!`),_i(""),er([]),ta([]),Kr({}),J({name:"",description:"",descriptionArray:[],category:"",subcategory:"",image:null,options:"",filters:{printingOption:[],orderQuantity:{min:1e3,max:72e3,multiples:1e3,quantityType:"SIMPLE",stepWiseQuantities:[],rangeWiseQuantities:[]},deliverySpeed:[],textureType:[]},quantityDiscounts:[],maxFileSizeMB:"",minFileWidth:"",maxFileWidth:"",minFileHeight:"",variants:[],maxFileHeight:"",blockCDRandJPG:!1,additionalDesignCharge:"",gstPercentage:"",showPriceIncludingGst:!1,instructions:"",productionSequence:[]}),K([]),ie(!1),ge([]),re([]),Ie([]),et([]),nr([]),v(null),D({}),Bt?Or(Bt):Or(),E&&nl(typeof E=="string"?E:E._id),hs&&kn(hs)}catch(g){p(g instanceof Error?g.message:`Failed to ${j?"update":"create"} product`)}finally{m(!1)}},fn=async c=>{var g,N,S,E,z,V,H,Y,ee,De,Qe,yt,Ut,St,Nt,jt,Bt,ot,Gt,Ys,Fr,bt,Rs,ws,Ur,fr,Qa;try{m(!0);const ji=await fetch(`${Ae}/products/${c}`,{method:"GET",headers:Ct()});if(!ji.ok)throw new Error(`Failed to fetch product: ${ji.status} ${ji.statusText}`);const ct=await gt(ji);console.log("=== SINGLE PRODUCT FETCHED (AdminDashboard - Edit) ==="),console.log("Product ID:",c),console.log("Full product data:",JSON.stringify(ct,null,2));const du=ct.descriptionArray&&Array.isArray(ct.descriptionArray)?ct.descriptionArray.join(`
`):ct.description||"";let Nr="",si="";if(ct.subcategory){const Zt=typeof ct.subcategory=="object"&&ct.subcategory!==null?ct.subcategory:null;if(Zt&&Zt.category){const ms=typeof Zt.category=="object"&&Zt.category!==null?Zt.category:null;Nr=ms?ms._id:Zt.category||"",si=ms?ms.type:""}}if(!Nr){const Zt=typeof ct.category=="object"&&ct.category!==null?ct.category:null;Nr=Zt?Zt._id:ct.category||"",si=Zt?Zt.type:""}if(_i(si),si){const Zt=qe.filter(ms=>ms.type===si&&!ms.parent);er(Zt)}else er([]);J({name:ct.name||"",description:du,descriptionArray:ct.descriptionArray||[],category:Nr||"",subcategory:ct.subcategory&&typeof ct.subcategory=="object"&&ct.subcategory._id?ct.subcategory._id:ct.subcategory&&ct.subcategory!==null&&ct.subcategory!=="null"&&ct.subcategory!==""?String(ct.subcategory):"",image:null,options:"",filters:{...ct.filters||{},printingOption:((g=ct.filters)==null?void 0:g.printingOption)||[],orderQuantity:{min:((S=(N=ct.filters)==null?void 0:N.orderQuantity)==null?void 0:S.min)||1e3,max:((z=(E=ct.filters)==null?void 0:E.orderQuantity)==null?void 0:z.max)||72e3,multiples:((H=(V=ct.filters)==null?void 0:V.orderQuantity)==null?void 0:H.multiples)||1e3,quantityType:((ee=(Y=ct.filters)==null?void 0:Y.orderQuantity)==null?void 0:ee.quantityType)||"SIMPLE",stepWiseQuantities:((Qe=(De=ct.filters)==null?void 0:De.orderQuantity)==null?void 0:Qe.stepWiseQuantities)||[],rangeWiseQuantities:((Ut=(yt=ct.filters)==null?void 0:yt.orderQuantity)==null?void 0:Ut.rangeWiseQuantities)||[]},deliverySpeed:((St=ct.filters)==null?void 0:St.deliverySpeed)||[],textureType:((Nt=ct.filters)==null?void 0:Nt.textureType)||[]},quantityDiscounts:ct.quantityDiscounts&&Array.isArray(ct.quantityDiscounts)?ct.quantityDiscounts.map(Zt=>({minQuantity:Zt.minQuantity||0,maxQuantity:Zt.maxQuantity||null,discountPercentage:Zt.discountPercentage||0})):[],maxFileSizeMB:((jt=ct.maxFileSizeMB)==null?void 0:jt.toString())||"",minFileWidth:((Bt=ct.minFileWidth)==null?void 0:Bt.toString())||"",maxFileWidth:((ot=ct.maxFileWidth)==null?void 0:ot.toString())||"",minFileHeight:((Gt=ct.minFileHeight)==null?void 0:Gt.toString())||"",maxFileHeight:((Ys=ct.maxFileHeight)==null?void 0:Ys.toString())||"",blockCDRandJPG:ct.blockCDRandJPG||!1,additionalDesignCharge:((Fr=ct.additionalDesignCharge)==null?void 0:Fr.toString())||"",gstPercentage:((bt=ct.gstPercentage)==null?void 0:bt.toString())||"",showPriceIncludingGst:ct.showPriceIncludingGst||!1,instructions:ct.instructions||"",variants:ct.variants&&Array.isArray(ct.variants)?ct.variants:[],productionSequence:ct.productionSequence&&Array.isArray(ct.productionSequence)?ct.productionSequence.filter(Zt=>Zt!=null).map(Zt=>typeof Zt=="object"&&Zt!==null?Zt._id||"":Zt||"").filter(Zt=>Zt):[]}),ct.options&&Array.isArray(ct.options)&&ct.options.length>0?K(ct.options):K([]),ie(((Rs=ct.filters)==null?void 0:Rs.filterPricesEnabled)||!1),ge([]);const _n=((ws=ct.filters)==null?void 0:ws.deliverySpeed)||[],uu=((Ur=ct.filters)==null?void 0:Ur.deliverySpeedPrices)||[];re(_n.map((Zt,ms)=>{if(typeof Zt=="string"){const Ir=uu.find(Ni=>Ni.name===Zt);return{name:Zt,priceAdd:Ir==null?void 0:Ir.priceAdd}}return Zt}));const mu=((fr=ct.filters)==null?void 0:fr.textureType)||[],ml=((Qa=ct.filters)==null?void 0:Qa.textureTypePrices)||[];if(Ie(mu.map((Zt,ms)=>{if(typeof Zt=="string"){const Ir=ml.find(Ni=>Ni.name===Zt);return{name:Zt,priceAdd:Ir==null?void 0:Ir.priceAdd}}return Zt})),ct.dynamicAttributes&&Array.isArray(ct.dynamicAttributes)&&ct.dynamicAttributes.length>0){const Zt=ct.dynamicAttributes.filter(ms=>ms&&ms.attributeType).map(ms=>{let Ir="";return typeof ms.attributeType=="object"&&ms.attributeType!==null?Ir=ms.attributeType._id||ms.attributeType.id||"":typeof ms.attributeType=="string"&&(Ir=ms.attributeType),{attributeTypeId:Ir,isEnabled:ms.isEnabled!==void 0?ms.isEnabled:!0,isRequired:ms.isRequired!==void 0?ms.isRequired:!1,displayOrder:ms.displayOrder!==void 0?ms.displayOrder:0}}).filter(ms=>ms.attributeTypeId&&ms.attributeTypeId.trim()!=="");console.log("Loaded attributes for editing:",Zt),et(Zt)}else console.log("No dynamic attributes found in product"),et([]);const Kl=Nr||null,ko=ct.subcategory&&typeof ct.subcategory=="object"&&ct.subcategory._id?ct.subcategory._id:ct.subcategory&&ct.subcategory!==null&&ct.subcategory!=="null"&&ct.subcategory!==""?String(ct.subcategory):null;await or(Kl,ko);const vi=ct.subcategory&&typeof ct.subcategory=="object"&&ct.subcategory!==null?ct.subcategory._id||"":ct.subcategory&&ct.subcategory!==null&&ct.subcategory!=="null"?String(ct.subcategory):"";Nr?(await xi(Nr),vi&&vi.trim()!==""&&vi!==Nr&&vi!=="null"?setTimeout(()=>{const Zt=yo(Nr,vi);ta(Zt),Zt.forEach(ms=>{ms!==Nr&&xi(ms)})},100):ta([Nr])):ta([]);const Xl=vi||Nr;if(Xl)try{we(!0);const Zt=await fetch(`${Ae}/products/category/${Xl}`,{headers:Ct()});if(Zt.ok){const ms=await gt(Zt);oe(ms||[])}}catch(Zt){console.error("Error fetching category products:",Zt),oe([])}finally{we(!1)}v(c),rl(null),il(!1),l("products"),p(null)}catch(ji){p(ji instanceof Error?ji.message:"Failed to load product")}finally{m(!1)}},cl=async c=>{try{m(!0);let g=null,N=!1;try{const z=await fetch(`${Ae}/categories/${c}`,{method:"GET",headers:Ct()});if(z.ok&&(g=await gt(z),g&&g.parent))try{const V=await fetch(`${Ae}/subcategories/${c}`,{method:"GET",headers:Ct()});V.ok&&(g=await gt(V),N=!0)}catch{}}catch{try{const V=await fetch(`${Ae}/subcategories/${c}`,{method:"GET",headers:Ct()});if(V.ok)g=await gt(V),N=!0;else throw new Error(`Failed to fetch category: ${V.status} ${V.statusText}`)}catch{throw new Error("Failed to fetch category or subcategory")}}if(!g)throw new Error("Category not found");const S=g.slug||(g.name?g.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),E=N?g.category&&typeof g.category=="object"&&g.category!==null?g.category._id:g.category||"":g.parent&&typeof g.parent=="object"&&g.parent!==null?g.parent._id:g.parent||"";se({name:g.name||"",description:g.description||"",type:N?g.category&&typeof g.category=="object"&&g.category!==null?g.category.type:"Digital":g.type||"Digital",parent:E,sortOrder:g.sortOrder||0,slug:S,image:null}),be(!!g.slug),T(c),L(g.image||null),l("categories"),p(null),hi(c)}catch(g){p(g instanceof Error?g.message:"Failed to load category")}finally{m(!1)}},Rn=()=>{v(null),T(null),L(null),fa(null),_i(""),er([]),Mi([]),J({name:"",description:"",descriptionArray:[],category:"",subcategory:"",image:null,options:"",filters:{printingOption:[],orderQuantity:{min:1e3,max:72e3,multiples:1e3,quantityType:"SIMPLE",stepWiseQuantities:[],rangeWiseQuantities:[]},deliverySpeed:[],textureType:[]},maxFileSizeMB:"",blockCDRandJPG:!1,additionalDesignCharge:"",gstPercentage:"",instructions:"",quantityDiscounts:[],minFileWidth:"",maxFileWidth:"",minFileHeight:"",maxFileHeight:"",productionSequence:[],showPriceIncludingGst:!1,variants:[]}),K([]),ge([]),re([]),Ie([]),nr([]),se({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),be(!1),At({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),at(!1),Zs(null)},Zl=async c=>{if(window.confirm("Are you sure you want to delete this product?")){m(!0),p(null),f(null);try{const g=await fetch(`${Ae}/products/${c}`,{method:"DELETE",headers:Ct()});if(!g.ok){const N=await gt(g);throw new Error(N.error||`Failed to delete product: ${g.status} ${g.statusText}`)}await gt(g),f("Product deleted successfully!"),Or()}catch(g){p(g instanceof Error?g.message:"Failed to delete product")}finally{m(!1)}}},Lr=async c=>{c.preventDefault(),m(!0),p(null),f(null);try{U({});let g=!1;const N={};if((!fe.name||fe.name.trim()==="")&&(N.name="Category name is required",g=!0),g){U(N),p("Please fix the errors below"),m(!1),Object.keys(N)[0]==="name"&&ka("name","category-name");return}if(fe.parent){if(!fe.parent){p("Parent category is required for subcategory."),m(!1);return}if(!P&&!fe.image&&(N.image="Subcategory image is required. Please upload an image",g=!0),fe.parent&&pa.find(Qe=>{const Ut=(typeof Qe.category=="object"&&Qe.category!==null?Qe.category._id:Qe.category)===fe.parent,St=(Qe.sortOrder||0)===fe.sortOrder,Nt=Qe._id!==P;return Ut&&St&&Nt})){const Qe=qe.find(Ut=>Ut._id===fe.parent),yt=Qe?Qe.name:"this category";N.sortOrder=`Sort order ${fe.sortOrder} is already used by another subcategory in ${yt}. Please use a different sort order.`,g=!0}if(g){U(N),p("Please fix the errors below"),m(!1);const De=Object.keys(N)[0];if(De==="image")ka("image","category-image");else if(De==="sortOrder"){const Qe=document.querySelector('input[type="number"]');Qe&&Qe.scrollIntoView({behavior:"smooth",block:"center"})}return}if(fe.image){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(fe.image.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),m(!1);return}const Qe=5*1024*1024;if(fe.image.size>Qe){p("Image size must be less than 5MB. Please compress the image and try again."),m(!1);return}}const S=new FormData;S.append("name",fe.name.trim()),S.append("description",fe.description||""),S.append("category",fe.parent),S.append("sortOrder",fe.sortOrder.toString());const E=fe.slug||(fe.name?fe.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),z=E?Tn(E,P,null):"";z&&S.append("slug",z.trim()),fe.image&&S.append("image",fe.image);const V=P?`${Ae}/subcategories/${P}`:`${Ae}/subcategories`,Y=await fetch(V,{method:P?"PUT":"POST",headers:{...Ct()},body:S}),ee=await gt(Y);f(`Subcategory ${P?"updated":"created"} successfully!`),se({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),be(!1),T(null),L(null),ba(),on(),hi()}else{if(fe.type||(N.type="Category type is required",g=!0),!P&&!fe.image&&(N.image="Category image is required. Please upload an image",g=!0),fe.type){const De=qe.find(Qe=>{const yt=!Qe.parent||typeof Qe.parent=="object"&&Qe.parent!==null&&!Qe.parent._id,Ut=Qe.type===fe.type,St=(Qe.sortOrder||0)===fe.sortOrder,Nt=Qe._id!==P;return yt&&Ut&&St&&Nt});De&&(N.sortOrder=`Sort order ${fe.sortOrder} is already used by another ${fe.type} category (${De.name}). Please use a different sort order.`,g=!0)}if(g){U(N),p("Please fix the errors below"),m(!1);const De=Object.keys(N)[0];if(De==="type")ka("type","category-type");else if(De==="image")ka("image","category-image");else if(De==="sortOrder"){const Qe=document.querySelector('input[type="number"][value="'+fe.sortOrder+'"]');Qe&&Qe.scrollIntoView({behavior:"smooth",block:"center"})}return}if(fe.image){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(fe.image.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),m(!1);return}const Qe=5*1024*1024;if(fe.image.size>Qe){p("Image size must be less than 5MB. Please compress the image and try again."),m(!1);return}}const S=new FormData;S.append("name",fe.name.trim()),S.append("description",fe.description||""),S.append("type",fe.type),S.append("parent",""),S.append("sortOrder",fe.sortOrder.toString());const E=fe.slug||(fe.name?fe.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),z=E?Tn(E,P,null):"";z&&S.append("slug",z.trim()),fe.image&&S.append("image",fe.image);const V=P?`${Ae}/categories/${P}`:`${Ae}/categories`,Y=await fetch(V,{method:P?"PUT":"POST",headers:{...Ct()},body:S}),ee=await gt(Y);f(`Category ${P?"updated":"created"} successfully!`),se({name:"",description:"",type:"Digital",parent:"",sortOrder:0,slug:"",image:null}),be(!1),T(null),L(null),ba(),hi()}}catch(g){p(g instanceof Error?g.message:`Failed to ${P?"update":"create"} ${fe.parent?"subcategory":"category"}`)}finally{m(!1)}},$r=async c=>{c.preventDefault(),m(!0),p(null),f(null);try{Ve({});let g=!1;const N={};if((!_e.name||_e.name.trim()==="")&&(N.name="Subcategory name is required",g=!0),(!_e.category||_e.category==="pending")&&(N.category="Parent category is required",g=!0),!vs&&!_e.image&&(N.image="Subcategory image is required. Please upload an image",g=!0),_e.category&&_e.category!=="pending"&&pa.find(De=>{const yt=(typeof De.category=="object"&&De.category!==null?De.category._id:De.category)===_e.category,Ut=(De.sortOrder||0)===_e.sortOrder,St=De._id!==vs;return yt&&Ut&&St})){const De=qe.find(yt=>yt._id===_e.category),Qe=De?De.name:"this category";N.sortOrder=`Sort order ${_e.sortOrder} is already used by another subcategory in ${Qe}. Please use a different sort order.`,g=!0}if(g){Ve(N),p("Please fix the errors below"),m(!1);const ee=Object.keys(N)[0];if(ee==="name")ka("name","subcategory-name");else if(ee==="category")ka("category","subcategory-category");else if(ee==="image")ka("image","subcategory-image");else if(ee==="sortOrder"){const De=document.querySelector('input[type="number"]');De&&De.scrollIntoView({behavior:"smooth",block:"center"})}return}if(_e.image){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(_e.image.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),m(!1);return}const De=5*1024*1024;if(_e.image.size>De){p("Image size must be less than 5MB. Please compress the image and try again."),m(!1);return}}const S=new FormData;S.append("name",_e.name.trim()),S.append("description",_e.description||""),S.append("category",_e.category),_e.parent&&_e.parent!==""&&S.append("parent",_e.parent),S.append("sortOrder",_e.sortOrder.toString());const E=_e.slug||(_e.name?_e.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),z=E?Tn(E,null,vs):"";z&&S.append("slug",z.trim()),_e.image&&S.append("image",_e.image);const V=vs?`${Ae}/subcategories/${vs}`:`${Ae}/subcategories`,Y=await fetch(V,{method:vs?"PUT":"POST",headers:{...Ct()},body:S});if(!Y.ok){const ee=await gt(Y);throw new Error(ee.error||`Failed to ${vs?"update":"create"} subcategory: ${Y.status} ${Y.statusText}`)}await gt(Y),f(`Subcategory ${vs?"updated":"created"} successfully!`),zs&&await nl(zs),At({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),at(!1),fa(null),Zs(null),on()}catch(g){p(g instanceof Error?g.message:`Failed to ${vs?"update":"create"} subcategory`)}finally{m(!1)}},Vi=async c=>{try{m(!0);const g=await fetch(`${Ae}/subcategories/${c}`,{method:"GET",headers:Ct()});if(!g.ok)throw new Error(`Failed to fetch subcategory: ${g.status} ${g.statusText}`);const N=await gt(g),S=typeof N.category=="object"&&N.category!==null?N.category:qe.find(Y=>Y._id===N.category),E=(S==null?void 0:S.type)||"",z=N.slug||(N.name?N.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""),V=typeof N.category=="object"&&N.category!==null?N.category._id:N.category||"",H=typeof N.parent=="object"&&N.parent!==null?N.parent._id:N.parent||"";if(At({name:N.name||"",description:N.description||"",category:V,parent:H,type:E,slug:z,sortOrder:N.sortOrder||0,image:null}),at(!!N.slug),Bs(!!H),V){Vs(!0);try{const Y=await fetch(`${Ae}/subcategories/category/${V}?includeChildren=true`);if(Y.ok){const ee=await Y.json(),De=(yt,Ut=0)=>{let St=[];return yt.forEach(Nt=>{Nt._id!==c&&(St.push({...Nt,_displayLevel:Ut}),Nt.children&&Nt.children.length>0&&(St=St.concat(De(Nt.children,Ut+1))))}),St},Qe=De(Array.isArray(ee)?ee:(ee==null?void 0:ee.data)||[]);Ft(Qe||[])}else Ft([])}catch(Y){console.error("Error fetching parent subcategories:",Y),Ft([])}finally{Vs(!1)}}else Ft([]);fa(c),Zs(N.image||null),l("categories"),p(null)}catch(g){p(g instanceof Error?g.message:"Failed to load subcategory")}finally{m(!1)}},ti=async c=>{const g=pa.find(N=>N._id===c);if(g)try{const N=await fetch(`${Ae}/products/subcategory/${c}`,{headers:Ct()});let S=0;if(N.ok){const E=await gt(N);S=Array.isArray(E)?E.length:0}dt({isOpen:!0,type:"subcategory",id:c,name:g.name,productCount:S,subcategoryCount:0,deleteText:""})}catch(N){console.error("Error checking products:",N),dt({isOpen:!0,type:"subcategory",id:c,name:g.name,productCount:0,subcategoryCount:0,deleteText:""})}},gi=async()=>{if(lt.deleteText.toLowerCase()!=="delete"){p('Please type "delete" to confirm');return}m(!0),p(null),f(null),dt({...lt,isOpen:!1});try{const c=await fetch(`${Ae}/subcategories/${lt.id}`,{method:"DELETE",headers:Ct()});if(!c.ok){const N=(await gt(c)).error||`Failed to delete subcategory: ${c.status} ${c.statusText}`;p(N),m(!1);return}await gt(c),f("Subcategory deleted successfully!"),on(),zs&&nl(zs),hs===lt.id&&(Oa(null),oe([]))}catch(c){p(c instanceof Error?c.message:"Failed to delete subcategory")}finally{m(!1)}},Bi=async c=>{const g=qe.find(N=>N._id===c);if(g)try{const N=await fetch(`${Ae}/subcategories/category/${c}`,{headers:Ct()});let S=0,E=[];if(N.ok){const H=await gt(N);E=Array.isArray(H)?H:(H==null?void 0:H.data)||[],S=E.length}else try{const H=await fetch(`${Ae}/categories/parent/${c}`,{headers:Ct()});if(H.ok){const Y=await gt(H);E=Array.isArray(Y)?Y:(Y==null?void 0:Y.data)||[],S=E.length}}catch{}if(S>0){p(`Cannot delete category "${g.name}". It has ${S} child categor${S===1?"y":"ies"}. Please delete or reassign all child categories first.`);return}const z=await fetch(`${Ae}/products/category/${c}`,{headers:Ct()});let V=0;if(z.ok){const H=await gt(z);V=Array.isArray(H)?H.length:0}dt({isOpen:!0,type:"category",id:c,name:g.name,productCount:V,subcategoryCount:S,deleteText:""})}catch(N){console.error("Error checking category dependencies:",N),p("Failed to check category dependencies. Please try again.")}},ou=async()=>{if(lt.deleteText.toLowerCase()!=="delete"){p('Please type "delete" to confirm');return}m(!0),p(null),f(null),dt({...lt,isOpen:!1});try{const c=await fetch(`${Ae}/categories/${lt.id}`,{method:"DELETE",headers:Ct()});if(!c.ok){const N=(await gt(c)).error||`Failed to delete category: ${c.status} ${c.statusText}`;p(N),m(!1);return}await gt(c),f("Category deleted successfully!"),ba(),zs===lt.id&&(Yt(null),us([]))}catch(c){p(c instanceof Error?c.message:"Failed to delete category")}finally{m(!1)}},kc=async c=>{c.preventDefault(),m(!0),p(null),f(null);try{const g=await fetch(`${Ae}/admin/update-user-role`,{method:"PUT",headers:{"Content-Type":"application/json",...Ct()},body:JSON.stringify({username:Vt.username,role:Vt.role})});if(!g.ok){const N=await gt(g);throw new Error(N.message||N.error||`Failed to update user role: ${g.status} ${g.statusText}`)}await gt(g),f(`User role updated to ${Vt.role} successfully!`),xa({username:"",role:"user"}),dn()}catch(g){p(g instanceof Error?g.message:"Failed to update user role")}finally{m(!1)}},Dc=async c=>{c.preventDefault(),m(!0),p(null),f(null);try{const g=await fetch(`${Ae}/admin/create-employee`,{method:"POST",headers:{"Content-Type":"application/json",...Ct()},body:JSON.stringify({name:Ns.name,email:Ns.email,password:Ns.password})});if(!g.ok){const N=await gt(g);throw new Error(N.message||N.error||`Failed to create employee: ${g.status} ${g.statusText}`)}await gt(g),f("Employee created successfully!"),va({name:"",email:"",password:""}),dn()}catch(g){p(g instanceof Error?g.message:"Failed to create employee")}finally{m(!1)}},cu=async c=>{c.preventDefault(),m(!0),p(null),f(null);try{const g=await fetch(`${Ae}/admin/create-employee`,{method:"POST",headers:{"Content-Type":"application/json",...Ct()},body:JSON.stringify({name:It.name,email:It.email,password:It.password})});if(!g.ok){const N=await gt(g);throw new Error(N.message||N.error||`Failed to create employee: ${g.status} ${g.statusText}`)}await gt(g),f("Employee created successfully!"),kt({name:"",email:"",password:""}),Xe(!1),jo(),dn()}catch(g){p(g instanceof Error?g.message:"Failed to create employee")}finally{m(!1)}},Ha=async c=>{var g,N;c.preventDefault(),m(!0),p(null),f(null);try{if(!qt.name.trim()){p("Department name is required"),m(!1);return}const S=await fetch(`${Ae}/departments`,{method:"POST",headers:{"Content-Type":"application/json",...Ct()},body:JSON.stringify({name:qt.name,description:qt.description||"",isEnabled:qt.isEnabled,operators:qt.operators})});if(!S.ok){const V=await gt(S);throw new Error(V.error||V.message||`Failed to create department: ${S.status} ${S.statusText}`)}const E=await gt(S),z=((g=E.data)==null?void 0:g._id)||((N=E.data)==null?void 0:N.id)||E._id||E.id;f("Department created successfully!"),Ts({name:"",description:"",isEnabled:!0,operators:[]}),Os(!1),await Mr(),await jo(),z&&zt.selectedDepartments&&lr({...zt,selectedDepartments:[...zt.selectedDepartments,z]})}catch(S){p(S instanceof Error?S.message:"Failed to create department")}finally{m(!1)}},ia=async c=>{if(window.confirm("Are you sure you want to delete this uploaded image?")){m(!0),p(null),f(null);try{const g=await fetch(`${Ae}/admin/uploads/${c}`,{method:"DELETE",headers:Ct()});if(!g.ok){const N=await gt(g);throw new Error(N.error||`Failed to delete upload: ${g.status} ${g.statusText}`)}await gt(g),f("Uploaded image deleted successfully!"),Ii()}catch(g){p(g instanceof Error?g.message:"Failed to delete upload")}finally{m(!1)}}},gs=(c,g)=>{try{const N=atob(c.split(",")[1]),S=new Array(N.length);for(let Y=0;Y<N.length;Y++)S[Y]=N.charCodeAt(Y);const E=new Uint8Array(S),z=new Blob([E],{type:"image/jpeg"}),V=URL.createObjectURL(z),H=document.createElement("a");H.href=V,H.download=g||"image.jpg",document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(V)}catch{p("Failed to download image")}},pn=()=>{I.length,K([...I,{name:"",priceAdd:"",description:"",image:""}])},Ga=(c,g,N)=>{const S=[...I];S[c]={...S[c],[g]:N},K(S)},Ao=c=>{K(I.filter((g,N)=>N!==c))},qi=c=>{const g={name:"",priceAdd:G?0:void 0};c==="printingOption"?ge([...Re,g]):c==="deliverySpeed"?re([...R,g]):c==="textureType"&&Ie([...je,g])},Jl=(c,g,N,S)=>{if(c==="printingOption"){const E=[...Re];E[g]={...E[g],[N]:N==="priceAdd"?S===""?void 0:parseFloat(S)||0:S},ge(E)}else if(c==="deliverySpeed"){const E=[...R];E[g]={...E[g],[N]:N==="priceAdd"?S===""?void 0:parseFloat(S)||0:S},re(E)}else if(c==="textureType"){const E=[...je];E[g]={...E[g],[N]:N==="priceAdd"?S===""?void 0:parseFloat(S)||0:S},Ie(E)}},Pc=(c,g)=>{c==="printingOption"?ge(Re.filter((N,S)=>S!==g)):c==="deliverySpeed"?re(R.filter((N,S)=>S!==g)):c==="textureType"&&Ie(je.filter((N,S)=>S!==g))},dl=()=>{try{if(F.options){const c=JSON.parse(F.options);Array.isArray(c)?(K(c),A(!0)):p("Options must be an array")}}catch{p("Invalid JSON format")}},Mn=[{id:"products",label:"Add Product",icon:ja},{id:"manage-products",label:"Manage Products",icon:ja},{id:"attribute-types",label:"Attribute Types",icon:Cr},{id:"attribute-rules",label:"Attribute Rules",icon:Cr},{id:"departments",label:"Departments",icon:ki},{id:"sequences",label:"Sequences",icon:Cr},{id:"categories",label:"Add Category",icon:Tp},{id:"manage-categories",label:"Manage Categories",icon:Tp},{id:"pricing-books",label:"Price Books",icon:fd},{id:"pricing-modifiers",label:"Pricing Modifiers",icon:fd},{id:"geo-zones",label:"Geo Zones",icon:Jn},{id:"user-segments",label:"User Segments",icon:Ol},{id:"product-availability",label:"Product Availability",icon:ja},{id:"pricing-logs",label:"Audit Logs",icon:Wr},{id:"virtual-pricing",label:" Virtual Pricing (Smart View)",icon:fd},{id:"orders",label:"Orders",icon:Qb},{id:"uploads",label:"Uploaded Images",icon:bn},{id:"users",label:"Manage Users",icon:Ol},{id:"print-partner-requests",label:"Print Partners",icon:Ad},{id:"corporate-requests",label:"Corporate Requests",icon:ki}];return e.jsxs("div",{className:"min-h-screen bg-cream-50 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(kr,{fallbackPath:"/",label:"Back to Home",className:"text-cream-600 hover:text-cream-900 mb-4"})}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl font-bold text-cream-900 mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-sm sm:text-base text-cream-600",children:"Manage products, categories, uploads, and admin users"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-cream-200 p-3 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2 overflow-x-auto scrollbar-hide",children:Mn.map(c=>{const g=c.icon;return e.jsxs("button",{onClick:()=>{l(c.id),p(null),f(null),c.id!=="products"&&c.id!=="categories"&&Rn(),c.id==="manage-products"?(Ks(""),Or()):c.id==="manage-categories"?(ba(),on()):c.id==="users"?dn():c.id==="print-partner-requests"||(c.id==="orders"?ll():c.id==="attribute-types"?or():c.id==="attribute-rules"?(vo(),or(),ba(),Or()):c.id==="products"&&(or(),Or()))},className:`flex items-center gap-2.5 px-5 py-3 text-sm sm:text-base font-semibold transition-all duration-200 whitespace-nowrap rounded-lg border-2 ${n===c.id?"bg-cream-900 text-white border-cream-900 shadow-lg transform scale-105":"text-cream-700 bg-white border-cream-200 hover:bg-cream-50 hover:border-cream-300 hover:text-cream-900 hover:shadow-sm"}`,children:[e.jsx(g,{size:18,className:`sm:w-5 sm:h-5 ${n===c.id?"text-white":"text-cream-600"}`}),e.jsx("span",{className:"hidden sm:inline",children:c.label}),e.jsx("span",{className:"sm:hidden",children:c.label.split(" ")[0]})]},c.id)})})}),e.jsxs(ca,{children:[u&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(bs,{size:20}),u]}),b&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-700",children:[e.jsx(ga,{size:20}),b]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[n==="products"&&e.jsxs("form",{onSubmit:c=>{c.preventDefault(),zr(c)},onClick:c=>{const g=c.target;(g.closest(".ckeditor-container")||g.closest("[data-ckeditor-button]"))&&(c.preventDefault(),c.stopPropagation())},className:"space-y-6",children:[j&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Product: ",F.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:Rn,className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Required Fields"}),e.jsx("span",{className:"text-sm text-blue-700",children:(()=>{var N,S;const c=[{value:(N=F.name)==null?void 0:N.trim(),label:"Product Name"},{value:F.category||F.subcategory,label:"Category/Subcategory"},{value:F.gstPercentage,label:"GST %"},{value:(S=F.instructions)==null?void 0:S.trim(),label:"Instructions"}];return`${c.filter(E=>E.value).length}/${c.length} completed`})()})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(()=>{var g,N;const c=[(g=F.name)==null?void 0:g.trim(),F.category||F.subcategory,F.gstPercentage,(N=F.instructions)==null?void 0:N.trim()];return c.filter(Boolean).length/c.length*100})()}%`}})})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-6 bg-white",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(ja,{size:20}),"Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-cream-900 mb-2 flex items-center gap-2",children:["Product Name *",e.jsxs("div",{className:"group relative",children:[e.jsx(hr,{size:14,className:"text-cream-500 cursor-help"}),e.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-cream-900 text-white text-xs rounded-lg shadow-lg",children:"Enter a clear, descriptive name that customers will see. This should be unique and searchable."})]})]}),e.jsx("input",{id:"product-name",name:"name",type:"text",required:!0,value:F.name,onChange:c=>{J({...F,name:c.target.value}),M.name&&B({...M,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${M.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Glossy Business Cards - Premium",maxLength:100}),M.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(bs,{size:12}),M.name]}),F.name&&F.name.length>80&&e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:[100-F.name.length," characters remaining"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-cream-900 mb-2 flex items-center gap-2",children:["Description",e.jsxs("div",{className:"group relative",children:[e.jsx(hr,{size:14,className:"text-cream-500 cursor-help"}),e.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-cream-900 text-white text-xs rounded-lg shadow-lg",children:"Detailed product description that customers will see. Use formatting to make it readable and professional. You can insert images using the toolbar buttons."})]})]}),e.jsx(ak,{value:F.description,onChange:c=>J({...F,description:c}),placeholder:"Enter product description. Use the toolbar to format text, insert images, and more."}),e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:" Rich Text Editor Features:"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:["Format text with ",e.jsx("strong",{children:"bold"}),", ",e.jsx("em",{children:"italic"}),", underline, strikethrough"]}),e.jsx("li",{children:"Change font family, font size, and text colors"}),e.jsx("li",{children:"Insert images using the toolbar button"}),e.jsx("li",{children:"Create ordered and bullet lists with indentation"}),e.jsx("li",{children:"Align text (left, center, right, justify)"}),e.jsx("li",{children:"All formatting is preserved when saved"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-cream-900 mb-2 flex items-center gap-2",children:["Product Image",e.jsxs("div",{className:"group relative",children:[e.jsx(hr,{size:14,className:"text-cream-500 cursor-help"}),e.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-64 p-2 bg-cream-900 text-white text-xs rounded-lg shadow-lg",children:"Upload a product image that will be displayed to customers. Supported formats: JPG, PNG, WebP. Max size: 5MB."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:c=>{var N;const g=(N=c.target.files)==null?void 0:N[0];if(g){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(g.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image.");return}if(g.size>5*1024*1024){p("Image size must be less than 5MB.");return}J({...F,image:g}),p(null)}},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-cream-900 file:text-white hover:file:bg-cream-800"}),F.image&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-xs text-cream-600 mb-1",children:["Selected: ",F.image.name]}),e.jsx("div",{className:"relative w-32 h-32 border border-cream-300 rounded-lg overflow-hidden",children:e.jsx("img",{src:URL.createObjectURL(F.image),alt:"Product preview",className:"w-full h-full object-cover"})})]}),j&&!F.image&&e.jsx("p",{className:"text-xs text-cream-600",children:"Leave empty to keep existing image"})]})]})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-cream-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Product Filters"}),e.jsxs("div",{className:"text-sm text-cream-600",children:[e.jsx(hr,{size:14,className:"inline mr-1"}),"Printing options should be configured as attributes in the Product Attributes section below"]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg border border-cream-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Quantity Configuration *"}),e.jsxs("div",{className:"text-xs text-cream-600",children:[e.jsx(hr,{size:14,className:"inline mr-1"}),"Configure quantity options based on production capabilities and raw material batching"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Min Quantity"}),e.jsx("input",{type:"number",value:F.filters.orderQuantity.min,onChange:c=>J({...F,filters:{...F.filters,orderQuantity:{...F.filters.orderQuantity,min:parseInt(c.target.value)||0}}}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Max Quantity"}),e.jsx("input",{type:"number",value:F.filters.orderQuantity.max,onChange:c=>J({...F,filters:{...F.filters,orderQuantity:{...F.filters.orderQuantity,max:parseInt(c.target.value)||0}}}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Multiples Of"}),e.jsx("input",{type:"number",value:F.filters.orderQuantity.multiples,onChange:c=>J({...F,filters:{...F.filters,orderQuantity:{...F.filters.orderQuantity,multiples:parseInt(c.target.value)||0}}}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Delivery Speed Options"}),e.jsxs("button",{type:"button",onClick:()=>qi("deliverySpeed"),className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add Option"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:R.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No delivery speed options added. Click "Add Option" to start.'}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Delivery Speed"}),G&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Add (per 1000 units)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:R.map((c,g)=>{const N=typeof c=="string"?c:c.name,S=typeof c=="object"?c.priceAdd??0:0;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:N,onChange:E=>Jl("deliverySpeed",g,"name",E.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Standard"})}),G&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",step:"0.00001",value:S,onChange:E=>Jl("deliverySpeed",g,"priceAdd",E.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"0.00"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>Pc("deliverySpeed",g),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})})]},g)})})]})})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Texture Type Options (optional)"}),e.jsxs("button",{type:"button",onClick:()=>qi("textureType"),className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add Texture"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:je.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No texture types added. Click "Add Texture" to start.'}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Texture Type"}),G&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Add (per 1000 units)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:je.map((c,g)=>{const N=typeof c=="string"?c:c.name,S=typeof c=="object"?c.priceAdd??0:0;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:N,onChange:E=>Jl("textureType",g,"name",E.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Texture No.1"})}),G&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",step:"0.00001",value:S,onChange:E=>Jl("textureType",g,"priceAdd",E.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"0.00"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>Pc("textureType",g),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})})]},g)})})]})})})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Quantity-Based Discounts"}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:"Set discounts based on order quantity. Customers get better prices when ordering in bulk."})]}),e.jsxs("button",{type:"button",onClick:()=>{J({...F,quantityDiscounts:[...F.quantityDiscounts||[],{minQuantity:0,maxQuantity:null,discountPercentage:0}]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add Discount Tier"]})]}),!F.quantityDiscounts||F.quantityDiscounts.length===0?e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:'No discount tiers added. Click "Add Discount Tier" to set quantity-based discounts.'})}):e.jsxs("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Min Quantity"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Max Quantity"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Discount (%)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:(F.quantityDiscounts||[]).map((c,g)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",value:c.minQuantity,onChange:N=>{const S=[...F.quantityDiscounts||[]];S[g].minQuantity=parseInt(N.target.value)||0,J({...F,quantityDiscounts:S})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., 1000",min:"0"})}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsx("input",{type:"number",value:c.maxQuantity||"",onChange:N=>{const S=[...F.quantityDiscounts||[]];S[g].maxQuantity=N.target.value?parseInt(N.target.value):null,J({...F,quantityDiscounts:S})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Leave empty for no limit",min:"0"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"Leave empty for unlimited"})]}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:c.discountPercentage,onChange:N=>{const S=[...F.quantityDiscounts||[]];S[g].discountPercentage=parseFloat(N.target.value)||0,J({...F,quantityDiscounts:S})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., 5",min:"0",max:"100",step:"0.1"}),e.jsx("span",{className:"text-sm text-cream-600",children:"%"})]}),c.discountPercentage>0&&e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:["Price: ",((100-c.discountPercentage)/100).toFixed(2),"x base price"]})]}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>{const N=(F.quantityDiscounts||[]).filter((S,E)=>E!==g);J({...F,quantityDiscounts:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})})]},g))})]})}),e.jsx("div",{className:"p-3 bg-blue-50 border-t border-cream-300",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Example:"})," Min: 1000, Max: 5000, Discount: 5%  Customers ordering 1000-5000 units get 5% off. Min: 5000, Max: (empty), Discount: 10%  Customers ordering 5000+ units get 10% off."]})})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-6 bg-white",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(Ll,{size:20}),"Pricing & Category"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsx("div",{className:"col-span-2",children:e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fd,{className:"w-6 h-6 text-blue-600 mt-0.5 shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1 flex items-center gap-2",children:" Dynamic Pricing Enabled"}),e.jsxs("p",{className:"text-sm text-blue-700 mb-3",children:["Prices for this product are managed through ",e.jsx("strong",{children:"Price Books"})," and ",e.jsx("strong",{children:"Modifiers"}),". After creating the product, set up different prices for different user segments (Retail, VIP, Corporate) and locations."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{l("price-books"),Wi.success("Navigate to Price Books after saving this product")},className:"text-sm bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Price Books "}),e.jsx("button",{type:"button",onClick:()=>{l("modifiers"),Wi.success("Navigate to Modifiers after saving this product")},className:"text-sm bg-white text-blue-600 border border-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:"View Modifiers"})]})]})]})})})})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-6 bg-white",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(Ll,{size:20}),"Category & Subcategory"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Main Type * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Select first to filter categories)"})]}),e.jsx(Ca,{label:"Select Type",value:Xa||"",onChange:async c=>{const g=c;if(_i(g),ta([]),Kr({}),J({...F,category:"",subcategory:""}),oe([]),g){const N=qe.filter(S=>S.type===g&&!S.parent);er(N)}else er([])},options:[{value:"",label:"Select Type"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"}),!Xa&&e.jsxs("p",{className:"mt-1 text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(bs,{size:12}),"Please select a type first to see available categories"]})]}),Xa&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Category * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Select based on type)"})]}),e.jsx(Ca,{id:"product-category",label:"Select Category",value:String(F.category||Na[0]||""),onChange:async c=>{c?(ta([String(c)]),J({...F,category:String(c),subcategory:""}),M.category&&B({...M,category:void 0}),await xi(String(c)),oe([])):(ta([]),Kr({}),J({...F,category:"",subcategory:""}),oe([]))},options:[{value:"",label:"Select Category"},...mi.filter(c=>!c.parent).map(c=>({value:c._id,label:c.name}))],className:`w-full ${M.category?"border-red-300":""}`}),M.category&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(bs,{size:12}),M.category]}),!F.category&&Xa&&!M.category&&e.jsxs("p",{className:"mt-1 text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(bs,{size:12}),"Please select a category to continue"]})]})]}),F.category&&Na.length>0&&(()=>{const c=cs[String(Na[0]||"")]||[],g=ql[String(Na[0]||"")]||!1,N=String(Na[1]||"");return e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Optional - Leave empty to create product directly in category)"})]}),g&&c.length===0?e.jsxs("div",{className:"w-full py-2 border border-cream-300 rounded-lg flex items-center justify-center",children:[e.jsx(Qt,{className:"animate-spin text-cream-600",size:16}),e.jsx("span",{className:"ml-2 text-sm text-cream-600",children:"Loading..."})]}):c.length>0?e.jsx(Ca,{label:"Select Subcategory",value:String(N||F.subcategory||""),onChange:async S=>{if(S){ta([String(Na[0]),String(S)]),J({...F,category:String(Na[0]),subcategory:String(S)});try{we(!0);const E=await fetch(`${Ae}/products/category/${S}`,{headers:Ct()});if(E.ok){const z=await gt(E);oe(z||[])}}catch(E){console.error("Error fetching category products:",E),oe([])}finally{we(!1)}}else{ta([Na[0]]),J({...F,category:Na[0],subcategory:""});try{we(!0);const E=await fetch(`${Ae}/products/category/${Na[0]}`,{headers:Ct()});if(E.ok){const z=await gt(E);oe(z||[])}}catch(E){console.error("Error fetching category products:",E),oe([])}finally{we(!1)}}},options:[{value:"",label:"None (Use Category Directly)"},...c.sort((S,E)=>(S.sortOrder||0)-(E.sortOrder||0)).map(S=>({value:S._id,label:S.name}))],className:"w-full"}):null]})})(),Xa&&e.jsxs("div",{className:"mt-4 p-4 bg-cream-50 border border-cream-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-cream-900",children:"Existing Products in this Category"}),Fe&&e.jsx(Qt,{className:"animate-spin text-cream-600",size:16})]}),Fe?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"Loading..."})}):F.category?F.subcategory?pi.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"No products found in this subcategory. This will be the first product."})}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:pi.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-cream-200 rounded-lg hover:border-cream-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"font-medium text-cream-900 text-sm truncate",children:c.name})})]}),e.jsxs("button",{type:"button",onClick:()=>fn(c._id),className:"px-3 py-1.5 text-xs bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Er,{size:14}),"View"]})]},c._id))}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(cs[F.category]||[]).length>0?(cs[F.category]||[]).sort((c,g)=>(c.sortOrder||0)-(g.sortOrder||0)).map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-cream-200 rounded-lg hover:border-cream-300 transition-colors cursor-pointer",onClick:async()=>{J({...F,subcategory:c._id});const g=[F.category];if(c.parent){const N=typeof c.parent=="object"&&c.parent!==null?c.parent._id:String(c.parent);N&&g.push(N)}g.push(c._id),ta(g);try{we(!0);const N=await fetch(`${Ae}/products/subcategory/${c._id}`,{headers:Ct()});if(N.ok){const S=await gt(N);oe(S||[])}else oe([])}catch(N){console.error("Error fetching products:",N),oe([])}finally{we(!1)}},children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-cream-900 text-sm truncate",children:c.name}),e.jsx("p",{className:"text-xs text-cream-600",children:c.parent?"Nested Subcategory":"Subcategory"})]})]}),e.jsx(sr,{className:"text-cream-600",size:16})]},c._id)):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"No subcategories found. Product will be created directly under this category."})})}):e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[mi.filter(c=>!c.parent).map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-cream-200 rounded-lg hover:border-cream-300 transition-colors cursor-pointer",onClick:async()=>{J({...F,category:c._id,subcategory:""}),ta([c._id]),oe([]),await xi(c._id)},children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-cream-900 text-sm truncate",children:c.name}),e.jsxs("p",{className:"text-xs text-cream-600",children:[c.type," Category"]})]})]}),e.jsx(sr,{className:"text-cream-600",size:16})]},c._id)),mi.filter(c=>!c.parent).length===0&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-cream-600",children:"No categories found for this type."})})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Options"}),F.options&&e.jsx("button",{type:"button",onClick:dl,className:"px-3 py-1 text-xs bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Load from JSON"})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{type:"button",onClick:pn,className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add Option"]})}),I.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No options added. Click "Add Option" to start.'}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto -mx-4 sm:mx-0",children:e.jsx("div",{className:"inline-block min-w-full align-middle px-4 sm:px-0",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900 min-w-[150px]",children:"Name"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900 min-w-[150px]",children:"Price (INR per unit)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900 min-w-[200px]",children:"Description"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:I.map((c,g)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:c.name,onChange:N=>Ga(g,"name",N.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Option name"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"number",step:"0.00001",min:"0",value:c.priceAdd,onChange:N=>Ga(g,"priceAdd",N.target.value),className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm font-medium",placeholder:"0.00 (INR per unit)"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("textarea",{value:c.description,onChange:N=>Ga(g,"description",N.target.value),rows:2,className:"w-full px-2 py-1 border border-cream-200 rounded text-sm resize-y",placeholder:"Description"})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>Ao(g),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})})]},g))})]})})}),e.jsx("div",{className:"md:hidden space-y-4",children:I.map((c,g)=>e.jsxs("div",{className:"bg-white border border-cream-300 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-semibold text-cream-900",children:["Option ",g+1]}),e.jsx("button",{type:"button",onClick:()=>Ao(g),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:18})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:N=>Ga(g,"name",N.target.value),className:"w-full px-3 py-2 border border-cream-200 rounded text-sm",placeholder:"Option name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Price (INR per unit)"}),e.jsx("input",{type:"text",value:c.priceAdd,onChange:N=>Ga(g,"priceAdd",N.target.value),className:"w-full px-3 py-2 border border-cream-200 rounded text-sm font-medium",placeholder:"0.00 (INR per unit)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:N=>Ga(g,"description",N.target.value),rows:2,className:"w-full px-3 py-2 border border-cream-200 rounded text-sm resize-y",placeholder:"Description"})]})]},g))})]})]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-purple-50",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"File Upload Constraints & Additional Settings"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Maximum File Size (MB)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",value:F.maxFileSizeMB,onChange:c=>J({...F,maxFileSizeMB:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 10"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Enforces technical constraints for Staff uploads"})]}),e.jsxs("div",{className:"flex items-end",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-cream-900 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:F.blockCDRandJPG,onChange:c=>J({...F,blockCDRandJPG:c.target.checked}),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{children:"Block CDR and JPG Files"})]}),e.jsx("p",{className:"text-xs text-cream-600 ml-2",children:"Restricts accepted file formats for production"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Min File Width (pixels)"}),e.jsx("input",{type:"number",min:"0",value:F.minFileWidth,onChange:c=>J({...F,minFileWidth:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 2000"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Minimum width for user artwork files"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Max File Width (pixels)"}),e.jsx("input",{type:"number",min:"0",value:F.maxFileWidth,onChange:c=>J({...F,maxFileWidth:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 5000"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Maximum width for user artwork files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Min File Height (pixels)"}),e.jsx("input",{type:"number",min:"0",value:F.minFileHeight,onChange:c=>J({...F,minFileHeight:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 1500"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Minimum height for user artwork files"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Max File Height (pixels)"}),e.jsx("input",{type:"number",min:"0",value:F.maxFileHeight,onChange:c=>J({...F,maxFileHeight:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 4000"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Maximum height for user artwork files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Additional Design Charge (INR)"}),e.jsx("input",{type:"number",step:"0.00001",min:"0",value:F.additionalDesignCharge,onChange:c=>J({...F,additionalDesignCharge:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., 500"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Fixed fee if Staff requires design help"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"GST % *"}),e.jsx("input",{id:"product-gstPercentage",name:"gstPercentage",type:"number",required:!0,step:"0.01",min:"0",max:"100",value:F.gstPercentage,onChange:c=>{J({...F,gstPercentage:c.target.value}),M.gstPercentage&&B({...M,gstPercentage:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${M.gstPercentage?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., 18"}),M.gstPercentage&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(bs,{size:12}),M.gstPercentage]}),!M.gstPercentage&&e.jsx("p",{className:"text-xs text-red-600 mt-1 font-medium",children:"CRITICAL: Required for invoice calculation"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:F.showPriceIncludingGst,onChange:c=>J({...F,showPriceIncludingGst:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-cream-900 block",children:"Show Prices Including GST"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:F.showPriceIncludingGst?"Prices will be displayed including GST on the product page. (Not recommended - industry standard is to show excluding GST)":"Prices will be displayed excluding GST on the product page. GST will be added at checkout. (Recommended - industry standard)"})]})]})}),e.jsxs("div",{className:"mt-6 border border-cream-300 rounded-lg p-6 bg-yellow-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(hr,{size:20}),"Custom Instructions for Customers"]}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Add specific instructions that customers must follow. If instructions are not followed, the company is not responsible. These instructions will be displayed prominently to customers."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Instructions *"}),e.jsx("textarea",{id:"product-instructions",name:"instructions",value:F.instructions,onChange:c=>{J({...F,instructions:c.target.value}),M.instructions&&B({...M,instructions:void 0})},rows:6,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${M.instructions?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Example: Maximum file size: 10 MB. Files must be in PNG or PDF format only. CDR and JPG files are not accepted. Required dimensions: 3000  2000 pixels. Please ensure all text is converted to outlines before uploading."}),M.instructions&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(bs,{size:12}),M.instructions]}),!M.instructions&&e.jsx("p",{className:"text-xs text-yellow-700 mt-2 font-medium",children:" These instructions will be displayed to customers with a disclaimer that the company is not responsible if instructions are not followed."})]})]}),e.jsxs("div",{className:"mt-6 border border-cream-300 rounded-lg p-6 bg-blue-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900 mb-2 flex items-center gap-2",children:[e.jsx(hr,{size:20}),"Production Sequence (Department Order)"]}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Select a sequence or customize it for this specific product. If not set, the default department sequence will be used."}),(()=>{const c=qa.length>0,g=F.productionSequence&&F.productionSequence.length>0,N=En!==null,S=ln.length>0,E=N?ln.find(V=>V._id===En):null;return E&&E.departments&&E.departments.length>0,!c&&!g&&!N&&!S?e.jsx("div",{className:"p-4 bg-cream-50 border border-cream-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:"No departments available. Please create departments first."})}):e.jsxs("div",{className:"space-y-4",children:[ln.length>0&&e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900 mb-3",children:"Available Sequences:"}),e.jsx("div",{className:"space-y-2",children:ln.map(V=>{const H=En===V._id,Y=(V.departments||[]).map(ee=>!ee||!ee.department?null:typeof ee.department=="object"&&ee.department!==null?ee.department._id:ee.department).filter(ee=>ee!==null);return e.jsxs("div",{className:"border border-cream-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{onClick:()=>{if(En===V._id)rl(null),J({...F,productionSequence:[]});else if(rl(V._id),J({...F,productionSequence:Y}),V.attributes&&Array.isArray(V.attributes)&&V.attributes.length>0){const ee=V.attributes.map((De,Qe)=>{if(!De)return null;const yt=typeof De=="object"&&De!==null?De._id:De;return yt?{attributeTypeId:yt,isEnabled:!0,isRequired:!1,displayOrder:Qe}:null}).filter(De=>De!==null);et(ee)}},className:`p-3 cursor-pointer transition-colors flex items-center justify-between ${H?"bg-cream-100 border-cream-900":"bg-cream-50 hover:bg-cream-100"}`,children:[e.jsx("p",{className:"font-medium text-cream-900",children:V.name}),e.jsx(sr,{size:18,className:`text-cream-600 transition-transform ${H?"rotate-90":""}`})]}),e.jsx(ca,{children:H&&e.jsx(st.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"border-t border-cream-200 bg-white",children:e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-cream-700 mb-2",children:"Sequence Departments:"}),e.jsx(ca,{children:F.productionSequence.map((ee,De)=>{const Qe=qa.find(yt=>yt._id===ee);return Qe?e.jsxs(st.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.4,delay:De*.1,ease:"easeOut"},className:"flex items-center gap-3 p-3 bg-cream-50 border border-cream-200 rounded-lg",children:[e.jsx(st.span,{initial:{scale:0},animate:{scale:1},transition:{duration:.3,delay:De*.1+.2,type:"spring",stiffness:200},className:"flex items-center justify-center w-8 h-8 bg-cream-900 text-white rounded-full text-sm font-medium",children:De+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:Qe.name}),e.jsx(ca,{children:Qe.description&&e.jsx(st.p,{initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.5,delay:De*.1+.3,ease:"easeOut"},className:"text-xs text-cream-600 mt-1 overflow-hidden",children:Qe.description})})]})]},ee):null})})]})})})]},V._id)})})]}),!vc&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{type:"button",onClick:()=>{il(!0),rl(null)},className:"px-4 py-2 text-sm font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Cr,{size:16}),"Create Custom Sequence"]})}),vc&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t-2 border-cream-300 pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900",children:"Create Custom Sequence"}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:"Select departments in order to create a custom sequence for this product"})]}),e.jsxs("button",{type:"button",onClick:()=>{il(!1),J({...F,productionSequence:[]})},className:"px-3 py-1 text-sm bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(po,{size:14}),"Back"]})]}),e.jsx(ca,{children:F.productionSequence&&F.productionSequence.length>0&&e.jsxs(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"border border-cream-300 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900 mb-3",children:"Custom Production Sequence:"}),e.jsx("div",{className:"space-y-2",children:e.jsx(ca,{children:(F.productionSequence||[]).map((V,H)=>{const Y=qa.find(ee=>ee._id===V);return Y?e.jsxs(st.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20,scale:.9},transition:{duration:.4,delay:H*.1,ease:"easeOut"},className:"flex items-center justify-between p-3 bg-cream-50 border border-cream-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(st.span,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.4,delay:H*.1+.2,type:"spring",stiffness:200},className:"flex items-center justify-center w-8 h-8 bg-cream-900 text-white rounded-full text-sm font-medium",children:H+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:Y.name}),e.jsx(ca,{children:Y.description&&e.jsx(st.p,{initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.5,delay:H*.1+.3,ease:"easeOut"},className:"text-xs text-cream-600 mt-1 overflow-hidden",children:Y.description})})]})]}),e.jsx(st.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>{const ee=(F.productionSequence||[]).filter(De=>De!==V);J({...F,productionSequence:ee})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})]},V):null})})})]})}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900 mb-3",children:"Available Departments:"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:qa.filter(V=>V.isEnabled&&!(F.productionSequence||[]).includes(V._id)).sort((V,H)=>(V.sequence||0)-(H.sequence||0)).map(V=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-cream-50 border border-cream-200 rounded-lg hover:bg-cream-100 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-cream-900",children:V.name}),V.description&&e.jsx("p",{className:"text-xs text-cream-600",children:V.description})]}),e.jsxs("button",{type:"button",onClick:()=>{J({...F,productionSequence:[...F.productionSequence||[],V._id]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:14}),"Add"]})]},V._id))}),qa.filter(V=>V.isEnabled&&!(F.productionSequence||[]).includes(V._id)).length===0&&e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:"All available departments have been added to the sequence."})]}),e.jsx("div",{className:"mt-4 flex items-center justify-end gap-3",children:e.jsxs("button",{type:"button",onClick:()=>{il(!1),rl(null),f("Custom sequence saved for this product. The original sequence template remains unchanged."),setTimeout(()=>f(null),3e3)},disabled:!F.productionSequence||F.productionSequence.length===0,className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-2 ${F.productionSequence&&F.productionSequence.length>0?"bg-green-600 text-white hover:bg-green-700 cursor-pointer":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(ga,{size:16}),"Save Custom Sequence"]})})]})}),(!F.productionSequence||F.productionSequence.length===0)&&e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," If no custom sequence is set, the default department sequence will be used when orders are created for this product."]})})]})})()]})]}),e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 bg-green-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Product Attributes (Advanced)"}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:"Assign reusable attribute types to this product. These are more flexible than the legacy options above."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>Gl(!0),className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Create new attribute type",children:[e.jsx(Ls,{size:14}),"Create Attribute"]}),e.jsxs("button",{type:"button",onClick:()=>{const c=F.category||(Na.length>0?Na[0]:null),g=F.subcategory||(Na.length>1?Na[Na.length-1]:null);or(c,g)},disabled:Dr,className:"px-3 py-1.5 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center gap-2",title:"Refresh attribute types list",children:[Dr?e.jsx(Qt,{className:"animate-spin",size:14}):e.jsx(Cr,{size:14}),"Refresh"]})]})]}),Dr?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Qt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-3 text-sm text-cream-600",children:"Loading attribute types..."})]}):!wt||wt.length===0?e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-cream-700",children:[e.jsx("strong",{children:"No attribute types found."}),' Click "Create Attribute" to create a new attribute type, or create attribute types in the "Attribute Types" tab.']})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Select Attribute Types to Use with This Product"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(wt||[]).map(c=>{const g=(Be||[]).some(S=>S.attributeTypeId===c._id),N=(Be||[]).find(S=>S.attributeTypeId===c._id);return e.jsx("div",{className:`border rounded-lg p-3 ${g?"border-green-500 bg-green-50":"border-cream-300 bg-white"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:S=>{S.target.checked?et([...Be||[],{attributeTypeId:c._id,isEnabled:!0,isRequired:c.isRequired||!1,displayOrder:(Be||[]).length}]):et((Be||[]).filter(E=>E.attributeTypeId!==c._id))},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-cream-900",children:c.attributeName}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[c.inputStyle||"N/A","  ",c.primaryEffectType||"N/A"," "," ",c.isPricingAttribute?"Affects Price":"No Price Impact"]})]})}),g&&e.jsx("div",{className:"mt-3 space-y-2 pl-7",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm text-cream-700",children:[e.jsx("input",{type:"checkbox",checked:(N==null?void 0:N.isRequired)||!1,onChange:S=>{et((Be||[]).map(E=>E.attributeTypeId===c._id?{...E,isRequired:S.target.checked}:E))},className:"w-4 h-4 text-cream-900 border-cream-300 rounded"}),"Required for this product"]})})})]})]})},c._id)})}),Be&&Be.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:Be.length})," attribute type(s) selected. These will be available when customers customize this product."]})})]})]}),Hl&&e.jsx("div",{"data-modal":"true",className:"fixed inset-0 bg-black/50 flex items-center justify-center z-100 p-4",onClick:c=>{c.target===c.currentTarget&&Gl(!1)},onMouseDown:c=>{c.target===c.currentTarget&&c.stopPropagation()},children:e.jsxs("div",{"data-modal":"true",className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:c=>{c.stopPropagation(),c.preventDefault()},onMouseDown:c=>{c.stopPropagation(),c.preventDefault()},onSubmit:c=>{c.stopPropagation(),c.preventDefault()},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-cream-900",children:"Create New Attribute Type"}),e.jsx("button",{type:"button",onClick:()=>{Gl(!1),sl(null),mt({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]})},className:"text-cream-600 hover:text-cream-900 p-1",children:e.jsx(as,{size:24})})]}),e.jsxs("form",{onSubmit:c=>{c.preventDefault(),c.stopPropagation(),mn(c)},className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Name * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(What customers will see)"})]}),e.jsx("input",{id:"attribute-name",name:"attributeName",type:"text",value:Z.attributeName,onChange:c=>{mt({...Z,attributeName:c.target.value}),O.attributeName&&k({...O,attributeName:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${O.attributeName?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Printing Option, Paper Type",required:!0}),O.attributeName&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(bs,{size:12}),O.attributeName]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["How Customers Select This * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Input method)"})]}),e.jsxs("select",{id:"attribute-inputStyle",name:"inputStyle",value:Z.inputStyle,onChange:c=>mt({...Z,inputStyle:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"DROPDOWN",children:"Dropdown Menu"}),e.jsx("option",{value:"POPUP",children:"Pop-Up"}),e.jsx("option",{value:"RADIO",children:"Radio Buttons"}),e.jsx("option",{value:"CHECKBOX",children:"Checkbox"}),e.jsx("option",{value:"TEXT_FIELD",children:"Text Field"}),e.jsx("option",{value:"NUMBER",children:"Number Input"}),e.jsx("option",{value:"FILE_UPLOAD",children:"File Upload"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Image ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(to be shown when selecting this attribute)"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:c=>{var N;const g=((N=c.target.files)==null?void 0:N[0])||null;if(g){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(g.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),c.target.value="",mt({...Z,attributeImage:null});return}const E=5*1024*1024;if(g.size>E){p("Image size must be less than 5MB. Please compress the image and try again."),c.target.value="",mt({...Z,attributeImage:null});return}p(null)}mt({...Z,attributeImage:g})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent"}),Z.attributeImage&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:URL.createObjectURL(Z.attributeImage),alt:"Attribute preview",className:"w-32 h-32 object-cover rounded-lg border border-cream-300"}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[Z.attributeImage.name," (",(Z.attributeImage.size/1024).toFixed(2)," KB)"]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["What This Affects * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Description of impact on product)"})]}),e.jsx("textarea",{value:Z.effectDescription,onChange:c=>mt({...Z,effectDescription:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent",rows:3,placeholder:"e.g., Changes the product price, Requires customer to upload a file, Creates different product versions, Just displays information",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Describe how this attribute affects the product or customer experience"})]}),e.jsxs("div",{className:"mt-6 border-t border-cream-200 pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Cascading Attributes (Optional)"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:'Make this attribute appear only when a parent attribute has specific values. For example, show "Material" options only when "Card Type" is "Glossy".'}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Parent Attribute ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Optional - if this depends on another attribute)"})]}),e.jsxs("select",{value:Z.parentAttribute,onChange:c=>{mt({...Z,parentAttribute:c.target.value,showWhenParentValue:[],hideWhenParentValue:[]})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent",children:[e.jsx("option",{value:"",children:"None (Independent Attribute)"}),wt.filter(c=>!c.parentAttribute).map(c=>e.jsx("option",{value:c._id,children:c.attributeName},c._id))]}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Select a parent attribute if this attribute should only appear when the parent has certain values"})]}),Z.parentAttribute&&(()=>{const c=wt.find(N=>N._id===Z.parentAttribute),g=(c==null?void 0:c.attributeValues)||[];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Show When Parent Value Is ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Leave empty to show for all values)"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-300 rounded-lg p-3",children:g.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:"Parent attribute has no values defined yet"}):g.map((N,S)=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Z.showWhenParentValue.includes(N.value),onChange:E=>{const z=Z.showWhenParentValue||[];E.target.checked?mt({...Z,showWhenParentValue:[...z,N.value],hideWhenParentValue:(Z.hideWhenParentValue||[]).filter(V=>V!==N.value)}):mt({...Z,showWhenParentValue:z.filter(V=>V!==N.value)})},className:"rounded border-cream-300 text-cream-900 focus:ring-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:N.label||N.value})]},S))}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Check values to show this attribute only when parent has those values. Leave all unchecked to show for all parent values."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Hide When Parent Value Is ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Optional)"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-300 rounded-lg p-3",children:g.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:"Parent attribute has no values defined yet"}):g.map((N,S)=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Z.hideWhenParentValue.includes(N.value),onChange:E=>{const z=Z.hideWhenParentValue||[];E.target.checked?mt({...Z,hideWhenParentValue:[...z,N.value],showWhenParentValue:(Z.showWhenParentValue||[]).filter(V=>V!==N.value)}):mt({...Z,hideWhenParentValue:z.filter(V=>V!==N.value)})},className:"rounded border-cream-300 text-cream-900 focus:ring-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:N.label||N.value})]},S))}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:'Check values to hide this attribute when parent has those values. This overrides "Show When" settings.'})]})]})})()]})]})]}),Z.inputStyle==="DROPDOWN"||Z.inputStyle==="RADIO"||Z.isPriceEffect?e.jsxs("div",{className:"border-b border-cream-200 pb-4","data-attribute-options-table":!0,children:[O.attributeValues&&e.jsx("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:O.attributeValues})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Options"}),e.jsxs("button",{type:"button",onClick:()=>{mt({...Z,attributeOptionsTable:[...Z.attributeOptionsTable,{name:"",priceImpactPer1000:"",image:void 0,optionUsage:{price:!1,image:!1,listing:!1},priceImpact:"",numberOfImagesRequired:0,listingFilters:""}]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add Option"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:Z.attributeOptionsTable.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No options added. Click "Add Option" to start.'}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Name *"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Usage *"}),Z.attributeOptionsTable.some(c=>{var g;return(g=c.optionUsage)==null?void 0:g.price})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Impact"}),Z.attributeOptionsTable.some(c=>{var g;return(g=c.optionUsage)==null?void 0:g.image})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Number of Images Required"}),Z.attributeOptionsTable.some(c=>{var g;return(g=c.optionUsage)==null?void 0:g.listing})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Listing Filters"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Image (Optional)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:(Z.attributeOptionsTable||[]).map((c,g)=>{var N,S,E,z,V,H;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:c.name,onChange:Y=>{const ee=[...Z.attributeOptionsTable];ee[g].name=Y.target.value,mt({...Z,attributeOptionsTable:ee})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Both Sides, Express Delivery",required:!0})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((N=c.optionUsage)==null?void 0:N.price)||!1,onChange:Y=>{const ee=[...Z.attributeOptionsTable];if(ee[g].optionUsage||(ee[g].optionUsage={price:!1,image:!1,listing:!1}),ee[g].optionUsage.price=Y.target.checked,!Y.target.checked&&!ee[g].optionUsage.image&&!ee[g].optionUsage.listing){p("At least one option usage must be selected (Price, Image, or Listing)");return}mt({...Z,attributeOptionsTable:ee}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Price"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((S=c.optionUsage)==null?void 0:S.image)||!1,onChange:Y=>{const ee=[...Z.attributeOptionsTable];if(ee[g].optionUsage||(ee[g].optionUsage={price:!1,image:!1,listing:!1}),ee[g].optionUsage.image=Y.target.checked,!Y.target.checked&&!ee[g].optionUsage.price&&!ee[g].optionUsage.listing){p("At least one option usage must be selected (Price, Image, or Listing)");return}mt({...Z,attributeOptionsTable:ee}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Image"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((E=c.optionUsage)==null?void 0:E.listing)||!1,onChange:Y=>{const ee=[...Z.attributeOptionsTable];if(ee[g].optionUsage||(ee[g].optionUsage={price:!1,image:!1,listing:!1}),ee[g].optionUsage.listing=Y.target.checked,!Y.target.checked&&!ee[g].optionUsage.price&&!ee[g].optionUsage.image){p("At least one option usage must be selected (Price, Image, or Listing)");return}mt({...Z,attributeOptionsTable:ee}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Listing"})]})]})}),Z.attributeOptionsTable.some(Y=>{var ee;return(ee=Y.optionUsage)==null?void 0:ee.price})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(z=c.optionUsage)!=null&&z.price?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-cream-700",children:""}),e.jsx("input",{type:"number",value:c.priceImpact||"",onChange:Y=>{const ee=[...Z.attributeOptionsTable];ee[g].priceImpact=Y.target.value,mt({...Z,attributeOptionsTable:ee})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter amount",step:"0.01",min:"0"})]}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),Z.attributeOptionsTable.some(Y=>{var ee;return(ee=Y.optionUsage)==null?void 0:ee.image})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(V=c.optionUsage)!=null&&V.image?e.jsx("input",{type:"number",value:c.numberOfImagesRequired||0,onChange:Y=>{const ee=[...Z.attributeOptionsTable];ee[g].numberOfImagesRequired=parseInt(Y.target.value)||0,mt({...Z,attributeOptionsTable:ee})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Number of images",min:"0"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),Z.attributeOptionsTable.some(Y=>{var ee;return(ee=Y.optionUsage)==null?void 0:ee.listing})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(H=c.optionUsage)!=null&&H.listing?e.jsx("input",{type:"text",value:c.listingFilters||"",onChange:Y=>{const ee=[...Z.attributeOptionsTable];ee[g].listingFilters=Y.target.value,mt({...Z,attributeOptionsTable:ee})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter filters (comma-separated)"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:async Y=>{var De;const ee=(De=Y.target.files)==null?void 0:De[0];if(ee){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(ee.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image.");return}if(ee.size>5*1024*1024){p("Image size must be less than 5MB.");return}try{m(!0);const yt=new FormData;yt.append("image",ee);const Ut=await fetch(`${Ae}/upload-image`,{method:"POST",headers:Ct(),body:yt});if(!Ut.ok){const Bt=await Ut.json().catch(()=>({}));throw new Error(Bt.error||"Failed to upload image")}const St=await Ut.json(),Nt=St.url||St.secure_url;if(!Nt)throw new Error("No image URL returned from server");const jt=[...Z.attributeOptionsTable];jt[g].image=Nt,mt({...Z,attributeOptionsTable:jt}),p(null)}catch(yt){console.error("Error uploading image:",yt),p(yt instanceof Error?yt.message:"Failed to upload image. Please try again.")}finally{m(!1)}}},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm"}),c.image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded border border-cream-200"}),e.jsx("button",{type:"button",onClick:()=>{const Y=[...Z.attributeOptionsTable];Y[g].image=void 0,mt({...Z,attributeOptionsTable:Y})},className:"mt-1 text-xs text-red-600 hover:text-red-800",children:"Remove"})]})]}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>{const Y=Z.attributeOptionsTable.filter((ee,De)=>De!==g);mt({...Z,attributeOptionsTable:Y})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})})]},g)})})]})})}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Add all options customers can choose from. If "Is Price Effect" is checked, enter the price impact per 1000 units for each option.'})]}):null,e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Additional Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isPriceEffect,onChange:c=>mt({...Z,isPriceEffect:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Price Effect?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if selecting this attribute changes the product price"}),Z.isPriceEffect&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Price Effect Amount ( per 1000 units) *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg text-cream-700",children:""}),e.jsx("input",{type:"number",value:Z.priceEffectAmount,onChange:c=>mt({...Z,priceEffectAmount:c.target.value}),className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg",placeholder:"e.g., 20 (means +20 per 1000 units)",step:"0.00001",min:"0",required:Z.isPriceEffect}),e.jsx("span",{className:"text-sm text-cream-600",children:"per 1000 units"})]}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Enter how much the price changes per 1000 units. Example: "20" means +20 for every 1000 units.'})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isStepQuantity,onChange:c=>mt({...Z,isStepQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Step Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific steps (e.g., 1000, 2000, 3000 only)"}),Z.isStepQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Steps:"}),e.jsxs("button",{type:"button",onClick:()=>{mt({...Z,stepQuantities:[...Z.stepQuantities,{quantity:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Ls,{size:14}),"Add Step"]})]}),Z.stepQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No steps added. Click "Add Step" to start.'}):e.jsx("div",{className:"space-y-2",children:Z.stepQuantities.map((c,g)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Step - ",g+1,":"]}),e.jsx("input",{type:"number",value:c.quantity,onChange:N=>{const S=[...Z.stepQuantities];S[g].quantity=N.target.value,mt({...Z,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"quantity of step",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...Z.stepQuantities];S[g].price=N.target.value,mt({...Z,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of step",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=Z.stepQuantities.filter((S,E)=>E!==g);mt({...Z,stepQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})]},g))})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isRangeQuantity,onChange:c=>mt({...Z,isRangeQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Range Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific Range (e.g., 1000-2000, 2000-5000)"}),Z.isRangeQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Ranges:"}),e.jsxs("button",{type:"button",onClick:()=>{mt({...Z,rangeQuantities:[...Z.rangeQuantities,{min:"",max:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Ls,{size:14}),"Add Range"]})]}),Z.rangeQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No ranges added. Click "Add Range" to start.'}):e.jsx("div",{className:"space-y-2",children:Z.rangeQuantities.map((c,g)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Range - ",g+1,":"]}),e.jsx("input",{type:"number",value:c.min,onChange:N=>{const S=[...Z.rangeQuantities];S[g].min=N.target.value,mt({...Z,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"min quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700",children:"-"}),e.jsx("input",{type:"number",value:c.max,onChange:N=>{const S=[...Z.rangeQuantities];S[g].max=N.target.value,mt({...Z,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"max quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...Z.rangeQuantities];S[g].price=N.target.value,mt({...Z,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of range",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=Z.rangeQuantities.filter((S,E)=>E!==g);mt({...Z,rangeQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})]},g))})]})]})]})]})]}),Z.primaryEffectType==="FILE"&&e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"File Requirements"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"File Requirements Description"}),e.jsx("textarea",{value:Z.fileRequirements,onChange:c=>mt({...Z,fileRequirements:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg",rows:3,placeholder:"e.g., Upload your design file (JPG, PNG, PDF). Minimum 300 DPI recommended."}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:"Describe what type of file customers need to upload and any requirements (format, size, resolution, etc.)"})]})]}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isFilterable,onChange:c=>mt({...Z,isFilterable:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Allow Filtering"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers can filter products by this attribute (e.g., filter by color, size, etc.)"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isRequired,onChange:c=>mt({...Z,isRequired:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Required Selection"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers must select an option before they can place an order"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isCommonAttribute,onChange:c=>mt({...Z,isCommonAttribute:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Available for All Products"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute can be used with any product. Uncheck to restrict to specific categories/subcategories."})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Creating...":"Create Attribute"}),e.jsx("button",{type:"button",onClick:()=>{Gl(!1),sl(null),mt({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],isFixedQuantity:!1,fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[]})},className:"flex-1 px-6 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"})]})]})]})}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:20}),j?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{size:20}),j?"Update Product":"Create Product"]})})]}),n==="categories"&&!P&&!vs&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Category Level *"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border-2 cursor-pointer hover:border-cream-400 transition-all hover:shadow-sm",style:{borderColor:!fe.parent&&!$t?"#d97706":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"categoryLevel",checked:!fe.parent&&!$t,onChange:()=>{se({...fe,parent:"",sortOrder:0}),Bs(!1),At({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),Ft([]),p(null)},className:"w-4 h-4 text-cream-600 focus:ring-cream-500",value:"toplevel"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-cream-900",children:"Main Category"}),e.jsx("p",{className:"text-xs text-cream-600 mt-0.5",children:"Create a top-level category"})]}),!fe.parent&&!$t&&e.jsx(ga,{className:"text-cream-600",size:20})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border-2 cursor-pointer hover:border-cream-400 transition-all hover:shadow-sm",style:{borderColor:fe.parent&&!$t?"#d97706":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"categoryLevel",checked:!!fe.parent&&!$t,onChange:()=>{Bs(!1),At({name:"",description:"",category:"pending",parent:"",type:fe.type||"",slug:"",sortOrder:0,image:null}),se({...fe,parent:"pending"}),Ft([]),p(null)},className:"w-4 h-4 text-cream-600 focus:ring-cream-500",value:"subcategory"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-cream-900",children:"Subcategory"}),e.jsx("p",{className:"text-xs text-cream-600 mt-0.5",children:"Create under an existing category"})]}),fe.parent&&!$t&&e.jsx(ga,{className:"text-cream-600",size:20})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border-2 cursor-pointer hover:border-cream-400 transition-all hover:shadow-sm",style:{borderColor:$t?"#d97706":"#e5e7eb"},children:[e.jsx("input",{type:"radio",name:"categoryLevel",checked:$t,onChange:()=>{Bs(!0),se({...fe,parent:""}),At({name:"",description:"",category:"",parent:"pending",type:fe.type||"",slug:"",sortOrder:0,image:null}),Ft([]),p(null)},className:"w-4 h-4 text-cream-600 focus:ring-cream-500",value:"nestedSubcategory"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-cream-900",children:"Nested Subcategory"}),e.jsx("p",{className:"text-xs text-cream-600 mt-0.5",children:"Create under an existing subcategory"})]}),$t&&e.jsx(ga,{className:"text-cream-600",size:20})]})]})]}),n==="categories"&&!vs&&!_e.category&&!$t&&e.jsxs("form",{onSubmit:Lr,className:"space-y-6",children:[P&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Category: ",fe.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:Rn,className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),!fe.parent&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Category Name *"}),e.jsx("input",{id:"category-name",name:"name",type:"text",required:!0,value:fe.name,onChange:c=>{const g=c.target.value;let N=fe.slug;if(!te){const S=g.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");S&&!g.endsWith(" ")?N=Tn(S,P,null):N=S}se({...fe,name:g,slug:N}),p(null)},onBlur:()=>{if(!fe.name.trim())p("Category name is required.");else if(!te){const c=fe.name.trim();if(c){const g=c.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");if(g){const N=Tn(g,P,null);se({...fe,slug:N})}}}},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${u&&!fe.name.trim()||!fe.name.trim()&&fe.name!==""?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Enter category name"}),(u&&!fe.name.trim()||!fe.name.trim()&&fe.name!=="")&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Category name is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description"}),e.jsx("textarea",{value:fe.description,onChange:c=>se({...fe,description:c.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Slug (URL-friendly identifier)"}),e.jsx("input",{type:"text",value:fe.slug,onChange:c=>{be(!0),se({...fe,slug:c.target.value})},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., visiting-cards (auto-generated from name)"}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Auto-generated from category name. You can customize it if needed."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Type *"}),e.jsx(Ca,{id:"category-type",label:"Select Type",value:fe.type,onChange:c=>{se({...fe,type:c,parent:""}),p(null),setTimeout(()=>{P?hi(P):hi()},0)},options:[{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"}),u&&!fe.type&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Category type is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",min:"0",value:fe.sortOrder,onChange:c=>{se({...fe,sortOrder:parseInt(c.target.value)||0}),ce.sortOrder&&U({...ce,sortOrder:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${ce.sortOrder?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Enter sort order (0 = first)"}),ce.sortOrder?e.jsx("p",{className:"mt-1 text-xs text-red-600",children:ce.sortOrder}):e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Lower numbers appear first. Sort order must be unique within the same type (Digital or Bulk)."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Category Image *",P&&e.jsx("span",{className:"text-xs text-cream-500 font-normal ml-2",children:"(Leave empty to keep current)"}),!P&&e.jsx("span",{className:"text-xs text-red-600 font-normal ml-2",children:"(Required - JPG, PNG, WebP, max 5MB)"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",required:!P,onChange:c=>{var N;const g=((N=c.target.files)==null?void 0:N[0])||null;if(g){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(g.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),c.target.value="",se({...fe,image:null});return}const E=5*1024*1024;if(g.size>E){p("Image size must be less than 5MB. Please compress the image and try again."),c.target.value="",se({...fe,image:null});return}p(null)}else P||p("Category image is required. Please upload an image.");se({...fe,image:g})},onBlur:()=>{!P&&!fe.image&&p("Category image is required. Please upload an image.")},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${u&&!P&&!fe.image?"border-red-300 bg-red-50":"border-cream-300"}`}),P&&$&&!fe.image&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-cream-700 mb-2",children:"Current Image:"}),e.jsx("img",{src:$,alt:"Current category",className:"w-32 h-32 object-cover rounded-lg border border-cream-300",onError:c=>{const g=c.target;g.src="/Glossy.png"}})]}),fe.image&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm text-green-700 mb-2 font-medium flex items-center gap-1",children:[e.jsx(ga,{size:14}),"New Image Preview:"]}),e.jsx("img",{src:URL.createObjectURL(fe.image),alt:"New category preview",className:"w-32 h-32 object-cover rounded-lg border-2 border-green-400",onError:c=>{const g=c.target;g.src="/Glossy.png"}}),e.jsxs("p",{className:"mt-2 text-xs text-green-600",children:[fe.image.name," (",(fe.image.size/1024).toFixed(2)," KB)"]})]}),u&&!P&&!fe.image&&e.jsxs("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[e.jsx(bs,{size:12}),"Category image is required"]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{size:20}),P?"Update Category":"Create Category"]})})]})]}),n==="categories"&&(vs||_e.category&&_e.category!==""&&!$t||$t)&&e.jsxs("form",{onSubmit:$r,className:"space-y-6 mt-8 border-t border-cream-200 pt-8",children:[vs&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Subcategory: ",_e.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:Rn,className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),!vs&&_e.category&&_e.category!=="pending"&&!$t&&e.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-green-800 font-medium",children:["Adding Subcategory to: ",((Eo=qe.find(c=>c._id===_e.category))==null?void 0:Eo.name)||"Category"]}),e.jsx("button",{type:"button",onClick:()=>{At({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),at(!1),se({...fe,parent:""}),Ft([]),p(null)},className:"px-3 py-1 text-sm bg-green-100 text-green-800 rounded-lg hover:bg-green-200 transition-colors",children:"Cancel"})]}),$t&&(!_e.parent||_e.parent==="pending")&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Step 1: Select Parent Subcategory"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ca,{label:"Select Type",value:_e.type||"",onChange:c=>{At({..._e,type:c,category:"",parent:"pending"}),Ft([]),p(null)},options:[{value:"",label:"Select Type"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"})]}),_e.type&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ca,{id:"nested-subcategory-category",label:"Select Category",value:_e.category||"",onChange:async c=>{const g=c||"";if(At({..._e,category:g,parent:"pending"}),g){Vs(!0);try{const N=await fetch(`${Ae}/subcategories/category/${g}?includeChildren=true`);if(N.ok){const S=await N.json(),E=(V,H=0)=>{let Y=[];return V.forEach(ee=>{Y.push({...ee,_displayLevel:H}),ee.children&&ee.children.length>0&&(Y=Y.concat(E(ee.children,H+1)))}),Y},z=E(Array.isArray(S)?S:(S==null?void 0:S.data)||[]);Ft(z||[])}else Ft([])}catch(N){console.error("Error fetching parent subcategories:",N),Ft([])}finally{Vs(!1)}}else Ft([])},options:[{value:"",label:"Select Category"},...qe.filter(c=>c.type===_e.type).sort((c,g)=>(c.sortOrder||0)-(g.sortOrder||0)).map(c=>{const g=c.type==="Digital"?"Digital Print":"Bulk Print";return{value:c._id,label:`${c.name} (${g})`}})],className:"w-full"})]}),_e.category&&_e.category!==""&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory ",e.jsx("span",{className:"text-red-500",children:"*"})]}),As?e.jsxs("div",{className:"w-full px-4 py-2 border border-cream-300 rounded-lg bg-cream-50 flex items-center gap-2",children:[e.jsx(Qt,{className:"animate-spin",size:16}),e.jsx("span",{className:"text-sm text-cream-600",children:"Loading subcategories..."})]}):e.jsx(Ca,{id:"nested-subcategory-parent",label:"Select Subcategory (Parent for nested subcategory)",value:_e.parent==="pending"?"":_e.parent||"",onChange:async c=>{const g=c||"";if(g){const N=Xt.find(E=>E._id===g),S=N!=null&&N.category?typeof N.category=="object"&&N.category!==null?N.category._id:N.category:_e.category;At({..._e,parent:g,category:S||_e.category})}},options:[{value:"",label:"Select Subcategory"},...Xt.sort((c,g)=>(c.sortOrder||0)-(g.sortOrder||0)).map(c=>({value:c._id,label:`${"  ".repeat(c._displayLevel||0)}${c.name}${c._displayLevel>0?" (nested)":""}`}))],className:"w-full"}),Xt.length===0&&_e.category&&!As&&e.jsx("p",{className:"mt-2 text-xs text-red-600",children:"No subcategories found for this category. Please create a subcategory first."})]}),e.jsx("div",{className:"flex items-center justify-end gap-3 pt-2",children:e.jsx("button",{type:"button",onClick:()=>{Bs(!1),At({name:"",description:"",category:"",parent:"",type:"",slug:"",sortOrder:0,image:null}),Ft([]),p(null)},className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"})})]})]}),$t&&_e.parent&&_e.parent!=="pending"&&e.jsxs("div",{className:"mb-4 p-3 bg-purple-50 border border-purple-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-purple-800 font-medium",children:["Adding Nested Subcategory under: ",((ul=Xt.find(c=>c._id===_e.parent))==null?void 0:ul.name)||"Subcategory"]}),e.jsx("button",{type:"button",onClick:()=>{At({..._e,parent:"pending"})},className:"px-3 py-1 text-sm bg-purple-100 text-purple-800 rounded-lg hover:bg-purple-200 transition-colors",children:"Change Parent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"subcategory-name",name:"name",type:"text",required:!0,value:_e.name,onChange:c=>{const g=c.target.value;let N=_e.slug;if(!We){const S=g.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");S&&!g.endsWith(" ")?N=Tn(S,null,vs):N=S}At({..._e,name:g,slug:N}),p(null),me.name&&Ve({...me,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${me.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"Enter subcategory name",onBlur:()=>{if(!_e.name.trim())Ve({...me,name:"Subcategory name is required"});else if(!We){const c=_e.name.trim();if(c){const g=c.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");if(g){const N=Tn(g,null,vs);At({..._e,slug:N})}}}}}),me.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(bs,{size:12}),me.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description"}),e.jsx("textarea",{value:_e.description,onChange:c=>At({..._e,description:c.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),!$t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ca,{label:"Select Type",value:_e.type||"",onChange:c=>{At({..._e,type:c,category:_e.category==="pending"?"pending":""}),p(null)},options:[{value:"",label:"Select Type"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"}),u&&!_e.type&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Type is required to select parent category"})]}),_e.type&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Parent Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ca,{id:"subcategory-category",label:"Select Category",value:_e.category==="pending"?"":_e.category||"",onChange:c=>{At({..._e,category:c||""}),p(null),me.category&&Ve({...me,category:void 0})},options:[{value:"",label:"Select Category"},...qe.filter(c=>c.type===_e.type).sort((c,g)=>(c.sortOrder||0)-(g.sortOrder||0)).map(c=>{const g=c.type==="Digital"?"Digital Print":"Bulk Print";return{value:c._id,label:`${c.name} (${g})`}})],className:"w-full"}),u&&(!_e.category||_e.category==="pending")&&_e.type&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Parent category is required"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Slug (URL-friendly identifier)"}),e.jsx("input",{type:"text",value:_e.slug,onChange:c=>{at(!0),At({..._e,slug:c.target.value})},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"e.g., gloss-finish (auto-generated from name)"}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Auto-generated from subcategory name. You can customize it if needed."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",min:"0",value:_e.sortOrder,onChange:c=>{const g=parseInt(c.target.value,10)||0;At({..._e,sortOrder:g}),me.sortOrder&&Ve({...me,sortOrder:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${me.sortOrder?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"0"}),me.sortOrder?e.jsx("p",{className:"mt-1 text-xs text-red-600",children:me.sortOrder}):e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Lower numbers appear first. Sort order must be unique within the same parent category."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory Image ",vs&&e.jsx("span",{className:"text-xs text-cream-500",children:"(Leave empty to keep current image)"})]}),vs&&$s&&!_e.image&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-cream-700 mb-2",children:"Current Image:"}),e.jsx("img",{src:Wl($s),alt:"Current subcategory",className:"w-32 h-32 object-cover rounded-lg border border-cream-300",onError:c=>{const g=c.target;g.src="/Glossy.png"}})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:c=>{var g;At({..._e,image:((g=c.target.files)==null?void 0:g[0])||null}),p(null)},className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"}),_e.image&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm text-green-700 mb-2 font-medium flex items-center gap-1",children:[e.jsx(ga,{size:14}),"New Image Preview:"]}),e.jsx("img",{src:URL.createObjectURL(_e.image),alt:"New subcategory preview",className:"w-32 h-32 object-cover rounded-lg border-2 border-green-400",onError:c=>{const g=c.target;g.src="/Glossy.png"}}),e.jsxs("p",{className:"mt-2 text-xs text-green-600",children:[_e.image.name," (",(_e.image.size/1024).toFixed(2)," KB)"]})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:20}),vs?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[vs?e.jsx(Ai,{size:20}):e.jsx(Ls,{size:20}),vs?"Update Subcategory":"Create Subcategory"]})})]}),n==="orders"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Orders (",Es.length,")"]}),e.jsx("button",{onClick:ll,disabled:xs,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:xs?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:16}),"Loading..."]}):"Refresh"})]}),xs?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qt,{className:"animate-spin text-cream-600 mx-auto mb-4",size:48}),e.jsx("p",{className:"text-cream-600",children:"Loading orders..."})]}):Es.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-cream-200",children:[e.jsx(Qb,{size:48,className:"mx-auto mb-4 opacity-50 text-cream-400"}),e.jsx("p",{className:"text-cream-600",children:"No orders found."})]}):e.jsx("div",{className:"space-y-4",children:Es.map(c=>{var g,N,S,E,z,V,H,Y;return c.product?e.jsxs("div",{className:"bg-white rounded-lg border border-cream-200 p-4 sm:p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4 pb-4 border-b border-cream-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:((S=c.product)==null?void 0:S.image)||Yo,alt:((E=c.product)==null?void 0:E.name)||"Product",className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-lg border border-cream-200",onError:ee=>{const De=ee.target;De.src=Yo}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 text-lg",children:((z=c.product)==null?void 0:z.name)||"Unknown Product"}),e.jsxs("p",{className:"text-sm text-cream-600 font-semibold",children:["Order #",c.orderNumber]}),e.jsxs("p",{className:"text-xs text-cream-500 mt-1",children:[((V=c.user)==null?void 0:V.name)||"Unknown"," (",((H=c.user)==null?void 0:H.email)||"Unknown",")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`px-4 py-2 rounded-full border-2 flex items-center gap-2 ${c.status==="completed"?"bg-green-100 text-green-800 border-green-200":c.status==="processing"?"bg-blue-100 text-blue-800 border-blue-200":c.status==="approved"?"bg-purple-100 text-purple-800 border-purple-200":c.status==="production_ready"?"bg-orange-100 text-orange-800 border-orange-200":c.status==="request"?"bg-yellow-100 text-yellow-800 border-yellow-200":c.status==="rejected"?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:e.jsx("span",{className:"text-sm font-semibold capitalize",children:c.status})}),c.currentDepartment&&typeof c.currentDepartment=="object"&&e.jsxs("div",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg border border-indigo-200 flex items-center gap-2",children:[e.jsx(ki,{size:14}),e.jsxs("span",{className:"text-xs font-medium",children:["Current: ",c.currentDepartment.name,c.currentDepartmentIndex!==null&&c.currentDepartmentIndex!==void 0&&e.jsxs("span",{className:"ml-1 text-indigo-500",children:["(#",c.currentDepartmentIndex+1,")"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Quantity"}),e.jsxs("p",{className:"font-bold text-cream-900",children:[c.quantity," units"]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Finish"}),e.jsx("p",{className:"font-bold text-cream-900",children:c.finish})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Shape"}),e.jsx("p",{className:"font-bold text-cream-900",children:c.shape})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Total Price"}),e.jsxs("p",{className:"font-bold text-cream-900",children:["",c.totalPrice.toFixed(2)]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Mobile"}),e.jsx("p",{className:"font-bold text-cream-900 text-xs",children:c.mobileNumber||"N/A"})]})]}),c.selectedOptions&&c.selectedOptions.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-cream-600 mb-2",children:"Selected Options"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.selectedOptions.map((ee,De)=>e.jsx("span",{className:"px-2 py-1 bg-cream-100 text-cream-800 rounded text-xs",children:typeof ee=="string"?ee:ee.optionName},De))})]}),((Y=c.uploadedDesign)==null?void 0:Y.frontImage)&&e.jsxs("div",{className:"mb-4 p-3 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsxs("p",{className:"text-xs font-medium text-cream-700 mb-2 flex items-center gap-2",children:[e.jsx(bn,{size:14}),"Uploaded Front Design"]}),e.jsx("img",{src:c.uploadedDesign.frontImage.data||Yo,alt:"Front design",className:"w-full max-h-48 object-contain rounded border border-cream-300 bg-white",onError:ee=>{var yt;const De=ee.target;De.style.display="none";const Qe=document.createElement("div");Qe.className="w-full h-48 flex items-center justify-center bg-red-50 text-red-600 rounded border border-red-200 text-sm",Qe.textContent="Failed to load image",(yt=De.parentElement)==null||yt.appendChild(Qe)}})]}),c.notes&&e.jsxs("div",{className:"mb-4 p-2 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-1",children:"Customer Notes:"}),e.jsx("p",{className:"text-xs text-blue-900 line-clamp-2",children:c.notes})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>{Pe(c),He({status:c.status,deliveryDate:c.deliveryDate?new Date(c.deliveryDate).toISOString().split("T")[0]:"",adminNotes:c.adminNotes||""}),ht(!0)},className:"flex-1 px-4 py-2.5 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2 font-medium",children:[e.jsx(Er,{size:16}),c.status!=="cancelled"?"View & Manage":"View Details"]}),c.status==="request"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>ol(c._id,"production_ready"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Za,{size:16}),"Production Ready"]}),e.jsxs("button",{onClick:()=>Tc(c._id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx($l,{size:16}),"Reject"]})]}),c.status==="production_ready"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{type:"date",value:c.deliveryDate?new Date(c.deliveryDate).toISOString().split("T")[0]:"",onChange:ee=>{const De=ee.target.value;De&&ol(c._id,void 0,void 0,De)},className:"px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 text-sm",placeholder:"Delivery Date"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>ol(c._id,void 0,"start_production"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(lo,{size:16}),"Start"]}),e.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to cancel this order?")&&ol(c._id,"cancelled")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx($l,{size:16}),"Cancel"]})]})]})})]}),e.jsxs("div",{className:"text-xs text-cream-500 pt-2 border-t border-cream-100",children:["Ordered: ",r?new Date(c.createdAt).toLocaleString():"Loading...",c.deliveryDate&&e.jsxs("span",{className:"ml-4",children:["Delivery: ",r?new Date(c.deliveryDate).toLocaleDateString():"Loading..."]})]})]},c._id):e.jsx("div",{className:"bg-white rounded-lg border border-cream-200 p-4 sm:p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-200 rounded-lg border border-cream-200 flex items-center justify-center",children:e.jsx(ja,{size:24,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-cream-900 text-lg",children:"Product Not Found"}),e.jsxs("p",{className:"text-sm text-cream-600 font-semibold",children:["Order #",c.orderNumber]}),e.jsxs("p",{className:"text-xs text-cream-500 mt-1",children:[((g=c.user)==null?void 0:g.name)||"Unknown"," (",((N=c.user)==null?void 0:N.email)||"Unknown",")"]})]})]})},c._id)})})]}),n==="uploads"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Uploaded Images (",rt.length,")"]}),e.jsx("button",{onClick:()=>Ii(!1),disabled:pt,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:pt?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:16}),"Loading..."]}):"Refresh"})]}),pt?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qt,{className:"animate-spin text-cream-600 mx-auto mb-4",size:48}),e.jsx("p",{className:"text-cream-600",children:"Loading uploaded images..."})]}):rt.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(bn,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No uploaded images yet"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:rt.map(c=>e.jsxs("div",{className:"border border-cream-300 rounded-lg overflow-hidden hover:shadow-lg transition-shadow relative bg-white",children:[e.jsxs("div",{className:"cursor-pointer",onClick:()=>{Me(c),ve(!0)},children:[c.frontImage?e.jsxs("div",{className:"aspect-video bg-cream-100 relative group",children:[nt[`front-${c._id}`]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cream-100 z-10",children:e.jsx(Qt,{className:"animate-spin text-cream-600",size:24})}),e.jsx("img",{src:Wl(c.frontImage.data,c.frontImage.contentType)||Yo,alt:c.frontImage.filename,className:`w-full h-full object-cover ${nt[`front-${c._id}`]?"opacity-0":"opacity-100"} transition-opacity`,onLoad:()=>Wt(g=>({...g,[`front-${c._id}`]:!1})),onError:g=>{var E;Wt(z=>({...z,[`front-${c._id}`]:!1}));const N=g.target;N.style.display="none";const S=document.createElement("div");S.className="absolute inset-0 flex items-center justify-center bg-red-50 text-red-600 text-xs p-2",S.textContent="Failed to load image",(E=N.parentElement)==null||E.appendChild(S)},onLoadStart:()=>Wt(g=>({...g,[`front-${c._id}`]:!0}))}),e.jsx("button",{onClick:g=>{g.stopPropagation(),gs(c.frontImage.data,c.frontImage.filename||"image.jpg")},className:"absolute top-2 left-2 p-2 bg-cream-900/80 text-white rounded-lg hover:bg-cream-900 transition-colors opacity-0 group-hover:opacity-100 flex items-center gap-1 shadow-md z-20",title:"Download image",children:e.jsx(Wn,{size:14})})]}):e.jsx("div",{className:"aspect-video bg-cream-100 flex items-center justify-center",children:e.jsx("p",{className:"text-cream-400 text-sm",children:"No image"})}),e.jsxs("div",{className:"p-3 sm:p-4",children:[e.jsx("p",{className:"font-semibold text-sm sm:text-base text-cream-900 truncate",children:c.user.name}),e.jsx("p",{className:"text-xs sm:text-sm text-cream-600 truncate",children:c.user.email}),e.jsxs("p",{className:"text-xs text-cream-500 mt-2",children:[c.width,"  ",c.height,"px"]}),e.jsx("p",{className:"text-xs text-cream-500",children:r?new Date(c.createdAt).toLocaleDateString():"Loading..."})]})]}),e.jsx("button",{onClick:g=>{g.stopPropagation(),ia(c._id)},disabled:d,className:"absolute top-2 right-2 p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-1 shadow-md z-20",title:"Delete upload",children:d?e.jsx(Qt,{className:"animate-spin",size:14}):e.jsx(Gs,{size:16})})]},c._id))})]}),n==="manage-products"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900 mb-2",children:["Products (",Kt.length,")"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1 sm:max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(di,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-cream-500",size:18}),e.jsx("input",{type:"text",placeholder:"Search products by name, description, or subcategory...",value:es,onChange:c=>is(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 text-sm"}),es&&e.jsx("button",{onClick:()=>is(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-cream-500 hover:text-cream-700",children:e.jsx(as,{size:16})})]})}),e.jsx("div",{className:"flex-1 sm:max-w-xs",children:e.jsx(Ca,{label:"Filter by Category",value:ps||"",onChange:c=>au(c),options:[{value:"",label:"All Products"},...qe.map(c=>{const g=(E,z=[])=>{if(!E.parent)return[E.name,...z];const V=qe.find(H=>H._id===(typeof E.parent=="object"&&E.parent!==null?E.parent._id:E.parent));return V?g(V,[E.name,...z]):[E.name,...z]},S=g(c).join(" > ");return{value:c._id,label:`${S} (${c.type})`}})],className:"w-full"})}),(ps||es)&&e.jsxs("button",{onClick:async()=>{Ks(""),is(""),await Or()},className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2 whitespace-nowrap",children:[e.jsx(as,{size:16}),"Clear Filters"]})]})]}),e.jsxs("button",{onClick:async()=>{Ks(""),is(""),await Or()},className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors whitespace-nowrap flex items-center gap-2",children:[e.jsx(ja,{size:16}),"Refresh"]})]}),gr||Ka?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Qt,{className:"animate-spin text-cream-600 mb-4",size:32}),e.jsx("p",{className:"text-cream-600",children:gr?"Loading products...":"Filtering products..."})]}):Kt.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(ja,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:ps||es?"No products found matching your filters":"No products yet"})]}):e.jsx("div",{className:"space-y-4",children:Kt.map(c=>{let g="No Category",N="",S="";if(c.subcategory){const z=c.subcategory&&typeof c.subcategory=="object"?c.subcategory._id:c.subcategory,V=pa.find(H=>H._id===z);if(V){N=V.name||"";const H=typeof V.category=="object"&&V.category!==null?V.category._id:V.category;if(H){const Y=qe.find(ee=>{const De=typeof H=="string"?H:typeof H=="object"&&(H!=null&&H._id)?H._id:"";return ee._id===De});Y&&(g=Y.name||"No Category",S=Y.type||"")}}else if(c.subcategory&&typeof c.subcategory=="object"&&c.subcategory.name&&(N=c.subcategory.name,c.subcategory&&typeof c.subcategory=="object"&&c.subcategory.category)){const H=c.subcategory.category,Y=H&&typeof H=="object"&&"_id"in H?H:typeof H=="string"?qe.find(ee=>ee._id===H):null;Y&&typeof Y=="object"&&"_id"in Y&&(g=Y.name||"No Category",S=("type"in Y&&typeof Y.type=="string"?Y.type:"")||"")}}else if(c.category){const z=c.category&&typeof c.category=="object"?c.category._id:typeof c.category=="string"?c.category:"",V=qe.find(H=>H._id===String(z));V?(g=V.name||"No Category",S=V.type||""):c.category&&typeof c.category=="object"&&"_id"in c.category&&"name"in c.category&&(g=c.category.name||"No Category",S=("type"in c.category&&typeof c.category.type=="string"?c.category.type:"")||"")}const E=N?`${g} > ${N}`:`${g} (Direct)`;return e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 flex items-center justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-cream-900",children:c.name}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Category: ",E]}),S&&e.jsxs("p",{className:"text-xs text-cream-500",children:["Type: ",S]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>fn(c._id),disabled:d,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Ai,{size:18}),"Edit"]}),e.jsxs("button",{onClick:()=>Zl(c._id),disabled:d,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Gs,{size:18}),"Delete"]})]})]},c._id)})})]}),n==="manage-categories"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Categories (",xt.length," of ",qe.length,")"]}),e.jsx("button",{onClick:ba,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Refresh"})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search categories by name, description, or type...",value:Qs,onChange:c=>Js(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"}),Qs&&e.jsx("button",{onClick:()=>Js(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cream-500 hover:text-cream-700",children:e.jsx(as,{size:18})})]}),e.jsx("div",{className:"sm:w-48",children:e.jsx(Ca,{label:"Filter by Type",value:Ms,onChange:c=>ra(c),options:[{value:"all",label:"All Types"},{value:"Digital",label:"Digital"},{value:"Bulk",label:"Bulk"}],className:"w-full"})}),e.jsx("div",{className:"sm:w-48",children:e.jsx(Ca,{label:"Filter by Level",value:Pa,onChange:c=>Ja(c),options:[{value:"all",label:Ms!=="all"?`All ${Ms} Categories`:"All Categories"},{value:"top-level",label:Ms!=="all"?`Top-Level ${Ms}`:"Top-Level Only"},{value:"subcategories",label:Ms!=="all"?`${Ms} Subcategories`:"Subcategories Only"}],className:"w-full"})})]}),(Qs||Ms!=="all"||Pa!=="all")&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-cream-600",children:"Active filters:"}),Qs&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-sm flex items-center gap-2",children:['Search: "',Qs,'"',e.jsx("button",{onClick:()=>Js(""),className:"hover:text-red-600",children:e.jsx(as,{size:14})})]}),Ms!=="all"&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-sm flex items-center gap-2",children:["Type: ",Ms,e.jsx("button",{onClick:()=>ra("all"),className:"hover:text-red-600",children:e.jsx(as,{size:14})})]}),Pa!=="all"&&e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-900 rounded-full text-sm flex items-center gap-2",children:["Level: ",Pa==="top-level"?"Top-Level":"Subcategories",e.jsx("button",{onClick:()=>Ja("all"),className:"hover:text-red-600",children:e.jsx(as,{size:14})})]}),e.jsx("button",{onClick:()=>{Js(""),ra("all"),Ja("all")},className:"text-sm text-cream-600 hover:text-cream-900 underline",children:"Clear all filters"})]})]}),qe.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(Tp,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No categories yet"})]}):xt.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(di,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No categories match your search criteria"}),e.jsx("button",{onClick:()=>{Js(""),ra("all"),Ja("all")},className:"mt-4 text-cream-900 hover:underline",children:"Clear filters"})]}):e.jsxs("div",{ref:Dt,className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 scroll-smooth",style:{scrollBehavior:"auto"},onDragOver:c=>{c.preventDefault(),X&&Ql(c,Dt.current)},onDragEnter:c=>{c.preventDefault(),X&&Ql(c,Dt.current)},onDragLeave:c=>{var N;const g=c.relatedTarget;!((N=Dt.current)!=null&&N.contains(g))&&g!==Dt.current&&Xr()},children:[e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 font-medium flex items-center gap-2",children:[e.jsx(hr,{size:16})," Drag and drop categories to reorder them. Changes will be saved after confirmation."]})}),xt.map((c,g)=>{const N=c.displayLevel||0,S=c.isSubcategory||N>0;let E="";if(S){const z=c.parent||(c.category&&typeof c.category=="object"?c.category._id:c.category);if(z){const V=qe.find(H=>H._id===z);E=V?V.name:"Unknown"}}return e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{draggable:!0,onDragStart:z=>{he(c._id),z.dataTransfer.effectAllowed="move",z.dataTransfer.setData("text/plain",c._id)},onDragOver:z=>{z.preventDefault(),z.stopPropagation(),z.dataTransfer.dropEffect="move";const V=z.currentTarget;X!==c._id&&(V.style.opacity="0.5"),X&&Ql(z,Dt.current)},onDragLeave:z=>{z.currentTarget.style.opacity="1"},onDrop:z=>{z.preventDefault(),z.currentTarget.style.opacity="1";const V=z.dataTransfer.getData("text/plain");if(V&&V!==c._id){const H=xt.find(Qe=>Qe._id===V),Y=c,ee=H&&(H.isSubcategory||H.displayLevel>0),De=Y.isSubcategory||Y.displayLevel>0;if(ee||De){wc(V,c._id);return}Nc(V,c._id)}},onDragEnd:z=>{z.currentTarget.style.opacity="1",Xr(),setTimeout(()=>{he(null)},100)},className:`border border-cream-300 rounded-lg p-4 flex items-center justify-between hover:shadow-md transition-shadow cursor-move ${X===c._id?"opacity-50":""} ${N>0?"bg-cream-50":"bg-white"}`,style:{marginLeft:`${N*24}px`},onClick:z=>{X||nl(c._id)},children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[N>0&&e.jsx("div",{className:"flex items-center",children:e.jsx(sr,{size:16,className:"text-cream-400"})}),e.jsx("div",{className:"cursor-move text-cream-400 hover:text-cream-600",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M7 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 2zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 14zm6-8a2 2 0 1 1-.001-4.001A2 2 0 0 1 13 6zm0 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 14z"})})}),e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-cream-900",children:c.name}),S&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Subcategory"}),!S&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Top-level"}),zs===c._id&&e.jsxs("span",{className:"text-xs bg-cream-200 text-cream-900 px-2 py-1 rounded-full",children:[ea.length," child categor",ea.length===1?"y":"ies"]})]}),S&&E&&e.jsxs("p",{className:"text-xs text-cream-500 mt-1",children:["Parent: ",E]}),e.jsxs("p",{className:"text-xs text-cream-500",children:["Type: ",c.type," | Sort Order: ",c.sortOrder||0]}),c.slug&&e.jsxs("p",{className:"text-xs text-cream-500",children:["Slug: ",c.slug]}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Click to view products | Drag handle to reorder"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:z=>{z.stopPropagation(),ui({isOpen:!0,type:"category",name:c.name,description:c.description||"No description available."})},disabled:d,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Er,{size:18}),"View"]}),S?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:z=>{z.stopPropagation(),Vi(c._id)},disabled:d,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Ai,{size:18}),"Edit"]}),e.jsxs("button",{onClick:z=>{z.stopPropagation(),ti(c._id)},disabled:d,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Gs,{size:18}),"Delete"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:z=>{z.stopPropagation(),cl(c._id)},disabled:d,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Ai,{size:18}),"Edit"]}),e.jsxs("button",{onClick:z=>{z.stopPropagation(),Bi(c._id)},disabled:d,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Gs,{size:18}),"Delete"]})]})]})]})},c._id)}),zs&&(()=>{var g,N;const c=qe.find(S=>S._id===zs);return c?e.jsxs("div",{className:"mt-6 space-y-3 border-t-2 border-cream-300 pt-6 bg-cream-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cream-900",children:["Products in: ",c.name]}),e.jsx("button",{onClick:()=>Yt(null),className:"text-cream-600 hover:text-cream-900",children:e.jsx(as,{size:20})})]}),e.jsxs("div",{className:"mb-4 flex gap-3",children:[e.jsxs("button",{onClick:S=>{S.stopPropagation(),hs?cn(zs,hs):cn(zs)},className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:18}),hs?`Add Product to ${((g=ea.find(S=>S._id===hs))==null?void 0:g.name)||"Subcategory"}`:"Add Product to this Category"]}),!hs&&e.jsxs("button",{onClick:S=>{S.stopPropagation(),Dn(zs||"")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:18}),"Add Subcategory to this Category"]})]}),hs&&e.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-blue-800 font-medium",children:["Showing products from: ",((N=ea.find(S=>S._id===hs))==null?void 0:N.name)||"Subcategory"]}),e.jsx("button",{onClick:S=>{S.stopPropagation(),Oa(null),nl(zs||"")},className:"mt-1 text-xs text-blue-600 hover:text-blue-800 underline",children:"Show all products from category and subcategories"})]}),e.jsxs("button",{onClick:S=>{S.stopPropagation(),zs&&hs&&cn(zs,hs)},className:"px-3 py-1.5 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1",children:[e.jsx(Ls,{size:14}),"Add Product to this Subcategory"]})]})}),Fe?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Qt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-2 text-cream-600",children:"Loading products..."})]}):pi.length===0?e.jsx("div",{className:"text-center py-4 text-cream-600 text-sm bg-white rounded-lg",children:ea.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No products found directly in this category"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:hs?"No products found in this subcategory. Click 'Add Product to this Category' to create one.":"Click on a subcategory above to view its products, or click 'Add Product to this Category' to add products directly to this category."})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No products found in this category"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:'Click "Add Product to this Category" to create one'})]})}):e.jsx("div",{className:"space-y-2",children:pi.map(S=>e.jsxs("div",{className:"border border-cream-200 rounded-lg p-3 bg-white hover:shadow-sm transition-shadow flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[S.image&&S.image.trim()!==""&&e.jsx("img",{src:S.image,alt:S.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-cream-900 text-sm",children:S.name}),e.jsx("p",{className:"text-xs text-cream-600 line-clamp-1",children:S.description||"No description"})]})]}),e.jsxs("button",{onClick:E=>{E.stopPropagation(),fn(S._id)},className:"px-3 py-1.5 text-xs bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-1",children:[e.jsx(Ai,{size:14}),"Edit"]})]},S._id))}),ea.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200",children:[e.jsxs("p",{className:"text-xs text-cream-500 mb-2 font-medium",children:["Subcategories (",ea.length,") - Drag to reorder, click to view products:"]}),e.jsxs("div",{className:"space-y-2",children:[(()=>{const S=(E,z=0)=>{const V=E.children&&E.children.length>0;return e.jsxs("div",{children:[e.jsx("div",{draggable:!0,onDragStart:H=>{tt(E._id),H.dataTransfer.effectAllowed="move",H.dataTransfer.setData("text/plain",E._id)},onDragOver:H=>{H.preventDefault(),H.stopPropagation(),H.dataTransfer.dropEffect="move";const Y=H.currentTarget;Ee&&Ee!==E._id&&(Y.style.opacity="0.5",Y.style.borderColor="#d97706")},onDragEnter:H=>{H.preventDefault(),H.stopPropagation(),Ee&&Ee!==E._id&&(H.currentTarget.style.borderColor="#d97706")},onDragLeave:H=>{H.currentTarget.style.opacity="1",H.currentTarget.style.borderColor=""},onDrop:H=>{H.preventDefault(),H.stopPropagation(),H.currentTarget.style.opacity="1",H.currentTarget.style.borderColor="";const Y=H.dataTransfer.getData("text/plain");Y&&Y!==E._id&&wc(Y,E._id)},onDragEnd:H=>{H.currentTarget.style.opacity="1",tt(null)},className:`text-sm pl-3 py-2 rounded-lg border transition-colors cursor-move ${hs===E._id?"bg-cream-200 border-cream-400 text-cream-900 font-medium":"bg-white border-cream-200 text-cream-700 hover:bg-cream-100 hover:border-cream-300"} ${Ee===E._id?"opacity-50":""}`,style:{marginLeft:`${z*20}px`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"cursor-move text-cream-400 hover:text-cream-600",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M7 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 2zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 14zm6-8a2 2 0 1 1-.001-4.001A2 2 0 0 1 13 6zm0 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 8zm0 6a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 14z"})})}),e.jsxs("div",{onClick:H=>kn(E._id,H),className:"flex items-center gap-2 flex-1 cursor-pointer",children:[e.jsx(sr,{size:14,className:`transition-transform ${hs===E._id?"rotate-90":""}`}),e.jsx("span",{children:E.name}),z>0&&e.jsx("span",{className:"text-xs text-purple-600 font-medium",children:"(nested)"}),E.sortOrder!==void 0&&E.sortOrder!==null&&e.jsxs("span",{className:"text-xs text-cream-500",children:["(Order: ",E.sortOrder,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[hs===E._id&&e.jsxs("span",{className:"text-xs text-cream-600 mr-2",children:[pi.length," product",pi.length!==1?"s":""]}),e.jsx("button",{onClick:H=>{H.stopPropagation(),ui({isOpen:!0,type:"subcategory",name:E.name,description:E.description||"No description available."})},disabled:d,className:"px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors disabled:opacity-50 flex items-center gap-1",title:"View Description",children:e.jsx(Er,{size:14})}),e.jsx("button",{onClick:async H=>{H.stopPropagation(),H.preventDefault();try{await Vi(E._id)}catch(Y){console.error("Error editing subcategory:",Y),p("Failed to load subcategory for editing")}},disabled:d,className:"px-2 py-1 bg-cream-200 text-cream-900 rounded hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-1",title:"Edit Subcategory",children:e.jsx(Ai,{size:14})}),e.jsx("button",{onClick:H=>{H.stopPropagation(),ti(E._id)},disabled:d,className:"px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-1",title:"Delete Subcategory",children:e.jsx(Gs,{size:14})})]})]})}),V&&e.jsx("div",{className:"mt-1",children:E.children.sort((H,Y)=>(H.sortOrder||0)-(Y.sortOrder||0)).map(H=>S(H,z+1))})]},E._id)};return ea.sort((E,z)=>(E.sortOrder||0)-(z.sortOrder||0)).map(E=>S(E,0))})(),!1]})]})]}):null})()]})]}),n==="attribute-types"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:zi?"Edit Attribute Type":"Create Attribute Type"}),e.jsxs("form",{onSubmit:mn,className:"space-y-6 bg-white p-6 rounded-lg border border-cream-200",children:[u&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:u})}),b&&e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 font-medium",children:b})}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Name * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(What customers will see)"})]}),e.jsx("input",{type:"text",id:"attribute-name",value:Z.attributeName,onChange:c=>{mt({...Z,attributeName:c.target.value}),O.attributeName&&k({...O,attributeName:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${O.attributeName?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Printing Option, Paper Type",required:!0}),O.attributeName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:O.attributeName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["How Customers Select This * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Input method)"})]}),e.jsxs("select",{id:"attribute-inputStyle",value:Z.inputStyle,onChange:c=>{mt({...Z,inputStyle:c.target.value}),O.inputStyle&&k({...O,inputStyle:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${O.inputStyle?"border-red-300 bg-red-50":"border-cream-300"}`,required:!0,children:[e.jsx("option",{value:"DROPDOWN",children:"Dropdown Menu"}),e.jsx("option",{value:"POPUP",children:"Pop-Up"}),e.jsx("option",{value:"RADIO",children:"Radio Buttons"}),e.jsx("option",{value:"CHECKBOX",children:"Checkbox"}),e.jsx("option",{value:"TEXT_FIELD",children:"Text Field"}),e.jsx("option",{value:"NUMBER",children:"Number Input"}),e.jsx("option",{value:"FILE_UPLOAD",children:"File Upload"})]}),O.inputStyle&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:O.inputStyle})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Attribute Image ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(to be shown when selecting this attribute)"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:c=>{var N;const g=((N=c.target.files)==null?void 0:N[0])||null;if(g){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(g.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image."),c.target.value="",mt({...Z,attributeImage:null});return}const E=5*1024*1024;if(g.size>E){p("Image size must be less than 5MB. Please compress the image and try again."),c.target.value="",mt({...Z,attributeImage:null});return}p(null)}mt({...Z,attributeImage:g})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent"}),Z.attributeImage&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:URL.createObjectURL(Z.attributeImage),alt:"Attribute preview",className:"w-32 h-32 object-cover rounded-lg border border-cream-300"}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[Z.attributeImage.name," (",(Z.attributeImage.size/1024).toFixed(2)," KB)"]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["What This Affects * ",e.jsx("span",{className:"text-xs text-cream-500 font-normal",children:"(Description of impact on product)"})]}),e.jsx("textarea",{id:"attribute-primaryEffectType",value:Z.effectDescription,onChange:c=>{mt({...Z,effectDescription:c.target.value}),O.primaryEffectType&&k({...O,primaryEffectType:void 0})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cream-900 focus:border-transparent ${O.primaryEffectType?"border-red-300 bg-red-50":"border-cream-300"}`,rows:3,placeholder:"e.g., Changes the product price, Requires customer to upload a file, Creates different product versions, Just displays information",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-cream-600",children:"Describe how this attribute affects the product or customer experience"}),O.primaryEffectType&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:O.primaryEffectType})]})]}),Z.inputStyle==="DROPDOWN"||Z.inputStyle==="RADIO"||Z.isPriceEffect?e.jsxs("div",{className:"border-b border-cream-200 pb-4","data-attribute-options-table":!0,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900",children:"Options"}),e.jsxs("button",{type:"button",onClick:()=>{mt({...Z,attributeOptionsTable:[...Z.attributeOptionsTable,{name:"",priceImpactPer1000:"",image:void 0,optionUsage:{price:!1,image:!1,listing:!1},priceImpact:"",numberOfImagesRequired:0,listingFilters:""}]})},className:"px-3 py-1 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add Option"]})]}),e.jsx("div",{className:"border border-cream-300 rounded-lg overflow-hidden bg-white",children:Z.attributeOptionsTable.length===0?e.jsx("p",{className:"text-sm text-cream-600 text-center py-4",children:'No options added. Click "Add Option" to start.'}):e.jsxs("div",{className:"overflow-x-auto",children:[O.attributeValues&&e.jsx("div",{className:"mb-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:O.attributeValues})}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100",children:[e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Name *"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Option Usage *"}),Z.attributeOptionsTable.some(c=>{var g;return(g=c.optionUsage)==null?void 0:g.price})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Price Impact"}),Z.attributeOptionsTable.some(c=>{var g;return(g=c.optionUsage)==null?void 0:g.image})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Number of Images Required"}),Z.attributeOptionsTable.some(c=>{var g;return(g=c.optionUsage)==null?void 0:g.listing})&&e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Listing Filters"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-left text-sm font-medium text-cream-900",children:"Image (Optional)"}),e.jsx("th",{className:"border border-cream-300 px-3 py-2 text-center text-sm font-medium text-cream-900 w-20",children:"Action"})]})}),e.jsx("tbody",{children:(Z.attributeOptionsTable||[]).map((c,g)=>{var N,S,E,z,V,H;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsx("input",{type:"text",value:c.name,onChange:Y=>{const ee=[...Z.attributeOptionsTable];ee[g].name=Y.target.value,mt({...Z,attributeOptionsTable:ee})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"e.g., Both Sides, Express Delivery",required:!0})}),e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((N=c.optionUsage)==null?void 0:N.price)||!1,onChange:Y=>{const ee=[...Z.attributeOptionsTable];if(ee[g].optionUsage||(ee[g].optionUsage={price:!1,image:!1,listing:!1}),ee[g].optionUsage.price=Y.target.checked,!Y.target.checked&&!ee[g].optionUsage.image&&!ee[g].optionUsage.listing){p("At least one option usage must be selected (Price, Image, or Listing)");return}mt({...Z,attributeOptionsTable:ee}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Price"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((S=c.optionUsage)==null?void 0:S.image)||!1,onChange:Y=>{const ee=[...Z.attributeOptionsTable];if(ee[g].optionUsage||(ee[g].optionUsage={price:!1,image:!1,listing:!1}),ee[g].optionUsage.image=Y.target.checked,!Y.target.checked&&!ee[g].optionUsage.price&&!ee[g].optionUsage.listing){p("At least one option usage must be selected (Price, Image, or Listing)");return}mt({...Z,attributeOptionsTable:ee}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Image"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((E=c.optionUsage)==null?void 0:E.listing)||!1,onChange:Y=>{const ee=[...Z.attributeOptionsTable];if(ee[g].optionUsage||(ee[g].optionUsage={price:!1,image:!1,listing:!1}),ee[g].optionUsage.listing=Y.target.checked,!Y.target.checked&&!ee[g].optionUsage.price&&!ee[g].optionUsage.image){p("At least one option usage must be selected (Price, Image, or Listing)");return}mt({...Z,attributeOptionsTable:ee}),p(null)},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm text-cream-900",children:"Listing"})]})]})}),Z.attributeOptionsTable.some(Y=>{var ee;return(ee=Y.optionUsage)==null?void 0:ee.price})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(z=c.optionUsage)!=null&&z.price?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-cream-700",children:""}),e.jsx("input",{type:"number",value:c.priceImpact||"",onChange:Y=>{const ee=[...Z.attributeOptionsTable];ee[g].priceImpact=Y.target.value,mt({...Z,attributeOptionsTable:ee})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter amount",step:"0.01",min:"0"})]}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),Z.attributeOptionsTable.some(Y=>{var ee;return(ee=Y.optionUsage)==null?void 0:ee.image})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(V=c.optionUsage)!=null&&V.image?e.jsx("input",{type:"number",value:c.numberOfImagesRequired||0,onChange:Y=>{const ee=[...Z.attributeOptionsTable];ee[g].numberOfImagesRequired=parseInt(Y.target.value)||0,mt({...Z,attributeOptionsTable:ee})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Number of images",min:"0"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),Z.attributeOptionsTable.some(Y=>{var ee;return(ee=Y.optionUsage)==null?void 0:ee.listing})&&e.jsx("td",{className:"border border-cream-300 px-3 py-2",children:(H=c.optionUsage)!=null&&H.listing?e.jsx("input",{type:"text",value:c.listingFilters||"",onChange:Y=>{const ee=[...Z.attributeOptionsTable];ee[g].listingFilters=Y.target.value,mt({...Z,attributeOptionsTable:ee})},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm",placeholder:"Enter filters (comma-separated)"}):e.jsx("span",{className:"text-sm text-cream-500",children:"-"})}),e.jsxs("td",{className:"border border-cream-300 px-3 py-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:async Y=>{var De;const ee=(De=Y.target.files)==null?void 0:De[0];if(ee){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(ee.type)){p("Invalid image format. Please upload JPG, PNG, or WebP image.");return}if(ee.size>5*1024*1024){p("Image size must be less than 5MB.");return}try{m(!0);const yt=new FormData;yt.append("image",ee);const Ut=await fetch(`${Ae}/upload-image`,{method:"POST",headers:Ct(),body:yt});if(!Ut.ok){const Bt=await Ut.json().catch(()=>({}));throw new Error(Bt.error||"Failed to upload image")}const St=await Ut.json(),Nt=St.url||St.secure_url;if(!Nt)throw new Error("No image URL returned from server");const jt=[...Z.attributeOptionsTable];jt[g].image=Nt,mt({...Z,attributeOptionsTable:jt}),p(null)}catch(yt){console.error("Error uploading image:",yt),p(yt instanceof Error?yt.message:"Failed to upload image. Please try again.")}finally{m(!1)}}},className:"w-full px-2 py-2.5 border border-cream-200 rounded text-sm"}),c.image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-16 object-cover rounded border border-cream-200"}),e.jsx("button",{type:"button",onClick:()=>{const Y=[...Z.attributeOptionsTable];Y[g].image=void 0,mt({...Z,attributeOptionsTable:Y})},className:"mt-1 text-xs text-red-600 hover:text-red-800",children:"Remove"})]})]}),e.jsx("td",{className:"border border-cream-300 px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>{const Y=Z.attributeOptionsTable.filter((ee,De)=>De!==g);mt({...Z,attributeOptionsTable:Y})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})})]},g)})})]})]})}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Add all options customers can choose from. If "Is Price Effect" is checked, enter the price impact per 1000 units for each option.'})]}):null,e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Additional Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isPriceEffect,onChange:c=>mt({...Z,isPriceEffect:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Price Effect?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if selecting this attribute changes the product price"}),Z.isPriceEffect&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Price Effect Amount ( per 1000 units) *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg text-cream-700",children:""}),e.jsx("input",{type:"number",value:Z.priceEffectAmount,onChange:c=>mt({...Z,priceEffectAmount:c.target.value}),className:"flex-1 px-3 py-2 border border-cream-300 rounded-lg",placeholder:"e.g., 20 (means +20 per 1000 units)",step:"0.00001",min:"0",required:Z.isPriceEffect}),e.jsx("span",{className:"text-sm text-cream-600",children:"per 1000 units"})]}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:'Enter how much the price changes per 1000 units. Example: "20" means +20 for every 1000 units.'})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isStepQuantity,onChange:c=>mt({...Z,isStepQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Step Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific steps (e.g., 1000, 2000, 3000 only)"}),Z.isStepQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Steps:"}),e.jsxs("button",{type:"button",onClick:()=>{mt({...Z,stepQuantities:[...Z.stepQuantities,{quantity:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Ls,{size:14}),"Add Step"]})]}),Z.stepQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No steps added. Click "Add Step" to start.'}):e.jsx("div",{className:"space-y-2",children:Z.stepQuantities.map((c,g)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Step - ",g+1,":"]}),e.jsx("input",{type:"number",value:c.quantity,onChange:N=>{const S=[...Z.stepQuantities];S[g].quantity=N.target.value,mt({...Z,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"quantity of step",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...Z.stepQuantities];S[g].price=N.target.value,mt({...Z,stepQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of step",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=Z.stepQuantities.filter((S,E)=>E!==g);mt({...Z,stepQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})]},g))})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isRangeQuantity,onChange:c=>mt({...Z,isRangeQuantity:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Is Range Quantity?"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute restricts quantity to specific Range (e.g., 1000-2000, 2000-5000)"}),Z.isRangeQuantity&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-cream-900",children:"Ranges:"}),e.jsxs("button",{type:"button",onClick:()=>{mt({...Z,rangeQuantities:[...Z.rangeQuantities,{min:"",max:"",price:""}]})},className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1",children:[e.jsx(Ls,{size:14}),"Add Range"]})]}),Z.rangeQuantities.length===0?e.jsx("p",{className:"text-xs text-cream-600",children:'No ranges added. Click "Add Range" to start.'}):e.jsx("div",{className:"space-y-2",children:Z.rangeQuantities.map((c,g)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border border-cream-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:["Range - ",g+1,":"]}),e.jsx("input",{type:"number",value:c.min,onChange:N=>{const S=[...Z.rangeQuantities];S[g].min=N.target.value,mt({...Z,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"min quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700",children:"-"}),e.jsx("input",{type:"number",value:c.max,onChange:N=>{const S=[...Z.rangeQuantities];S[g].max=N.target.value,mt({...Z,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"max quantity",min:"0",step:"100"}),e.jsx("span",{className:"text-sm text-cream-700 whitespace-nowrap",children:"Price:"}),e.jsx("input",{type:"number",value:c.price,onChange:N=>{const S=[...Z.rangeQuantities];S[g].price=N.target.value,mt({...Z,rangeQuantities:S})},className:"flex-1 px-2 py-1 border border-cream-300 rounded text-sm",placeholder:"price of range",min:"0",step:"0.01"}),e.jsx("button",{type:"button",onClick:()=>{const N=Z.rangeQuantities.filter((S,E)=>E!==g);mt({...Z,rangeQuantities:N})},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})]},g))})]})]})]})]})]}),Z.primaryEffectType==="FILE"&&e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"File Requirements"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"File Requirements Description"}),e.jsx("textarea",{value:Z.fileRequirements,onChange:c=>mt({...Z,fileRequirements:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg",rows:3,placeholder:"e.g., Upload your design file (JPG, PNG, PDF). Minimum 300 DPI recommended."}),e.jsx("p",{className:"mt-2 text-xs text-cream-600",children:"Describe what type of file customers need to upload and any requirements (format, size, resolution, etc.)"})]})]}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isFilterable,onChange:c=>mt({...Z,isFilterable:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Allow Filtering"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers can filter products by this attribute (e.g., filter by color, size, etc.)"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isRequired,onChange:c=>mt({...Z,isRequired:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Required Selection"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if customers must select an option before they can place an order"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx("input",{type:"checkbox",checked:Z.isCommonAttribute,onChange:c=>mt({...Z,isCommonAttribute:c.target.checked}),className:"w-5 h-5 text-cream-900 border-cream-300 rounded focus:ring-cream-900 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-cream-900 cursor-pointer",children:"Available for All Products"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Check this if this attribute can be used with any product. Uncheck to restrict to specific categories/subcategories."})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Saving...":zi?"Update Attribute Type":"Create Attribute Type"}),zi&&e.jsx("button",{type:"button",onClick:()=>{sl(null),mt({attributeName:"",inputStyle:"DROPDOWN",attributeImage:null,effectDescription:"",simpleOptions:"",isPriceEffect:!1,isStepQuantity:!1,isRangeQuantity:!1,isFixedQuantity:!1,priceEffectAmount:"",stepQuantities:[],rangeQuantities:[],fixedQuantityMin:"",fixedQuantityMax:"",primaryEffectType:"INFORMATIONAL",priceImpactPer1000:"",fileRequirements:"",attributeOptionsTable:[],functionType:"GENERAL",isPricingAttribute:!1,isFixedQuantityNeeded:!1,isFilterable:!1,attributeValues:[],defaultValue:"",isRequired:!1,displayOrder:0,isCommonAttribute:!0,applicableCategories:[],applicableSubCategories:[],parentAttribute:"",showWhenParentValue:[],hideWhenParentValue:[]})},className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-cream-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900",children:"All Attribute Types"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:Ba,onChange:c=>sn(c.target.value),placeholder:"Search attribute types...",className:"pl-10 pr-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 w-64"}),e.jsx(di,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cream-500"})]}),e.jsx("div",{className:"text-sm text-cream-600",children:`${wt.filter(g=>{var N,S,E;return!Ba||((N=g.attributeName)==null?void 0:N.toLowerCase().includes(Ba.toLowerCase()))||((S=g.inputStyle)==null?void 0:S.toLowerCase().includes(Ba.toLowerCase()))||((E=g.primaryEffectType)==null?void 0:E.toLowerCase().includes(Ba.toLowerCase()))}).length} of ${wt.length}`})]})]}),Dr?e.jsx("div",{className:"text-center py-8",children:e.jsx(Qt,{className:"animate-spin text-cream-900 mx-auto",size:32})}):wt.length===0?e.jsx("div",{className:"text-center py-8 bg-cream-50 rounded-lg border border-cream-200",children:e.jsx("p",{className:"text-cream-600",children:"No attribute types found. Create one above."})}):e.jsx("div",{className:"bg-white rounded-lg border border-cream-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-cream-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Input Style"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Effect Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Pricing"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Common"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-cream-200",children:wt.filter(c=>{var g,N,S;return!Ba||((g=c.attributeName)==null?void 0:g.toLowerCase().includes(Ba.toLowerCase()))||((N=c.inputStyle)==null?void 0:N.toLowerCase().includes(Ba.toLowerCase()))||((S=c.primaryEffectType)==null?void 0:S.toLowerCase().includes(Ba.toLowerCase()))}).map(c=>e.jsxs("tr",{className:"hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900",children:c.attributeName}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.inputStyle}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.primaryEffectType}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.isPricingAttribute?"Yes":"No"}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.isCommonAttribute?"Yes":"No"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>nu(c._id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:e.jsx(Ai,{size:16})}),e.jsx("button",{onClick:()=>So(c._id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})]})})]},c._id))})]})})})]})]}),n==="departments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:Ui?"Edit Department":"Create Department"}),e.jsxs("form",{onSubmit:Hm,className:"space-y-6 bg-white p-6 rounded-lg border border-cream-200",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Department Name *"}),e.jsx("input",{id:"department-name",name:"name",type:"text",required:!0,value:br.name,onChange:c=>{An({...br,name:c.target.value}),W.name&&Q({...W,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${W.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Prepress, Digital Printing"}),W.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(bs,{size:12}),W.name]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description"}),e.jsx("textarea",{value:br.description,onChange:c=>An({...br,description:c.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"Brief description of department responsibilities"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:br.isEnabled,onChange:c=>An({...br,isEnabled:c.target.checked}),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{className:"text-sm font-medium text-cream-900",children:"Enabled"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Assign Operators (Optional)"}),e.jsxs("button",{type:"button",onClick:()=>Xe(!0),className:"px-3 py-1.5 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1.5",children:[e.jsx(pd,{size:14}),"Create Employee"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-2",children:"Select employees who can perform actions for this department. Only employees can be assigned. Leave empty to allow all authenticated users."}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-200 rounded-lg p-3",children:Tt.length===0?e.jsx("p",{className:"text-sm text-cream-600",children:"No employees available. Create users and mark them as employees first."}):Tt.map(c=>{const g=br.operators.some(S=>String(S)===String(c._id)),N=qa.filter(S=>!S.operators||S.operators.length===0?!1:S.operators.some(E=>{const z=typeof E=="object"&&(E._id||E.id)||String(E);return String(z)===String(c._id)})).map(S=>S.name);return e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-cream-50 border border-cream-200 rounded-lg hover:bg-cream-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:S=>{S.target.checked?An({...br,operators:[...br.operators,c._id]}):An({...br,operators:br.operators.filter(E=>String(E)!==String(c._id))})},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:c.name}),e.jsxs("p",{className:"text-xs text-cream-600",children:[c.email,N.length>0&&e.jsxs("span",{className:"ml-1 text-cream-500",children:["(",N.join(", "),")"]})]})]}),g&&e.jsx(Za,{className:"text-cream-900",size:20})]},c._id)})})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:20}),Ui?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{size:20}),Ui?"Update Department":"Create Department"]})})]})]}),e.jsxs("div",{className:"border-t border-cream-300 pt-6",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["All Departments (",qa.length,")"]}),e.jsx("button",{onClick:Mr,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Refresh"})]}),Xd?e.jsx("div",{className:"text-center py-8",children:e.jsx(Qt,{className:"animate-spin text-cream-900 mx-auto",size:32})}):qa.length===0?e.jsxs("div",{className:"text-center py-8 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx(ki,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-cream-600",children:"No departments found. Create one above."})]}):e.jsx("div",{className:"bg-white rounded-lg border border-cream-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-cream-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-cream-900",children:"Operators"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-cream-200",children:qa.sort((c,g)=>(c.name||"").localeCompare(g.name||"")).map(c=>e.jsxs("tr",{className:"hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900 font-semibold",children:c.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.description||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${c.isEnabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.isEnabled?"Enabled":"Disabled"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-600",children:c.operators&&c.operators.length>0?`${c.operators.length} operator(s)`:"All users"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>vr(c._id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:e.jsx(Ai,{size:16})}),e.jsx("button",{onClick:()=>Ac(c._id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(Gs,{size:16})})]})})]},c._id))})]})})})]})]}),n==="sequences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:yr?"Edit Sequence":"Create Sequence"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Create production sequences for categories/subcategories. Select departments in order - first selected gets sequence 1, second gets 2, etc."}),yr&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Editing Sequence: ",zt.name||"Loading..."]}),e.jsx("button",{type:"button",onClick:()=>{jc(null),lr({name:"",printType:"",category:"",subcategory:"",selectedDepartments:[],selectedAttributes:[]})},className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors",children:"Cancel Edit"})]}),e.jsxs("form",{onSubmit:lu,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Sequence Name *"}),e.jsx("input",{id:"sequence-name",name:"name",type:"text",required:!0,value:zt.name,onChange:c=>{lr({...zt,name:c.target.value}),ne.name&&le({...ne,name:void 0})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500 ${ne.name?"border-red-300 bg-red-50":"border-cream-300"}`,placeholder:"e.g., Standard Printing Sequence"}),ne.name&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(bs,{size:12}),ne.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Print Type *"}),e.jsx(Ca,{id:"sequence-printType",label:"Select Print Type",value:zt.printType,onChange:c=>{lr({...zt,printType:String(c),category:"",subcategory:""}),ne.printType&&le({...ne,printType:void 0})},options:[{value:"",label:"Select Print Type"},{value:"digital",label:"Digital Print"},{value:"bulk",label:"Bulk Print"}],className:"w-full"}),ne.printType&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(bs,{size:12}),ne.printType]})]}),(zt.printType==="digital"||zt.printType==="bulk")&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Category *"}),e.jsx(Ca,{id:"sequence-category",label:"Select Category",value:String(zt.category||""),onChange:c=>{lr({...zt,category:String(c),subcategory:""})},options:[{value:"",label:"Select Category"},...qe.filter(c=>!c.parent||c.parent===null||typeof c.parent=="object"&&!c.parent._id?zt.printType==="digital"?c.type==="Digital"||c.type==="digital":zt.printType==="bulk"?c.type==="Bulk"||c.type==="bulk":!1:!1).map(c=>({value:c._id,label:c.name}))],className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Subcategory ",zt.category?"*":"(Optional)"]}),e.jsx(Ca,{label:"Select Subcategory",value:zt.subcategory,onChange:c=>lr({...zt,subcategory:String(c)}),options:[{value:"",label:"Select Subcategory (Optional)"},...pa.filter(c=>{if(!zt.category)return!1;const g=c.category?typeof c.category=="object"&&c.category!==null?c.category._id:c.category:null;return String(g)===String(zt.category)}).sort((c,g)=>(c.sortOrder||0)-(g.sortOrder||0)).map(c=>({value:c._id,label:c.name}))],className:"w-full"})]})]})}),e.jsxs("div",{id:"sequence-departments",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Select Departments (in order) *"}),e.jsxs("button",{type:"button",onClick:()=>Os(!0),className:"px-3 py-1.5 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1.5",children:[e.jsx(ki,{size:14}),"Create Department"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-3",children:"Check departments in the order they should process. First checked = Sequence 1, second = Sequence 2, etc."}),qa.length===0?e.jsx("div",{className:"p-4 bg-cream-50 border border-cream-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:"No departments available. Please create departments first."})}):e.jsx("div",{className:"border border-cream-300 rounded-lg p-4 bg-white max-h-96 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:(qa||[]).filter(c=>c.isEnabled).map(c=>{const g=zt.selectedDepartments||[],N=g.includes(c._id),S=g.indexOf(c._id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg transition-colors ${N?"border-green-500 bg-green-50":"border-cream-200 bg-white hover:bg-cream-50"}`,children:[e.jsx("input",{type:"checkbox",checked:N,onChange:()=>Ec(c._id),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-green-500 text-white rounded-full text-xs font-bold",children:S+1}),e.jsx("span",{className:"font-medium text-cream-900",children:c.name})]}),c.operators&&c.operators.length>0&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xs font-medium text-cream-700",children:"Operators:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-0.5",children:c.operators.map(E=>e.jsx("span",{className:"text-xs text-cream-600 bg-cream-100 px-2 py-0.5 rounded",children:E&&typeof E=="object"?E.name:"N/A"},E&&typeof E=="object"?E._id:E))})]}),(!c.operators||c.operators.length===0)&&e.jsx("p",{className:"text-xs text-cream-500 mt-1",children:"No operators assigned"})]})]},c._id)})})}),zt.selectedDepartments&&zt.selectedDepartments.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Selected Sequence:"}),e.jsx("div",{className:"space-y-1",children:zt.selectedDepartments.map((c,g)=>{const N=qa.find(S=>S._id===c);return N?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-800",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-blue-500 text-white rounded-full text-xs font-bold",children:g+1}),e.jsx("span",{children:N.name})]},c):null})})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Select Attributes (Optional)"}),e.jsx("p",{className:"text-xs text-cream-600 mb-3",children:"Select attribute types that should be automatically assigned when this sequence is used for a product."}),Dr?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Qt,{className:"animate-spin text-cream-600",size:20}),e.jsx("span",{className:"ml-2 text-sm text-cream-600",children:"Loading attributes..."})]}):!wt||wt.length===0?e.jsx("div",{className:"p-4 bg-cream-50 border border-cream-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-cream-600 text-center",children:'No attribute types available. Create attribute types first in the "Attribute Types" tab.'})}):e.jsx("div",{className:"border border-cream-300 rounded-lg p-4 bg-white max-h-96 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:wt.map(c=>{const g=(zt.selectedAttributes||[]).includes(c._id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg transition-colors ${g?"border-green-500 bg-green-50":"border-cream-200 bg-white hover:bg-cream-50"}`,children:[e.jsx("input",{type:"checkbox",checked:g,onChange:N=>{N.target.checked?lr({...zt,selectedAttributes:[...zt.selectedAttributes||[],c._id]}):lr({...zt,selectedAttributes:(zt.selectedAttributes||[]).filter(S=>S!==c._id)})},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-cream-900",children:c.attributeName}),e.jsxs("p",{className:"text-xs text-cream-600 mt-1",children:[c.inputStyle||"N/A","  ",c.primaryEffectType||"N/A"," "," ",c.isPricingAttribute?"Affects Price":"No Price Impact"]})]})})})]},c._id)})})}),zt.selectedAttributes&&zt.selectedAttributes.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Selected Attributes:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:zt.selectedAttributes.map(c=>{const g=wt.find(N=>N._id===c);return g?e.jsx("span",{className:"text-xs text-blue-800 bg-blue-100 px-2 py-1 rounded",children:g.attributeName},c):null})})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:20}),yr?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{size:20}),yr?"Update Sequence":"Create Sequence"]})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:"All Sequences"}),tu?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qt,{className:"animate-spin mx-auto mb-4 text-cream-900",size:32}),e.jsx("p",{className:"text-cream-600",children:"Loading sequences..."})]}):!ln||ln.length===0?e.jsxs("div",{className:"text-center py-12 bg-cream-50 rounded-lg border border-cream-200",children:[e.jsx(Cr,{size:48,className:"mx-auto mb-4 text-cream-400"}),e.jsx("p",{className:"text-cream-600",children:"No sequences found. Create one to get started!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(ln||[]).map(c=>e.jsxs("div",{className:"bg-white border border-cream-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-cream-900 mb-1",children:c.name}),e.jsxs("p",{className:"text-xs text-cream-600 mb-1",children:["Category: ",c.category&&typeof c.category=="object"&&c.category!==null?c.category.name:"N/A"]}),e.jsxs("p",{className:"text-xs text-cream-600 mb-2",children:["Subcategory: ",c.subcategory&&typeof c.subcategory=="object"&&c.subcategory!==null?c.subcategory.name:"N/A"]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-medium text-cream-700 mb-1",children:"Department Order:"}),e.jsx("div",{className:"space-y-1",children:(c.departments||[]).sort((g,N)=>(g.order||0)-(N.order||0)).map((g,N)=>{const S=typeof g.department=="object"?g.department:qa.find(E=>E._id===g.department);return S?e.jsxs("div",{className:"text-xs mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-cream-600 mb-1",children:[e.jsx("span",{className:"flex items-center justify-center w-5 h-5 bg-cream-900 text-white rounded-full text-xs font-bold",children:g.order||N+1}),e.jsx("span",{className:"font-medium",children:S.name})]}),S.operators&&S.operators.length>0?e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-xs font-medium text-cream-700 mb-0.5",children:"Operators:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:S.operators.map(E=>e.jsx("span",{className:"text-xs text-cream-600 bg-cream-100 px-2 py-0.5 rounded",children:E&&typeof E=="object"?E.name:"N/A"},E&&typeof E=="object"?E._id:E))})]}):e.jsx("div",{className:"ml-7",children:e.jsx("p",{className:"text-xs text-cream-500",children:"No operators assigned"})})]},N):null})})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>Co(c._id),disabled:d,className:"px-3 py-1.5 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors disabled:opacity-50 flex items-center gap-2 text-sm",children:[e.jsx(Ai,{size:16}),"Edit"]}),e.jsxs("button",{onClick:()=>On(c._id),disabled:d,className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2 text-sm",children:[e.jsx(Gs,{size:16}),"Delete"]})]})]},c._id))})]})]}),n==="attribute-rules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["Attribute Rules (",fc.length,")"]}),e.jsxs("button",{onClick:()=>{No(),go(!0)},className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:18}),"Create Rule"]})]}),$m?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Qt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-3 text-sm text-cream-600",children:"Loading rules..."})]}):fc.length===0?e.jsx("div",{className:"text-center py-8 text-cream-600",children:e.jsx("p",{children:"No attribute rules found. Create your first rule to get started."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100 border-b border-cream-300",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Rule Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Scope"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Condition"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Actions"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Priority"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{children:fc.sort((c,g)=>(g.priority||0)-(c.priority||0)).map(c=>{var E,z,V,H,Y;const g=(c.then||[]).filter(ee=>ee&&ee.targetAttribute),N=typeof((E=c.when)==null?void 0:E.attribute)=="object"&&c.when.attribute!==null?c.when.attribute.attributeName:((z=wt.find(ee=>{var De;return ee._id===((De=c.when)==null?void 0:De.attribute)}))==null?void 0:z.attributeName)||"Unknown",S=c.applicableProduct?`Product: ${typeof c.applicableProduct=="object"&&c.applicableProduct!==null&&c.applicableProduct.name?c.applicableProduct.name:((V=Mt.find(ee=>ee._id===(typeof c.applicableProduct=="object"&&c.applicableProduct!==null?c.applicableProduct._id:c.applicableProduct)))==null?void 0:V.name)||"N/A"}`:c.applicableCategory?`Category: ${typeof c.applicableCategory=="object"&&c.applicableCategory!==null&&c.applicableCategory.name?c.applicableCategory.name:((H=qe.find(ee=>ee._id===(typeof c.applicableCategory=="object"&&c.applicableCategory!==null?c.applicableCategory._id:c.applicableCategory)))==null?void 0:H.name)||"N/A"}`:"Global";return e.jsxs("tr",{className:"border-b border-cream-200 hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900 font-medium",children:c.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:S}),e.jsxs("td",{className:"px-4 py-3 text-sm text-cream-700",children:["IF ",N," = ",((Y=c.when)==null?void 0:Y.value)||""]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-cream-700",children:[g.length," action",g.length!==1?"s":""]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.isActive?"Active":"Disabled"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.priority||0}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>iu(c),className:"px-2 py-1 text-sm bg-cream-200 text-cream-900 rounded hover:bg-cream-300 transition-colors",children:e.jsx(Ai,{size:14})}),e.jsx("button",{onClick:()=>qm(c),className:"px-2 py-1 text-sm bg-cream-100 text-cream-900 rounded hover:bg-cream-200 transition-colors",title:"Duplicate rule",children:e.jsx(Gj,{size:14})}),e.jsx("button",{onClick:()=>Bm(c._id),className:"px-2 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:e.jsx(Gs,{size:14})})]})})]},c._id)})})]})}),Fm&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-cream-200 p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-cream-900",children:Li?"Edit Rule":"Create Rule"}),e.jsx("button",{onClick:No,className:"text-cream-600 hover:text-cream-900",children:e.jsx(as,{size:24})})]}),e.jsxs("form",{onSubmit:ru,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900 mb-4",children:"Rule Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Rule Name *"}),e.jsx("input",{type:"text",value:Rt.name,onChange:c=>Ma({...Rt,name:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"e.g., 350 GSM Rule",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Priority *"}),e.jsx("input",{type:"number",value:Rt.priority,onChange:c=>Ma({...Rt,priority:parseInt(c.target.value)||0}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"0",required:!0}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Higher priority rules are evaluated first"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Scope *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"GLOBAL",checked:Rt.scope==="GLOBAL",onChange:c=>Ma({...Rt,scope:"GLOBAL",scopeRefId:""}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Global (applies to all products)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"CATEGORY",checked:Rt.scope==="CATEGORY",onChange:c=>Ma({...Rt,scope:"CATEGORY",scopeRefId:""}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Category"})]}),Rt.scope==="CATEGORY"&&e.jsxs("select",{value:Rt.scopeRefId,onChange:c=>Ma({...Rt,scopeRefId:c.target.value}),className:"ml-6 w-full max-w-md px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),qe.map(c=>e.jsx("option",{value:c._id,children:c.name},c._id))]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"PRODUCT",checked:Rt.scope==="PRODUCT",onChange:c=>Ma({...Rt,scope:"PRODUCT",scopeRefId:""}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Product"})]}),Rt.scope==="PRODUCT"&&e.jsxs("select",{value:Rt.scopeRefId,onChange:c=>Ma({...Rt,scopeRefId:c.target.value}),className:"ml-6 w-full max-w-md px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Product"}),Mt.map(c=>e.jsx("option",{value:c._id,children:c.name},c._id))]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:Rt.isActive,onChange:c=>Ma({...Rt,isActive:c.target.checked}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Active"})]})})]}),e.jsxs("div",{className:"border-b border-cream-200 pb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900 mb-4",children:"IF Condition (WHEN)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Attribute *"}),e.jsxs("select",{value:Rt.when.attribute,onChange:c=>{Ma({...Rt,when:{...Rt.when,attribute:c.target.value,value:""}})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Attribute"}),wt.map(c=>e.jsx("option",{value:c.attributeName,children:c.attributeName},c._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Value *"}),e.jsxs("select",{value:Rt.when.value,onChange:c=>Ma({...Rt,when:{...Rt.when,value:c.target.value}}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!Rt.when.attribute,children:[e.jsx("option",{value:"",children:"Select Value"}),(()=>{var g;const c=wt.find(N=>N.attributeName===Rt.when.attribute);return((g=c==null?void 0:c.attributeValues)==null?void 0:g.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value)))||[]})()]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900",children:"THEN Actions"}),e.jsxs("button",{type:"button",onClick:()=>{Ma({...Rt,then:[...Rt.then,{action:"SHOW",targetAttribute:""}]})},className:"px-3 py-1.5 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2 text-sm",children:[e.jsx(Ls,{size:16}),"Add Action"]})]}),Rt.then.length===0?e.jsx("p",{className:"text-sm text-cream-600 italic",children:"No actions defined. Add at least one action."}):e.jsx("div",{className:"space-y-4",children:Rt.then.map((c,g)=>{const N=wt.find(E=>E.attributeName===c.targetAttribute),S=(N==null?void 0:N.attributeValues)||[];return e.jsxs("div",{className:"border border-cream-200 rounded-lg p-4 bg-cream-50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("span",{className:"text-sm font-medium text-cream-900",children:["Action ",g+1]}),e.jsx("button",{type:"button",onClick:()=>{Ma({...Rt,then:Rt.then.filter((E,z)=>z!==g)})},className:"text-red-600 hover:text-red-800",children:e.jsx(as,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Action Type *"}),e.jsxs("select",{value:c.action,onChange:E=>{const z=[...Rt.then];z[g]={...c,action:E.target.value,allowedValues:E.target.value==="SHOW_ONLY"?[]:c.allowedValues,defaultValue:E.target.value==="SET_DEFAULT"?"":c.defaultValue},Ma({...Rt,then:z})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"SHOW",children:"SHOW"}),e.jsx("option",{value:"HIDE",children:"HIDE"}),e.jsx("option",{value:"SHOW_ONLY",children:"SHOW_ONLY"}),e.jsx("option",{value:"SET_DEFAULT",children:"SET_DEFAULT"}),e.jsx("option",{value:"TRIGGER_PRICING",children:"TRIGGER_PRICING"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Target Attribute *"}),e.jsxs("select",{value:c.targetAttribute,onChange:E=>{const z=[...Rt.then];z[g]={...c,targetAttribute:E.target.value},Ma({...Rt,then:z})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Attribute"}),wt.filter(E=>E.attributeName!==Rt.when.attribute).map(E=>e.jsx("option",{value:E.attributeName,children:E.attributeName},E._id))]})]})]}),c.action==="SHOW_ONLY"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Allowed Values * (Select multiple)"}),e.jsx("div",{className:"border border-cream-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:S.length===0?e.jsx("p",{className:"text-sm text-cream-600 italic",children:"No values available for this attribute"}):e.jsx("div",{className:"space-y-2",children:S.map(E=>{var z;return e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:((z=c.allowedValues)==null?void 0:z.includes(E.value))||!1,onChange:V=>{const H=[...Rt.then],Y=c.allowedValues||[];V.target.checked?H[g]={...c,allowedValues:[...Y,E.value]}:H[g]={...c,allowedValues:Y.filter(ee=>ee!==E.value)},Ma({...Rt,then:H})},className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:E.label})]},E.value)})})})]}),c.action==="SET_DEFAULT"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Default Value *"}),e.jsxs("select",{value:c.defaultValue||"",onChange:E=>{const z=[...Rt.then];z[g]={...c,defaultValue:E.target.value},Ma({...Rt,then:z})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!c.targetAttribute,children:[e.jsx("option",{value:"",children:"Select Default Value"}),S.map(E=>e.jsx("option",{value:E.value,children:E.label},E.value))]})]})]},g)})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-cream-200",children:[e.jsx("button",{type:"button",onClick:No,className:"px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center gap-2",children:[d&&e.jsx(Qt,{className:"animate-spin",size:16}),Li?"Update Rule":"Create Rule"]})]})]})]})}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-cream-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-cream-900",children:["Sub-Attributes (",bo.length,")"]}),e.jsxs("button",{onClick:()=>{un(),nn([{value:"",label:"",image:null,priceAdd:0,isEnabled:!0}]),gc(!0)},className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:18}),"Create Sub-Attributes"]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Filter by Attribute"}),e.jsxs("select",{value:Fi.attributeId,onChange:c=>{Kd({...Fi,attributeId:c.target.value})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",children:[e.jsx("option",{value:"",children:"All Attributes"}),wt.map(c=>e.jsx("option",{value:c._id,children:c.attributeName},c._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Filter by Parent Value"}),e.jsx("input",{type:"text",value:Fi.parentValue,onChange:c=>{Kd({...Fi,parentValue:c.target.value})},placeholder:"e.g., custom-shape-",className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("button",{onClick:()=>Yl(),className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors text-sm",children:"Apply Filters"})}),Um?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Qt,{className:"animate-spin text-cream-600",size:24}),e.jsx("span",{className:"ml-3 text-sm text-cream-600",children:"Loading sub-attributes..."})]}):bo.length===0?e.jsx("div",{className:"text-center py-8 text-cream-600",children:e.jsx("p",{children:"No sub-attributes found. Create your first sub-attribute to get started."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-cream-100 border-b border-cream-300",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Parent Attribute"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Parent Value"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Value"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Label"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Image"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Price Addition"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-cream-900",children:"Actions"})]})}),e.jsx("tbody",{children:bo.map(c=>{var N;const g=typeof c.parentAttribute=="object"&&c.parentAttribute!==null?c.parentAttribute.attributeName:((N=wt.find(S=>S._id===c.parentAttribute))==null?void 0:N.attributeName)||"Unknown";return e.jsxs("tr",{className:"border-b border-cream-200 hover:bg-cream-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-cream-900",children:g}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.parentValue}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.value}),e.jsx("td",{className:"px-4 py-3 text-sm text-cream-700",children:c.label}),e.jsx("td",{className:"px-4 py-3",children:c.image?e.jsx("img",{src:c.image,alt:c.label,className:"w-16 h-16 object-cover rounded"}):e.jsx("span",{className:"text-xs text-cream-500",children:"No image"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-cream-700",children:["",c.priceAdd||0,"/piece"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.isEnabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.isEnabled?"Enabled":"Disabled"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>wo(c),className:"px-2 py-1 text-sm bg-cream-200 text-cream-900 rounded hover:bg-cream-300 transition-colors",children:e.jsx(Ai,{size:14})}),e.jsx("button",{onClick:()=>ei(c._id),className:"px-2 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:e.jsx(Gs,{size:14})})]})})]},c._id)})})]})}),Im&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-cream-200 p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-cream-900",children:rn?"Edit Sub-Attribute & Add More":"Create Sub-Attributes"}),e.jsx("button",{onClick:un,className:"text-cream-600 hover:text-cream-900",children:e.jsx(as,{size:24})})]}),e.jsxs("form",{onSubmit:Sc,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Parent Attribute *"}),e.jsxs("select",{value:_s.parentAttribute,onChange:c=>{$i({..._s,parentAttribute:c.target.value,parentValue:""})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!!rn,children:[e.jsx("option",{value:"",children:"Select Attribute"}),wt.map(c=>e.jsx("option",{value:c.attributeName,children:c.attributeName},c._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Parent Value *"}),e.jsxs("select",{value:_s.parentValue,onChange:c=>$i({..._s,parentValue:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",required:!0,disabled:!_s.parentAttribute||!!rn,children:[e.jsx("option",{value:"",children:"Select Parent Value"}),(()=>{var g;const c=wt.find(N=>N.attributeName===_s.parentAttribute);return((g=c==null?void 0:c.attributeValues)==null?void 0:g.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value)))||[]})()]}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"The attribute value that triggers these sub-attributes"})]}),rn?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-cream-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-cream-900 mb-3",children:"Edit Sub-Attribute"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Value *"}),e.jsx("input",{type:"text",value:_s.value,onChange:c=>$i({..._s,value:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"e.g., shape-1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Label *"}),e.jsx("input",{type:"text",value:_s.label,onChange:c=>$i({..._s,label:c.target.value}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"e.g., Round Shape",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Image"}),(()=>{const c=bo.find(g=>g._id===rn);return c!=null&&c.image&&!_s.image?e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Current image:"}),e.jsx("img",{src:c.image,alt:"Current",className:"w-32 h-32 object-cover rounded border border-cream-300"})]}):null})(),e.jsx("input",{type:"file",accept:"image/*",onChange:c=>{var N;const g=((N=c.target.files)==null?void 0:N[0])||null;$i({..._s,image:g})},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900"}),_s.image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"New image preview:"}),e.jsx("img",{src:URL.createObjectURL(_s.image),alt:"Preview",className:"w-32 h-32 object-cover rounded border border-cream-300"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Price Addition (/piece)"}),e.jsx("input",{type:"number",step:"0.01",value:_s.priceAdd,onChange:c=>$i({..._s,priceAdd:parseFloat(c.target.value)||0}),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900",placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-cream-600 mt-1",children:"Fixed price addition per piece (e.g., 20 = +20/piece)"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:_s.isEnabled,onChange:c=>$i({..._s,isEnabled:c.target.checked}),className:"text-cream-900"}),e.jsx("span",{className:"text-sm text-cream-700",children:"Enabled"})]})})]})]}),e.jsxs("div",{className:"border-t border-cream-200 pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-cream-900",children:"Add New Sub-Attributes (Optional)"}),e.jsxs("button",{type:"button",onClick:jr,className:"px-3 py-1.5 text-sm bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add Row"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-4",children:"You can add additional sub-attributes with the same parent attribute and value"}),Pr.map((c,g)=>e.jsxs("div",{className:"border border-cream-200 rounded-lg p-4 bg-cream-50/50 mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h5",{className:"text-xs font-semibold text-cream-800",children:["New Sub-Attribute #",g+1]}),Pr.length>1&&e.jsx("button",{type:"button",onClick:()=>Pn(g),className:"text-red-600 hover:text-red-800 p-1",title:"Remove this row",children:e.jsx(Gs,{size:14})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Value *"}),e.jsx("input",{type:"text",value:c.value,onChange:N=>Rr(g,"value",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., shape-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Label *"}),e.jsx("input",{type:"text",value:c.label,onChange:N=>Rr(g,"label",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., Square Shape"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N=>{var E;const S=((E=N.target.files)==null?void 0:E[0])||null;Rr(g,"image",S)},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm"}),c.image&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:URL.createObjectURL(c.image),alt:"Preview",className:"w-24 h-24 object-cover rounded border border-cream-300"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Price Addition (/piece)"}),e.jsx("input",{type:"number",step:"0.01",value:c.priceAdd,onChange:N=>Rr(g,"priceAdd",parseFloat(N.target.value)||0),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"0.00"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.isEnabled,onChange:N=>Rr(g,"isEnabled",N.target.checked),className:"text-cream-900"}),e.jsx("span",{className:"text-xs text-cream-700",children:"Enabled"})]})})]})]})]},g))]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900",children:["Sub-Attributes (",Pr.length,")"]}),e.jsxs("button",{type:"button",onClick:jr,className:"px-3 py-1.5 text-sm bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add Row"]})]}),Pr.map((c,g)=>e.jsxs("div",{className:"border border-cream-200 rounded-lg p-4 bg-cream-50/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"text-sm font-semibold text-cream-900",children:["Sub-Attribute #",g+1]}),Pr.length>1&&e.jsx("button",{type:"button",onClick:()=>Pn(g),className:"text-red-600 hover:text-red-800 p-1",title:"Remove this row",children:e.jsx(Gs,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Value *"}),e.jsx("input",{type:"text",value:c.value,onChange:N=>Rr(g,"value",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., shape-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Label *"}),e.jsx("input",{type:"text",value:c.label,onChange:N=>Rr(g,"label",N.target.value),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"e.g., Round Shape"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N=>{var E;const S=((E=N.target.files)==null?void 0:E[0])||null;Rr(g,"image",S)},className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm"}),c.image&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:URL.createObjectURL(c.image),alt:"Preview",className:"w-24 h-24 object-cover rounded border border-cream-300"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-cream-700 mb-1",children:"Price Addition (/piece)"}),e.jsx("input",{type:"number",step:"0.01",value:c.priceAdd,onChange:N=>Rr(g,"priceAdd",parseFloat(N.target.value)||0),className:"w-full px-3 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-900 text-sm",placeholder:"0.00"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.isEnabled,onChange:N=>Rr(g,"isEnabled",N.target.checked),className:"text-cream-900"}),e.jsx("span",{className:"text-xs text-cream-700",children:"Enabled"})]})})]})]})]},g))]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-cream-200",children:[e.jsx("button",{type:"button",onClick:un,className:"px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center gap-2",children:[d&&e.jsx(Qt,{className:"animate-spin",size:16}),rn?Pr.some(c=>c.value.trim()&&c.label.trim())?"Update & Add New Sub-Attributes":"Update Sub-Attribute":"Create Sub-Attributes"]})]})]})]})})]})]}),n==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:"Create Employee"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Create a new employee account. Employees can access the employee dashboard to manage orders assigned to their departments."}),e.jsxs("form",{onSubmit:Dc,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:Ns.name,onChange:c=>va({...Ns,name:c.target.value}),placeholder:"Enter employee name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:Ns.email,onChange:c=>va({...Ns,email:c.target.value}),placeholder:"Enter employee email",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Password *"}),e.jsx("input",{type:"password",required:!0,value:Ns.password,onChange:c=>va({...Ns,password:c.target.value}),placeholder:"Enter password",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pd,{size:20}),"Create Employee"]})})]})]}),e.jsx("div",{className:"border-t border-cream-300 pt-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900 mb-4",children:"Update User Role"}),e.jsx("p",{className:"text-sm text-cream-600 mb-4",children:"Users are created through the signup page. Use this form to update existing users' roles to admin or employee."}),e.jsxs("form",{onSubmit:kc,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Username (Name) *"}),e.jsx("input",{type:"text",required:!0,value:Vt.username,onChange:c=>xa({...Vt,username:c.target.value}),placeholder:"Enter user's name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Role *"}),e.jsx(Ca,{label:"Select Role",value:Vt.role,onChange:c=>xa({...Vt,role:c}),options:[{value:"user",label:"User"},{value:"admin",label:"Admin"},{value:"emp",label:"Employee"}],className:"w-full"})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:20}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Cr,{size:20}),"Update Role"]})})]})]})}),e.jsxs("div",{className:"border-t border-cream-300 pt-6",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-cream-900",children:["All Users (",ye.length,")"]}),e.jsx("button",{onClick:dn,className:"px-4 py-2 bg-cream-200 text-cream-900 rounded-lg hover:bg-cream-300 transition-colors",children:"Refresh"})]}),ye.length===0?e.jsxs("div",{className:"text-center py-12 text-cream-600",children:[e.jsx(Ol,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No users found"})]}):e.jsx("div",{className:"space-y-4",children:ye.map(c=>e.jsxs("div",{className:"border border-cream-300 rounded-lg p-4 flex items-center justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-cream-900",children:c.name}),e.jsx("p",{className:"text-sm text-cream-600",children:c.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${c.role==="admin"?"bg-cream-900 text-white":"bg-cream-200 text-cream-900"}`,children:c.role}),c.isEmployee&&e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"})]})]}),e.jsx("div",{className:"text-xs text-cream-500",children:c.createdAt?new Date(c.createdAt).toLocaleDateString():"N/A"})]},c._id))})]})]}),n==="print-partner-requests"&&e.jsx(GT,{}),n==="corporate-requests"&&e.jsx(QT,{}),n==="pricing-books"&&e.jsx(YT,{}),n==="pricing-modifiers"&&e.jsx(ZT,{}),n==="geo-zones"&&e.jsx(KT,{}),n==="user-segments"&&e.jsx(XT,{}),n==="product-availability"&&e.jsx(ek,{}),n==="pricing-preview"&&e.jsx(sk,{}),n==="pricing-logs"&&e.jsx(JT,{}),n==="virtual-pricing"&&e.jsx(tk,{})]})]}),e.jsx(ca,{children:Je&&pe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-cream-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-cream-900",children:["Order #",pe.orderNumber]}),e.jsx("p",{className:"text-sm text-cream-600 mt-1",children:r?new Date(pe.createdAt).toLocaleString():"Loading..."})]}),e.jsx("button",{onClick:()=>{ht(!1),Pe(null),He({status:"",deliveryDate:"",adminNotes:""})},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(as,{size:24})})]}),e.jsxs("div",{className:"space-y-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-cream-700",children:"Status:"}),e.jsx("div",{className:`px-4 py-2 rounded-full border-2 ${pe.status==="completed"?"bg-green-100 text-green-800 border-green-200":pe.status==="processing"?"bg-blue-100 text-blue-800 border-blue-200":pe.status==="production_ready"?"bg-orange-100 text-orange-800 border-orange-200":pe.status==="request"?"bg-yellow-100 text-yellow-800 border-yellow-200":pe.status==="rejected"?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:e.jsx("span",{className:"text-sm font-semibold capitalize",children:pe.status})})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(Ol,{size:18}),"Customer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1 font-medium",children:"Customer Name"}),e.jsx("p",{className:"font-semibold text-cream-900 text-base",children:pe.user.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1 font-medium",children:"Email Address"}),e.jsx("p",{className:"font-semibold text-cream-900 text-base",children:pe.user.email})]})]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(ja,{size:18}),"Product Information"]}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsx("img",{src:pe.product.image||Yo,alt:pe.product.name,className:"w-24 h-24 object-cover rounded-lg border border-cream-200",onError:c=>{const g=c.target;g.src=Yo}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-cream-900 text-lg mb-1",children:pe.product.name}),e.jsxs("p",{className:"text-sm text-cream-600 mb-2",children:["Category: ",pe.product.category&&typeof pe.product.category=="object"&&pe.product.category!==null&&"_id"in pe.product.category?pe.product.category.name||"N/A":typeof pe.product.category=="string"?pe.product.category:"N/A"]}),e.jsxs("p",{className:"text-sm text-cream-600",children:["Base Price: ",((To=pe.product.basePrice)==null?void 0:To.toFixed(2))||"0.00"," per unit"]})]})]})]}),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(Cr,{size:18}),"Customization Details"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Quantity"}),e.jsxs("p",{className:"font-bold text-cream-900",children:[pe.quantity," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Finish"}),e.jsx("p",{className:"font-bold text-cream-900",children:pe.finish})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Shape"}),e.jsx("p",{className:"font-bold text-cream-900",children:pe.shape})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Total Price"}),e.jsxs("p",{className:"font-bold text-cream-900",children:["",pe.totalPrice.toFixed(2)]})]})]}),pe.selectedOptions&&pe.selectedOptions.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-2 font-semibold",children:"Selected Options"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:pe.selectedOptions.map((c,g)=>e.jsxs("span",{className:"px-3 py-1 bg-cream-200 text-cream-800 rounded-full text-xs font-medium",children:[typeof c=="string"?c:c.optionName||c.name||"Option",typeof c=="object"&&c.priceAdd?` (+${c.priceAdd.toFixed(2)})`:""]},g))})]}),pe.selectedDynamicAttributes&&pe.selectedDynamicAttributes.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-2 font-semibold",children:"Selected Attributes"}),e.jsx("div",{className:"space-y-2",children:pe.selectedDynamicAttributes.map((c,g)=>e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-cream-100 border border-cream-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c.image&&c.image.trim()!==""&&e.jsx("img",{src:c.image,alt:c.attributeName,className:"w-8 h-8 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-cream-900",children:c.attributeName}),e.jsx("p",{className:"text-xs text-cream-600",children:c.label}),c.description&&e.jsx("p",{className:"text-xs text-cream-500 mt-0.5",children:c.description})]})]}),(c.priceAdd>0||c.priceMultiplier)&&e.jsxs("div",{className:"text-right",children:[c.priceAdd>0&&e.jsxs("span",{className:"block text-xs font-bold text-cream-900",children:["+",c.priceAdd.toFixed(2)]}),c.priceMultiplier&&c.priceMultiplier!==1&&e.jsxs("span",{className:"block text-xs text-cream-600",children:["",c.priceMultiplier.toFixed(2)]})]}),c.uploadedImages&&c.uploadedImages.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-cream-200 w-full",children:[e.jsx("p",{className:"text-xs text-cream-600 mb-2 font-semibold",children:"Uploaded Images:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:c.uploadedImages.map((N,S)=>{let E="";return N.data&&(typeof N.data=="string"?E=`data:${N.contentType||"image/jpeg"};base64,${N.data}`:Buffer.isBuffer(N.data)&&(E=`data:${N.contentType||"image/jpeg"};base64,${N.data.toString("base64")}`)),E?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:E,alt:N.filename||`Image ${S+1}`,className:"w-full h-24 object-cover rounded border border-cream-200"}),e.jsx("p",{className:"text-xs text-cream-500 mt-1 truncate",children:N.filename})]},S):null})})]})]},g))})]})]}),(()=>{var N,S,E;const c={quantity:pe.quantity,product:{basePrice:0,gstPercentage:pe.product.gstPercentage||18,options:pe.product.options,filters:pe.product.filters,quantityDiscounts:((N=pe.product)==null?void 0:N.quantityDiscounts)||[]},finish:pe.finish,shape:pe.shape,selectedOptions:((S=pe.selectedOptions)==null?void 0:S.map(z=>({name:typeof z=="string"?z:z.optionName||z.name||"Option",optionName:typeof z=="string"?z:z.optionName||z.name||"Option",priceAdd:typeof z=="object"&&z.priceAdd||0})))||[],selectedDynamicAttributes:(E=pe.selectedDynamicAttributes)==null?void 0:E.map(z=>({attributeName:z.attributeName,label:z.label,priceMultiplier:z.priceMultiplier,priceAdd:z.priceAdd}))},g=xx(c);return e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(Ll,{size:18}),"Price Breakdown"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-cream-200",children:[e.jsx("div",{className:"text-cream-600",children:e.jsxs("span",{children:["Base Price (",pe.quantity.toLocaleString()," "," ",Ws(0),")"]})}),e.jsx("span",{className:"font-medium text-cream-900",children:Ws(g.rawBaseTotal)})]}),g.discountPercentage>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-700 bg-green-50 p-2 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold",children:["Bulk Discount (",g.discountPercentage,"%)"]}),e.jsxs("p",{className:"text-xs opacity-80",children:["Applied for ",pe.quantity," units"]})]}),e.jsxs("span",{className:"font-bold",children:["-",Ws(g.rawBaseTotal-g.discountedBaseTotal)]})]}),g.optionBreakdowns.map((z,V)=>e.jsxs("div",{className:"flex justify-between items-center text-cream-600",children:[e.jsxs("span",{children:[z.name," ",z.isPerUnit?`(${pe.quantity}  ${Ws(z.priceAdd)})`:""]}),e.jsxs("span",{children:["+",Ws(z.cost)]})]},V)),pe.selectedDynamicAttributes&&pe.selectedDynamicAttributes.length>0&&e.jsx(e.Fragment,{children:pe.selectedDynamicAttributes.filter(z=>z.priceAdd>0||z.priceMultiplier&&z.priceMultiplier!==1).map((z,V)=>{let Y=0,ee=0;return z.priceAdd>0?(ee=z.priceAdd,Y=z.priceAdd*pe.quantity):z.priceMultiplier&&z.priceMultiplier!==1&&(ee=0*(z.priceMultiplier-1),Y=ee*pe.quantity),Y===0?null:e.jsxs("div",{className:"flex justify-between items-center text-cream-600",children:[e.jsxs("span",{children:[z.attributeName," (",z.label,")"]}),e.jsxs("span",{children:["+",Ws(ee),"/unit  ",pe.quantity.toLocaleString()," = ",Ws(Y)]})]},`attr-${V}`)})}),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-medium text-cream-900 border-t border-cream-200",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:Ws(g.subtotal)})]}),e.jsxs("div",{className:"flex justify-between items-center text-cream-600 text-xs",children:[e.jsxs("span",{children:["GST (",pe.product.gstPercentage||18,"%)"]}),e.jsxs("span",{children:["+",Ws(g.gstAmount)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t-2 border-cream-300",children:[e.jsx("span",{className:"text-base font-bold text-cream-900",children:"Total Amount"}),e.jsx("span",{className:"text-lg font-bold text-cream-900",children:Ws(pe.totalPrice)})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-cream-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-cream-600 text-xs",children:"Advance Paid"}),e.jsx("span",{className:"font-medium text-green-700",children:Ws(pe.advancePaid||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-cream-600 text-xs",children:"Balance Due"}),e.jsx("span",{className:`font-bold ${pe.totalPrice-(pe.advancePaid||0)>0?"text-red-600":"text-cream-500"}`,children:Ws(pe.totalPrice-(pe.advancePaid||0))})]})]})]})]})})(),e.jsxs("div",{className:"bg-cream-50 rounded-lg p-4 border border-cream-200",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-3 flex items-center gap-2",children:[e.jsx(ho,{size:18}),"Delivery Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Complete Address"}),e.jsx("p",{className:"font-semibold text-cream-900 text-sm whitespace-pre-wrap",children:pe.address||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Mobile Number"}),e.jsx("p",{className:"font-semibold text-cream-900",children:pe.mobileNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Pincode"}),e.jsx("p",{className:"font-semibold text-cream-900",children:pe.pincode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cream-600 mb-1",children:"Delivery Date"}),e.jsx("p",{className:"font-semibold text-cream-900",children:pe.deliveryDate?r?new Date(pe.deliveryDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Loading...":"Not set"})]})]})]})]}),pe.currentDepartment&&e.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 border border-indigo-200 mb-4",children:[e.jsxs("h3",{className:"font-bold text-indigo-900 mb-2 flex items-center gap-2",children:[e.jsx(ki,{size:18}),"Current Department"]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"px-4 py-2 bg-white rounded-lg border border-indigo-200",children:[e.jsx("p",{className:"text-xs text-indigo-600 mb-1",children:"Currently Working On"}),e.jsx("p",{className:"text-lg font-bold text-indigo-900",children:typeof pe.currentDepartment=="object"&&pe.currentDepartment!==null?pe.currentDepartment.name:"Department"}),pe.currentDepartmentIndex!==null&&pe.currentDepartmentIndex!==void 0&&e.jsxs("p",{className:"text-xs text-indigo-500 mt-1",children:["Position in Sequence: #",pe.currentDepartmentIndex+1]})]})})]}),pe.departmentStatuses&&pe.departmentStatuses.length>0&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(ho,{size:18}),"Production Progress"]}),(()=>{const c=pe.departmentStatuses.length,g=pe.departmentStatuses.filter(S=>S.status==="completed").length,N=pe.departmentStatuses.filter(S=>S.status==="in_progress").length;return e.jsxs("div",{className:"text-xs text-blue-700 font-medium",children:[g,"/",c," Stages Completed",N>0&&`  ${N} In Progress`]})})()]}),(()=>{const c=pe.departmentStatuses.length,g=pe.departmentStatuses.filter(S=>S.status==="completed").length,N=Math.round(g/c*100);return e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2.5 mb-1",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${N}%`}})}),e.jsxs("p",{className:"text-xs text-blue-700 text-right",children:[N,"% Complete"]})]})})(),e.jsx("div",{className:"space-y-2",children:pe.departmentStatuses.sort((c,g)=>{const N=typeof c.department=="object"?c.department.sequence:0,S=typeof g.department=="object"?g.department.sequence:0;return N-S}).map((c,g)=>{const N=typeof c.department=="object"?c.department.name:"Department",S=c.status;let E="";if(c.startedAt&&c.completedAt){const z=new Date(c.startedAt),H=new Date(c.completedAt).getTime()-z.getTime(),Y=Math.floor(H/(1e3*60*60)),ee=Math.floor(H%(1e3*60*60)/(1e3*60));Y>0?E=`${Y}h ${ee}m`:E=`${ee}m`}return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white rounded-lg border border-blue-100",children:[e.jsx("div",{className:`w-4 h-4 rounded-full mt-0.5 shrink-0 ${S==="completed"?"bg-green-500":S==="in_progress"?"bg-blue-500 animate-pulse":S==="paused"?"bg-yellow-500":S==="stopped"?"bg-red-500":"bg-gray-300"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-900",children:N}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${S==="completed"?"bg-green-100 text-green-800":S==="in_progress"?"bg-blue-100 text-blue-800":S==="paused"?"bg-yellow-100 text-yellow-800":S==="stopped"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:S.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"space-y-1 mt-2",children:[c.whenAssigned&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ci,{size:12,className:"text-purple-600"}),e.jsxs("span",{className:"text-purple-600",children:["Assigned: ",new Date(c.whenAssigned).toLocaleString()]})]}),c.startedAt&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ci,{size:12,className:"text-blue-600"}),e.jsxs("span",{className:"text-blue-600",children:["Started: ",new Date(c.startedAt).toLocaleString()]})]}),c.completedAt&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ga,{size:12,className:"text-green-600"}),e.jsxs("span",{className:"text-green-600",children:["Completed: ",new Date(c.completedAt).toLocaleString(),E&&` (Duration: ${E})`]})]}),c.pausedAt&&S==="paused"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ci,{size:12,className:"text-yellow-600"}),e.jsxs("span",{className:"text-yellow-600",children:["Paused: ",new Date(c.pausedAt).toLocaleString()]})]}),c.stoppedAt&&S==="stopped"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(as,{size:12,className:"text-red-600"}),e.jsxs("span",{className:"text-red-600",children:["Stopped: ",new Date(c.stoppedAt).toLocaleString()]})]}),c.operator&&e.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[e.jsx(Ol,{size:12,className:"text-cream-600"}),e.jsxs("span",{className:"text-cream-600",children:["Operator: ",typeof c.operator=="object"&&c.operator&&"_id"in c.operator?`${c.operator.name||"N/A"} (${"email"in c.operator&&typeof c.operator.email=="string"?c.operator.email:"N/A"})`:"N/A"]})]}),c.notes&&e.jsxs("div",{className:"text-xs text-cream-600 mt-1 italic",children:["Notes: ",c.notes]})]})]})]},g)})})]}),pe.productionTimeline&&pe.productionTimeline.length>0&&e.jsxs("div",{className:"bg-linear-to-br from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200",children:[e.jsxs("h3",{className:"font-bold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx(ci,{size:18}),"Production Activity Timeline"]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Array.isArray(pe.productionTimeline)&&pe.productionTimeline.sort((c,g)=>new Date(g.timestamp||0).getTime()-new Date(c.timestamp||0).getTime()).map((c,g)=>{const N=typeof c.department=="object"?c.department.name:"Department",S=c.operator?typeof c.operator=="object"?`${c.operator.name} (${c.operator.email})`:c.operator:"System",E={started:"bg-blue-100 text-blue-800 border-blue-300",paused:"bg-yellow-100 text-yellow-800 border-yellow-300",resumed:"bg-green-100 text-green-800 border-green-300",completed:"bg-green-100 text-green-800 border-green-300",stopped:"bg-red-100 text-red-800 border-red-300"};return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white rounded-lg border border-purple-100 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 shrink-0 ${c.action==="completed"?"bg-green-500":c.action==="started"?"bg-blue-500":c.action==="paused"?"bg-yellow-500":c.action==="stopped"?"bg-red-500":"bg-gray-400"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-purple-900",children:N}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium border ${E[c.action]||"bg-gray-100 text-gray-800 border-gray-300"}`,children:c.action.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600 mb-1",children:[e.jsx(ci,{size:12}),e.jsx("span",{children:new Date(c.timestamp).toLocaleString()})]}),S&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600 mb-1",children:[e.jsx(Ol,{size:12}),e.jsxs("span",{children:["Operator: ",S]})]}),c.notes&&e.jsx("div",{className:"text-xs text-purple-700 mt-1 italic bg-purple-50 p-2 rounded border border-purple-100",children:c.notes})]})]},g)})})]}),pe.notes&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(hr,{size:18}),"Customer Notes"]}),e.jsx("p",{className:"text-sm text-blue-900 whitespace-pre-wrap",children:pe.notes})]}),pe.adminNotes&&e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsxs("h3",{className:"font-bold text-amber-900 mb-2 flex items-center gap-2",children:[e.jsx(Cr,{size:18}),"Admin Notes"]}),e.jsx("p",{className:"text-sm text-amber-900 whitespace-pre-wrap",children:pe.adminNotes})]}),(((hn=pe.uploadedDesign)==null?void 0:hn.frontImage)||((bi=pe.uploadedDesign)==null?void 0:bi.backImage))&&e.jsxs(st.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"bg-linear-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-blue-900 mb-4 flex items-center gap-2 text-lg",children:[e.jsx(bn,{size:20}),"Uploaded Customer Designs"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[((Hi=pe.uploadedDesign)==null?void 0:Hi.frontImage)&&e.jsxs(st.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[e.jsxs("p",{className:"text-sm font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(Wr,{size:16}),"Front Design"]}),e.jsxs("div",{className:"relative bg-white rounded-lg border-2 border-blue-200 p-4 shadow-md hover:shadow-lg transition-shadow",children:[e.jsx("img",{src:pe.uploadedDesign.frontImage.data||Dl,alt:"Front design",className:"w-full h-80 object-contain rounded-lg",onError:c=>{const g=c.target;g.src=Dl}}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["File: ",pe.uploadedDesign.frontImage.filename||"front-design.png"]}),e.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:["Type: ",pe.uploadedDesign.frontImage.contentType||"image/png"]})]}),e.jsxs("button",{onClick:()=>{const c=document.createElement("a");c.href=pe.uploadedDesign.frontImage.data||Dl,c.download=pe.uploadedDesign.frontImage.filename||"front-design.png",document.body.appendChild(c),c.click(),document.body.removeChild(c)},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",title:"Download image",children:[e.jsx(Wn,{size:14}),"Download"]})]})]})]}),((yi=pe.uploadedDesign)==null?void 0:yi.backImage)&&e.jsxs(st.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[e.jsxs("p",{className:"text-sm font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(Wr,{size:16}),"Back Design"]}),e.jsxs("div",{className:"relative bg-white rounded-lg border-2 border-blue-200 p-4 shadow-md hover:shadow-lg transition-shadow",children:[e.jsx("img",{src:pe.uploadedDesign.backImage.data||Dl,alt:"Back design",className:"w-full h-80 object-contain rounded-lg",onError:c=>{const g=c.target;g.src=Dl}}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["File: ",pe.uploadedDesign.backImage.filename||"back-design.png"]}),e.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:["Type: ",pe.uploadedDesign.backImage.contentType||"image/png"]})]}),e.jsxs("button",{onClick:()=>{const c=document.createElement("a");c.href=pe.uploadedDesign.backImage.data||Dl,c.download=pe.uploadedDesign.backImage.filename||"back-design.png",document.body.appendChild(c),c.click(),document.body.removeChild(c)},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",title:"Download image",children:[e.jsx(Wn,{size:14}),"Download"]})]})]})]})]})]})]}),pe.status!=="cancelled"&&e.jsxs("div",{className:"border-t border-cream-200 pt-6",children:[e.jsxs("h3",{className:"font-bold text-cream-900 mb-4 flex items-center gap-2",children:[e.jsx(Cr,{size:18}),"Manage Order"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Order Status"}),e.jsx(Ca,{label:"Select Status",value:Et.status,onChange:c=>He({...Et,status:c}),options:[{value:"request",label:"Request"},{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"rejected",label:"Rejected"}],className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Delivery Date"}),e.jsx("input",{type:"date",value:Et.deliveryDate,onChange:c=>He({...Et,deliveryDate:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Admin Notes"}),e.jsx("textarea",{value:Et.adminNotes,onChange:c=>He({...Et,adminNotes:c.target.value}),rows:4,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"Add notes for this order..."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>ol(pe._id),disabled:d,className:"flex-1 bg-cream-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:20}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Za,{size:20}),"Update Order"]})}),e.jsx("button",{onClick:()=>{ht(!1),Pe(null),He({status:"",deliveryDate:"",adminNotes:""})},className:"px-6 py-3 border border-cream-300 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"})]})]})]})]})})}),e.jsx(ca,{children:ze&&Ue&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-cream-900",children:"Upload Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{Ue&&window.confirm("Are you sure you want to delete this uploaded image?")&&(ia(Ue._id),ve(!1),Me(null))},disabled:d,className:"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 flex items-center gap-2",title:"Delete upload",children:[e.jsx(Gs,{size:20}),"Delete"]}),e.jsx("button",{onClick:()=>{ve(!1),Me(null)},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(as,{size:24})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"User"}),e.jsxs("p",{className:"font-semibold text-cream-900",children:[Ue.user.name," (",Ue.user.email,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Dimensions"}),e.jsxs("p",{className:"font-semibold text-cream-900",children:[Ue.width,"  ",Ue.height,"px"]})]}),Ue.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Description"}),e.jsx("p",{className:"text-cream-900",children:Ue.description})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Front Image"}),Ue.frontImage&&e.jsxs("button",{onClick:()=>gs(Ue.frontImage.data,Ue.frontImage.filename||"front-image.jpg"),className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Wn,{size:14}),"Download"]})]}),Ue.frontImage&&e.jsxs("div",{className:"relative",children:[nt[`modal-front-${Ue._id}`]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cream-100 rounded-lg",children:e.jsx(Qt,{className:"animate-spin text-cream-600",size:32})}),e.jsx("img",{src:Wl(Ue.frontImage.data,Ue.frontImage.contentType)||Dl,alt:Ue.frontImage.filename,className:`w-full rounded-lg border border-cream-300 ${nt[`modal-front-${Ue._id}`]?"opacity-0":"opacity-100"} transition-opacity`,onLoad:()=>Wt(c=>({...c,[`modal-front-${Ue._id}`]:!1})),onError:()=>{var c;Wt(g=>({...g,[`modal-front-${Ue._id}`]:!1})),console.error("Failed to load image:",(c=Ue.frontImage)==null?void 0:c.filename)},onLoadStart:()=>Wt(c=>({...c,[`modal-front-${Ue._id}`]:!0}))})]})]}),Ue.backImage&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Back Image"}),e.jsxs("button",{onClick:()=>gs(Ue.backImage.data,Ue.backImage.filename||"back-image.jpg"),className:"px-3 py-1 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-2",children:[e.jsx(Wn,{size:14}),"Download"]})]}),e.jsxs("div",{className:"relative",children:[nt[`modal-back-${Ue._id}`]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cream-100 rounded-lg",children:e.jsx(Qt,{className:"animate-spin text-cream-600",size:32})}),e.jsx("img",{src:Wl(Ue.backImage.data,Ue.backImage.contentType)||Dl,alt:Ue.backImage.filename,className:`w-full rounded-lg border border-cream-300 ${nt[`modal-back-${Ue._id}`]?"opacity-0":"opacity-100"} transition-opacity`,onLoad:()=>Wt(c=>({...c,[`modal-back-${Ue._id}`]:!1})),onError:()=>{var c;Wt(g=>({...g,[`modal-back-${Ue._id}`]:!1})),console.error("Failed to load image:",(c=Ue.backImage)==null?void 0:c.filename)},onLoadStart:()=>Wt(c=>({...c,[`modal-back-${Ue._id}`]:!0}))})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cream-600",children:"Uploaded"}),e.jsx("p",{className:"text-cream-900",children:r?new Date(Ue.createdAt).toLocaleString():"Loading..."})]})]})]})})})}),lt.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(bs,{className:"text-red-600",size:24}),e.jsxs("h3",{className:"text-xl font-bold text-cream-900",children:["Delete ",lt.type==="category"?"Category":"Subcategory"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-cream-700 mb-3",children:["Are you sure you want to delete ",e.jsx("strong",{children:lt.name}),"?"]}),lt.subcategoryCount>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(bs,{className:"text-red-600 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-red-800 font-semibold mb-1",children:[" Cannot Delete: This category has ",lt.subcategoryCount," subcategor",lt.subcategoryCount===1?"y":"ies","!"]}),e.jsx("p",{className:"text-red-700 text-sm",children:"Please delete or reassign all subcategories before deleting this category."})]})]})}),lt.productCount>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(bs,{className:"text-red-600 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-red-800 font-semibold mb-1",children:[" Warning: This will delete ",lt.productCount," product",lt.productCount!==1?"s":"","!"]}),e.jsxs("p",{className:"text-red-700 text-sm",children:["All products under this ",lt.type==="category"?"category and its subcategories":"subcategory"," will be permanently deleted. This action cannot be undone."]}),e.jsx("p",{className:"text-red-700 text-sm mt-2 font-medium",children:"Please be careful before proceeding."})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:["Type ",e.jsx("strong",{children:'"delete"'})," to confirm:"]}),e.jsx("input",{type:"text",value:lt.deleteText,onChange:c=>dt({...lt,deleteText:c.target.value}),className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500",placeholder:"Type 'delete' to confirm",autoFocus:!0})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>dt({...lt,isOpen:!1,deleteText:""}),className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{lt.type==="category"?ou():gi()},disabled:lt.deleteText.toLowerCase()!=="delete"||d||lt.subcategoryCount>0,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin inline mr-2",size:16}),"Deleting..."]}):"Delete"})]})]})}),da.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Er,{className:"text-blue-600",size:24}),e.jsxs("h3",{className:"text-xl font-bold text-cream-900",children:[da.type==="category"?"Category":"Subcategory"," Description"]})]}),e.jsx("button",{onClick:()=>ui({...da,isOpen:!1}),className:"text-cream-600 hover:text-cream-900 transition-colors",children:e.jsx(as,{size:24})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-cream-900 mb-2",children:da.name}),e.jsx("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-4 max-h-96 overflow-y-auto",children:e.jsx("p",{className:"text-cream-700 whitespace-pre-wrap leading-relaxed",children:da.description})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>ui({...da,isOpen:!1}),className:"px-6 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors",children:"Close"})})]})}),e.jsx(ca,{children:Ye&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-cream-200",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900",children:"Create Employee"}),e.jsx("button",{onClick:()=>{Xe(!1),kt({name:"",email:"",password:""})},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(as,{size:24})})]}),e.jsxs("form",{onSubmit:cu,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:It.name,onChange:c=>kt({...It,name:c.target.value}),placeholder:"Enter employee name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:It.email,onChange:c=>kt({...It,email:c.target.value}),placeholder:"Enter employee email",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Password *"}),e.jsx("input",{type:"password",required:!0,value:It.password,onChange:c=>kt({...It,password:c.target.value}),placeholder:"Enter password",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{Xe(!1),kt({name:"",email:"",password:""})},className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pd,{size:20}),"Create Employee"]})})]})]})]})})}),e.jsx(ca,{children:Fs&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-cream-200",children:[e.jsx("h2",{className:"text-xl font-bold text-cream-900",children:"Create Department"}),e.jsx("button",{onClick:()=>{Os(!1),Ts({name:"",description:"",isEnabled:!0,operators:[]})},className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:e.jsx(as,{size:24})})]}),e.jsxs("form",{onSubmit:Ha,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Department Name *"}),e.jsx("input",{type:"text",required:!0,value:qt.name,onChange:c=>Ts({...qt,name:c.target.value}),placeholder:"Enter department name",className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:qt.description,onChange:c=>Ts({...qt,description:c.target.value}),placeholder:"Enter department description",rows:3,className:"w-full px-4 py-2 border border-cream-300 rounded-lg focus:ring-2 focus:ring-cream-500 focus:border-cream-500"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-cream-900 mb-2",children:[e.jsx("input",{type:"checkbox",checked:qt.isEnabled,onChange:c=>Ts({...qt,isEnabled:c.target.checked}),className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500"}),e.jsx("span",{children:"Enabled"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-cream-900",children:"Assign Operators (Optional)"}),e.jsxs("button",{type:"button",onClick:()=>Xe(!0),className:"px-3 py-1.5 text-xs bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors flex items-center gap-1.5",children:[e.jsx(pd,{size:14}),"Create Employee"]})]}),e.jsx("p",{className:"text-xs text-cream-600 mb-2",children:"Select employees who can perform actions for this department. Only employees can be assigned."}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-cream-200 rounded-lg p-3",children:Tt.length===0?e.jsx("p",{className:"text-sm text-cream-600",children:"No employees available. Create employees first."}):Tt.map(c=>{const g=qt.operators.some(N=>String(N)===String(c._id));return e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-cream-50 border border-cream-200 rounded-lg hover:bg-cream-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:N=>{N.target.checked?Ts({...qt,operators:[...qt.operators,c._id]}):Ts({...qt,operators:qt.operators.filter(S=>String(S)!==String(c._id))})},className:"w-4 h-4 text-cream-900 border-cream-300 rounded focus:ring-cream-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-cream-900",children:c.name}),e.jsx("p",{className:"text-xs text-cream-600",children:c.email})]}),g&&e.jsx(Za,{className:"text-cream-900",size:20})]},c._id)})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{Os(!1),Ts({name:"",description:"",isEnabled:!0,operators:[]})},className:"flex-1 px-4 py-2 border border-cream-300 text-cream-700 rounded-lg hover:bg-cream-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"animate-spin",size:20}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ki,{size:20}),"Create Department"]})})]})]})]})})})]})},nk=()=>{const s=ar();return e.jsx("div",{className:"min-h-screen bg-linear-to-br from-cream-50 to-cream-100 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("h1",{className:"text-9xl font-bold text-cream-200 select-none",children:"404"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-cream-900 text-white px-6 py-2 rounded-full shadow-lg",children:e.jsx("span",{className:"text-lg font-semibold",children:"Page Not Found"})})})]}),e.jsx("h2",{className:"text-2xl font-bold text-cream-900 mb-4",children:"Oops! Looks like you're lost"}),e.jsx("p",{className:"text-cream-600 mb-8 leading-relaxed",children:"The page you're looking for doesn't exist or has been moved. Don't worry, let's get you back on track!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs("button",{onClick:()=>s(-1),className:"flex items-center justify-center gap-2 px-6 py-3 bg-white border-2 border-cream-300 text-cream-700 rounded-lg font-semibold hover:bg-cream-50 hover:border-cream-400 transition-all shadow-sm",children:[e.jsx(Cd,{className:"w-5 h-5"}),"Go Back"]}),e.jsxs(ys,{to:"/",className:"flex items-center justify-center gap-2 px-6 py-3 bg-cream-900 text-white rounded-lg font-semibold hover:bg-cream-800 transition-all shadow-lg",children:[e.jsx(Wj,{className:"w-5 h-5"}),"Home Page"]})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-cream-200",children:[e.jsx("p",{className:"text-sm text-cream-500 mb-4",children:"Popular destinations:"}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[e.jsx(ys,{to:"/digital-print",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"Digital Print"}),e.jsx("span",{className:"text-cream-300",children:""}),e.jsx(ys,{to:"/about",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"About Us"}),e.jsx("span",{className:"text-cream-300",children:""}),e.jsx(ys,{to:"/contact",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"Contact"}),e.jsx("span",{className:"text-cream-300",children:""}),e.jsx(ys,{to:"/reviews",className:"text-cream-600 hover:text-cream-900 text-sm font-medium hover:underline",children:"Reviews"})]})]})]})})},lk=[{path:"/",element:e.jsx(wE,{}),errorElement:e.jsx(ma,{}),children:[{index:!0,element:e.jsx(ME,{}),errorElement:e.jsx(ma,{})},{path:"digital-print",element:e.jsx(_E,{}),errorElement:e.jsx(ma,{})},{path:"digital-print/:categoryId",element:e.jsx(Gp,{}),errorElement:e.jsx(ma,{})},{path:"digital-print/:categoryId/gloss-finish",element:e.jsx(xd,{}),errorElement:e.jsx(ma,{})},{path:"digital-print/:categoryId/:subCategoryId/:nestedSubCategoryId",element:e.jsx(Gp,{}),errorElement:e.jsx(ma,{})},{path:"digital-print/:categoryId/:subCategoryId",element:e.jsx(Gp,{}),errorElement:e.jsx(ma,{})},{path:"digital-print/:categoryId/:subCategoryId/:nestedSubCategoryId/:productId",element:e.jsx(xd,{}),errorElement:e.jsx(ma,{})},{path:"digital-print/:categoryId/:subCategoryId/:productId",element:e.jsx(xd,{}),errorElement:e.jsx(ma,{})},{path:"digital-print/:categoryId/:productId",element:e.jsx(xd,{}),errorElement:e.jsx(ma,{})},{path:"upload",element:e.jsx(UE,{}),errorElement:e.jsx(ma,{})},{path:"about",element:e.jsx(qE,{}),errorElement:e.jsx(ma,{})},{path:"policy",element:e.jsx(HE,{}),errorElement:e.jsx(ma,{})},{path:"contact",element:e.jsx(GE,{}),errorElement:e.jsx(ma,{})},{path:"login",element:e.jsx(YE,{}),errorElement:e.jsx(ma,{})},{path:"signup",element:e.jsx(KE,{}),errorElement:e.jsx(ma,{})},{path:"profile",element:e.jsx(tT,{}),errorElement:e.jsx(ma,{})},{path:"my-orders",element:e.jsx(lT,{}),errorElement:e.jsx(ma,{})},{path:"orders/:orderId",element:e.jsx(pj,{}),errorElement:e.jsx(ma,{})},{path:"order/:orderId",element:e.jsx(pj,{}),errorElement:e.jsx(ma,{})},{path:"admin/dashboard",element:e.jsx(ik,{}),errorElement:e.jsx(ma,{})},{path:"employee/dashboard",element:e.jsx(cT,{}),errorElement:e.jsx(ma,{})},{path:"department-portal",element:e.jsx(oT,{}),errorElement:e.jsx(ma,{})},{path:"reviews",element:e.jsx(XE,{}),errorElement:e.jsx(ma,{})},{path:"*",element:e.jsx(nk,{}),errorElement:e.jsx(ma,{})}]}],ic=document.getElementById("root");if(!ic)throw new Error("Could not find root element to mount to");const xj=vS(lk),ok=ic.innerHTML.trim().length>0&&!ic.innerHTML.includes("<!--app-html-->")&&ic.children.length>0;ok?mb.hydrateRoot(ic,e.jsx(ma,{children:e.jsx(Ib,{router:xj})})):mb.createRoot(ic).render(e.jsx(ma,{children:e.jsx(Ib,{router:xj})}));export{Ae as A,ki as B,ga as C,qb as F,Qt as L,uo as M,fm as P,Pi as R,Ji as U,as as X,Ud as _,Yr as a,_h as b,ca as c,Td as d,Jn as e,bs as f,ck as g,r1 as h,e as j,st as m,y as r};
