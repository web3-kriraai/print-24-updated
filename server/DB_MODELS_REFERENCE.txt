DATABASE MODELS REFERENCE
=========================

This file contains all database models, their fields, and references for the project.

--------------------------------------------------------------------------------
1. MODEL: AttributeRule
--------------------------------------------------------------------------------
Fields:
- name: String (Required)
- when: Object
    - attribute: ObjectId (Ref: AttributeType, Required)
    - value: String (Required)
- then: Array
    - action: String (Enum: SHOW, HIDE, SHOW_ONLY, SET_DEFAULT, TRIGGER_PRICING, Required)
    - targetAttribute: ObjectId (Ref: AttributeType)
    - allowedValues: [String]
    - defaultValue: String
    - pricingSignal: Object
        - pricingKey: String
        - scope: String (Enum: GLOBAL, ZONE, SEGMENT, PRODUCT, ATTRIBUTE)
        - priority: Number
- applicableCategory: ObjectId (Ref: Category)
- applicableProduct: ObjectId (Ref: Product)
- priority: Number
- isActive: Boolean

--------------------------------------------------------------------------------
2. MODEL: Complaint
--------------------------------------------------------------------------------
Fields:
- order: ObjectId (Ref: Order, Required)
- raisedBy: ObjectId (Ref: User, Required)
- type: String (Enum: PRICE, QUALITY, DELIVERY, Required)
- description: String (Required)
- priceSnapshot: Mixed
- resolutionStatus: String (Enum: OPEN, IN_REVIEW, RESOLVED, REJECTED)
- resolutionNotes: String
- resolvedBy: ObjectId (Ref: User)
- resolvedAt: Date

--------------------------------------------------------------------------------
3. MODEL: CorporateProfile
--------------------------------------------------------------------------------
Fields:
- user: ObjectId (Ref: User, Required, Unique)
- organizationName: String (Required)
- organizationType: String (Enum: PRIVATE_LIMITED, LLP, LIMITED, GOVERNMENT, HOSPITAL, SCHOOL, INSTITUTE, NGO, FRANCHISE, OTHER, Required)
- authorizedPersonName: String (Required)
- designation: String (Enum: PURCHASE_MANAGER, MARKETING_HEAD, ADMIN, FINANCE_MANAGER, DIRECTOR, OTHER, Required)
- mobileNumber: String (Required)
- whatsappNumber: String
- officialEmail: String (Required)
- gstNumber: String (Required)
- address: Object
    - fullAddress: String
    - city: String
    - state: String
    - pincode: String
- proofDocument: String (Required)
- verificationStatus: String (Enum: PENDING, APPROVED, REJECTED)
- verifiedBy: ObjectId (Ref: User)
- verifiedAt: Date

--------------------------------------------------------------------------------
4. MODEL: GeoZone
--------------------------------------------------------------------------------
Fields:
- name: String
- currency: String
- isRestricted: Boolean

--------------------------------------------------------------------------------
5. MODEL: GeoZoneMapping
--------------------------------------------------------------------------------
Fields:
- geoZone: ObjectId (Ref: GeoZone, Required)
- pincodeStart: Number (Required)
- pincodeEnd: Number (Required)

--------------------------------------------------------------------------------
6. MODEL: OrderStateLog
--------------------------------------------------------------------------------
Fields:
- order: ObjectId (Ref: Order, Required)
- fromState: String (Required)
- toState: String (Required)
- changedBy: ObjectId (Ref: User, Required)
- reason: String
- timestamp: Date

--------------------------------------------------------------------------------
7. MODEL: OrderState
--------------------------------------------------------------------------------
Fields:
- code: String (Enum: REQUESTED, APPROVED, DESIGN, PRODUCTION, QC, PACKED, DISPATCHED, DELIVERED, CANCELLED, Required, Unique)
- allowedNextStates: [String] (Required)

--------------------------------------------------------------------------------
8. MODEL: PriceBook
--------------------------------------------------------------------------------
Fields:
- name: String
- currency: String
- isDefault: Boolean

--------------------------------------------------------------------------------
9. MODEL: PriceBookEntry
--------------------------------------------------------------------------------
Fields:
- priceBook: ObjectId (Ref: PriceBook)
- product: ObjectId (Ref: Product)
- basePrice: Number
- compareAtPrice: Number

--------------------------------------------------------------------------------
10. MODEL: PriceModifier
--------------------------------------------------------------------------------
Fields:
- appliesTo: String (Enum: GLOBAL, ZONE, SEGMENT, PRODUCT, ATTRIBUTE, Required)
- geoZone: ObjectId (Ref: GeoZone)
- userSegment: ObjectId (Ref: UserSegment)
- product: ObjectId (Ref: Product)
- attributeType: ObjectId (Ref: AttributeType)
- attributeValue: String
- modifierType: String (Enum: PERCENT_INC, PERCENT_DEC, FLAT_INC, FLAT_DEC, Required)
- value: Number (Required)
- minQuantity: Number
- maxQuantity: Number
- validFrom: Date
- validTo: Date
- isStackable: Boolean
- priority: Number
- isActive: Boolean
- reason: String

--------------------------------------------------------------------------------
11. MODEL: PricingCalculationLog
--------------------------------------------------------------------------------
Fields:
- order: ObjectId (Ref: Order, Required)
- pricingKey: String (Required)
- modifier: ObjectId (Ref: PriceModifier)
- scope: String (Enum: GLOBAL, ZONE, SEGMENT, PRODUCT, ATTRIBUTE, Required)
- beforeAmount: Number (Required)
- afterAmount: Number (Required)
- reason: String
- appliedAt: Date

--------------------------------------------------------------------------------
12. MODEL: PrintPartnerProfile
--------------------------------------------------------------------------------
Fields:
- user: ObjectId (Ref: User, Required, Unique)
- businessName: String (Required)
- ownerName: String (Required)
- mobileNumber: String (Required)
- whatsappNumber: String
- email: String (Required)
- gstNumber: String
- address: Object
    - fullAddress: String
    - city: String
    - state: String
    - pincode: String
- proofDocument: String (Required)
- verificationStatus: String (Enum: PENDING, APPROVED, REJECTED)
- verifiedBy: ObjectId (Ref: User)
- verifiedAt: Date

--------------------------------------------------------------------------------
13. MODEL: ProductAvailability
--------------------------------------------------------------------------------
Fields:
- product: ObjectId (Ref: Product)
- geoZone: ObjectId (Ref: GeoZone)
- isSellable: Boolean
- reason: String

--------------------------------------------------------------------------------
14. MODEL: SegmentPriceBook
--------------------------------------------------------------------------------
Fields:
- userSegment: ObjectId (Ref: UserSegment)
- priceBook: ObjectId (Ref: PriceBook)
- priority: Number

--------------------------------------------------------------------------------
15. MODEL: User
--------------------------------------------------------------------------------
Fields:
- name: String
- firstName: String
- lastName: String
- email: String (Required, Unique)
- mobileNumber: String
- countryCode: String
- role: String (Enum: user, admin, emp)
- password: String (Required)
- userSegment: ObjectId (Ref: UserSegment)
- approvalStatus: String (Enum: pending, approved, rejected)
- signupIntent: String (Enum: CUSTOMER, PRINT_PARTNER, CORPORATE, Required)

--------------------------------------------------------------------------------
16. MODEL: UserSegment
--------------------------------------------------------------------------------
Fields:
- code: String (Enum: RETAIL, PRINT_PARTNER, CORPORATE, VIP, Required, Unique)
- name: String
- isDefault: Boolean

--------------------------------------------------------------------------------
17. MODEL: AttributeType
--------------------------------------------------------------------------------
Fields:
- attributeName: String (Required)
- functionType: String (Enum: QUANTITY_PRICING, PRINTING_IMAGE, SPOT_UV_IMAGE, GENERAL)
- pricingBehavior: String (Enum: NONE, SIGNAL_ONLY, QUANTITY_DRIVER)
- inputStyle: String (Enum: DROPDOWN, TEXT_FIELD, FILE_UPLOAD, NUMBER, CHECKBOX, RADIO, POPUP)
- isRequired: Boolean
- displayOrder: Number
- quantityConfig: Object
    - quantityType: String (Enum: SIMPLE, STEP_WISE, RANGE_WISE)
    - minQuantity: Number
    - maxQuantity: Number
    - quantityMultiples: Number
    - stepWiseQuantities: [Number]
    - rangeWiseQuantities: Array of Object {min, max, priceMultiplier, label}
- primaryEffectType: String (Enum: PRICE, FILE, VARIANT, INFORMATIONAL)
- effectDescription: String
- isFilterable: Boolean
- attributeValues: Array
    - value: String
    - label: String
    - pricingKey: String
    - description: String
    - image: String
    - hasSubAttributes: Boolean
- defaultValue: String
- isCommonAttribute: Boolean
- applicableCategories: [ObjectId] (Ref: Category)
- applicableSubCategories: [ObjectId] (Ref: SubCategory)

--------------------------------------------------------------------------------
18. MODEL: Category
--------------------------------------------------------------------------------
Fields:
- name: String (Required)
- description: String
- image: String
- type: String (Enum: Digital, Bulk, Required)
- parent: ObjectId (Ref: Category)
- sortOrder: Number
- slug: String (Unique)

--------------------------------------------------------------------------------
19. MODEL: Department
--------------------------------------------------------------------------------
Fields:
- name: String (Required, Unique)
- description: String
- isEnabled: Boolean
- operators: [ObjectId] (Ref: User)

--------------------------------------------------------------------------------
20. MODEL: Order
--------------------------------------------------------------------------------
Fields:
- user: ObjectId (Ref: User, Required)
- product: ObjectId (Ref: Product, Required)
- orderNumber: String (Unique)
- quantity: Number (Required)
- selectedDynamicAttributes: Array
    - attributeType: ObjectId (Ref: AttributeType, Required)
    - attributeName: String
    - pricingKey: String (Required)
    - value: Mixed
    - label: String
    - uploadedImages: Array of Object {data, contentType, filename}
- priceSnapshot: Object
    - basePrice: Number (Required)
    - quantity: Number (Required)
    - appliedModifiers: Array
        - pricingKey: String
        - modifierType: String (Enum: PERCENT_INC, PERCENT_DEC, FLAT_INC, FLAT_DEC)
        - value: Number
        - source: String (Enum: GLOBAL, ZONE, SEGMENT, PRODUCT, ATTRIBUTE)
        - modifierId: ObjectId (Ref: PriceModifier)
    - subtotal: Number (Required)
    - gstPercentage: Number
    - gstAmount: Number
    - totalPayable: Number (Required)
    - currency: String
    - calculatedAt: Date
- status: String (Enum: REQUESTED, DESIGN, APPROVED, PRODUCTION, QC, PACKED, DISPATCHED, DELIVERED, CANCELLED, REJECTED, Required)
- currentDepartment: ObjectId (Ref: Department)
- address: String (Required)
- pincode: String (Required)
- mobileNumber: String (Required)
- advancePaid: Number
- paymentStatus: String (Enum: PENDING, PARTIAL, COMPLETED)
- paymentGatewayInvoiceId: String
- paperGSM: String
- laminationType: String
- specialEffects: [String]
- notes: String
- adminNotes: String

--------------------------------------------------------------------------------
21. MODEL: PrintPartnerRequest
--------------------------------------------------------------------------------
Fields:
- businessName: String (Required)
- ownerName: String (Required)
- mobileNumber: String (Required)
- whatsappNumber: String (Required)
- emailAddress: String (Required)
- gstNumber: String
- fullBusinessAddress: String (Required)
- city: String (Required)
- state: String (Required)
- pincode: String (Required)
- proofFileUrl: String (Required)
- password: String (Required)
- status: String (Enum: pending, approved, rejected)
- approvedBy: ObjectId (Ref: User)
- approvedAt: Date
- rejectionReason: String
- userId: ObjectId (Ref: User)

--------------------------------------------------------------------------------
22. MODEL: Product
--------------------------------------------------------------------------------
Fields:
- category: ObjectId (Ref: Category, Required)
- subcategory: ObjectId (Ref: SubCategory)
- name: String (Required)
- description: String
- descriptionArray: [String]
- productType: String
- image: String
- options: Array of Object {name, description, image}
- filters: Object (Legacy)
    - printingOption: [String]
    - deliverySpeed: [String]
    - textureType: [String]
    - orderQuantity: Object {quantityType, min, max, multiples, stepWiseQuantities, rangeWiseQuantities}
- dynamicAttributes: Array
    - attributeType: ObjectId (Ref: AttributeType, Required)
    - dependsOn: Object {attribute (Ref: AttributeType), value}
    - isEnabled: Boolean
    - displayOrder: Number
    - isRequired: Boolean
- quantityConfig: Object
    - quantityType: String (Enum: SIMPLE, STEP_WISE, RANGE_WISE)
    - minQuantity: Number
    - maxQuantity: Number
    - multiples: Number
    - stepWiseQuantities: [Number]
    - rangeWiseQuantities: Array of Object {min, max, label}
- fileRules: Object
    - maxFileSizeMB: Number
    - minWidth: Number
    - maxWidth: Number
    - minHeight: Number
    - maxHeight: Number
    - blockedFormats: [String]
- additionalDesignCharge: Number
- gstPercentage: Number
- showPriceIncludingGst: Boolean
- instructions: String
- productionSequence: [ObjectId] (Ref: Department)

--------------------------------------------------------------------------------
23. MODEL: Review
--------------------------------------------------------------------------------
Fields:
- user: ObjectId (Ref: User)
- userName: String (Required)
- rating: Number (Required, 1-5)
- comment: String (Required)

--------------------------------------------------------------------------------
24. MODEL: Sequence
--------------------------------------------------------------------------------
Fields:
- name: String (Required)
- category: ObjectId (Ref: Category, Required)
- subcategory: ObjectId (Ref: SubCategory)
- departments: Array
    - department: ObjectId (Ref: Department, Required)
    - order: Number (Required)
- attributes: [ObjectId] (Ref: AttributeType)
- isDefault: Boolean

--------------------------------------------------------------------------------
25. MODEL: SubAttribute
--------------------------------------------------------------------------------
Fields:
- parentAttribute: ObjectId (Ref: AttributeType, Required)
- parentValue: String (Required)
- value: String (Required)
- label: String (Required)
- image: String
- pricingKey: String (Required)
- isEnabled: Boolean

--------------------------------------------------------------------------------
26. MODEL: SubCategory
--------------------------------------------------------------------------------
Fields:
- category: ObjectId (Ref: Category, Required)
- parent: ObjectId (Ref: SubCategory)
- name: String (Required)
- description: String
- image: String
- slug: String (Unique)
- sortOrder: Number

--------------------------------------------------------------------------------
27. MODEL: Design
--------------------------------------------------------------------------------
Fields:
- user: ObjectId (Ref: User, Required)
- height: Number (Required)
- width: Number (Required)
- description: String
- safeArea: Object {top, bottom, left, right}
- bleedArea: Object {top, bottom, left, right}
- frontImage: Object {data (Buffer), contentType, filename, size} (Required)
- backImage: Object {data (Buffer), contentType, filename, size}
